!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="./single-bundle.js")}({"./modules/base.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{},window.sf.base=function(e){"use strict";var t="ej2_instances",n=0,s=!1;function o(e,t){var i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function r(e){var t,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var n="ej2"+function(e){for(var t="",i=0;i<5;i++)t+=(i?",":"")+e[i];return t}(i),s=function(i){i.source===window&&"string"==typeof i.data&&i.data.length<=32&&i.data===n&&(e(),t())};return window.addEventListener("message",s,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",s),e=s=n=void 0}}function a(e,t){for(var i=t,n=e.replace(/\[/g,".").replace(/\]/g,"").split("."),s=0;s<n.length&&!m(i);s++)i=i[n[s]];return i}function l(e,t,i){var n,s,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),r=i||{},a=r,l=o.length;for(n=0;n<l;n++)s=o[n],n+1===l?a[s]=void 0===t?{}:t:f(a[s])&&(a[s]={}),a=a[s];return r}function d(e,t){delete e[t]}var h="undefined"!=typeof window?window:{};function c(e){return!f(e)&&e.constructor==={}.constructor}function p(e,t){if(!f(t))for(var i=e,n=t,s=0,o=Object.keys(t);s<o.length;s++){var r=o[s];f(i.deepMerge)||-1===i.deepMerge.indexOf(r)||!c(n[r])&&!Array.isArray(n[r])?i[r]=n[r]:u(i[r],i[r],n[r],!0)}}function u(e,t,n,s){var o=e&&"object"===i(e)?e:{},r=arguments.length;s&&(r-=1);for(var a=function(e){if(!l[e])return"continue";var t=l[e];Object.keys(t).forEach((function(e){var i,n=o[e],r=t[e],a=Array.isArray(r)&&Array.isArray(n)&&r.length!==n.length,l=!y()||!(n instanceof Event||a);s&&l&&(c(r)||Array.isArray(r))?c(r)?(i=n||{},Array.isArray(i)&&i.hasOwnProperty("isComplexArray")?u(i,{},r,s):o[e]=u(i,{},r,s)):(i=y()?n&&Object.keys(r).length:n||[],o[e]=u([],i,r,i&&i.length||r&&r.length)):o[e]=r}))},l=arguments,d=1;d<r;d++)a(d);return o}function f(e){return null==e}function m(e){return void 0===e}function g(e,t){var i;return function(){var n=this,s=arguments,o=function(){return i=null,e.apply(n,s)};clearTimeout(i),i=setTimeout(o,t)}}function v(e,t){return e===t||!(e===document||!e)&&v(e.parentNode,t)}function b(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}function y(){return s}function w(){if("undefined"!=typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}var C,S,E={latn:{_digits:"0123456789",_type:"numeric"}},x={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"∞",nan:"NaN",exponential:"E"},O=[0,1,2,3,4,5,6,7,8,9],T=function(){function e(){}return e.getMainObject=function(e,t){return a(y()?t:"main."+t,e)},e.getNumberingSystem=function(e){return a("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var i={},n=0,s=t||Object.keys(e);n<s.length;n++){var o=s[n];i.hasOwnProperty(e[o])||(i[e[o]]=o)}return i},e.getSymbolRegex=function(e){var t=e.map((function(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")})).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},i=0,n=Object.keys(x);i<n.length;i++){var s=n[i];t[e[s]]=x[s]}return t},e.constructRegex=function(e){for(var t=e.length,i="",n=0;n<t;n++)i+=n!==t-1?e[n]+"|":e[n];return i},e.convertValueParts=function(e,t,i){return e.replace(t,(function(e){return i[e]}))},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=a("numbers",e),t.nSystem=a("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,i,n){var s={},o=this.getDefaultNumberingSystem(e);if(!m(o.nSystem)||n){var r=n?a("obj.mapperDigits",o):a(o.nSystem+"._digits",t);m(r)||(s.numericPair=this.reverseObject(r,O),s.numberParseRegex=new RegExp(this.constructRegex(r),"g"),s.numericRegex="["+r[0]+"-"+r[9]+"]",i&&(s.numericRegex=r[0]+"-"+r[9],s.symbolNumberSystem=a(n?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),s.symbolMatch=this.getSymbolMatch(s.symbolNumberSystem),s.numberSystem=o.nSystem))}return s},e.getNumberMapper=function(e,t,i){var n={mapper:{}},s=this.getDefaultNumberingSystem(e);if(!m(s.nSystem)){n.numberSystem=s.nSystem,n.numberSymbols=a("symbols-numberSystem-"+s.nSystem,s.obj),n.timeSeparator=a("timeSeparator",n.numberSymbols);var o=a(s.nSystem+"._digits",t);if(!m(o))for(var r=0,l=O;r<l.length;r++){var d=l[r];n.mapper[d]=o[d]}}return n},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=E,e}(),A={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH₵",XDR:"XDR",AED:"د.إ.‏",BHD:"د.ب.‏",DZD:"د.ج.‏",EGP:"ج.م.‏",ILS:"₪",IQD:"د.ع.‏",JOD:"د.ا.‏",KMF:"CF",KWD:"د.ك.‏",LBP:"ل.ل.‏",LYD:"د.ل.‏",MAD:"د.م.‏",MRU:"أ.م.",OMR:"ر.ع.‏",QAR:"ر.ق.‏",SAR:"ر.س.‏",SDG:"ج.س.",SOS:"S",SSP:"£",SYP:"ل.س.‏",TND:"د.ت.‏",YER:"ر.ي.‏",CLP:"$",INR:"₹",TZS:"TSh",EUR:"€",AZN:"₼",RUB:"₽",BYN:"Br",ZMW:"K",BGN:"лв.",NGN:"₦",XOF:"CFA",BDT:"৳",CNY:"¥",BAM:"КМ",UGX:"USh",USD:"$",CZK:"Kč",GBP:"£",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"ރ.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"£",GIP:"£",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"₱",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"£",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"₡",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"₲",UYU:"$",VES:"Bs.S",IRR:"ريال",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"֏",ISK:"kr",JPY:"¥",GEL:"₾",CVE:"​",KZT:"₸",KHR:"៛",KPW:"₩",KRW:"₩",KGS:"сом",AOA:"Kz",LAK:"₭",MZN:"MTn",MKD:"ден",MNT:"₮",BND:"$",MMK:"K",NOK:"kr",NPR:"रु",AWG:"Afl.",SRD:"$",PLN:"zł",AFN:"؋",STN:"Db",MDL:"L",RON:"lei",UAH:"₴",LKR:"රු.",ALL:"Lekë",RSD:"дин.",TJS:"смн",THB:"฿",TMT:"m.",TRY:"₺",UZS:"сўм",VND:"₫",TWD:"NT$"};C=e.HijriParser||(e.HijriParser={}),S=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],C.getHijriDate=function(e){var t=e.getDate(),i=e.getMonth(),n=e.getFullYear(),s=i+1,o=n;s<3&&(o-=1,s+=12);var r=Math.floor(o/100),a=r-Math.floor(r/4)-2,l=Math.floor(365.25*(o+4716))+Math.floor(30.6001*(s+1))+t-a-1524,d=l+(a=(r=Math.floor((l-1867216.25)/36524.25))-Math.floor(r/4)+1)+1524,h=Math.floor((d-122.1)/365.25),c=Math.floor(365.25*h),p=Math.floor((d-c)/30.6001);t=d-c-Math.floor(30.6001*p),(i=Math.floor((d-c)/20.6001))>13&&(h+=1,i-=12),i-=1,n=h-4716;var u=l-24e5,f=l-1948084,m=Math.floor(f/10631);f-=10631*m;var g=Math.floor((f-.1335)/(10631/30)),v=30*m+g;f-=Math.floor(g*(10631/30)+.1335);var b=Math.floor((f+28.5001)/29.5);13===b&&(b=12);for(var y=f-Math.floor(29.5001*b-29),w=0;w<S.length&&!(S[w]>u);w++);var C=w+16260,E=Math.floor((C-1)/12),x=E+1,O=C-12*E,T=u-S[w-1]+1;return(T+"").length>2&&(T=y,O=b,x=v),{year:x,month:O,date:T}},C.toGregorian=function(e,t,i){var n=i+S[12*(e-1)+1+(t-1)-16260-1]-1+24e5,s=Math.floor(n+.5),o=Math.floor((s-1867216.25)/36524.25),r=1524+(o=s+1+o-Math.floor(o/4)),a=Math.floor((r-122.1)/365.25),l=Math.floor(365.25*a),d=Math.floor((r-l)/30.6001),h=r-l-Math.floor(30.6001*d),c=d-(d>13.5?13:1),p=a-(c>2.5?4716:4715);return p<=0&&c--,new Date(p+"/"+c+"/"+h)};var N=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,k=["sun","mon","tue","wed","thu","fri","sat"],I={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},M={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},L=function(){function t(){}return t.dateFormat=function(t,i,n){var s=this,o=e.IntlBase.getDependables(n,t,i.calendar),r=a("parserObject.numbers",o),l=o.dateObject,d={isIslamic:e.IntlBase.islamicRegex.test(i.calendar)};y()&&i.isServerRendered&&(i=e.IntlBase.compareBlazorDateFormats(i,t));var h=i.format||e.IntlBase.getResultantPattern(i.skeleton,o.dateObject,i.type,!1,y()?t:"");if(d.dateSeperator=y()?a("dateSeperator",l):e.IntlBase.getDateSeparator(o.dateObject),m(h))b("Format options or type given must be invalid");else{h=e.IntlBase.ConvertDateToWeekFormat(h),y()&&(h=h.replace(/tt/,"a")),d.pattern=h,d.numMapper=y()?u({},r):T.getNumberMapper(o.parserObject,T.getNumberingSystem(n));for(var c=0,p=h.match(N)||[];c<p.length;c++){var f=p[c],g=f.length,v=f[0];switch("K"===v&&(v="h"),v){case"E":case"c":y()?d.weekday=a("days."+e.IntlBase.monthIndex[g],l):d.weekday=o.dateObject[e.IntlBase.days]["stand-alone"][e.IntlBase.monthIndex[g]];break;case"M":case"L":y()?d.month=a("months."+e.IntlBase.monthIndex[g],l):d.month=o.dateObject[e.IntlBase.month]["stand-alone"][e.IntlBase.monthIndex[g]];break;case"a":d.designator=y()?a("dayPeriods",l):a("dayPeriods.format.wide",l);break;case"G":var w=g<=3?"eraAbbr":4===g?"eraNames":"eraNarrow";d.era=y()?a("eras",l):a("eras."+w,o.dateObject);break;case"z":d.timeZone=a("dates.timeZoneNames",o.parserObject)}}}return function(e){return isNaN(e.getDate())?null:s.intDateFormatter(e,d)}},t.intDateFormatter=function(t,i){for(var n="",s=i.pattern.match(e.IntlBase.dateParseRegex),o=this.getCurrentDateValue(t,i.isIslamic),r=0,a=s;r<a.length;r++){var l=a[r],d=l.length,h=l[0];"K"===h&&(h="h");var c=void 0,p="",u=void 0,m=void 0,g="";switch(h){case"M":case"L":c=o.month,d>2?n+=i.month[c]:u=!0;break;case"E":case"c":n+=i.weekday[k[t.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(u=!0,"d"===h)c=o.date;else if("f"===h){u=!1,m=!0;var v=(p=(p=t[I[h]]().toString()).substring(0,d)).length;if(d!==v){if(d>3)continue;for(var b=0;b<d-v;b++)p="0"+p.toString()}g+=p}else c=t[I[h]]();"h"===h&&(c=c%12||12);break;case"y":m=!0,g+=o.year,2===d&&(g=g.substr(g.length-2));break;case"a":var y=t.getHours()<12?"am":"pm";n+=i.designator[y];break;case"G":var w=t.getFullYear()<0?0:1,C=i.era[w];f(C)&&(C=i.era[w?0:1]),n+=C||"";break;case"'":n+="''"===l?"'":l.replace(/'/g,"");break;case"z":var S=t.getTimezoneOffset(),E=d<4?"+H;-H":i.timeZone.hourFormat;E=E.replace(/:/g,i.numMapper.timeSeparator),0===S?n+=i.timeZone.gmtZeroFormat:(m=!0,g=this.getTimeZoneValue(S,E)),g=i.timeZone.gmtFormat.replace(/\{0\}/,g);break;case":":n+=i.numMapper.numberSymbols.timeSeparator;break;case"/":n+=i.dateSeperator;break;case"W":u=!0,c=e.IntlBase.getWeekOfYear(t);break;default:n+=l}u&&(m=!0,g=this.checkTwodigitNumber(c,d)),m&&(n+=T.convertValueParts(g,e.IntlBase.latnParseRegex,i.numMapper.mapper))}return n},t.getCurrentDateValue=function(t,i){return i?e.HijriParser.getHijriDate(t):{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate()}},t.checkTwodigitNumber=function(e,t){var i=e+"";return 2===t&&2!==i.length?"0"+i:i},t.getTimeZoneValue=function(e,t){var i=this,n=t.split(";")[e>0?1:0],s=Math.abs(e);return n.replace(/HH?|mm/g,(function(e){var t=e.length,n=-1!==e.indexOf("H");return i.checkTwodigitNumber(Math.floor(n?s/60:s%60),t)}))},t}(),B={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},D=["infinity","nan","group","decimal","exponential"],P=function(){function t(){}return t.numberFormatter=function(t,i,n){var s,o=this,r=u({},i),l={},d={},h=e.IntlBase.getDependables(n,t,"",!0),c=h.numericObject;d.numberMapper=y()?u({},c):T.getNumberMapper(h.parserObject,T.getNumberingSystem(n),!0),d.currencySymbol=y()?a("currencySymbol",c):e.IntlBase.getCurrencySymbol(h.numericObject,r.currency||e.defaultCurrencyCode,i.altSymbol),d.percentSymbol=y()?a("numberSymbols.percentSign",c):d.numberMapper.numberSymbols.percentSign,d.minusSymbol=y()?a("numberSymbols.minusSign",c):d.numberMapper.numberSymbols.minusSign;var p=d.numberMapper.numberSymbols;if(i.format&&!e.IntlBase.formatRegex.test(i.format))l=e.IntlBase.customFormat(i.format,d,h.numericObject);else{if(u(r,e.IntlBase.getProperNumericSkeleton(i.format||"N")),r.isCurrency="currency"===r.type,r.isPercent="percent"===r.type,y()||(s=e.IntlBase.getSymbolPattern(r.type,d.numberMapper.numberSystem,h.numericObject,r.isAccount)),r.groupOne=this.checkValueRange(r.maximumSignificantDigits,r.minimumSignificantDigits,!0),this.checkValueRange(r.maximumFractionDigits,r.minimumFractionDigits,!1,!0),m(r.fractionDigits)||(r.minimumFractionDigits=r.maximumFractionDigits=r.fractionDigits),m(r.useGrouping)&&(r.useGrouping=!0),r.isCurrency&&!y()&&(s=s.replace(/\u00A4/g,e.IntlBase.defaultCurrency)),y())l.nData=u({},{},a(r.type+"nData",c)),l.pData=u({},{},a(r.type+"pData",c)),"currency"===r.type&&i.currency&&e.IntlBase.replaceBlazorCurrency([l.pData,l.nData],d.currencySymbol,i.currency);else{var f=s.split(";");l.nData=e.IntlBase.getFormatData(f[1]||"-"+f[0],!0,d.currencySymbol),l.pData=e.IntlBase.getFormatData(f[0],!1,d.currencySymbol),r.useGrouping&&(r.groupSeparator=p[D[2]],r.groupData=this.getGroupingDetails(f[0]))}if(m(r.minimumFractionDigits)&&(r.minimumFractionDigits=l.nData.minimumFraction),m(r.maximumFractionDigits)){var g=l.nData.maximumFraction;r.maximumFractionDigits=m(g)&&r.isPercent?0:g}var v=r.minimumFractionDigits,b=r.maximumFractionDigits;m(v)||m(b)||v>b&&(r.maximumFractionDigits=v)}return u(l.nData,r),u(l.pData,r),function(e){return isNaN(e)?p[D[1]]:isFinite(e)?o.intNumberFormatter(e,l,d):p[D[0]]}},t.getGroupingDetails=function(t){var i={},n=t.match(e.IntlBase.negativeDataRegex);if(n&&n[4]){var s=n[4],o=s.lastIndexOf(",");if(-1!==o){var r=s.split(".")[0];i.primary=r.length-o-1;var a=s.lastIndexOf(",",o-1);-1!==a&&(i.secondary=o-1-a)}}return i},t.checkValueRange=function(e,t,i,n){var s=n?"f":"s",o=0,r=B["l"+s],a=B["m"+s];if(m(e)||(this.checkRange(e,r,n),o++),m(t)||(this.checkRange(t,a,n),o++),2===o){if(!(e<t))return!0;b(a+"specified must be less than the"+r)}else i&&1===o&&b("Both"+a+"and"+a+"must be present");return!1},t.checkRange=function(e,t,i){var n=i?[0,20]:[1,21];(e<n[0]||e>n[1])&&b(t+"value must be within the range"+n[0]+"to"+n[1])},t.intNumberFormatter=function(t,i,n){var s;if(!m(i.nData.type)){t<0?(t*=-1,s=i.nData):s=0===t&&i.zeroData||i.pData;var o="";return s.isPercent&&(t*=100),s.groupOne?o=this.processSignificantDigits(t,s.minimumSignificantDigits,s.maximumSignificantDigits):(o=this.processFraction(t,s.minimumFractionDigits,s.maximumFractionDigits),s.minimumIntegerDigits&&(o=this.processMinimumIntegers(o,s.minimumIntegerDigits))),"scientific"===s.type&&(o=(o=t.toExponential(s.maximumFractionDigits)).replace("e",n.numberMapper.numberSymbols[D[4]])),o=o.replace(".",n.numberMapper.numberSymbols[D[3]]),s.useGrouping&&(o=this.groupNumbers(o,s.groupData.primary,s.groupSeparator||",",n.numberMapper.numberSymbols[D[3]]||".",s.groupData.secondary)),o=T.convertValueParts(o,e.IntlBase.latnParseRegex,n.numberMapper.mapper),"N/A"===s.nlead?s.nlead:s.nlead+o+s.nend}},t.processSignificantDigits=function(e,t,i){var n=e+"";return n.length<t?e.toPrecision(t):+(n=e.toPrecision(i))+""},t.groupNumbers=function(e,t,i,n,s){for(var o=!f(s)&&0!==s,r=e.split(n),a=r[0],l=a.length,d="";l>t;)d=a.slice(l-t,l)+(d.length?i+d:""),l-=t,o&&(t=s,o=!1);return r[0]=a.slice(0,l)+(d.length?i:"")+d,r.join(n)},t.processFraction=function(e,t,i){var n=(e+"").split(".")[1],s=n?n.length:0;if(t&&s<t){var o="";if(0!==s){o+=e;for(var r=0;r<t-s;r++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!f(i)&&(s>i||0===i)?e.toFixed(i):e+""},t.processMinimumIntegers=function(e,t){var i=e.split("."),n=i[0],s=n.length;if(s<t){for(var o=0;o<t-s;o++)n="0"+n;i[0]=n}return i.join(".")},t}(),R=/^[0-9]*$/,H={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},z=function(){function t(){}return t.dateParser=function(t,i,n){var s=this,o=e.IntlBase.getDependables(n,t,i.calendar),r=T.getCurrentNumericOptions(o.parserObject,T.getNumberingSystem(n),!1,y()),l={};y()&&i.isServerRendered&&(i=e.IntlBase.compareBlazorDateFormats(i,t));var d,h=i.format||e.IntlBase.getResultantPattern(i.skeleton,o.dateObject,i.type,!1,y()?t:""),c="";if(m(h))b("Format options or type given must be invalid");else{h=e.IntlBase.ConvertDateToWeekFormat(h),l={isIslamic:e.IntlBase.islamicRegex.test(i.calendar),pattern:h,evalposition:{},culture:t};for(var p=h.match(e.IntlBase.dateParseRegex)||[],u=p.length,g=0,v=0,w=!1,C=r.numericRegex,S=y()?o.parserObject.numbers:T.getNumberMapper(o.parserObject,T.getNumberingSystem(n)),E=0;E<u;E++){var x=p[E],O=x.length,A="K"===x[0]?"h":x[0],N=void 0,k=void 0,I=M[A],L=2===O?"":"?";switch(w&&(g=v,w=!1),A){case"E":case"c":var B=void 0;B=y()?a("days."+e.IntlBase.monthIndex[O],o.dateObject):o.dateObject[e.IntlBase.days]["stand-alone"][e.IntlBase.monthIndex[O]];var D=T.reverseObject(B);c+="("+Object.keys(D).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(k=!0,("M"===A||"L"===A)&&O>2){var P=void 0;P=y()?a("months."+e.IntlBase.monthIndex[O],o.dateObject):o.dateObject.months["stand-alone"][e.IntlBase.monthIndex[O]],l[I]=T.reverseObject(P),c+="("+Object.keys(l[I]).join("|")+")"}else if("f"===A){if(O>3)continue;N=!0,c+="("+C+C+"?"+C+"?)"}else N=!0,c+="("+C+C+L+")";"h"===A&&(l.hour12=!0);break;case"W":c+="("+C+(1===O?"?":"")+C+")";break;case"y":k=N=!0,c+=2===O?"("+C+C+")":"("+C+"{"+O+",})";break;case"a":k=!0;var R=y()?a("dayPeriods",o.dateObject):a("dayPeriods.format.wide",o.dateObject);l[I]=T.reverseObject(R),c+="("+Object.keys(l[I]).join("|")+")";break;case"G":k=!0;var H=O<=3?"eraAbbr":4===O?"eraNames":"eraNarrow";l[I]=T.reverseObject(y()?a("eras",o.dateObject):a("eras."+H,o.dateObject)),c+="("+Object.keys(l[I]).join("|")+"?)";break;case"z":k=0!==(new Date).getTimezoneOffset(),l[I]=a("dates.timeZoneNames",o.parserObject);var z=l[I],U=(d=O<4)?"+H;-H":z.hourFormat;U=U.replace(/:/g,S.timeSeparator),c+="("+this.parseTimeZoneRegx(U,z,C)+")?",w=!0,v=d?6:12;break;case"'":c+="("+x.replace(/'/g,"")+")?";break;default:c+="([\\D])"}k&&(l.evalposition[I]={isNumber:N,pos:E+1+g,hourOnly:d}),E!==u-1||f(c)||(l.parserRegex=new RegExp("^"+c+"$","i"))}}return function(t){var i=s.internalDateParse(t,l,r);if(f(i)||!Object.keys(i).length)return null;if(l.isIslamic){var n={},o=i.year,a=i.day,d=i.month,h=o?o+"":"",c=2===h.length;o&&d&&a&&!c||(n=e.HijriParser.getHijriDate(new Date)),c&&(o=parseInt((n.year+"").slice(0,2)+h,10));var p=e.HijriParser.toGregorian(o||n.year,d||n.month,a||n.date);i.year=p.getFullYear(),i.month=p.getMonth()+1,i.day=p.getDate()}return s.getDateObject(i)}},t.getDateObject=function(e,t){var i=t||new Date;i.setMilliseconds(0);var n=e.year,s=e.designator,o=e.timeZone;if(!m(n)){if((n+"").length<=2)n+=100*Math.floor(i.getFullYear()/100);i.setFullYear(n)}for(var r=0,a=["hour","minute","second","milliseconds","month","day"];r<a.length;r++){var l=a[r],d=e[l];if(m(d)&&"day"===l&&i.setDate(1),!m(d))if("month"===l){if((d-=1)<0||d>11)return new Date("invalid");var h=i.getDate();i.setDate(1),i[H[l]](d);var c=new Date(i.getFullYear(),d+1,0).getDate();i.setDate(h<c?h:c)}else{if("day"===l){var p=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(d<1||d>p)return null}i[H[l]](d)}}if(!m(s)){var u=i.getHours();"pm"===s?i.setHours(u+(12===u?0:12)):12===u&&i.setHours(0)}if(!m(o)){var f=o-i.getTimezoneOffset();0!==f&&i.setMinutes(i.getMinutes()+f)}return i},t.internalDateParse=function(e,t,i){var n=e.match(t.parserRegex),s={hour:0,minute:0,second:0};if(f(n))return null;for(var o=0,r=Object.keys(t.evalposition);o<r.length;o++){var a=r[o],l=t.evalposition[a],d=n[l.pos];if(l.isNumber)s[a]=this.internalNumberParser(d,i);else if("timeZone"!==a||m(d))d="month"!==a||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?d:d[0].toUpperCase()+d.substring(1).toLowerCase(),s[a]=t[a][d];else{var h=l.pos,c=void 0,p=n[h+1],u=!m(p);l.hourOnly?c=60*this.getZoneValue(u,p,n[h+4],i):(c=60*this.getZoneValue(u,p,n[h+7],i),c+=this.getZoneValue(u,n[h+4],n[h+10],i)),f(c)||(s[a]=c)}}return t.hour12&&(s.hour12=!0),s},t.internalNumberParser=function(e,t){return e=T.convertValueParts(e,t.numberParseRegex,t.numericPair),R.test(e)?+e:null},t.parseTimeZoneRegx=function(e,t,i){var n,s,o=t.gmtFormat,r="("+i+")("+i+")";return n=e.replace("+","\\+"),s=(n=-1!==e.indexOf("HH")?n.replace(/HH|mm/g,"("+r+")"):n.replace(/H|m/g,"("+r+"?)")).split(";").map((function(e){return o.replace("{0}",e)})),n=s.join("|")+"|"+t.gmtZeroFormat},t.getZoneValue=function(e,t,i,n){var s=e?t:i;if(!s)return 0;var o=this.internalNumberParser(s,n);return e?-o:o},t}(),U=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,q=/,/g,_=["minusSign","infinity"],F=function(){function t(){}return t.numberParser=function(t,i,n){var s,o=this,r=e.IntlBase.getDependables(n,t,"",!0),l={custom:!0};e.IntlBase.formatRegex.test(i.format)||!i.format?(u(l,e.IntlBase.getProperNumericSkeleton(i.format||"N")),l.custom=!1,l.fractionDigits||i.maximumFractionDigits&&(l.maximumFractionDigits=i.maximumFractionDigits)):u(l,e.IntlBase.customFormat(i.format,null,null));var d,h=a("numbers",r.parserObject);if(s=T.getCurrentNumericOptions(r.parserObject,T.getNumberingSystem(n),!0,y()),l.symbolRegex=T.getSymbolRegex(Object.keys(s.symbolMatch)),l.infinity=s.symbolNumberSystem[_[1]],y())l.nData=u({},{},a(l.type+"nData",h)),l.pData=u({},{},a(l.type+"pData",h)),"currency"===l.type&&i.currency&&e.IntlBase.replaceBlazorCurrency([l.pData,l.nData],a("currencySymbol",h),i.currency);else if(d=e.IntlBase.getSymbolPattern(l.type,s.numberSystem,r.numericObject,l.isAccount)){var c=(d=d.replace(/\u00A4/g,e.IntlBase.defaultCurrency)).split(";");l.nData=e.IntlBase.getFormatData(c[1]||"-"+c[0],!0,""),l.pData=e.IntlBase.getFormatData(c[0],!0,"")}return function(e){return o.getParsedNumber(e,l,s)}},t.getParsedNumber=function(e,t,i){var n,s,o,r,a,l;if(-1!==e.indexOf(t.infinity))return 1/0;e=T.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=-1!==(e=T.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf("-")?e.replace("-.","-0."):e).indexOf(".")&&(e="0"+e);var d=e.match(U);if(f(d))return NaN;r=d[1],o=d[2];var h=d[5];return a=d[6],s=(n=t.custom?r===t.nData.nlead&&a===t.nData.nend:-1!==r.indexOf(t.nData.nlead)&&-1!==a.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,o=o.replace(q,""),h&&(o+=h),l=+o,("percent"===t.type||s)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),t.maximumFractionDigits&&(l=this.convertMaxFracDigits(o,t,l,n)),n&&(l*=-1),l},t.convertMaxFracDigits=function(e,t,i,n){var s=e.split(".");return s[1]&&s[1].length>t.maximumFractionDigits&&(i=+i.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.maximumFractionDigits)),i},t}(),V=function(){function e(e){this.ranArray=[],this.boundedEvents={},f(e)||(this.context=e)}return e.prototype.on=function(e,t,i,n){if(!f(t)){var s=i||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:s}]:f(n)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:s}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[e].push({handler:t,context:s,id:n}))}},e.prototype.off=function(e,t,i){if(!this.notExist(e)){var n=a(e,this.boundedEvents);if(t){for(var s=0;s<n.length;s++)if(i){if(n[s].id===i){n.splice(s,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===n[s].handler){n.splice(s,1);break}}else delete this.boundedEvents[e]}},e.prototype.notify=function(e,t,i,n){if(this.notExist(e))i&&i.call(this,t);else{t&&(t.name=e);var s=a(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(s,t,i,n,0);for(var o=0,r=s;o<r.length;o++){var l=r[o];l.handler.call(l.context,t)}i&&i.call(this,t)}},e.prototype.blazorCallback=function(e,t,i,n,s){var o=this,r=s===e.length-1;if(s<e.length){var a=e[s],l=a.handler.call(a.context,t);if(l&&"function"==typeof l.then){if(!i)return l;l.then((function(l){if(l="string"==typeof l&&o.isJson(l)?JSON.parse(l,o.dateReviver):l,u(t,t,l,!0),!i||!r)return o.blazorCallback(e,t,i,n,s+1);i.call(a.context,t)})).catch((function(e){n&&n.call(a.context,"string"==typeof e&&o.isJson(e)?JSON.parse(e,o.dateReviver):e)}))}else{if(!i||!r)return this.blazorCallback(e,t,i,n,s+1);i.call(a.context,t)}}},e.prototype.dateReviver=function(e,t){return y&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},e.prototype.isHandlerPresent=function(e,t){for(var i=0,n=e;i<n.length;i++){if(n[i].handler===t)return!0}return!1},e}(),j=new V;e.rightToLeft=!1;var W={};e.defaultCulture="en-US",e.defaultCurrencyCode="USD";var X=["numericObject","dateObject"],Y=function(){function t(e){e&&(this.culture=e)}return t.prototype.getDateFormat=function(e){return L.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},W)},t.prototype.getNumberFormat=function(t){return t&&!t.currency&&(t.currency=e.defaultCurrencyCode),y()&&t&&!t.format&&(t.minimumFractionDigits=0),P.numberFormatter(this.getCulture(),t||{},W)},t.prototype.getDateParser=function(e){return z.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},W)},t.prototype.getNumberParser=function(e){return y()&&e&&!e.format&&(e.minimumFractionDigits=0),F.numberParser(this.getCulture(),e||{format:"N"},W)},t.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},t.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},t.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},t.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},t.prototype.getDatePattern=function(t,i){return e.IntlBase.getActualDateTimeFormat(this.getCulture(),t,W,i)},t.prototype.getNumberPattern=function(t,i){return e.IntlBase.getActualNumberFormat(this.getCulture(),t,W,i)},t.prototype.getFirstDayOfWeek=function(){return e.IntlBase.getWeekData(this.getCulture(),W)},t.prototype.getCulture=function(){return this.culture||e.defaultCulture},t}();var K={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(t){t.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var i=/[0-9]/g;t.defaultCurrency="$";var n=["infinity","nan","group","decimal"],s=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,o={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};t.dateConverterMapper=/dddd|ddd/gi;t.islamicRegex=/^islamic/;var r={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};t.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,t.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,t.curWithoutNumberRegex=/(c|a)$/gi;var l={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function d(e,i,n,s,o){var r,l=n||"date";if(o)r=g({skeleton:e},o).format||g({skeleton:"d"},"en-US").format;else{if(-1!==t.basicPatterns.indexOf(e)){if(r=a(l+"Formats."+e,i),"dateTime"===l){var d=a("dateFormats."+e,i),h=a("timeFormats."+e,i);r=r.replace("{1}",d).replace("{0}",h)}}else r=a("dateTimeFormats.availableFormats."+e,i);m(r)&&"yMd"===e&&(r="M/d/y")}return r}function h(e,i,n,s){var o={},r=n||"gregorian";if(o.parserObject=T.getMainObject(e,i)||(y()?t.blazorDefaultObject:t.defaultObject),s)o.numericObject=a("numbers",o.parserObject);else{var l=y()?"dates":"dates.calendars."+r;o.dateObject=a(l,o.parserObject)}return o}function c(e,t,i,n){return a(e+"Formats-numberSystem-"+t+(n?".accounting":".standard"),i)||(n?a(e+"Formats-numberSystem-"+t+".standard",i):"")}function p(e){var i=e.match(t.dateConverterMapper);if(i&&y()){var n=3===i[0].length?"EEE":"EEEE";return e.replace(t.dateConverterMapper,n)}return e}function g(e,t){var i=e.format||e.skeleton,n=a((t||"en-US")+"."+i,K);return n||(n=a("en-US."+i,K)),n&&(n=p(n),e.format=n.replace(/tt/,"a")),e}function v(e){var i=e.match(t.formatRegex),n={},s=i[1].toUpperCase();return n.isAccount="A"===s,n.type=t.patternMatcher[s],e.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function b(e,n,s,o){var r=o?{}:{nlead:"",nend:""},a=e.match(t.customRegex);if(a){o||(r.nlead=w(a[1],s),r.nend=w(a[10],s),r.groupPattern=a[4]);var l=a[7];if(l&&n){var d=l.match(i);f(d)?r.minimumFraction=0:r.minimumFraction=d.length,r.maximumFraction=l.length-1}}return r}function w(e,i){return e?e.replace(t.defaultCurrency,i):""}function C(e,t,i){return a("currencies."+t+(i?"."+i:".symbol"),e)||a("currencies."+t+".symbol-alt-narrow",e)||"$"}function S(e,i,s){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},r=e.match(t.customRegex);if(f(r)||""===r[5]&&"N/A"!==e)return o.type=void 0,o;o.nlead=r[1],o.nend=r[10];var a=r[6],l=!!a.match(/\ $/g),d=-1!==a.replace(/\ $/g,"").indexOf(" ");o.useGrouping=-1!==a.indexOf(",")||d,a=a.replace(/,/g,"");var h=r[7];if(-1!==a.indexOf("0")&&(o.minimumIntegerDigits=a.length-a.indexOf("0")),f(h)||(o.minimumFractionDigits=h.lastIndexOf("0"),o.maximumFractionDigits=h.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),f(i)?u(o,E([o.nlead,o.nend],"%","%")):(u(o,E([o.nlead,o.nend],"$",i.currencySymbol)),o.isCurrency||u(o,E([o.nlead,o.nend],"%",i.percentSymbol))),!f(s)){var p=c(o.type,i.numberMapper.numberSystem,s,!1);o.useGrouping&&(o.groupSeparator=d?" ":i.numberMapper.numberSymbols[n[2]],o.groupData=P.getGroupingDetails(p.split(";")[0])),o.nlead=o.nlead.replace(/'/g,""),o.nend=l?" "+o.nend.replace(/'/g,""):o.nend.replace(/'/g,"")}return o}function E(e,t,i){for(var n={nlead:e[0],nend:e[1]},s=0;s<2;s++){var o=e[s],r=o.indexOf(t);if(-1!==r&&(r<o.indexOf("'")||r>o.lastIndexOf("'"))){n[l[s]]=o.substr(0,r)+i+o.substr(r+1),n[l[t]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}function x(e,t,i){e+=".";for(var n=0;n<t;n++)e+="0";if(t<i)for(var s=i-t,o=0;o<s;o++)e+="#";return e}function O(e,t){for(var i=e.split("."),n="",s=0;s<t;s++)n+="0";return i[1]?n+"."+i[1]:n}function N(e){var t=e.split("."),i=t[0],n=3-i.length%3;e="";for(var s=(i=(n&&1===n?"#":2===n?"##":"")+i).length-1;s>0;s-=3)e=","+i[s-2]+i[s-1]+i[s]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}t.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,t.basicPatterns=["short","medium","long","full"],t.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhuʻl-Q.",12:"Dhuʻl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabiʻ I",4:"Rabiʻ II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Shaʻban",9:"Ramadan",10:"Shawwal",11:"Dhuʻl-Qiʻdah",12:"Dhuʻl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"€","symbol-alt-narrow":"€"},GBP:{displayName:"British Pound","symbol-alt-narrow":"£"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"¤#,##0.00",accounting:"¤#,##0.00;(¤#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},t.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"∞"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},t.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},t.month="months",t.days="days",t.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},t.getResultantPattern=d,t.getDependables=h,t.getSymbolPattern=c,t.ConvertDateToWeekFormat=p,t.compareBlazorDateFormats=g,t.getProperNumericSkeleton=v,t.getFormatData=b,t.changeCurrencySymbol=w,t.getCurrencySymbol=C,t.customFormat=function(e,t,i){for(var n={},s=e.split(";"),o=["pData","nData","zeroData"],r=0;r<s.length;r++)n[o[r]]=S(s[r],t,i);return f(n.nData)&&(n.nData=u({},n.pData),n.nData.nlead=f(t)?"-"+n.nData.nlead:t.minusSymbol+n.nData.nlead),n},t.customNumberFormat=S,t.isCurrencyPercent=E,t.getDateSeparator=function(e){var t=(a("dateFormats.short",e)||"").match(/[d‏M‏]([^d‏M])[d‏M‏]/i);return t?t[1]:"/"},t.getActualDateTimeFormat=function(e,t,i,n){var r=h(i,e,t.calendar);y()&&(t=g(t,e));var l=t.format||d(t.skeleton,r.dateObject,t.type);if(n){if(-1!==(l=l.replace(s,(function(e){return o[e]}))).indexOf("z")){var c=l.match(/z/g).length,p=void 0,u={timeZone:{}};u.numMapper=T.getNumberMapper(r.parserObject,T.getNumberingSystem(i)),u.timeZone=a("dates.timeZoneNames",r.parserObject);var f=(new Date).getTimezoneOffset(),m=c<4?"+H;-H":u.timeZone.hourFormat;m=m.replace(/:/g,u.numMapper.timeSeparator),0===f?p=u.timeZone.gmtZeroFormat:(p=L.getTimeZoneValue(f,m),p=u.timeZone.gmtFormat.replace(/\{0\}/,p)),l=l.replace(/[z]+/,'"'+p+'"')}l=l.replace(/ $/,"")}return l},t.getActualNumberFormat=function(i,n,s,o){var r,l,d=h(s,i,"",!0),p={custom:!0},f=d.numericObject,m={},g=(n.format||"").match(t.currencyFormatRegex),w=t.formatRegex.test(n.format)?v(n.format||"N"):{},S={};if(g){S.numberMapper=y()?u({},d.numericObject):T.getNumberMapper(d.parserObject,T.getNumberingSystem(s),!0);var E=y()?a("currencySymbol",d.numericObject):C(d.numericObject,n.currency||e.defaultCurrencyCode,n.altSymbol),A=c("currency",S.numberMapper.numberSystem,d.numericObject,/a/i.test(n.format)),k=(A=A.replace(/\u00A4/g,E)).split(";");m.hasNegativePattern=!!y()||k.length>1,m.nData=y()?a(w.type+"nData",f):b(k[1]||"-"+k[0],!0,E),m.pData=y()?a(w.type+"pData",f):b(k[0],!1,E),g[2]||n.minimumFractionDigits||n.maximumFractionDigits||(r=b(A.split(";")[0],!0,"",!0).minimumFraction)}if(t.formatRegex.test(n.format)||!n.format){if(u(p,v(n.format||"N")),p.custom=!1,l="###0",p.fractionDigits||n.minimumFractionDigits||n.maximumFractionDigits||r){p.fractionDigits&&(n.minimumFractionDigits=n.maximumFractionDigits=p.fractionDigits),l=x(l,r||p.fractionDigits||n.minimumFractionDigits||0,n.maximumFractionDigits||0)}if(n.minimumIntegerDigits&&(l=O(l,n.minimumIntegerDigits)),n.useGrouping&&(l=N(l)),"currency"===p.type||p.type&&y()){y()&&"currency"!==p.type&&(m.pData=a(p.type+"pData",f),m.nData=a(p.type+"nData",f));var I=l;l=m.pData.nlead+I+m.pData.nend,(m.hasNegativePattern||y())&&(l+=";"+m.nData.nlead+I+m.nData.nend)}"percent"!==p.type||y()||(l+=" %")}else l=n.format.replace(/'/g,'"');return Object.keys(S).length>0&&(l=o?l:function(e,t){if(-1!==e.indexOf(",")){var i=e.split(",");e=i[0]+a("numberMapper.numberSymbols.group",t)+i[1].replace(".",a("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",a("numberMapper.numberSymbols.decimal",t));return e}(l,S)),l},t.fractionDigitsPattern=x,t.minimumIntegerPattern=O,t.groupingPattern=N,t.getWeekData=function(e,t){var i="sun",n=a("supplemental.weekData.firstDay",t),s=e;return/en-/.test(s)&&(s=s.slice(3)),s=s.slice(0,2).toUpperCase()+s.substr(2),n&&(i=n[s]||n[s.slice(0,2)]||"sun"),r[i]},t.replaceBlazorCurrency=function(e,t,i){var n=a(i||"",A);if(t!==n)for(var s=0,o=e;s<o.length;s++){var r=o[s];r.nend=r.nend.replace(t,n),r.nlead=r.nlead.replace(t,n)}},t.getWeekOfYear=function(e){var t,i=new Date(e.getFullYear(),0,1),n=i.getDay();n=n>=0?n:n+7;var s=Math.floor((e.getTime()-i.getTime()-6e4*(e.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1;if(n<4){if((t=Math.floor((s+n-1)/7)+1)>52){var o=new Date(e.getFullYear()+1,0,1).getDay();t=(o=o>=0?o:o+7)<4?1:53}}else t=Math.floor((s+n-1)/7);return t}}(e.IntlBase||(e.IntlBase={}));var G=/^(.*?):[ \t]*([^\r\n]*)$/gm,Z=function(){function e(e,t,n,s){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof e?(this.url=e,this.type=t?t.toUpperCase():"GET",this.mode=!!f(n)||n):"object"===i(e)&&(this.options=e,p(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:s}return e.prototype.send=function(e){var t=this;this.data=f(e)?this.data:e;var i={cancel:!1,httpRequest:null};return new Promise((function(e,n){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,n)},f(t.onLoad)||(t.httpRequest.onload=t.onLoad),f(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),f(t.onAbort)||(t.httpRequest.onabort=t.onAbort),f(t.onError)||(t.httpRequest.onerror=t.onError),f(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),f(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i)),i.cancel||t.httpRequest.send(f(t.data)?null:t.data)}))},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(e){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,i;t={};for(var n=G.exec(this.httpRequest.getAllResponseHeaders());n;)t[n[1].toLowerCase()]=n[2],n=G.exec(this.httpRequest.getAllResponseHeaders());return f(i=t[e.toLowerCase()])?null:i},e}(),Q=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,J=/msie|trident/i,$=/Trident\/7\./,ee=/(ipad|iphone|ipod touch)/i,te=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,ie=/android/i,ne=/trident|windows phone|edge/i,se=/(version)[ /]([\w.]+)/i,oe={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var re=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},i=[],n=0,s=Object.keys(oe);n<s.length;n++){var o=s[n];if(i=e.userAgent.match(oe[o])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match($)){t.name="msie";break}var r=e.userAgent.match(se);"safari"===t.name&&r&&(t.version=r[2]);break}}return t},e.getEvent=function(t){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?i[t].isPointer:e.isTouch?i[t].isTouch+(e.isDevice?"":" "+i[t].isDevice):i[t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,i){var n=window.browserDetails;return"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===e.isTouch&&(n.isIos=!0,n.isDevice=!0,n.isTouch=!0,n.isPointer=!0),void 0===n[t]?n[t]=i.test(e.userAgent):n[t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return m(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",J)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return m(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return m(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return m(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",Q)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",ee)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",te)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",ie)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return m(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(m(window.cordova)&&m(window.PhoneGap)&&m(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",ne)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return m(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return m(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return m(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return m(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!=typeof navigator?navigator.userAgent:"",e}(),ae=function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,i,n,s,o){var r,a=e.addOrGetEventData(t);r=o?g(n,o):n,s&&(r=r.bind(s));for(var l=i.split(" "),d=0;d<l.length;d++)a.push({name:l[d],listener:n,debounce:r}),re.isIE?t.addEventListener(l[d],r):t.addEventListener(l[d],r,{passive:!1});return r},e.remove=function(t,i,n){for(var s=e.addOrGetEventData(t),o=i.split(" "),r=function(e){var i,r=-1;s&&0!==s.length&&s.some((function(t,s){return t.name===o[e]&&t.listener===n&&(r=s,i=t.debounce,!0)})),-1!==r&&s.splice(r,1),i&&t.removeEventListener(o[e],i)},a=0;a<o.length;a++)r(a)},e.clearEvents=function(t){var i,n;n=u([],n,i=e.addOrGetEventData(t));for(var s=0;s<n.length;s++)t.removeEventListener(n[s].name,n[s].debounce),i.shift()},e.trigger=function(t,i,n){for(var s=0,o=e.addOrGetEventData(t);s<o.length;s++){var r=o[s];r.name===i&&r.debounce.call(this,n)}},e}(),le=/^svg|^path|^g/;function de(e,t){var i=le.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return void 0===t||(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&ge(i,t.attrs)),i}function he(e,t){for(var i=pe(t),n=0,s=e;n<s.length;n++)for(var o=s[n],r=0,d=i;r<d.length;r++){var h=d[r];if(c(o)){var p=a("attributes.className",o);f(p)?l("attributes.className",h,o):new RegExp("\\b"+h+"\\b","i").test(p)||l("attributes.className",p+" "+h,o)}else o.classList.contains(h)||o.classList.add(h)}return e}function ce(e,t){for(var i=pe(t),n=0,s=e;n<s.length;n++){var o=s[n],r=c(o);if(r?a("attributes.className",o):""!==o.className)for(var d=0,h=i;d<h.length;d++){var p=h[d];if(r){var u=a("attributes.className",o).split(" "),f=u.indexOf(p);-1!==f&&u.splice(f,1),l("attributes.className",u.join(" "),o)}else o.classList.remove(p)}}return e}function pe(e){var t=[];return"string"==typeof e?t.push(e):t=e,t}function ue(e){var t=e;return""===t.style.visibility&&t.offsetWidth>0}function fe(e){e.querySelectorAll("script").forEach((function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),me(t)}))}function me(e){var t=e.parentNode;if(t)return t.removeChild(e)}function ge(e,t){for(var i=e,n=0,s=Object.keys(t);n<s.length;n++){var o=s[n];if(c(i)){var r=o;"tabindex"===o&&(r="tabIndex"),i.attributes[r]=t[o]}else i.setAttribute(o,t[o])}return i}function ve(e,t,i){return void 0===t&&(t=document),e=ye(e),t.querySelector(e)}function be(e,t,i){return void 0===t&&(t=document),e=ye(e),t.querySelectorAll(e)}function ye(e){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(e.match(/#[0-9]/g)||e.match(t)){for(var i=e.split(","),n=0;n<i.length;n++){for(var s=i[n].split(" "),o=0;o<s.length;o++)if(s[o].indexOf("#")>-1&&!s[o].match(/\[.*\]/)){var r=s[o].split("#");if(r[1].match(/^\d/)||r[1].match(t)){var a=s[o].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",s[o]=a.join(".")}}i[n]=s.join(" ")}return i.join(",")}return e}function we(e,t){var i=e;if("function"==typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(Se(i,t))return i;i=i.parentNode}return null}function Ce(e,t){void 0!==t&&Object.keys(t).forEach((function(i){e.style[i]=t[i]}))}function Se(e,t){var i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var Ee=new RegExp("]"),xe=function(){function e(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new V(this),m(t)||(this.element="string"==typeof t?document.querySelector(t):t,f(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),m(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,p(this,e),!0!==t?(p(this.changedProperties,e),this.dataBind()):y()&&this.isRendered&&this.serverDataBind(e),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},e.callChildDataBind=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];if(t[s]instanceof Array)for(var o=0,r=t[s];o<r.length;o++){var a=r[o];void 0!==a.dataBind&&a.dataBind()}else t[s].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,i=this.changedProperties,n=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,n),this.isProtectedOnChange=t}},e.prototype.serverDataBind=function(e){if(y()){e=e||{},u(this.bulkChanges,{},e,!0);this.allowServerDataBinding&&window.sfBlazor.updateModel&&(window.sfBlazor.updateModel(this),this.bulkChanges={})}},e.prototype.saveChanges=function(e,t,i){if(y()){var n={};n[e]=t,this.serverDataBind(n)}this.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=r(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t,i,n){var s=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var r=this.modelObserver.notify(e,t,i,n);if(Ee.test(e)){var l=a(e,this);if(l){if(window.Blazor){var d=l.call(this,t);d&&"function"==typeof d.then?i?d.then((function(e){i&&(e="string"==typeof e&&s.modelObserver.isJson(e)?JSON.parse(e):e,i.call(s,e))})).catch((function(e){n&&(e="string"==typeof e&&s.modelObserver.isJson(e)?JSON.parse(e):e,n.call(s,e))})):r=d:i&&i.call(this,t)}else l.call(this,t),i&&i.call(this,t)}else i&&i.call(this,t)}return this.isProtectedOnChange=o,r}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();he([this.element],["e-lib",e]),f(this.element.ej2_instances)?l("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter((function(t){return t!==e})),ce([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&ce([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();function Oe(e,t){var i,n,s="string"==typeof e?document.getElementById(e):e;for(n=0;n<s.ej2_instances.length;n++){if(i=s.ej2_instances[n],"string"==typeof t){if(t===i.getModuleName())return i}else if(i instanceof t)return i}}function Te(e,t,i,n){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof n||(e.properties[t]=o(n,[e,t,i])),e.properties[t]}function Ae(e,t,i,n,s,r){for(var a=[],l=i?i.length:0,d=0;d<l;d++){var h=n;if(r&&(h=n(i[d],e)),s){var c=o(h,[e,t,{},!0]);c.setProperties(i[d],!0),a.push(c)}else a.push(o(h,[e,t,i[d],!1]))}return a}function Ne(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function ke(e,t){return function(i){if(this.properties[t]!==i){var n=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,n),this.properties[t]=i}}}function Ie(e,t,i){return function(){return Te(this,t,e,i)}}function Me(e,t,i){return function(n){Te(this,t,e,i).setProperties(n)}}function Le(e,t,i){return function(){var n=i({});return this.properties.hasOwnProperty(t)?this.properties[t]:Te(this,t,e,n)}}function Be(e,t,i){return function(n){var s=i(n,this);Te(this,t,e,s).setProperties(n)}}function De(e,t,i){return function(){var n=this;if(!this.properties.hasOwnProperty(t)){var s=Ae(this,t,e,i,!1);this.properties[t]=s}var o=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||o||["push","pop"].forEach((function(e){var s={value:ze(e,t,i,n.properties[t]).bind(n),configurable:!0};Object.defineProperty(n.properties[t],e,s)})),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[t],"isComplexArray",{value:!0}),this.properties[t]}}function Pe(e,t,i){return function(n){this.isComplexArraySetter=!0;var s=Ae(this,t,e,i,!1),o=Ae(this,t,n,i,!0);this.isComplexArraySetter=!1,this.saveChanges(t,o,s),this.properties[t]=o}}function Re(e,t,i){return function(n){var s=this.properties.hasOwnProperty(t)?this.properties[t]:e,o=Ae(this,t,n,i,!0,!0);this.saveChanges(t,o,s),this.properties[t]=o}}function He(e,t,i){return function(){var n=i({});if(!this.properties.hasOwnProperty(t)){var s=Ae(this,t,e,n,!1);this.properties[t]=s}return this.properties[t]}}function ze(e,t,i,n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(var r=0;r<i.length;r++){Array.prototype[e].apply(n,[i[r]]);var a=Ue(o+(n.length-1),i[r],!this.controlParent,e);this.serverDataBind(a,i[r],!1,e)}break;case"pop":Array.prototype[e].apply(n);var l=Ue(o+n.length,null,!this.controlParent,e);this.serverDataBind(l,{ejsAction:"pop"},!1,e)}return n}}function Ue(e,t,n,s){var o=e;if(n&&((o={})[e]=t,t&&"object"===i(t))){o[e].ejsAction=s}return o}function qe(e){return function(t,i){var n={set:ke(e,i),get:Ne(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),je(t,i,"prop",e)}}function _e(e,t){return function(i,n){var s={set:Me(e,n,t),get:Ie(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,s),je(i,n,"complexProp",e,t)}}function Fe(){return function(e,t){var i={set:function(e){var i=this.properties[t];if(i!==e){var n=function e(t,i){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:i};var n=a("propName",t);return n&&(i=n+"-"+i),e(a("parentObj",t),i)}(this,t);!1===m(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,e),this.properties[t]=e}},get:Ne(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),je(e,t,"event")}}function Ve(e){}function je(e,t,i,n,s){m(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:n,type:s}),e.propList[i+"Names"].push(t)}var We,Xe=(We=function(e,t){return(We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}We(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ye=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Ke=function(t){function i(e){var i=t.call(this,e,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var n;return Xe(i,t),n=i,i.prototype.animate=function(e,t){t=t||{};var i=this.getModel(t);if("string"==typeof e)for(var s=0,o=Array.prototype.slice.call(be(e,document));s<o.length;s++){var r=o[s];i.element=r,n.delayAnimation(i)}else i.element=e,n.delayAnimation(i)},i.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var i=e.getAttribute("e-animation-id");if(i){var n=parseInt(i,10);cancelAnimationFrame(n),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},i.delayAnimation=function(t){"Disable"===e.animationMode?(t.begin&&t.begin.call(this,t),t.end&&t.end.call(this,t)):t.delay?setTimeout((function(){n.applyAnimation(t)}),t.delay):n.applyAnimation(t)},i.applyAnimation=function(e){var t=this;e.timeStamp=0;var i=0,n=0,s=0,o=e.duration;e.element.setAttribute("e-animate","true");!function r(a){try{if(a){s=0===s?a:s,e.timeStamp=a+e.timeStamp-s,s=a,!i&&e.begin&&e.begin.call(t,e),i+=1;var l=e.timeStamp/i;e.timeStamp<o&&e.timeStamp+l<o&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(t,e),requestAnimationFrame(r)):(cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(t,e))}else n=requestAnimationFrame(r),e.element.setAttribute("e-animation-id",n.toString())}catch(i){cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(t,i)}}()},i.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},i.prototype.onPropertyChanged=function(e,t){},i.prototype.getModuleName=function(){return"animation"},i.prototype.destroy=function(){},Ye([qe("FadeIn")],i.prototype,"name",void 0),Ye([qe(400)],i.prototype,"duration",void 0),Ye([qe("ease")],i.prototype,"timingFunction",void 0),Ye([qe(0)],i.prototype,"delay",void 0),Ye([Fe()],i.prototype,"progress",void 0),Ye([Fe()],i.prototype,"begin",void 0),Ye([Fe()],i.prototype,"end",void 0),Ye([Fe()],i.prototype,"fail",void 0),i=n=Ye([Ve],i)}(xe);function Ge(e){var t=e.target,i=this.rippleOptions.selector,n=i?we(t,i):t;if(!(!n||this.rippleOptions&&we(t,this.rippleOptions.ignore))){var s=n.getBoundingClientRect(),o=e.pageX-document.body.scrollLeft,r=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(o-s.left),Math.abs(o-s.right)),l=Math.max(Math.abs(r-s.top),Math.abs(r-s.bottom)),d=Math.sqrt(a*a+l*l),h=2*d+"px",c=o-s.left-d,p=r-s.top-d;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(c=0,p=0,h="100%"),n.classList.add("e-ripple");var u=de("div",{className:"e-ripple-element",styles:"width: "+h+";height: "+h+";left: "+c+"px;top: "+p+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});n.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",n!==this.parent&&ae.add(n,"mouseleave",Qe,{parent:this.parent,rippleOptions:this.rippleOptions})}}function Ze(e){Je(e,this)}function Qe(e){Je(e,this)}function Je(e,t){var i=t.rippleOptions.duration,n=e.target,s=t.rippleOptions.selector,o=s?we(n,s):n;if(o&&(!o||-1!==o.className.indexOf("e-ripple"))){var r=be(".e-ripple-element",o),a=r[r.length-1];a&&(a.style.opacity="0.5"),t.parent!==o&&ae.remove(o,"mouseleave",Qe),setTimeout((function(){a&&a.parentNode&&a.parentNode.removeChild(a),o.getElementsByClassName("e-ripple-element").length||o.classList.remove("e-ripple"),t.done&&t.done(e)}),i)}}e.isRippleEnabled=!1,e.animationMode="";var $e=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(var n=0;n<i;n++)for(var s=e[n],r=0,a=t;r<a.length;r++){var d=a[r],h=s.member;if(d.prototype.getModuleName()===s.member&&!this.isModuleLoaded(h)){var c=o(d,s.args),p=this.getMemberName(h);s.isProperty?l(p,d,this.parent):l(p,c,this.parent);var u=s;u.member=p,this.loadedModules.push(u)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var i=t[e];i.isProperty||a(i.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t=this,i=e.map((function(e){return t.getMemberName(e.member)})),n=0,s=this.loadedModules.filter((function(e){return-1===i.indexOf(e.member)}));n<s.length;n++){var o=s[n];o.isProperty||a(o.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(o),1),d(this.parent,o.member)}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,i=this.loadedModules;t<i.length;t++){if(i[t].member===this.getMemberName(e))return!0}return!1},e}(),et=function(){function e(e,t,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=a("callChildDataBind",xe),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=n,this.setProperties(i,!0)}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(p(this,e),this.updateChange(!1,this.propName),this.clearChanges()):p(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(l(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),l(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(e,t,!0),this.oldProperties[e]=i,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e.prototype.serverDataBind=function(e,t,i,n){if(y()&&!this.parentObj.isComplexArraySetter){var s,o={},r=i?this.getParentKey(!0)+"."+e:e;if(-1!==r.indexOf(".")){var a=r.split(".");s=o;for(var l=0;l<a.length;l++){var d=l===a.length-1;s[a[l]]=d?t:{},s=d?s:s[a[l]]}}else o[r]={},s=o[r],o[r][e]=t;if(this.isParentArray){s.ejsAction=n||"none"}this.controlParent.serverDataBind(o)}},e.prototype.getParentKey=function(e){var t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=e?n:n>0?n-1:0,i+=t=-1!==t?"-"+t:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i},e}(),tt=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],it=function(){function e(e){var t;this.isValidated=!1,this.version="20.3",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats/i,this.errors={noLicense:'This application was built using a trial version of Syncfusion Essential Studio. Please include a valid license to permanently remove this license validation message. You can also obtain a free 30 day evaluation license to temporarily remove this message during the evaluation period. Please refer to this <a class="e-license"href="https://help.syncfusion.com/common/essential-studio/licensing">help topic</a> for more information.',trailExpired:'Your Syncfusion trial license has expired. Please refer to this <a class="e-license"href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#trial-expired">help topic</a> for more information.',versionMismatched:'The included Syncfusion license (v##LicenseVersion) is invalid for version ##Requireversion. Please refer to this <a class="e-license" href="https://help.syncfusion.com/es/licensing/version-mismatch/">help topic</a> for more information.',platformMismatched:'The included Syncfusion license is invalid (Platform mismatch). Please refer to this <a class="e-license" href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#platform-mismatch">help topic</a> for more information.',invalidKey:'The included Syncfusion license is invalid. Please refer to this <a class="e-license" href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#invalid-key">help topic</a> for more information.'},this.manager=(t=null,{setKey:function(e){t=e},getKey:function(){return t}}),this.npxManager={getKey:function(){return"npxKeyReplace"}},this.manager.setKey(e)}return e.prototype.validate=function(){if(!this.isValidated&&h&&!a(st(tt),h)&&!a("Blazor",h)){var e=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&"npxKeyReplace"!==this.npxManager.getKey()){var t=this.getInfoFromKey();if(t&&t.length)for(var i=0,n=t;i<n.length;i++){var s=n[i];if(!this.platform.test(s.platform)||s.invalidPlatform)e=this.errors.platformMismatched;else if(-1===s.version.indexOf(this.version))e=(e=(e=this.errors.versionMismatched).replace("##LicenseVersion",s.version)).replace("##Requireversion",this.version+".x");else if(s.expiryDate){var o=new Date(s.expiryDate),r=new Date;if(!(o!==r&&o<r))break;e=this.errors.trailExpired}}else e=this.errors.invalidKey}else e=this.errors.noLicense;if(e&&"undefined"!=typeof document&&!f(document)){var d=de("div",{innerHTML:e+'<span id="license-banner-event" class="e-license-banner" ><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><line x1="5" y1="5" x2="15" y2="15" stroke="yellow" stroke-width="2.5" stroke-miterlimit="10" stroke-linecap="round"></line><line x1="15" y1="5" x2="5" y2="15" stroke="yellow" stroke-width="2.5" stroke-linecap="round" stroke-miterlimit="10"></line></svg></span>',styles:'position:fixed;top:0;left:0;right:0;font-family:"Segoe UI";font-size:16px;background:repeating-linear-gradient(45deg,#d70f0f,#d70f0f 10px,#e12121 10px,#e12121 17px);color:#ffffff;z-index:999999999;text-align:center;padding:10px 50px 10px 25px;'});d.setAttribute("id","js-licensing"),document.body.appendChild(d),document.getElementById("license-banner-event").addEventListener("click",(function(){document.getElementById("js-licensing").remove()}))}this.isValidated=!0,l(st(tt),this.isValidated,h)}},e.prototype.getDecryptedData=function(e){try{return atob(e)}catch(e){return""}},e.prototype.getInfoFromKey=function(){try{var e="",t=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],i=[],n=[],s=!1,o=!1;this.manager.getKey()?e=this.manager.getKey():(o=!0,e=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var r=e.split(";"),a=0,l=r;a<l.length;a++){var d=l[a],h=this.getDecryptedData(d);if(h){var c=0,p="";if(o){var u=h[h.length-1],f=[];for(m=0;m<h.length;m++)f[m]=h[m].charCodeAt(0)-u.charCodeAt(0);for(m=0;m<f.length;m++)p+=String.fromCharCode(f[m])}else for(var m=0;m<h.length;m++,c++){c===t.length&&(c=0);var g=h.charCodeAt(m);p+=String.fromCharCode(g^t[c]>>16)}this.platform.test(p)?(i=p.split(";"),s=!1,i.length>3&&n.push({platform:i[0],version:i[1],expiryDate:i[2]})):p&&p.split(";").length>3&&(s=!0)}}return s&&!n.length?[{invalidPlatform:s}]:n.length?n:null}catch(e){return null}},e}(),nt=new it;function st(e){for(var t="",i=0,n=e;i<n.length;i++){var s=n[i];t+=String.fromCharCode(s)}return t}function ot(e){nt=new it(e)}var rt,at,lt=function(e){e&&ot(e),nt.validate()},dt=(rt=function(e,t){return(rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}rt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ht=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},ct=0,pt=0;e.versionBasedStatePersistence=!1;var ut=function(t){function n(i,n){var s=t.call(this,i,n)||this;return s.randomId=w(),s.isStringTemplate=!1,s.needsID=!1,s.isReactHybrid=!1,f(s.enableRtl)&&s.setProperties({enableRtl:e.rightToLeft},!0),f(s.locale)&&s.setProperties({locale:e.defaultCulture},!0),s.moduleLoader=new $e(s),s.localObserver=new V(s),j.on("notifyExternalChange",s.detectFunction,s,s.randomId),lt(),m(n)||s.appendTo(),s}return dt(n,t),n.prototype.requiredModules=function(){return[]},n.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(ce([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),t.prototype.destroy.call(this),this.moduleLoader.clean(),j.off("notifyExternalChange",this.detectFunction,this.randomId)))},n.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new V(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},n.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},n.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},n.prototype.getLocalData=function(){var t=this.getModuleName()+this.element.id;return e.versionBasedStatePersistence?window.localStorage.getItem(t+this.ej2StatePersistenceVersion):window.localStorage.getItem(t)},n.prototype.appendTo=function(e){if(f(e)||"string"!=typeof e?f(e)||(this.element=e):this.element=ve(e,document),!f(this.element)){var i="e-"+this.getModuleName().toLowerCase();he([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=a("ej2_instances",this.element);n&&-1!==n.indexOf(this)||t.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}},n.prototype.renderComplete=function(e){if(y()){window.sfBlazor.renderComplete(this.element,e)}this.isRendered=!0},n.prototype.dataBind=function(){this.injectModules(),t.prototype.dataBind.call(this)},n.prototype.on=function(e,t,i){if("string"==typeof e)this.localObserver.on(e,t,i);else for(var n=0,s=e;n<s.length;n++){var o=s[n];this.localObserver.on(o.event,o.handler,o.context)}},n.prototype.off=function(e,t){if("string"==typeof e)this.localObserver.off(e,t);else for(var i=0,n=e;i<n.length;i++){var s=n[i];this.localObserver.off(s.event,s.handler)}},n.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},n.prototype.getInjectedModules=function(){return this.injectedModules},n.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<e.length;i++)-1===this.prototype.injectedModules.indexOf(e[i])&&this.prototype.injectedModules.push(e[i])},n.prototype.createElement=function(e,t,i){return de(e,t)},n.prototype.triggerStateChange=function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})},n.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},n.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},n.prototype.mergePersistData=function(){var t;f(t=e.versionBasedStatePersistence?window.localStorage.getItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion):window.localStorage.getItem(this.getModuleName()+this.element.id))||""===t||this.setProperties(JSON.parse(t),!0)},n.prototype.setPersistData=function(){this.isDestroyed||(e.versionBasedStatePersistence?window.localStorage.setItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion,this.getPersistData()):window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData()))},n.prototype.renderReactTemplates=function(e){},n.prototype.clearTemplate=function(e,t){},n.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(ct=0),at=this.pageID(location.href),pt=history.length,e+"_"+at+"_"+ct++},n.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return Math.abs(t)},n.prototype.isHistoryChanged=function(){return at!==this.pageID(location.href)||pt!==history.length},n.prototype.addOnPersist=function(e){for(var t=this,i={},n=0,s=e;n<s.length;n++){var o,r=s[n];m(o=a(r,this))||l(r,this.getActualProperties(o),i)}return JSON.stringify(i,(function(e,i){return t.getActualProperties(i)}))},n.prototype.getActualProperties=function(e){return e instanceof et?a("properties",e):e},n.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},n.prototype.iterateJsonProperties=function(e,t){for(var n={},s=function(s){if(-1===t.indexOf(s)){var r=e[s];if("object"!==i(r)||r instanceof Array)n[s]=r;else{var a=t.filter((function(e){return new RegExp(s+".").test(e)})).map((function(e){return e.replace(s+".","")}));n[s]=o.iterateJsonProperties(o.getActualProperties(r),a)}}},o=this,r=0,a=Object.keys(e);r<a.length;r++){s(a[r])}return n},ht([qe(!1)],n.prototype,"enablePersistence",void 0),ht([qe()],n.prototype,"enableRtl",void 0),ht([qe()],n.prototype,"locale",void 0),n=ht([Ve],n)}(xe);"undefined"!=typeof window&&window.addEventListener("popstate",(function(){ct=0}));var ft,mt,gt,vt,bt=(ft=function(e,t){return(ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ft(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),yt=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},wt={left:0,top:0,bottom:0,right:0},Ct={isDragged:!1},St=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return bt(t,e),yt([qe(0)],t.prototype,"left",void 0),yt([qe(0)],t.prototype,"top",void 0),t}(et),Et=function(e){function t(t,i){var s=e.call(this,i,t)||this;return s.dragLimit=n.getDefaultPosition(),s.borderWidth=n.getDefaultPosition(),s.padding=n.getDefaultPosition(),s.diffX=0,s.prevLeft=0,s.prevTop=0,s.dragProcessStarted=!1,s.eleTop=0,s.tapHoldTimer=0,s.externalInitialize=!1,s.diffY=0,s.parentScrollX=0,s.parentScrollY=0,s.droppables={},s.bind(),s}var n;return bt(t,e),n=t,t.prototype.bind=function(){this.toggleEvents(),re.isIE&&he([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return u({},wt)},t.prototype.toggleEvents=function(e){var t;m(this.handle)||(t=ve(this.handle,this.element));var i=this.enableTapHold&&re.isDevice&&re.isTouch?this.mobileInitialize:this.initialize;e?ae.remove(t||this.element,re.touchStartEvent,i):ae.add(t||this.element,re.touchStartEvent,i,this)},t.prototype.mobileInitialize=function(e){var t=this,i=e.currentTarget;this.tapHoldTimer=setTimeout((function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,i)}),this.tapHoldThreshold),ae.add(document,re.touchMoveEvent,this.removeTapholdTimer,this),ae.add(document,re.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),ae.remove(document,re.touchMoveEvent,this.removeTapholdTimer),ae.remove(document,re.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return f(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY),this.tempScrollHeight=e.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),this.tempScrollWidth=e.scrollWidth),f(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(e,t){if(this.currentStateTarget=e.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){var i=this.abort;"string"==typeof i&&(i=[i]);for(var n=0;n<i.length;n++)if(!f(we(e.target,i[n])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!m(e.changedTouches)&&"touchstart"!==e.type&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var s=this.getCoordinates(e);if(this.initialPosition={x:s.pageX,y:s.pageY},!this.clone){var o=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=s.pageX-(o.left+this.parentScrollX),this.relativeYPosition=s.pageY-(o.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(ae.add(document,re.touchMoveEvent,this.intDragStart,this),ae.add(document,re.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==e.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,ae.trigger(document.documentElement,re.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!m(e.changedTouches);if(!t||1===e.changedTouches.length){var i,n=this.getCoordinates(e),s=getComputedStyle(this.element);this.margin={left:parseInt(s.marginLeft,10),top:parseInt(s.marginTop,10),right:parseInt(s.marginRight,10),bottom:parseInt(s.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var r=we(e.target,this.dragTarget);f(r)||(o=r)}this.isReplaceDragEle&&(o=this.currentStateCheck(e.target,o)),this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e,this.isDragScroll);var a=this.initialPosition.x-n.pageX,l=this.initialPosition.y-n.pageY;if(Math.sqrt(a*a+l*l)>=this.distance||this.externalInitialize){var d=this.getHelperElement(e);if(!d||f(d))return;t&&e.preventDefault();var h=this.helperElement=d;if(this.parentClientRect=this.calculateParentPosition(h.offsetParent),this.dragStart){var c={event:e,element:o,target:this.getProperTargetElement(e),bindEvents:y()?this.bindDragEvents.bind(this):null,dragElement:h};this.trigger("dragStart",c)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var p=getComputedStyle(o),u=parseFloat(p.marginTop);this.clone&&0!==u&&(i.top+=u),this.eleTop=isNaN(parseFloat(p.top))?0:parseFloat(p.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(i.top-=this.parentScrollY,i.left-=this.parentScrollX);var g=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragElePosition={top:i.top,left:i.left},Ce(h,this.getDragPosition({position:"absolute",left:g.left,top:g.top})),ae.remove(document,re.touchMoveEvent,this.intDragStart),ae.remove(document,re.touchEndEvent,this.intDestroy),y()||this.bindDragEvents(h)}}},t.prototype.bindDragEvents=function(e){ue(e)?(ae.add(document,re.touchMoveEvent,this.intDrag,this),ae.add(document,re.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)e=e.offsetParent,this.top+=e.offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(f(e))return{left:0,top:0};var t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}},t.prototype.intDrag=function(e){if(m(e.changedTouches)||1===e.changedTouches.length){var t,i;this.clone&&e.changedTouches&&re.isDevice&&re.isTouch&&e.preventDefault(),this.position=this.getMousePosition(e,this.isDragScroll);var n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);var s=this.getDocumentWidthHeight("Width");if(s<this.position.left&&(this.position.left=s),this.drag){var o=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:o})}var r=this.checkTargetElement(e);if(r.target&&r.instance){var a=!0;this.hoverObject&&(this.hoverObject.instance!==r.instance?this.triggerOutFunction(e,r):a=!1),a&&(r.instance.dragData[this.scope]=this.droppables[this.scope],r.instance.intOver(e,r.target),this.hoverObject=r)}else this.hoverObject&&this.triggerOutFunction(e,r);var l=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var d=this.parentClientRect.left,h=this.parentClientRect.top,c=this.getCoordinates(e),p=c.pageX,u=c.pageY,g=this.position.left-this.diffX,v=this.position.top-this.diffY,b=getComputedStyle(l);if(this.dragArea){if(this.pageX!==p||this.skipDistanceCheck){var y=l.offsetWidth+(parseFloat(b.marginLeft)+parseFloat(b.marginRight));t=this.dragLimit.left>g&&g>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<g+y&&g>0?g-(g-this.dragLimit.right)+window.pageXOffset-y:g<0?this.dragLimit.left:g}if(this.pageY!==u||this.skipDistanceCheck){var w=l.offsetHeight+(parseFloat(b.marginTop)+parseFloat(b.marginBottom));i=this.dragLimit.top>v&&v>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<v+w&&v>0?v-(v-this.dragLimit.bottom)+window.pageYOffset-w:v<0?this.dragLimit.top:v}}else t=g,i=v;var C,S,E=h+this.borderWidth.top,x=d+this.borderWidth.left;this.dragProcessStarted&&(f(i)&&(i=this.prevTop),f(t)&&(t=this.prevLeft)),this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,C=i-E<0?this.dragLimit.top:i-E,S=t-x<0?this.dragElePosition.left:t-x):(C=i-E,S=t-x);var O=parseFloat(getComputedStyle(this.element).marginTop);if(O>0&&(this.clone&&(C+=O,v<0&&(O+v>=0?C=O+v:C-=O),C=this.dragLimit.bottom<C?this.dragLimit.bottom:C),i-E<0))if(v+O+(l.offsetHeight-E)>=0){var T=this.dragLimit.top+v-E;T+O+E<0?C-=O+E:C=T}else C-=O+E;this.enableScrollHandler&&!this.clone&&(C-=this.parentScrollY,S-=this.parentScrollX);var A=this.getProcessedPositionValue({top:C+"px",left:S+"px"});Ce(l,this.getDragPosition(A)),this.elementInViewport(l)||!this.enableAutoScroll||this.helperElement.classList.contains("e-treeview")||this.helperElement.scrollIntoView();var N=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===N.length&&(N=this.getPathElements(e));var k=this.getScrollParent(N,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(k,C):this.elementInViewport(this.helperElement)||(0===(N=[].slice.call(document.querySelectorAll(":hover"))).length&&(N=this.getPathElements(e)),k=this.getScrollParent(N,!0),this.getScrollPosition(k,C))}this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=p,this.pageY=u}},t.prototype.getScrollParent=function(e,t){for(var i,n=t?e.reverse():e,s=n.length-1;s>=0;s--)if(("auto"===(i=window.getComputedStyle(n[s])["overflow-y"])||"scroll"===i)&&n[s].scrollHeight>n[s].clientHeight)return n[s];if("visible"===(i=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},t.prototype.getScrollPosition=function(e,t){e&&e===document.scrollingElement?e.clientHeight-e.getBoundingClientRect().top-this.helperElement.clientHeight<t&&e.getBoundingClientRect().height>t?e.scrollTop+=this.helperElement.clientHeight:e.scrollHeight-e.clientHeight>t&&(e.scrollTop-=this.helperElement.clientHeight):e&&e!==document.scrollingElement&&(e.clientHeight+e.getBoundingClientRect().top-this.helperElement.clientHeight<t?e.scrollTop+=this.helperElement.clientHeight:e.getBoundingClientRect().top>t-this.helperElement.clientHeight&&(e.scrollTop-=this.helperElement.clientHeight))},t.prototype.getPathElements=function(e){var t=e.clientX>0?e.clientX:0,i=e.clientY>0?e.clientY:0;return document.elementsFromPoint(t,i)},t.prototype.triggerOutFunction=function(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(e){var t=u({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,m(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),ae.remove(document,re.touchMoveEvent,this.intDragStart),ae.remove(document,re.touchEndEvent,this.intDragStop),ae.remove(document,re.touchEndEvent,this.intDestroy),ae.remove(document,re.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(e){return e&&(Ct.isDragged=!Ct.isDragged),Ct.isDragged},t.prototype.setDragArea=function(){var e,t,n,s=0,o=0;if(n="string"===i(this.dragArea)?ve(this.dragArea):this.dragArea){var r=n.getBoundingClientRect();e=n.scrollWidth?n.scrollWidth:r.right-r.left,t=n.scrollHeight?n.scrollHeight:r.bottom-r.top;for(var a=["Top","Left","Bottom","Right"],l=getComputedStyle(n),d=0;d<a.length;d++){var h=a[d],c=l["border"+h+"Width"],p=l["padding"+h],u=h.toLowerCase();this.borderWidth[u]=isNaN(parseFloat(c))?0:parseFloat(c),this.padding[u]=isNaN(parseFloat(p))?0:parseFloat(p)}s=r.top,o=r.left,this.dragLimit.left=o+this.borderWidth.left+this.padding.left,this.dragLimit.top=n.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=o+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=s+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,i=this.getCoordinates(e),n=this.helperElement.style.pointerEvents||"";return v(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=n):t=e.target,t},t.prototype.currentStateCheck=function(e,t){return f(this.currentStateTarget)||this.currentStateTarget===e?f(t)?e:t:this.currentStateTarget},t.prototype.getMousePosition=function(e,t){var i,n,s=void 0!==e.srcElement?e.srcElement:e.target,o=this.getCoordinates(e),r=f(s.offsetParent);return t?(i=this.clone?o.pageX:o.pageX+(r?0:s.offsetParent.scrollLeft)-this.relativeXPosition,n=this.clone?o.pageY:o.pageY+(r?0:s.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,n=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=de("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!f(t.parentNode)){var n=we(t.parentNode,".e-droppable")||t.parentElement;n&&(i=this.getDropInstance(n))}return{target:t,instance:i}},t.prototype.getDropInstance=function(e){var t,i=e&&e.ej2_instances;if(i)for(var n=0,s=i;n<s.length;n++){var o=s[n];if("droppable"===o.getModuleName()){t=o;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},yt([_e({},St)],t.prototype,"cursorAt",void 0),yt([qe(!0)],t.prototype,"clone",void 0),yt([qe()],t.prototype,"dragArea",void 0),yt([qe()],t.prototype,"isDragScroll",void 0),yt([qe()],t.prototype,"isReplaceDragEle",void 0),yt([qe(!0)],t.prototype,"isPreventSelect",void 0),yt([Fe()],t.prototype,"drag",void 0),yt([Fe()],t.prototype,"dragStart",void 0),yt([Fe()],t.prototype,"dragStop",void 0),yt([qe(1)],t.prototype,"distance",void 0),yt([qe()],t.prototype,"handle",void 0),yt([qe()],t.prototype,"abort",void 0),yt([qe()],t.prototype,"helper",void 0),yt([qe("default")],t.prototype,"scope",void 0),yt([qe("")],t.prototype,"dragTarget",void 0),yt([qe()],t.prototype,"axis",void 0),yt([qe()],t.prototype,"queryPositionInfo",void 0),yt([qe(!1)],t.prototype,"enableTailMode",void 0),yt([qe(!1)],t.prototype,"skipDistanceCheck",void 0),yt([qe(!0)],t.prototype,"preventDefault",void 0),yt([qe(!1)],t.prototype,"enableAutoScroll",void 0),yt([qe(!1)],t.prototype,"enableTapHold",void 0),yt([qe(750)],t.prototype,"tapHoldThreshold",void 0),yt([qe(!1)],t.prototype,"enableScrollHandler",void 0),t=n=yt([Ve],t)}(xe),xt=(mt=function(e,t){return(mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}mt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ot=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Tt=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return xt(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){ae.add(this.element,re.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:e,target:t,dragData:i}),this.mouseOver=!0}},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var i,n=!0,s=this.dragData[this.scope],o=!!s&&(s.helper&&ue(s.helper));o&&(i=this.isDropArea(e,s.helper,t),this.accept&&(n=Se(s.helper,this.accept))),o&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:e,target:i.target,droppedElement:s.helper,dragData:s}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,i){var n={canDrop:!0,target:i||e.target},s="touchend"===e.type;if(s||n.target===t){t.style.display="none";var o=s?e.changedTouches[0]:e,r=document.elementFromPoint(o.clientX,o.clientY);n.canDrop=!1,n.canDrop=v(r,this.element),n.canDrop&&(n.target=r),t.style.display=""}return n},t.prototype.destroy=function(){ae.remove(this.element,re.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},Ot([qe()],t.prototype,"accept",void 0),Ot([qe("default")],t.prototype,"scope",void 0),Ot([Fe()],t.prototype,"drop",void 0),Ot([Fe()],t.prototype,"over",void 0),Ot([Fe()],t.prototype,"out",void 0),t=Ot([Ve],t)}(xe),At=(gt=function(e,t){return(gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}gt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Nt=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},kt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},It=function(e){function t(t,n){var s=e.call(this,n,t)||this;return s.keyPressHandler=function(e){for(var t=e.altKey,n=e.ctrlKey,o=e.shiftKey,r=e.which,a=0,l=Object.keys(s.keyConfigs);a<l.length;a++)for(var d=l[a],h=0,c=s.keyConfigs[d].split(",");h<c.length;h++){var p=c[h],u=i.getKeyConfigData(p.trim());t===u.altKey&&n===u.ctrlKey&&o===u.shiftKey&&r===u.keyCode&&(e.action=d,s.keyAction&&s.keyAction(e))}},s.bind(),s}var i;return At(t,e),i=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),n={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?n.keyCode=Number(t[t.length-1]):n.keyCode=i.getKeyCode(t[t.length-1]),i.configCache[e]=n,n},t.getKeyCode=function(e){return kt[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},Nt([qe({})],t.prototype,"keyConfigs",void 0),Nt([qe("keyup")],t.prototype,"eventName",void 0),Nt([Fe()],t.prototype,"keyAction",void 0),t=i=Nt([Ve],t)}(xe),Mt=function(){function t(t,i,n){this.controlName=t,this.localeStrings=i,this.setLocale(n||e.defaultCulture)}return t.prototype.setLocale=function(e){var i=this.intGetControlConstant(t.locale,e);this.currentLocale=i||this.localeStrings},t.load=function(e){this.locale=u(this.locale,e,{},!0)},t.prototype.getConstant=function(e){return f(this.currentLocale[e])?this.localeStrings[e]||"":this.currentLocale[e]},t.prototype.intGetControlConstant=function(e,t){return e[t]?e[t][this.controlName]:null},t.locale={},t}(),Lt=(vt=function(e,t){return(vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}vt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Bt=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lt(t,e),Bt([qe(50)],t.prototype,"swipeThresholdDistance",void 0),t}(et),Pt=/(Up|Down)/,Rt=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(e){if(!0===n.touchAction){var t=n.updateChangeTouches(e);void 0!==e.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},n.startEventData=t,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout((function(){n.tapHoldEvent(e)}),n.tapHoldThreshold),ae.add(n.element,re.touchMoveEvent,n.moveEvent,n),ae.add(n.element,re.touchEndEvent,n.endEvent,n),ae.add(n.element,re.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(e){var t=n.updateChangeTouches(e);n.movedPoint=t,n.isTouchMoved=!(t.clientX===n.startPoint.clientX&&t.clientY===n.startPoint.clientY);var i={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(e),i=u(i,{},{startEvents:n.startEventData,originalEvent:e,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(t)}),n.trigger("scroll",i),n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},n.cancelEvent=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(e),ae.remove(n.element,re.touchCancelEvent,n.cancelEvent)},n.endEvent=function(e){n.swipeFn(e),n.isTouchMoved||"function"==typeof n.tap&&(n.trigger("tap",{originalEvent:e,tapCount:++n.tapCount}),n.timeOutTap=setTimeout((function(){n.tapCount=0}),n.tapThreshold)),n.modeclear()},n.swipeFn=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var t=n.updateChangeTouches(e),i=t.clientX-n.startPoint.clientX,s=t.clientY-n.startPoint.clientY;i=Math.floor(i<0?-1*i:i),s=Math.floor(s<0?-1*s:i),n.isTouchMoved=i>1||s>1,/Firefox/.test(re.userAgent)&&0===t.clientX&&0===t.clientY&&"mouseup"===e.type&&(n.isTouchMoved=!1),n.endPoint=t,n.calcPoints(e);var o={originalEvent:e,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(t)};if(n.isTouchMoved){var r=void 0,a=n.swipeSettings.swipeThresholdDistance;r=u(r,n.defaultArgs,o);var l=!1,d=n.element,h=n.isScrollable(d),c=Pt.test(n.movedDirection);(a<n.distanceX&&!c||a<n.distanceY&&c)&&(l=!h||n.checkSwipe(d,c)),l&&n.trigger("swipe",r)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout((function(){n.touchAction=!0}),"function"!=typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),ae.remove(n.element,re.touchMoveEvent,n.moveEvent),ae.remove(n.element,re.touchEndEvent,n.endEvent),ae.remove(n.element,re.touchCancelEvent,n.cancelEvent)},n.bind(),n}return Lt(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),re.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){ae.add(this.element,re.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){ae.remove(this.element,re.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e),i=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(i)},t.prototype.tapHoldEvent=function(e){var t;this.tapCount=0,this.touchAction=!0,ae.remove(this.element,re.touchMoveEvent,this.moveEvent),ae.remove(this.element,re.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),ae.remove(this.element,re.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=t.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,i=e.clientY,n=Date.now(),s=t-this.startPoint.clientX,o=i-this.startPoint.clientX,r=n-this.tStampStart;return Math.sqrt(s*s+o*o)/r},t.prototype.checkSwipe=function(e,t){var i=["scroll","offset"],n=t?["Height","Top"]:["Width","Left"];return e[i[0]+n[0]]<=e[i[1]+n[0]]||(0===e[i[0]+n[1]]||e[i[1]+n[0]]+e[i[0]+n[1]]>=e[i[0]+n[0]])},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},Bt([Fe()],t.prototype,"tap",void 0),Bt([Fe()],t.prototype,"tapHold",void 0),Bt([Fe()],t.prototype,"swipe",void 0),Bt([Fe()],t.prototype,"scroll",void 0),Bt([qe(350)],t.prototype,"tapThreshold",void 0),Bt([qe(750)],t.prototype,"tapHoldThreshold",void 0),Bt([_e({},Dt)],t.prototype,"swipeSettings",void 0),t=Bt([Ve],t)}(xe),Ht=new RegExp("\\n|\\r|\\s\\s+","g"),zt=new RegExp(/'|"/g),Ut=new RegExp("if ?\\("),qt=new RegExp("else if ?\\("),_t=new RegExp("else"),Ft=new RegExp("for ?\\("),Vt=new RegExp("(/if|/for)"),jt=new RegExp("\\((.*)\\)",""),Wt=new RegExp("^[0-9]+$","g"),Xt=new RegExp("[\\w\"'.\\s+]+","g"),Yt=new RegExp('"(.*?)"',"g"),Kt=new RegExp("[\\w\"'@#$.\\s-+]+","g"),Gt=new RegExp("\\${([^}]*)}","g"),Zt=/^\..*/gm,Qt=/\\/gi,Jt=/\\\\/gi,$t=new RegExp("[\\w\"'@#$.\\s+]+","g"),ei=/\window\./gm;function ti(e,t,i){var n=function(e,t,i,n){var s=0,o=[],r=e.match(/class="([^"]+|)\s{2}/g),a="";r&&r.forEach((function(t){a=t.replace(/\s\s+/g," "),e=e.replace(t,a)}));return e.replace(Ht,"").replace(Yt,"'$1'").replace(Gt,(function(e,r,a,l){var d=r.match(jt);if(d){var h=d[1];if(qt.test(r))r='";} '+r.replace(d[1],h.replace(Xt,(function(e){return ii(e=e.trim(),!zt.test(e)&&-1===o.indexOf(e),t,o,n)})))+'{ \n str = str + "';else if(Ut.test(r))r='"; '+r.replace(d[1],h.replace(Kt,(function(e){return oi(e,t,o,n)})))+'{ \n str = str + "';else if(Ft.test(r)){var c=d[1].split(" of ");r='"; '+r.replace(d[1],(function(e){return o.push(c[0]),o.push(c[0]+"Index"),"var i"+(s+=1)+"=0; i"+s+" < "+ii(c[1],!0,t,o,n)+".length; i"+s+"++"}))+"{ \n "+c[0]+"= "+ii(c[1],!0,t,o,n)+"[i"+s+"]; \n var "+c[0]+"Index=i"+s+'; \n str = str + "'}else{var p=r.split("("),u=i&&i.hasOwnProperty(p[0])?"this.":"global";u=/\./.test(p[0])?"":u;var f=d[1].split(",");0===d[1].length||/data/.test(f[0])||/window./.test(f[0])||(d[1]="global"===u?t+"."+d[1]:d[1]);if(ei.test(r)&&/\]\./gm.test(r)||/@|\$|#/gm.test(r)){/@|\$|#|\]\./gm.test(r)&&(r='"+ '+("global"===u?"":u)+r.replace(d[1],h.replace($t,(function(e){return oi(e,t,o,n)})))+'+ "')}else r='" + '+("global"===u?"":u)+r.replace(h,ii(d[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==u,t,o,n))+'+"'}}else _t.test(r)?r='"; '+r.replace(_t,'} else { \n str = str + "'):r.match(Vt)?r=r.replace(Vt,'"; \n } \n str = str + "'):/@|#|\$/gm.test(r)?(r.match(Qt)&&(r=si(r)),r='"+'+ni(r,-1===o.indexOf(r),t,o)+'"]+"'):r=r.match(Qt)?'"+'+ni(r=si(r),-1===o.indexOf(r),t,o)+'"]+"':'"+'+ii(r.replace(/,/gi,"+"+t+"."),-1===o.indexOf(r),t,o,n)+'+"';return r}))}(e,"data",t,i);return new Function("data",'var str="'+n+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-■\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-■\\s]+)['])/g);\n    if(str.match(valueRegEx)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if (str.match(/(?:href='')/) === null) {\n        if(str.match(hrefRegex)) {\n            var check = str.match(hrefRegex);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                if (check1) {\n                    var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                    change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                    str1 = str1.replace(check1, change);\n                }\n            }\n            str = str.replace(str, str1);\n        }\n    }\n     return str;").bind(t)}function ii(e,t,i,n,s){return!t||Wt.test(e)||-1!==n.indexOf(e.split(".")[0])||s?e:i+"."+e}function ni(e,t,i,n){return t&&!Wt.test(e)&&-1===n.indexOf(e.split(".")[0])?i+'["'+e:e}function si(e){return e=e.match(Jt)?e:e.replace(Qt,"\\\\")}function oi(e,t,i,n){e=e.trim();if(/\window\./gm.test(e))return e;var s=/'|"/gm;return/@|\$|#/gm.test(e)&&(e=ni(e,-1===i.indexOf(e),t,i)+'"]'),Zt.test(e)?function(e,t,i,n){return!t||Wt.test(e)||-1!==n.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:i+"."+e}(e,!s.test(e)&&-1===i.indexOf(e),t,i):ii(e,!s.test(e)&&-1===i.indexOf(e),t,i,n)}var ri=/^[\n\r.]+<tr|^<tr/,ai=/^[\n\r.]+<svg|^<path|^<g/,li={};function di(){return"-"+Math.random().toString(36).substr(2,5)}var hi={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t,i){return void 0===t&&(t={}),ti(e,t)},e}())).compile},ci=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],pi=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],ui=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],fi=function(){function e(){}return e.beforeSanitize=function(){return{selectors:{tags:ci,attributes:pi}}},e.sanitize=function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)},e.serializeValue=function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i.replace("&amp;","&")},e.removeElement=function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var i=e[t].attributes,n=0;n<i.length;n++)this.wrapElement.children[t].removeAttribute(i[n].localName)},e.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach((function(e){me(e)}))},e.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+ui.join("],[")+"]");e.length>0&&e.forEach((function(e){ui.forEach((function(t){e.hasAttribute(t)&&e.removeAttribute(t)}))}))},e.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach((function(t,i){var n=e.wrapElement.querySelectorAll(t.selector);n.length>0&&n.forEach((function(e){e.removeAttribute(t.attribute)}))}))},e}();return e.blazorCultureFormats=K,e.Ajax=Z,e.Animation=Ke,e.rippleEffect=function(t,i,n){var s=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(i);return!1===s.rippleFlag||void 0===s.rippleFlag&&!e.isRippleEnabled?function(){}:(t.setAttribute("data-ripple","true"),ae.add(t,"mousedown",Ge,{parent:t,rippleOptions:s}),ae.add(t,"mouseup",Ze,{parent:t,rippleOptions:s,done:n}),ae.add(t,"mouseleave",Qe,{parent:t,rippleOptions:s}),re.isPointer&&ae.add(t,"transitionend",Qe,{parent:t,rippleOptions:s}),function(){t.removeAttribute("data-ripple"),ae.remove(t,"mousedown",Ge),ae.remove(t,"mouseup",Ze),ae.remove(t,"mouseleave",Qe),ae.remove(t,"transitionend",Qe)})},e.enableRipple=function(t){return e.isRippleEnabled=t,e.isRippleEnabled},e.setGlobalAnimation=function(t){e.animationMode=t},e.Base=xe,e.getComponent=Oe,e.removeChildInstance=function(e){for(var t=[].slice.call(e.getElementsByClassName("e-control")),i=0;i<t.length;i++){var n=t[i].classList[1].split("e-")[1],s=Oe(t[i],n);m(s)||s.destroy()}},e.Browser=re,e.enableVersionBasedPersistence=function(t){e.versionBasedStatePersistence=t},e.Component=ut,e.ChildProperty=et,e.Position=St,e.Draggable=Et,e.Droppable=Tt,e.EventHandler=ae,e.onIntlChange=j,e.cldrData=W,e.Internationalization=Y,e.setCulture=function(t){e.defaultCulture=t,j.notify("notifyExternalChange",{locale:e.defaultCulture})},e.setCurrencyCode=function(t){e.defaultCurrencyCode=t,j.notify("notifyExternalChange",{currencyCode:e.defaultCurrencyCode})},e.loadCldr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=e;i<n.length;i++){var s=n[i];u(W,s,{},!0)}},e.enableRtl=function(t){void 0===t&&(t=!0),e.rightToLeft=t,j.notify("notifyExternalChange",{enableRtl:e.rightToLeft})},e.getNumericObject=function(t,i){var n=e.IntlBase.getDependables(W,t,"",!0)[X[0]],s=e.IntlBase.getDependables(W,t,"")[X[1]],o=a("defaultNumberingSystem",n),r=y()?a("numberSymbols",n):a("symbols-numberSystem-"+o,n),l=e.IntlBase.getSymbolPattern(i||"decimal",o,n,!1);return u(r,e.IntlBase.getFormatData(l,!0,"",!0),{dateSeparator:e.IntlBase.getDateSeparator(s)})},e.getNumberDependable=function(t,i){var n=e.IntlBase.getDependables(W,t,"",!0);return e.IntlBase.getCurrencySymbol(n.numericObject,i)},e.getDefaultDateObject=function(t){return e.IntlBase.getDependables(W,"",t,!1)[X[1]]},e.KeyboardEvents=It,e.L10n=Mt,e.ModuleLoader=$e,e.Property=qe,e.Complex=_e,e.ComplexFactory=function(e){return function(t,i){var n={set:Be({},i,e),get:Le({},i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),je(t,i,"complexProp",{},e)}},e.Collection=function(e,t){return function(i,n){var s={set:Pe(e,n,t),get:De(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,s),je(i,n,"colProp",e,t)}},e.CollectionFactory=function(e){return function(t,i){var n={set:Re([],i,e),get:He([],i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),je(t,i,"colProp",{},e)}},e.Event=Fe,e.NotifyPropertyChanges=Ve,e.CreateBuilder=function(e){var t=function(e){return this.element=e,this};return function(i){return t.prototype.hasOwnProperty("create")||((t.prototype=function e(t){if(m(t.prototype.builderObject)){t.prototype.builderObject={properties:{},propCollections:[],add:function(){this.isPropertyArray=!0,this.propCollections.push(u({},this.properties,{}))}};for(var i=/complex/,n=0,s=Object.keys(t.prototype.propList);n<s.length;n++)for(var o=s[n],r=function(n){i.test(o)?t.prototype.builderObject[n.propertyName]=function(t){var i,s={};return p(s,e(n.type)),t(s),i=s.isPropertyArray?s.propCollections:u({},s.properties,{}),this.properties[n.propertyName]=i,s.properties={},s.propCollections=[],s.isPropertyArray=!1,this}:t.prototype.builderObject[n.propertyName]=function(e){return this.properties[n.propertyName]=e,this}},a=0,l=t.prototype.propList[o];a<l.length;a++){r(l[a])}}return t.prototype.builderObject}(e)).create=function(){var t=u({},{},this.properties);return this.properties={},new e(t,this.element)}),new t(i)}},e.SwipeSettings=Dt,e.Touch=Rt,e.blazorTemplates=li,e.getRandomId=di,e.compile=function(e,t,i){var n=hi.compile(e,t,i);return function(e,t,i,s,o,r,a,l){var d=n(e,t,i,a,l);if(y()&&!o){var h=s+di();if(li[s]||(li[s]=[]),f(r))e.BlazorTemplateId=h,li[s].push(e);else for(var c=0,p=Object.keys(li[s][r]);c<p.length;c++){var u=p[c];"BlazorTemplateId"!==u&&e[u]&&(li[s][r][u]=e[u]),"BlazorTemplateId"===u&&(h=li[s][r][u])}return"rowTemplate"===i?[de("tr",{id:h,className:"e-blazor-template"})]:[de("div",{id:h,className:"e-blazor-template"})]}return"string"==typeof d?ai.test(d)?de("svg",{innerHTML:d}).childNodes:de(ri.test(d)?"table":"div",{innerHTML:d}).childNodes:d}},e.updateBlazorTemplate=function(e,t,i,n,s){if(y()){window.sfBlazor.updateTemplate(t,li[e],e,i,s),!1!==n&&(li[e]=[])}},e.resetBlazorTemplate=function(e,t,i){var n=document.getElementById(e);if(n)for(var s=n.getElementsByClassName("blazor-inner-template"),o=0;o<s.length;o++){var r=" ";r=f(i)?s[o].getAttribute("data-templateId"):s[i].getAttribute("data-templateId");var a=document.getElementById(r);if(a)for(var l=a.childNodes.length,d=0;d<l;d++)f(i)?s[o].appendChild(a.childNodes[0]):(s[i].appendChild(a.childNodes[0]),o=s.length)}},e.setTemplateEngine=function(e){hi.compile=e.compile},e.getTemplateEngine=function(){return hi.compile},e.disableBlazorMode=function(){s=!1},e.createInstance=o,e.setImmediate=r,e.getValue=a,e.setValue=l,e.deleteObject=d,e.containerObject=h,e.isObject=c,e.getEnumValue=function(e,t){return e[t]},e.merge=p,e.extend=u,e.isNullOrUndefined=f,e.isUndefined=m,e.getUniqueID=function(e){return e+"_"+n++},e.debounce=g,e.queryParams=function(e){for(var t=[],i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];t.push(encodeURIComponent(s)+"="+encodeURIComponent(""+e[s]))}return t.join("&")},e.isObjectArray=function(e){var t=Object.prototype.toString;return"[object Array]"===t.call(e)&&"[object Object]"===t.call(e[0])},e.compareElementParent=v,e.throwError=b,e.print=function(e,t){var i=document.createElement("div"),n=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),s=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style"));if(s.length)for(var o=0,r=s.length;o<r;o++)n.push(s[o]);var a="";f(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),i.appendChild(e.cloneNode(!0));var l=0;for(r=n.length;l<r;l++)a+=n[l].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+a+"</head><body>"+i.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var d=setInterval((function(){t.ready&&(t.print(),t.close(),clearInterval(d))}),500);return t},e.formatUnit=function(e){var t=e+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"},e.enableBlazorMode=function(){s=!0},e.isBlazor=y,e.getElement=function(e){return e instanceof Node||!y()||f(e.xPath)?e:document.evaluate(e.xPath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue},e.getInstance=function(e,i){var n="string"==typeof e?document.querySelector(e):e;if(n[t])for(var s=0,o=n[t];s<o.length;s++){var r=o[s];if(r instanceof i)return r}return null},e.addInstance=function(e,i){var n="string"==typeof e?document.querySelector(e):e;n[t]?n[t].push(i):n[t]=[i]},e.uniqueID=w,e.createElement=de,e.addClass=he,e.removeClass=ce,e.isVisible=ue,e.prepend=function(e,t,i){for(var n=document.createDocumentFragment(),s=0,o=e;s<o.length;s++){var r=o[s];n.appendChild(r)}return t.insertBefore(n,t.firstElementChild),i&&fe(t),e},e.append=function(e,t,i){for(var n=document.createDocumentFragment(),s=0,o=e;s<o.length;s++){var r=o[s];n.appendChild(r)}return t.appendChild(n),i&&fe(t),e},e.detach=me,e.remove=function(e){var t=e.parentNode;ae.clearEvents(e),t.removeChild(e)},e.attributes=ge,e.select=ve,e.selectAll=be,e.closest=we,e.siblings=function(e){for(var t=[],i=0,n=Array.prototype.slice.call(e.parentNode.childNodes);i<n.length;i++){var s=n[i];s.nodeType===Node.ELEMENT_NODE&&e!==s&&t.push(s)}return t},e.getAttributeOrDefault=function(e,t,i){var n,s=c(e);return f(n=s?a("attributes."+t,e):e.getAttribute(t))&&i&&(s?e.attributes[t]=i:e.setAttribute(t,i.toString()),n=i),n},e.setStyleAttribute=Ce,e.classList=function(e,t,i){he([e],t),ce([e],i)},e.matches=Se,e.includeInnerHTML=function(e,t){e.innerHTML=t},e.containsClass=function(e,t){return c(e)?new RegExp("\\b"+t+"\\b","i").test(e.attributes.className):e.classList.contains(t)},e.cloneNode=function(e,t){return c(e)?t?u({},{},e,!0):void 0:e.cloneNode(t)},e.Observer=V,e.SanitizeHtmlHelper=fi,e.registerLicense=ot,e.validateLicense=lt,e.getVersion=function(){return nt.version},e}({})},"./modules/navigationsbase.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};window.sf.navigations=window.sf.base.extend({},window.sf.navigations,function(e){"use strict";var t,n,s=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),o=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},r=function(e){function t(t,i){return e.call(this,t,i)||this}return s(t,e),t.prototype.preRender=function(){this.browser=sf.base.Browser.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=sf.base.Browser.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=sf.base.getUniqueID("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new sf.base.Touch(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),sf.base.EventHandler.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){sf.base.isNullOrUndefined(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,s=[].slice.call(i.children);n<s.length;n++){var o=s[n];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove("e-scroll-device");var i=sf.base.selectAll(".e-"+t.id+"_nav.e-scroll-nav",t),n=sf.base.selectAll(".e-scroll-overlay",t);[].slice.call(n).forEach((function(e){sf.base.detach(e)}));for(var s=0,o=[].slice.call(this.scrollItems.children);s<o.length;s++){var r=o[s];t.appendChild(r)}this.uniqueId&&this.element.removeAttribute("id"),sf.base.detach(this.scrollEle),i.length>0&&(sf.base.detach(i[0]),sf.base.isNullOrUndefined(i[1])||sf.base.detach(i[1])),sf.base.EventHandler.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=sf.base.selectAll(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),i=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),s=this.createElement("div",{id:t.concat("_right"),className:n}),o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});s.appendChild(o);var r=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&s.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(s),e.insertBefore(r,e.firstChild),this.eventBinding([s])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n={role:"button",id:t.concat("_right"),"aria-label":"Scroll right"},s=this.createElement("div",{className:i,attrs:n});s.setAttribute("aria-disabled","false");var o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),r="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),a={role:"button",id:t.concat("_left"),"aria-label":"Scroll left"},l=this.createElement("div",{className:r+" e-overlay",attrs:a});l.setAttribute("aria-disabled","true");var d=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});l.appendChild(d),s.appendChild(o),e.appendChild(s),e.insertBefore(l,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([s,l])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new sf.base.Touch(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),sf.base.EventHandler.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var n=this.element,s=t.classList;s.contains("e-scroll-nav")&&(s=t.querySelector(".e-nav-arrow").classList),this.contains(n,"e-rtl")&&this.browserCheck&&(e=-e),!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?s.contains("e-nav-right-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):s.contains("e-nav-left-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var n=.5;!function s(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Left"===e.swipeDirection?i.scrollLeft+=t*o:"Right"===e.swipeDirection&&(i.scrollLeft-=t*o),n-=.5,window.requestAnimationFrame(s))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(sf.base.selectAll(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetWidth}));!function i(){var s,o;n.contains(n.element,"e-rtl")&&n.browserCheck?(s=-e,o=-10):(s=e,o=10),s<10?window.cancelAnimationFrame(o):(n.scrollUpdating(o,t),e-=o,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t=this.scrollEle,i=e.distanceX;this.ieCheck&&this.contains(this.element,"e-rtl")&&(i=-i),"Left"===e.scrollDirection?t.scrollLeft=t.scrollLeft+i:"Right"===e.scrollDirection&&(t.scrollLeft=t.scrollLeft-i)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(sf.base.isNullOrUndefined(e)?t:e).querySelector(".e-nav-arrow");sf.base.isNullOrUndefined(e)?sf.base.classList(i,["e-nav-right-arrow"],["e-nav-left-arrow"]):sf.base.classList(i,["e-nav-left-arrow"],["e-nav-right-arrow"])}else e&&t&&(e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0"));this.repeatScroll()},t.prototype.scrollHandler=function(e){var t=e.target,i=t.offsetWidth,n=(this.element,this.element.querySelector(".e-scroll-left-nav")),s=this.element.querySelector(".e-scroll-right-nav"),o=this.element.querySelector(".e-scroll-left-overlay"),r=this.element.querySelector(".e-scroll-right-overlay"),a=t.scrollLeft;if(a<=0&&(a=-a),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(o=this.element.querySelector(".e-scroll-right-overlay"),r=this.element.querySelector(".e-scroll-left-overlay")),o.style.width=a<40?a+"px":"40px",t.scrollWidth-Math.ceil(i+a)<40?r.style.width=t.scrollWidth-Math.ceil(i+a)+"px":r.style.width="40px"),0===a)this.arrowDisabling(n,s);else if(Math.ceil(i+a+.1)>=t.scrollWidth)this.arrowDisabling(s,n);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},o([sf.base.Property(null)],t.prototype,"scrollStep",void 0),t=o([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(t,i){return e.call(this,t,i)||this}return a(t,e),t.prototype.preRender=function(){this.browser=sf.base.Browser.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=sf.base.Browser.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=sf.base.getUniqueID("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new sf.base.Touch(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),sf.base.EventHandler.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),sf.base.EventHandler.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){sf.base.isNullOrUndefined(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=sf.base.createElement("div",{className:"e-vscroll-content"}),t=sf.base.createElement("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,s=[].slice.call(i.children);n<s.length;n++){var o=s[n];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflow="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",sf.base.removeClass([this.element],["e-vscroll","e-scroll-device"]);var i=sf.base.selectAll(".e-"+t.id+"_nav.e-scroll-nav",t),n=sf.base.selectAll(".e-scroll-overlay",t);[].slice.call(n).forEach((function(e){sf.base.detach(e)}));for(var s=0,o=[].slice.call(this.scrollItems.children);s<o.length;s++){var r=o[s];t.appendChild(r)}this.uniqueId&&this.element.removeAttribute("id"),sf.base.detach(this.scrollEle),i.length>0&&(sf.base.detach(i[0]),sf.base.isNullOrUndefined(i[1])||sf.base.detach(i[1])),sf.base.EventHandler.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=sf.base.selectAll(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),i=sf.base.createElement("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),s=sf.base.createElement("div",{id:t.concat("down"),className:n}),o=sf.base.createElement("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});s.appendChild(o);var r=sf.base.createElement("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&s.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(s),e.insertBefore(r,e.firstChild),this.eventBinding([s])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=sf.base.createElement("div",{id:t.concat("_down"),className:i});n.setAttribute("aria-disabled","false");var s=sf.base.createElement("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),r=sf.base.createElement("div",{id:t.concat("_up"),className:o+" e-overlay"});r.setAttribute("aria-disabled","true");var a=sf.base.createElement("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});r.appendChild(a),n.appendChild(s),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(r,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),r.classList.add("e-ie-align")),this.eventBinding([n,r])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new sf.base.Touch(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),sf.base.EventHandler.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var n=t.classList;n.contains("e-scroll-nav")&&(n=t.querySelector(".e-nav-arrow").classList),n.contains("e-nav-down-arrow")?this.frameScrollRequest(e,"add",i):n.contains("e-nav-up-arrow")&&this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var n=.5;!function s(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?i.scrollTop+=t*o:"Down"===e.swipeDirection&&(i.scrollTop-=t*o),n-=.02,window.requestAnimationFrame(s))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(sf.base.selectAll(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetHeight}));!function i(){e<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t=this.scrollEle,i=e.distanceY;"Up"===e.scrollDirection?t.scrollTop=t.scrollTop+i:"Down"===e.scrollDirection&&(t.scrollTop=t.scrollTop-i)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(sf.base.isNullOrUndefined(e)?t:e).querySelector(".e-nav-arrow");sf.base.isNullOrUndefined(e)?sf.base.classList(i,["e-nav-down-arrow"],["e-nav-up-arrow"]):sf.base.classList(i,["e-nav-up-arrow"],["e-nav-down-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var t=e.target,i=t.offsetHeight,n=this.element.querySelector(".e-scroll-up-nav"),s=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector(".e-scroll-up-overlay"),r=this.element.querySelector(".e-scroll-down-overlay"),a=t.scrollTop;if(a<=0&&(a=-a),this.isDevice&&(o.style.height=a<40?a+"px":"40px",t.scrollHeight-Math.ceil(i+a)<40?r.style.height=t.scrollHeight-Math.ceil(i+a)+"px":r.style.height="40px"),0===a)this.arrowDisabling(n,s);else if(Math.ceil(i+a+.1)>=t.scrollHeight)this.arrowDisabling(s,n);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},l([sf.base.Property(null)],t.prototype,"scrollStep",void 0),t=l([sf.base.NotifyPropertyChanges],t)}(sf.base.Component);function h(e,t,i,n,s,o){var a=e("div",{className:"e-menu-"+n});return t.appendChild(a),a.appendChild(i),o?(a.style.overflow="hidden",a.style.height=o+"px"):(a.style.maxHeight=t.style.maxHeight,t.style.overflow="hidden"),"vscroll"===n?new d({enableRtl:s},a).scrollStep=sf.base.select(".e-"+n+"-bar",t).offsetHeight/2:new r({enableRtl:s},a).scrollStep=sf.base.select(".e-"+n+"-bar",t).offsetWidth,a}return e.HScroll=r,e.VScroll=d,e.addScrolling=function(e,t,i,n,s,o){var r,a,l=t.parentElement;if("vscroll"===n?(r=o||t.getBoundingClientRect().height,a=i.getBoundingClientRect().height):(r=t.getBoundingClientRect().width,a=i.getBoundingClientRect().width),r<a)return h(e,t,i,n,s,o);if(l){var d=l.getBoundingClientRect().width;return d<r&&"hscroll"===n?(a=d,t.style.maxWidth=d+"px",h(e,t,i,n,s,o)):i}return i},e.destroyScroll=function(e,t,i){if(e){var n=sf.base.select(".e-menu-parent",t);n?i&&i!==n||(e.destroy(),t.parentElement.appendChild(n),sf.base.detach(t)):(e.destroy(),sf.base.detach(t))}},e}({}))},"./modules/popup.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};sf.popups=sf.base.extend({},sf.popups,function(e){"use strict";var t,n=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),s([sf.base.Property("left")],t.prototype,"X",void 0),s([sf.base.Property("top")],t.prototype,"Y",void 0),t}(sf.base.ChildProperty),r="e-popup",a="e-rtl",l="e-popup-open",d="e-popup-close",h=function(e){function t(t,i){return e.call(this,i,t)||this}return n(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"width":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(e.width)});break;case"height":sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(e.height)});break;case"zIndex":sf.base.setStyleAttribute(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var s=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+s).toString()+"px";break;case"offsetY":var o=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+o).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.remove(r,a,l,d),this.element.classList.contains("e-popup-open")&&this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add(r);var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=sf.base.formatUnit(this.width)),"auto"!==this.height&&(e.height=sf.base.formatUnit(this.height)),sf.base.setStyleAttribute(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){sf.base.Browser.isDevice&&sf.base.EventHandler.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];sf.base.EventHandler.add(i,"scroll",this.scrollRefresh,this)}},t.prototype.unwireEvents=function(){sf.base.Browser.isDevice&&sf.base.EventHandler.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];sf.base.EventHandler.remove(i,"scroll",this.scrollRefresh)}},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||sf.base.isNullOrUndefined(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?sf.base.isNullOrUndefined(this.element)||this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,t){for(var i=this.getScrollableParent(e),n=0;n<i.length;n++)if(!this.isElementVisible(e,i[n]))return!1;return!0},t.prototype.isElementVisible=function(e,t){var i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(sf.base.isNullOrUndefined(this.checkGetBoundingClientRect(t))){var n=window,s={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},o=sf.popups.calculatePosition(e),r={top:o.top,left:o.left,right:o.left+i.width,bottom:o.top+i.height},a={top:s.bottom-r.top,left:s.right-r.left,bottom:r.bottom-s.top,right:r.right-s.left};return a.top>0&&a.left>0&&a.right>0&&a.bottom>0}var l=t.getBoundingClientRect();return!(i.bottom<l.top||i.bottom>l.bottom||i.right>l.right||i.left<l.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(a):this.element.classList.remove(a)},t.prototype.setContent=function(){if(!sf.base.isNullOrUndefined(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{var e=this.getRelateToElement(),t=this.content.props;e.classList.contains("e-dropdown-btn")&&!sf.base.isNullOrUndefined(t)||this.element.appendChild(this.content)}},t.prototype.orientationOnChange=function(){var e=this;setTimeout((function(){e.refreshPosition()}),200)},t.prototype.refreshPosition=function(e,t){sf.base.isNullOrUndefined(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()},t.prototype.reposition=function(){var e,t,i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var n=void 0,s=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=s,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(i){s=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=s}else e={left:0,top:0};sf.base.isNullOrUndefined(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return null}},t.prototype.getAnchorPosition=function(e,t,i,n,s){var o=this.checkGetBoundingClientRect(t),r=this.checkGetBoundingClientRect(e);if(sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(r))return null;var a=e,l={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?l=sf.popups.calculatePosition(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==a.tagName&&(t=t.parentElement),l=sf.popups.calculateRelativeBasedPosition(a,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-o.width/2:"container"===this.targetType?l.left+=r.width/2-o.width/2:l.left+=r.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth-o.width:"container"===this.targetType?l.left+=r.width-o.width:l.left+=r.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-o.height/2:"container"===this.targetType?l.top+=r.height/2-o.height/2:l.top+=r.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight-o.height:"container"===this.targetType?l.top+=r.height-o.height:l.top+=r.height}return l.left+=n,l.top+=s,l},t.prototype.callFlip=function(e){var t=this.getRelateToElement();sf.popups.flip(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==sf.popups.isCollide(this.element,this.viewPortElement).length)if(sf.base.isNullOrUndefined(this.viewPortElement)){var t=sf.popups.fit(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(n))return null;e&&!0===e.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),e&&!0===e.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,t){var n=this;if(this.wireEvents(),1e3===this.zIndex||!sf.base.isNullOrUndefined(t)){var s=sf.base.isNullOrUndefined(t)?this.element:t;this.zIndex=p(s),sf.base.setStyleAttribute(this.element,{zIndex:this.zIndex})}e=sf.base.isNullOrUndefined(e)||"object"!==i(e)?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(sf.base.removeClass([this.element],d),sf.base.addClass([this.element],l),this.checkCollision(),sf.base.removeClass([this.element],l),sf.base.addClass([this.element],d)),sf.base.isNullOrUndefined(e)?(sf.base.removeClass([this.element],d),sf.base.addClass([this.element],l),this.trigger("open")):(e.begin=function(){n.isDestroyed||(sf.base.removeClass([n.element],d),sf.base.addClass([n.element],l))},e.end=function(){n.isDestroyed||n.trigger("open")},new sf.base.Animation(e).animate(this.element))},t.prototype.hide=function(e){var t=this;e=sf.base.isNullOrUndefined(e)||"object"!==i(e)?this.hideAnimation:e,sf.base.isNullOrUndefined(e)?(sf.base.removeClass([this.element],l),sf.base.addClass([this.element],d),this.trigger("close")):(e.end=function(){t.isDestroyed||(sf.base.removeClass([t.element],l),sf.base.addClass([t.element],d),t.trigger("close"))},new sf.base.Animation(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),c(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var i=getComputedStyle(t);"fixed"===i.position&&!sf.base.isNullOrUndefined(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top)?sf.base.formatUnit(window.scrollY-parseInt(this.element.style.top)):sf.base.formatUnit(parseInt(this.element.style.top)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,!sf.base.isNullOrUndefined(this.element)&&sf.base.isNullOrUndefined(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},s([sf.base.Property("auto")],t.prototype,"height",void 0),s([sf.base.Property("auto")],t.prototype,"width",void 0),s([sf.base.Property(null)],t.prototype,"content",void 0),s([sf.base.Property("container")],t.prototype,"targetType",void 0),s([sf.base.Property(null)],t.prototype,"viewPortElement",void 0),s([sf.base.Property({X:"none",Y:"none"})],t.prototype,"collision",void 0),s([sf.base.Property("")],t.prototype,"relateTo",void 0),s([sf.base.Complex({},o)],t.prototype,"position",void 0),s([sf.base.Property(0)],t.prototype,"offsetX",void 0),s([sf.base.Property(0)],t.prototype,"offsetY",void 0),s([sf.base.Property(1e3)],t.prototype,"zIndex",void 0),s([sf.base.Property(!1)],t.prototype,"enableRtl",void 0),s([sf.base.Property("reposition")],t.prototype,"actionOnScroll",void 0),s([sf.base.Property(null)],t.prototype,"showAnimation",void 0),s([sf.base.Property(null)],t.prototype,"hideAnimation",void 0),s([sf.base.Event()],t.prototype,"open",void 0),s([sf.base.Event()],t.prototype,"close",void 0),s([sf.base.Event()],t.prototype,"targetExitViewport",void 0),t=s([sf.base.NotifyPropertyChanges],t)}(sf.base.Component);function c(e,t){for(var i=getComputedStyle(e),n=[],s=/(auto|scroll)/,o=e.parentElement;o&&"HTML"!==o.tagName;){var r=getComputedStyle(o);"absolute"===i.position&&"static"===r.position||!s.test(r.overflow+r.overflowY+r.overflowX)||n.push(o),o=o.parentElement}return t||n.push(document),n}function p(e){for(var t=e.parentElement,i=[];t&&"BODY"!==t.tagName;){var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==n&&"static"!==s&&i.push(n),t=t.parentElement}for(var o=[],r=0;r<document.body.children.length;r++)if(!e.isEqualNode(document.body.children[r])){n=document.defaultView.getComputedStyle(document.body.children[r],null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(document.body.children[r],null).getPropertyValue("position");"auto"!==n&&"static"!==s&&o.push(n)}o.push("999");var a=[];if(!sf.base.isNullOrUndefined(e.parentElement)&&"BODY"!==e.parentElement.tagName){var l=[].slice.call(e.parentElement.children);for(r=0;r<l.length;r++)if(!e.isEqualNode(l[r])){n=document.defaultView.getComputedStyle(l[r],null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(l[r],null).getPropertyValue("position");"auto"!==n&&"static"!==s&&a.push(n)}}var d=i.concat(o,a),h=Math.max.apply(Math,d)+1;return h>2147483647?2147483647:h}return e.PositionData=o,e.Popup=h,e.getScrollableParent=c,e.getZindexPartial=p,e.getMaxZindex=function(e){void 0===e&&(e=["*"]);for(var t=[],i=0;i<e.length;i++)for(var n=document.getElementsByTagName(e[i]),s=0;s<n.length;s++){var o=document.defaultView.getComputedStyle(n[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(n[s],null).getPropertyValue("position");"auto"!==o&&"static"!==r&&t.push(o)}var a=Math.max.apply(Math,t)+1;return a>2147483647?2147483647:a},e}({}))},"./modules/popupsbase.js":function(e,t){window.sf=window.sf||{};window.sf.popups=window.sf.base.extend({},window.sf.popups,function(e){"use strict";var t,i,n,s,o,r,a=!1;function l(e,o,r,l,c){if(i=void 0,i=c,a=!!l,!e)return{left:0,top:0};o||(o="left"),r||(r="top"),s=e.ownerDocument,n=e;return function(e,i,s){switch(t=n.getBoundingClientRect(),i+e){case"topcenter":d(b(),s),h(m(),s);break;case"topright":d(v(),s),h(m(),s);break;case"centercenter":d(b(),s),h(f(),s);break;case"centerright":d(v(),s),h(f(),s);break;case"centerleft":d(g(),s),h(f(),s);break;case"bottomcenter":d(b(),s),h(u(),s);break;case"bottomright":d(v(),s),h(u(),s);break;case"bottomleft":d(g(),s),h(u(),s);break;default:case"topleft":d(g(),s),h(m(),s)}return s}(o.toLowerCase(),r.toLowerCase(),{left:0,top:0})}function d(e,t){t.left=e}function h(e,t){t.top=e}function c(){return s.documentElement.scrollTop||s.body.scrollTop}function p(){return s.documentElement.scrollLeft||s.body.scrollLeft}function u(){return a?t.bottom:t.bottom+c()}function f(){return m()+t.height/2}function m(){return a?t.top:t.top+c()}function g(){return t.left+p()}function v(){var e=n&&n.classList.contains("e-date-range-wrapper")?i?i.width:0:i&&t.width>=i.width?i.width:0;return t.right+p()-e}function b(){return g()+t.width/2}function y(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function w(e,t){var i=!1,n=!1;return e-M()<A()&&(i=!0),t>N()&&(n=!0),{leftSide:i,rightSide:n}}function C(e,t){var i=!1,n=!1;return e-I()<T()&&(i=!0),t>k()&&(n=!0),{topSide:i,bottomSide:n}}function S(){return r.getBoundingClientRect().width}function E(){return r.getBoundingClientRect().height}function x(){return r.getBoundingClientRect().left}function O(){return r.getBoundingClientRect().top}function T(){return r?O():0}function A(){return r?x():0}function N(){return r?M()+x()+S():M()+B()}function k(){return r?I()+O()+E():I()+L()}function I(){return o.documentElement.scrollTop||o.body.scrollTop}function M(){return o.documentElement.scrollLeft||o.body.scrollLeft}function L(){return window.innerHeight}function B(){var e=window.innerWidth,t=document.documentElement.getBoundingClientRect();return e-(e-(sf.base.isNullOrUndefined(document.documentElement)?0:t.width))}var D,P,R,H,z,U,q,_,F=["north-west","north","north-east","west","east","south-west","south","south-east"],V=["e-restrict-left"],j=["north","west","east","south"],W=0,X=0,Y=0,K=0,G=0,Z=0,Q=null,J=null,$=null,ee=!0,te=0,ie=!0;function ne(e){de();var t=sf.base.createElement("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+e),"south"===e&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===e&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===e&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===e&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),D.appendChild(t)}function se(e){var t;return sf.base.isNullOrUndefined(e)||(t="string"==typeof e?document.querySelector(e):e),t}function oe(e){sf.base.isNullOrUndefined(e)&&(e=this);for(var t=D.querySelectorAll(".e-resize-handle"),i=0;i<t.length;i++){P=t[i],sf.base.EventHandler.add(P,"mousedown",ae,e);var n="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";sf.base.EventHandler.add(P,n,he,e)}var s=D.querySelectorAll(".e-dialog-border-resize");if(!sf.base.isNullOrUndefined(s))for(i=0;i<s.length;i++){P=s[i],sf.base.EventHandler.add(P,"mousedown",ae,e);n="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";sf.base.EventHandler.add(P,n,he,e)}}function re(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function ae(e){if(e.preventDefault(),D=e.target.parentElement,de(),G=e.pageX,Z=e.pageY,e.target.classList.add("e-focused-handle"),sf.base.isNullOrUndefined(Q)||!0!==Q(e,this)){this.targetEle&&D&&D.querySelector(".e-dlg-resizable")&&(this.target,q=null,U=this.targetEle.clientWidth,H=this.targetEle.clientHeight);var t=sf.base.isNullOrUndefined(q)?document:q;sf.base.EventHandler.add(t,"mousemove",ce,this),sf.base.EventHandler.add(document,"mouseup",le,this);for(var i=0;i<V.length;i++)ee=!D.classList.contains(V[i])}}function le(e){var t="msie"===sf.base.Browser.info.name?"pointermove":"touchmove",i="msie"===sf.base.Browser.info.name?"pointerup":"touchend",n=sf.base.isNullOrUndefined(q)?document:q,s="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";sf.base.EventHandler.remove(n,"mousemove",ce),sf.base.EventHandler.remove(n,t,ce),sf.base.EventHandler.remove(n,s,ce),sf.base.isNullOrUndefined(document.body.querySelector(".e-focused-handle"))||document.body.querySelector(".e-focused-handle").classList.remove("e-focused-handle"),sf.base.isNullOrUndefined($)||$(e,this),sf.base.EventHandler.remove(document,"mouseup",le),sf.base.EventHandler.remove(document,i,le)}function de(){W=parseFloat(getComputedStyle(D,null).getPropertyValue("width").replace("px","")),X=parseFloat(getComputedStyle(D,null).getPropertyValue("height").replace("px","")),Y=D.getBoundingClientRect().left,K=D.getBoundingClientRect().top}function he(e){D=e.target.parentElement,de();var t=e.touches?e.changedTouches[0]:e;if(G=t.pageX,Z=t.pageY,sf.base.isNullOrUndefined(Q)||!0!==Q(e,this)){var i="msie"===sf.base.Browser.info.name?"pointermove":"touchmove",n="msie"===sf.base.Browser.info.name?"pointerup":"touchend",s=sf.base.isNullOrUndefined(q)?document:q;sf.base.EventHandler.add(s,i,ce,this),sf.base.EventHandler.add(document,n,le)}}function ce(e){if(e.target.classList.contains("e-resize-handle")&&e.target.classList.contains("e-focused-handle")?P=e.target:sf.base.isNullOrUndefined(document.body.querySelector(".e-focused-handle"))||(P=document.body.querySelector(".e-focused-handle")),!sf.base.isNullOrUndefined(P)){for(var t="",i=0;i<F.length;i++)P.classList.contains("e-"+F[i])&&(t=F[i]);switch(sf.base.isNullOrUndefined(J)||J(e,this),t){case"south":ue(e);break;case"north":fe(e);break;case"west":me(e);break;case"east":ge(e);break;case"south-east":ue(e),ge(e);break;case"south-west":ue(e),me(e);break;case"north-east":fe(e),ge(e);break;case"north-west":fe(e),me(e)}}}function pe(e){return e.getBoundingClientRect()}function ue(e){var t,i=document.documentElement.clientHeight,n=!1,s=(e.touches?e.changedTouches[0]:e).pageY,o=pe(D);sf.base.isNullOrUndefined(q)||(t=pe(q)),sf.base.isNullOrUndefined(q)?sf.base.isNullOrUndefined(q)&&(i-s>=0||o.top<0)&&(n=!0):n=!0;var r=X+(s-Z);r=r>R?r:R;var a=0;sf.base.isNullOrUndefined(q)||(a=t.top);var l=sf.base.isNullOrUndefined(q)?0:q.offsetHeight-q.clientHeight,d=o.top-a-l/2;if(d=d<0?0:d,o.top>0&&d+r>H){if(n=!1,D.classList.contains("e-resize-viewport"))return;D.style.height=H-parseInt(d.toString(),10)+"px"}else{var h=0;if(n){o.top<0&&i+(o.height+o.top)>0&&r+(h=o.top)<=30&&(r=o.height-(o.height+o.top)+30),r+o.top>=H&&(D.style.height=o.height+(i-(o.height+o.top))+"px");var c=sf.base.isNullOrUndefined(q)?h:d;r>=R&&r+c<=H&&(D.style.height=r+"px")}}}function fe(e){var t,i=!1,n="mouse"===re(e.type)?e.pageY:e.touches[0].pageY,s=pe(D);sf.base.isNullOrUndefined(q)||(t=pe(q)),(!sf.base.isNullOrUndefined(q)&&s.top-t.top>0||sf.base.isNullOrUndefined(q)&&n>0)&&(i=!0);var o=X-(n-Z);if(i&&o>=R&&o<=H){var r=0;sf.base.isNullOrUndefined(q)||(r=t.top);var a=K-r+(n-Z);a=a>0?a:1,D.style.height=o+"px",D.style.top=a+"px"}}function me(e){var t,i=document.documentElement.clientWidth,n=!1;sf.base.isNullOrUndefined(q)||(t=pe(q));var s="mouse"===re(e.type)?e.pageX:e.touches[0].pageX,o=pe(D),r=sf.base.isNullOrUndefined(q)?0:q.offsetWidth-q.clientWidth,a=sf.base.isNullOrUndefined(q)?0:t.left,l=sf.base.isNullOrUndefined(q)?0:t.width;sf.base.isNullOrUndefined(_)&&(sf.base.isNullOrUndefined(q)?_=i:(_=o.left-a-r/2+o.width,_+=l-r-_)),(!sf.base.isNullOrUndefined(q)&&Math.floor(o.left-t.left+o.width+(t.right-o.right))-r<=U||sf.base.isNullOrUndefined(q)&&s>=0)&&(n=!0);var d=W-(s-G);if(ee&&(d=d>_?_:d),n&&d>=z&&d<=U){var h=0;sf.base.isNullOrUndefined(q)||(h=t.left);var c=Y-h+(s-G);c=c>0?c:1,d!==te&&ie&&(D.style.width=d+"px"),ee&&(D.style.left=c+"px",ie=1!==c)}te=d}function ge(e){var t,i=document.documentElement.clientWidth,n=!1;sf.base.isNullOrUndefined(q)||(t=pe(q));var s=(e.touches?e.changedTouches[0]:e).pageX,o=pe(D);(!sf.base.isNullOrUndefined(q)&&(o.left-t.left+o.width<=U||o.right-t.left>=o.width)||sf.base.isNullOrUndefined(q)&&i-s>0)&&(n=!0);var r=W+(s-G),a=0;if(sf.base.isNullOrUndefined(q)||(a=t.left),o.left-a+r>U){if(n=!1,D.classList.contains("e-resize-viewport"))return;D.style.width=U-(o.left-a)+"px"}n&&r>=z&&r<=U&&(D.style.width=r+"px")}return e.fit=function(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var s=e.getBoundingClientRect();if(r=t,o=e.ownerDocument,n||(n=l(e,"left","top")),i.X){var a=r?S():B(),d=A(),h=N(),c=d-n.left,p=n.left+s.width-h;s.width>a?n.left=c>0&&p<=0?h-s.width:p>0&&c<=0?d:c>p?h-s.width:d:c>0?n.left+=c:p>0&&(n.left-=p)}if(i.Y){var u=r?E():L(),f=T(),m=k(),g=f-n.top,v=n.top+s.height-m;s.height>u?n.top=g>0&&v<=0?m-s.height:v>0&&g<=0?f:g>v?m-s.height:f:g>0?n.top+=g:v>0&&(n.top-=v)}return n},e.isCollide=function(e,t,i,n){void 0===t&&(t=null);var s=l(e,"left","top");i&&(s.left=i),n&&(s.top=n);var a=[];r=t,o=e.ownerDocument;var d=e.getBoundingClientRect(),h=s.top,c=s.left,p=s.left+d.width,u=C(h,s.top+d.height),f=w(c,p);return u.topSide&&a.push("top"),f.rightSide&&a.push("right"),f.leftSide&&a.push("left"),u.bottomSide&&a.push("bottom"),a},e.flip=function(e,t,i,n,s,a,d,h,c){if(void 0===d&&(d=null),void 0===h&&(h={X:!0,Y:!0}),t&&e&&s&&a&&(h.X||h.Y)){var p,u={TL:null,TR:null,BL:null,BR:null},f={TL:null,TR:null,BL:null,BR:null};if("none"===window.getComputedStyle(e).display){var m=e.style.visibility;e.style.visibility="hidden",e.style.display="block",p=e.getBoundingClientRect(),e.style.removeProperty("display"),e.style.visibility=m}else p=e.getBoundingClientRect();var g={posX:s,posY:a,offsetX:i,offsetY:n,position:{left:0,top:0}};r=d,o=t.ownerDocument,function(e,t,i,n,s){i.position=l(e,i.posX,i.posY,n,s),t.TL=l(e,"left","top",n,s),t.TR=l(e,"right","top",n,s),t.BR=l(e,"left","bottom",n,s),t.BL=l(e,"right","bottom",n,s)}(t,u,g,c,p),y(f,g,p),h.X&&function e(t,i,n,s,o,r){var a=w(i.TL.left,i.TR.left);n.TL.left-M()<=A()&&(a.leftSide=!1);n.TR.left>N()&&(a.rightSide=!1);(a.leftSide&&!a.rightSide||!a.leftSide&&a.rightSide)&&("right"===s.posX?s.posX="left":s.posX="right",s.offsetX=s.offsetX+o.width,s.offsetX=-1*s.offsetX,s.position=l(t,s.posX,s.posY,!1),y(i,s,o),r&&e(t,i,n,s,o,!1))}(t,f,u,g,p,!0),h.Y&&u.TL.top>-1&&function e(t,i,n,s,o,r){var a=C(i.TL.top,i.BL.top);n.TL.top-I()<=T()&&(a.topSide=!1);n.BL.top>=k()&&t.getBoundingClientRect().bottom<window.innerHeight&&(a.bottomSide=!1);(a.topSide&&!a.bottomSide||!a.topSide&&a.bottomSide)&&("top"===s.posY?s.posY="bottom":s.posY="top",s.offsetY=s.offsetY+o.height,s.offsetY=-1*s.offsetY,s.position=l(t,s.posX,s.posY,!1,o),y(i,s,o),r&&e(t,i,n,s,o,!1))}(t,f,u,g,p,!0),function(e,t,i){var n=0,s=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var o=l(e.offsetParent,"left","top",!1,i);n=o.left,s=o.top}e.style.top=t.position.top+t.offsetY-s+"px",e.style.left=t.position.left+t.offsetX-n+"px"}(e,g,p)}},e.calculateRelativeBasedPosition=function(e,t){var i=!1,n={left:0,top:0},s=e;if(!e||!t)return n;for(sf.base.isNullOrUndefined(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;for(e=s;(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left-=e.scrollLeft,n.top-=e.scrollTop,e=e.parentElement;return n},e.calculatePosition=l,e.createResize=function(e){Q=e.resizeBegin,J=e.resizing,$=e.resizeComplete,D=se(e.element),q=se(e.boundary);for(var t=e.direction.split(" "),i=0;i<t.length;i++)if(j.indexOf(t[i])>=0&&t[i])ne(t[i]);else if(""!==t[i].trim()){var n=sf.base.createElement("div",{className:"e-icons e-resize-handle e-"+t[i]});D.appendChild(n)}R=e.minHeight,z=e.minWidth,U=e.maxWidth,H=e.maxHeight,e.proxy&&e.proxy.element&&e.proxy.element.classList.contains("e-dialog")?oe(e.proxy):oe()},e.setMinHeight=function(e){R=e},e.setMaxWidth=function(e){U=e},e.setMaxHeight=function(e){H=e},e.removeResize=function(){for(var e=D.querySelectorAll(".e-resize-handle"),t=0;t<e.length;t++)sf.base.detach(e[t]);var i=D.querySelectorAll(".e-dialog-border-resize");if(!sf.base.isNullOrUndefined(i))for(t=0;t<i.length;t++)sf.base.detach(i[t])},e}({}))},"./modules/sf-accordion.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Accordion=function(){"use strict";var e="e-acrdn-item",t="e-acrdn-header",i=function(){function i(e,t,i,n){window.sfBlazor=window.sfBlazor,this.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},this.element=t,this.dotNetRef=n,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return i.prototype.destroy=function(){var e=this.element;this.unwireEvents(),this.isDestroy=!0,e.classList.remove("e-acrdn-root"),!this.isNested&&sf.base.isRippleEnabled&&this.removeRippleEffect()},i.prototype.render=function(){var e=sf.base.closest(this.element,".e-acrdn-panel");this.isNested=!1,this.isDestroy||(this.isDestroy=!1),e&&e.firstElementChild&&e.firstElementChild.firstElementChild?e.firstElementChild.firstElementChild.classList.contains("e-accordion")&&(e.classList.add("e-nested"),this.isNested=!0):this.element.classList.add("e-acrdn-root"),this.wireFocusEvents(),this.wireEvents()},i.prototype.wireFocusEvents=function(){for(var i=0,n=[].slice.call(this.element.querySelectorAll("."+e));i<n.length;i++){var s=n[i],o=s.querySelector("."+t);s.childElementCount>0&&o&&(sf.base.EventHandler.clearEvents(o),sf.base.EventHandler.add(o,"focus",this.focusIn,this),sf.base.EventHandler.add(o,"blur",this.focusOut,this))}},i.prototype.unwireEvents=function(){sf.base.isNullOrUndefined(this.keyModule)||this.keyModule.destroy()},i.prototype.wireEvents=function(){this.isNested||this.isDestroy||(this.removeRippleEffect=sf.base.rippleEffect(this.element,{selector:"."+t})),this.isNested||(this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},i.prototype.focusIn=function(e){e.target.parentElement.classList.add("e-item-focus")},i.prototype.focusOut=function(e){e.target.parentElement.classList.remove("e-item-focus")},i.prototype.afterContentRender=function(t){var i,n=this,s=[],o=t,r=o.children[0],a=o.children[1];r?i=sf.base.closest(r,"."+e):a&&(i=sf.base.closest(a,"."+e));var l=this.element.children;[].slice.call(l).forEach((function(e){e.classList.contains("e-active")&&s.push(e)}));var d=[].slice.call(this.element.querySelectorAll("."+e+" [e-animate]"));if(d.length>0)for(var h=0,c=d;h<c.length;h++){var p=c[h];s.push(p.parentElement)}var u=-1!==s.indexOf(i)&&"true"===a.getAttribute("e-animate"),f=!1;if(!sf.base.isNullOrUndefined(o)&&!sf.base.isNullOrUndefined(r)){var m=sf.base.select(".e-acrdn-panel",o),g=sf.base.closest(o,".e-acrdn-root").querySelector(".e-expand-state");if(sf.base.isNullOrUndefined(m))return;f=g===o,!sf.base.isVisible(m)||u&&!i.classList.contains("e-selected")?(s.length>0&&"Single"===this.options.expandMode&&!u&&s.forEach((function(e){n.collapse(sf.base.select(".e-acrdn-panel",e)),e.classList.remove("e-expand-state")})),this.expand(m)):this.collapse(m),sf.base.isNullOrUndefined(g)||f||g.classList.remove("e-expand-state")}},i.prototype.eleMoveFocus=function(i,n,s){var o,r=sf.base.closest(s,"."+e);s===n?o=("moveUp"===i?s.lastElementChild:s).querySelector("."+t):s.classList.contains(t)&&(r="moveUp"===i?r.previousElementSibling:r.nextElementSibling)&&(o=sf.base.select("."+t,r)),o&&o.focus()},i.prototype.keyActionHandler=function(e){var i=e.target,n=sf.base.closest(e.target,t);if(!sf.base.isNullOrUndefined(n)||i.classList.contains("e-accordion")||i.classList.contains(t)){var s,o=this.element;switch(e.action){case"moveUp":case"moveDown":this.eleMoveFocus(e.action,o,i);break;case"space":case"enter":s=i.nextElementSibling,!sf.base.isNullOrUndefined(s)&&s.classList.contains("e-acrdn-panel")?"true"!==s.getAttribute("e-animate")&&i.click():i.click(),e.preventDefault();break;case"home":case"end":("home"===e.action?o.firstElementChild.children[0]:o.lastElementChild.children[0]).focus(),e.preventDefault()}}},i.prototype.expand=function(t){var i=sf.base.closest(t,"."+e);sf.base.isNullOrUndefined(t)||sf.base.isVisible(t)&&"true"!==t.getAttribute("e-animate")||i.classList.contains("e-overlay")||this.dotNetRef.invokeMethodAsync("TriggerExpandingEvent",this.getIndexByItem(i))},i.prototype.expandAnimation=function(e,t,i,n,s,o){var r,a=this;this.lastActiveItemId=n.id,"None"===e&&"Enable"===sf.base.animationMode&&(e="SlideDown",s.name="SlideDown"),"SlideDown"===e?(s.begin=function(){a.expandProgress("begin",t,i,n,o),i.style.position="absolute",r=n.offsetHeight,i.style.maxHeight=i.offsetHeight+"px",n.style.maxHeight=""},s.progress=function(){n.style.minHeight=r+i.offsetHeight+"px"},s.end=function(){sf.base.setStyleAttribute(i,{position:"",maxHeight:""}),n.style.minHeight="",a.expandProgress("end",t,i,n,o)}):(s.begin=function(){a.expandProgress("begin",t,i,n,o)},s.end=function(){a.expandProgress("end",t,i,n,o)}),new sf.base.Animation(s).animate(i)},i.prototype.expandProgress=function(e,t,i,n,s){sf.base.removeClass([i],"e-content-hide"),sf.base.addClass([n],"e-selected"),sf.base.addClass([t],"e-expand-icon"),"end"===e&&(sf.base.addClass([n],"e-active"),i.setAttribute("aria-hidden","false"),sf.base.attributes(n,{"aria-expanded":"true"}),t.classList.remove("e-toggle-animation"),this.dotNetRef.invokeMethodAsync("TriggerExpandedEvent",s),this.setPersistence("accordion"+this.element.id))},i.prototype.expandedItemsPush=function(e){var t=this.getIndexByItem(e);if(-1===this.options.expandedIndices.indexOf(t)){var i=[].slice.call(this.options.expandedIndices);i.push(t),this.options.expandedIndices=i}},i.prototype.getIndexByItem=function(e){var t=this.getItemElements();return[].slice.call(t).indexOf(e)},i.prototype.getItemElements=function(){var t=[],i=this.element.children;return[].slice.call(i).forEach((function(i){i.classList.contains(e)&&t.push(i)})),t},i.prototype.expandedItemsPop=function(e){var t=this.getIndexByItem(e),i=[].slice.call(this.options.expandedIndices),n=i.indexOf(t);n>-1&&i.splice(n,1),this.options.expandedIndices=i},i.prototype.collapse=function(t){var i=sf.base.closest(t,"."+e);sf.base.isNullOrUndefined(t)||!sf.base.isVisible(t)||i.classList.contains("e-overlay")||this.dotNetRef.invokeMethodAsync("TriggerCollapsingEvent",this.getIndexByItem(i))},i.prototype.collapseAnimation=function(e,t,i,n,s,o){var r,a,l,d,h=this;this.lastActiveItemId=i.id,"None"===e&&"Enable"===sf.base.animationMode&&(e="SlideUp",s.name="SlideUp"),"SlideUp"===e?(s.begin=function(){l=i.offsetHeight,i.style.minHeight=l+"px",t.style.position="absolute",r=i.offsetHeight,a=t.offsetHeight,t.style.maxHeight=a+"px",h.collapseProgress("begin",n,t,i,o)},s.progress=function(){(d=r-(a-t.offsetHeight))<l&&(i.style.minHeight=d+"px")},s.end=function(){t.style.display="none",h.collapseProgress("end",n,t,i,o),i.style.minHeight="",sf.base.setStyleAttribute(t,{position:"",maxHeight:"",display:""})}):(s.begin=function(){h.collapseProgress("begin",n,t,i,o)},s.end=function(){h.collapseProgress("end",n,t,i,o)}),new sf.base.Animation(s).animate(t)},i.prototype.collapseProgress=function(e,t,i,n,s){sf.base.removeClass([t],"e-expand-icon"),sf.base.removeClass([n],"e-selected"),"end"===e&&(sf.base.addClass([i],"e-content-hide"),t.classList.remove("e-toggle-animation"),sf.base.removeClass([n],"e-active"),i.setAttribute("aria-hidden","true"),sf.base.attributes(n,{"aria-expanded":"false"}),this.dotNetRef.invokeMethodAsync("TriggerCollapsedEvent",s),this.setPersistence("accordion"+this.element.id))},i.prototype.expandingItem=function(t){this.accItem=sf.base.selectAll(":scope > ."+e,this.element);var i=this.getElementByIndex(t.index),n=sf.base.select(".e-acrdn-panel",i),s=sf.base.closest(i,".e-acrdn-root"),o=sf.base.select(".e-toggle-icon",i).firstElementChild,r=s.querySelector(".e-expand-state"),a={name:this.options.animation.expand.effect,duration:this.options.animation.expand.duration,timingFunction:this.options.animation.expand.easing};o.classList.add("e-toggle-animation"),this.expandedItemsPush(i),sf.base.isNullOrUndefined(r)||r.classList.remove("e-expand-state"),i.classList.add("e-expand-state"),"None"===a.name&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?(this.expandProgress("begin",o,n,i,t),this.expandProgress("end",o,n,i,t)):this.expandAnimation(a.name,o,n,i,a,t)},i.prototype.getElementByIndex=function(e){return this.accItem[e]?this.accItem[e]:null},i.prototype.collapsingItem=function(t){this.accItem=sf.base.selectAll(":scope > ."+e,this.element);var i=this.getElementByIndex(t.index),n=sf.base.select(".e-acrdn-panel",i),s=sf.base.select(".e-toggle-icon",i).firstElementChild,o={name:this.options.animation.collapse.effect,duration:this.options.animation.collapse.duration,timingFunction:this.options.animation.collapse.easing};this.expandedItemsPop(i),i.classList.add("e-expand-state"),s.classList.add("e-toggle-animation"),"None"===o.name&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?(this.collapseProgress("begin",s,n,i,t),this.collapseProgress("end",s,n,i,t)):this.collapseAnimation(o.name,n,i,s,o,t)},i.prototype.select=function(e){var i=this.getItemElements()[e];sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(sf.base.select("."+t,i))||i.children[0].focus()},i.prototype.expandItem=function(e,t){var i=this,n=this.getItemElements();if(sf.base.isNullOrUndefined(t))if("Single"===this.options.expandMode&&e){var s=n[n.length-1];this.itemExpand(e,s,this.getIndexByItem(s))}else{var o=sf.base.select("#"+this.lastActiveItemId,this.element);[].slice.call(n).forEach((function(t){i.itemExpand(e,t,i.getIndexByItem(t)),t.classList.remove("e-expand-state")}));var r=sf.base.select(".e-expand-state",this.element);r&&r.classList.remove("e-expand-state"),o&&o.classList.add("e-expand-state")}else{s=n[t];if(sf.base.isNullOrUndefined(s)||!s.classList.contains("e-select")||s.classList.contains("e-active")&&e)return;"Single"===this.options.expandMode&&this.expandItem(!1),this.itemExpand(e,s,t)}},i.prototype.setPersistence=function(e){this.options.enablePersistence&&window.localStorage.setItem(e,this.options.expandedIndices.toString())},i.prototype.itemExpand=function(e,t,i){var n=this,s=t.children[1];t.classList.contains("e-overlay")||(sf.base.isNullOrUndefined(s)&&e?this.dotNetRef.invokeMethodAsync("OnAccordionClick",i).then((function(){s=t.children[1],sf.base.isNullOrUndefined(s)||n.expand(s)})):sf.base.isNullOrUndefined(s)||(e?this.expand(s):this.collapse(s)))},i}();return{initialize:function(e,t,n,s){if(t&&e){null===n.expandedIndices&&(n.expandedIndices=[]);var o=new i(e,t,n,s);o.render(),o.dotNetRef.invokeMethodAsync("CreatedEvent",null)}},expandingItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.element&&i.expandingItem(t)},collapsingItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.element&&i.collapsingItem(t)},select:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.element&&i.select(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t.element&&(t.setPersistence("accordion"+t.element.id),t.destroy())},setExpandModeAndRTL:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);o.element&&(n&&(t?sf.base.addClass([o.element],"e-rtl"):sf.base.removeClass([o.element],"e-rtl")),s&&(o.options.expandMode=i,"Single"===i?(o.element.setAttribute("aria-multiselectable","false"),o.options.expandedIndices.length>1&&o.expandItem(!1)):o.element.setAttribute("aria-multiselectable","true")))},itemChanged:function(e){var t=window.sfBlazor.getCompInstance(e);t.element&&t.wireFocusEvents()},afterContentRender:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n.element&&(n.options.animation=i,n.afterContentRender(t))},itemExpandedOrCollapsed:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(i.element){var n=i.accItem[t.index].querySelector(".e-acrdn-panel");n&&n.firstElementChild&&n.firstElementChild.firstElementChild&&n.firstElementChild.firstElementChild.classList.contains("e-accordion")&&n.classList.add("e-nested")}}}}()},"./modules/sf-accumulation-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.AccumulationChart=function(){"use strict";var e=function(e,t){this.x=e,this.y=t},t=function(){function e(e,t,i,n,s){window.sfBlazor=window.sfBlazor,this.chartOnMouseDownRef=null,this.mouseMoveRef=null,this.mouseMoveThreshold=null,this.mouseEndRef=null,this.chartOnMouseClickRef=null,this.chartRightClickRef=null,this.mouseLeaveRef=null,this.chartMouseWheelRef=null,this.domMouseMoveRef=null,this.domMouseUpRef=null,this.chartKeyDownRef=null,this.chartKeyUpRef=null,this.longPressBound=null,this.touchObject=null,this.mouseY=0,this.mouseX=0,this.eventInterval=80,this.documentKeyHandler=function(e){e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&this.element.focus()},this.id=t,this.element=i,this.dotnetref=n,this.options=s,this.currentLegendIndex=0,this.currentPointIndex=0,this.previousTargetId="",this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.render=function(){this.unWireEvents(),this.wireEvents()},e.prototype.destroy=function(){this.unWireEvents()},e.prototype.wireEvents=function(){var e=document.getElementById(this.id);if(e){i.dotnetrefCollection.push({id:this.id,dotnetref:this.dotnetref});
/*! Find the Events type */
var t=sf.base.Browser.isPointer?"pointerleave":"mouseleave";this.chartOnMouseDownRef=this.chartOnMouseDown.bind(this,this.dotnetref,this.id),this.mouseMoveRef=this.mouseMove.bind(this,this.dotnetref,this.id),this.mouseEndRef=this.mouseEnd.bind(this,this.dotnetref,this.id),this.chartOnMouseClickRef=this.chartOnMouseClick.bind(this,this.dotnetref,this.id),this.chartRightClickRef=this.chartRightClick.bind(this,this.dotnetref,this.id),this.chartKeyDownRef=this.chartOnKeyDown.bind(this,this.dotnetref,this.id),this.chartKeyUpRef=this.chartOnKeyUp.bind(this,this.dotnetref,this.id),this.mouseLeaveRef=this.mouseLeave.bind(this,this.dotnetref,this.id),
/*! Bind the Event handler */
e.addEventListener("mousemove",this.mouseMoveRef),e.addEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.add(e,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.add(e,"click",this.chartOnMouseClickRef),sf.base.EventHandler.add(e,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.add(e,t,this.mouseLeaveRef),sf.base.EventHandler.add(e,"keydown",this.chartKeyDownRef),sf.base.EventHandler.add(e,"keyup",this.chartKeyUpRef),sf.base.EventHandler.add(document.body,"keydown",this.documentKeyHandler),i.resizeBound=i.chartResize.bind(this,i.dotnetrefCollection);var n=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,n,i.resizeBound),this.longPressBound=this.longPress.bind(this,this.dotnetref,this.id),this.touchObject=new sf.base.Touch(e,{tapHold:this.longPressBound,tapHoldThreshold:500})}},e.prototype.unWireEvents=function(){var e=this,t=document.getElementById(this.id);if(t){i.dotnetrefCollection=i.dotnetrefCollection.filter((function(t){return t.id!==e.id}));
/*! Find the Events type */
var n=sf.base.Browser.isPointer?"pointerleave":"mouseleave";
/*! Bind the Event handler */sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.chartOnMouseDownRef),t.removeEventListener("mousemove",this.mouseMoveRef),t.removeEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.remove(t,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.remove(t,"click",this.chartOnMouseClickRef),sf.base.EventHandler.remove(t,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.remove(t,n,this.mouseLeaveRef),sf.base.EventHandler.remove(t,"keydown",this.chartKeyDownRef),sf.base.EventHandler.remove(t,"keyup",this.chartKeyUpRef),sf.base.EventHandler.remove(document.body,"keydown",this.documentKeyHandler);var s=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,s,i.resizeBound),this.touchObject&&(this.touchObject.destroy(),this.touchObject=null)
/*! Apply the style for chart */}},e.prototype.getEventArgs=function(e){return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0}}},e.prototype.setMouseXY=function(e,t){var i=document.getElementById(this.id+"_svg").getBoundingClientRect(),n=document.getElementById(this.id).getBoundingClientRect();this.mouseY=t-n.top-Math.max(i.top-n.top,0),this.mouseX=e-n.left-Math.max(i.left-n.left,0)},e.prototype.chartOnMouseDown=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseDown",this.getEventArgs(i)),!1},e.prototype.chartOnKeyDown=function(e,t,i){this.dotnetref=e,this.id=t;var n="";return this.options.showTooltip&&("Tab"==i.code&&this.previousTargetId.indexOf("Series")>-1||"Escape"===i.code)&&(n="ESC"),i.code.indexOf("Arrow")>-1&&i.preventDefault(),i.ctrlKey&&"p"===i.key&&(i.preventDefault(),n="CtrlP"),""!=n&&e.invokeMethodAsync("OnAccumulationChartKeyboardNavigations",n,i.target.id),!1},e.prototype.chartOnKeyUp=function(e,t,n){this.dotnetref=e,this.id=t;var s="",o=n.target.id,r=document.getElementById(this.element.id+"_chart_legend_translate_g"),a=document.getElementById(this.element.id+"_chart_legend_pageup");if(r){var l=r.firstElementChild,d=l.getAttribute("class");d&&-1===d.indexOf("e-chart-focused")?d+=" e-chart-focused":d="e-chart-focused",l.setAttribute("class",d)}if(a&&a.setAttribute("class","e-chart-focused"),"Tab"==n.code){if(""!=this.previousTargetId)if(this.previousTargetId.indexOf("_Point_")>-1&&-1==o.indexOf("_Point_")){var h=document.getElementById(this.previousTargetId).parentElement;i.setTabIndex(h.children[this.currentPointIndex],h.firstElementChild),this.currentPointIndex=0}else this.previousTargetId.indexOf("_chart_legend_page")>-1&&-1==o.indexOf("_chart_legend_page")&&-1==o.indexOf("_chart_legend_g_")?i.setTabIndex(n.target,a):this.previousTargetId.indexOf("_chart_legend_g_")>-1&&-1==o.indexOf("chart_legend_g_")&&i.setTabIndex(r.children[this.currentLegendIndex],r.firstElementChild);this.previousTargetId=o,o.indexOf("_chart_legend_g_")>-1&&this.options.enableHighlight?(o=n.target.lastElementChild.id,s="Tap"):o.indexOf("_Point_")>-1&&(this.options.enableHighlight||this.options.showTooltip)&&(s="Tap")}else if(n.code.indexOf("Arrow")>-1)if(n.preventDefault(),o.indexOf("_chart_legend_page")>-1)n.target.removeAttribute("tabindex"),this.previousTargetId=o=this.element.id+"_chart_legend_page"+("ArrowRight"==n.code?"up":"down"),i.focusTarget(document.getElementById(o));else if(o.indexOf("_chart_legend_")>-1){n.target.removeAttribute("tabindex"),this.currentLegendIndex+="ArrowUp"==n.code||"ArrowRight"==n.code?1:-1,this.currentLegendIndex=i.getActualIndex(this.currentLegendIndex,r.children.length);var c=r.children[this.currentLegendIndex];i.focusTarget(c),this.previousTargetId=o=c.lastElementChild.id,s=this.options.enableHighlight?"ArrowMove":""}else o.indexOf("_Point_")>-1&&(n.target.removeAttribute("tabindex"),this.currentPointIndex+="ArrowUp"==n.code||"ArrowRight"==n.code?1:-1,this.currentPointIndex=i.getActualIndex(this.currentPointIndex,n.target.parentElement.children.slice().filter((function(e){return e.id.indexOf("_Point_")>-1})).length),o=this.element.id+"_Series_0_Point_"+this.currentPointIndex,i.focusTarget(document.getElementById(o)),s=this.options.showTooltip?"ArrowMove":"");else"Enter"!=n.code&&"Space"!=n.code||!(o.indexOf("_chart_legend_")>-1||o.indexOf("_Point_")>-1)||(o=o.indexOf("_chart_legend_g")>-1?n.target.lastElementChild.id:o,s="Enter");return""!=s&&e.invokeMethodAsync("OnAccumulationChartKeyboardNavigations",s,o),!1},e.prototype.mouseMove=function(e,t,i){if(null==this.mouseMoveThreshold||(new Date).getTime()-this.mouseMoveThreshold>this.eventInterval){this.mouseMoveThreshold=(new Date).getTime(),this.dotnetref=e,this.id=t;var n=void 0,s=void 0,o=void 0;"touchmove"===i.type?(this.isTouch=!0,n=(o=i).changedTouches[0].clientX,s=o.changedTouches[0].clientY):(this.isTouch="touch"===i.pointerType||"2"===i.pointerType||this.isTouch,n=i.clientX,s=i.clientY),document.getElementById(this.id+"_svg")&&(this.setMouseXY(n,s),this.dotnetref.invokeMethodAsync("OnChartMouseMove",this.getEventArgs(i)))}return!1},e.prototype.mouseEnd=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseEnd",this.getEventArgs(i)),!1},e.prototype.chartOnMouseClick=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseClick",this.getEventArgs(i)),!1},e.prototype.chartRightClick=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartRightClick",this.getEventArgs(i)),!1},e.prototype.mouseLeave=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseLeave",this.getEventArgs(i)),!1},e.prototype.longPress=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartLongPress",i),!1},e}(),i={initialize:function(e,i,n,s){new t(e,i.id,i,n,s).render()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},focusTargetId:function(e){this.focusTarget(document.getElementById(e).parentElement)},focusTarget:function(e){var t=e.getAttribute("class");return e.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-chart-focused")?t+=" e-chart-focused":t||(t="e-chart-focused"),e.setAttribute("tabindex","0"),e.setAttribute("class",t),e.focus(),e.id},getActualIndex:function(e,t){return e>t-1?0:e<0?t-1:e},setTabIndex:function(e,t){e.removeAttribute("tabindex"),t.setAttribute("tabindex","0")},id:"",getParentElementBoundsById:function(e){var t=document.getElementById(e);if(t){t.style.width="100%",t.style.height="100%";var i=t.getBoundingClientRect();return{width:i.width||t.clientWidth||t.offsetWidth,height:i.height||t.clientHeight||t.offsetHeight,left:i.left,top:i.top,right:i.right,bottom:i.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(e,t){void 0===t&&(t=!0),t&&(this.id=e);var i=document.getElementById(e);if(i){var n=i.getBoundingClientRect();return{width:i.clientWidth||i.offsetWidth,height:i.clientHeight||i.offsetHeight,left:n.left,top:n.top,right:n.right,bottom:n.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getAllCharacters:function(){for(var e=[],t=33;t<591;t++)e.push(String.fromCharCode(t));return e},measureText:function(e,t,i,n){var s=document.getElementById("chartmeasuretext");return null===s&&(s=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(s))," "===e&&(e="&nbsp;"),s.innerHTML=e,s.style.position="fixed",s.style.fontSize="100px",s.style.fontWeight=t,s.style.fontStyle=i,s.style.fontFamily=n,s.style.visibility="hidden",s.style.top="-100",s.style.left="0",s.style.whiteSpace="nowrap",s.style.lineHeight="normal",{Width:s.clientWidth,Height:s.clientHeight}},getCharCollectionSize:function(e){for(var t,i=[],n={},s=this.getAllCharacters(),o=s.length,r=e.length,a=0;a<r;a++){for(var l=e[a].split("_"),d=l[0],h=l[1],c=l[2],p=0;p<o;p++)t=this.measureText(s[p],d,h,c),n[s[p]]={X:t.Width,Y:t.Height};i.push(n)}return JSON.stringify(i)},dotnetref:{},dotnetrefCollection:[],resizeBound:{},resize:{},chartResize:function(e,t){var i=this;return this.resize&&clearTimeout(this.resize),this.resize=setTimeout((function(){for(var n=e.length,s=0;s<n;s++)e[s].dotnetref.invokeMethodAsync("RemoveElements");for(s=0;s<n;s++)e[s].dotnetref.invokeMethodAsync("OnChartResize",t);clearTimeout(i.resize)}),500),!1},performAnimation:function(e,t,i,n,s,o,r,a,l){var d=this,h=/translate\((-?\d+\.?\d*),?\s*(-?\d+[.]?\d*)?\)/.exec(a);sf.base.isNullOrUndefined(a)||""===a||(s=+h[1],o=+h[2]);var c="";if(r<=0)return this.setElementTransform(t,e,"transform","translate("+s+", "+o+")",c),null;var p,u,f=t.replace("Series_0","datalabel").replace("Point","Series_0");if(!sf.base.isNullOrUndefined(document.getElementById(f+"text_"+e))){var m=(c=document.getElementById(f+"text_"+e).getAttribute("transform")).split(" ");m.length>2&&(c=m[2])}new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:r,progress:function(r){p=d.linear(r.timeStamp,i,s,r.duration),u=d.linear(r.timeStamp,n,o,r.duration),d.setElementTransform(t,e,"transform","translate("+(l?s-p:p)+", "+(l?o-u:u)+")",c)},end:function(n){d.setElementTransform(t,e,"transform","translate("+(l?i:s)+", "+(l?i:o)+")",c)}})},setElementTransform:function(e,t,i,n,s){var o=e.replace("Series_0","datalabel").replace("Point","Series_0");this.setElementAttribute(e+t,"transform",n),this.setElementAttribute(o+"shape_"+t,"transform",n),this.setElementAttribute(o+"text_"+t,"transform",n+" "+s),this.setElementAttribute(o+"connector_"+t,"transform",n)},linear:function(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t},setElementAttribute:function(e,t,i){var n=document.getElementById(e);n&&n.setAttribute(t,i)},getElementAttribute:function(e,t){var i=document.getElementById(e);return i?i.getAttribute(t):""},createStyleElement:function(e,t){document.body.appendChild(sf.base.createElement("style",{id:e,innerHTML:t}))},renderTooltip:function(e,t,i,n){var s=document.getElementById(t+"_svg"),o=!(s&&parseInt(s.getAttribute("opacity"),10)>0),r=JSON.parse(e),a=window.sfBlazor.getCompInstance(n);o&&!sf.base.isNullOrUndefined(a)?(a.tooltip=new sf.svgbase.Tooltip(r),a.tooltip.enableRTL=r.enableRTL,a.tooltip.animationComplete=function(e){e.tooltip.fadeOuted&&i.invokeMethodAsync("TooltipAnimationComplete")},a.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(a.tooltip)||(a.tooltip.location=new sf.svgbase.TooltipLocation(r.location.x,r.location.y),a.tooltip.content=r.content,a.tooltip.header=r.header,a.tooltip.offset=r.offset,a.tooltip.palette=r.palette,a.tooltip.shapes=r.shapes,a.tooltip.data=r.data,a.tooltip.template=r.template,a.tooltip.textStyle.color=r.textStyle.color||a.tooltip.textStyle.color,a.tooltip.textStyle.fontFamily=r.textStyle.fontFamily||a.tooltip.textStyle.fontFamily,a.tooltip.textStyle.fontStyle=r.textStyle.fontStyle||a.tooltip.textStyle.fontStyle,a.tooltip.textStyle.fontWeight=r.textStyle.fontWeight||a.tooltip.textStyle.fontWeight,a.tooltip.textStyle.opacity=r.textStyle.opacity||a.tooltip.textStyle.opacity,a.tooltip.textStyle.size=r.textStyle.size||a.tooltip.textStyle.size,a.tooltip.isNegative=r.isNegative,a.tooltip.clipBounds=new sf.svgbase.TooltipLocation(r.clipBounds.x,r.clipBounds.y),a.tooltip.arrowPadding=r.arrowPadding,a.tooltip.dataBind())},fadeOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.tooltip)||(this.removeTooltipCommentElement(t),t.tooltip.fadeOut())},removeTooltipCommentElement:function(e){var t=document.getElementById(e.tooltip.element.id);if(t&&!e.isRemoveCommentElement&&t.childNodes.length>1){for(var i=t.childNodes,n=[],s=0;s<i.length;s++)(i[s].nodeName.match("#comment")||i[s].nodeName.match("#text"))&&n.push(i[s]);for(var o=0,r=n;o<r.length;o++){var a=r[o];sf.base.remove(a),e.isRemoveCommentElement=!0}}},animateRedrawElement:function(e,t,i,n,s,o,r,a){var l=this;void 0===r&&(r="x"),void 0===a&&(a="y");var d=document.getElementById(e);if(!d)return null;var h="DIV"===d.tagName,c=function(e,t){h?(d.style[r]=e+"px",d.style[a]=t+"px"):(d.setAttribute(r,e+""),d.setAttribute(a,t+""))};c(i,n),new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:t,progress:function(e){c(l.linear(e.timeStamp,i,s-i,e.duration),l.linear(e.timeStamp,n,o-n,e.duration))},end:function(){c(s,o)}})},doAnimation:function(e,t,i,n,s,o,r,a){var l=this,d=document.getElementById(e);t-=90;var h,c=o||n;a.x+=1,r+=.414*r,new sf.base.Animation({}).animate(d,{duration:c,delay:s,progress:function(e){h=l.linear(e.timeStamp,t,i,e.duration),d.setAttribute("d",l.getPathArc(a,t,h,r,0))},end:function(e){a.x-=1,d.setAttribute("d",l.getPathArc(a,t,t-9e-5,r,0));var i=document.getElementById(d.id.split("_")[0]+"_datalabel_Series_0")||document.getElementById(d.id.split("_")[0]+"_chart_datalabel_Series_0");i&&i.setAttribute("style","visibility: visible")}})},getPathArc:function(e,t,i,n,s){var o=i-t,r=(o=o<0?o+360:o)<180?0:1;return s||0!==s?this.getDoughnutPath(e,this.degreeToLocation(t,n,e),this.degreeToLocation(i,n,e),n,this.degreeToLocation(t,s,e),this.degreeToLocation(i,s,e),s,r):this.getPiePath(e,this.degreeToLocation(t,n,e),this.degreeToLocation(i,n,e),n,r)},getPiePath:function(e,t,i,n,s){return"M "+e.x+" "+e.y+" L "+t.x+" "+t.y+" A "+n+" "+n+" 0 "+s+" 1 "+i.x+" "+i.y+" Z"},getDoughnutPath:function(e,t,i,n,s,o,r,a){return"M "+t.x+" "+t.y+" A "+n+" "+n+" 0 "+a+" 1 "+i.x+" "+i.y+" L "+o.x+" "+o.y+" A "+r+" "+r+" 0 "+a+",0 "+s.x+" "+s.y+" Z"},degreeToLocation:function(t,i,n){var s=t*Math.PI/180;return new e(Math.cos(s)*i+n.x,Math.sin(s)*i+n.y)},ChangePiePath:function(e,t,i){for(var n=0,s=e;n<s.length;n++){var o=s[n];this.ChangePointPath(o.point,o.degree,o.start,o.pathOption,i,t,o.radius,o.innerRadius)}},GetPathOption:function(e,t,i,n,s){return t?this.getPathArc(e,i,(i+t)%360,n,s):""},ChangePointPath:function(e,t,i,n,s,o,r,a){var l,d,h=this,c=document.getElementById(n.id);new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:s,delay:0,progress:function(n){d=h.linear(n.timeStamp,e.degree,t-e.degree,n.duration),l=((l=h.linear(n.timeStamp,e.start,i-e.start,n.duration))/(Math.PI/180)+360)%360,c.setAttribute("d",h.GetPathOption(o,d,l,r,a)),e.isExplode,c.style.visibility="visible"},end:function(s){c.style.visibility=e.visible?"visible":"hidden",c.setAttribute("d",n.direction),e.degree=t,e.start=i}})}};return i}()},"./modules/sf-barcode.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Barcode=function(){"use strict";var e=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):new i((function(t){t(e.value)})).then(r,a)}l((n=n.apply(e,t||[])).next())}))},t=function(e,t){var i,n,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};return{getBarcodeSize:function(e){var t=e.getBoundingClientRect(),i={};return i.Width=t.width,i.Height=t.height,i},createHtmlElement:function(e,t){var i=sf.base.createElement(e);return t&&this.setAttribute(i,t),i},setAttribute:function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)e.setAttribute(i[n],t[i[n]])},createMeasureElements:function(){if(window.barcodeMeasureElement)window.barcodeMeasureElement.usageCount+=1;else{var e=this.createHtmlElement("div",{id:"barcodeMeasureElement",class:"barcodeMeasureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),t=this.createHtmlElement("span",{style:"display:inline-block ; line-height: normal"});e.appendChild(t);var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.appendChild(i);var n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.appendChild(n),window.barcodeMeasureElement=e,window.barcodeMeasureElement.usageCount=1,document.body.appendChild(e)}},measureText:function(e,t,i){window.barcodeMeasureElement.style.visibility="visible";var n=window.barcodeMeasureElement.children[1],s=this.getChildNode(n)[0];s.textContent=e,s.setAttribute("style","font-size:"+t+"px; font-family:"+i+";");var o=s.getBBox(),r={};return r.Width=o.width,r.Height=o.height,window.barcodeMeasureElement.style.visibility="hidden",r},getChildNode:function(e){var t,i=[];if("msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name)for(var n=0;n<e.childNodes.length;n++)1===(t=e.childNodes[n]).nodeType&&i.push(t);else i=e.children;return i},checkOverlapTextPosition:function(e,t,i,n,s,o,r,a){return(a=a||{}).stringSize=t,n+s-(o+this.measureText(e,t,i).Width)<=r&&t>2&&(a.stringSize-=.2,this.checkOverlapTextPosition(e,a.stringSize,i,n,s,o,r,a)),a.stringSize},triggerDownload:function(e,t,i){var n=document.createElement("a");n.download=t+"."+e.toLocaleLowerCase(),n.href=i,n.click()},exportAsImage:function(i,n,s,o){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return[4,this.imageExport(i,n,s,o)];case 1:return(e=t.sent())instanceof Promise?(e.then((function(e){return e})),[2,e]):[2,e]}}))}))},imageExport:function(i,n,s,o){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){return e=this,[2,new Promise((function(t,r){var a="<svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink>"+s.children[0].outerHTML+"</svg>",l=window.URL.createObjectURL(new Blob("SVG"===i?[a]:[(new window.XMLSerializer).serializeToString(s)],{type:"image/svg+xml"}));if("SVG"===i)e.triggerDownload(i,n,l),t(null);else{var d=document.createElement("canvas");d.height=s.clientHeight,d.width=s.clientWidth;var h=d.getContext("2d"),c=new Image;c.onload=function(){if(h.drawImage(c,0,0),window.URL.revokeObjectURL(l),o){var s="JPEG"===i?d.toDataURL("image/jpeg"):"PNG"===i?d.toDataURL("image/png"):"";t(s)}else e.triggerDownload(i,n,d.toDataURL("image/png").replace("image/png","image/octet-stream")),t(null)},c.src=l}}))]}))}))}}}()},"./modules/sf-breadcrumb.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Breadcrumb=function(){"use strict";var e=function(){function e(e,t,i,n,s,o,r){this.dataId=e,this.element=t,this.menu=r,this.popup=o,this.overflowMode=n,this.maxItems=s,this.dotnetRef=i,window.sfBlazor.setCompInstance(this),this.calculateMaxItems(),this.wireEvents()}return e.prototype.calculateMaxItems=function(){if(this.prevWidth=this.element.offsetWidth,"Default"===this.overflowMode||"Collapsed"===this.overflowMode||"Menu"===this.overflowMode){var e=-1,t=this.element.offsetWidth,i=[].slice.call(this.element.children[0].children).reverse(),n="Menu"===this.overflowMode?0:i[i.length-1].offsetWidth+(i[i.length-2]?i[i.length-2].offsetWidth:0);if("Menu"===this.overflowMode){var s=this.getMenuElement();this.element.append(s),n+=s.offsetWidth,s.remove()}for(var o=0;o<i.length-2;o++){if(n>t){e=Math.ceil((o-1)/2)+("Menu"===this.overflowMode&&o<=2?0:1);break}if("Menu"===this.overflowMode&&2===o&&(n+=i[i.length-1].offsetWidth+i[i.length-2].offsetWidth)>t){e=1;break}if(("Menu"!==this.overflowMode||!i[o].classList.contains("e-breadcrumb-menu"))&&(n+=i[o].offsetWidth)>t){e=Math.ceil(o/2)+("Menu"===this.overflowMode&&o<=2?0:1);break}}this.dotnetRef.invokeMethodAsync("ChangeMaxItems",e)}else if(("Wrap"===this.overflowMode||"Scroll"===this.overflowMode)&&this.maxItems>0){t=0;if((i=this.element.querySelectorAll(".e-breadcrumb-item,.e-breadcrumb-separator")).length>this.maxItems+this.maxItems-1){for(o="Wrap"===this.overflowMode?1:0;o<this.maxItems+this.maxItems-1;o++)t+=i[o].offsetWidth;t=t+5+2*parseInt(getComputedStyle(this.element.children[0]).paddingLeft,10),"Wrap"===this.overflowMode?this.element.querySelector(".e-breadcrumb-wrapped-ol").style.width=t+"px":this.element.style.width=t+"px"}}},e.prototype.resize=function(){this.element.offsetWidth>0&&this.prevWidth!=this.element.offsetWidth&&this.dotnetRef.invokeMethodAsync("ResizeHandler")},e.prototype.getMenuElement=function(){return sf.base.createElement("li",{className:"e-icons e-breadcrumb-menu"})},e.prototype.openPopup=function(e,t){var i,n;document.body.appendChild(t);var s=e.getBoundingClientRect(),o=t.getBoundingClientRect();i=s.left+pageXOffset,n=s.bottom+pageYOffset,s.bottom+o.height>document.documentElement.clientHeight&&n-s.height-o.height>document.documentElement.clientTop&&(n=n-s.height-o.height),s.left+o.width>document.documentElement.clientWidth&&s.right-o.width>document.documentElement.clientLeft&&(i=i+s.width-o.width),this.addEventListener(),t.style.left=Math.ceil(i)+"px",t.style.top=Math.ceil(n)+"px",t.style.zIndex=sf.popups.getZindexPartial(this.element)+"",t.style.visibility="",t.firstElementChild.focus()},e.prototype.addEventListener=function(){sf.base.EventHandler.add(document,"mousedown",this.mousedownHandler,this),this.popup&&sf.base.EventHandler.add(this.popup,"keydown",this.popupKeyDownHandler,this)},e.prototype.popupKeyDownHandler=function(e){"Escape"===e.key&&this.dotnetRef.invokeMethodAsync("ClosePopup",null)},e.prototype.mousedownHandler=function(e){if(this.popup&&this.popup.parentElement){var t=e.target;sf.base.closest(t,"#"+this.menu.id)||sf.base.closest(e.target,"#"+this.popup.id)||(this.dotnetRef.invokeMethodAsync("ClosePopup",null),this.removeEventListener())}else this.removeEventListener()},e.prototype.removeEventListener=function(){sf.base.EventHandler.remove(document,"mousedown",this.mousedownHandler),this.popup&&sf.base.EventHandler.remove(this.popup,"keydown",this.popupKeyDownHandler)},e.prototype.wireEvents=function(){window.addEventListener("resize",this.resize.bind(this))},e.prototype.unWireEvents=function(){window.removeEventListener("resize",this.resize.bind(this))},e.prototype.destroy=function(){this.unWireEvents()},e}();return{initialize:function(t,i,n,s,o){i&&new e(t,i,n,s,o)},calculateMaxItems:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.overflowMode=t,i.calculateMaxItems())},openPopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(n.popup=i,n.menu=t,n.openPopup(t,i))},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-bullet-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.BulletChart=function(){"use strict";var e=function(){function e(e,t,i){window.sfBlazor=window.sfBlazor,this.resizeTo=0,this.element=t,this.dotNetRef=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.click.bind(this),this),sf.base.EventHandler.add(this.element,"mousemove",this.mousemove.bind(this),this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this)),new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{enter:"enter"},eventName:"keydown"}),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDown.bind(this),this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"mousemove",this.mousemove),sf.base.EventHandler.remove(this.element,"click",this.click),window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this)),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDown);var e=sf.base.getInstance(this.element,this.keyActionHandler);e&&e.destroy(),this.element=null,this.dotNetRef=null},e.prototype.mouseDown=function(e){e.preventDefault()},e.prototype.keyActionHandler=function(e){"enter"===e.action&&this.clickProcess(e)},e.prototype.resize=function(){var e=this;this.dotNetRef&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout((function(){e.dotNetRef.invokeMethodAsync("TriggerResize")}),500))},e.prototype.click=function(e){this.clickProcess(e)},e.prototype.clickProcess=function(e){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerClick",e.target.id)},e.prototype.mousemove=function(e){var t,i;this.element&&(t=this.element.getBoundingClientRect());var n=document.getElementById(this.element.id+"_svg");n&&(i=n.getBoundingClientRect());var s=e.clientX-t.left-Math.max(i.left-t.left,0),o=e.clientY-t.top-Math.max(i.top-t.top,0);this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseMove",e.target.id,s,o)},e.prototype.barAnimation=function(e,t,i,n,s){new sf.base.Animation({}).animate(t,{duration:e.duration<=0?1e3:e.duration,delay:e.delay,progress:function(o){if(o.timeStamp>=o.delay){t.style.visibility="visible";var r=-1*Math.cos((o.timeStamp-o.delay)/o.duration*(Math.PI/2))+1;"targetBarAnimation"===i?t.setAttribute("transform","translate("+n.toString()+" "+s.toString()+") scale(1, "+(r/1).toString()+") translate("+-n.toString()+" "+-s.toString()+")"):t.setAttribute("transform","translate("+n.toString()+" "+e.valueY.toString()+") scale("+(r/1).toString()+", 1) translate("+-n.toString()+" "+-e.valueY.toString()+")")}},end:function(){t.setAttribute("transform","translate(0,0)"),t.style.visibility="visible"}})},e}();return{initialize:function(t,i,n,s,o){if(i)return new e(t,i,o).wireEvents(),this.getElementSize(i,n,s)},getElementSize:function(e,t,i){var n,s;return e&&(e.style.height=t,e.style.width=i,n=e.clientWidth||e.offsetWidth,s=e.clientHeight),{width:n,height:s}},updateElementOpacity:function(e,t,i){var n=document.getElementById(e);if(n){if(!sf.base.isNullOrUndefined(i)&&""!==i)document.getElementById(i).setAttribute("opacity","1");!0===t?n.setAttribute("opacity","1"):n.setAttribute("opacity","0.6")}},doBarAnimation:function(e,t,i,n,s,o){for(var r=0;r<i.length;r++){var a=document.getElementById(i[r]),l=window.sfBlazor.getCompInstance(e);a&&("valueBarAnimation"===n?l.barAnimation(t,a,n,s[r]):l.barAnimation(t,a,n,s[r],o[r]))}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);e&&t&&t.unWireEvents()}}}()},"./modules/sf-calendar.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.CalendarBase=function(){"use strict";return{initialize:function(e,t,i,n,s){var o={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"};o=sf.base.extend(o,i),new sf.base.KeyboardEvents(e,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this,n,s,t),keyConfigs:o})},keyActionHandle:function(e,t,i,n){n.preventDefault();var s=sf.base.closest(n.target,".e-calendar").querySelector("tbody");if(s){!1;var o,r=s.querySelector("tr td.e-focused-date");o=s.querySelector("tr td.e-selected"),s.focus();var a=n.target,l={Action:n.action,Key:n.key,Events:n,SelectDate:o?o.id:null,FocusedDate:r?r.id:null,classList:o?o.classList.toString():r?r.classList.toString():"e-cell",Id:r?r.id:o?o.id:null,TargetClassList:a.classList.toString()};i.invokeMethodAsync("OnCalendarKeyboardEvent",l),a.classList.contains("e-today")&&(a.blur(),s.focus())}}}}()},"./modules/sf-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Chart=function(){"use strict";var e=function(){function e(e,t,i,n,s,o,r,a){void 0===s&&(s=!1),void 0===o&&(o=!1),window.sfBlazor=window.sfBlazor,this.mouseY=0,this.mouseX=0,this.eventInterval=80,this.mouseMoveRef=null,this.mouseMoveThreshold=null,this.chartOnMouseClickRef=null,this.chartRightClickRef=null,this.mouseLeaveRef=null,this.chartKeyDownRef=null,this.chartKeyUpRef=null,this.chartMouseWheelRef=null,this.chartOnMouseDownRef=null,this.mouseEndRef=null,this.chartMouseWheelThreshold=null,this.domMouseMoveRef=null,this.domMouseMoveThreshold=null,this.scrollbarMouseMoveThreshold=null,this.scrollbarMouseWheelThreshold=null,this.domMouseUpRef=null,this.longPressBound=null,this.touchObject=null,this.toggleVisibility=!0,this.enableHighlight=!0,this.highlightMode="None",this.selectionMode="None",this.rectSeries=!0,this.isSeriesMode=!1,this.seriesTypes=[],this.selectedDataIndexes=[],this.highlightDataIndexes=[],this.previousSelectedEle=[],this.highlightColor="",this.highlightPattern="None",this.selectionPattern="None",this.legendModule=[],this.allowMultiSelection=!1,this.drawType=[],this.previousHighlightedIndex=-1,this.pinchStyle="opacity: 0; position: absolute; display: block; width: 100px; height: 100px; background: transparent; border: 2px solid blue;",this.pinchtarget=null,this.documentKeyHandler=function(e){e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&this.element.focus()},this.id=t,this.element=i,this.dotnetref=n,this.isZooming=s,this.isScrollbar=o,this.options=r,this.currentLegendIndex=0,this.currentPointIndex=0,this.currentSeriesIndex=0,this.previousTargetId="",this.isZoomed=!1,this.selectionHighlightOptions(a),this.selectedDataIndexes=a.selectedDataIndexes||[],this.unSelected=t+"_ej2_deselected",this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.render=function(){this.unWireEvents(this.id,this.dotnetref),this.wireEvents(this.id,this.dotnetref)},e.prototype.destroy=function(){this.unWireEvents(this.id,this.dotnetref),this.dotnetref.invokeMethodAsync("DisposeDotNetReference")},e.prototype.selectionHighlightOptions=function(e){this.enableHighlight=e.enableHighlight,this.toggleVisibility=e.toggleVisibility,this.highlightMode=e.highlightMode,this.selectionMode=e.selectionMode,this.seriesTypes=e.seriesTypes,this.highlightColor=e.highlightColor,this.highlightPattern=e.highlightPattern,this.selectionPattern=e.selectionPattern,this.allowMultiSelection=e.allowMultiSelection,this.drawType=e.drawType,this.oldMode=this.currentMode},e.prototype.unWireEvents=function(e,t){var n=document.getElementById(e);if(n){this.dotnetref=t,i.dotnetrefCollection=i.dotnetrefCollection.filter((function(t){return t.id!==e}));
/*! Find the Events type */
var s=sf.base.Browser.isPointer?"pointerleave":"mouseleave";
/*! Bind the Event handler */if(n.removeEventListener("mousemove",this.mouseMoveRef),n.removeEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.remove(n,sf.base.Browser.touchStartEvent,this.chartOnMouseDownRef),sf.base.EventHandler.remove(n,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.remove(n,"click",this.chartOnMouseClickRef),sf.base.EventHandler.remove(n,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.remove(n,s,this.mouseLeaveRef),sf.base.EventHandler.remove(n,"keydown",this.chartKeyDownRef),sf.base.EventHandler.remove(document.body,"keydown",this.documentKeyHandler),sf.base.EventHandler.remove(n,"keyup",this.chartKeyUpRef),this.isZooming){var o="mozilla"===sf.base.Browser.info.name?sf.base.Browser.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel";n.removeEventListener(o,this.chartMouseWheelRef)}if(this.isScrollbar&&(window.removeEventListener("mousemove",this.domMouseMoveRef),window.removeEventListener("mouseup",this.domMouseUpRef,!1)),0==document.getElementsByClassName("e-chart").length){var r=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,r,i.resizeBound)}this.touchObject&&(this.touchObject.destroy(),this.touchObject=null)
/*! Apply the style for chart */}},e.prototype.wireEvents=function(e,t){var n=document.getElementById(e);if(n){this.dotnetref=t,i.dotnetrefCollection.push({id:e,dotnetref:t});
/*! Find the Events type */
var s=sf.base.Browser.isPointer?"pointerleave":"mouseleave";if(this.chartOnMouseDownRef=this.chartOnMouseDown.bind(this,t,e),this.mouseEndRef=this.mouseEnd.bind(this,t,e),this.mouseMoveRef=this.mouseMove.bind(this,t,e),this.chartOnMouseClickRef=this.chartOnMouseClick.bind(this,t,e),this.chartRightClickRef=this.chartRightClick.bind(this,t,e),this.chartKeyDownRef=this.chartOnKeyDown.bind(this,this.dotnetref,this.id),this.chartKeyUpRef=this.chartOnKeyUp.bind(this,this.dotnetref,this.id),this.mouseLeaveRef=this.mouseLeave.bind(this,t,e),
/*! Bind the Event handler */
n.addEventListener("mousemove",this.mouseMoveRef),n.addEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.add(n,sf.base.Browser.touchStartEvent,this.chartOnMouseDownRef),sf.base.EventHandler.add(n,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.add(n,"click",this.chartOnMouseClickRef),sf.base.EventHandler.add(n,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.add(n,s,this.mouseLeaveRef),sf.base.EventHandler.add(n,"keydown",this.chartKeyDownRef),sf.base.EventHandler.add(document.body,"keydown",this.documentKeyHandler,this),sf.base.EventHandler.add(n,"keyup",this.chartKeyUpRef),this.isZooming){this.chartMouseWheelRef=this.chartMouseWheel.bind(this,t,e);var o="mozilla"===sf.base.Browser.info.name?sf.base.Browser.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel";n.addEventListener(o,this.chartMouseWheelRef)}this.isScrollbar&&(this.domMouseMoveRef=this.domMouseMove.bind(this,t,e),this.domMouseUpRef=this.domMouseUp.bind(this,t,e),window.addEventListener("mousemove",this.domMouseMoveRef),window.addEventListener("mouseup",this.domMouseUpRef,!1)),i.resizeBound=i.chartResize.bind(this,i.dotnetrefCollection);var r=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,r,i.resizeBound),this.longPressBound=this.longPress.bind(this,t,e),this.touchObject=new sf.base.Touch(n,{tapHold:this.longPressBound,tapHoldThreshold:500})}},e.prototype.getEventArgs=function(e,t){var i=e.changedTouches?e.changedTouches[0].clientX:e.clientX,n=e.changedTouches?e.changedTouches[0].clientY:e.clientY;this.setMouseXY(i,n,t);var s=e.touches,o=[];if(e.type.indexOf("touch")>-1)for(var r=0,a=s.length;r<a;r++)o.push({pageX:s[r].clientX,pageY:s[r].clientY,pointerId:e.pointerId||0});return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0},touches:o,pointerId:e.pointerId}},e.prototype.getWheelArgs=function(e,t){return this.setMouseXY(e.clientX,e.clientY,t),{detail:e.detail,wheelDelta:e.wheelDelta,target:e.currentTarget?e.currentTarget.id:e.srcElement?e.srcElement.id:e.target?e.target.id:"",clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer}},e.prototype.setMouseXY=function(e,t,i){var n=document.getElementById(i.replace("_stockChart_chart","")+"_svg").getBoundingClientRect(),s=document.getElementById(i).getBoundingClientRect();this.mouseY=t-s.top-Math.max(n.top-s.top,0),this.mouseX=e-s.left-Math.max(n.left-s.left,0)},e.prototype.chartOnMouseDown=function(e,t,i){this.dotnetref=e;var n=i.target,s=window.sfBlazor.getCompInstance(this.dataId);if(n.id.indexOf("legend")>0&&(s.previousHighlightedIndex=-1),i.type.indexOf("touch")>-1){var o=i.changedTouches?i.changedTouches[0].clientX:i.clientX,r=i.changedTouches?i.changedTouches[0].clientY:i.clientY;this.pinchtarget=document.getElementById("pinchtarget"),this.pinchtarget.setAttribute("style",this.pinchStyle+" top: "+(r-50)+"px; left: "+(o-50)+"px;")}return e.invokeMethodAsync("OnZoomingMouseDown",this.getEventArgs(i,t)),!1},e.prototype.chartMouseWheel=function(e,t,i){return this.dotnetref=e,e.invokeMethodAsync("OnChartMouseWheel",this.getWheelArgs(i,t)),i.preventDefault(),!1},e.prototype.mouseMove=function(e,t,n,s){void 0===s&&(s=!1);var o=n.target;if(!sf.base.isNullOrUndefined(document.getElementById(o.id))&&("None"!==this.highlightMode||this.enableHighlight)){if((!sf.base.isNullOrUndefined(o)||o.id.indexOf("Point")>-1||o.id.indexOf("Symbol")>-1)&&(o=o.id.indexOf("text")>-1?i.findDOMElement(o.id.replace("text","shape")):i.findDOMElement(o.id),!sf.base.isNullOrUndefined(o)&&o.hasAttribute("class")&&(o.getAttribute("class").indexOf("highlight")>-1||o.getAttribute("class").indexOf("selection")>-1)))return;"None"!==this.highlightMode&&i.calculateSelectedElements(n,this.dataId);for(var r=void 0,a=[this.id+"_chart_legend_text_",this.id+"_chart_legend_shape_marker_",this.id+"_chart_legend_shape_",this.id+"_chart_legend_g_"],l=0;l<a.length;l++)if(!sf.base.isNullOrUndefined(o)&&!o.id.indexOf(a[l])){r=parseInt(o.id.split(a[l])[1]);break}var d=window.sfBlazor.getCompInstance(this.dataId);!sf.base.isNullOrUndefined(o)&&o.id.indexOf("legend")>0&&(i.isTargetChanged(r,d)||"None"!==this.highlightMode)&&(this.legendVisible=!0,i.legendSelection(n,d.dataId)),sf.base.isNullOrUndefined(o)||o.id.indexOf("legend")>0||i.resetPreviousHighlightIndex(d),sf.base.isNullOrUndefined(o)||"None"!=this.highlightMode||o.id.indexOf("legend")>0||!(d.highlightDataIndexes.length>0)||i.removeSelectionStyles(this.dataId)}if(!s&&(null==this.mouseMoveThreshold||(new Date).getTime()-this.mouseMoveThreshold>this.eventInterval)){this.mouseMoveThreshold=(new Date).getTime();var h=void 0,c=void 0,p=void 0;"touchmove"===n.type?(this.isTouch=!0,h=(p=n).changedTouches[0].clientX,c=p.changedTouches[0].clientY,this.pinchtarget&&(this.pinchtarget.setAttribute("style",this.pinchStyle+" top: "+(c-50)+"px; left: "+(h-50)+"px;"),n.preventDefault()),n.preventDefault()):(this.isTouch="touch"===n.pointerType||"2"===n.pointerType||this.isTouch,h=n.clientX,c=n.clientY),this.dotnetref=e,document.getElementById(t.replace("_stockChart_chart","")+"_svg")&&(this.setMouseXY(h,c,t),e.invokeMethodAsync("OnZoomingMouseMove",this.getEventArgs(n,t)))}},e.prototype.mouseEnd=function(e,t,i){return this.dotnetref=e,this.pinchtarget&&this.pinchtarget.setAttribute("style",this.pinchStyle+" top: -100px; left: -100px;"),e.invokeMethodAsync("OnZoomingMouseEnd",this.getEventArgs(i,t)),!1},e.prototype.chartOnMouseClick=function(e,t,n){i.calculateSelectedElements(n,this.dataId);var s=n.target,o=window.sfBlazor.getCompInstance(this.dataId);s.id.indexOf("legend")>0&&!o.toggleVisibility&&(this.legendVisible=!0,i.legendSelection(n,o.dataId))},e.prototype.chartRightClick=function(e,t,i){return this.dotnetref=e,i.preventDefault(),i.stopPropagation(),e.invokeMethodAsync("OnChartMouseRightClick",this.getEventArgs(i,t)),!1},e.prototype.chartOnKeyDown=function(e,t,n){this.dotnetref=e;var s="";return(this.isZoomed&&"Tab"==n.code||"Space"==n.code)&&n.preventDefault(),this.options.showTooltip&&("Tab"==n.code&&this.previousTargetId.indexOf("Series")>-1||"Escape"===n.code)&&(s="ESC"),!n.ctrlKey||"+"!==n.key&&"Equal"!==n.code&&"-"!==n.key&&"Minus"!==n.code?82===n.keyCode&&this.isZoomed?(n.preventDefault(),this.isZoomed=!1,s="R"):n.code.indexOf("Arrow")>-1&&(n.preventDefault(),s=this.isZoomed?n.code:""):(n.preventDefault(),this.isZoomed=this.options.enableZoom,i.fadeOut(this.element),s=this.isZoomed?n.code:""),n.ctrlKey&&"p"===n.key&&(n.preventDefault(),s="CtrlP"),""!=s&&e.invokeMethodAsync("OnChartKeyboardNavigations",s,n.target.id),!1},e.prototype.processPointSelection=function(e,t,i,n){var s=document.getElementById(t);sf.base.isNullOrUndefined(s)||("Enter"===n?this.chartOnMouseClick(e,t,{target:document.getElementById(i),type:"click"}):"Tab"!==n&&"ArrowMove"!==n||this.mouseMove(e,t,{target:document.getElementById(i),type:"mousemove"},!0))},e.prototype.chartOnKeyUp=function(e,t,n){this.dotnetref=e;var s,o,r="",a=n.target.id,l=n.target,d=i.getElement(this.element.id+"_ChartTitle"),h=i.getElement(this.element.id+"SeriesCollection"),c=i.getElement(this.element.id+"_chart_legend_translate_g"),p=i.getElement(this.element.id+"_chart_legend_pageup");if(!this.isZoomed&&82!==n.keyCode){var u,f;if(d&&d.setAttribute("class","e-chart-focused"),h&&h.firstElementChild)(f=(u=h.firstElementChild.children[1]).getAttribute("class"))&&-1===f.indexOf("e-chart-focused")?f+=" e-chart-focused":f||(f="e-chart-focused"),u.setAttribute("class",f+" e-chart-focused");if(c)(f=(u=c.firstElementChild).getAttribute("class"))&&-1===f.indexOf("e-chart-focused")?f+=" e-chart-focused":f||(f="e-chart-focused"),u.setAttribute("class",f);if(p&&p.setAttribute("class","e-chart-focused"),"Tab"==n.code){if(""!=this.previousTargetId)if(this.previousTargetId.indexOf("_Series_")>-1&&-1==a.indexOf("_Series_")){if(s=i.getElement(this.element.id+"SeriesCollection"),!sf.base.isNullOrUndefined(s.children[this.currentSeriesIndex])){var m=this.previousTargetId.indexOf("_Symbol")>-1?i.getElement(this.element.id+"SymbolGroup"+this.currentSeriesIndex).children[this.currentPointIndex+1]:this.previousTargetId.indexOf("_Point_")>-1?s.children[this.currentSeriesIndex].children[this.currentPointIndex+1]:s.children[this.currentSeriesIndex];i.setTabIndex(m,s.firstElementChild),this.currentPointIndex=0,this.currentSeriesIndex=0}}else this.previousTargetId.indexOf("_chart_legend_page")>-1&&-1==a.indexOf("_chart_legend_page")&&-1==a.indexOf("_chart_legend_g_")?i.setTabIndex(n.target,i.getElement(this.element.id+"_chart_legend_pageup")):this.previousTargetId.indexOf("_chart_legend_g_")>-1&&-1==a.indexOf("_chart_legend_g_")&&(s=i.getElement(this.element.id+"_chart_legend_translate_g"),i.setTabIndex(s.children[this.currentLegendIndex],s.firstElementChild));this.previousTargetId=a,a.indexOf("SeriesGroup")>-1&&(this.currentSeriesIndex=+a.split("SeriesGroup")[1],l.removeAttribute("tabindex"),l.blur(),-1==l.children[1].id.indexOf("_Point_")&&(o=i.getElement(this.element.id+"SymbolGroup"+a.split("SeriesGroup")[1])),a=i.focusChild(null!=o?o.children[1]:l.children[1])),r=this.options.enableHighlight||this.options.showTooltip?"Tab":""}else if(n.code.indexOf("Arrow")>-1){if(n.preventDefault(),this.previousTargetId=a,a.indexOf("_chart_legend_page")>-1)"ArrowLeft"==n.code?(i.getElement(this.element.id+"_chart_legend_pagedown").removeAttribute("tabindex"),i.focusChild(i.getElement(this.element.id+"_chart_legend_pageup"))):"ArrowRight"==n.code&&(i.getElement(this.element.id+"_chart_legend_pageup").removeAttribute("tabindex"),i.focusChild(i.getElement(this.element.id+"_chart_legend_pagedown")));else if(a.indexOf("_chart_legend_")>-1){var g=l.parentElement.children;g[this.currentLegendIndex].removeAttribute("tabindex"),this.currentLegendIndex+="ArrowUp"==n.code||"ArrowRight"==n.code?1:-1,this.currentLegendIndex=i.getActualIndex(this.currentLegendIndex,g.length);var v=g[this.currentLegendIndex];i.focusChild(v),a=v.children[1].id,r=this.options.enableHighlight?"ArrowMove":""}else if(a.indexOf("_Series_")>-1){s=l.parentElement.parentElement;var b=n.target;if(l.removeAttribute("tabindex"),l.blur(),"ArrowRight"==n.code||"ArrowLeft"==n.code){for(var y=[],w=0;w<s.children.length;w++)s.children[w].id.indexOf("SeriesGroup")>-1&&y.push(+s.children[w].id.split("SeriesGroup")[1]);this.currentSeriesIndex=y.indexOf(this.currentSeriesIndex)+("ArrowRight"==n.code?1:-1),this.currentPointIndex=0,this.currentSeriesIndex=y[i.getActualIndex(this.currentSeriesIndex,y.length)],s=i.getElement(this.element.id+"SeriesGroup"+this.currentSeriesIndex),o=i.getElement(this.element.id+"SymbolGroup"+this.currentSeriesIndex),b=-1==s.children[1].id.indexOf("_Point_")&&o?o.children[1]:s.children[1]}else this.currentPointIndex+="ArrowUp"==n.code?1:-1,a.indexOf("_Symbol")>-1?(this.currentPointIndex=i.getActualIndex(this.currentPointIndex,i.getElement(this.element.id+"SymbolGroup"+this.currentSeriesIndex).childElementCount-1),b=i.getElement(this.element.id+"_Series_"+this.currentSeriesIndex+"_Point_"+this.currentPointIndex+"_Symbol")):a.indexOf("_Point_")>-1&&(this.currentPointIndex=i.getActualIndex(this.currentPointIndex,i.getElement(this.element.id+"SeriesGroup"+this.currentSeriesIndex).childElementCount-1),b=i.getElement(this.element.id+"_Series_"+this.currentSeriesIndex+"_Point_"+this.currentPointIndex));a=i.focusChild(b),r=this.options.showTooltip?"ArrowMove":""}}else"Enter"!=n.code&&"Space"!=n.code||!(a.indexOf("_chart_legend_")>-1||a.indexOf("_Point_")>-1)||(a=a.indexOf("_chart_legend_page")>-1?a:a.indexOf("_chart_legend_")>-1?l.children[1].id:a,r="Enter")}return""!=r&&(this.processPointSelection(e,t,a,r),e.invokeMethodAsync("OnChartKeyboardNavigations",r,a)),!1},e.prototype.mouseLeave=function(e,t,i){return this.dotnetref=e,e.invokeMethodAsync("OnChartMouseLeave",this.getEventArgs(i,t)),!1},e.prototype.longPress=function(e,t,i){this.dotnetref=e;var n=i&&i.originalEvent.changedTouches?i.originalEvent.changedTouches[0].clientX:0,s=i&&i.originalEvent.changedTouches?i.originalEvent.changedTouches[0].clientY:0;this.setMouseXY(n,s,t);var o={type:"TapHold",clientX:n,clientY:s,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:"",target:"",changedTouches:{clientX:n,clientY:s},touches:[],pointerId:0};return e.invokeMethodAsync("OnChartLongPress",o),!1},e.prototype.domMouseMove=function(e,t,n){if((null==this.domMouseMoveThreshold||(new Date).getTime()-this.domMouseMoveThreshold>this.eventInterval)&&(this.domMouseMoveThreshold=(new Date).getTime(),!sf.base.isNullOrUndefined(i.svgId)&&i.svgId.indexOf(t)>-1)){var s=i.getScrollEventArgs(n,!0);e.invokeMethodAsync("ScrollMouseMove",s)}return!1},e.prototype.domMouseUp=function(e,t,n){if(!sf.base.isNullOrUndefined(i.svgId)&&i.svgId.indexOf(t)>-1){var s=i.getScrollEventArgs(n,!0);e.invokeMethodAsync("ScrollMouseUp",s),i.svgId=null}return!1},e}(),t=function(e,t){this.series=e,this.point=t},i={initialize:function(t,i,n,s,o,r,a){new e(t,i.id,i,n,s,o,r,a).render()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},setHighlightSelectionOptions:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.selectionHighlightOptions(t)},invokeBlurEffect:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||this.blurEffect(t.element.id,t)},invokeRemoveSelectedElements:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.selectedDataIndexes=[],t.styleId=t.element.id+"_ej2_chart_selection",this.removeSelectedElements(e))},redrawSelection:function(e){var t=window.sfBlazor.getCompInstance(e);t.isSeriesMode="Series"==t.oldMode;var i=t.selectedDataIndexes,n=t.highlightDataIndexes;t.styleId.indexOf("highlight")>-1&&t.highlightDataIndexes.length>0?(t.highlightDataIndexes=[],this.removeSelectedElements(e),i=n):(t.selectedDataIndexes=[],this.removeSelectedElements(e)),this.blurEffect(t.element.id,t),this.selectDataIndex(t.dataId,i)},removeSelectionStyles:function(e){var t=window.sfBlazor.getCompInstance(e);t.highlightDataIndexes=[];for(var i=0;i<t.seriesTypes.length;i++)this.removeLegendSelectionClass(document.getElementsByClassName(t.unSelected),t),this.removeLegendSelectionClass(document.getElementsByClassName(this.generateStyle(t.element.id+"SeriesGroup"+i,t)),t),this.removeLegendSelectionClass(this.getSeriesElements(i,t),t);for(i=0;i<t.seriesTypes.length;i++)this.removeSvgClass(this.findDOMElement(t.element.id+"_chart_legend_shape_"+i),this.findDOMElement(t.element.id+"_chart_legend_shape_"+i).getAttribute("class"))},removeLegendSelectionClass:function(e,t){for(var i=0,n=e;i<n.length;i++){var s=n[i];sf.base.isNullOrUndefined(s)||(this.removeSvgClass(s,s.getAttribute("class")),sf.base.isNullOrUndefined(t.highlightColor)||"None"!=t.highlightPattern||s.setAttribute("fill",t.highlightColor))}},removeSelectedElements:function(e){for(var t=window.sfBlazor.getCompInstance(e),i=0;i<t.seriesTypes.length;i++)this.removeStyles(this.getSeriesElements(i,t),t)},selectionChart:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.currentMode=i.selectionMode,i.styleId=i.element.id+"_ej2_chart_selection",this.selection(i,t,this.findElements(i,"",t)))},selectDataIndex:function(e,t){var i=this,n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(this.isAlreadySelected({type:"click"},n),t.forEach((function(e){var t="#"+n.element.id+"_Series_"+e.series+"_Point_"+e.point;i.performSelection(e,n,n.element.querySelector(t))})))},focusTarget:function(e){var t,i;e.indexOf("_chart_legend_")>-1?(i=(t=this.getElement(e).parentElement).getAttribute("class"),this.setTabIndex(this.getElement(this.id+"_chart_legend_translate_g").firstElementChild,this.getElement(this.id+"SeriesCollection").firstElementChild),t.setAttribute("tabindex","0"),i&&-1===i.indexOf("e-chart-focused")?i+=" e-chart-focused":i||(i="e-chart-focused")):(t=this.getElement(e),i="e-chart-focused"),t.setAttribute("tabindex","0"),t.setAttribute("class",i),t.focus()},focusChild:function(e){e.setAttribute("tabindex","0");var t=e.getAttribute("class");return e.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-chart-focused")?t+=" e-chart-focused":t||(t="e-chart-focused"),e.setAttribute("class",t),e.focus(),e.id},getActualIndex:function(e,t){return e>t-1?0:e<0?t-1:e},setTabIndex:function(e,t){e&&e.removeAttribute("tabindex"),t&&t.setAttribute("tabindex","0")},eventInterval:80,dotnetref:{},getScrollEventArgs:function(e,t){void 0===t&&(t=!1);var i=e.changedTouches?e.changedTouches[0].clientX:e.clientX,n=e.changedTouches?e.changedTouches[0].clientY:e.clientY,s=this.setScrollMouseXY(i,n,e.target.id,t),o=e.touches,r=[];if(e.type.indexOf("touch")>-1)for(var a=0,l=o.length;a<l;a++)r.push({pageX:o[a].clientX,pageY:o[a].clientY,pointerId:e.pointerId||0});var d=e.target.id;return d=d.indexOf("scrollBar")>-1?d:this.svgId,{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:s.mouseX,mouseY:s.mouseY,pointerType:e.pointerType,target:d,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0},touches:r,pointerId:e.pointerId}},getScrollWheelArgs:function(e){var t=this.setScrollMouseXY(e.clientX,e.clientY,e.currentTarget.id);return{detail:e.detail,wheelDelta:e.wheelDelta,target:e.currentTarget?e.currentTarget.id:e.srcElement?e.srcElement.id:e.target?e.target.id:"",clientX:e.clientX,clientY:e.clientY,mouseX:t.mouseX,mouseY:t.mouseY,browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer}},svgId:null,setScrollMouseXY:function(e,t,i,n){if(void 0===n&&(n=!1),this.svgId=n?this.svgId:i,!n&&-1===i.indexOf("_scrollBar_svg")){var s=i.split("_scrollBar")[0],o=i.split("_");this.svgId=s+"_scrollBar_svg"+o[o.length-1],this.dotnetref=this.dotnetrefCollection.find((function(e){return s===e.id})).dotnetref}var r=this.getElement(this.svgId).getBoundingClientRect();return{mouseX:e-Math.max(r.left,0),mouseY:t-Math.max(r.top,0)}},scrollMouseDown:function(e){var t=this.getScrollEventArgs(e);return this.dotnetref.invokeMethodAsync("ScrollMouseDown",t),!1},scrollMouseMove:function(e){if(null==this.scrollMouseMoveThreshold||(new Date).getTime()-this.scrollMouseMoveThreshold>this.eventInterval){this.scrollMouseMoveThreshold=(new Date).getTime();var t=this.getScrollEventArgs(e);this.dotnetref.invokeMethodAsync("ScrollMouseMove",t)}return!1},scrollMouseUp:function(e){var t=this.getScrollEventArgs(e);return this.dotnetref.invokeMethodAsync("ScrollMouseUp",t),this.svgId=null,!1},scrollMouseWheel:function(e){if(null==this.scrollbarMouseWheelThreshold||(new Date).getTime()-this.scrollbarMouseWheelThreshold>this.eventInterval){this.scrollbarMouseWheelThreshold=(new Date).getTime();var t=this.getScrollWheelArgs(e);this.dotnetref.invokeMethodAsync("ScrollMouseWheel",t)}return!1},dotnetrefCollection:[],renderTooltip:function(e,t,i,n){var s=document.getElementById(t+"_svg"),o=!(s&&parseInt(s.getAttribute("opacity"),10)>0),r=JSON.parse(e),a=window.sfBlazor.getCompInstance(n);o&&!sf.base.isNullOrUndefined(a)?(a.tooltip=new sf.svgbase.Tooltip(r),a.tooltip.enableRTL=r.enableRTL,a.tooltip.appendTo("#"+t),a.tooltip.animationComplete=function(e){e.tooltip.fadeOuted&&i.invokeMethodAsync("TooltipAnimationComplete")}):sf.base.isNullOrUndefined(a.tooltip)||(a.tooltip.location=new sf.svgbase.TooltipLocation(r.location.x,r.location.y),a.tooltip.content=r.content,a.tooltip.header=r.header,a.tooltip.offset=r.offset,a.tooltip.palette=r.palette,a.tooltip.shapes=r.shapes,a.tooltip.data=r.data,a.tooltip.template=r.template,a.tooltip.textStyle.color=r.textStyle.color||a.tooltip.textStyle.color,a.tooltip.textStyle.fontFamily=r.textStyle.fontFamily||a.tooltip.textStyle.fontFamily,a.tooltip.textStyle.fontStyle=r.textStyle.fontStyle||a.tooltip.textStyle.fontStyle,a.tooltip.textStyle.fontWeight=r.textStyle.fontWeight||a.tooltip.textStyle.fontWeight,a.tooltip.textStyle.opacity=r.textStyle.opacity||a.tooltip.textStyle.opacity,a.tooltip.textStyle.size=r.textStyle.size||a.tooltip.textStyle.size,a.tooltip.isNegative=r.isNegative,a.tooltip.clipBounds=new sf.svgbase.TooltipLocation(r.clipBounds.x,r.clipBounds.y),a.tooltip.arrowPadding=r.arrowPadding,a.tooltip.dataBind())},fadeOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.tooltip)||(this.removeTooltipCommentElement(t),t.tooltip.fadeOut())},removeTooltipCommentElement:function(e){var t=this.getElement(e.tooltip.element.id);if(t&&!e.isRemoveCommentElement&&t.childNodes.length>1){for(var i=t.childNodes,n=[],s=0;s<i.length;s++)(i[s].nodeName.match("#comment")||i[s].nodeName.match("#text"))&&n.push(i[s]);for(var o=0,r=n;o<r.length;o++){var a=r[o];sf.base.remove(a),e.isRemoveCommentElement=!0}}},getParentElementBoundsById:function(e){var t=document.getElementById(e);if(t){t.style.width="100%",t.style.height="100%";var i=t.getBoundingClientRect();return{width:i.width||t.clientWidth||t.offsetWidth,height:i.height||t.clientHeight||t.offsetHeight,left:i.left,top:i.top,right:i.right,bottom:i.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(e,t){void 0===t&&(t=!0),t&&(this.id=e);var i=document.getElementById(e);if(i){var n=i.getBoundingClientRect();return{width:i.clientWidth||i.offsetWidth,height:i.clientHeight||i.offsetHeight,left:n.left,top:n.top,right:n.right,bottom:n.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getRefreshElementBoundsById:function(e){var t=document.getElementById(e);if(t){for(var i=document.getElementsByClassName("e-chart"),n=i.length,s=0;s<n;s++){i[s].querySelector("[id*=_svg]").style.display="none"}t.style.width="100%",t.style.height="100%";var o=t.getBoundingClientRect();for(s=0;s<n;s++){i[s].querySelector("[id*=_svg]").style.display=""}return{width:o.width||t.clientWidth||t.offsetWidth,height:o.height||t.clientHeight||t.offsetHeight,left:o.left,top:o.top,right:o.right,bottom:o.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getBrowserDeviceInfo:function(){return{browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer,isDevice:sf.base.Browser.isDevice,isTouch:sf.base.Browser.isTouch,isIos:sf.base.Browser.isIos||sf.base.Browser.isIos7}},setZoomingCipPath:function(e,t,i){var n=document.getElementById(e),s=document.getElementById(t);n&&n.setAttribute("clip-path",i),s&&n.setAttribute("clip-path",i)},setZoomingElementAttributes:function(e,t,i,n,s,o,r,a){"Indicator"===t&&i&&i.parentElement&&i.parentElement.setAttribute("transform",e),i&&i.setAttribute("transform",e),n&&n.setAttribute("transform",e),s&&s.setAttribute("transform",e),o&&o.setAttribute("visibility","hidden"),r&&r.setAttribute("visibility","hidden"),a&&(a.style.visibility="hidden")},measureBreakText:function(e,t,i,n,s,o,r){var a={color:i,size:t,fontFamily:n,fontWeight:s,fontStyle:o,opacity:parseInt(r,10)};return sf.svgbase.measureText(e,a)},getAllCharacters:function(){for(var e=[],t=33;t<591;t++)e.push(String.fromCharCode(t));return e},measureText:function(e,t,i,n){var s=document.getElementById("sfchartmeasuretext");return null===s&&(s=sf.base.createElement("text",{id:"sfchartmeasuretext"}),document.body.appendChild(s))," "===e&&(e="&nbsp;"),s.innerHTML=e,s.style.position="fixed",s.style.fontSize="100px",s.style.fontWeight=t,s.style.fontStyle=i,s.style.fontFamily=n,s.style.visibility="hidden",s.style.top="-100",s.style.left="0",s.style.whiteSpace="nowrap",s.style.lineHeight="normal",{Width:s.clientWidth,Height:s.clientHeight}},getCharCollectionSize:function(e){for(var t,i=[],n={},s=this.getAllCharacters(),o=s.length,r=e.length,a=0;a<r;a++){for(var l=e[a].split("_"),d=l[0],h=l[1],c=l[2],p=0;p<o;p++)t=this.measureText(s[p],d,h,c),n[s[p]]={X:t.Width,Y:t.Height};i.push(n)}return JSON.stringify(i)},getCharSizeByFontKeys:function(e){for(var t,i={},n=e.length,s=[],o=0;o<n;o++)s=e[o].split("_"),t=this.measureText(s[0],s[1],s[2],s[3]),i[e[o]]={X:t.Width,Y:t.Height};return JSON.stringify(i)},getElementRect:function(e){var t=document.getElementById(e),i=t.getBoundingClientRect();return sf.base.remove(t),{Left:i.left,Right:i.right,Top:i.top,Bottom:i.bottom,Width:i.width,Height:i.height}},getElement:function(e){return document.getElementById(e)},drawTrackBall:function(e,t,i,n,s,o){var r=this.getElement(e);if(r){for(var a=document.createElementNS("http://www.w3.org/2000/svg",i),l=Object.keys(t),d="",h=0;h<l.length;h++)d="strokeWidth"===l[h]?"stroke-width":"strokeDashArray"===l[h]?"stroke-dashArray":"direction"===l[h]?"d":l[h],a.setAttribute(d,t[l[h]]);a.setAttribute("class",n),a.setAttribute("clip-path",s),a.setAttribute("transform",o),r.appendChild(a)}},removeHighLightedMarker:function(e){for(var t=document.getElementsByClassName(e),i=0,n=t.length;i<n;i++)sf.base.remove(t[0])},setAttribute:function(e,t,i){var n=this.getElement(e);n&&n.setAttribute(t,i)},createTooltip:function(e,t,i,n,s){var o=document.getElementById(e),r="top:"+((window.scrollY||0)+i).toString()+"px;left:"+n.toString()+"px;color:black !important; background:#FFFFFF !important; position:absolute;border:1px solid #707070;font-size:"+s+";border-radius:2px; z-index:1";o?(o.setAttribute("innerHTML","&nbsp;"+t+"&nbsp;"),o.setAttribute("styles",r)):(o=sf.base.createElement("div",{id:e,innerHTML:"&nbsp;"+t+"&nbsp;",styles:r}),document.body.appendChild(o))},removeElement:function(e){var t=this.getElement(e);t&&sf.base.remove(t)},applySelection:function(e,t){var i,n=document.getElementById(e);if(n&&n.childNodes)for(var s=1,o=(i=n.childNodes).length;s<o;s++)i[s]&&"rect"!==i[s].tagName&&i[s].setAttribute&&i[s].setAttribute("fill",t)},getAndSetTextContent:function(e,t,i){var n=document.getElementById(e);if(n){if(t)return n.textContent;n.textContent=i}return null},doProgressiveAnimation:function(e,t,i,n,s){var o,r=this.getElement(t),a=this.getElement(e),l=new sf.base.Animation({}),d=a.getTotalLength();a.setAttribute("visibility","hidden"),l.animate(a,{duration:i+n,delay:n,progress:function(e){r.setAttribute("visibility","visible"),e.timeStamp>=e.delay&&(a.setAttribute("visibility","visible"),o=Math.abs(Math.round((e.timeStamp-e.delay)*d/e.duration)),a.setAttribute("stroke-dasharray",o+","+d))},end:function(){a.setAttribute("stroke-dasharray",s)}})},linear:function(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t},doLinearAnimation:function(e,t,i,n){var s,o=this.getElement(e),r=new sf.base.Animation({}),a=this.linear,l=+o.getAttribute("height"),d=+o.getAttribute("width"),h=+o.getAttribute("x"),c=n?+o.getAttribute("height")+ +o.getAttribute("y"):+o.getAttribute("y");r.animate(o,{duration:t,delay:i,progress:function(e){e.timeStamp>=e.delay&&(o.setAttribute("visibility","visible"),n?(s=a(e.timeStamp-e.delay,0,l,e.duration),o.setAttribute("transform","translate("+h+" "+c+") scale(1,"+s/l+") translate("+-h+" "+-c+")")):(s=a(e.timeStamp-e.delay,0,d,e.duration),o.setAttribute("transform","translate("+h+" "+c+") scale("+s/d+", 1) translate("+-h+" "+-c+")")))},end:function(){o.setAttribute("transform","translate(0,0)")}})},filterCommentElement:function(e){var t=this.getElement(e);if(!t)return null;for(var i=t.childNodes,n=[],s=0;s<i.length;s++)i[s].nodeName.match("#comment")||n.push(i[s]);return n},doInitialAnimation:function(e){for(var t=0;t<e.length;t++){switch(e[t].type){case"Rect":for(var i=this.getElement(e[t].clipPathId),n=this.filterCommentElement(e[t].elementId),s=0;s<e[t].pointIndex.length;s++)this.doRectAnimation(n[e[t].pointIndex[s]],i,e[t].duration,e[t].delay,e[t].pointX[s],e[t].pointY[s],e[t].pointWidth[s],e[t].pointHeight[s],e[t].isInvertedAxis);break;case"Progressive":this.doProgressiveAnimation(e[t].elementId,e[t].clipPathId,e[t].duration,e[t].delay,e[t].strokeDashArray);break;case"Linear":this.doLinearAnimation(e[t].elementId,e[t].duration,e[t].delay,e[t].isInvertedAxis);break;case"Marker":var o=this.getElement(e[t].clipPathId),r=this.filterCommentElement(e[t].elementId);for(s=0;s<e[t].pointIndex.length;s++)this.doMarkerAnimate(r[e[t].pointIndex[s]],o,e[t].duration,e[t].delay,e[t].pointX[s],e[t].pointY[s]);break;case"PolarRadar":var a=this.getElement(e[t].clipPathId),l=this.filterCommentElement(e[t].elementId);for(s=0;s<l.length;s++)this.doPolarRadarAnimation(l[s],a,e[t].duration,e[t].delay,e[t].pointX[0],e[t].pointY[0])}if(!sf.base.isNullOrUndefined(e[t].markerInfo))for(o=this.getElement(e[t].markerInfo.markerClipPathId),r=this.filterCommentElement(e[t].markerInfo.markerElementId),s=0;s<e[t].markerInfo.pointIndex.length;s++)this.doMarkerAnimate(r[e[t].markerInfo.pointIndex[s]],o,200,e[t].duration+e[t].delay,e[t].markerInfo.pointX[s],e[t].markerInfo.pointY[s]),e[t].markerInfo.lowPointIndex.length>0&&this.doMarkerAnimate(r[e[t].markerInfo.lowPointIndex[s]],o,200,e[t].duration+e[t].delay,e[t].markerInfo.lowPointX[s],e[t].markerInfo.lowPointY[s]);if(!sf.base.isNullOrUndefined(e[t].dataLabelInfo))if(0===e[t].dataLabelInfo.templateId.length)this.doDataLabelAnimation(e[t].dataLabelInfo.shapeGroupId,e[t].dataLabelInfo.textGroupId,"",e[t].clipPathId,200,e[t].duration+e[t].delay);else for(s=0;s<e[t].dataLabelInfo.templateId.length;s++)this.doDataLabelAnimation("","",e[t].dataLabelInfo.templateId[s],"",200,e[t].duration+e[t].delay);sf.base.isNullOrUndefined(e[t].errorBarInfo)||this.doErrorBarAnimation(e[t].errorBarInfo.errorBarElementId,e[t].errorBarInfo.errorBarClipPathId,e[t].duration+e[t].delay,e[t].isInvertedAxis)}},doDynamicAnimation:function(e,t,i){for(var n=0;n<e.length;n++)sf.base.isNullOrUndefined(e[n].previousDir)||""===e[n].previousDir||sf.base.isNullOrUndefined(e[n].currentDir)||""===e[n].currentDir||this.pathAnimation(e[n].id,e[n].currentDir,!0,e[n].previousDir,300);for(var s=0;s<t.length;s++)this.animateRectElement(t[s].id,0,300,t[s].currentRect,t[s].previousRect);for(var o=0;o<i.length;o++)this.animateRedrawElement(i[o].id,300,i[o].preLocationX,i[o].preLocationY,i[o].curLocationX,i[o].curLocationY,i[o].x,i[o].y)},doRectAnimation:function(e,t,i,n,s,o,r,a,l){var d,h=this.linear;sf.base.isNullOrUndefined(e)||(e.setAttribute("visibility","hidden"),new sf.base.Animation({}).animate(e,{duration:i,delay:n,progress:function(i){t.setAttribute("visibility","visible"),i.timeStamp>=i.delay&&(e.setAttribute("visibility","visible"),l?(r=r||1,d=h(i.timeStamp-i.delay,0,r,i.duration),e.setAttribute("transform","translate("+s+" "+o+") scale("+d/r+", 1) translate("+-s+" "+-o+")")):(a=a||1,d=h(i.timeStamp-i.delay,0,a,i.duration),e.setAttribute("transform","translate("+s+" "+o+") scale(1,"+d/a+") translate("+-s+" "+-o+")")))},end:function(){e.setAttribute("transform","translate(0,0)")}}))},doMarkerAnimate:function(e,t,i,n,s,o){var r=0;e&&(e.setAttribute("visibility","hidden"),new sf.base.Animation({}).animate(e,{duration:i,delay:n,progress:function(i){t.setAttribute("visibility","visible"),i.timeStamp>i.delay&&(e.setAttribute("visibility","visible"),r=(i.timeStamp-i.delay)/i.duration,e.setAttribute("transform","translate("+s+" "+o+") scale("+r+") translate("+-s+" "+-o+")"))},end:function(){e.setAttribute("visibility","")}}))},doPolarRadarAnimation:function(e,t,i,n,s,o){var r=0;e.setAttribute("visibility","hidden"),new sf.base.Animation({}).animate(e,{duration:i,delay:n,progress:function(i){t.setAttribute("visibility","visible"),i.timeStamp>i.delay&&(e.setAttribute("visibility","visible"),r=(i.timeStamp-i.delay)/i.duration,e.setAttribute("transform","translate("+s+" "+o+") scale("+r+") translate("+-s+" "+-o+")"))},end:function(){e.setAttribute("visibility","visible"),e.removeAttribute("transform")}})},templateAnimate:function(e,t,i,n,s,o){new sf.base.Animation({}).animate(e,{duration:i,delay:t,name:n,progress:function(e){o&&o.setAttribute("visibility","visible"),e.element.style.visibility="visible"},end:function(e){s?sf.base.remove(e.element):e.element.style.visibility="visible"}})},doDataLabelAnimation:function(e,t,i,n,s,o){for(var r,a,l,d=this.filterCommentElement(e),h=this.filterCommentElement(t),c=this.getElement(n),p=this.getElement(i),u=p?1:h.length,f=0;f<u;f++)p?(p.style.visibility="hidden",this.templateAnimate(p,o,s,"ZoomIn")):(r=+(l=h[f]).getAttribute("x")+ +l.getAttribute("width")/2,a=+l.getAttribute("y")+ +l.getAttribute("height")/2,this.doMarkerAnimate(h[f],c,s,o,r,a),d[f]&&(r=+(l=d[f]).getAttribute("x")+ +l.getAttribute("width")/2,a=+l.getAttribute("y")+ +l.getAttribute("height")/2,this.doMarkerAnimate(d[f],c,s,o,r,a)))},pathAnimation:function(e,t,i,n,s){var o=this,r=this.getElement(e);if(!i||null==r)return null;var a=300;s&&(a=s);var l,d,h,c=n||r.getAttribute("d"),p=c.split(/(?=[LMCZAQ])/),u=t.split(/(?=[LMCZAQ])/),f=[],m=[];r.setAttribute("d",c),new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:a,progress:function(e){l="",p.map((function(t,i){if(f=t.split(" "),m=u[i]?u[i].split(" "):f,"Z"===f[0]?l+="Z ":l+=f[0]+" "+o.linear(e.timeStamp,+f[1],+m[1]-+f[1],e.duration)+" "+o.linear(e.timeStamp,+f[2],+m[2]-+f[2],e.duration)+" ","C"===f[0]||"Q"===f[0])for(d=3,h="Q"===f[0]?4:6;d<h;)l+=o.linear(e.timeStamp,+f[d],+m[d]-+f[d],e.duration)+" "+o.linear(e.timeStamp,+f[++d],+m[d]-+f[d],e.duration)+" ",++d;"A"===f[0]&&(l+="0 0 1 "+o.linear(e.timeStamp,+f[6],+m[6]-+f[6],e.duration)+" "+o.linear(e.timeStamp,+f[7],+m[7]-+f[7],e.duration)+" ")})),r.setAttribute("d",l)},end:function(){r.setAttribute("d",t)}})},getPreviousDirection:function(e){var t=this.getElement(e);return t?t.getAttribute("d"):null},getPreviousLocation:function(e,t){var i=this.getElement(e);return{X:i?+i.getAttribute(t+"x"):0,Y:i?+i.getAttribute(t+"y"):0}},animateRectElement:function(e,t,i,n,s){var o=this,r=function(t){e.setAttribute("x",t.x+""),e.setAttribute("y",t.y+""),e.setAttribute("width",t.width+""),e.setAttribute("height",t.height+"")};new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:i,delay:t,progress:function(e){r(new sf.svgbase.Rect(o.linear(e.timeStamp,s.x,n.x-s.x,e.duration),o.linear(e.timeStamp,s.y,n.y-s.y,e.duration),o.linear(e.timeStamp,s.width,n.width-s.width,e.duration),o.linear(e.timeStamp,s.height,n.height-s.height,e.duration)))},end:function(){r(n)}})},animateRedrawElement:function(e,t,i,n,s,o,r,a){var l=this;void 0===r&&(r="x"),void 0===a&&(a="y");var d=this.getElement(e);if(!d)return null;var h="DIV"===d.tagName,c=function(e,t){h?(d.style[r]=e+"px",d.style[a]=t+"px"):(d.setAttribute(r,e+""),d.setAttribute(a,t+""))};c(i,n),new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:t,progress:function(e){c(l.linear(e.timeStamp,i,s-i,e.duration),l.linear(e.timeStamp,n,o-n,e.duration))},end:function(){c(s,o)}})},appendChildElement:function(e,t,i,n,s,o,r,a,l,d,h,c){void 0===n&&(n=!1),void 0===s&&(s="x"),void 0===o&&(o="y"),void 0===l&&(l=!1),void 0===d&&(d=!1),void 0===h&&(h=null);var p=e.querySelector("#"+t.id)||this.getElement(t.id),u=t,f=c||300;if(i&&n&&p)if(r=r||("DIV"===p.tagName?new sf.svgbase.TooltipLocation(+p.style[s].split("px")[0],+p.style[o].split("px")[0]):new sf.svgbase.TooltipLocation(+p.getAttribute(s),+p.getAttribute(o))),""!==a&&null!==a)this.pathAnimation(t,t.getAttribute("d"),i,a,f);else if(d&&h)this.animateRectElement(u,0,f,new sf.svgbase.Rect(+p.getAttribute("x"),+p.getAttribute("y"),+p.getAttribute("width"),+p.getAttribute("height")),h);else{var m="DIV"===u.tagName?new sf.svgbase.TooltipLocation(+u.style[s].split("px")[0],+u.style[o].split("px")[0]):new sf.svgbase.TooltipLocation(+u.getAttribute(s),+u.getAttribute(o));this.animateRedrawElement(u,f,r,m,s,o)}else i&&n&&!p&&l&&this.templateAnimate(u,0,600,"FadeIn")},processAppendChild:function(e,t,i,n,s,o,r,a,l,d,h,c,p,u,f,m){void 0===d&&(d=!1),void 0===h&&(h="x"),void 0===c&&(c="y"),void 0===u&&(u=!1),void 0===f&&(f=!1);var g=this.getElement(e),v=this.getElement(t),b=new sf.svgbase.TooltipLocation(i,n),y=new sf.svgbase.Rect(s,o,r,a);this.appendChildElement(g,v,l,d,h,c,b,p,u,f,y,m)},createStyleElement:function(e,t){document.body.appendChild(sf.base.createElement("style",{id:e,innerHTML:t}))},isLassoId:function(e,t){var i=document.elementFromPoint(e,t);return i?i.id:""},doErrorBarAnimation:function(e,t,i,n){var s=this.filterCommentElement(e),o=this.getElement(t);if(!s)return null;for(var r=1;r<s.length;)s[r].style.visibility="hidden",this.templateAnimate(s[r],i,350,n?"SlideLeftIn":"SlideBottomIn",!1,o),r++},getTemplateSize:function(e){var t=this.getElement(e);return t?{width:t.offsetWidth,height:t.offsetHeight}:null},resizeBound:{},resize:{},chartResize:function(e,t){var i=this;return this.resize&&clearTimeout(this.resize),this.resize=setTimeout((function(){for(var t,n,s,o=e.length,r={},a=0;a<o;a++)t=e[a].dotnetref,(n=e[a].id).indexOf("_stockChart_")<0&&document.getElementById(n+"_svg")&&((s=document.getElementById(n+"_svg")).style.display="none");for(a=0;a<o;a++)t=e[a].dotnetref,(n=e[a].id).indexOf("_stockChart_")<0&&document.getElementById(n)&&(s=document.getElementById(n),r[n]={Dotnetref:t,Width:s.clientWidth||s.offsetWidth,Height:s.clientHeight||s.offsetHeight});for(var l in r)t=r[l].Dotnetref,(s=document.getElementById(l+"_svg")).style.display="",t.invokeMethodAsync("OnChartResize",JSON.stringify({Width:r[l].Width,Height:r[l].Height}));clearTimeout(i.resize)}),500),!1},getDatalabelTemplateSize:function(e){for(var t,i=[],n=e.length,s=0;s<n;s++)t=this.getElementBoundsById(e[s],!1),i.push({X:t.width,Y:t.height});return JSON.stringify(i)},setSvgDimensions:function(e,t,i){e.setAttribute("width",t),e.setAttribute("height",i)},findDOMElement:function(e){return document.getElementById(e)},calculateSelectedElements:function(e,t){if(!sf.base.isNullOrUndefined(e.target)){var i=e.target,n=window.sfBlazor.getCompInstance(t);if(i=this.findDOMElement(this.findDOMElementFromDataLabel(i.id,n)),!("None"===n.selectionMode&&("None"===n.highlightMode||n.enableHighlight)||sf.base.isNullOrUndefined(i)&&-1===i.id.indexOf(n.element.id+"_"))&&("mousemove"!==e.type&&"pointermove"!==e.type||(null===i&&i.id.indexOf("Trackball")>-1&&(i=this.findDOMElement(i.id.split("_Trackball")[0])),!i.hasAttribute("class")||!(i.getAttribute("class").indexOf("highlight")>-1||i.getAttribute("class").indexOf("selection")>-1)))&&(this.isAlreadySelected(e,n),i.id.indexOf("_Series_")>-1)){var s=void 0;if(i.id.indexOf("_Trackball_1")>-1)s=this.findDOMElement(i.id.split("_Trackball_")[0]+"_Symbol"),s=sf.base.isNullOrUndefined(s)?this.findDOMElement(i.id.split("_Trackball_")[0]):s;else if(i.id.indexOf("_Trackball_0")>-1||i.id.indexOf("_ErrorBarGroup_")>-1||i.id.indexOf("_ErrorBarCap_")>-1)return null;this.performSelection(this.indexFinder(i.id),n,s||i)}}},generateStyle:function(e,t){var i,n=sf.base.isNullOrUndefined(this.findDOMElement(e))?null:this.findDOMElement(e).getAttribute("data-point");if(sf.base.isNullOrUndefined(this.findDOMElement(e))||(e.indexOf("SeriesGroup")>-1||e.indexOf("SymbolGroup")>-1)&&(n=(i=document.getElementById(e).querySelectorAll("path,ellipse")).length>0?i[0].getAttribute("data-point"):null),!n)return"undefined";var s=n.split(",");return s[3]?(t.styleId.indexOf("selection")>1&&"None"!==t.selectionMode&&(t.unSelected=s[7]||t.unSelected),t.styleId.indexOf("highlight")>0&&("None"!==t.highlightMode||t.enableHighlight)&&(t.unSelected=s[5]||t.unSelected),s[6]||t.styleId+"_series"+s[4]):"undefined"},findDOMElementFromDataLabel:function(e,t){if(e.indexOf("Text")>-1&&e.indexOf("Series")>-1){var i=e.split("_Text_")[0];return this.isRectSeries(t.seriesTypes[e.split("_Series_")[1].split("_")[0]])||"Bubble"===t.seriesTypes[0]||"Scatter"===t.seriesTypes[0]?i:i.slice(0,i.length)+"_Symbol "}return e},indexFinder:function(e){var i=["NaN","NaN"];return e.indexOf("_Point_")>-1?(i=e.split("_Series_")[1].split("_Point_"))[1].indexOf("Text")>-1&&(i[1]=i[1].split("_Text_")[0]):e.indexOf("_shape_")>-1&&!e.indexOf("_legend_")?(i=e.split("_shape_"))[0]=i[1]:e.indexOf("_text_")>-1&&!e.indexOf("_legend_")?(i=e.split("_text_"),e.indexOf("datalabel")>-1?i[0]=i[0].split("_Series_")[1]:i[0]=i[1]):e.indexOf("Series")>-1&&!(e.indexOf("points")>-1)&&(i[0]=e.split("_Series_")[1].split("_")[0]),new t(parseInt(i[0],10),parseInt(i[1],10))},addOrRemoveIndex:function(e,t,i,n){for(var s=0;s<e.length;s++)this.toEquals(e[s],t,i.isSeriesMode,i)&&(e.splice(s,1),s--);n&&e.push(t)},toEquals:function(e,t,i,n){return(e.series===t.series||"Cluster"===n.currentMode&&!i)&&(i||e.point===t.point)},removeSvgClass:function(e,t){var i=sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.getAttribute("class"))?"":e.getAttribute("class");i.indexOf(t)>-1&&e.setAttribute("class",i.replace(t,""))},getSelectionClass:function(e,t){return this.generateStyle(e,t)},removeStyles:function(e,t){for(var i=0,n=e;i<n.length;i++){var s=n[i];if(null!==s){var o=s,r=s.id,a=this.findDOMElement(o.id).getAttribute("data-point"),l=a?a.split(","):[];if(o.id.indexOf("_chart_legend_shape_")>-1&&(r=t.element.id+"SeriesGroup"+t.currentSeriesIndex),this.removeSvgClass(s,this.getSelectionClass(r,t)),"None"===t.highlightPattern&&""!==t.highlightColor&&!sf.base.isNullOrUndefined(t.highlightColor))if(s.id.indexOf("Group")>0)for(var d=0;d<s.children.length;d++)s.children[d].setAttribute("fill",l[2]);else s.setAttribute("fill",l[2])}}},findTrackballElements:function(e,t,i){var n,s;t=t.trim();for(var o=0;o<e.length;o++)if(!sf.base.isNullOrUndefined(e[o])&&(n=sf.base.isNullOrUndefined(e[o].parentNode)?[]:[].slice.call(e[0].parentNode.querySelectorAll("."+t))).length>0){s=[];for(var r=0;r<n.length;r++)n[r].id.indexOf("Trackball")>-1&&s.push(n[r]);this.removeStyles(s,i)}},blurEffect:function(e,t,i){void 0===i&&(i=!1);for(var n=this.checkVisibility(t.highlightDataIndexes,t)||this.checkVisibility(t.selectedDataIndexes,t),s=document.getElementById(t.element.id+"SeriesCollection").querySelectorAll("[id*='SeriesGroup']"),o=0;o<s.length;o++){var r=parseInt(s[o].id.split("SeriesGroup")[1]);this.checkSelectionElements(this.findDOMElement(t.element.id+"SeriesGroup"+r),this.generateStyle(t.element.id+"SeriesGroup"+r,t),n,i,r,t),sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SymbolGroup"+r))||this.checkSelectionElements(this.findDOMElement(t.element.id+"SymbolGroup"+r),this.generateStyle(t.element.id+"SymbolGroup"+r,t),n,i,r,t)}},checkVisibility:function(e,t){if(!e)return!1;for(var i=!1,n=[],s=0,o=e;s<o.length;s++){var r=o[s];-1===n.indexOf(r.series)&&n.push(r.series)}for(var a=0,l=n;a<l.length;a++){r=l[a];if(document.getElementById(t.element.id+"SeriesGroup"+r)){i=!0;break}}return i},findElements:function(e,t,i,n,s){return void 0===n&&(n=""),e.isSeriesMode?this.getSeriesElements(i.series.toString(),e):"Cluster"===e.currentMode?this.getClusterElements(e,i):this.findDOMElementByIndex(e,i,n,s)},removeMultiSelectElements:function(e,t,i){this.getSeriesElements(i.series.toString(),e);for(var n,s=0;s<t.length;s++)n=e.seriesTypes[t[s].series],(e.isSeriesMode&&!this.toEquals(t[s],i,e.isSeriesMode,e)||"Cluster"===e.currentMode&&!this.toEquals(t[s],i,!1,e)||!e.isSeriesMode&&this.toEquals(t[s],i,!0,e)&&!this.toEquals(t[s],i,!1,e))&&(this.removeStyles(this.findElements(e,n,t[s],"",!1),e),e.element.id+"SymbolGroup"+t[s].series&&this.removeStyles(this.findElements(e,n,t[s],"",!0),e),t.splice(s,1),s--)},checkSelectionElements:function(e,t,i,n,s,o,r){var a,l,d,h=[];t=t.trim(),e.id.indexOf("Series")>-1&&(this.pointIdRequired(o.seriesTypes[s])?(h=o.isSeriesMode?[e]:e.querySelectorAll("[id*='_Series']"),"Histogram"===o.seriesTypes[s]&&h.push(this.findDOMElement(o.element.id+"_Series_"+s+"_NDLine")),"Waterfall"===o.seriesTypes[s]&&h.push(this.findDOMElement(o.element.id+"_Series_"+s+"_Connector")),"BoxAndWhisker"===o.seriesTypes[s]&&(h=this.findDOMElement(o.element.id+"SymbolGroup"+s).querySelectorAll("path,ellipse"))):h=o.isSeriesMode?[e]:e.querySelectorAll("[id*='_Series']")),("None"!==o.selectionMode||"None"!==o.highlightMode||o.enableHighlight)&&(h=e.querySelectorAll("[id*='_Series']"));for(var c=e,p=this.isRectSeries(o.seriesTypes[s])?null:this.findDOMElement(o.element.id+"_Series_"+s),u=0;u<h.length;u++)a=h[u].getAttribute("class")||"",l=sf.base.isNullOrUndefined(p)?"":p.getAttribute("class"),("None"!==o.selectionMode||"None"!==o.highlightMode||o.enableHighlight)&&(t=!sf.base.isNullOrUndefined(a)&&(a.indexOf("selection")>0||a.indexOf("highlight")>0)?a:t,t=!sf.base.isNullOrUndefined(a)&&(l.indexOf("selection")>0||l.indexOf("highlight")>0)?l:t),sf.base.isNullOrUndefined(a)||sf.base.isNullOrUndefined(l)||-1!==a.indexOf(t)||-1!==l.indexOf(t)||!i?(c=h[u],this.removeSvgClass(h[u],o.unSelected),this.removeSvgClass(p,o.unSelected)):this.addSvgClass(h[u],o.unSelected),h[u].id.indexOf("Trackball")>0&&c.classList[0]===t&&(this.removeSvgClass(h[u],o.unSelected),this.removeSvgClass(p,o.unSelected),this.addSvgClass(h[u],t));if(e.id.indexOf("Symbol")>-1&&e.querySelectorAll("."+t)[0]&&e.querySelectorAll("."+t)[0].getAttribute("class")===t){var f=this.findDOMElement(e.id+"_Series_"+e.id[e.id.length-1]);(f&&f.hasAttribute("class")?f.getAttribute("class"):"").indexOf(o.unSelected)>-1&&this.removeSvgClass(f,o.unSelected)}var m,g=this.findDOMElement(e.id).getAttribute("data-point");if((e.id.indexOf("SeriesGroup")>-1||e.id.indexOf("SymbolGroup")>-1)&&(g=(m=document.getElementById(e.id).querySelectorAll("path,ellipse")).length>0?m[0].getAttribute("data-point"):null),g){var v=g.split(",");(d=this.findDOMElement(o.id+"_chart_legend_shape_"+s))&&(d.hasAttribute("class")&&(this.removeSvgClass(d,d.getAttribute("class")),sf.base.isNullOrUndefined(o.highlightColor&&""!==o.highlightColor)||(d.setAttribute("stroke",v[2]),"None"===o.highlightPattern&&d.setAttribute("fill",v[2]))),a=c.getAttribute("class")||"",l=c.parentNode.getAttribute("class")||"",-1===a.indexOf(t)&&-1===l.indexOf(t)&&i?(this.addSvgClass(d,o.unSelected),this.removeSvgClass(d,t),""===o.highlightColor||sf.base.isNullOrUndefined(o.highlightColor)||(d.setAttribute("stroke",v[2]),"None"===o.highlightPattern&&d.setAttribute("fill",v[2]))):(this.removeSvgClass(d,o.unSelected),sf.base.isNullOrUndefined(o.highlightColor)||""===o.highlightColor||(d.setAttribute("stroke",v[2]),"None"===o.highlightPattern&&d.setAttribute("fill",v[2])),"e-chart-focused"==a.trim()&&(a=""),""===a&&""===l||"EJ2-Trackball"===a.trim()?this.removeSvgClass(d,t):(this.addSvgClass(d,t),t.indexOf("highlight")>0&&""!==o.highlightColor&&!sf.base.isNullOrUndefined(o.highlightColor)&&(d.setAttribute("stroke",o.highlightColor),o.styleId.indexOf("highlight")>0&&"None"===o.highlightPattern&&d.setAttribute("fill",o.highlightColor)))),n&&l.indexOf(t)>-1&&this.addSvgClass(d,t))}},addSvgClass:function(e,t){var i=e.getAttribute("class")||"";-1===(i+=""!==i?" ":"").indexOf(t)&&e.setAttribute("class",i+t)},isRectSeries:function(e){return"Column"===e||"StackingColumn"===e||"Bar"===e||"StackingBar"===e||"RangeColumn"===e||"Histogram"===e||"BoxAndWhisker"===e||"Waterfall"===e},pointIdRequired:function(e){return!(!this.isRectSeries(e)&&"Bubble"!==e&&"Scatter"!==e)},getSeriesElements:function(e,t){var i,n=[],s=!sf.base.isNullOrUndefined(document.getElementById(t.element.id+"SymbolGroup"+e))&&"Scatter"!==t.seriesTypes[e]&&"Bubble"!==t.seriesTypes[e]&&!this.isRectSeries(t.seriesTypes[e]);if(s?(i=this.findDOMElement(t.element.id+"SymbolGroup"+e).querySelectorAll("#"+t.element.id+"SymbolGroup"+e+" path"),n=this.addSeriesElements(n,i),sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SymbolGroup"+e).querySelectorAll("#"+t.element.id+"SymbolGroup"+e+" ellipse"))||(i=this.findDOMElement(t.element.id+"SymbolGroup"+e).querySelectorAll("#"+t.element.id+"SymbolGroup"+e+" ellipse"),n=this.addSeriesElements(n,i))):sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" path"),n=this.addSeriesElements(n,i),sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" ellipse"))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" ellipse"),n=this.addSeriesElements(n,i))),(t.seriesTypes[e].indexOf("Area")>-1||t.seriesTypes[e].toLowerCase().indexOf("line")>-1)&&(s?(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" path"),n.push.apply(n,this.addSeriesElements(n,i))):sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" path"),n=this.addSeriesElements(n,i))),"Histogram"===t.seriesTypes[e]){var o=this.findDOMElement(t.element.id+"_Series_"+e+"_NDLine");n.push(o)}return"Polar"!==t.seriesTypes[e]||"Scatter"!==t.drawType[e]||sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" path"),n=this.addSeriesElements(n,i),sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" ellipse"))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" ellipse"),n=this.addSeriesElements(n,i))),n},addSeriesElements:function(e,t){for(var i=0;i<t.length;i++){var n=document.getElementById(t[i].id);null!=n&&e.push(n),e=e.filter((function(e,t,i){return t===i.indexOf(e)}))}return e},findDOMElementByIndex:function(e,t,i,n){void 0===i&&(i="");var s=e.element.id+"_Series_"+t.series+"_Point_"+t.point,o=e.seriesTypes[t.series];return s=!this.isRectSeries(o)&&"Scatter"!==o&&"Bubble"!==o&&n?s+"_Symbol"+i:s,"BoxAndWhisker"===o&&(s+="_BoxPath"),[this.findDOMElement(s),"RangeArea"!==o&&"SplineRangeArea"!==o||!n?null:this.findDOMElement(s+"1")]},applyStyles:function(e,t){for(var i=0,n=e;i<n.length;i++){var s=n[i];if(s&&(this.removeSvgClass(s,t.unSelected),this.addSvgClass(s,this.getSelectionClass(s.id,t)),t.styleId.indexOf("highlight")>0&&""!==t.highlightColor&&!sf.base.isNullOrUndefined(t.highlightColor)&&"None"===t.highlightPattern))if(s.id.indexOf("Group")>0)for(var o=0;o<s.children.length;o++)s.children[o].setAttribute("fill",t.highlightColor);else s.setAttribute("fill",t.highlightColor)}},getClusterElements:function(e,i){for(var n,s,o,r,a=[],l=document.getElementById(e.element.id+"SeriesCollection").querySelectorAll("[id*='SeriesGroup']"),d=(document.getElementById(e.element.id+"SeriesCollection").querySelectorAll("[id*='SymbolGroup']"),0);d<l.length;d++){o=l[d].querySelectorAll("#"+l[d].id+" path"),r=Array.prototype.slice.call(o);for(var h=0;h<r.length;h++){var c=r[h].getAttribute("data-point").split(",");i=new t(+c[4],i.point),this.isRectSeries(c[3])&&a.push(this.findDOMElementByIndex(e,i)[0]),a.push(this.findDOMElementByIndex(e,i,"","True"===c[9])[0]),n=this.generateStyle(r[h].id,e),s=document.querySelectorAll("."+n),this.findTrackballElements(s,n);var p="True"===c[9]&&this.isRectSeries(c[3])?2:1;!e.allowMultiSelection&&s.length>0&&s[0].id!==a[a.length-p].id&&this.removeSelection(e,i.series,s,n,!0)}}return a},clusterSelection:function(e,i){this.selection(e,i,this.getClusterElements(e,new t(i.series,i.point)))},removeSelection:function(e,i,n,s,o){var r,a=document.getElementById(e.element.id+"SeriesGroup"+i).querySelectorAll("#"+e.element.id+"SeriesGroup"+i+" path");Array.prototype.slice.call(a);if(n.length>0){for(var l=[],d=0;d<n.length;d++)l.push(n[d]);this.removeStyles(l,e),e.isSeriesMode=!0,this.addOrRemoveIndex(e.selectedDataIndexes,new t(i,NaN),e);for(var h=0;h<n.length;h++)if(r=n[h].id,s=this.generateStyle(r,e),document.querySelectorAll("."+s).length>0){for(var c=0,p=l;c<p.length;c++){var u=p[c];this.checkSelectionElements(u,s,!0,!0,i,e)}o=!1;break}o&&(e.isSeriesMode="Series"===e.selectionMode,this.blurEffect(r,e))}},isAlreadySelected:function(e,t){var i=e.target;if("click"===e.type?(t.currentMode=t.selectionMode,t.styleId=t.element.id+"_ej2_chart_selection"):"mousemove"!==e.type&&"pointermove"!==e.type||(t.currentMode=t.highlightMode,t.highlightDataIndexes=[],t.styleId=t.element.id+"_ej2_chart_highlight"),("None"!==t.highlightMode||t.enableHighlight)&&"None"===t.selectionMode&&"click"===e.type)return!1;if(("None"!==t.highlightMode||t.enableHighlight)&&0!==t.previousSelectedEle.length&&null!==t.previousSelectedEle[0]){t.previousSelectedEle.filter((function(e){return null!==e}));var n=i.parentNode.id,s=void 0;i.parentNode&&(s=n.indexOf("Point")>0||n.indexOf("Symbol")>0);for(var o=0;o<t.previousSelectedEle.length;o++)if(t.previousSelectedEle[o].hasAttribute("class"))if(t.previousSelectedEle[o].getAttribute("class").indexOf("highlight")>-1&&(s||"click"===e.type)){if(t.previousSelectedEle[o].removeAttribute("class"),""!==t.highlightColor&&!sf.base.isNullOrUndefined(t.highlightColor)&&"None"===t.highlightPattern)if(t.previousSelectedEle[o].id.indexOf("Group")>0)for(var r=0;r<t.previousSelectedEle[o].children.length;r++){var a=t.previousSelectedEle[o].children[r];a.setAttribute("fill",a.getAttribute("data-point").split(",")[2])}else t.previousSelectedEle[o].setAttribute("fill",t.previousSelectedEle[o].getAttribute("data-point").split(",")[2]);this.addOrRemoveIndex(t.highlightDataIndexes,this.indexFinder(t.previousSelectedEle[o].id),t)}else!s&&t.previousSelectedEle[o].getAttribute("class").indexOf("highlight")>-1&&this.performSelection(this.indexFinder(t.previousSelectedEle[o].id),t,t.previousSelectedEle[o])}return!0},performSelection:function(e,t,i){if(t.isSeriesMode="Series"===t.currentMode,"BoxAndWhisker"===t.seriesTypes[e.series]&&i&&i.id===t.element.id+"_Series_"+e.series+"_Point_"+e.point+"_BoxPath"&&(i=i.parentNode),"Area"===t.seriesTypes[e.series]&&("Point"===t.currentMode||"Cluster"===t.currentMode)&&i&&i.id===t.element.id+"_Series_"+e.series){var n=this.generateStyle(i.id,t),s=document.querySelectorAll("."+n);sf.base.isNullOrUndefined(s)||(this.findTrackballElements(s,n),this.blurEffect(i.id,t,"True"===i.getAttribute("data-point").split(",")[8]))}switch(t.currentMode){case"Series":this.selection(t,e,this.getSeriesElements(e.series.toString(),t)),this.selectionComplete(t,e,t.selectionMode),this.blurEffect(i.id,t);break;case"Point":if(!isNaN(e.point)&&i){var o=[];o.push(i),this.selection(t,e,o),this.selectionComplete(t,e,t.selectionMode),this.blurEffect(i.id,t)}break;case"Cluster":isNaN(e.point)||(this.clusterSelection(t,e),this.selectionComplete(t,e,t.selectionMode),this.blurEffect(i.id,t))}},selection:function(e,t,i){if(i=i.filter((function(e){return null!==e})),"Lasso"!==e.currentMode&&(e.allowMultiSelection||-1!==e.currentMode.indexOf("Drag")||-1!==e.styleId.indexOf("highlight")||"None"===e.selectionMode||this.removeMultiSelectElements(e,e.selectedDataIndexes,t,i)),!sf.base.isNullOrUndefined(i[0])){this.isRectSeries(e.seriesTypes[t.series])&&"Histogram"!==e.seriesTypes[t.series]&&i[0].id&&(document.getElementById(i[0].id+"_Symbol")?i.push(this.findDOMElement(i[0].id+"_Symbol")):-1!==i[0].id.indexOf("SeriesGroup")&&document.getElementById(i[0].id.replace("SeriesGroup","SymbolGroup"))&&i.push(this.findDOMElement(i[0].id.replace("SeriesGroup","SymbolGroup"))));var n=void 0,s=i[0]&&(i[0].getAttribute("class")||""),o=i[0].parentNode&&(i[0].parentNode.getAttribute("class")||"");""!==s&&"Cluster"!==e.currentMode&&this.findTrackballElements(i,s),i[0]&&s.indexOf(this.getSelectionClass(i[0].id,e))>-1?this.removeStyles(i,e):i[0].parentNode&&o.indexOf(this.getSelectionClass(i[0].id,e))>-1?this.removeStyles([i[0].parentNode],e):(e.previousSelectedEle="None"!==e.highlightMode||e.enableHighlight?i:[],this.applyStyles(i,e),n=!0),e.styleId.indexOf("highlight")>0&&("None"!==e.highlightMode||e.enableHighlight)?this.addOrRemoveIndex(e.highlightDataIndexes,t,e,n):this.addOrRemoveIndex(e.selectedDataIndexes,t,e,n)}},resetPreviousHighlightIndex:function(e){e.previousHighlightedIndex=-1},isTargetChanged:function(e,t){var i=!1,n=!1;return-1==t.previousHighlightedIndex&&(i=!0),t.previousHighlightedIndex==e&&(n=!0),t.previousHighlightedIndex=e,!n||i},legendSelection:function(e,n){for(var s,o,r,a=e.target.id,l=window.sfBlazor.getCompInstance(n),d=[this.id+"_chart_legend_text_",this.id+"_chart_legend_shape_marker_",this.id+"_chart_legend_shape_",this.id+"_chart_legend_g_"],h="None",c=0;c<d.length;c++)if(!a.indexOf(d[c])){o=parseInt(a.split(d[c])[1]);break}if(l.currentSeriesIndex=o,r=a.indexOf("text")<=0?i.findDOMElement(a):null,"mousemove"===e.type){if(a.indexOf("text")&&(r=i.findDOMElement(a.replace("text","shape"))),r.hasAttribute("class")&&!l.enableHighlight&&l.styleId.indexOf("highlight")>0&&("None"!==l.highlightMode||l.enableHighlight)&&l.styleId.indexOf("selection")>1&&"None"!==l.selectionMode)return;"None"==(h=l.highlightMode)&&l.enableHighlight&&(h="Series")}if(this.isAlreadySelected(e,l)&&!sf.base.isNullOrUndefined(this.findDOMElement(l.element.id+"SeriesGroup"+o)))if(this.seriesStyle=this.generateStyle(l.element.id+"SeriesGroup"+o,l),s=document.querySelectorAll("."+this.seriesStyle),this.isSeriesMode="Series"==h,this.isBlurEffectNeeded=!0,s.length>0)this.removeSelection(l,o,s,this.seriesStyle,this.isBlurEffectNeeded);else{for(var p=document.getElementById(l.element.id+"SeriesCollection").querySelectorAll("[id*='SeriesGroup']"),u=0;u<p.length;u++)l.allowMultiSelection||u==o||(this.seriesStyle=this.generateStyle(p[u].id,l),s=document.querySelectorAll("."+this.seriesStyle),this.removeSelection(l,o,s,this.seriesStyle,this.isBlurEffectNeeded));var f=this.getSeriesElements(o.toString(),l);for(c=0;c<f.length;c++)this.checkSelectionElements(f[c],this.seriesStyle,!1,!0,o,l,f);l.isSeriesMode=!0;var m=new t(o,0);this.selection(l,m,f),this.isSeriesMode="Series"==this.selectionMode,this.blurEffect(l.element.id,l,!0)}},selectionComplete:function(e,t,i){var n,s,o,r,a,l,d,h,c,p,u=[],f=this.getSeriesElements(t.series.toString(),e);if("Cluster"===i){for(var m=0;m<f.length;m++)if(c=this.findDOMElement(f[m].id).getAttribute("data-point").split(",")[3],p=this.findDOMElement(f[m].id).getAttribute("data-point").split(",")[11],o=+this.findDOMElement(f[m].id).getAttribute("data-point").split(",")[10],"visible"===this.findDOMElement(f[m].id).getAttribute("visibility"))for(var g=0;g<e.selectedDataIndexes.length;g++)r=e.allowMultiSelection?e.selectedDataIndexes[g].point:t.point,a=+this.findDOMElement(f[m].id).getAttribute("data-point").split(",")[4],n=+this.findDOMElement(f[m].id).getAttribute("data-point").split(",")[0],s=+this.findDOMElement(f[m].id).getAttribute("data-point").split(",")[1],isNaN(r)||(d=s,h=n),"Category"===e.primaryXAxis?h=n.toLocaleString():"DateTime"===e.primaryXAxis&&(h=new Date(n)),"Indicator"!==p&&u.push({x:h,y:d,seriesIndex:a,pointIndex:r}),"RangeArea"!==c&&"SplineRangeArea"!==c||u.push({x:h,y:o,seriesIndex:a,pointIndex:r})}else if("Series"===i)if(e.allowMultiSelection)for(m=0;m<e.selectedDataIndexes.length;m++)a=e.selectedDataIndexes[m].series,u.push({seriesIndex:a});else a=e.selectedDataIndexes.length>0?e.selectedDataIndexes[0].series:0,u.push({seriesIndex:a});else if("Point"===i)for(m=0;m<e.selectedDataIndexes.length;m++)r=e.selectedDataIndexes[m].point,a=e.selectedDataIndexes[m].series,l=e.element.id+"_Series_"+a+"_Point_"+r,n=+this.findDOMElement(l).getAttribute("data-point").split(",")[0],s=+this.findDOMElement(l).getAttribute("data-point").split(",")[1],o=+this.findDOMElement(l).getAttribute("data-point").split(",")[10],isNaN(r)||(h=n,d=s,"Category"===e.primaryXAxis?h=n.toLocaleString():"DateTime"===e.primaryXAxis&&(h=new Date(n)),u.push({x:h,y:d,seriesIndex:a,pointIndex:r}));e.dotnetref.invokeMethodAsync("OnSelectionChange",u)}};return i}()},"./modules/sf-circulargauge.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.CircularGauge=function(){"use strict";var e=function(){function e(e,t,i,n){window.sfBlazor=window.sfBlazor,this.id=e,this.element=t,this.dotNetRef=n,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.render=function(){this.wireEvents()},e.prototype.wireEvents=function(){
/*! Bind the Event handler */
sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.gaugeOnMouseDown,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.gaugeOnMouseMove,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchEndEvent,this.gaugeOnMouseEnd,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchCancelEvent,this.gaugeOnMouseEnd,this),sf.base.EventHandler.add(this.element,"click",this.gaugeOnMouseClick,this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.gaugeOnResize.bind(this))},e.prototype.destroy=function(){this.dotNetRef=null},e.prototype.gaugeOnMouseClick=function(e){var t=["_Text_","_Shape_"],i=e.target.id;if(-1!==i.indexOf("Legend")&&this.options.legendToggleVisibility)for(var n=0;n<t.length;n++){var s=t[n];if(-1!==i.indexOf(s)){var o=parseInt(i.split(this.element.id+"_Legend_Axis_")[1].split(s)[0]),r=parseInt(i.split(this.element.id+"_Legend_Axis_")[1].split(s)[1]);sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerLegendClick",o,r)}}},e.prototype.gaugeOnResize=function(){var e,t;if(!sf.base.isNullOrUndefined(this.element)){var i=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(i)){i.style.display="none";var n=this.element.getBoundingClientRect();e=n.width,t=n.height,i.style.removeProperty("display")}}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerResizeEvent",e,t))},e.prototype.gaugeOnMouseDown=function(e){var t=document.getElementById(this.element.id+"_legend_pagenumber"),i=e.target.id,n=0,s=0;if("touchstart"===e.type?(n=e.touches[0].clientX,s=e.touches[0].clientY):(n=e.pageX,s=e.pageY),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseDownEvent",n,s),!sf.base.isNullOrUndefined(t)){var o=parseInt(t.textContent.split("/")[0],10);i.indexOf(this.element.id+"_legend_pageup")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)?this.dotNetRef.invokeMethodAsync("TriggerLegendPageClick",o-2,o-1):i.indexOf(this.element.id+"_legend_pagedown")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerLegendPageClick",o,o+1)}if((this.options.enablePointerDrag||this.options.enableRangeDrag)&&(-1!==event.target.id.indexOf("Pointer")||-1!==event.target.id.indexOf("_Range_"))){e.preventDefault(),this.isMouseDown=!0;var r=i.replace(this.element.id,"").split("_Axis_")[1];this.dragAxisIndex=+r[0],this.dragElementIndex=+r[r.length-1],sf.base.isNullOrUndefined(this.dotNetRef)||(-1!==event.target.id.indexOf("Pointer")?(this.isPointerDrag=!0,this.dotNetRef.invokeMethodAsync("TriggerDragStart",this.dragAxisIndex,this.dragElementIndex,0,"Pointer")):(this.isRangeDrag=!0,this.dotNetRef.invokeMethodAsync("TriggerDragStart",this.dragAxisIndex,0,this.dragElementIndex,"Range")))}},e.prototype.gaugeOnMouseMove=function(e){var t,i,n,s,o,r,a,l,d=e.target.id;if("touchmove"===e.type?(a=e.touches[0].clientX,l=e.touches[0].clientY):(a=e.clientX,l=e.clientY),-1!==d.indexOf("Legend")){var h=document.getElementById(d);this.options.legendToggleVisibility?h.setAttribute("cursor","pointer"):h.setAttribute("cursor","auto")}var c=document.getElementById(this.element.id+"_svg"),p=c.getBoundingClientRect(),u=(document.getElementById(this.element.id+"_AxesCollection").getBoundingClientRect(),this.element.getBoundingClientRect()),f=l-u.top-Math.max(p.top-u.top,0),m=a-u.left-Math.max(p.left-u.left,0),g=document.getElementById(this.element.id+"_Tooltip"),v=document.getElementById(this.element.id+"_Tooltip_Group"),b=(e.target.parentElement||e.target.parentNode).id;if(this.options.enableTooltip)if(u={left:Math.abs(u.left-p.left),top:Math.abs(u.top-p.top),width:p.width,height:p.height,x:Math.abs(u.left-p.left),y:Math.abs(u.top-p.top),bottom:0,right:0},-1===d.indexOf("Annotation")&&-1===b.indexOf("Annotation")||sf.base.isNullOrUndefined(this.options.tooltipType)||-1===this.options.tooltipType.indexOf("Annotation"))null!==g&&(g.style.visibility="hidden");else{var y=void 0;if(-1!==b.indexOf("ContentTemplate")){var w=b.split("_ContentTemplate")[0];y=w[w.length-1]}var C=document.getElementById(b);i=+(t=C.id.replace(this.element.id,"").split("_Axis_")[1])[0],n=+(-1===b.indexOf("ContentTemplate")?t[t.length-1]:y),n=isNaN(n)?0:n,s=!1,o=!1,r=!0;var S=void 0;if(null!==v&&(g.style.visibility="visible",null!==g.lastElementChild)){var E=this.element.id+"_Tooltip_Annotation_"+n+"_Content";S=document.getElementById(E),0!==document.querySelectorAll("#"+E).length&&(S.style.visibility="visible")}var x=C.getBoundingClientRect().width;sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",a+x/2,l,i,n,s,o,r,u)}if(this.performDragOperation(d,i,n,m,f,event),this.options.enableTooltip){if(-1!==d.indexOf("_Range_")&&!sf.base.isNullOrUndefined(this.options.tooltipType)&&-1!==this.options.tooltipType.indexOf("Range")&&!this.isMouseDown){i=+(t=d.replace(this.element.id,"").split("_Axis_")[1])[0],n=+t[t.length-1],s=!0,o=!1,r=!1;var O=0,T=0;if(this.options.showRangeTooltipAtMousePosition)O=(A=this.getMousePosition(a,l,c)).x,T=A.y;else O=a,T=l;null!==g&&(g.style.visibility="visible"),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",O,T,i,n,s,o,r,u)}if(-1!==d.indexOf("Pointer")||-1!==d.indexOf("_Range_")||-1!==d.indexOf("Annotation")||-1!==b.indexOf("Annotation")&&-1===d.indexOf("Annotation")){if(-1!==d.indexOf("Pointer")&&(sf.base.isNullOrUndefined(this.options.tooltipType)||-1!==this.options.tooltipType.indexOf("Pointer"))){i=+(t=d.replace(this.element.id,"").split("_Axis_")[1])[0],n=+t[t.length-1],s=!1,o=!0,r=!1;var A;O=0,T=0;if(this.options.showPointerTooltipAtMousePosition)O=(A=this.getMousePosition(a,l,c)).x,T=A.y;else O=a,T=l;null!==g&&(g.style.visibility="visible"),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",O,T,i,n,s,o,r,u)}}else(null!==g||v&&v.childElementCount>0)&&!this.isPointerDrag&&(g.style.visibility="hidden")}},e.prototype.performDragOperation=function(e,t,i,n,s,o){if(this.options.enablePointerDrag&&-1!==e.indexOf("Pointer")||this.options.enableRangeDrag&&-1!==e.indexOf("_Range_")||this.isMouseDown)if(this.isMouseDown){o.preventDefault();var r=new Date;if(null!==t&&null!==i&&this.isMouseDown){var a="touchmove"===o.type;this.isRangeDrag&&this.options.enableRangeDrag&&!sf.base.isNullOrUndefined(this.dotNetRef)?(document.getElementById(this.element.id+"_svg").setAttribute("cursor","grabbing"),this.dotNetRef.invokeMethodAsync("TriggerRangeDragEvent",n,s,this.dragAxisIndex,this.dragElementIndex,a)):this.isPointerDrag&&this.options.enablePointerDrag&&(sf.base.isNullOrUndefined(this.dragMilliseconds)||Math.abs(r.getMilliseconds()-this.dragMilliseconds)>100)&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(this.dragMilliseconds=r.getMilliseconds(),document.getElementById(this.element.id+"_svg").setAttribute("cursor","grabbing"),this.dotNetRef.invokeMethodAsync("TriggerDragEvent",n,s,this.dragAxisIndex,this.dragElementIndex,a))}}else document.getElementById(this.element.id+"_svg").setAttribute("cursor","pointer");else document.getElementById(this.element.id+"_svg").setAttribute("cursor","auto")},e.prototype.gaugeOnMouseEnd=function(e){var t,i=0,n=0;if(this.dragMilliseconds=null,"touchend"===e.type){var s=e;i=s.changedTouches[0].pageX,n=s.changedTouches[0].pageY,t=!0}else i=e.clientX,n=e.clientY;sf.base.isNullOrUndefined(this.dotNetRef)||(t||"mouseup"==e.type?this.dotNetRef.invokeMethodAsync("TriggerMouseUpEvent",i,n):this.dotNetRef.invokeMethodAsync("TriggerMouseLeaveEvent",i,n),this.isPointerDrag?this.dotNetRef.invokeMethodAsync("TriggerDragEnd",this.dragAxisIndex,this.dragElementIndex,0,"Pointer"):this.isRangeDrag&&this.dotNetRef.invokeMethodAsync("TriggerDragEnd",this.dragAxisIndex,0,this.dragElementIndex,"Range")),this.isMouseDown=!1,this.isPointerDrag=!1,this.isRangeDrag=!1},e.prototype.animationRangeProcess=function(e,t,i,n){var s,o=this;new sf.base.Animation({}).animate(e,{duration:t.duration,progress:function(i){s=o.animationRangeProgress(s,t,i,e)},end:function(s){if(!t.isClockWise){var r=t.endAngle;t.endAngle=t.minimumAngle,t.minimumAngle=r}if(0!=t.roundRadius&&t.end!=t.minimumAxis){var a=t.roundRadius,l=.25*t.roundRadius;t.end<=l&&(a=t.end<6?8:a,l=.25*(a/=2));var d=((t.radius-t.pointerWidth/2)*(t.minimumAngle*Math.PI/180)-a/l)/(t.radius-t.pointerWidth/2)*180/Math.PI,h=((t.radius-t.pointerWidth/2)*(t.endAngle*Math.PI/180)+a/l)/(t.radius-t.pointerWidth/2)*180/Math.PI,c=t.radius*(t.minimumAngle*Math.PI/180)/t.radius*180/Math.PI,p=t.radius*(t.endAngle*Math.PI/180)/t.radius*180/Math.PI;p=t.end>0?p:p-a/3,c=t.end>0?c:c+a/3,e.setAttribute("d",o.getRoundedPathArc({x:t.midPointX,y:t.midPointY},Math.floor(c),p,Math.floor(d),Math.floor(h),t.radius,t.pointerWidth,t.pointerWidth,Math.abs(t.roundRadius)))}else e.setAttribute("d",o.getCompletePathArc({x:t.midPointX,y:t.midPointY},t.minimumAngle,t.endAngle,t.radius,t.innerRadius,t.isClockWise));o.options.isAnimationEvent&&t.start!=t.end&&!sf.base.isNullOrUndefined(o.dotNetRef)&&o.dotNetRef.invokeMethodAsync("AnimatePointer",i,n,t.end)}})},e.prototype.animationProcess=function(e,t,i,n){var s,o=this;new sf.base.Animation({}).animate(e,{duration:t.duration,progress:function(i){s=o.animationProgress(s,t,i,e)},end:function(s){e.setAttribute("transform","rotate("+t.endAngle+","+t.midPointX+","+t.midPointY+")"),o.options.isAnimationEvent&&t.start!=t.end&&!sf.base.isNullOrUndefined(o.dotNetRef)&&o.dotNetRef.invokeMethodAsync("AnimatePointer",i,n,t.end)}})},e.prototype.animationProgress=function(e,t,i,n){return e=t.start<t.end||Math.round(t.startAngle)===Math.round(t.endAngle)?t.isClockWise||t.start===t.end?t.endAngle-t.startAngle:t.endAngle-t.startAngle-360:t.isClockWise?t.endAngle-t.startAngle-360:t.endAngle-t.startAngle,n.style.animation="None",n.setAttribute("transform","rotate("+(-e*Math.cos(i.timeStamp/i.duration*(Math.PI/2))+e+t.startAngle)+","+t.midPointX+","+t.midPointY+")"),e},e.prototype.animationRangeProgress=function(e,t,i,n){var s,o,r;return e=t.start<t.end||Math.round(t.startAngle)===Math.round(t.endAngle)?t.isClockWise||t.start===t.end?t.endAngle-t.startAngle:t.endAngle-t.startAngle-360:t.isClockWise?t.endAngle-t.startAngle-360:t.endAngle-t.startAngle,n.style.animation="None",t.roundRadius<=0&&(s=-e*Math.cos(i.timeStamp/t.duration*(Math.PI/2))+e+t.startAngle),t.isClockWise?t.roundRadius>0&&t.end!=t.minimumAxis?(o=-e*Math.cos(i.timeStamp/t.duration*(Math.PI/2))+e+Math.floor(t.startAngle),r=-e*Math.cos(i.timeStamp/t.duration*(Math.PI/2))+e+Math.floor(t.startAngle+Math.abs(t.roundRadius)/2),n.setAttribute("d",this.getRoundedPathArc({x:t.midPointX,y:t.midPointY},Math.floor(t.minimumAngle),o+1e-4,Math.floor(t.oldStart),Math.floor(r+1e-4),t.radius,t.pointerWidth,t.pointerWidth,Math.abs(t.roundRadius)))):n.setAttribute("d",this.getCompletePathArc({x:t.midPointX,y:t.midPointY},t.minimumAngle,s+1e-4,t.radius,t.innerRadius,!1)):t.roundRadius>0&&t.end!=t.minimumAxis?(o=-e*Math.cos(i.timeStamp/t.duration*(Math.PI/2))+e+Math.floor(t.startAngle),r=-e*Math.cos(i.timeStamp/t.duration*(Math.PI/2))+e+Math.floor(t.startAngle-Math.abs(t.roundRadius)/2),n.setAttribute("d",this.getRoundedPathArc({x:t.midPointX,y:t.midPointY},o,t.minimumAngle+1e-4,r,Math.floor(t.oldStart+Math.abs(t.roundRadius)),t.radius,t.pointerWidth,t.pointerWidth,Math.abs(t.roundRadius)))):n.setAttribute("d",this.getCompletePathArc({x:t.midPointX,y:t.midPointY},s,t.minimumAngle+1e-4,t.radius,t.innerRadius,!1)),e},e.prototype.pointerAnimation=function(e){for(var t=document.getElementById(e.id),i=t.id.replace(this.element.id,"").split("_Axis_")[1],n=+i[0],s=+i[i.length-1],o=sf.base.Browser.isIE?t.childNodes.length:t.childElementCount,r=0;r<o;r++){var a=sf.base.Browser.isIE?t.childNodes[r]:t.children[r];"#comment"!==a.nodeName&&("RangeBar"===e.pointerType?this.animationRangeProcess(a,e,n,s):e.isMarkerShapeText?this.performTextAnimation(a,e,n,s):this.animationProcess(a,e,n,s))}},e.prototype.performTextAnimation=function(e,t,i,n){var s,o,r,a,l=this,d=Math.abs(t.start-t.end);new sf.base.Animation({}).animate(e,{duration:t.duration,progress:function(i){a=i.timeStamp/t.duration,r=t.end>t.start?t.start+a*d:t.start-a*d,s=l.getAngleFromValue(r,t.maximumAxis,t.minimumAxis,t.axisStartAngle,t.axisEndAngle,t.isClockWise),o=l.getLocationFromAngle(s,t.radius,{x:t.midPointX,y:t.midPointY}),e.setAttribute("transform","rotate("+(s+90)+", "+o.x+", "+o.y+")"),e.setAttribute("x",String(o.x)),e.setAttribute("y",String(o.y)),e.style.visibility="visible"},end:function(r){s=l.getAngleFromValue(t.pointerValue,t.maximumAxis,t.minimumAxis,t.axisStartAngle,t.axisEndAngle,t.isClockWise),o=l.getLocationFromAngle(s,t.radius,{x:t.midPointX,y:t.midPointY}),e.setAttribute("transform","rotate("+(s+90)+","+o.x+","+o.y+")"),e.setAttribute("x",String(o.x)),e.setAttribute("y",String(o.y)),l.options.isAnimationEvent&&t.start!=t.end&&!sf.base.isNullOrUndefined(l.dotNetRef)&&l.dotNetRef.invokeMethodAsync("AnimatePointer",i,n,t.end)}})},e.prototype.getAngleFromValue=function(e,t,i,n,s,o){var r;return s-=this.isCompleteAngle(n,s)?1e-4:0,n-=90,s-=90,r=o?(e-i)*(this.getDegreeValue(n,s)/(t-i))+n:(r=s-(e-i)*(this.getDegreeValue(n,s)/(t-i)))<0?360+r:r,r=Math.round(r)>=360?r-360:Math.round(r)<0?360+r:r},e.prototype.isCompleteAngle=function(e,t){var i=t-e;return i=i<=0?i+360:i,0!=Math.floor(i/360)},e.prototype.getDegreeValue=function(e,t){var i=t-e;return i<0?i+360:i},e.prototype.getLocationFromAngle=function(e,t,i){var n=e*Math.PI/180;return{x:Math.cos(n)*t+i.x,y:Math.sin(n)*t+i.y}},e.prototype.getCompletePath=function(e,t,i,n,s,o,r){return"M "+e.x+" "+e.y+" A "+i+" "+i+" 0 "+r+" 1 "+t.x+" "+t.y+" L "+s.x+" "+s.y+" A "+o+" "+o+" 0 "+r+" 0 "+n.x+" "+n.y+" Z"},e.prototype.getRoundedPath=function(e,t,i,n,s,o,r,a,l,d,h,c){return"M "+e.x+" "+e.y+" A "+l+" "+l+" 0 "+c+" 1 "+t.x+" "+t.y+" C "+i.x+" "+i.y+" "+n.x+" "+n.y+" "+a.x+" "+a.y+" A "+h+" "+d+" 0 "+c+" 0 "+r.x+" "+r.y+" C "+o.x+" "+o.y+" "+s.x+" "+s.y+" "+e.x+" "+e.y+" Z"},e.prototype.getCompletePathArc=function(e,t,i,n,s,o){i-=this.isCompleteAngle(t,i)&&!o&&t!=i?1e-4:0;var r=this.getDegreeValue(t,i),a=r<180&&r>0||r>360&&r<540||t>630?0:1;return this.getCompletePath(this.getLocationFromAngle(t,n,e),this.getLocationFromAngle(i,n,e),n,this.getLocationFromAngle(t,s,e),this.getLocationFromAngle(i,s,e),s,a)},e.prototype.getRoundedPathArc=function(e,t,i,n,s,o,r,a,l){i-=this.isCompleteAngle(t,i)?1e-4:0;var d=this.getDegreeValue(t,i),h=o-(r=o<r?o:r),c=o-(a=o<a?o:a),p=o-(r+a)/2,u=180;l&&(s+=o>=r?l/o:0,n-=o>=r?l/o:0,t+=o>=r?l/2:0,i-=o>=r?l/2:0,u+=l);var f=d<=u&&d>0||d>2*(u-l)&&d<3*(u-l)||t>3*(u-l)+(u-l)/2?0:1;return this.getRoundedPath(this.getLocationFromAngle(t,o,e),this.getLocationFromAngle(i,o,e),this.getLocationFromAngle(s,o,e),this.getLocationFromAngle(s,c,e),this.getLocationFromAngle(n,o,e),this.getLocationFromAngle(n,h,e),this.getLocationFromAngle(t,h,e),this.getLocationFromAngle(i,c,e),o,p,p,f)},e.prototype.getMousePosition=function(e,t,i){var n=i.getBoundingClientRect(),s=i.ownerDocument.defaultView.pageXOffset,o=i.ownerDocument.defaultView.pageYOffset,r=i.ownerDocument.documentElement.clientTop,a=i.ownerDocument.documentElement.clientLeft;return{x:e-(n.left+s-a),y:t-(n.top+o-r)}},e}();return{initialize:function(t,i,n,s){new e(t.id,t,i,n).render();var o={height:0,width:0,isIE:!1};if(s){var r=this.getContainerSize(t.id,n);o.height=r.height,o.width=r.width}return o.isIE=sf.base.Browser.isIE,o},getContainerSize:function(e,t){var i=document.getElementById(e),n=i.clientWidth;return{height:i.clientHeight,width:n}},animationProcess:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element)for(var s=JSON.parse(t.pointerAnimation),o=0;o<s.length;o++)n.pointerAnimation(s[o])},setPointerDragStatus:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enablePointerDrag=t)},setRangeDragStatus:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enableRangeDrag=t)},setLegendToggle:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.legendToggleVisibility=t)},getElementBounds:function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return{width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}return null},dispose:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.destroy()}}}()},"./modules/sf-colorpicker.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ColorPicker=function(){"use strict";var e=function(){function e(e,t,i,n){this.dataId=e,this.element=t,this.dotnetRef=i,window.sfBlazor.setCompInstance(this),n&&(this.addScrollEvents(!0),this.setPaletteWidth(this.element.querySelector(".e-container"),!1))}return e.prototype.getOffset=function(e){var t=e.querySelector(".e-hsv-container");if(!t)return{IsDevice:sf.base.Browser.isDevice};var i=t.getBoundingClientRect(),n=t.querySelector(".e-hsv-color"),s=t.querySelector(".e-handler");return s&&s.focus(),{Left:i.left,Top:i.top,Width:i.width,Height:i.height,Right:i.right,ClientLeft:n.offsetLeft,ClientTop:n.offsetTop,ClientWidth:n.offsetWidth,ClientHeight:n.offsetHeight,IsDevice:sf.base.Browser.isDevice}},e.prototype.setOffset=function(e,t){var i=this.getOffset(e);t&&!sf.base.Browser.isDevice&&(this.setZIndex(this.element,t,".e-split-colorpicker"),this.setZIndex(this.element,t,".e-dropdown-btn")),i&&this.dotnetRef.invokeMethodAsync("SetOffset",i)},e.prototype.setZIndex=function(e,t,i){var n=e.querySelector(i);n&&(n.style.zIndex=t+1+"")},e.prototype.removeZIndex=function(){var e=this.element.querySelector(".e-split-colorpicker"),t=this.element.querySelector(".e-dropdown-btn");e&&(e.style.zIndex=""),t&&(t.style.zIndex="")},e.prototype.setPaletteWidth=function(e,t,i){if(sf.base.Browser.isDevice&&!sf.base.isNullOrUndefined(i)){var n=e.querySelector(".e-colorpicker.e-modal");n&&(n.style.zIndex=i-1+"",document.body.insertBefore(n,e.parentElement),n.style.display="")}if(e.querySelector(".e-hsv-container"))e.style.width="";else{var s=parseInt(getComputedStyle(e).borderBottomWidth,10);e.style.width=e.children[0].offsetWidth+s+s+"px";var o=e.querySelector(".e-selected-value");o&&(o.style.width="100%",(o=e.querySelector(".e-switch-ctrl-btn"))&&(o.style.width="100%"))}if(t){var r=window.sfBlazor.getCompInstance(this.dataId);sf.base.isNullOrUndefined(r)||r.setPosition(!0)}},e.prototype.scrollHandler=function(e){this.element.parentElement?this.setOffset(this.element):sf.base.EventHandler.remove(e.target,"scroll",this.scrollHandler)},e.prototype.addScrollEvents=function(e){for(var t=0,i=sf.popups.getScrollableParent(this.element);t<i.length;t++){var n=i[t];e?sf.base.EventHandler.add(n,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(n,"scroll",this.scrollHandler)}},e.prototype.focusIn=function(e,t){if(t){var i=e.querySelector(".e-container");i&&(i.classList.contains("e-color-palette")?this.setFocus(".e-palette"):this.setFocus(".e-handler"))}else this.setFocus(".e-split-colorpicker")},e.prototype.setFocus=function(e){var t=this.element.querySelector(e);t&&t.focus()},e.prototype.paletteKeyDown=function(e,t){var i=e.target;if(i.classList.contains("e-palette")){var n,s,o,r=[].slice.call(sf.base.selectAll(".e-tile",i)),a=r.filter((function(e){return e.classList.contains("e-selected")})).pop(),l=i.parentElement;switch(!e.altKey&&e.keyCode){case 39:e.preventDefault(),o=(n=a?r[this.tilePosition(r,a,t?-1:1)]:r[t?r.length-1:0]).getAttribute("aria-label"),this.keySelectionChanges(n,l,o);break;case 37:e.preventDefault(),o=(n=a?r[this.tilePosition(r,a,t?1:-1)]:r[t?0:r.length-1]).getAttribute("aria-label"),this.keySelectionChanges(n,l,o);break;case 38:e.preventDefault(),o=(n=r[s=a?this.tilePosition(r,a,-10):0]?r[s]:r[s-10]).getAttribute("aria-label"),this.keySelectionChanges(n,l,o);break;case 40:e.preventDefault(),r[s=a?this.tilePosition(r,a,10):r.length-1]?n=r[s]:(s%=r.length,n=r[s+=r[r.length-1].parentElement.childElementCount]),o=n.getAttribute("aria-label"),this.keySelectionChanges(n,l,o);break;case 13:if(e.preventDefault(),a){a.getAttribute("aria-label");this.dotnetRef.invokeMethodAsync("Close")}}}},e.prototype.tilePosition=function(e,t,i){var n=(e=Array.prototype.slice.call(e)).length,s=10-e[n-1].parentElement.childElementCount,o=e.indexOf(t);return(o+=i)<0?o+=n+s:o%=n+s,o},e.prototype.keySelectionChanges=function(e,t,i){this.removeTileSelection(t),this.addTileSelection(e),this.dotnetRef.invokeMethodAsync("Click",i)},e.prototype.removeTileSelection=function(e){[].slice.call(sf.base.selectAll(".e-selected",e.children[0])).forEach((function(e){e.classList.remove("e-selected"),e.setAttribute("aria-selected","false")}))},e.prototype.addTileSelection=function(e){e.classList.add("e-selected"),e.setAttribute("aria-selected","true")},e}();return{initialize:function(t,i,n,s){return sf.base.isNullOrUndefined(i)?null:(new e(t,i,n,s),window.sfBlazor.getCompInstance(t).getOffset(i))},getOffset:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?null:(i.setPaletteWidth(t,!0),i.getOffset(t))},focusIn:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.focusIn(t,i)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.addScrollEvents(!1)}}}()},"./modules/sf-contextmenu.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ContextMenu=function(){"use strict";function e(t,i,n,s){void 0===s&&(s=0);var o=t.children[i];return s===t.childElementCount?-1:((o.classList.contains("e-separator")||o.classList.contains("e-disabled")||o.classList.contains("e-menu-hide"))&&(i=n?i===t.childElementCount-1?0:i+1:0===i?t.childElementCount-1:i-1,s++),((o=t.children[i]).classList.contains("e-separator")||o.classList.contains("e-disabled")||o.classList.contains("e-menu-hide"))&&(i=e(t,i,n)),i)}var t="e-menu-parent",i="CloseMenuAsync",n="mousedown touchstart",s=function(){function s(e,t,i,n,s,o,r,a){this.dataId=e,this.element=t,this.target=i,this.filter=n,this.showOn=s,this.closeOn=o,this.dotnetRef=a,this.enableScrolling=r,window.sfBlazor.setCompInstance(this),this.addContextMenuEvent(),this.addEventListener()}return s.prototype.addContextMenuEvent=function(e){var t;if(void 0===e&&(e=!0),this.target){var i=sf.base.selectAll(this.target);if(i.length){for(var n=0,s=i.length;n<s;n++)if(t=i[n],e)sf.base.Browser.isIos?new sf.base.Touch(t,{tapHold:this.touchHandler.bind(this)}):sf.base.EventHandler.add(t,this.showOn,this.cmenuHandler,this);else if(sf.base.Browser.isIos){var o=sf.base.getInstance(t,sf.base.Touch);o&&o.destroy()}else sf.base.EventHandler.remove(t,this.showOn,this.cmenuHandler);if(sf.base.isNullOrUndefined(this.targetElement)&&(this.targetElement=t),e){sf.base.EventHandler.add(this.targetElement,"scroll",this.scrollHandler,this);for(var r=0,a=sf.popups.getScrollableParent(this.targetElement);r<a.length;r++){var l=a[r];sf.base.EventHandler.add(l,"scroll",this.scrollHandler,this)}}else{var d=void 0;this.targetElement.parentElement?(sf.base.EventHandler.remove(this.targetElement,"scroll",this.scrollHandler),d=sf.popups.getScrollableParent(this.targetElement)):d=sf.popups.getScrollableParent(t);for(var h=0,c=d;h<c.length;h++){var p=c[h];sf.base.EventHandler.remove(p,"scroll",this.scrollHandler)}this.targetElement=null}}}},s.prototype.scrollHandler=function(){if(sf.base.select("."+t,this.element)&&(this.dotnetRef.invokeMethodAsync(i,0,!1,!0,!1),this.enableScrolling)){var e=this;setTimeout((function(){e.destroyScroll()}),100)}},s.prototype.vscrollHandler=function(){var e=this.element.querySelector(".e-menu-parent");null!=e&&e.classList.contains("e-transparent")&&e.classList.remove("e-transparent")},s.prototype.touchHandler=function(e){this.cmenuHandler(e.originalEvent)},s.prototype.keyDownHandler=function(i){var n=i.target.classList;(n.contains("e-menu-item")||n.contains(t))&&i.preventDefault(),function(t,i,n,s){if(40===n||38===n){var o=void 0,r=void 0,a=void 0;i.classList.contains("e-menu-parent")?((a=(r=i).querySelector(".e-menu-item.e-focused"))?(o=Array.prototype.indexOf.call(r.children,a),o=40===n?o===r.childElementCount-1?0:o+1:0===o?r.childElementCount-1:o-1):o=0,o=e(r,o,40===n)):i.classList.contains("e-menu-item")&&(a=(r=i.parentElement).querySelector(".e-menu-item.e-focused"),o=Array.prototype.indexOf.call(r.children,a||i),o=e(r,o=40===n?o===r.childElementCount-1?0:o+1:0===o?r.childElementCount-1:o-1,40===n)),r&&-1!==o&&r.children[o].focus()}else if(((t.classList.contains("e-rtl")?39===n:37===n)||27===n||13===n&&sf.base.closest(i,".e-menu-container"))&&(i.classList.contains("e-ul")||i.classList.contains("e-menu-item")&&!i.parentElement.classList.contains("e-contextmenu"))){var l=void 0;s&&(l=sf.base.select(s));r=i.classList.contains("e-ul")?i:i.parentElement;var d=sf.base.closest(r,".e-menu-vscroll"),h=void 0,c=d?d.previousElementSibling:r.previousElementSibling;if(!l||c&&13!==n){var p=sf.base.closest(r,".e-hamburger");h=p?sf.base.select(".e-menu-item.e-selected",p):sf.base.select(".e-menu-item.e-selected",c)}else h=sf.base.select(".e-menu-item.e-selected",l),(d=sf.base.select(".e-menu-vscroll",t))&&l.blazor__instance.destroyScroll("none");h&&h.focus()}}(this.element,i.target,i.keyCode,this.menuId)},s.prototype.cmenuHandler=function(e){if(this.cmTarget=e.target,this.filter){for(var t=!1,i=this.filter.split(" "),s=0,o=i.length;s<o;s++)if(sf.base.closest(e.target,i[s])){t=!0;break}if(!t)return}e.preventDefault(),e.stopPropagation();var r=e.changedTouches?e.changedTouches[0].clientX:e.clientX,a=e.changedTouches?e.changedTouches[0].clientY:e.clientY;if("mouseover"===this.showOn){var l=this.cmTarget.getBoundingClientRect();l.right>r&&r>l.right-5&&(r-=10),l.bottom>a&&a>l.bottom-5&&(a-=10)}this.closeOn!==n&&(sf.base.EventHandler.remove(e.target,this.showOn,this.cmenuHandler),"mouseleave"===this.closeOn?sf.base.EventHandler.add(e.target,this.closeOn,this.mouseLeaveHandler,this):sf.base.EventHandler.add(document,this.closeOn,this.delegateMouseDownHandler,this)),this.dotnetRef.invokeMethodAsync("OpenContextMenuAsync",Math.ceil(r),Math.ceil(a))},s.prototype.mouseLeaveHandler=function(e,t){var n=this.cmTarget.getBoundingClientRect(),s=n.top<e.clientY&&n.bottom-3>e.clientY;if(!(n.left<e.clientX&&n.right>e.clientX)||!s||t){if(this.dotnetRef.invokeMethodAsync(i,0,!1,!0,!1),this.enableScrolling){var o=this;setTimeout((function(){o.destroyScroll()}),100)}sf.base.EventHandler.remove(this.cmTarget,this.closeOn,this.mouseLeaveHandler),sf.base.EventHandler.add(this.cmTarget,this.showOn,this.cmenuHandler,this)}},s.prototype.clickHandler=function(e){if(e&&(sf.base.EventHandler.add(this.cmTarget,this.showOn,this.cmenuHandler,this),"mouseleave"===this.closeOn?sf.base.EventHandler.remove(this.cmTarget,this.closeOn,this.mouseLeaveHandler):sf.base.EventHandler.remove(document,this.closeOn,this.delegateMouseDownHandler)),this.enableScrolling){var t=this;setTimeout((function(){t.destroyScroll(null,!0)}),100)}},s.prototype.contextMenuPosition=function(e,t,i,n,s,o){var r=this.hideMenu(!0);if(r){this.subMenuOpen=!1,this.setBlankIconStyle(r,i);var a=r.getBoundingClientRect(),l=this.getMenuWidth(r,a.width,i);if(n&&sf.base.Browser.isDevice)return r.style.width=Math.ceil(l)+"px",void(r.style.visibility="");if(s){if(t+a.height>document.documentElement.clientHeight){var d=document.documentElement.clientHeight-a.height-20;d>document.documentElement.clientTop&&(t=d)}if(e+l>document.documentElement.clientWidth){var h=document.documentElement.clientWidth-l-20;h>document.documentElement.clientLeft&&(e=h)}}var c=(r=this.updateScroll(o,r)).classList.contains("e-menu-parent")?r:sf.base.select(".e-menu-parent",r);this.element.style.top=Math.ceil(t+1)+pageYOffset+"px",this.element.style.left=Math.ceil(e+1)+pageXOffset+"px",r.style.width=Math.ceil(l)+"px",this.element.style.zIndex=sf.popups.getZindexPartial(this.element).toString(),r.style.visibility="",c.style.visibility="",r.focus()}},s.prototype.setBlankIconStyle=function(e,t){var i=[].slice.call(e.getElementsByClassName("e-blankicon")),n=t?{padding:"paddingRight",cssSelector:"padding-right",margin:"marginLeft"}:{padding:"paddingLeft",cssSelector:"padding-left",margin:"marginRight"};if([].slice.call(e.querySelectorAll('.e-menu-item[style*="'+n.cssSelector+'"]:not(.e-blankicon)')).forEach((function(e){e.style[n.padding]=""})),i.length){var s=e.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)"),o=s.querySelector(".e-menu-icon");if(o){var r=getComputedStyle(o),a=parseInt(r.fontSize,10);parseInt(r.width,10)&&parseInt(r.width,10)>a&&(a=parseInt(r.width,10));var l=a+parseInt(r[n.margin],10)+parseInt(getComputedStyle(s)[n.padding],10)+"px";i.forEach((function(e){e.style[n.padding]=l}))}}},s.prototype.getMenuWidth=function(e,t,i){var n=e.getElementsByClassName("e-caret")[0];return n&&(t+=parseInt(getComputedStyle(n)[i?"marginRight":"marginLeft"],10)),t<120?120:t},s.prototype.addEventListener=function(){this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),this.delegateMouseOverHandler=this.mouseOverHandler.bind(this),this.closeOn===n&&sf.base.EventHandler.add(document,n,this.delegateMouseDownHandler,this),sf.base.EventHandler.add(document,"mouseover",this.delegateMouseOverHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this)},s.prototype.removeEventListener=function(){sf.base.EventHandler.remove(document,n,this.delegateMouseDownHandler),sf.base.EventHandler.remove(document,"mouseover",this.delegateMouseOverHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler)},s.prototype.mouseDownHandler=function(e){var s=e.target;if("DIV"!==s.tagName&&"SPAN"!==s.tagName||!(s.className.indexOf("scroll")>-1||s.className.indexOf("arrow")>-1))if(document.getElementById(this.element.id)){if(!sf.base.closest(e.target,"#"+this.element.id)&&(sf.base.isNullOrUndefined(this.menuId)||!sf.base.closest(e.target,this.menuId))&&sf.base.select("."+t,this.element)){if(this.dotnetRef.invokeMethodAsync(i,0,!1,!0,!1),this.enableScrolling){var o=this;setTimeout((function(){o.destroyScroll()}),100)}this.closeOn!==n&&(sf.base.EventHandler.remove(document,this.closeOn,this.delegateMouseDownHandler),sf.base.EventHandler.add(this.cmTarget,this.showOn,this.cmenuHandler,this))}}else this.removeEventListener()},s.prototype.isHavingChild=function(e){return e.className.indexOf("e-menu-item")<0&&(e=e.closest(".e-menu-item")),!!(e&&e.className.indexOf("e-menu-item")>-1&&e.className.indexOf("e-menu-caret-icon")>-1)},s.prototype.mouseOverHandler=function(e){var n=e.target;if("DIV"!==n.tagName&&"SPAN"!==n.tagName||!(n.className.indexOf("scroll")>-1||n.className.indexOf("arrow")>-1))if(document.getElementById(this.element.id)){var s=[].slice.call(sf.base.selectAll("."+t,this.element));if(s.length){var o=sf.base.closest(n,".e-scroll-nav");if(!this.isHavingChild(n)&&this.enableScrolling){var r=this;setTimeout((function(){for(var e=[].slice.call(sf.base.selectAll(".e-menu-vscroll",this.element)),t=0;t<e.length;t++)n&&n.className.indexOf("e-menu-item")<0&&(n=n.closest(".e-menu-item")),n&&n.parentElement!=e[t].querySelectorAll(".e-menu-parent")[0]&&t==e.length-1&&r.destroyScroll(e[t])}),100)}if(this.subMenuOpen&&(s.length>1||!sf.base.isNullOrUndefined(this.menuId)&&!o)){if(!sf.base.closest(n,"#"+this.element.id)&&(sf.base.isNullOrUndefined(this.menuId)||!sf.base.closest(n,this.menuId))||o){var a=1;if(!sf.base.isNullOrUndefined(this.menuId)&&(a=0,o&&(a=s.indexOf(sf.base.select("."+t,o.parentElement))+1)===s.length))return;if(this.dotnetRef.invokeMethodAsync(i,a,!1,!0,!1),this.enableScrolling){var l=this;setTimeout((function(){for(var e=a;e<s.length;e++)l.destroyScroll(s[e])}),100)}"mouseleave"===this.closeOn&&(this.mouseLeaveHandler(e),sf.base.EventHandler.remove(this.menuTarget,this.closeOn,this.menuMouseLeave)),sf.base.isNullOrUndefined(this.menuId)||sf.base.closest(n,".e-scroll-nav")||this.destroyMenuScroll(null)}sf.base.isNullOrUndefined(this.menuId)||!sf.base.closest(n,"#"+this.element.id)&&!sf.base.closest(n,this.menuId)||!sf.base.closest(n,".e-menu-item")||sf.base.closest(n,".e-selected")||this.destroyMenuScroll(sf.base.closest(n,"."+t))}else"mouseleave"===this.closeOn&&n.classList.contains("e-menu-item")&&(this.menuTarget=n.parentElement,sf.base.EventHandler.add(this.menuTarget,this.closeOn,this.menuMouseLeave,this));if(!this.openAsMenu){var d=document.activeElement;if(!sf.base.closest(d,"#"+this.element.id)&&s.length&&"BODY"==d.tagName){var h=this.getLastMenu();h&&h.focus()}}}}else this.removeEventListener()},s.prototype.menuMouseLeave=function(e){var t=this.menuTarget.getBoundingClientRect(),i=t.top<e.clientY&&t.bottom>e.clientY;t.left<e.clientX&&t.right>e.clientX&&i||(this.mouseLeaveHandler(e,!0),sf.base.EventHandler.remove(this.menuTarget,this.closeOn,this.menuMouseLeave))},s.prototype.destroyMenuScroll=function(e){if(sf.base.select(".e-menu-vscroll",this.element)){var t=window.sfBlazor.getCompInstance(this.dataId);sf.base.isNullOrUndefined(t)||t.destroyScroll("none",e)}},s.prototype.hideMenu=function(e){var i;if(e){if(!(i=sf.base.select("."+t,this.element))||sf.base.isNullOrUndefined(this.element.parentElement))return null;this.element.parentElement!==document.body&&document.body.appendChild(this.element)}else{var n=sf.base.selectAll("."+t,this.element);if(n.length<2)return null;i=n[n.length-1]}return i.style.width="",i.style.visibility="hidden",i.classList.remove("e-transparent"),i},s.prototype.subMenuPosition=function(e,i,n,s,o,r){if(e){var a=sf.base.selectAll("."+t,this.element),l=a[a.length-2].querySelector(".e-menu-item.e-selected").getBoundingClientRect(),d=this.element.getBoundingClientRect(),h=e.classList.contains(t)?e:sf.base.select("."+t,e);this.setBlankIconStyle(h,i);var c,p,u=h.getBoundingClientRect(),f=this.getMenuWidth(h,u.width,i);i?(p=parseInt(getComputedStyle(h).borderWidth,10),c=l.left-f-d.left):c="mouseleave"==this.closeOn?l.right-d.left-10:l.right-d.left;var m=l.top-d.top;if(i)l.left-p-f<document.documentElement.clientLeft&&l.right+f<document.documentElement.clientWidth&&(c=l.right-d.left);else if(l.right+f>document.documentElement.clientWidth){var g=l.left-f;g>document.documentElement.clientLeft&&(c=g-d.left,"mouseleave"==this.closeOn&&(c=g-d.left+10))}var v=o||u.height;if(l.top+v>document.documentElement.clientHeight){var b=document.documentElement.clientHeight-v-20;b>document.documentElement.clientTop&&(m=b-d.top)}r&&(e=this.updateScroll(o,e)).className.indexOf("scroll")>-1&&(h.style.left="0px",h.style.top="0px"),this.subMenuOpen=!n,e.style.left=Math.ceil(c)+"px",e.style.top=Math.ceil(m)+"px",e.style.width=Math.ceil(f)+"px",h.style.visibility="";var y=h.querySelector(".e-menu-item.e-focused");y?y.focus():h.focus(),s&&(this.openAsMenu=!0)}},s.prototype.updateScroll=function(e,t){if(this.enableScrolling){this.destroyScroll(t),e>0&&t&&(t=sf.navigations.addScrolling(sf.base.createElement,this.element,t,"vscroll",!1,e));var i=this.element.querySelector(".e-vscroll-bar");i&&sf.base.EventHandler.add(i,"scroll",this.vscrollHandler,this)}return t},s.prototype.destroyScroll=function(e,t){sf.base.selectAll(".e-menu-vscroll",this.element).forEach((function(i){(t&&!i.querySelector("ul")||!t)&&sf.navigations.destroyScroll(sf.base.getInstance(i,sf.navigations.VScroll),i,e)}))},s.prototype.getLastMenu=function(){var e=sf.base.selectAll("."+t,this.element);return e.length?e[e.length-1]:null},s.prototype.onPropertyChanged=function(e,t){switch(e){case"Target":this.addContextMenuEvent(!1),this.target=t,this.addContextMenuEvent();break;case"Filter":this.filter=t;break;case"ShowOn":this.addContextMenuEvent(!1),this.showOn=t,this.addContextMenuEvent()}},s.prototype.destroy=function(e){this.removeEventListener(),this.addContextMenuEvent(!1),e&&e.parentElement&&e.previousElementSibling!==this.element&&e.parentElement.insertBefore(this.element,e),e&&e.parentElement||!this.element.parentElement||this.element.parentElement!==document.body||document.body.removeChild(this.element)},s.prototype.updateProperty=function(e,t){t&&(this.menuId="#"+t.id),this.subMenuOpen=!e},s}();return{initialize:function(e,t,i,n,o,r,a,l){sf.base.isNullOrUndefined(t)||new s(e,t,i,n,o,r,a,l)},contextMenuPosition:function(e,t,i,n,s,o,r){var a=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(a)||a.contextMenuPosition(t,i,n,s,o,r)},subMenuPosition:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o)){var r=o.hideMenu();o.subMenuPosition(r,t,i,n,s,!0)}},onPropertyChanged:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.onPropertyChanged(t,i)},click:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.clickHandler(t)},destroy:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.destroy(t)}}}()},"./modules/sf-dashboard-layout.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DashboardLayout=function(){"use strict";var e=function(){function e(e,t){this.cellAspectRatio=1,this.mOffX=0,this.mOffY=0,this.maxTop=9999,this.maxRows=100,this.mouseX=0,this.mouseY=0,this.minTop=0,this.minLeft=0,this.allowPushing=!0,this.allowResizing=!1,this.panelElements=[],this.renderedElement=[],this.allowDragging=!1,this.isRenderComplete=!1,this.allowFloating=!1,this.overlapElement=[],this.panelsSizeY=0,this.shouldRestrict=!1,this.overlapElementClone=[],this.addPanelCalled=!1,this.rows=0,this.cellSpacing=[],this.resizeCalled=!1,this.movePanelCalled=!1,this.isResizing=!1,this.resizeTimeCount=0,this.isChanged=!1,this.isDragged=!1,this.isRefreshCalled=!1,this.changedId=[],this.element=e,this.element.blazorInstances=this,this.dotnetRef=t}return e.prototype.preRender=function(e){this.dragCollection=[],this.renderedElement=[],this.overlapSubElementClone=[],this.panels=[],this.sortedArray=[],this.allItems=[],this.oldRowCol={},this.cellSpacing=[],this.checkCollision=[],this.cloneObject={},this.maxColumnValue=this.columns,this.mainElement=null,e&&this.getProperty(e),this.isMediaQuery=this.checkMediaQuery(),this.calculateCellSizeValue()},e.prototype.initialize=function(e){this.preRender(e),sf.base.isNullOrUndefined(this.panels)&&(this.panels=[]);for(var t=0;t<this.element.querySelectorAll(".e-panel").length;t++)this.panelElements.push(this.element.querySelectorAll(".e-panel")[t]);this.panelsInitialModel=this.cloneModels(this.panels),this.renderDashBoardCells(this.panels),!this.allowDragging||this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches||this.enableDraggingContent(this.panelElements),this.checkColumnValue=this.maxColumnValue,this.isRenderComplete=!0,this.bindEvents();var i=this.calculateCellSize(),n=this.contentHeight();return JSON.stringify({parentOffset:i,enableMediaQuery:this.isMediaQuery,panelHeaderModel:n})},e.prototype.clearPanelElements=function(){this.panelElements=[]},e.prototype.calculateCellSize=function(){return this.cellSizeValue=[],this.cellSizeValue[0]=this.element.parentElement&&this.element.parentElement.offsetWidth,this.cellSizeValue},e.prototype.checkMediaQuery=function(){return this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches},e.prototype.getProperty=function(e){this.mediaQuery=e.MediaQuery,this.allowDragging=e.AllowDragging,this.columns=e.Columns,this.allowFloating=e.AllowFloating,this.rows=e.MaxRowValue,this.cellSpacing=e.CellSpacing,this.cellAspectRatio=e.CellAspectRatio,this.allowResizing=e.AllowResizing,this.panels=e.Panels,this.draggableHandle=e.DraggableHandle},e.prototype.movePanel=function(e,t,i){this.movePanelCalled=!0,this.panelsInitialModel=this.cloneModels(this.panels);var n=this.getCellInstance(e),s=document.getElementById(e),o=this.getCellInstance(s.id);this.mainElement=s,this.startRow=this.dragRow=o.row,this.startCol=this.dragColumn=o.col,this.updatePanelPosition(o.id,i,t),this.updateOldRowColumn(),this.updatePanelLayout(s,n),this.updatePanels(),this.updateCloneArrayObject(),this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.movePanelCalled=!1,this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",this.panels)},e.prototype.removePanel=function(e){this.panelsSizeY=0;for(var t=this.renderedElement.length-1;t>=0;t--)if(this.renderedElement[t].id===e){this.renderedElement.splice(t,1);break}for(t=0;t<this.panelElements.length;t++)this.panelElements[t].id===e&&this.panelElements.splice(t,1),this.panels[t].id===e&&(this.panels.splice(t,1),this.updateOldRowColumn(),this.sortedPanel());this.updatePanels(),this.updateCloneArrayObject(),this.panelsInitialModel=this.cloneModels(this.panels)},e.prototype.renderDashBoardCells=function(e){if(this.element.querySelectorAll(".e-panel").length>0||this.panels.length>0){this.updateOldRowColumn();for(var t=0;t<this.panels.length;t++){if(this.columns<this.panels[t].col||this.columns<this.panels[t].col+this.panels[t].sizeX){var i=this.columns-this.panels[t].sizeX;this.updatePanelPosition(this.panels[t].id,i<0?0:i,this.panels[t].row)}this.renderedElement.push(this.panelElements[t]);var n=this.renderCell(e[t]);this.updatePanelLayout(n,this.panels[t])}this.updatePanels(),this.updateCloneArrayObject();var s=this.checkForChanges();s.length>0&&this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",s)}},e.prototype.resizePanel=function(e,t,i){var n=this.getCellInstance(e);this.resizeCalled=!0;var s=document.getElementById(e);this.updatePanelSize(n.id,t,i),this.mainElement=s,this.updatePanelLayout(s,n),this.updatePanels(),this.resizeCalled=!1,this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",this.panels)},e.prototype.removeAll=function(){this.removeAllCalled=!0;for(var e=0;e<this.panelElements.length;e++)this.panelElements.splice(e,1);for(e=this.renderedElement.length-1;e>=0;e--)this.renderedElement.splice(e,1);this.rows=0,this.sortedPanel(),this.sortedArray=[],this.overlapElementClone=[],this.overlapElement=[],this.overlapSubElementClone=[],this.panelElements=[],this.oldRowCol={},this.cloneObject={},this.panels=[],this.updateCloneArrayObject(),this.removeAllCalled=!1},e.prototype.onPropertyChange=function(e){if(e.AllowDragging===this.allowDragging&&e.DraggableHandle==this.draggableHandle||(this.allowDragging=e.AllowDragging,this.draggableHandle=e.DraggableHandle,this.checkDragging(this.dragCollection)),e.AllowResizing!==this.allowResizing&&(this.allowResizing=e.AllowResizing),e.AllowFloating!==this.allowFloating)this.allowFloating=e.AllowFloating,this.moveItemsUpwards(),this.updatePanels(),this.updateOldRowColumn(),this.updateCloneArrayObject();else if(e.Columns!==this.columns){this.columns=e.Columns,this.calculateCellSizeValue();for(var t=0;t<this.panels.length;t++){if(this.columns<this.panels[t].col||this.columns<this.panels[t].col+this.panels[t].sizeX){var i=this.columns-this.panels[t].sizeX;this.updatePanelPosition(this.panels[t].id,i<0?0:i,this.panels[t].row)}this.updatePanelLayout(document.getElementById(this.panels[t].id),this.panels[t])}this.renderDashBoardCells(this.panels),this.updatePanels(),this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",this.panels)}this.getProperty(e)},e.prototype.updatePanelLayout=function(e,t){var i=this;this.collisionChecker={};var n=[],s=[];if((n=this.mainElement&&this.isRenderComplete?this.resetLayout(t):this.collisions(t.row,t.col,t.sizeX,t.sizeY,e)).length>0)if(n=this.updatedModels(n,t,e),!sf.base.isNullOrUndefined(this.startRow)&&this.checkForSwapping(n,e))this.swapItems(n,e,t);else for(var o=0;o<n.length;o++){var r=this.getCellInstance(n[o].id);if(this.checkingElement=n[o],this.spacedRowValue=null,this.spacedColumnValue=null,this.adjustmentAvailable(r.row,r.col,r.sizeY,r.sizeX,e)&&!sf.base.isNullOrUndefined(this.spacedColumnValue)){if(this.updatePanelPosition(r.id,this.spacedColumnValue,this.spacedRowValue),this.oldRowCol[n[o].id]={row:this.spacedRowValue,col:this.spacedColumnValue},n[o].setAttribute("data-row",this.spacedRowValue.toString()),n[o].setAttribute("data-col",this.spacedColumnValue.toString()),this.topAdjustable&&this.allowFloating&&(this.updatePanels(),this.updateCloneArrayObject()),this.spacedRowValue=null,o<n.length)continue}else s.push(n[o])}s.length>0&&(s.forEach((function(e){-1===i.overlapElement.indexOf(e)&&i.overlapElement.push(e)})),this.overlapElement&&-1!==this.overlapElement.indexOf(e)&&this.overlapElement.splice(this.overlapElement.indexOf(e),1),s.length>0&&(this.updateRowColumn(t.row,this.overlapElement,e),this.checkForCompletePushing())),this.isSubValue||this.sortedPanel()},e.prototype.addPanel=function(e){this.panelsSizeY=0,e.minSizeX||(e.minSizeX=1),e.minSizeY||(e.minSizeY=1),this.panels.push(e);var t=this.renderCell(e);if(this.panelElements.push(t),this.renderedElement.push(t),this.panelsInitialModel=this.cloneModels(this.panels),this.oldRowCol[e.id]={row:e.row,col:e.col},this.cloneObject[e.id]={row:e.row,col:e.col},this.updateOldRowColumn(),this.element.insertAdjacentElement("afterbegin",t),this.addPanelCalled=!0,this.checkMediaQuery()||(this.mainElement=t,this.checkCollision||(this.checkCollision=[]),this.updatePanelLayout(t,e)),this.addPanelCalled=!1,this.allowDragging&&this.mediaQuery&&!this.checkMediaQuery()&&this.enableDraggingContent([document.getElementById(e.id)]),this.allowFloating&&(this.mainElement=null,this.moveItemsUpwards()),this.updateOldRowColumn(),this.sortedPanel(),this.updateCloneArrayObject(),this.allowResizing)for(var i=0;i<t.querySelectorAll(".e-resize").length;i++){var n="msie"===sf.base.Browser.info.name?"mousedown pointerdown":"mousedown";sf.base.EventHandler.add(t.querySelectorAll(".e-resize")[i],n,this.downResizeHandler,this),"msie"!==sf.base.Browser.info.name&&sf.base.EventHandler.add(t.querySelectorAll(".e-resize")[i],"touchstart",this.touchDownResizeHandler,this)}this.dotnetRef.invokeMethodAsync("UpdatePanelContentHeight",this.panels,this.contentHeight())},e.prototype.checkForSwapping=function(e,t){if(!this.mainElement||0===e.length)return!1;var i,n=parseInt(e[0].getAttribute("data-row"),10);if(this.startRow<n?i=1:this.startRow>n&&(i=0),!this.swapAvailability(e,t))return!1;for(var s=!1,o=0;o<e.length;o++)if(e.length>=1&&this.cloneObject[this.mainElement.id].row===this.oldRowCol[this.mainElement.id].row)return!1;for(var r=0===i?this.getCellInstance(this.mainElement.id).row+this.getCellInstance(this.mainElement.id).sizeY:this.startRow,a=0;a<e.length;a++){var l=this.getCellInstance(e[a].id),d=this.getCellInstance(t.id),h=[];if(1===l.sizeY&&-1===h.indexOf(e[a]))h.push(e[a]);else if(l.sizeY>1&&-1===h.indexOf(e[a]))if(1===i&&d.row===this.cloneObject[l.id].row+l.sizeY-1)h.push(e[a]);else{if(0!==i||d.row!==this.cloneObject[l.id].row)return!1;h.push(e[a])}if(l.sizeY<=d.sizeY&&-1===h.indexOf(e[a])&&h.push(e[a]),h.push(this.mainElement),this.collisions(r,l.col,l.sizeX,l.sizeY,h).length>0)return s=!1;a===e.length-1&&(s=!0)}return s},e.prototype.swapAvailability=function(e,t){for(var i=!0,n=this.getCellInstance(t.id),s=0;s<e.length;s++)for(var o=this.getCellInstance(e[s].id),r=1;r<n.sizeY;r++){var a=[];if(a.push(t),a.push(e[s]),this.collisions(n.row+r,o.col,o.sizeX,o.sizeY,a).length>0)return i=!1,!1}return i},e.prototype.swapItems=function(e,t,i){var n,s=this,o=[];o.push(t);var r=this.getCellInstance(e[0].id).row;this.startRow<r?n=1:this.startRow>r&&(n=0);var a=0===n?r+i.sizeY:this.startRow;if(!this.movePanelCalled){var l=this.getCellInstance(e[0].id);this.updatePanelPosition(i.id,i.col,0===n?r:a+l.sizeY)}for(var d=0;d<e.length;d++)o.push(e[d]),this.updatePanelPosition(e[d].id,this.getCellInstance(e[d].id).col,a);this.updatePanelPosition(t.id,this.getCellInstance(t.id).col,i.row),this.setPanelPosition(this.shadowEle,i.row,i.col);for(var h=0;h<this.panels.length;h++)this.oldRowCol[this.panels[h].id]={row:this.panels[h].row,col:this.panels[h].col};this.startRow=this.dragRow=i.row,this.updateOldRowColumn(),o.forEach((function(e){s.cloneObject[e.id]=s.oldRowCol[e.id];for(var t=s.getCellInstance(e.id),i=0;i<s.sortedArray.length;i++)if(s.sortedArray[i])for(var n=0;n<s.sortedArray[i].length;n++)s.sortedArray[i][n]===e&&(s.sortedArray[i][n]=void 0);s.sortedArray[t.row]||(s.sortedArray[t.row]=[]),s.sortedArray[t.row][t.col]=e,s.cloneArray=s.sortedArray}))},e.prototype.resetLayout=function(e){var t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement);if(!this.mainElement||this.addPanelCalled||this.resizeCalled||this.movePanelCalled)return t;if(this.mainElement&&this.oldRowCol!==this.cloneObject)for(var i=0;i<this.panels.length;i++){var n=document.getElementById(this.panels[i].id);if(n!==this.mainElement){var s=this.cloneObject[n.id].row,o=this.cloneObject[n.id].col;this.updatePanelPosition(n.id,o,s),n.setAttribute("data-col",o.toString()),n.setAttribute("data-row",s.toString()),this.updateOldRowColumn()}}return this.sortedArray=this.cloneArray,t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement),this.sortedPanel(),this.updateOldRowColumn(),this.checkCollision&&this.checkCollision.length>0&&-1===t.indexOf(this.checkCollision[0])&&this.cloneObject[this.checkCollision[0].id].row===e.row&&t.push(this.checkCollision[0]),t},e.prototype.updatedModels=function(e,t,i){var n=this,s=[];return this.mainElement||this.sortedPanel(),e.forEach((function(o){n.checkingElement=o;var r=n.getCellInstance(o.id),a=!n.adjustmentAvailable(r.row,r.col,r.sizeY,r.sizeX,i);if(r.sizeX>1&&a)for(var l=r.row;l<t.row+t.sizeY;l++){n.collisions(l,r.col,r.sizeX,r.sizeY,o).forEach((function(t){e.indexOf(t)>=0&&-1===s.indexOf(t)&&s.push(t)}))}})),s.forEach((function(t){s.indexOf(t)>=0&&e.splice(e.indexOf(t),1)})),e},e.prototype.checkForCompletePushing=function(){for(var e=0;e<this.panels.length;e++)if(this.collisionChecker[this.panels[e].id]&&null!==this.collisionChecker[this.panels[e].id]){this.overlapElement=[this.collisionChecker[this.panels[e].id].ele];var t=this.panels[e].id;this.updateRowColumn(this.collisionChecker[t].row,this.overlapElement,this.collisionChecker[t].srcEle)}},e.prototype.updateRowColumn=function(e,t,i){if(i){var n=this.getCellInstance(i.id),s=n.sizeY,o=n.row;this.overlapElementClone=(this.overlapElement&&this.shouldRestrict,this.overlapElement);for(var r=0;r<this.overlapElementClone.length;r++){if(0===this.overlapElementClone.length)return;for(var a=0;a<this.overlapElementClone.length;a++)this.collisionChecker[this.overlapElementClone[a].id]={ele:this.overlapElementClone[a],row:e,srcEle:i};var l=o+s,d=this.getCellInstance(this.overlapElementClone[r].id),h=d.sizeY,c=d.col,p=d.sizeX,u=void 0,f=void 0;if(-1===this.overlapSubElementClone.indexOf(i)&&this.overlapSubElementClone.push(i),-1===this.overlapSubElementClone.indexOf(this.overlapElementClone[r])&&this.overlapSubElementClone.push(this.overlapElementClone[r]),h>1||p>1){var m=this.getCellInstance(this.overlapElementClone[r].id);u=m.col;for(var g=document.getElementById(m.id),v=m.row;v<o+s;v++){this.isSubValue=!0;var b=this.getCellInstance(m.id);g.setAttribute("data-row",(o+s).toString()),this.updatePanelPosition(b.id,b.col,m.row+1),this.updateCollisionChecked(g),this.oldRowCol[g.id]={row:m.row,col:u};var y=this.getCellInstance(g.id),w=y.row,C=y.col,S=y.sizeX,E=y.sizeY,x=[];x.push(g),x.push(i),f=this.collisions(w,C,S,E,x),this.mainElement&&-1!==f.indexOf(this.mainElement)&&f.splice(f.indexOf(this.mainElement),1),this.collisionPanel(f,C,w,g)}this.isSubValue=!1}else{this.addPanelCalled&&(this.addPanelCalled=!1);var O=[];O.push(this.overlapElementClone[r]),O.push(i),f=this.collisions(l,c,p,h,O),this.mainElement&&-1!==f.indexOf(this.mainElement)&&f.splice(f.indexOf(this.mainElement),1);var T=this.getCellInstance(this.overlapElementClone[r].id);u=T.col,this.updatePanelPosition(T.id,u,l),this.updateCollisionChecked(this.overlapElementClone[r]),this.oldRowCol[this.overlapElementClone[r].id]={row:l,col:u},this.collisionPanel(f,u,l,this.overlapElementClone[r])}}}},e.prototype.updateCollisionChecked=function(e){for(var t=0;t<Object.keys(this.collisionChecker).length;t++)this.collisionChecker[e.id]=null},e.prototype.collisionPanel=function(e,t,i,n){var s=this;if(e.length>0){this.overlapElement=[],this.shouldRestrict=!0,e.forEach((function(e){s.overlapElement.push(e)}));for(var o=this.getCellInstance(n.id).row,r=0;r<this.overlapElement.length;r++)this.updateRowColumn(o,this.overlapElement,n);this.shouldRestrict=!1}else{if(this.addPanelCalled||this.sortedPanel(),this.overlapSubElementClone.length>0)for(var a=0;a<this.overlapSubElementClone.length;a++){var l=this.getCellInstance(this.overlapSubElementClone[a].id),d=l.row,h=l.col,c=l.sizeX,p=l.sizeY,u=this.collisions(d,h,c,p,this.overlapSubElementClone);this.mainElement&&-1!==u.indexOf(this.mainElement)&&u.splice(u.indexOf(this.mainElement),1),u.forEach((function(e){s.overlapElement.push(e)})),u.length>0&&this.updateRowColumn(d,this.overlapElement,this.overlapSubElementClone[a])}this.overlapSubElementClone=[]}},e.prototype.collisions=function(e,t,i,n,s){var o,r=[];i&&n||(i=n=1),!s||s instanceof Array||(s=[s]);for(var a=0;a<n;++a)for(var l=0;l<i;++l)!(o=this.getPanel(e+a,t+l,s))||s&&-1!==s.indexOf(document.getElementById(o.id))||-1!==r.indexOf(document.getElementById(o.id))||r.push(document.getElementById(o.id));return r},e.prototype.getPanel=function(e,t,i){!i||i instanceof Array||(i=[i]);for(var n=1;e>-1;){for(var s=1,o=t;o>-1;){var r=this.sortedArray[e];if(r){var a=r[o];if(!sf.base.isNullOrUndefined(a)){var l=this.getCellInstance(a.id);if(a&&(!i||-1===i.indexOf(a))&&l.sizeX>=s&&l.sizeY>=n)return a}}++s,--o}--e,++n}return null},e.prototype.renderCell=function(e){return document.getElementById(e.id)},e.prototype.sortedPanel=function(){this.sortedArray=[];for(var e=0,t=this.renderedElement.length;e<t;++e)this.sortItem(this.renderedElement[e])},e.prototype.updatePanels=function(){this.moveItemsUpwards(),this.updateOldRowColumn(),this.sortedPanel()},e.prototype.setRootHeight=function(e){this.element.style.height=e+"px"},e.prototype.sortItem=function(e,t,i){this.overlapElement=[];var n=this.getCellInstance(e.id),s=n.col,o=n.row;if(this.sortedArray[o]||(this.sortedArray[o]=[]),this.sortedArray[o][s]=e,void 0!==e&&void 0!==t&&void 0!==i){if(void 0!==this.oldRowCol[e.id]&&null!==this.oldRowCol[e.id].row&&void 0!==this.oldRowCol[e.id].col){var r=this.sortedArray[this.oldRowCol[e.id].row];sf.base.isNullOrUndefined(r)||this.oldRowCol[e.id]&&r[this.oldRowCol[e.id].col]===e&&(delete r[this.oldRowCol[e.id].col],this.updateOldRowColumn(),this.sortedPanel())}this.oldRowCol[e.id].row=t,this.oldRowCol[e.id].row=i,this.sortedArray[o]||(this.sortedArray[o]=[]),this.sortedArray[o][s]=e,-1===this.allItems.indexOf(e)&&this.allItems.push(e);var a=this.getCellInstance(e.id);this.updatePanelPosition(a.id,i,t),this.sortedPanel()}},e.prototype.updateOldRowColumn=function(){this.oldRowCol={};for(var e=0;e<this.panels.length;e++){var t=this.panels[e].id;if(document.getElementById(t)){var i=this.panels[e].row,n=this.panels[e].col;this.oldRowCol[this.panels[e].id]={row:i,col:n}}}},e.prototype.getCellInstance=function(e){for(var t,i=0;i<this.panels.length;i++)if(this.panels[i].id===e){t=this.panels[i];break}return t},e.prototype.getRowElements=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},e.prototype.adjustmentAvailable=function(e,t,i,n,s){this.leftAdjustable=void 0,this.rightAdjustable=void 0;var o,r=!1,a=[],l=[];this.topAdjustable=void 0;var d=this.getCellInstance(s.id),h=d.sizeX,c=d.col;if(-1===(l=this.getRowElements(this.collisions(e,0,this.columns,i,[]))).indexOf(s)&&l.push(s),(o=this.leftWardsSpaceChecking(l,t,s)).length>0?(this.leftAdjustable=this.isLeftAdjustable(o,s,e,t,n,i),this.spacedColumnValue!==c-this.getCellInstance(this.checkingElement.id).sizeX&&(this.leftAdjustable=!1),this.leftAdjustable?this.rightAdjustable=!1:(this.leftAdjustable=!1,a=this.rightWardsSpaceChecking(l,t,s),this.rightAdjustable=a.length>0&&this.isRightAdjustable(a,s,e,t,n,i),this.spacedColumnValue!==h+c&&(this.rightAdjustable=!1))):(a=this.rightWardsSpaceChecking(l,t,s),this.rightAdjustable=a.length>0&&this.isRightAdjustable(a,s,e,t,n,i),this.spacedColumnValue!==h+c&&(this.rightAdjustable=!1),this.rightAdjustable&&(this.leftAdjustable=!1)),!this.rightAdjustable&&!this.leftAdjustable&&e>0){var p=this.getCellInstance(s.id).row,u=!1;this.startRow!==p&&(u=!0);for(var f=e;f>=0;f--){var m=this.getCellInstance(s.id).sizeY>1&&u?this.checkingElement:s;f!==p&&f===p-i&&0===this.collisions(f,t,n,i,m).length&&(u=!1,this.topAdjustable=!0,this.spacedRowValue=sf.base.isNullOrUndefined(this.spacedRowValue)?f:this.spacedRowValue,this.spacedColumnValue=t)}}return(this.rightAdjustable||this.leftAdjustable||this.topAdjustable)&&(r=!0,sf.base.isNullOrUndefined(this.spacedRowValue)&&(this.spacedRowValue=e)),r},e.prototype.updatePanelPosition=function(e,t,i){if(this.panels.length>0)for(var n=0;n<this.panels.length;n++)this.panels[n].id===e&&(sf.base.isNullOrUndefined(t)||(this.panels[n].col=t,this.panels[n].column=t),sf.base.isNullOrUndefined(i)||(this.panels[n].row=i));this.isDragged||this.isRefreshCalled||this.updatePanelProps(e)},e.prototype.rightWardsSpaceChecking=function(e,t,i){var n=this,s=[],o=[];if(e.forEach((function(e){var i=n.getCellInstance(e.id),o=i.col,r=i.sizeX;if(t<n.columns&&o>=t)if(r>1)for(var a=o;a<o+r;a++)s.push(a);else s.push(o)})),s.length>0)for(var r=t+1;r<=this.columns-1;r++)-1===s.indexOf(r)&&r!==t&&-1===o.indexOf(r)&&o.push(r);var a=this.getOccupiedColumns(i);return a.forEach((function(e){e>t&&-1!==o.indexOf(e)&&o.splice(o.indexOf(e),1)})),this.getOccupiedColumns(this.checkingElement).forEach((function(e){e>n.getCellInstance(i.id).col&&-1===a.indexOf(e)&&-1===o.indexOf(e)&&o.push(e)})),o=o.sort((function(e,t){return e-t}))},e.prototype.isRightAdjustable=function(e,t,i,n,s,o){var r;if(1===s&&1===o&&e.length>0)this.spacedColumnValue=e[0],r=!0;else if(s>1&&1===o)r=this.isXSpacingAvailable(e,s);else if(o>1)if(1===s){var a=void 0;if(e.length>=1&&(a=!0),a)for(var l=0;l<e.length;l++){for(var d=this.collisions(i,e[l],s,o,this.checkingElement),h=0;h<d.length;h++){this.getCellInstance(t.id).col!==e[l]&&d.splice(d.indexOf(d[h]),1)}if(0===d.length)return r=!0,this.spacedColumnValue=e[l],r;r=!1}}else r=this.replacable(e,s,i,o,t);return r},e.prototype.isXSpacingAvailable=function(e,t){for(var i=!1,n=[],s=0;s<e.length;s++)if(e[s+1]-e[s]==1||e[s+1]-e[s]==-1){if(n.push(e[s]),2===t&&n.push(e[s+1]),s===e.length-2&&(n.push(e[s+1]),n.length>t&&n.splice(-1)),n.length===t)return i=!0,this.spacedColumnValue=n.sort((function(e,t){return e-t}))[0],this.spacedColumnValue<0&&(this.spacedColumnValue=1),i}else n=[];return i},e.prototype.leftWardsSpaceChecking=function(e,t,i){var n=this,s=[],o=[];if(e.forEach((function(e){var i=n.getCellInstance(e.id),s=i.col,r=i.sizeX;if(t<=n.columns&&s<=t)if(r>1)for(var a=s;a<s+r;a++)o.push(a);else o.push(s)})),o.length>0)for(var r=0;r<=t;r++)-1===o.indexOf(r)&&r!==t&&-1===s.indexOf(r)&&s.push(r);var a=this.getOccupiedColumns(i);return a.forEach((function(e){e<t&&-1!==s.indexOf(e)&&s.splice(s.indexOf(e),1)})),this.getOccupiedColumns(this.checkingElement).forEach((function(e){e<n.getCellInstance(i.id).col&&-1===a.indexOf(e)&&-1===s.indexOf(e)&&s.push(e)})),s=(s=s.sort((function(e,t){return e-t}))).reverse()},e.prototype.isLeftAdjustable=function(e,t,i,n,s,o){var r;if(1===s&&1===o&&e.length>0)this.spacedColumnValue=e[0],r=!0;else if(s>1&&1===o)r=this.isXSpacingAvailable(e,s);else if(o>1)if(1===s){var a=void 0;if(e.length>=1&&(a=!0),a)for(var l=0;l<e.length;l++){if(0===this.collisions(i,e[l],s,o,this.checkingElement).length)return this.spacedColumnValue=e[l],r=!0;r=!1}}else r=this.replacable(e,s,i,o,t);return r},e.prototype.replacable=function(e,t,i,n,s){for(var o,r=[],a=0;a<e.length;a++){if(this.isXSpacingAvailable(e,t)){var l=[];if(l.push(this.checkingElement),l.push(s),0===r.length)return o=!0,this.spacedColumnValue=this.spacedColumnValue,o;o=!1}}return o},e.prototype.getOccupiedColumns=function(e){for(var t=[],i=this.getCellInstance(e.id),n=i.sizeX,s=i.col,o=s;o<s+n&&o<=this.columns;o++)t.push(o);return t},e.prototype.moveItemsUpwards=function(){if(this.allowFloating)for(var e=0,t=this.sortedArray.length;e<t;++e){var i=this.sortedArray[e];if(i)for(var n=0,s=i.length;n<s;++n){var o=i[n];o&&this.moveItemUpwards(o)}}},e.prototype.moveItemUpwards=function(e){if(this.allowFloating&&e!==this.mainElement){var t=this.getCellInstance(e.id).col,i=parseInt(e.getAttribute("data-sizeY"),10),n=parseInt(e.getAttribute("data-sizeX"),10),s=null,o=null,r=parseInt(e.getAttribute("data-row"),10)-1,a=this.getCellInstance(e.id);for(r+1!=a.row&&(r=a.row);r>-1;){if(0!==this.collisions(r,t,n,i,e).length)break;s=r,o=t,--r}null!==s&&this.sortItem(e,s,o)}},e.prototype.updatePanelProps=function(e){if(this.isRenderComplete){var t=this.checkForChanges();this.panelsInitialModel=this.cloneModels(this.panels),t.length>0&&(this.isChanged&&-1===this.changedId.indexOf(e)&&this.changedId.push(e),this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",t))}},e.prototype.enableDraggingContent=function(e){for(var t=this,i=0;i<e.length;i++){var n=[".e-resize",".e-drag-restrict"],s=e[i];this.dragobj=new sf.base.Draggable(s,{preventDefault:!1,clone:!1,dragArea:this.element,isDragScroll:!0,handle:this.draggableHandle?this.draggableHandle:".e-panel",abort:n,dragStart:this.onDraggingStart.bind(this),dragStop:function(e){var i=t.getCellInstance(t.mainElement.id);t.allowPushing&&t.collisions(i.row,i.col,i.sizeX,i.sizeY,t.mainElement).length>0?(t.setHolderPosition(e),t.updatePanelPosition(i.id,i.col,i.row),t.updatePanelLayout(t.mainElement,i)):t.updatePanelPosition(i.id,i.col,i.row),t.mainElement=null;var n=t.getPanelBase(e);t.shadowEle&&sf.base.detach(t.shadowEle),sf.base.removeClass([t.element],["e-prevent"]),sf.base.removeClass([e.element],["e-dragging"]),t.shadowEle=null,e.element.classList.remove("e-dragging");var s=t.getRowColumnDragValues(e)[0],o=t.getRowColumnDragValues(e)[1],r=t.getCellInstance(e.element.id);if(t.allowPushing&&0===t.collisions(s,o,r.sizeX,r.sizeY,document.getElementById(n.id)).length)t.oldRowCol[e.element.id].row=s,t.oldRowCol[e.element.id].col=o,t.updatePanelPosition(e.element.id,o,s),t.sortedPanel();else{var a=t.getCellInstance(e.element.id);t.updatePanelPosition(a.id,a.col,a.row),t.sortedPanel()}var l=t.getCellInstance(e.element.id);t.setPanelPosition(e.element,l.row,l.col),t.updatePanels(),t.updateCloneArrayObject(),t.updatePanelProps(i.id),t.isDragged=!1,t.dragStopEventArgs={event:e.event,element:e.element},t.dotnetRef.invokeMethodAsync("UpdateMaximumRow",e.element.id,t.changedId),t.isChanged=!1,t.changedId=[],t.resizeEvents(),t.updateDragArea()},drag:function(e){t.draggedEventArgs={event:e.event,element:e.element,target:sf.base.closest(e.target,".e-panel")},t.onDragStart(e)}}),-1===this.dragCollection.indexOf(this.dragobj)&&this.dragCollection.push(this.dragobj)}},e.prototype.getPanelBase=function(e){for(var t,i=0;i<this.panelElements.length;i++)this.panelElements[i].id===(e.element&&e.element.id||e)&&(t=this.panelElements[i]);return t},e.prototype.updateCloneArrayObject=function(){this.cloneArray=this.sortedArray,this.cloneObject=JSON.parse(JSON.stringify(this.oldRowCol))},e.prototype.getRowColumnDragValues=function(e){var t=parseFloat(e.element.style.top),i=parseFloat(e.element.style.left);return[Math.round(t/(this.getCellSize()[1]+this.cellSpacing[1])),Math.round(i/(this.getCellSize()[0]+ +this.cellSpacing[0]))]},e.prototype.onDragStart=function(e){var t,i,n,s=n=this.getRowColumnDragValues(e)[1],o=this.getRowColumnDragValues(e)[0];if(!(s<0||o<0)){var r=this.getCellInstance(e.element.id);if(this.dotnetRef.invokeMethodAsync("SetDragPanelHeight",r.row,r.sizeY,1),this.updateDragArea(),this.allowPushing&&(this.updatePanelPosition(r.id,s,o),t=this.oldRowCol[e.element.id].col,i=this.oldRowCol[e.element.id].row,this.oldRowCol[e.element.id]={row:o,col:s},this.updateOldRowColumn(),(this.dragColumn!==t||this.dragRow!==i)&&(e.element.setAttribute("data-row",o.toString()),e.element.setAttribute("data-col",s.toString()),this.setHolderPosition(e),this.dragRow=i,this.dragColumn=t,this.startCol!==t&&(this.startRow=i),this.startRow!==i&&(this.startCol=t),this.allowPushing))){this.mainElement=e.element;var a=r;this.checkCollision=this.collisions(a.row,a.col,a.sizeX,a.sizeY,e.element),r.col>=this.checkColumnValue&&(this.checkCollision=[]),this.updatePanelLayout(e.element,r),this.moveItemsUpwards(),this.updatePanelProps(r.id)}this.oldRowCol[e.element.id].row===o&&this.oldRowCol[e.element.id].col===s||(this.updatePanelPosition(r.id,s,o),this.updatePanelProps(r.id)),this.startCol!==n&&(this.startCol=this.dragColumn=t,this.moveItemsUpwards()),this.allowPushing||this.setHolderPosition(e)}},e.prototype.bindEvents=function(){this.refreshListener=this.refresh.bind(this),sf.base.EventHandler.add(window,"resize",this.refreshListener),this.resizeEvents()},e.prototype.refresh=function(){if(this.panelsSizeY=0,this.updateDragArea(),this.isRefreshCalled=!0,this.isMediaQuery=this.checkMediaQuery(),!this.checkMediaQuery()){if(this.element.classList.contains("e-responsive")){sf.base.removeClass([this.element],["e-responsive"]);for(var e=0;e<this.element.querySelectorAll(".e-panel").length;e++){var t=this.element.querySelectorAll(".e-panel")[e];if(0!=this.panels.length){var i=this.getCellInstance(t.id),n=i.row,s=i.col;this.updatePanelPosition(i.id,s,n)}}}this.element.classList.add("e-responsive"),this.calculateCellSizeValue()}this.dotnetRef.invokeMethodAsync("CalculateSize",this.calculateCellSize(),this.isMediaQuery,!0,this.contentHeight()),this.resizeEvents(),this.checkDragging(this.dragCollection),this.isRefreshCalled=!1},e.prototype.checkDragging=function(e){for(var t=0;t<e.length;t++)e[t].destroy();!this.checkMediaQuery()&&this.allowDragging&&this.enableDraggingContent(this.panelElements)},e.prototype.resizeEvents=function(){if(this.allowResizing)for(var e=this.element.querySelectorAll(".e-panel .e-resize"),t=0;t<e.length;t++){var i="msie"===sf.base.Browser.info.name?"mousedown pointerdown":"mousedown";sf.base.EventHandler.add(e[t],i,this.downResizeHandler,this),"msie"!==sf.base.Browser.info.name&&sf.base.EventHandler.add(e[t],"touchstart",this.touchDownResizeHandler,this)}},e.prototype.touchDownResizeHandler=function(e){this.downHandler(e),this.lastMouseX=e.changedTouches[0].pageX,this.lastMouseY=e.changedTouches[0].pageY,this.isMouseMoveBound||(sf.base.EventHandler.add(document,"touchmove",this.touchMoveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(sf.base.EventHandler.add(document,"touchend",this.upResizeHandler,this),this.isMouseUpBound=!0)},e.prototype.upResizeHandler=function(e){if(!sf.base.isNullOrUndefined(this.downTarget)){this.upTarget=this.downTarget;var t=sf.base.closest(this.upTarget,".e-panel"),i=!0;if(t){sf.base.addClass([t],"e-panel-transition");var n="msie"===sf.base.Browser.info.name?"mousemove pointermove":"mousemove",s="msie"===sf.base.Browser.info.name?"mouseup pointerup":"mouseup";sf.base.EventHandler.remove(document,n,this.moveResizeHandler),sf.base.EventHandler.remove(document,s,this.upResizeHandler),"msie"!==sf.base.Browser.info.name&&(sf.base.EventHandler.remove(document,"touchmove",this.touchMoveResizeHandler),sf.base.EventHandler.remove(document,"touchend",this.upResizeHandler)),this.isMouseUpBound=!1,this.isMouseMoveBound=!1,this.shadowEle&&sf.base.detach(this.shadowEle),this.shadowEle=null;var o=this.getCellInstance(t.getAttribute("id"));this.updatePanelPosition(o.id,o.col,o.row)}sf.base.removeClass([t],["e-dragging"]),this.isResizing=!1,this.dotnetRef.invokeMethodAsync("TriggerResizeStart",i,t.id,"ResizeStop"),this.isChanged=!1,this.resizeCalled=!1,this.lastMouseX=this.lastMouseY=void 0,this.mOffX=this.mOffY=0,this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.updatePanels(),this.updateCloneArrayObject(),this.changedId.length>0&&this.dotnetRef.invokeMethodAsync("TriggerChange",i,this.changedId),this.changedId=[]}},e.prototype.moveResizeHandler=function(e){this.updateMaxTopLeft(e);var t=sf.base.closest(this.moveTarget,".e-panel");if(this.lastMouseX!==e.pageX&&this.lastMouseY!==e.pageY){this.updateResizeElement(t);var i=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.pageX,this.mouseY=e.pageY;var n=this.mouseY-this.lastMouseY+this.mOffY,s=this.mouseX-this.lastMouseX+this.mOffX;this.mOffX=this.mOffY=0,this.lastMouseY=this.mouseY,this.lastMouseX=this.mouseX,this.resizingPanel(t,i,s,n)}},e.prototype.getMinWidth=function(e){return e.minSizeX*this.getCellSize()[0]},e.prototype.getMaxWidth=function(e){return e.maxSizeX*this.getCellSize()[0]},e.prototype.getMinHeight=function(e){return e.minSizeY*this.getCellSize()[1]},e.prototype.getMaxHeight=function(e){return e.maxSizeY*this.getCellSize()[1]},e.prototype.resizingPanel=function(e,t,i,n){var s=this.getCellInstance(e.id).sizeX,o=this.getCellInstance(e.id).sizeY,r=n,a=i;this.handleClass.indexOf("north")>=0&&(this.elementHeight-r<this.getMinHeight(t)?(n=this.elementHeight-this.getMinHeight(t),this.mOffY=r-n):t.maxSizeY&&this.elementHeight-r>this.getMaxHeight(t)?(n=this.elementHeight-this.getMaxHeight(t),this.mOffY=r-n):this.elementY+r<this.minTop&&(n=this.minTop-this.elementY,this.mOffY=r-n),this.elementY+=n,this.elementHeight-=n),this.handleClass.indexOf("south")>=0&&(this.elementHeight+r<this.getMinHeight(t)?(n=this.getMinHeight(t)-this.elementHeight,this.mOffY=r-n):t.maxSizeY&&this.elementHeight+r>this.getMaxHeight(t)?(n=this.getMaxHeight(t)-this.elementHeight,this.mOffY=r-n):this.elementY+this.elementHeight+r>this.maxTop&&(n=this.maxTop-this.elementY-this.elementHeight,this.mOffY=r-n),this.elementHeight+=n),this.handleClass.indexOf("west")>=0&&(this.elementWidth-a<this.getMinWidth(t)?(i=this.elementWidth-this.getMinWidth(t),this.mOffX=a-i):t.maxSizeX&&this.elementWidth-a>this.getMaxWidth(t)?(i=this.elementWidth-this.getMaxWidth(t),this.mOffX=a-i):this.elementX+a<this.minLeft&&(i=this.minLeft-this.elementX,this.mOffX=a-i),this.elementX+=i,this.elementWidth-=i),this.handleClass.indexOf("east")>=0&&(this.elementWidth+a<this.getMinWidth(t)?(i=this.getMinWidth(t)-this.elementWidth,this.mOffX=a-i):t.maxSizeX&&this.elementWidth+a>this.getMaxWidth(t)?(i=this.getMaxWidth(t)-this.elementWidth,this.mOffX=a-i):this.elementX+this.elementWidth+a>this.maxLeft&&(i=this.maxLeft-this.elementX-this.elementWidth,this.mOffX=a-i),this.elementWidth+=i);var l=this.getResizeRowColumn(t);if(l.col+l.sizeX>this.columns&&this.updatePanelSize(l.id,l.sizeX-1,null),this.shadowEle.style.top=l.row*this.getCellSize()[1]+l.row*this.cellSpacing[1]+"px",this.shadowEle.style.left=l.col*this.getCellSize()[0]+l.col*this.cellSpacing[0]+"px",this.shadowEle.style.height=l.sizeY*(this.getCellSize()[1]+this.cellSpacing[1])+"px",this.shadowEle.style.width=l.sizeX*(this.getCellSize()[0]+this.cellSpacing[0])+"px",s!==l.sizeX||o!==l.sizeY){s=l.sizeX,o=l.sizeY;var d=this.getCellInstance(e.id);this.updatePanelSize(e.id,d.sizeX,d.sizeY),this.updatePanelPosition(e.id,d.col,d.row),this.mainElement=e,this.updatePanelLayout(e,this.getCellInstance(e.id)),this.updateOldRowColumn(),this.sortedPanel()}},e.prototype.pixelsToColumns=function(e,t){var i=this.cellSize[0];return t?Math.ceil(e/i):Math.floor(e/i)},e.prototype.pixelsToRows=function(e,t){return t?Math.round(e/this.cellSize[1]):Math.round(e/(this.cellSize[1]+this.cellSpacing[0]))},e.prototype.getResizeRowColumn=function(e){var t=!1,i=e.col;-1!==["e-west","e-south-west"].indexOf(this.handleClass)&&(i=this.pixelsToColumns(this.elementX,!1));var n=e.row;-1!==["e-north"].indexOf(this.handleClass)&&(n=this.pixelsToRows(this.elementY,!1),this.previousRow!==n&&(this.previousRow=n,t=!0));var s=e.sizeX;-1===["e-north","e-south"].indexOf(this.handleClass)&&(s=this.pixelsToColumns(this.elementWidth-s*this.cellSpacing[1],!0));var o=e.sizeY;return-1===["e-east","e-west"].indexOf(this.handleClass)&&("e-north"!==this.handleClass||t)&&(o=this.pixelsToRows(this.elementHeight-o*this.cellSpacing[0],!0)),e.col+e.sizeX>this.columns&&(e.sizeX=e.sizeX-1),(n>-1&&i>-1&&s+i<=this.columns&&o+n<=this.rows&&0===this.collisions(n,i,s,o,this.getPanelBase(e.id)).length||this.allowPushing)&&(this.updatePanelSize(e.id,s,o),this.updatePanelPosition(e.id,i,n)),e},e.prototype.touchMoveResizeHandler=function(e){this.updateMaxTopLeft(e);var t=sf.base.closest(this.moveTarget,".e-panel");if(this.lastMouseX!==e.changedTouches[0].pageX&&this.lastMouseY!==e.changedTouches[0].pageY){this.updateResizeElement(t);var i=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.changedTouches[0].pageX,this.mouseY=e.changedTouches[0].pageY;var n=this.mouseX-this.lastMouseX+this.mOffX,s=this.mouseY-this.lastMouseY+this.mOffY;this.mOffX=this.mOffY=0,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.resizingPanel(t,i,n,s)}},e.prototype.updateResizeElement=function(e){this.maxLeft=this.element.offsetWidth-1,this.maxTop=this.cellSize[1]*this.maxRows-1,sf.base.removeClass([e],"e-panel-transition"),sf.base.addClass([e],["e-dragging"]);for(var t=["e-east","e-west","e-north","e-south","e-south-east","e-north-east","e-north-west","e-south-west"],i=0;i<this.moveTarget.classList.length;i++)-1!==t.indexOf(this.moveTarget.classList[i])&&(this.handleClass=this.moveTarget.classList[i])},e.prototype.updateMaxTopLeft=function(e){var t=this;this.moveTarget=this.downTarget;var i=sf.base.closest(this.moveTarget,".e-panel"),n=!0;this.resizeTimeCount=setTimeout((function(){return t.resizeCall(n,i.id,"Resizing")}),100)},e.prototype.resizeCall=function(e,t,i){(this.isResizing&&this.resizeTimeCount>100||void 0===this.resizeTimeCount)&&(this.dotnetRef.invokeMethodAsync("TriggerResizeStart",e,t,i),this.resizeTimeCount=1)},e.prototype.downResizeHandler=function(e){this.downHandler(e),this.lastMouseX=e.pageX,this.lastMouseY=e.pageY;var t="msie"===sf.base.Browser.info.name?"mousemove pointermove":"mousemove",i="msie"===sf.base.Browser.info.name?"mouseup pointerup":"mouseup";this.isMouseMoveBound||(sf.base.EventHandler.add(document,t,this.moveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(sf.base.EventHandler.add(document,i,this.upResizeHandler,this),this.isMouseUpBound=!0)},e.prototype.downHandler=function(e){this.resizeCalled=!1,this.panelsInitialModel=this.cloneModels(this.panels);var t=sf.base.closest(e.currentTarget,".e-panel");this.isChanged=!0;var i=!0;this.dotnetRef.invokeMethodAsync("TriggerResizeStart",i,t.id,"ResizeStart"),this.isResizing=!0,this.downTarget=e.currentTarget,this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),sf.base.addClass([this.element],["e-prevent"]),this.element.appendChild(this.shadowEle),this.elementX=parseFloat(t.style.left),this.elementY=parseFloat(t.style.top),this.elementWidth=t.offsetWidth,this.elementHeight=t.offsetHeight,this.originalWidth=this.getCellInstance(t.id).sizeX,this.originalHeight=this.getCellInstance(t.id).sizeY,this.previousRow=this.getCellInstance(t.id).row},e.prototype.onDraggingStart=function(e){this.isDragged=!0;var t=e;this.isChanged=!0,t.bindEvents(e.element),this.panelsInitialModel=this.cloneModels(this.panels),this.mainElement=e.element;var i=this.getCellInstance(e.element.id);this.startCol=this.dragColumn=i.col;var n=this.startRow=this.dragRow=parseInt(e.element.getAttribute("data-row"),10),s=parseInt(e.element.getAttribute("data-sizeY"),10);this.dotnetRef.invokeMethodAsync("TriggerDragStart",e.element.id,n,s,s),this.updateDragArea(),this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),this.shadowEle.classList.add("e-holder-transition"),sf.base.setStyleAttribute(this.shadowEle,{position:"absolute"}),sf.base.addClass([this.element],["e-prevent"]),sf.base.addClass([e.element],["e-dragging"]),this.element.appendChild(this.shadowEle),this.shadowEle=document.querySelector(".e-holder"),this.shadowEle.style.height=this.getCellInstance(e.element.id).sizeY*this.cellSize[1]+"px",this.shadowEle.style.width=this.getCellInstance(e.element.id).sizeX*this.cellSize[0]+"px";var o=this.getCellInstance(e.element.id);this.updatePanelPosition(o.id,o.col,o.row),this.setPanelPosition(this.shadowEle,o.row,o.col)},e.prototype.updatePanelSize=function(e,t,i){if(this.panels.length>0)for(var n=0;n<this.panels.length;n++)this.panels[n].id===e&&(sf.base.isNullOrUndefined(t)||(this.panels[n].sizeX=t),sf.base.isNullOrUndefined(i)||(this.panels[n].sizeY=i))},e.prototype.updateDragArea=function(){this.dragCollection.forEach((function(e){e.setDragArea()}))},e.prototype.setPanelPosition=function(e,t,i){if(e){var n=this.getCellSize()[1],s=this.getCellSize()[0],o=0===i?0:i*(s+this.cellSpacing[0]),r=0===t?0:t*(n+this.cellSpacing[1]);sf.base.setStyleAttribute(e,{left:o+"px",top:r+"px"})}},e.prototype.calculateCellSizeValue=function(){this.cellSize=[],this.checkMediaQuery()?this.cellSize[1]=this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio:(this.cellSize[0]=this.element.parentElement&&this.element.parentElement.offsetWidth,this.cellSize[0]=this.element.parentElement&&(this.element.parentElement.offsetWidth-(this.columns-1)*this.cellSpacing[0])/this.columns,this.cellSize[1]=this.cellSize[0]/this.cellAspectRatio)},e.prototype.cloneModels=function(e,t){void 0===t&&(t=[]);for(var i=0;i<e.length;i++)for(var n in t[i]||(t[i]={}),e[i])t[i][n]=e[i][n];return t},e.prototype.checkForChanges=function(){for(var e=[],t=0;t<this.panels.length;t++)this.panels[t].row===this.panelsInitialModel[t].row&&this.panels[t].col===this.panelsInitialModel[t].col&&this.panels[t].sizeX===this.panelsInitialModel[t].sizeX&&this.panels[t].sizeY===this.panelsInitialModel[t].sizeY||(e.push(this.panels[t]),this.panels[t].sizeY=this.panels[t].sizeY<this.panels[t].minSizeY?this.panels[t].minSizeY:this.panels[t].sizeY);return e},e.prototype.getCellSize=function(){return[this.cellSize[0],this.cellSize[1]]},e.prototype.destroy=function(){sf.base.EventHandler.remove(window,"resize",this.refreshListener),this.element.removeAttribute("style");for(var e=0;e<this.dragCollection.length;e++)this.dragCollection[e].destroy();this.removeAll()},e.prototype.setHolderPosition=function(e){var t=parseInt(e.element.getAttribute("data-sizeY"),10),i=parseInt(e.element.getAttribute("data-col"),10),n=parseInt(e.element.getAttribute("data-row"),10),s=parseInt(e.element.getAttribute("data-sizeX"),10),o=this.getCellSize()[0],r=this.getCellSize()[1],a=0===n?0:n*(r+this.cellSpacing[1]),l=0===i?0:i*(o+this.cellSpacing[0]),d=this.getCellSize()[1],h=this.getCellSize()[0];this.shadowEle.style.top=a+"px",this.shadowEle.style.left=l+"px",this.shadowEle.style.height=t*d+(t-1)*this.cellSpacing[1]+"px",this.shadowEle.style.width=s*h+(s-1)*this.cellSpacing[0]+"px"},e.prototype.contentHeight=function(){for(var e=[],t=0;t<this.element.querySelectorAll(".e-panel").length;t++){var i=this.element.querySelectorAll(".e-panel")[t];if(i.querySelector(".e-panel-header")){var n=window.getComputedStyle(i.querySelector(".e-panel-header")).height,s={id:i.id,height:n||"0px"};e.push(s)}}return e},e}();return{initialize:function(t,i,n){return new e(t,i),this.isValid(t)?t.blazorInstances.initialize(n):null},calculateCellSize:function(e){return this.isValid(e)&&e.blazorInstances.calculateCellSize(),null!=e?e.blazorInstances.calculateCellSize():null},movePanel:function(e,t,i,n){this.isValid(e)&&e.blazorInstances.movePanel(t,i,n)},removePanel:function(e,t){this.isValid(e)&&e.blazorInstances.removePanel(t)},resizePanel:function(e,t,i,n){this.isValid(e)&&e.blazorInstances.resizePanel(t,i,n)},removeAll:function(e){this.isValid(e)&&e.blazorInstances.removeAll()},addPanel:function(e,t){this.isValid(e)&&e.blazorInstances.addPanel(t)},onPropertyChange:function(e,t){this.isValid(e)&&e.blazorInstances.onPropertyChange(t)},destroy:function(e){this.isValid(e)&&e.blazorInstances.destroy()},refresh:function(e){this.isValid(e)&&e.blazorInstances.refresh()},resizeEvents:function(e){this.isValid(e)&&e.blazorInstances.resizeEvents()},isValid:function(e){return!(!e||!e.blazorInstances)},updatePanelModels:function(e,t){this.isValid(e)&&(e.blazorInstances.clearPanelElements(),e.blazorInstances.getProperty(t),e.blazorInstances.initialize(t))},setRootHeight:function(e,t){this.isValid(e)&&e.blazorInstances.setRootHeight(t)}}}()},"./modules/sf-datepicker.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DatePicker=function(){"use strict";var e="e-datepicker",t=function(){function t(e,t,i,n,s){window.sfBlazor=window.sfBlazor,this.dataId=e,this.containerElement=t,this.element=i,this.options=s,window.sfBlazor.setCompInstance(this),this.dotNetRef=n}return t.prototype.initialize=function(){this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs=sf.base.extend(this.defaultKeyConfigs,this.options.keyConfigs),new sf.base.KeyboardEvents(this.element,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}),this.index=this.options.showClearButton?2:1,sf.base.EventHandler.add(this.element,"blur",this.inputBlurHandler,this)},t.prototype.inputKeyActionHandle=function(e){var t;if(this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&this.options.isDatePopup){var i=this.tableBodyElement.querySelector("tr td.e-focused-date"),n=this.tableBodyElement.querySelector("tr td.e-selected");this.tableBodyElement.focus(),t={Action:e.action,Key:e.key,Events:e,SelectDate:n?n.id:null,FocusedDate:i?i.id:null,classList:n?n.classList.toString():i?i.classList.toString():"e-cell",Id:i?i.id:n?n.id:null,TargetClassList:this.calendarElement.classList.toString()}}else t={Action:e.action,Key:e.key,Events:e};this.isDisposed||this.dotNetRef.invokeMethodAsync("InputKeyActionHandle",t),"select"!==e.action&&this.popupObj&&document.body.contains(this.popupObj.element)&&e.preventDefault()},t.prototype.inputBlurHandler=function(e){this.isCalendar()&&document.activeElement===this.element&&this.dotNetRef.invokeMethodAsync("HidePopup",e)},t.prototype.renderPopup=function(e,t,i,n){if(this.options=n,this.popupHolder=t,e){var s=document.getElementById(e.id);s&&sf.base.remove(s)}this.createCalendar(e,n),sf.base.Browser.isDevice&&(this.mobilePopupContainer=sf.base.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupContainer)),("model"===i.appendTo&&this.mobilePopupContainer?this.mobilePopupContainer:document.body).appendChild(this.popupContainer),this.popupObj.refreshPosition(this.element),n.isDatePopup||this.setScrollPosition();var o={name:"FadeIn",duration:sf.base.Browser.isDevice?0:300};1e3===this.options.zIndex?this.popupObj.show(new sf.base.Animation(o),this.element):this.popupObj.show(new sf.base.Animation(o),null),this.setOverlayIndex(this.mobilePopupContainer,this.popupObj.element,this.modal,sf.base.Browser.isDevice),sf.base.EventHandler.add(document,"mousedown touchstart",this.documentHandler,this)},t.prototype.setOverlayIndex=function(e,t,i,n){if(n&&!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(e)){var s=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(s-1).toString(),e.style.zIndex=s.toString()}},t.prototype.closePopup=function(e,t){this.options=t,this.closeEventCallback(e)},t.prototype.CalendarScrollHandler=function(e){var t="Up"===e.scrollDirection||"Down"===e.scrollDirection;this.isTouchstart&&t&&(this.dotNetRef.invokeMethodAsync("ScrollToNextSection","Up"==e.scrollDirection),this.isTouchstart=!1)},t.prototype.TouchStartHandler=function(e){this.isTouchstart=!0},t.prototype.createCalendar=function(t,i){var n=this;this.popupContainer=t,this.calendarElement=this.popupContainer.firstElementChild,this.tableBodyElement=sf.base.select("tbody",this.calendarElement);var s=e+" e-date-modal",o="e-date-overflow";i.isDatePopup?this.calendarElement.querySelector("table tbody").className="":(s="e-datetimepicker e-time-modal",o="e-time-overflow"),sf.base.Browser.isDevice&&(this.modal=sf.base.createElement("div"),this.modal.className=s,document.body.classList.add(o),this.modal.style.display="block",document.body.appendChild(this.modal)),this.popupObj=new sf.popups.Popup(this.popupContainer,{width:i.isDatePopup?"auto":this.setPopupWidth(this.options.width),relateTo:sf.base.Browser.isDevice?document.body:this.containerElement,position:sf.base.Browser.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:i.enableRtl,zIndex:i.zIndex,collision:sf.base.Browser.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:function(){sf.base.Browser.isDevice&&(n.touchModule=new sf.base.Touch(n.calendarElement.children[1].querySelector(".e-content.e-month"),{scroll:n.CalendarScrollHandler.bind(n)}),sf.base.EventHandler.add(n.calendarElement.children[1].querySelector(".e-content.e-month"),"touchstart",n.TouchStartHandler,n)),document.activeElement!==n.element&&i.isDatePopup&&(n.defaultKeyConfigs=sf.base.extend(n.defaultKeyConfigs,i.keyConfigs),n.calendarElement.children[1].firstElementChild.focus(),new sf.base.KeyboardEvents(n.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:n.CalendarKeyActionHandle.bind(n),keyConfigs:n.defaultKeyConfigs}),new sf.base.KeyboardEvents(n.containerElement.children[n.index],{eventName:"keydown",keyAction:n.CalendarKeyActionHandle.bind(n),keyConfigs:n.defaultKeyConfigs}))},close:function(){n.popupHolder.appendChild(n.popupContainer),n.popupObj&&n.popupObj.destroy(),n.isDisposed||n.dotNetRef.invokeMethodAsync("ClosePopup").catch((function(){})),n.popupObj=null},targetExitViewport:function(){sf.base.Browser.isDevice||n.isDisposed||n.dotNetRef.invokeMethodAsync("HidePopup",null)}}),i.isDatePopup||(this.popupObj.element.style.maxHeight="240px")},t.prototype.getPopupHeight=function(){var e=parseInt("240px",10),t=this.popupContainer.getBoundingClientRect().height;return t>e?e:t},t.prototype.setScrollPosition=function(){if((this.popupContainer&&this.popupContainer.querySelector(".e-navigation")||this.popupContainer.querySelector(".e-active"))&&!this.options.isDatePopup){var e=this.popupContainer.querySelector(".e-navigation")||this.popupContainer.querySelector(".e-active");this.findScrollTop(e)}},t.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,n=i?i.offsetTop:e.offsetTop,s=e.getBoundingClientRect().height;n+e.offsetTop>t?this.popupContainer.scrollTop=i?n-(t/2+s/2):n:this.popupContainer.scrollTop=0},t.prototype.closeEventCallback=function(e){var t=e;this.isCalendar()&&!t.cancel&&this.popupObj&&this.popupObj.hide(),sf.base.Browser.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),sf.base.Browser.isDevice&&(sf.base.removeClass([document.body],"e-date-overflow"),sf.base.removeClass([document.body],"e-time-overflow"),sf.base.isNullOrUndefined(this.mobilePopupContainer)||(this.mobilePopupContainer.remove(),this.mobilePopupContainer=null)),sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentHandler),sf.base.Browser.isDevice&&this.options.allowEdit&&!this.options.readonly&&this.element.removeAttribute("readonly")},t.prototype.documentHandler=function(t){!sf.base.isNullOrUndefined(this.popupObj)&&(this.containerElement.contains(t.target)||this.popupObj.element&&this.popupObj.element.contains(t.target))&&"touchstart"!==t.type&&t.preventDefault();var i=this.containerElement.querySelector(".e-clear-icon"),n=this.tableBodyElement?this.tableBodyElement.querySelector(".e-selected"):null,s=this.options.value?this.options.value.toString():null,o=t.target;o==i&&n&&sf.base.removeClass([this.tableBodyElement.querySelector(".e-selected")],"e-selected"),sf.base.closest(o,"."+e+".e-popup-wrapper")||sf.base.closest(o,".e-datetimepicker.e-popup-wrapper")||sf.base.closest(o,".e-input-group")===this.containerElement||o.classList.contains("e-day")||this.isDisposed?sf.base.closest(o,"."+e+".e-popup-wrapper")&&(o.classList.contains("e-day")&&!sf.base.isNullOrUndefined(t.target.parentElement)&&t.target.parentElement.classList.contains("e-selected")&&sf.base.closest(o,".e-content")&&sf.base.closest(o,".e-content").classList.contains("e-"+this.options.depth.toLowerCase())&&!this.isDisposed||sf.base.closest(o,".e-footer-container")&&o.classList.contains("e-today")&&o.classList.contains("e-btn")&&+new Date(s)==+this.generateTodayVal(new Date(s))&&!this.isDisposed)&&this.dotNetRef.invokeMethodAsync("HidePopup",t):(this.dotNetRef.invokeMethodAsync("HidePopup",t),this.element.focus())},t.prototype.generateTodayVal=function(e){var t=new Date;return e?(t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())):t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),t},t.prototype.isCalendar=function(){return this.popupContainer&&this.popupContainer.classList.contains("e-popup-wrapper")},t.prototype.CalendarKeyActionHandle=function(e){switch(e.action){case this.defaultKeyConfigs.escape:this.isCalendar()?this.dotNetRef.invokeMethodAsync("HidePopup",e):this.element.blur();break;case this.defaultKeyConfigs.enter:this.isCalendar()||this.dotNetRef.invokeMethodAsync("ShowPopup",e);break;case this.defaultKeyConfigs.tab:this.dotNetRef.invokeMethodAsync("HidePopup",e)}},t.prototype.setWidth=function(e){return e="number"==typeof e?sf.base.formatUnit(e):"string"==typeof e?e.match(/px|%|em/)?e:sf.base.formatUnit(e):"100%"},t.prototype.setPopupWidth=function(e){(e=this.setWidth(e)).indexOf("%")>-1&&(e=(this.containerElement.getBoundingClientRect().width*parseFloat(e)/100).toString()+"px");return e},t}();return{initialize:function(e,i,n,s,o){n&&e&&new t(e,i,n,s,o).initialize()},renderPopup:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&i&&o.renderPopup(t,i,n,s)},updateScrollPosition:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.setScrollPosition()},closePopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(n)&&t&&n.closePopup(t,i)},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()},destroy:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(n,s))}}}()},"./modules/sf-daterangepicker.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DateRangePicker=function(){"use strict";var e="e-left-calendar",t="e-right-calendar",i="e-calendar",n="e-header",s="e-focused-date",o=function(){function o(e,t,i,n,s){window.sfBlazor=window.sfBlazor,this.dataId=e,this.containerElement=t,this.element=i,this.options=s,window.sfBlazor.setCompInstance(this),this.dotNetRef=n}return o.prototype.initialize=function(){this.isMobile=window.matchMedia("(max-width:550px)").matches,this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab"},new sf.base.KeyboardEvents(this.element,{eventName:"keydown",keyAction:this.keyInputHandler.bind(this),keyConfigs:this.defaultKeyConfigs})},o.prototype.keyInputHandler=function(i){var n;if(this.popupObj&&this.popupObj.element.classList.contains("e-popup")){var o=sf.base.closest(i.target,"."+t),r=(o=sf.base.isNullOrUndefined(o)?this.tableElement.querySelector("."+e):o).classList.contains(e),a=this.tableElement.querySelector("tr td."+s),l=this.tableElement.querySelectorAll("tr td.e-selected"),d=l[l.length-1],h=a&&sf.base.closest(a,"tbody")||d&&sf.base.closest(d,"tbody");!r&&this.leftCalendar.querySelectorAll("tr td."+s).length>0&&sf.base.removeClass(this.leftCalendar.querySelectorAll("tr td."+s),s),h&&h.focus(),n={Action:i.action,Key:i.key,Events:i,SelectDate:d?d.id:null,FocusedDate:a?a.id:null,classList:d?d.classList.toString():a?a.classList.toString():"e-cell",Id:a?a.id:d?d.id:null,TargetClassList:this.calendarElement.classList.toString(),IsLeftCalendar:r,FocusedDateClassList:a?a.classList.toString():null}}else n={Action:i.action,Key:i.key,Events:i};this.isDisposed||this.dotNetRef.invokeMethodAsync("InputKeyActionHandle",n),"select"!==i.action&&this.popupObj&&document.body.contains(this.popupObj.element)&&i.preventDefault()},o.prototype.renderPopup=function(e,t,i,n){this.options=n,this.popupHolder=t;var s=document.body.querySelector(".e-daterangepicker.e-popup-open");s&&sf.base.remove(s),this.createCalendar(e,n),sf.base.Browser.isDevice&&(this.mobilePopupContainer=this.popupHolder.querySelector(".e-daterangepick-mob-popup-wrap"),document.body.appendChild(this.mobilePopupContainer)),("model"===i.appendTo&&this.mobilePopupContainer?this.mobilePopupContainer:document.body).appendChild(this.popupContainer),this.presetHeight(),1e3===this.options.zIndex?this.popupObj.show(null,this.element):this.popupObj.show(null,null),this.setOverlayIndex(this.mobilePopupContainer,this.popupObj.element,this.modal,sf.base.Browser.isDevice),sf.base.Browser.isDevice&&(document.body.className+=" e-range-overflow",this.popupHolder.style.display="block",this.popupHolder.style.visibility="visible"),sf.base.EventHandler.add(document,"mousedown touchstart",this.documentHandler,this)},o.prototype.setOverlayIndex=function(e,t,i,n){if(n&&!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(e)){var s=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(s-1).toString(),e.style.zIndex=s.toString()}},o.prototype.closePopup=function(e,t){this.options=t,this.closeEventCallback(e)},o.prototype.refreshPopup=function(){this.isPopupOpen()&&this.popupObj.refreshPosition()},o.prototype.CalendarScrollHandler=function(e){var t="Right"===e.scrollDirection||"Left"===e.scrollDirection;this.isTouchstart&&t&&(this.dotNetRef.invokeMethodAsync("ScrollToNextSection","Left"==e.scrollDirection),this.isTouchstart=!1)},o.prototype.TouchStartHandler=function(e){this.isTouchstart=!0},o.prototype.createCalendar=function(s,o){var r=this;this.popupContainer=s,o.isCustomWindow&&(this.calendarElement=this.popupContainer.firstElementChild,this.tableElement=this.calendarElement,this.calendarElement.querySelector("table tbody").className="");var a=this.popupContainer.getBoundingClientRect().width;sf.base.Browser.isDevice&&(this.modal=this.popupHolder.querySelector(".e-range-modal"),this.modal.style.display="block",document.body.appendChild(this.modal)),o.isCustomWindow&&(sf.base.Browser.isDevice?(this.deviceCalPrevIcon=this.calendarElement.querySelector("."+i+" .e-prev"),this.deviceCalNextIcon=this.calendarElement.querySelector("."+i+" .e-next"),this.calendarElement.querySelector("."+i+" .e-icon-container")&&sf.base.remove(this.calendarElement.querySelector("."+i+" .e-icon-container")),this.calendarElement.querySelector("table").setAttribute("tabindex","-1"),this.calendarElement.querySelector("."+i+" ."+n).appendChild(this.deviceCalNextIcon),this.calendarElement.querySelector("."+i+" ."+n).appendChild(this.deviceCalPrevIcon),sf.base.prepend([this.deviceCalPrevIcon],this.calendarElement.querySelector("."+i+" ."+n)),this.calendarElement.querySelector("."+i+" .e-footer-container")&&sf.base.remove(this.calendarElement.querySelector("."+i+" .e-footer-container"))):(this.leftCalPrevIcon=this.calendarElement.querySelector("."+e+" .e-prev"),this.leftCalNextIcon=this.calendarElement.querySelector("."+e+" .e-next"),this.leftTitle=this.calendarElement.querySelector("."+e+" .e-title"),this.calendarElement.querySelector("."+e+" .e-icon-container")&&sf.base.remove(this.calendarElement.querySelector("."+e+" .e-icon-container")),this.calendarElement.querySelector("."+e+" ."+n).appendChild(this.leftCalNextIcon),this.calendarElement.querySelector("."+e+" ."+n).appendChild(this.leftCalPrevIcon),sf.base.prepend([this.leftCalPrevIcon],this.calendarElement.querySelector("."+e+" ."+n)),this.rightCalPrevIcon=this.calendarElement.querySelector("."+t+" .e-prev"),this.rightCalNextIcon=this.calendarElement.querySelector("."+t+" .e-next"),this.rightTitle=this.calendarElement.querySelector("."+t+" .e-title"),this.calendarElement.querySelector("."+t+" .e-icon-container")&&sf.base.remove(this.calendarElement.querySelector("."+t+" .e-icon-container")),this.calendarElement.querySelector("table").setAttribute("tabindex","-1"),this.calendarElement.querySelector("."+t+" ."+n).appendChild(this.rightCalNextIcon),this.calendarElement.querySelector("."+t+" ."+n).appendChild(this.rightCalPrevIcon),sf.base.prepend([this.rightCalPrevIcon],this.calendarElement.querySelector("."+t+" ."+n)),this.calendarElement.querySelector("."+e+" .e-footer-container")&&sf.base.remove(this.calendarElement.querySelector("."+e+" .e-footer-container")),this.calendarElement.querySelector("."+t+" .e-footer-container")&&sf.base.remove(this.calendarElement.querySelector("."+t+" .e-footer-container")))),this.popupObj=new sf.popups.Popup(this.popupContainer,{relateTo:this.isMobile?document.body:this.containerElement,position:this.isMobile?sf.base.isUndefined(o.presets&&o.presets[0]&&o.presets[0].start&&o.presets[0].end&&o.presets[0].label)?{X:"center",Y:"center"}:{X:"left",Y:"bottom"}:o.enableRtl?{X:"left",Y:"bottom"}:{X:"right",Y:"bottom"},offsetX:this.isMobile||o.enableRtl?0:-a,offsetY:4,collision:this.isMobile?sf.base.isUndefined(o.presets&&o.presets[0]&&o.presets[0].start&&o.presets[0].end&&o.presets[0].label)?{X:"fit",Y:"fit"}:{X:"fit"}:{X:"fit",Y:"flip"},targetType:this.isMobile?"container":"relative",enableRtl:o.enableRtl,zIndex:o.zIndex,open:function(){sf.base.Browser.isDevice&&(r.touchModule=new sf.base.Touch(r.calendarElement.children[1].querySelector(".e-content.e-month"),{scroll:r.CalendarScrollHandler.bind(r)}),sf.base.EventHandler.add(r.calendarElement.children[1].querySelector(".e-content.e-month"),"touchstart",r.TouchStartHandler,r)),r.leftCalendar=r.calendarElement.querySelector("."+e),r.rightCalendar=r.calendarElement.querySelector("."+t);var i=r.popupObj&&r.popupObj.element.querySelector(".e-date-range-container");if(!r.isMobile&&i){new sf.base.KeyboardEvents(r.leftCalendar,{eventName:"keydown",keyAction:r.keyInputHandler.bind(r),keyConfigs:r.defaultKeyConfigs}),new sf.base.KeyboardEvents(r.rightCalendar,{eventName:"keydown",keyAction:r.keyInputHandler.bind(r),keyConfigs:r.defaultKeyConfigs});var n=r.popupContainer.querySelector(".e-cancel.e-btn"),s=r.popupContainer.querySelector(".e-apply.e-btn");new sf.base.KeyboardEvents(n,{eventName:"keydown",keyAction:r.keyInputHandler.bind(r),keyConfigs:{tab:"tab",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),new sf.base.KeyboardEvents(s,{eventName:"keydown",keyAction:r.keyInputHandler.bind(r),keyConfigs:{altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),r.leftCalendar.querySelector("table").focus()}},close:function(){r.popupHolder.appendChild(r.popupContainer),r.popupObj&&r.popupObj.destroy(),r.isDisposed||r.dotNetRef.invokeMethodAsync("ClosePopup").catch((function(){})),r.popupObj=null},targetExitViewport:function(){sf.base.Browser.isDevice||r.isDisposed||r.dotNetRef.invokeMethodAsync("HidePopup",null)}})},o.prototype.closeEventCallback=function(e){!e.cancel&&this.popupObj&&this.popupObj.hide(),sf.base.Browser.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),sf.base.Browser.isDevice&&(sf.base.removeClass([document.body],"e-range-overflow"),sf.base.isNullOrUndefined(this.mobilePopupContainer)||(this.mobilePopupContainer.remove(),this.mobilePopupContainer=null)),sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentHandler)},o.prototype.documentHandler=function(e){if(!sf.base.isNullOrUndefined(this.popupObj)){var t=e.target;this.containerElement.contains(t)&&(sf.base.isNullOrUndefined(this.popupObj)||sf.base.closest(t,".e-daterangepicker.e-popup"))||"touchstart"!==e.type&&"mousedown"===e.type&&e.preventDefault(),sf.base.closest(t,".e-daterangepicker.e-popup")||sf.base.closest(t,".e-input-group")===this.containerElement||sf.base.closest(t,".e-daterangepicker.e-popup")&&!t.classList.contains("e-day")||this.isPopupOpen()&&document.body.contains(this.popupObj.element)&&this.applyFunction(e)}},o.prototype.applyFunction=function(e){"touchstart"!==e.type&&e.preventDefault(),document.activeElement!==this.element&&(this.element.focus(),sf.base.addClass([this.containerElement],["e-input-focus"])),this.dotNetRef.invokeMethodAsync("HidePopup",null),sf.base.closest(e.target,".e-input-group")||document.activeElement===this.element&&(sf.base.removeClass([this.containerElement],["e-input-focus"]),this.element.blur())},o.prototype.presetHeight=function(){var e=this.popupObj&&this.popupObj.element.querySelector(".e-presets"),t=this.popupObj&&this.popupObj.element.querySelector(".e-date-range-container");sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(t)||(e.style.height=t.getBoundingClientRect().height+"px")},o.prototype.getPopupHeight=function(){var e=parseInt("240px",10),t=this.popupContainer.getBoundingClientRect().height;return t>e?e:t},o.prototype.setScrollPosition=function(){if(!sf.base.isNullOrUndefined(this.popupContainer.querySelector(".e-active"))&&this.options.presets){var e=this.popupContainer.querySelector(".e-active");this.findScrollTop(e)}},o.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,n=i?i.offsetTop:e.offsetTop,s=e.getBoundingClientRect().height;n+e.offsetTop>t?this.popupContainer.scrollTop=i?n-(t/2+s/2):n:this.popupContainer.scrollTop=0},o.prototype.isPopupOpen=function(){return!(sf.base.isNullOrUndefined(this.popupObj)||!this.popupObj.element.classList.contains("e-popup"))},o.prototype.removeFocusDate=function(e,t){var i=e.querySelectorAll("tr td.e-focused-date");i.length>0&&sf.base.removeClass(i,s);for(var n=e.querySelectorAll("tr td"),o=0;o<n.length;o++)n[o].getAttribute("id").split("_")[0]==t&&(sf.base.removeClass(n,s),sf.base.addClass([n[o]],s),sf.base.closest(n[o],"table").focus())},o}();return{initialize:function(e,t,i,n,s){i&&new o(e,t,i,n,s).initialize()},renderPopup:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&i&&o.renderPopup(t,i,n,s)},updateScrollPosition:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.setScrollPosition()},removeFocusDate:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(n)&&t&&n.removeFocusDate(t,i)},closePopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(n)&&t&&n.closePopup(t,i)},refreshPopup:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.refreshPopup()},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()},destroy:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(n,s))}}}()},"./modules/sf-diagramcomponent.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Diagram=function(){"use strict";var e=function(){function e(e,t,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=e,this.y=t,this.width=i,this.height=n}return e.empty=new e(Number.MAX_VALUE,Number.MIN_VALUE,0,0),e}(),t=function(e,t){this.width=e,this.height=t};function n(e,t){for(var i=t.split(";"),n=0;n<i.length;n++){var s=i[n].split(":");2===s.length&&(e.style[s[0].trim()]=s[1].trim())}}function s(e,t){for(var i=Object.keys(t),s=0;s<i.length;s++)"style"!==i[s]?e.setAttribute(i[s],t[i[s]]):n(e,t[i[s]])}function o(e,t,i){for(var n=e;n&&!(i?n.id===t:r(n,t));)n=n.parentNode;return n}function r(e,t){return(" "+("object"===i(e.className)?e.className.animVal:e.className)+" ").indexOf(" "+t+" ")>-1}var a=function(){function e(e,t){var i=this;this.over=function(e){for(var t,n=document.getElementById("clonedNode"),s=i.symbolPaletteInstance.length-1;s>=0;s--)if(e.dragData.draggable.id===i.symbolPaletteInstance[s].id){t=i.symbolPaletteInstance[s].componentInstance;break}if(t&&t.invokeMethodAsync("SymbolPaletteDragEnter",e.target.id.split("_")[0]),n){sf.base.remove(n);var o=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone");o[0].style.width="1px",o[0].style.height="1px"}},this.drop=function(e){for(var t,n=i.symbolPaletteInstance.length-1;n>=0;n--)if(e.dragData.draggable.id===i.symbolPaletteInstance[n].id){t=i.symbolPaletteInstance[n].componentInstance;break}var s=o(e.target,"e-diagram");if(s&&e.event.changedTouches&&e.event.changedTouches.length>0){var r=void 0;for(n=i.symbolPaletteInstance.length-1;n>=0;n--){r=i.symbolPaletteInstance[n].componentInstance;break}r&&window.sfBlazor.Diagram.invokeDiagramEvents(e.event,r,void 0,e),t&&t.invokeMethodAsync("SymbolPaletteDrop",s.id,!0)}else t&&t.invokeMethodAsync("SymbolPaletteDrop",s.id,!1);sf.base.remove(e.droppedElement)},this.out=function(e){for(var t,n=i.symbolPaletteInstance.length-1;n>=0;n--)if(e.target&&e.target.children[0].id===i.symbolPaletteInstance[n].id||e.target&&e.target.parentNode&&e.target.parentNode.parentNode&&e.target.parentNode.parentNode.parentElement&&e.target.parentNode.parentNode.parentElement.id===i.symbolPaletteInstance[n].id||i.draggable.target&&i.draggable.target.id==i.symbolPaletteInstance[n].id){t=i.symbolPaletteInstance[n].componentInstance;break}t&&(e.evt.changedTouches&&e.evt.changedTouches.length>0&&window.sfBlazor.Diagram.invokeDiagramEvents(e.evt,t,void 0,e),t.invokeMethodAsync("SymbolPaletteDragLeave"))},this.helper=function(e){var t=document.getElementsByClassName("e-control e-accordion")[0],i=sf.base.createElement("div",{className:"e-cloneproperties e-draganddrop e-dragclone",styles:'color:"transparent" height:"auto",  width:'+t.offsetWidth}),n=document.getElementById("previewID");return null===n&&(n=e.sender.target),n?(i.setAttribute("id","helperElement"),document.body.appendChild(i),i):null},this.dragStart=function(e){e.bindEvents(e.dragElement)},this.drag=function(e){if(o(e.target,"e-diagram")){if(e.event.touches&&e.event.touches.length>0){var t=void 0;for(r=i.symbolPaletteInstance.length-1;r>=0;r--)if(e.element.id===i.symbolPaletteInstance[r].id){t=i.symbolPaletteInstance[r].componentInstance;break}t&&window.sfBlazor.Diagram.invokeDiagramEvents(e.event,t,void 0,e)}}else{for(var n=document.getElementById("previewID"),s=void 0,r=i.symbolPaletteInstance.length-1;r>=0;r--)if(e.element.id===i.symbolPaletteInstance[r].id){s=i.symbolPaletteInstance[r].allowDrag;break}if(n){n.style.visibility="";var a=n.cloneNode(!0);a.style.display="Block",a.style.visibility=!0,a.setAttribute("class","e-cloneproperties e-draganddrop e-dragclone"),a.setAttribute("id","clonedNode");var l=document.getElementById("helperElement");l&&l.children[0]&&l.removeChild(l.children[0]),s||(l.style.opacity="0"),l.appendChild(a)}}},this.dragStop=function(e){var t=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone");if(t.length>0&&(t[0].style.width="1px",t[0].style.height="1px"),t.length>1)for(var n=t.length-1;n>0;n--)"helperElement"==t[n].id&&t[n].remove();if(!o(e.target,"e-diagram")){var s=document.getElementById("helperElement");s&&s.remove();for(var r=void 0,a=i.symbolPaletteInstance.length-1;a>=0;a--)if(e.element.id===i.symbolPaletteInstance[a].id){r=i.symbolPaletteInstance[a].componentInstance;break}r&&r.invokeMethodAsync("ElementDropToOutSideDiagram")}},this.symbolPaletteInstance=t,e&&this.initializeDrag(e)}return e.prototype.initializeDrag=function(e){var t=e.children[0];this.draggable=new sf.base.Draggable(t,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,preventDefault:!1});for(var i=document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip"),n=0;n<i.length;n++)this.droppable=new sf.base.Droppable(i[n],{accept:".e-dragclone",drop:this.drop,over:this.over,out:this.out});for(var s=document.getElementsByClassName("e-acrdn-header-content"),o=0;o<s.length;o++)s[o].style.textDecoration="inherit"},e.prototype.destroy=function(){this.draggable.destroy()},e}(),l=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):new i((function(t){t(e.value)})).then(r,a)}l((n=n.apply(e,t||[])).next())}))},d=function(e,t){var i,n,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},h=!1,c=!1,p=!1,u=!1,f=!1,m=!1,g=!1,v="",b={},y=!1,w=!1,C="Arial",S="black",E="Center",x=12,O="None",T="Wrap",A="WrapWithOverflow",N="CollapseSpace";return{createHtmlElement:function(e,t){var i=sf.base.createElement(e);return t&&this.setAttribute(i,t),i},setAttributeSvg:function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)"style"!==i[n]?e.setAttribute(i[n],t[i[n]]):this.applyStyleAgainstCsp(e,t[i[n]])},applyStyleAgainstCsp:function(e,t){for(var i=t.split(";"),n=0;n<i.length;n++){var s=i[n].split(":");2===s.length&&(e.style[s[0].trim()]=s[1].trim())}},setCanvasSize:function(e,t,i){e&&(e.setAttribute("width",t.toString()),e.setAttribute("height",i.toString()))},getHTMLLayer:function(e){var t=null;window[e+"_htmlLayer"]?t=window[e+"_htmlLayer"]:(t=this.getDiagramElement(e).getElementsByClassName("e-html-layer")[0],window[e+"_htmlLayer"]=t);return t},getDiagramElement:function(e,t){var i;return t&&(i=document.getElementById(t)),"msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name?i?i.querySelector("#"+e):document.getElementById(e):i?i.querySelector("#"+CSS.escape(e)):document.getElementById(e)},createCanvas:function(e,t,i){var n=this.createHtmlElement("canvas",{id:e});return this.setCanvasSize(n,t,i),n},setAttribute:function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)e.setAttribute(i[n],t[i[n]])},createMeasureElements:function(e,t,i,n,s,o,r,a,l,d){this.updateZoomPanTool(e),this.updateInnerLayerSize(t,i,n,void 0,r,a,l,d),s&&o&&this.onAddWireEvents(s,o);if(window.measureElement)window.measureElement.usageCount+=1;else{var h=this.createHtmlElement("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),c=this.createHtmlElement("span",{style:"display:inline-block ; line-height: normal"});h.appendChild(c);var p;p=this.createHtmlElement("img",{}),h.appendChild(p);var u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("xlink","http://www.w3.org/1999/xlink"),h.appendChild(u);var f=document.createElementNS("http://www.w3.org/2000/svg","path");u.appendChild(f);var m=document.createElementNS("http://www.w3.org/2000/svg","text");m.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),u.appendChild(m),window.measureElement=h,window.measureElement.usageCount=1,document.body.appendChild(h);window.measureElementCount?window.measureElementCount++:window.measureElementCount=1}},updateZoomPanTool:function(e){g=e},updateGridlines:function(e,t,i,n){var s=document.getElementById(e);if(s&&(s.setAttribute("width",t.width.toString()),s.setAttribute("height",t.height.toString()),s.children.length>0))for(var o=0;o<s.children.length;o++)i&&i.length?s.children[o].setAttribute("d",i[o]):n&&n.length&&(s.children[o].setAttribute("cx",n[o].x.toString()),s.children[o].setAttribute("cy",n[o].y.toString()))},updatePageBreaks:function(e,t,i,n,s,o,r,a,l,d,h,c){var p=document.getElementById(e),u=document.getElementById(t);if(p.children.length>0)for(var f=0;f<p.children.length;f++)p.children[f].setAttribute("x",i),p.children[f].setAttribute("y",n),p.children[f].setAttribute("width",s),p.children[f].setAttribute("height",o);if(u&&u.children.length>0){var m=0;for(f=0;f<u.children.length;f++)if(-1!=u.children[f].id.indexOf("_backgroundLayerrect"))u.children[f].setAttribute("x",i),u.children[f].setAttribute("y",n),u.children[f].setAttribute("width",s),u.children[f].setAttribute("height",o),u.children[f].setAttribute("transform",r);else if(c){var g=(a[0+m]+l)*h,v=(a[1+m]+d)*h,b=(a[2+m]+l)*h,y=(a[3+m]+d)*h;u.children[f].setAttribute("x1",g),u.children[f].setAttribute("y1",v),u.children[f].setAttribute("x2",b),u.children[f].setAttribute("y2",y),m+=4}}},updateInnerLayerSize:function(e,t,i,n,s,o,r,a,l,d){var h;if(d&&(t=(h=this.measureScrollValues(d)).width,i=h.height),null!=e&&null!=t&&null!=i&&e.length>0)for(var c=void 0,p=0;p<e.length-1;p++)if(c=document.getElementById(e[p]),p>=e.length-6){if(-1!=e[p].indexOf("_pattern"))this.updateGridlines(e[p],o,r,a);else if(-1!=e[p].indexOf("gridline")&&s&&c){var u=s.scale,f=-s.tx*u,g=-s.ty*u,v="translate("+s.tx*u+","+s.ty*u+")";c.setAttribute("transform",v),c.children[0].setAttribute("x",f.toString()),c.children[0].setAttribute("y",g.toString())}else if(s&&c){u=s.scale;var b="translate("+s.tx*u+","+s.ty*u+"),scale("+u+")";c.setAttribute("transform",b);var y=document.getElementById(e[p].split("_")[0]+"_htmlLayer_div"),w="position: absolute; top: 0px; left: 0px; pointer-events: all; transform: translate("+s.tx*u+"px,"+s.ty*u+"px) scale("+u+")";y.setAttribute("style",w);var C=document.getElementById(e[p].split("_")[0]+"_SelectorElement");if(l&&C&&C.children.length>0&&C.children.length==l.length)for(var S=0;S<C.children.length;S++)if("line"==C.children[S].tagName){var E=l[S],x=E.startPoint.x+E.x,O=E.startPoint.y+E.y,T=E.endPoint.x+E.x,A=E.endPoint.y+E.y;C.children[S].setAttribute("x1",x.toString()),C.children[S].setAttribute("y1",O.toString()),C.children[S].setAttribute("x2",T.toString()),C.children[S].setAttribute("y2",A.toString()),C.children[S].setAttribute("transform","rotate("+E.angle+" "+(E.x+E.width*E.pivotX)+" "+(E.y+E.height*E.pivotY)+")")}else if("path"==C.children[S].tagName){var N=l[S];C.children[S].setAttribute("transform","rotate("+N.angle+","+(N.x+N.width*N.pivotX)+","+(N.y+N.height*N.pivotY)+")translate("+N.x+","+N.y+")")}else if("rect"==C.children[S].tagName){var k=l[S];C.children[S].setAttribute("x",k.x),C.children[S].setAttribute("y",k.y),C.children[S].setAttribute("width",k.width),C.children[S].setAttribute("height",k.height),C.children[S].setAttribute("transform","rotate("+k.angle+","+(k.x+k.width*k.pivotX)+","+(k.y+k.height*k.pivotY)+")")}else"circle"==C.children[S].tagName&&(C.children[S].setAttribute("cx",l[S].cx),C.children[S].setAttribute("cy",l[S].cy))}}else c&&(c.style.width=t,c.style.height=i);if(m&&(m=!1),!d&&null!=e&&e.length>0){var I=document.getElementById(e[e.length-1]);return this.onChangeScrollValues(I,n)}return h},onChangeScrollValues:function(e,t){return h&&(h=!1),null!=e&&null!=t&&null!=t.x&&null!=t.y?(c&&(c=!1,p=!0),e.scrollLeft=t.x,e.scrollTop=t.y,this.measureScrollValues(e.id)):null},measureScrollValues:function(t){var i=document.getElementById(t);return new e(i.scrollLeft,i.scrollTop,i.scrollWidth,i.scrollHeight)},measurePath:function(t){if(t){window.measureElement.style.visibility="visible";var i=window.measureElement.children[2],n=this.getChildNode(i)[0];n.setAttribute("d",t);var s=n.getBBox(),o=new e(s.x,s.y,s.width,s.height);return window.measureElement.style.visibility="hidden",o}return new e(0,0,0,0)},openUrl:function(e){return l(this,void 0,void 0,(function(){return d(this,(function(t){return window.open(e,"_blank"),[2]}))}))},textEdit:function(e,t,i,n,o,r,a,l){var d=this,h=document.getElementById("diagram_editTextBoxDiv");e.id=l;var c=document.getElementById("diagram_editBox"),p=e.content;if(!h&&!c){h=this.createHtmlElement("div",{}),c=this.createHtmlElement("textarea",{});var u=document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip"),f=0;if(u.length>0)for(var m=0;m<u.length;m++){u[m].children[0].id.split("_")[0]==i&&(f=m)}u[f].children[0].appendChild(h),h.appendChild(c),c.appendChild(document.createTextNode(p)),this.diagram_editTextBoxDiv=h,this.diagram_editBox=c}var g=e.bounds.width<o.width?e.bounds.width:o.width;g=90>g?90:g;var v=this.measureHtmlText(e.style,t,p,void 0,void 0,g);0==v.width&&0==v.height&&(v.width=50,v.height=12);var b=a?r.scale:1;v.width=Math.max(v.width,50),s(h,{id:"diagram_editTextBoxDiv",style:"position: absolute;left:"+((n.x+r.tx)*r.scale-v.width/2*b-2.5)+"px;top:"+((n.y+r.ty)*r.scale-v.height/2*b-3)+"px;width:"+(v.width+1)*b+"px;height:"+v.height*b+"px; containerName:temp;"});var y=e.style;s(c,{id:"diagram_editBox",style:"width:"+(v.width+1)*b+"px;height:"+v.height*b+"px;line-height: normal;resize: none;outline: none;overflow: hidden;;font-family:"+y.fontFamily+";font-size:"+y.fontSize*b+"px;text-align:"+e.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"}),c.style.fontWeight=y.bold?"bold":"",c.style.fontStyle=y.italic?"italic":"",c.style.lineHeight=(1.2*y.fontSize+"px;").toString();var w=document.getElementById(e.id+"_text");w&&w.setAttribute("visibility","hidden"),c.style.textDecoration=y.textDecoration?y.textDecoration:"",c.addEventListener("input",(function(i){d.inputChange(i,e,t,o,n,r,a)})),c.select(),window.annotation=e},inputChange:function(e,t,i,n,s,o,r){var a,l,d,h,c,p=this.diagram_editBox,u=this.diagram_editTextBoxDiv,f=p.value,m=f.split("\n");a=(a=n.width<t.bounds.width?n.width:t.bounds.width)>90?a:90,c=this.measureHtmlText(t.style,i,f,void 0,void 0,a),l=Number(p.style.fontSize.split("px")[0]),m.length>1&&""===m[m.length-1]&&(c.height=c.height+l);var g=r?o.scale:1;h=(90>(h=c.width)?90:h)*g,d=(12>c.height?12:c.height)*g,u.style.left=(s.x+o.tx)*o.scale-h/2-2.5+"px",u.style.top=(s.y+o.ty)*o.scale-d/2-3+"px",u.style.width=h+"px",u.style.height=d+"px",p.style.minHeight="12px",p.style.minWidth="90px",p.style.width=h+"px",p.style.height=d+"px"},measureHtmlText:function(e,t,i,n,s,o){var r={},a=this.createHtmlElement("span",{style:"display:inline-block; line-height: normal"});return e.bold&&(a.style.fontWeight="bold"),e.italic&&(a.style.fontStyle="italic"),void 0!==n&&(a.style.width=n.toString()+"px"),void 0!==s&&(a.style.height=s.toString()+"px"),void 0!==o&&(a.style.maxWidth=o.toString()+"px"),a.style.fontFamily=e.fontFamily,a.style.fontSize=e.fontSize+"px",a.style.color=e.color,a.textContent=i,a.style.whiteSpace=this.whiteSpaceToString(t,e.textWrapping),a.style.wordBreak=void 0!==o?"break-word":this.wordBreakToString(e.textWrapping),document.body.appendChild(a),r.width=a.offsetWidth,r.height=a.offsetHeight,document.body.removeChild(a),r},getChildNode:function(e){var t,i=[];if("msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name)for(var n=0;n<e.childNodes.length;n++)1===(t=e.childNodes[n]).nodeType&&i.push(t);else i=e.children;return i},measureBounds:function(e,t,i,n){return l(this,void 0,void 0,(function(){var s,o,r,a,l,h,c,p,u,f,m,g,b,y,w,C,S,E,x,O,T,A,N,k,I,M,L,B;return d(this,(function(d){switch(d.label){case 0:if(null!=n)for(o=document.getElementsByClassName("e-acrdn-panel e-content-hide"),s=[],B=0;B<o.length;B++)s[B]=o[B].style.display,o[B].style.display="block";if(r={},a={},l={},h={},c={},p="measureElement",e)for(E=Object.keys(e).map((function(t){return[e[t],t]})),window[p].style.visibility="visible",x=window[p].children[2],u=this.getChildNode(x)[0],A=0;A<E.length;A++)"Path"==E[A][0]?(g=E[A][1],u.setAttribute("d",g),m=u.getBBox(),L={x:m.x,y:m.y,width:m.width,height:m.height},a[g]=L):-1!=E[A][0].indexOf("GetBoundingClientRect")&&((f=document.getElementById(E[A][1]))&&(m=f.getBoundingClientRect(),a[E[A][0]]={x:m.x,y:m.y,width:m.width,height:m.height}),"GetBoundingClientRect"==E[A][0]&&(v=E[A][1],a.GetScrollerBounds=this.measureScrollValues(E[A][1])));if(t)for(E=Object.keys(t).map((function(e){return[t[e],e]})),A=0;A<E.length;A++)g=E[A][1],b=t[g].content,y=t[g].style,w=t[g].bounds,C=t[g].nodeSize,w.width=null==w.width?void 0:w.width,w.height=null==w.height?void 0:w.height,C.width=null==C.width?void 0:C.width,C.height=null==C.height?void 0:C.height,l[g]=this.measureText(w,y,b,w.width||C.width);return i&&(S=Object.keys(i).map((function(e){return[i[e],e]}))).length>0?(0,E={},[4,this.loadImage(S,0,E)]):[3,2];case 1:d.sent(),h=E,d.label=2;case 2:if(n&&(E=Object.keys(n).map((function(e){return[n[e],e]})),window[p].style.visibility="visible",x=window[p].children[2],E.length>0)){for(O={},T={},A=0;A<E.length;A++)N=E[A][0],k=document.getElementById(N),(I=k.cloneNode(!0)).id=I.id+"_copy",x.appendChild(I),M=I.getBoundingClientRect(),L=x.getBoundingClientRect(),T={x:M.left-L.left,y:M.top-L.top,width:M.width,height:M.height},O[E[A][1]]=T,x.removeChild(I);c=O}if(a.GetScrollerWidth=this.getScrollerWidth(),r.Path=a,r.Text=l,r.Image=h,r.Native=c,null!=s)for(B=0;B<o.length;B++)o[B].style.display=s[B].toString();return window[p].style.visibility="hidden",[2,r]}}))}))},measureText:function(e,t,i,n,s){var o,r,a={},l={width:0,height:0},d=this.getTextOptions(i,e,t,n);return o=this.wrapSvgText(d,s,n),r=this.wrapSvgTextAlign(d,o),l.width=r.width,r.width>=n&&"Wrap"!==d.textOverflow&&(l.width=n),l.height=o.length*d.fontSize*1.2,r.width>d.width&&"Wrap"!==d.textOverflow&&"NoWrap"===d.textWrapping&&(o[0].text=this.overFlow(d.content,d)),a.Bounds=l,a.WrapBounds=r,a.ChildNodes=o,a},getTextOptions:function(e,t,i,n){var s={fill:i.fill,stroke:i.strokeColor,strokeWidth:i.strokeWidth,dashArray:i.strokeDashArray,opacity:i.opacity,gradient:i.gradient,width:n||t.width,height:t.height};return s.fontSize=i.fontSize||x,s.fontFamily=i.fontFamily||C,s.textOverflow=i.textOverflow||T,s.textDecoration=i.textDecoration||O,s.doWrap=i.doWrap,s.whiteSpace=this.whiteSpaceToString(i.whiteSpace||N,i.textWrapping||A),s.content=e,s.textWrapping=i.textWrapping||A,s.breakWord=this.wordBreakToString(i.textWrapping||A),s.textAlign=this.textAlignToString(i.textAlign||E),s.color=i.color||S,s.italic=i.italic||w,s.bold=i.bold||y,s.dashArray="",s.strokeWidth=0,s.fill="",s},whiteSpaceToString:function(e,t){if("NoWrap"===t&&"PreserveAll"===e)return"pre";var i="";switch(e){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i},wordBreakToString:function(e){var t="";switch(e){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t},textAlignToString:function(e){var t="";switch(e){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t},wrapSvgText:function(e,t,i){var n,s,o=[],r=0,a=t||e.content;if("nowrap"!==e.whiteSpace&&"pre"!==e.whiteSpace)if("breakall"===e.breakWord)for(n="",n+=a[0],r=0;r<a.length;r++)if((s=this.bBoxText(n,e))>=e.width&&n.length>0)o[o.length]={text:n,x:0,dy:0,width:s},n="";else{(n+=a[r+1]||"").indexOf("\n")>-1&&(o[o.length]={text:n,x:0,dy:0,width:this.bBoxText(n,e)},n="");var l=this.bBoxText(n,e);Math.ceil(l)+2>=e.width&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n=""),r===a.length-1&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n="")}else o=this.wordWrapping(e,t,i);else o[o.length]={text:a,x:0,dy:0,width:this.bBoxText(a,e)};return o},wordWrapping:function(e,t,i){var n,s,o,r,a=[],l="",d=0,h=0,c="nowrap"!==e.whiteSpace,p=(t||e.content).split("\n");for(d=0;d<p.length;d++)for(n="NoWrap"!==e.textWrapping?p[d].split(" "):"NoWrap"===e.textWrapping?[p[d]]:p,h=0;h<n.length;h++){s=(l+=((0!==h||1===n.length)&&c&&l.length>0?" ":"")+n[h])+" "+(n[h+1]||"");var u=this.bBoxText(s,e);Math.floor(u)>(i||e.width)-2&&l.length>0?(a[a.length]={text:l,x:0,dy:0,width:s===l?u:l===r?o:this.bBoxText(l,e)},l=""):h===n.length-1&&(a[a.length]={text:l,x:0,dy:0,width:u},l=""),r=s,o=u}return a},wrapSvgTextAlign:function(e,t){var i,n,s={x:0,width:0},o=0;for(o=0;o<t.length;o++)n=i=t[o].width,i="left"===e.textAlign?0:"center"===e.textAlign?i>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:-i/2:"right"===e.textAlign?-i:t.length>1?0:-i/2,t[o].dy=1.2*e.fontSize,t[o].x=i,s?(s.x=Math.min(s.x,i),s.width=Math.max(s.width,n)):s={x:i,width:n};return s},overFlow:function(e,t){var i,n=0,s=0,o=0,r="";i=e.length;var a=0;do{o>0&&(n=s),s=Math.floor(this.middleElement(n,i)),r+=e.substr(n,s),o=this.bBoxText(r,t)}while(o<=t.width);for(r=r.substr(0,n),a=n;a<i;a++)if(r+=e[a],(o=this.bBoxText(r,t))>=t.width){e=e.substr(0,r.length-1);break}return"Ellipsis"===t.textOverflow?(e=e.substr(0,e.length-3),e+="..."):e=e.substr(0,e.length),e},middleElement:function(e,t){return(e+t)/2},getScrollerWidth:function(){var e=this.createHtmlElement("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(e);var t=e.getBoundingClientRect().width;e.style.overflow="scroll";var i=this.createHtmlElement("div",{style:"width:100%"});e.appendChild(i);var n=i.getBoundingClientRect().width;return e.parentNode.removeChild(e),{x:0,y:0,width:t-n,height:0}},pathPoints:function(e){return l(this,void 0,void 0,(function(){var t,i,n,s;return d(this,(function(o){if(t={},e)for(i=Object.keys(e).map((function(t){return[e[t],t]})),n=0;n<i.length;n++)i.length>0&&(s=i[n][1],t[i[n][0]]=this.findSegmentPoints(s));return[2,t]}))}))},findSegmentPoints:function(e){var t,i,n=[];window.measureElement.style.visibility="visible";var s=window.measureElement.children[2],o=this.getChildNode(s)[0];o.setAttributeNS(null,"d",e);var r=o.getTotalLength();for(i=0;i<=r;i+=10)t=o.getPointAtLength(i),n.push({x:t.x,y:t.y});return window.measureElement.style.visibility="hidden",n},loadImage:function(e,t,i){return l(this,void 0,void 0,(function(){var n,o,r;return d(this,(function(a){switch(a.label){case 0:return n=new Promise((function(i,n){var o={};window.measureElement.style.visibility="visible",window.measureElement.children[1].setAttribute("src",e[t][0]),window.measureElement.style.visibility="hidden";var r=document.createElement("img");r.setAttribute("src",e[t][0]),s(r,{id:"imagesf"+t+"imageNode",style:"display: none;"}),document.body.appendChild(r),r.onload=function(e){var t=e.currentTarget;o={width:t.width,height:t.height},i(o)}})),o=i,r=e[t][1],[4,n];case 1:return o[r]=a.sent(),t!=e.length-1?[3,2]:[2,i];case 2:return t++,[4,this.loadImage(e,t,i)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))},bBoxText:function(e,t){window.measureElement.style.visibility="visible";var i=window.measureElement.children[2],s=this.getChildNode(i)[1];s.textContent=e,n(s,"font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+";font-weight:"+(t.bold?"bold":"normal"));var o=s.getBBox().width;return window.measureElement.style.visibility="hidden",o},endEdit:function(e){setTimeout((function(){var e=document.getElementById(i.id+"_text");e&&e.setAttribute("visibility","visible")}),100);var t=this.diagram_editBox,i=window.annotation,n=t.value,s=i.style,o=i.bounds,r=i.nodeSize;r.width=null==r.width?void 0:r.width,r.height=null==r.height?void 0:r.height;var a={},l={};return a[i.id]=this.measureText(o,s,n,o.width||r.width),a[i.id].Content=n,l.Text=a,this.diagram_editTextBoxDiv.remove(),l},onAddWireEvents:function(e,t){var i=this,n=document.getElementById(e);b[e]=t;var s=this;n.addEventListener("mousedown",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),window.addEventListener("resize",(function(e){setTimeout((function(){s.invokeDiagramEvents(e,null,v)}),800)})),n.addEventListener("mousemove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),n.addEventListener("mouseup",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("mouseleave",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("touchstart",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),n.addEventListener("touchmove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),n.addEventListener("touchend",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("scroll",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("mousewheel",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("keydown",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("keyup",(function(e){i.invokeDiagramEvents(e,t)}))},invokeDiagramEvents:function(e,t,i,n){var s,o="diagram_editTextBoxDiv",r=this[o],a={};if("resize"==e.type){var l=document.getElementById(i);if(!l&&document.getElementsByClassName("e-diagram").length>0){var d=document.getElementsByClassName("e-diagram").length;i=document.getElementsByClassName("e-diagram")[d-1].id+"_content",l=document.getElementById(i),v=i}t=b[i]}if("mousedown"!=e.type&&"touchstart"!=e.type||(f=!0),"mouseup"!=e.type&&"touchend"!=e.type&&"mouseleave"!=e.type||(f=!1),"mouseleave"!=e.type&&"Escape"!=e.key&&("mousedown"!=e.type&&"touchstart"!=e.type||"diagram_editBox"==e.target.id)||!r||(window.isEscape="Escape"==e.key,s=this.endEdit(e,this),this[o]=r=document.getElementById("diagram_editTextBoxDiv"),e.currentTarget.focus()),a=this.getMouseEvents(e,i,n),"Escape"==e.key){var y=document.getElementById("helperElement");y&&(sf.base.remove(y),y.remove())}"mousewheel"==e.type&&e.ctrlKey?c?setTimeout((function(){c=!1}),1e3):(c=!0,t.invokeMethodAsync("InvokeDiagramEvents",a,s)):r||("mousemove"!=e.type&&"touchmove"!=e.type||h)&&("mousemove"==e.type||"touchmove"==e.type)&&u||(("mousemove"==e.type||"touchmove"==e.type&&!m)&&f&&g&&(h=!0,a.isPan=!0),n?t.invokeMethodAsync("InvokeDiagramEvents",a):("keydown"==e.type||"keyup"==e.type||"scroll"!=e.type||"scroll"==e.type&&!m)&&("scroll"!=e.type||"scroll"==e.type&&!p?t.invokeMethodAsync("InvokeDiagramEvents",a,s):"scroll"==e.type&&p&&(p=!1))),"mouseup"!=e.type&&"mousemove"!=e.type&&"touchend"!=e.type&&"touchmove"!=e.type||!e.currentTarget||!e.currentTarget.id||this[o]||e.currentTarget.focus({preventScroll:!0})},isForeignObject:function(e,t){var i=e;if(i)for(;null!==i.parentNode;){if("string"==typeof i.className&&(!t&&-1!==i.className.indexOf("foreign-object")||t&&-1!==i.className.indexOf("e-diagram-text-edit")))return i;i=i.parentNode}return null},getTouches:function(e){var t=[];if(e&&e.touches&&e.touches.length>0)for(var i=0;i<e.touches.length;i++)t.push({pageX:e.touches[i].pageX,pageY:e.touches[i].pageY,screenX:e.touches[i].screenX,screenY:e.touches[i].screenY,clientX:e.touches[i].clientX,clientY:e.touches[i].clientY});return t},getMouseEvents:function(e,t,i){var n={};if(-1!=e.type.indexOf("touch")?((n={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,type:e.type}).touches=this.getTouches(e),e.changedTouches&&e.changedTouches[0]&&(n.offsetX=e.changedTouches[0].clientX,n.offsetY=e.changedTouches[0].clientY),i&&"out"==i.name&&(n.type="mouseleave"),"touchmove"==e.type&&e.preventDefault()):n={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,key:e.key,keyCode:e.keyCode,button:e.button},t&&"resize"==e.type){var s=this.measureScrollValues(t),r=document.getElementById(t);n.diagramCanvasScrollBounds=s,n.diagramGetBoundingClientRect=r.getBoundingClientRect()}else if(i){if(i.target.id&&""!=i.target.id){var a=o(i.target,"e-diagram");if(a&&a.id&&""!=a.id){var l=a.id;s=this.measureScrollValues(l);n.diagramCanvasScrollBounds=s,n.diagramGetBoundingClientRect=document.getElementById(l+"_content").getBoundingClientRect()}}}else if(e.currentTarget&&e.currentTarget.id){s=this.measureScrollValues(e.currentTarget.id);n.diagramCanvasScrollBounds=s,n.diagramGetBoundingClientRect=e.currentTarget.getBoundingClientRect()}else if(e.target){s=this.measureScrollValues(e.target.id);n.diagramCanvasScrollBounds=s,n.diagramGetBoundingClientRect=e.target.getBoundingClientRect()}return"mousewheel"==e.type&&(e.ctrlKey&&e.preventDefault(),e.currentTarget.focus(),n.wheelDelta=e.wheelDelta,m=!0),"touchmove"==e.type&&e.touches.length>1&&(m=!0),"mousedown"!=e.type&&"touchstart"!=e.type||(u=!0),"mouseup"!=e.type&&"touchend"!=e.type||(u=!1),t||this.isForeignObject(e.target,!0)||"mouseleave"!=e.type&&"mousmove"!=e.type&&"mousedown"!=e.type&&"mouseup"!=e.type&&"keydown"!=e.type&&"keyup"!=e.type||e.preventDefault(),n},initialiseModule:function(e,t,i){return l(this,void 0,void 0,(function(){var n,s=this;return d(this,(function(o){return"symbolPaletteInstance",window.symbolPaletteInstance?(n={id:e.children[0].id,componentInstance:t,allowDrag:i},window.symbolPaletteInstance.push(n)):(n={id:e.children[0].id,componentInstance:t,allowDrag:i},window.symbolPaletteInstance=[],window.symbolPaletteInstance.push(n)),e.addEventListener("mousedown",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),s.invokePaletteEvents(e,t)})),e.addEventListener("mousemove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),s.invokePaletteEvents(e,t)})),e.addEventListener("mouseup",(function(e){s.invokePaletteEvents(e,t)})),e.addEventListener("mouseleave",(function(e){s.invokePaletteEvents(e,t)})),e.addEventListener("touchstart",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),s.invokePaletteEvents(e,t)})),e.addEventListener("touchmove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),s.invokePaletteEvents(e,t)})),e.addEventListener("touchend",(function(e){s.invokePaletteEvents(e,t)})),setTimeout((function(){this.symbolPaletteDragAndDropModule=new a(e,window.symbolPaletteInstance)}),100),[2]}))}))},invokePaletteEvents:function(e,t){var i;"touchstart"!=e.type&&"touchend"!=e.type&&e.target&&o(e.target,"e-acrdn-header")&&e.preventDefault();var n=this.palettegetMouseEvents(e);if(i=2===e.target.id.split("_").length?e.target.id.split("_")[0]:function(e,t,i){for(var n,s=e;s&&!r(s,i);){if(s.id&&-1!=s.id.indexOf(t)){n=s.id.split(t)[0];break}s=s.parentNode}return n}(e.target,"_Container","e-symbolpalette"),"mousemove"==e.type&&!h||"mousemove"!=e.type||!u){if(e&&e.target&&e.type){var s=document.getElementById(e.target.id),a=void 0;if(s){for(var l=0;l<s.classList.length;l++)if("e-symbol-draggable"==s.classList[l]){(a=e.target).classList.add("e-symbol-hover");break}var d=document.getElementsByClassName("e-symbol-hover");if(d&&d.length>0)for(var c=0;c<d.length;c++){var p=d[c];(a&&a!=p||null==a)&&p.classList.remove("e-symbol-hover")}}}t.invokeMethodAsync("InvokePaletteEvents",n,i)}},palettegetMouseEvents:function(e){var t={};return-1!=e.type.indexOf("touch")?((t={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,type:e.type}).touches=this.getTouches(e),e.changedTouches&&e.changedTouches[0]&&(t.offsetX=e.changedTouches[0].clientX,t.offsetY=e.changedTouches[0].clientY),"touchmove"==e.type&&e.preventDefault()):t={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type},t},exportDiagram:function(t,i,n,s,o,r,a,h){return l(this,void 0,void 0,(function(){var c,p=this;return d(this,(function(u){return c=this,[2,new Promise((function(u,f){return l(p,void 0,void 0,(function(){var l,p,f,m,g,v,b,y;return d(this,(function(d){switch(d.label){case 0:return l="data",i=i,s=s,p=t.margin||{},t.region=t&&0==t.region?"PageSettings":1==t.region?"Content":"ClipBounds",t.fileName=r,t.mode=h?"Download":"Data",t.format=0===a?"JPEG":1===a?"PNG":2===a?"SVG":a,t.orientation=t&&0===t.orientation?"Landscape":"Portrait",f=n,m=new e(n.x,n.y,n.width,n.height),(g=t.clipBounds)&&(f.x=g.x?g.x:f.x,f.y=g.y?g.y:f.y,f.width=g.width||f.width,f.height=g.height||f.height),p={top:p.top,bottom:p.bottom,right:p.right,left:p.left},"PageSettings"!==t.region&&(f.x-=p.left,f.y-=p.top,f.width+=p.left+p.right,f.height+=p.top+p.bottom),v=t.fileName||"diagram",[4,c.setCanvas(t,f,m,p,v,s,i)];case 1:return null!==(l=d.sent())&&(o||"Data"===t.mode&&"SVG"===t.format?u(l):(b={id:i+"_ExportImage",src:l},t.margin={top:0,bottom:0,right:0,left:0},(y=c.createHtmlElement("img",b)).onload=function(){var e=c.getMultipleImage(y,t,i,!0,s);u(JSON.stringify(e))})),[2]}}))}))}))]}))}))},setCanvas:function(t,i,n,s,o,r,a){return l(this,void 0,void 0,(function(){var l,h,c,p,u;return d(this,(function(d){switch(d.label){case 0:return t.clipBounds=i,h=new e(n.x,n.y,n.width,n.height),"scaleX","scaleY","scaleOffsetX","scaleOffsetY",c=new e(i.x,i.y,i.width,i.height),this.setScaleValueforCanvas(t,i,r),[4,this.exportAsImage({clipBounds:i,margin:s,region:t.region,scaleX:t.scaleX,scaleY:t.scaleY,scaleOffsetX:t.scaleOffsetX,scaleOffsetY:t.scaleOffsetY},o,a,t,h,c,r,"Download"===t.mode)];case 1:return p=d.sent(),"SVG"!==t.format&&(u=l="JPEG"===t.format?p.toDataURL("image/jpeg"):"PNG"===t.format?p.toDataURL("image/png"):"BMP"===t.format?p.toDataURL("image/bmp"):p.toDataURL()),"Data"===t.mode?"SVG"===t.format?[2,p]:[2,l]:(this.canvasMultiplePage(t,p,s,u,o),[2,null])}}))}))},exportAsImage:function(e,t,i,n,s,o,r,a){return l(this,void 0,void 0,(function(){var l;return d(this,(function(d){switch(d.label){case 0:return[4,this.imageExport(e,t,i,n,s,o,r,a)];case 1:return(l=d.sent())instanceof Promise?(l.then((function(e){return e})),[2,l]):[2,l]}}))}))},imageExport:function(e,t,i,n,s,o,r,a){return l(this,void 0,void 0,(function(){var a;return d(this,(function(l){return a=this,document.getElementById(i),[2,new Promise((function(l,d){e.clipBounds;var h=e.margin,c=s.x,p=s.y,u=s.width,f=s.height,m=document.createElementNS("http://www.w3.org/2000/svg","svg"),g={x:String(o.x),y:String(o.y),width:String(o.width),height:String(o.height)};a.setAttributeSvg(m,g),g={x:String(c),y:String(p),width:String(u+h.left+h.right),height:String(f+h.top+h.bottom)};var v,b,y=document.getElementById(i+"_backgroundLayer_svg").cloneNode(!0),w=document.getElementById(i+"_diagramLayer_svg").cloneNode(!0);if(y){for(var C=0;C<y.childNodes.length;C++){if((x=y.childNodes[C]).id===i+"_backgroundImageLayer"&&(b=!0),x.id===i+"_backgroundLayer"){v=x;for(var S=x.childNodes.length-1;S>=0;S--){(E=x.childNodes[S]).id!==i+"_backgroundLayerrect"&&x.removeChild(E)}}}if(v&&y.removeChild(v),"PageSettings"!==n.region&&a.setAttributeSvg(y,g),m.appendChild(y),v){for(S=v.childNodes.length-1;S>=0;S--){var E=v.childNodes[S];b||E.setAttribute("fill","transparent"===r.background.background?"white":r.background.background)}m.appendChild(v)}if("PageSettings"!==n.region){a.setTransform(y,o,h);for(C=0;C<y.childNodes.length;C++){(x=y.childNodes[C]).id!==i+"_backgroundImageLayer"&&x.id!==i+"_backgroundLayer"||a.setTransform(x,o,h)}}}m.appendChild(w),a.setTransform(w,o,h);for(C=0;C<w.childNodes.length;C++){var x;(x=w.childNodes[C]).id===i+"_diagramlayer"&&a.setTransform(x,o,h)}var O=window.URL.createObjectURL(new Blob([(new window.XMLSerializer).serializeToString(m)],{type:"image/svg+xml"}));if("SVG"===n.format){var T;"Data"===n.mode&&"SVG"===n.format&&(T=(new window.XMLSerializer).serializeToString(m),l(T));var A=[],N=(new window.XMLSerializer).serializeToString(m);A.push(N);var k,I=0;if("Download"===n.mode)for(I=0;I<A.length;I++)k=new Blob([A[I]],{type:"application/octet-stream"}),"msie"===sf.base.Browser.info.name?window.navigator.msSaveOrOpenBlob(k,t+".svg"):a.triggerDownload("SVG",t,O)}else{var M=document.createElement("canvas"),L=M.getContext("2d"),B=new Image;B.onload=function(){M.height=B.height,M.width=B.width,r.background.imageSource?L.fillStyle="transparent":L.fillStyle="transparent"===r.background.background?"white":r.background.background,L.fillRect(0,0,M.width,M.height),L.drawImage(B,0,0),window.URL.revokeObjectURL(O),l(M)},B.src=O}}))]}))}))},triggerDownload:function(e,t,i){var n=document.createElement("a");n.download=t+"."+e.toLocaleLowerCase(),n.href=i,n.click()},canvasMultiplePage:function(e,t,i,n,s){var o=this,r=[],a=n.substring(n.indexOf(":")+1,n.indexOf(";")),l=a.substring(a.indexOf("/")+1),d=(l="jpeg"===l?void 0:l.toUpperCase())||"JPG";if(e.fitToPage){if(e.pageHeight=e.pageHeight?e.pageHeight:(void 0).height,e.pageWidth=e.pageWidth?e.pageWidth:(void 0).width,e.pageHeight=e.pageHeight?e.pageHeight:t.width,e.pageWidth=e.pageWidth?e.pageWidth:t.height,i=e.margin||{},e.orientation&&("Landscape"===e.orientation&&e.pageHeight>e.pageWidth||"Portrait"===e.orientation&&e.pageWidth>e.pageHeight)){var h=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=h}e.margin={top:isNaN(i.top)?0:i.top,bottom:isNaN(i.bottom)?0:i.bottom,left:isNaN(i.left)?0:i.left,right:isNaN(i.right)?0:i.right};var c={id:void 0+"_printImage",src:n},p=this.createHtmlElement("img",c);p.onload=function(){r=o.getMultipleImage(p,e,!0),o.exportImage(r,s,d,n)}}else r=[n],this.exportImage(r,s,d,n)},exportImage:function(e,t,i,n){for(var s=[],o=e instanceof HTMLElement?0:e.length,r=0;r<o;r++){for(var a=e[r].replace(/^data:[a-z]*;,/,"").split(","),l=atob(a[1]),d=new ArrayBuffer(l.length),h=new Uint8Array(d),c=0;c<l.length;c++)h[c]=l.charCodeAt(c);s.push(d)}for(var p=0;p<s.length;p++){var u=new Blob([s[p]],{type:"application/octet-stream"});if("msie"===sf.base.Browser.info.name)window.navigator.msSaveOrOpenBlob(u,t+"."+i);else{var f=window.URL.createObjectURL(u),m=document.createElement("a");m.download=t+"."+i.toLocaleLowerCase(),m.href=f,m.click()}}},setScaleValueforCanvas:function(e,t,i){var n="scaleX";e[n]=1,e.scaleY=1,e.scaleOffsetX=0,e.scaleOffsetY=0,e.pageHeight=e.pageHeight||i.height,e.pageWidth=e.pageWidth||i.width;var s=e.orientation||i.orientation;if(s||(s="Portrait"),"Portrait"===s){if(e.pageWidth>e.pageHeight){var o=e.pageHeight;e.pageHeight=e.pageWidth,e.pageWidth=o}}else if(e.pageHeight>e.pageWidth){o=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=o}e.pageWidth&&e.pageHeight&&!e.fitToPage&&(e.stretch="Meet");var r=e.pageHeight||t.height,a=e.pageWidth||t.width;"Stretch"!==e.stretch&&"Meet"!==e.stretch&&"Slice"!==e.stretch||(e[n]=a/t.width,e.scaleY=r/t.height,"Meet"===e.stretch?(e[n]=e.scaleY=Math.min(e[n],e.scaleY),e.scaleOffsetY=(e.pageHeight-t.height*e[n])/2,e.scaleOffsetX=(e.pageWidth-t.width*e[n])/2):"Slice"===e.stretch&&(e[n]=e.scaleY=Math.max(e[n],e.scaleY)),t.width=a,t.height=r),t.x*=e[n],t.y*=e.scaleY},setTransform:function(e,t,i){e.setAttribute("transform","translate("+(-t.x+i.left)+", "+(-t.y+i.top)+")")},getPrintCanvasStyle:function(e,i){var n=0,s=0,o=new t;if(n=e.width,s=e.height,i.fitToPage&&(i.pageHeight||i.pageWidth)&&(s=i.pageHeight?i.pageHeight:s,n=i.pageWidth?i.pageWidth:n),i.orientation&&i.fitToPage&&("Landscape"===i.orientation&&s>n||"Portrait"===i.orientation&&n>s)){var r=n;n=s,s=r}return o.height=s,o.width=n,o},getMultipleImage:function(e,t,i){var n=[],s=this.createHtmlElement("div",{}),o=this.getPrintCanvasStyle(e,t),r=t.margin,a=r.left,l=r.top,d=r.right,h=r.bottom,c=0,p=o.width+c,u=o.height+0,f=0,m=0;if(t&&t.fitToPage){s.style.height="auto",s.style.width="auto";var g=e.height,v=e.width,b=0,y=0,w=void 0,C=0,S=0,E=void 0,x=void 0;do{do{C=o.width,S=o.height,f+o.width>=v&&(C=v-f),m+o.height>=g&&(S=g-m),(E=(x=this.createCanvas(void 0+"_multiplePrint",o.width,o.height)).getContext("2d")).drawImage(e,c+f+a,0+m+l,C-d-a,S-h-l,0+a,0+l,C-d-a,S-h-l),f+o.width>=v&&(f-=f-v),w="PNG"===t.format?x.toDataURL("image/png"):"JPEG"===t.format?x.toDataURL("image/jpeg"):x.toDataURL(),E.restore(),f+=p,i?n.push(w):this.printImage(s,w,b+""+y,p+"px;",u+"px;"),b++}while(f<v);y++,b=c=f=0,m+o.height>=g&&(m-=m-g),m+=u}while(m<g)}else{var O=this.getPrintCanvasStyle(e,t),T=O.width,A=O.height;(E=(x=this.createCanvas(void 0+"_diagram",T,A)).getContext("2d")).drawImage(e,0+a,0+l,e.width-(d+a),e.height-(l+h),0+a,0+l,T-(d+a),A-(l+h));w="PNG"===t.format?x.toDataURL("image/png"):"JPEG"===t.format?x.toDataURL("image/jpeg"):x.toDataURL();E.restore(),i?n.push(w):this.printImage(s,w,0)}return i?n:s},printImage:function(e,t,i,n,o){var r={class:"e-diagram-print-page",style:"width:"+n+"height:"+o},a=this.createHtmlElement("img",r),l=this.createHtmlElement("div",r);s(a,r={id:void 0+"_multiplePrint_img"+i,style:"float:left",src:t}),l.appendChild(a),e.appendChild(l)},print:function(e,t,i,n){return l(this,void 0,void 0,(function(){var s,o;return d(this,(function(r){switch(r.label){case 0:return s={width:i.width,height:i.height},e.mode="Data",n=n,t=t,[4,this.exportDiagram(e,t,i,n,!0,void 0,void 0,!1)];case 1:return o=r.sent(),e.fitToPage||(e.pageWidth=s.width,e.pageHeight=s.height),this.printImages(o,e),[2,o]}}))}))},printImages:function(e,t){var i=this,n={id:void 0+"_printImage",src:e};t.margin={top:0,bottom:0,right:0,left:0};var s=this.createHtmlElement("img",n);s.onload=function(){var e=i.getMultipleImage(s,t),n=window.open("");null!=n&&e instanceof HTMLElement&&(n.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),n.addEventListener("load",(function(e){setTimeout((function(){n.window.print()}),3e3)})),n.document.write("<center>"+e.innerHTML+"</center>"),n.document.close())}},exportImages:function(e,t){var i=this,n=t&&t.region?t.region:"Content",o=t.margin||{};o={top:isNaN(o.top)?0:o.top,bottom:isNaN(o.bottom)?0:o.bottom,left:isNaN(o.left)?0:o.left,right:isNaN(o.right)?0:o.right};var r=this.getDiagramBounds(n,{});t.clipBounds&&(r.x=isNaN(t.clipBounds.x)?r.x:t.clipBounds.x,r.y=isNaN(t.clipBounds.y)?r.y:t.clipBounds.y,r.width=t.clipBounds.width||r.width,r.height=t.clipBounds.height||r.height);var a=document.createElement("img");s(a,{src:e});var l=this;a.onload=function(){var n=i.createCanvas(l.Diagram.id+"innerImage",r.width+(o.left+o.right),r.height+(o.top+o.bottom)),s=n.getContext("2d");if(s.fillStyle=l.diagram.pageSettings.background.color,s.fillRect(0,0,r.width+(o.left+o.right),r.height+(o.top+o.bottom)),s.drawImage(a,0,0,r.width,r.height,o.left,o.top,r.width,r.height),e=n.toDataURL(),t.printOptions)l.printImages(e,t);else{s.restore();var d=t.fileName||"diagram";i.canvasMultiplePage(t,n,o,e,d)}}}}}()},"./modules/sf-dialog.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Dialog=function(){"use strict";var e="e-dlg-target",t=function(){function t(e){this.popupObj=null,this.zIndex=1e3,this.height="auto",this.width="100%",this.resizeIconDirection="SouthEast",this.visible=!0,this.isModal=!1,this.enableRtl=!1,this.enableResize=!1,this.closeOnEscape=!0,this.allowDragging=!1,this.allowMaxHeight=!0,this.allowPrerender=!1,this.hasFocusableNode=!1,this.openedEnabled=!1,this.closedEnabled=!1,this.onDragEnabled=!1,this.onDragStartEnabled=!1,this.onDragStopEnabled=!1,this.resizingEnabled=!1,this.onResizeStartEnabled=!1,this.onResizeStopEnabled=!1,this.isOpenFullScreen=!1,this.dlgContainer=void 0,this.animationSettings={delay:0,duration:400,effect:"Fade"},this.position={X:"center",Y:"center"},window.sfBlazor=window.sfBlazor,this.updateContext(e),this.isInitialLoad=e.isInitial,window.sfBlazor.setCompInstance(this),this.initialize()}return t.prototype.updateContext=function(e){sf.base.extend(this,this,e)},t.prototype.initialize=function(){this.calculatezIndex=1e3===this.zIndex,this.render(),this.element.classList.remove("e-blazor-hidden"),this.setWidth(),this.setMinHeight(),this.enableResize&&(this.setResize(!0),("None"===this.animationSettings.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode)&&this.getMinHeight()),this.bindEvent(this.element)},t.prototype.setWidth=function(){"100%"===this.width?this.element.style.width="":(sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)}),"auto"===this.width&&this.refreshPosition())},t.prototype.setHeight=function(){sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.height)})},t.prototype.setMinHeight=function(){""!==this.minHeight&&sf.base.setStyleAttribute(this.element,{minHeight:sf.base.formatUnit(this.minHeight)})},t.prototype.render=function(){var e=this;if(this.checkPositionData(),this.targetEle=this.getTargetEle(this.target),sf.base.Browser.isDevice&&sf.base.addClass([this.element],"e-device"),sf.base.isNullOrUndefined(this.headerContent)&&(this.headerContent=this.element.querySelector(".e-dlg-header-content")),sf.base.isNullOrUndefined(this.contentEle)&&(this.contentEle=this.element.querySelector(".e-dlg-content")),this.setMaxHeight(),1e3===this.zIndex&&this.setzIndex(this.element,!1),this.allowDragging&&!sf.base.isNullOrUndefined(this.headerContent)&&this.setAllowDragging(),this.isModal&&sf.base.isNullOrUndefined(this.dlgContainer)&&(this.dlgContainer=this.element.parentElement,this.dlgOverlay=this.element.parentElement.getElementsByClassName("e-dlg-overlay")[0]),!sf.base.isNullOrUndefined(this.element.parentElement)&&(this.allowPrerender||!this.allowPrerender&&(!this.isInitialLoad||this.visible&&this.isInitialLoad))){var t=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=sf.base.createElement("div",{className:"e-dlg-ref-element"}),t.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}sf.base.isNullOrUndefined(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new sf.popups.Popup(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.targetEle,actionOnScroll:"none",enableRtl:this.enableRtl,position:{X:this.position.X,Y:this.position.Y},open:function(){e.enableResize&&e.resetResizeIcon(),e.openedEnabled?e.dotNetRef.invokeMethodAsync("OpenEvent",e.element.classList.toString()):e.focusContent()},close:function(){e.isModal&&(sf.base.addClass([e.dlgOverlay],"e-fade"),e.dlgContainer.style.display="none"),e.hasFocusableNode=!1,e.closedEnabled?e.dotNetRef.invokeMethodAsync("CloseEvent",e.element.classList.toString()):e.popupCloseHandler()}}),this.isModal&&this.positionChange()},t.prototype.checkPositionData=function(){sf.base.isNullOrUndefined(this.position)||(this.isNumberString(this.position.X)&&(this.position.X=parseFloat(this.position.X)),this.isNumberString(this.position.Y)&&(this.position.Y=parseFloat(this.position.Y)))},t.prototype.isNumberString=function(e){return!sf.base.isNullOrUndefined(e)&&"number"!=typeof e&&/^[-+]?\d*\.?\d+$/.test(e)},t.prototype.getTargetEle=function(e){var t;return sf.base.isNullOrUndefined(e)||"string"!=typeof e||(t=document.querySelector(e)),sf.base.isNullOrUndefined(t)?document.body:t},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!sf.base.isNullOrUndefined(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,sf.base.Browser.isIE&&"auto"===this.height&&!sf.base.isNullOrUndefined(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setzIndex=function(e,t){this.zIndex=sf.popups.getZindexPartial(e),t&&(this.popupObj.zIndex=this.zIndex)},t.prototype.updatezIndex=function(){this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.calculatezIndex=this.element.style.zIndex===this.zIndex.toString()},t.prototype.updateTarget=function(){this.targetEle=this.getTargetEle(this.target),this.popupObj.relateTo=this.targetEle,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.targetEle.appendChild(this.dlgContainer),this.enableResize&&this.setResize(!1)},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var t=this.element.querySelector("."+this.resizeIconDirection);sf.base.isNullOrUndefined(t)||(t.style.bottom="-"+e.toString()+"px")}},t.prototype.getMouseEvtArgs=function(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type}},t.prototype.setAllowDragging=function(){var e=this,t=this;this.dragObj=new sf.base.Draggable(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(i){e.onDragStartEnabled&&t.dotNetRef.invokeMethodAsync("DragStartEvent",{target:{ID:i.target.id},event:t.getMouseEvtArgs(i.event)}),i.bindEvents(i.dragElement)},drag:function(i){e.onDragEnabled&&t.dotNetRef.invokeMethodAsync("DragEvent",{target:{ID:i.target.id},event:t.getMouseEvtArgs(i.event)})},dragStop:function(i){t.isModal&&(sf.base.isNullOrUndefined(t.position)||t.dlgContainer.classList.remove("e-dlg-"+t.position.X+"-"+t.position.Y),t.element.style.position="relative"),e.onDragStopEnabled&&t.dotNetRef.invokeMethodAsync("DragStopEvent",{target:{ID:i.target.id},event:t.getMouseEvtArgs(i.event)}),t.element.classList.remove("e-restrict-left")}}),sf.base.isNullOrUndefined(this.targetEle)||(this.dragObj.dragArea=this.targetEle)},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setEnableRTL=function(){var e=this.element.querySelector(".e-resize-handle");sf.base.isNullOrUndefined(e)||e.parentElement!==this.element||(sf.popups.removeResize(),this.setResize(!1))},t.prototype.setResize=function(e){if(this.enableResize){if(!sf.base.isNullOrUndefined(this.element.querySelector(".e-icons.e-resize-handle")))return;var t=getComputedStyle(this.element).minHeight,i=getComputedStyle(this.element).minWidth;this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):!this.isModal||this.target!==document.body&&"body"!==this.target||this.element.classList.add("e-resize-viewport"),sf.popups.createResize({element:this.element,direction:this.resizeIconDirection,minHeight:parseInt(t.slice(0,i.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(i.slice(0,i.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:"body"===this.target||"document.body"===this.target?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else{if(e)return;sf.popups.removeResize(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove("e-restrict-left"):this.element.classList.remove("e-resize-viewport")}},t.prototype.getMinHeight=function(){var e="0px",t="0px";sf.base.isNullOrUndefined(this.element.querySelector(".e-dlg-header-content"))||(e=getComputedStyle(this.headerContent).height);var i=sf.base.select(".e-footer-content",this.element);sf.base.isNullOrUndefined(i)||(t=getComputedStyle(i).height);var n=parseInt(e.slice(0,e.indexOf("p")),10),s=parseInt(t.slice(0,t.indexOf("p")),10);return sf.popups.setMinHeight(n+30+(isNaN(s)?0:s)),n+30+s},t.prototype.changePosition=function(e){this.isModal&&this.dlgContainer.classList.contains("e-dlg-"+this.position.X+"-"+this.position.Y)&&this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y),this.updateContext(e),this.checkPositionData(),this.positionChange()},t.prototype.setOverlayZindex=function(e){var t;t=sf.base.isNullOrUndefined(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element);(sf.base.isNullOrUndefined(e)?this.element:e).focus(),this.hasFocusableNode=!0},t.prototype.getAutoFocusNode=function(e){var t=e.querySelector(".e-dlg-closeicon-btn"),i=e.querySelectorAll("[autofocus]"),n=this.getValidFocusNode(i);if(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0],sf.base.isNullOrUndefined(n)){if(n=this.focusableElements(this.contentEle),!sf.base.isNullOrUndefined(n))return n;if(!sf.base.isNullOrUndefined(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=n;return t},t.prototype.getValidFocusNode=function(e){for(var t,i=0;i<e.length;i++){if(((t=e[i]).clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;t=null}return t},t.prototype.disableElement=function(e,t){var i=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null},t.prototype.focusableElements=function(e){if(!sf.base.isNullOrUndefined(e)){var t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null},t.prototype.getMaxHeight=function(){return this.element.style.maxHeight},t.prototype.OnPropertyChanged=function(e){this.updateContext(e);for(var t=0,i=Object.keys(e);t<i.length;t++){switch(i[t]){case"width":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)}),this.refreshPosition();break;case"height":this.setHeight(),this.refreshPosition();break;case"minHeight":this.setMinHeight();break;case"target":this.updateTarget();break;case"zIndex":this.updatezIndex();break;case"allowDragging":this.allowDragging?this.setAllowDragging():this.destroyDraggable();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize(!1)}}},t.prototype.fullScreen=function(t){if(t){sf.base.addClass([this.element],"e-dlg-fullscreen"),this.element.style.top=document.scrollingElement.scrollTop+"px";var i=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=sf.base.isNullOrUndefined(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=i,sf.base.addClass([document.body],[e,"e-scroll-disabled"]),this.allowDragging&&!sf.base.isNullOrUndefined(this.dragObj)&&(this.dragObj.destroy(),this.dragObj=void 0)}else sf.base.removeClass([this.element],"e-dlg-fullscreen"),sf.base.removeClass([document.body],[e,"e-scroll-disabled"]),this.allowDragging&&!sf.base.isNullOrUndefined(this.headerContent)&&sf.base.isNullOrUndefined(this.dragObj)&&this.setAllowDragging()},t.prototype.show=function(t,i){if(this.isOpenFullScreen=t,!this.element.classList.contains("e-popup-open")||!sf.base.isNullOrUndefined(t)){sf.base.isNullOrUndefined(t)||this.fullScreen(t),this.element.style.maxHeight!==i&&(this.allowMaxHeight=!1,this.element.style.maxHeight=i),this.storeActiveElement=document.activeElement,this.element.tabIndex=-1,this.isModal&&sf.base.isNullOrUndefined(this.dlgOverlay)&&(this.dlgOverlay=this.element.parentElement.querySelector(".e-dlg-overlay")),this.isModal&&!sf.base.isNullOrUndefined(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",sf.base.removeClass([this.dlgOverlay],"e-fade"),sf.base.isNullOrUndefined(this.targetEle)?sf.base.addClass([document.body],[e,"e-scroll-disabled"]):(this.targetEle===document.body?this.dlgContainer.style.position="fixed":this.dlgContainer.style.position="absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",sf.base.addClass([this.targetEle],[e,"e-scroll-disabled"])));var n={name:"None"===this.animationSettings.effect&&"Enable"===sf.base.animationMode?"Fade":this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay},s=this.isModal?this.element.parentElement:this.element;this.calculatezIndex&&(this.setzIndex(s,!0),sf.base.setStyleAttribute(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex)),"None"===this.animationSettings.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?this.popupObj.show():this.popupObj.show(n)}},t.prototype.hide=function(){(this.isModal||this.isOpenFullScreen)&&(sf.base.isNullOrUndefined(this.targetEle)?sf.base.removeClass([document.body],[e,"e-scroll-disabled"]):sf.base.removeClass([this.targetEle],[e,"e-scroll-disabled"]));var t={name:"None"===this.animationSettings.effect&&"Enable"===sf.base.animationMode?"Fade":this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};return"None"===this.animationSettings.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?this.popupObj.hide():this.popupObj.hide(t),this.allowPrerender||this.destroyRefElement(),this.element.classList.toString()},t.prototype.refreshPosition=function(){this.isModal&&isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))?(this.element.style.top=this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.popupObj.refreshPosition()},t.prototype.getDimension=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},t.prototype.destroyDraggable=function(){sf.base.isNullOrUndefined(this.dragObj)||(this.dragObj.destroy(),this.dragObj=void 0)},t.prototype.destroyRefElement=function(){sf.base.isNullOrUndefined(this.refElement)||sf.base.isNullOrUndefined(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),sf.base.detach(this.refElement),this.refElement=void 0)},t.prototype.destroy=function(t,i){this.updateContext(t);var n=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(!sf.base.isNullOrUndefined(this.cssClass)&&""!==this.cssClass){var s=this.cssClass.split(" ");sf.base.removeClass([this.element],s)}if(sf.base.Browser.isDevice&&sf.base.removeClass([this.element],"e-device"),sf.base.removeClass([this.getTargetEle(this.target)],[e,"e-scroll-disabled"]),this.unBindEvent(this.element),this.element.classList.contains("e-dlg-fullscreen")&&sf.base.removeClass([document.body],[e,"e-scroll-disabled"]),this.isModal&&sf.base.removeClass([sf.base.isNullOrUndefined(this.targetEle)?document.body:this.targetEle],"e-scroll-disabled"),this.element.classList.contains("e-dlg-resizable")&&this.element.classList.remove("e-dlg-resizable"),this.element.classList.contains("e-draggable")&&(this.dragObj.destroy(),this.dragObj=void 0),this.element.classList.contains("e-popup")&&(this.popupObj.destroy(),this.popupObj=void 0),this.destroyRefElement(),i)for(var o=0;o<this.element.children.length;o++)this.element.children[o].classList.add("e-hide");else if(!sf.base.isNullOrUndefined(this.element.children))for(o=0;o<=this.element.children.length;o++)o-=o,sf.base.detach(this.element.children[o]);for(o=0;o<n.length;o++)this.element.removeAttribute(n[o]);if(this.isModal){sf.base.detach(this.element.nextElementSibling);var r=this.element.parentElement;r.removeAttribute("class"),r.removeAttribute("style"),this.element.classList.remove("e-dlg-modal")}this.element.classList.remove("e-dialog")},t.prototype.bindEvent=function(e){sf.base.EventHandler.add(e,"keydown",this.keyDown,this),sf.base.Browser.isDevice&&sf.base.EventHandler.add(window,"orientationchange",this.orientationOnChange,this)},t.prototype.unBindEvent=function(e){sf.base.EventHandler.remove(e,"keydown",this.keyDown),sf.base.Browser.isDevice&&sf.base.EventHandler.remove(window,"orientationchange",this.orientationOnChange)},t.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.orientationOnChange=function(){var e=this;this.element.style.display="none",setTimeout((function(){sf.popups.setMaxWidth(e.targetEle.clientWidth),sf.popups.setMaxHeight(e.targetEle.clientHeight),e.setMaxHeight(),e.refreshPosition(),e.element.style.display=""}),250)},t.prototype.popupCloseHandler=function(){var e=document.activeElement;sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.blur)||e.blur(),sf.base.isNullOrUndefined(this.storeActiveElement)||sf.base.isNullOrUndefined(this.storeActiveElement.focus)||this.storeActiveElement.focus()},t.prototype.windowResizeHandler=function(){sf.popups.setMaxWidth(this.targetEle.clientWidth),sf.popups.setMaxHeight(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.onResizeStart=function(e,t){var i=this.getMouseEvtArgs(e);this.onResizeStartEnabled&&this.dotNetRef.invokeMethodAsync("ResizeStartEvent",i)},t.prototype.onResizing=function(e,t){this.resizingEnabled&&this.dotNetRef.invokeMethodAsync("ResizingEvent",this.getMouseEvtArgs(e))},t.prototype.onResizeComplete=function(e,t){this.onResizeStopEnabled&&this.dotNetRef.invokeMethodAsync("ResizeStopEvent",this.getMouseEvtArgs(e))},t.prototype.getFocusElement=function(e){var t=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return t[t.length-1]},t.prototype.keyDown=function(e){var t=this;if(9===e.keyCode&&this.isModal){var i=void 0,n=void 0,s=this.element.querySelector(".e-footer-content");sf.base.isNullOrUndefined(s)||(n=s.querySelectorAll("button"),!sf.base.isNullOrUndefined(i)&&n.length>0&&(i=n[n.length-1]),sf.base.isNullOrUndefined(i)&&s.childNodes.length>0&&(i=this.getFocusElement(s))),sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(this.contentEle)&&(i=this.getFocusElement(this.contentEle)),sf.base.isNullOrUndefined(i)||document.activeElement!==i||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),sf.base.isNullOrUndefined(i)||i.focus())}if(27===e.keyCode&&this.closeOnEscape&&(document.querySelector(".e-popup-open:not(.e-dialog)")||this.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type})),this.hasFocusableNode){var o=document.activeElement,r=["input","textarea"].indexOf(o.tagName.toLowerCase())>-1,a=!1;r||(a=o.hasAttribute("contenteditable")&&"true"===o.getAttribute("contenteditable")),(13===e.keyCode&&!e.ctrlKey&&"textarea"!==o.tagName.toLowerCase()&&r&&!sf.base.isNullOrUndefined(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===o.tagName.toLowerCase()||a)&&!sf.base.isNullOrUndefined(this.primaryButtonEle))&&setTimeout((function(){t.element.querySelector(".e-footer-content button.e-btn.e-primary").click()}))}},t}();return{initialize:function(e){e.dataId&&new t(e)},getClassList:function(e){return e&&e.classList.toString()},getMaxHeight:function(e){return e&&window.sfBlazor.getCompInstance(e).getMaxHeight()},changePosition:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).changePosition(e)},updateAnimation:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).updateContext(e)},focusContent:function(e){e&&window.sfBlazor.getCompInstance(e).focusContent()},refreshPosition:function(e){e&&window.sfBlazor.getCompInstance(e).refreshPosition()},getDimension:function(e){return e&&window.sfBlazor.getCompInstance(e).getDimension()},popupCloseHandler:function(e){e&&window.sfBlazor.getCompInstance(e).popupCloseHandler()},propertyChanged:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).OnPropertyChanged(e)},show:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).show(e.fullScreen,e.maxHeight)},hide:function(e){return e&&window.sfBlazor.getCompInstance(e).hide()},destroy:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).destroy(e,e.isClient)}}}()},"./modules/sf-drop-down-button.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DropDownButton=function(){"use strict";var e="e-colorpicker-container",t="mousedown touchstart",i=function(){function i(e,t,i,n,s){this.dataId=n,this.cp_dataId=s,this.element=e,this.dotNetRef=i,this.popup=t,window.sfBlazor.setCompInstance(this),this.addScrollEvents(!0)}return i.prototype.openPopup=function(i){this.popup.style.visibility="hidden",document.body.appendChild(this.popup),i&&sf.splitbuttons.setBlankIconStyle(this.popup),this.popup.classList.remove("e-transparent");var n=sf.popups.getZindexPartial(this.element),s=this.element.parentElement.classList.contains(e);s&&window.sfBlazor.getCompInstance(this.cp_dataId).setPaletteWidth(this.popup.querySelector(".e-container"),!1,n);(this.setPosition(s),sf.base.EventHandler.remove(document,t,this.mouseDownHandler),this.addEventListener(),this.popup.style.zIndex=n+"",this.popup.style.visibility="",s)&&window.sfBlazor.getCompInstance(this.cp_dataId).setOffset(this.popup,n);this.popup.firstElementChild&&(this.popup.firstElementChild.firstElementChild&&s?this.popup.firstElementChild.firstElementChild.focus():this.popup.firstElementChild.focus())},i.prototype.setPosition=function(e){var t,i,n=this.element.getBoundingClientRect(),s=this.popup.getBoundingClientRect();e&&sf.base.Browser.isDevice?(t=document.documentElement.clientWidth/2-s.width/2+pageXOffset,i=document.documentElement.clientHeight/2-s.height/2+pageYOffset):(t=n.left+pageXOffset,i=n.bottom+pageYOffset,n.bottom+s.height>document.documentElement.clientHeight&&i-n.height-s.height>document.documentElement.clientTop&&(i=i-n.height-s.height),n.left+s.width>document.documentElement.clientWidth&&n.right-s.width>document.documentElement.clientLeft&&(t=t+n.width-s.width)),this.popup.style.left=Math.ceil(t)+"px",this.popup.style.top=Math.ceil(i)+"px"},i.prototype.mouseDownHandler=function(t){if(this.popup.parentElement){var i=t.target,n=!0,s=this.element.parentElement.classList.contains(e);if(s){var o=window.sfBlazor.getCompInstance(this.cp_dataId);(sf.base.closest(i,".e-apply")||sf.base.closest(i,".e-cancel"))&&o.removeZIndex()}if(!sf.base.Browser.isDevice&&i.classList.contains("e-hsv-model")){var r=i.parentElement.getBoundingClientRect(),a=this.element.getBoundingClientRect();n=t.clientX>=r.left&&t.clientX<=r.right&&t.clientY>=r.top&&t.clientY<=r.bottom||t.clientX>=a.left&&t.clientX<=a.right&&t.clientY>=a.top&&t.clientY<=a.bottom}if(!n||!sf.base.closest(i,"#"+this.getDropDownButton().id)&&!sf.base.closest(t.target,"#"+this.popup.id)&&!sf.base.closest(t.target,".e-colorpicker.e-modal")){if(s)(o=window.sfBlazor.getCompInstance(this.cp_dataId)).removeZIndex();this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),this.removeEventListener()}}else this.removeEventListener()},i.prototype.keydownHandler=function(t){var i=this.getElement(),n=this.element.parentElement.classList.contains(e),s=this.element.parentElement.classList.contains("e-rtl");n&&window.sfBlazor.getCompInstance(this.cp_dataId).paletteKeyDown(t,s);if(t.altKey)38===t.keyCode&&(t.stopPropagation(),t.preventDefault(),this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),i.focus(),this.removeEventListener());else{var o=this.popup.firstElementChild;if((27===t.keyCode||9===t.keyCode&&!n)&&(t.stopPropagation(),this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),27===t.keyCode&&t.preventDefault(),i.focus(),this.removeEventListener()),!o||!o.classList.contains("e-dropdown-menu"))return;if(13===t.keyCode)return t.preventDefault(),void(t.target.classList.contains("e-item")&&t.target.classList.contains("e-focused")?(i.focus(),this.removeEventListener()):t.stopPropagation());38!==t.keyCode&&40!==t.keyCode||(t.target.classList.contains("e-dropdown-menu")&&t.stopPropagation(),t.preventDefault(),sf.splitbuttons.upDownKeyHandler(o,t.keyCode))}},i.prototype.getElement=function(){return this.element.classList.contains("e-split-btn-wrapper")?this.element.firstElementChild:this.element},i.prototype.getDropDownButton=function(){return this.element.classList.contains("e-split-btn-wrapper")?this.element.getElementsByClassName("e-dropdown-btn")[0]:this.element},i.prototype.clickHandler=function(e){sf.base.closest(e.target,".e-item")&&(this.removeEventListener(),this.getElement().focus())},i.prototype.dropDownClickHandler=function(t){if(this.element.parentElement.classList.contains(e)){var i=window.sfBlazor.getCompInstance(this.cp_dataId);sf.base.closest(t.target,".e-dropdown-btn")&&i.removeZIndex()}},i.prototype.scrollHandler=function(t){if(this.popup&&document.getElementById(this.popup.id)){var i=this.element.parentElement.classList.contains(e);if(this.setPosition(i),i)window.sfBlazor.getCompInstance(this.cp_dataId).setOffset(this.popup)}else{var n=this.getDropDownButton();n&&document.getElementById(n.id)||sf.base.EventHandler.remove(t.target,"scroll",this.scrollHandler)}},i.prototype.addEventListener=function(e){if(sf.base.EventHandler.add(document,t,this.mouseDownHandler,this),sf.base.EventHandler.add(this.popup,"click",this.clickHandler,this),sf.base.EventHandler.add(this.popup,"keydown",this.keydownHandler,this),sf.base.EventHandler.add(this.element,"click",this.dropDownClickHandler,this),e&&this.popup.firstElementChild){var i=this.popup.querySelector(".e-focused");i?i.focus():this.popup.firstElementChild.focus()}},i.prototype.removeEventListener=function(e){if(sf.base.EventHandler.remove(document,t,this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"click",this.dropDownClickHandler),this.popup.parentElement&&(sf.base.EventHandler.remove(this.popup,"click",this.clickHandler),sf.base.EventHandler.remove(this.popup,"keydown",this.keydownHandler),e)){var i=this.getDropDownButton();i&&document.getElementById(i.id)&&(this.addScrollEvents(!1),this.element.appendChild(this.popup))}},i.prototype.addScrollEvents=function(e){for(var t=0,i=sf.popups.getScrollableParent(this.element);t<i.length;t++){var n=i[t];e?sf.base.EventHandler.add(n,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(n,"scroll",this.scrollHandler)}},i}();return{openPopup:function(e,t,n,s,o,r){var a=window.sfBlazor.getCompInstance(o);sf.base.isNullOrUndefined(e)||(sf.base.isNullOrUndefined(a)?(new i(e,t,n,o,r),a=window.sfBlazor.getCompInstance(o)):a.popup=t,a.openPopup(s))},addEventListener:function(e){var t=window.sfBlazor.getCompInstance(e);t.removeEventListener(),t.addEventListener(!0)},removeEventListener:function(e){window.sfBlazor.getCompInstance(e).removeEventListener(!0)}}}()},"./modules/sf-dropdownlist.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DropDownList=function(){"use strict";var e="e-list-group-item",t=function(){function t(e,t,i,n,s){this.activeIndex=null,this.prevSelectPoints={},window.sfBlazor=window.sfBlazor,this.dataId=e,this.containerElement=t,this.element=i,this.options=s,window.sfBlazor.setCompInstance(this),this.dotNetRef=n}return t.prototype.initialize=function(){this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},sf.base.Browser.isDevice||new sf.base.KeyboardEvents(this.containerElement,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),"SfComboBox"===this.options.moduleName&&sf.base.EventHandler.add(this.element,"keydown",this.onFilterDown,this)},t.prototype.setAutoFillSelection=function(e){this.isAndroidAutoFill(e)||this.autoFillSelection(e)},t.prototype.onFilterDown=function(e){13!==e.keyCode&&40!==e.keyCode&&38!==e.keyCode&&9!==e.keyCode&&(this.prevSelectPoints=this.getSelectionPoints())},t.prototype.getSelectionPoints=function(){var e=this.element;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},t.prototype.autoFillSelection=function(e){var t=this.getSelectionPoints(),i=this.element.value.substr(0,t.start);if(i&&i.toLowerCase()===e.substr(0,t.start).toLowerCase()){var n=i+e.substr(i.length,e.length);this.element.value=n,this.element.setSelectionRange(t.start,this.element.value.length)}else this.element.value=e,this.element.setSelectionRange(0,this.element.value.length)},t.prototype.isAndroidAutoFill=function(e){if(sf.base.Browser.isAndroid){var t=this.getSelectionPoints(),i=this.prevSelectPoints.end,n=t.end,s=this.prevSelectPoints.start,o=t.start;return 0!==i&&(i===e.length&&s===e.length||s>o&&i>n||i===n&&s===o)}return!1},t.prototype.removeFillSelection=function(){var e=this.getSelectionPoints();this.element.setSelectionRange(e.end,e.end)},t.prototype.keyActionHandler=function(e){var t={Action:e.action,Key:e.key,Events:e,Type:e.type};this.isDisposed||this.dotNetRef.invokeMethodAsync("KeyActionHandler",t),("tab"!==e.action&&"close"!==e.action&&"space"!==e.action&&"enter"!==e.action&&"open"!==e.action&&("SfDropDownList"===this.options.moduleName||"home"!==e.action&&"end"!==e.action)||"enter"===e.action&&!sf.base.isNullOrUndefined(this.isPopupOpen()))&&e.preventDefault()},t.prototype.getOffsetValue=function(e){var t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),n=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+n)},t.prototype.setPopupPosition=function(e){var t,i=e,n=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),s=this.isEmptyList()?this.list:this.liCollections[0],o=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],r=s.getBoundingClientRect().height,a=this.list.offsetHeight/2,l=sf.base.isNullOrUndefined(n)?s.offsetTop:n.offsetTop;if(o.offsetTop-a<l&&!sf.base.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0&&!sf.base.isNullOrUndefined(n)){var d=this.list.offsetHeight/r,h=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(d-(this.liCollections.length-this.activeIndex))*r-i+h,this.list.scrollTop=n.offsetTop}else l>a?(t=a-r/2,this.list.scrollTop=l-a+r/2):t=l;return-(t=t+r+i-(r-this.containerElement.offsetHeight)/2)},t.prototype.getItems=function(){return this.list?this.list.querySelectorAll(".e-list-item"):[]},t.prototype.renderPopup=function(e,t,i,n,s,o){this.options=s,this.popupHolder=t,this.list=t.querySelector(".e-content")||sf.base.select(".e-content",this.popupContainer),this.liCollections=this.getItems();var r,a,l=0,d=sf.base.formatUnit(this.options.popupHeight);if(this.wireListEvents(),e){var h=document.getElementById(e.id);h&&sf.base.remove(h)}if(document.body.appendChild(e),e.style.visibility="hidden",this.options.allowFiltering&&("SfDropDownList"===this.options.moduleName?(this.filterInput=e.querySelector("input.e-input"),a=this.filterInput.parentElement,new sf.base.KeyboardEvents(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"})):this.filterInput=this.element),"auto"!==this.options.popupHeight){var c=0;if(sf.base.isNullOrUndefined(a)||(c=a.parentElement.getBoundingClientRect().height,d=(parseInt(d,10)-c).toString()+"px"),e.querySelector(".e-ddl-header")){var p=e.querySelector(".e-ddl-header"),u=Math.round(p.getBoundingClientRect().height);d=(parseInt(d,10)-(u+c)).toString()+"px"}if(e.querySelector(".e-ddl-footer")){var f=e.querySelector(".e-ddl-footer");u=Math.round(f.getBoundingClientRect().height);d=(parseInt(d,10)-(u+c)).toString()+"px"}this.list.style.maxHeight=(parseInt(d,10)-2).toString()+"px",e.style.maxHeight=sf.base.formatUnit(this.options.popupHeight)}else e.style.height="auto";if(this.list&&this.list.querySelector(".e-active")&&this.setScrollPosition(),sf.base.Browser.isDevice&&!this.options.allowFiltering&&("SfDropDownList"===this.options.moduleName||"SfComboBox"===this.options.moduleName)){l=this.getOffsetValue(e);var m=this.isEmptyList()?this.list:this.liCollections[0];r=-(parseInt(getComputedStyle(m).textIndent,10)-parseInt(getComputedStyle(this.element).paddingLeft,10)+parseInt(getComputedStyle(this.element.parentElement).borderLeftWidth,10))}if(this.popupCreation(e,l,r),this.checkCollision(e),sf.base.Browser.isDevice&&(this.popupObj.element.classList.add("e-ddl-device"),("SfDropDownList"===this.options.moduleName||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering)&&(this.popupObj.collision={X:"fit",Y:"fit"}),this.options.allowFiltering&&"SfDropDownList"===this.options.moduleName&&(this.popupObj.element.classList.add("e-ddl-device-filter"),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),sf.base.attributes(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;z-index:"+this.options.zIndex.toString()+";"}),sf.base.addClass([document.body,this.popupObj.element],"e-popup-full-page"),this.setSearchBoxPosition())),e.style.visibility="visible",sf.base.addClass([e],"e-popup-close"),sf.base.Browser.isDevice){if("SfDropDownList"===this.options.moduleName&&!this.options.allowFiltering||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering)for(var g=0,v=this.popupObj.getScrollableParent(this.containerElement);g<v.length;g++){var b=v[g];sf.base.EventHandler.add(b,"scroll",this.scrollHandler,this)}this.isFilterLayout()&&sf.base.EventHandler.add(this.list,"scroll",this.listScroll,this)}if(null!==i&&null!==i.popup&&n){for(var y=0,w=Object.keys(i.popup);y<w.length;y++){switch(w[y]){case"collision":!i.popup.collision||this.popupObj.collision.X===i.popup.collision.X.toLowerCase()&&this.popupObj.collision.Y===i.popup.collision.Y.toLowerCase()||(this.popupObj.collision={X:i.popup.collision.X.toLowerCase(),Y:i.popup.collision.Y.toLowerCase()});break;case"position":!this.popupObj.position||this.popupObj.position.X===i.popup.position.X&&this.popupObj.position.Y===i.popup.position.Y||(this.popupObj.position={X:i.popup.position.X,Y:i.popup.position.Y});break;case"relateTo":this.popupObj.relateTo!==i.popup.relateTo&&(this.popupObj.relateTo=i.popup.relateTo);break;case"targetType":this.popupObj.targetType!==i.popup.targetType.toLowerCase()&&(this.popupObj.targetType=i.popup.targetType);break;case"offsetX":this.popupObj.offsetX!==i.popup.offsetX&&(this.popupObj.offsetX=i.popup.offsetX);break;case"offsetY":this.popupObj.offsetY!==i.popup.offsetY&&(this.popupObj.offsetY=i.popup.offsetY)}}this.popupObj.dataBind(),this.popupObj.refreshPosition(this.popupObj.relateTo,!0)}this.options.enableVirtualization&&sf.base.EventHandler.add(this.list,"scroll",this.virtualScroll,this),sf.base.attributes(this.containerElement,{"aria-expanded":"true"});var C=this.options.allowFiltering?this.filterInput.parentElement:this.containerElement;sf.base.addClass([C],["e-input-focus"]);this.popupObj.show(new sf.base.Animation({name:"FadeIn",duration:100}),1e3===this.options.zIndex?this.element:null)},t.prototype.wireListEvents=function(){sf.base.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),sf.base.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},t.prototype.unWireListEvents=function(){sf.base.EventHandler.remove(this.list,"mouseover",this.onMouseOver),sf.base.EventHandler.remove(this.list,"mouseout",this.onMouseLeave)},t.prototype.onMouseOver=function(e){var t=sf.base.closest(e.target,".e-list-item");this.setHover(t)},t.prototype.onMouseLeave=function(e){this.removeHover()},t.prototype.listScroll=function(){this.filterInput.blur()},t.prototype.scrollHandler=function(){this.isDisposed||this.dotNetRef.invokeMethodAsync("Hide")},t.prototype.setFloatingHeader=function(t){var i=this.popupContainer&&this.popupContainer.querySelector(".e-content");i&&i.classList.contains("e-nodata")&&this.fixedHeaderElement?(sf.base.remove(this.fixedHeaderElement),this.fixedHeaderElement=null):this.list&&this.list.querySelector("li")&&(sf.base.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=sf.base.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(e)||(this.fixedHeaderElement.style.display="none"),sf.base.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader()),this.scrollStop(t))},t.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var t=0;this.list&&this.list.parentElement&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10));var i=(this.list?this.list.querySelectorAll(".e-list-item")[0].offsetWidth:0)-t;this.fixedHeaderElement.style.width=i.toString()+"px",sf.base.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});var n=this.list.querySelector("."+e);this.fixedHeaderElement.innerHTML=n.innerHTML},t.prototype.scrollStop=function(t){for(var i=t.target,n=this.list.querySelectorAll("li"),s=parseInt(getComputedStyle(n[0],null).getPropertyValue("height"),10),o=Math.round(i.scrollTop/s);o>-1;o--){if(!sf.base.isNullOrUndefined(n[o])&&n[o].classList.contains(e)){var r=n[o];this.fixedHeaderElement.innerHTML=r.innerHTML,this.fixedHeaderElement.style.top=t.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},t.prototype.isFilterLayout=function(){return"SfDropDownList"===this.options.moduleName&&this.options.allowFiltering},t.prototype.setSearchBoxPosition=function(){var e=this.popupObj.element.querySelector("span.e-filter-parent").getBoundingClientRect().height,t=this.popupObj.element.querySelector(".e-ddl-footer"),i=this.popupObj.element.querySelector(".e-ddl-header");this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%";var n=t?t.getBoundingClientRect().height:0,s=i?i.getBoundingClientRect().height:0;this.list.style.maxHeight=this.list.style.height=window.innerHeight-(n+s+e+4)+"px"},t.prototype.checkCollision=function(e){(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&"SfDropDownList"!==this.options.moduleName)&&(sf.popups.isCollide(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"))},t.prototype.destroy=function(){sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick)},t.prototype.refreshPopup=function(){this.isPopupOpen()&&(this.popupObj.refreshPosition(this.containerElement),this.popupObj.element.querySelector(".e-content").classList.contains("e-nodata")&&this.fixedHeaderElement&&(sf.base.remove(this.fixedHeaderElement),this.fixedHeaderElement=null))},t.prototype.popupCreation=function(t,i,n){var s=this;this.popupContainer=t,this.popupObj=new sf.popups.Popup(this.popupContainer,{width:this.setWidth(),targetType:"relative",relateTo:this.containerElement,collision:{X:"flip",Y:"flip"},offsetY:i,enableRtl:this.options.enableRtl,offsetX:n,position:{X:"left",Y:"bottom"},zIndex:this.options.zIndex,close:function(){sf.base.EventHandler.remove(s.list,"scroll",s.setFloatingHeader),sf.base.removeClass([s.containerElement],"e-icon-anim"),s.fixedHeaderElement=null,s.popupHolder.appendChild(s.popupContainer),s.unWireListEvents();for(var e=0,t=s.popupObj.getScrollableParent(s.containerElement);e<t.length;e++){var i=t[e];sf.base.EventHandler.remove(i,"scroll",s.scrollHandler)}sf.base.Browser.isDevice&&s.isFilterLayout()&&(sf.base.removeClass([document.body,s.popupObj.element],"e-popup-full-page"),sf.base.EventHandler.remove(s.list,"scroll",s.listScroll)),s.options.enableVirtualization&&sf.base.EventHandler.remove(s.list,"scroll",s.virtualScroll),s.popupObj&&s.popupObj.destroy(),!s.isDisposed&&document.body.contains(s.element)&&s.dotNetRef.invokeMethodAsync("ClosePopup").catch((function(){})),s.popupObj=null},open:function(){var t=s.list.querySelector("li")&&s.list.querySelector("li").classList.contains(e),i=!sf.base.isNullOrUndefined(s.list)&&s.list.classList.contains("e-nodata");sf.base.EventHandler.add(document,"mousedown",s.onDocumentClick,s),s.options.allowFiltering&&s.filterInput&&s.filterInput.focus(),t&&sf.base.EventHandler.add(s.list,"scroll",s.setFloatingHeader,s),!s.options.enableVirtualization||t||i||s.virtualScroll()},targetExitViewport:function(){sf.base.Browser.isDevice||s.isDisposed||s.dotNetRef.invokeMethodAsync("Hide")}})},t.prototype.virtualScroll=function(){if(this.popupObj&&this.popupObj.element){var e=parseInt(getComputedStyle(this.popupObj.element).borderWidth,10);e=0==e?1:e;var t=this.popupObj.element.classList.contains("e-popup-open");this.list.scrollTop+this.list.offsetHeight+e>=this.list.scrollHeight&&t&&!this.isDisposed&&this.dotNetRef.invokeMethodAsync("VirtualScrollHandler")}},t.prototype.isEmptyList=function(){return!sf.base.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length},t.prototype.setWidth=function(){var e=sf.base.formatUnit(this.options.popupWidth);e.indexOf("%")>-1&&(e=(this.containerElement.offsetWidth*parseFloat(e)/100).toString()+"px");if(sf.base.Browser.isDevice&&!this.options.allowFiltering){var t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.element).paddingLeft,10)+parseInt(getComputedStyle(this.element.parentElement).borderLeftWidth,10))+"px"}return e},t.prototype.onDocumentClick=function(e){var t=e.target;!sf.base.isNullOrUndefined(this.popupObj)&&sf.base.closest(t,"[id='"+this.popupObj.element.id+"']")||this.containerElement.contains(e.target)?t===this.element||this.options.allowFiltering&&t===this.filterInput||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering&&sf.base.Browser.isDevice&&t===this.containerElement.querySelector(".e-ddl-icon")||e.preventDefault():!this.containerElement.classList.contains("e-input-focus")&&!this.isPopupOpen()||this.isDisposed||this.dotNetRef.invokeMethodAsync("Hide")},t.prototype.closePopup=function(e,t){if(this.options=t,this.isPopupOpen()&&!e.cancel&&this.popupObj){this.popupObj.hide(new sf.base.Animation({name:"FadeOut",duration:20,delay:0}))}},t.prototype.setScrollPosition=function(e){if(sf.base.isNullOrUndefined(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},t.prototype.scrollBottom=function(t){if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var i=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),n=this.list.offsetHeight,s=this.list.querySelector("li").classList.contains(e),o=i.offsetTop+i.offsetHeight-this.list.scrollTop,r=this.list.scrollTop+o-n;r=t?r+2*parseInt(getComputedStyle(this.list).paddingTop,10):r+parseInt(getComputedStyle(this.list).paddingTop,10);var a=i.offsetTop+i.offsetHeight-this.list.scrollTop;a=s&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?a-this.fixedHeaderElement.offsetHeight:a,0===this.activeIndex?this.list.scrollTop=0:(o>n||!(a>0&&this.list.offsetHeight>a))&&(this.list.scrollTop=r)}},t.prototype.scrollTop=function(){if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var t=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),i=t.offsetTop-this.list.scrollTop,n=this.list.querySelector("li").classList.contains(e);i=n&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?i-this.fixedHeaderElement.offsetHeight:i;var s=t.offsetTop+t.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:i<0?this.list.scrollTop=this.list.scrollTop+i:s>0&&this.list.offsetHeight>s||(this.list.scrollTop=t.offsetTop-(n&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.setHover=function(e){e&&!e.classList.contains("e-hover")&&(this.removeHover(),sf.base.addClass([e],"e-hover"))},t.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll(".e-hover");e&&e.length&&sf.base.removeClass(e,"e-hover")}},t.prototype.isPopupOpen=function(){return this.popupObj&&document.body.contains(this.popupObj.element)},t}();return{initialize:function(e,i,n,s,o){n&&new t(e,i,n,s,o).initialize()},renderPopup:function(e,t,i,n,s,o,r){var a=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(a)&&t&&i&&a.renderPopup(t,i,n,s,o,r)},refreshPopup:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.refreshPopup()},closePopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.closePopup(t,i)},updateScrollPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setScrollPosition(t)},getPageCount:function(e){var t=e&&e.querySelector(".e-content");if(t){var i=t.classList.contains("e-nodata")?null:getComputedStyle(t.querySelectorAll(".e-list-item")[0],null).getPropertyValue("height");return Math.round(t.getBoundingClientRect().height/parseInt(i,10))}return 0},setAutoFillSelection:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setAutoFillSelection(t)},removeFillSelection:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.removeFillSelection()},focusIn:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(t?i.containerElement.focus():i.element.focus())},focusOut:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(t?i.containerElement.blur():i.element.blur())},destroy:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(o)||(t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(n,s)),o.destroy())}}}()},"./modules/sf-filemanager.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.FileManager=function(){"use strict";var e="e-blur",t=function(){function t(e,t,i){this.element=e,this.properties=i,this.treeviewEle=e.querySelector(".e-navigation .e-treeview"),this.dotnetRef=t,this.isMac=navigator.platform.toUpperCase().indexOf("MAC")>=0,sf.base.isNullOrUndefined(this.element)||(this.ctrlId=this.element.id,this.element.blazor__instance=this),this.bindKeyboardEvent(),this.bindTreeViewKeyBoardEvent(),this.wireEvents()}return t.prototype.unWireMobileEvents=function(){this.clickObj.destroy()},t.prototype.wireMobileEvents=function(){var e,t=this;e="Details"===this.properties.view?this.element.querySelector(".e-view-container .e-grid .e-gridcontent"):this.element.querySelector(".e-view-container .e-large-icons"),this.clickObj=new sf.base.Touch(e,{tapHold:function(e){var i,n;n="Details"===t.properties.view?(i=sf.base.closest(e.originalEvent.target,".e-row"))?i.getAttribute("data-rowindex"):null:(i=sf.base.closest(e.originalEvent.target,"li.e-list-item"))?i.getAttribute("data-uid"):null,null!=i&&null!=n&&t.dotnetRef.invokeMethodAsync("ChangeMobileMultiSelection",n)}})},t.prototype.wireEvents=function(){var e=this.element.querySelector("#"+this.properties.id+"_grid");e&&sf.base.EventHandler.add(e,"dblclick",this.gridBlur,this)},t.prototype.unWireEvents=function(){var e=this.element.querySelector("#"+this.properties.id+"_grid");e&&sf.base.EventHandler.remove(e,"dblclick",this.gridBlur)},t.prototype.adjustHeight=function(){var e=sf.base.select("#"+this.element.id+"_toolbar",this.element),t=e?e.offsetHeight:0,i=this.element.querySelector(".e-address").offsetHeight,n=this.element.clientHeight-t-i;return sf.base.formatUnit(this.element.clientHeight-t)+" "+sf.base.formatUnit(n)},t.prototype.createDragObj=function(){var e,t;"LargeIcons"===this.properties.view?(e=this.element.querySelector(".e-large-icons ul"),t=".e-large-icon"):(e=this.element.querySelector(".e-grid.e-control"),t=".e-row"),this.properties.draggable?(this.dragObj&&this.dragObj.destroy(),e&&this.dragObjProperty(this.dragObj,e,".e-fullrow")):this.properties.draggable||this.dragObj.destroy(),this.treeviewEle?(this.treeDragObj&&this.treeDragObj.destroy(),this.dragObjProperty(this.treeDragObj,this.treeviewEle,t)):this.properties.draggable||this.treeDragObj.destroy()},t.prototype.dragObjProperty=function(e,t,i){var n=this;new sf.base.Draggable(t,{cursorAt:{left:44,top:18},enableTailMode:!0,dragArea:this.element,dragTarget:i,drag:this.draggingHandler.bind(this),dragStart:function(e){n.dragStartHandler(e)},dragStop:this.dragStopHandler.bind(this),enableAutoScroll:!0,helper:this.dragHelper.bind(this)})},t.prototype.dragHelper=function(e){var t=e.sender.target;return this.getModule(t),"largeiconsview"===this.activeModule||"navigationpane"===this.activeModule?this.dragLi=sf.base.closest(t,".e-list-item"):"detailsview"===this.activeModule&&(this.dragLi=sf.base.closest(t,"tr.e-row"),"false"==this.dragLi.getAttribute("aria-selected")&&t.click()),this.dragLi?(this.createVirtualDragElement(),this.virtualDragElement):null},t.prototype.createVirtualDragElement=function(){this.updateViewElement(),this.updateDragValues(),this.cloneIcon=sf.base.createElement("div",{className:"e-fe-icon "+this.dragType}),this.cloneName=sf.base.createElement("div",{className:"e-fe-name",innerHTML:this.dragName});var e=sf.base.createElement("div",{className:"e-fe-content"});e.appendChild(this.cloneIcon),e.appendChild(this.cloneName);var t=sf.base.createElement("div",{className:"e-fe-clone"});if(t.appendChild(e),this.dragCount>1){var i=sf.base.createElement("span",{className:"e-fe-count",innerHTML:this.dragCount.toString(10)});t.appendChild(i)}this.virtualDragElement=t,this.element.appendChild(this.virtualDragElement)},t.prototype.getModule=function(e){e&&(sf.base.closest(e,".e-row")?this.activeModule="detailsview":sf.base.closest(e,".e-large-icon")?this.activeModule="largeiconsview":this.activeModule="navigationpane")},t.prototype.getXYValue=function(e,t){var i,n=e.changedTouches;if(!(i="X"===t?n?n[0].clientX:e.clientX:n?n[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var s=e.target.getBoundingClientRect();i=s?"X"===t?s.left:s.top:null}return Math.ceil(i)},t.prototype.removeDestroyElement=function(){this.dragObj.intDestroy(this.dragStartArgs.event),this.dragCancel()},t.prototype.TriggerDragEvent=function(e){e&&this.removeDestroyElement()},t.prototype.UpdateGridFocus=function(e){if("Details"==this.properties.view){this.updateViewElement();var t=this.viewElem.querySelectorAll(".e-focused"),i=this.viewElem.querySelector('[data-rowindex="'+e.toString()+'"]');if(t)for(var n=0;n<t.length;n++)sf.base.closest(t[n],"tr").getAttribute("data-rowindex")!=e.toString()&&(sf.base.closest(t[n],"tr").removeAttribute("tabindex"),sf.base.removeClass([t[n]],["e-focus","e-focused"]));sf.base.isNullOrUndefined(i)||(this.viewElem.setAttribute("tabindex","-1"),i.setAttribute("tabindex","0"),sf.base.addClass([i],["e-focus","e-focused"]))}},t.prototype.TriggerDragStartEvent=function(e){if(e)this.removeDestroyElement();else{this.dragStartArgs.bindEvents(this.dragStartArgs.dragElement);var t=this.dragStartArgs;t.cancel=!1,this.getModule(this.dragStartArgs.target);var i=this.element.querySelector(".e-navigation .e-treeview ul li").getAttribute("data-uid");(!this.properties.draggable||"navigationpane"===this.activeModule&&sf.base.closest(this.dragStartArgs.target,"li").getAttribute("data-uid")===i)&&(t.cancel=!0),this.removeBlur(),t.cancel?this.removeDestroyElement():t.cancel||(this.updateViewElement(),this.blurActive(),this.updateDragValues())}},t.prototype.dragStartHandler=function(e){this.dragStartArgs=e,this.element.blazor__instance=this,this.UpdateXY(e),this.dotnetRef.invokeMethodAsync("DragStartCall",this.dragLeft,this.dragTop)},t.prototype.blurActive=function(){for(var t=0,i=this.viewElem.querySelectorAll(".e-active");t<i.length;)i[t].classList.add(e),t++},t.prototype.updateViewElement=function(){"LargeIcons"===this.properties.view?this.viewElem=this.element.querySelector(".e-large-icons"):this.viewElem=this.element.querySelector(".e-gridcontent")},t.prototype.getIconClass=function(e){return e.querySelector(".e-list-img")?"e-fe-image":e.querySelector(".e-list-icon").classList[1]},t.prototype.updateDragValues=function(){var e;"largeiconsview"===this.activeModule?(e=this.viewElem.querySelectorAll(".e-active"),this.dragName=e.length>0?e[0].querySelector(".e-list-text").textContent:"",this.dragType=e.length>0?this.getIconClass(e[0]):""):"detailsview"===this.activeModule?null!=(e=this.viewElem.querySelectorAll('tr[aria-selected="true"]'))&&e.length>0&&(this.dragName=e.length>0?e[0].querySelector(".e-fe-text").textContent:"",this.dragType=e.length>0?e[0].querySelector(".e-fe-icon").classList[1]:""):"navigationpane"===this.activeModule&&(this.dragName=this.dragLi.querySelector(".e-list-text").textContent,this.dragType="e-fe-folder"),null!=e&&(this.dragCount=e.length)},t.prototype.getTargetModule=function(e){e&&(sf.base.closest(e,".e-gridcontent")?this.targetModule="detailsview":sf.base.closest(e,".e-large-icons")?this.targetModule="largeiconsview":e.classList.contains("e-fullrow")||e.classList.contains("e-icon-expandable")?this.targetModule="navigationpane":sf.base.closest(e,".e-address-list-item")?this.targetModule="breadcrumbbar":this.targetModule="")},t.prototype.draggingHandler=function(t){var i=!1;this.updateDragValues(),this.cloneIcon.setAttribute("class","e-fe-icon "+this.dragType),this.cloneName.innerHTML=this.dragName;var n=null;this.blurActive(),this.getTargetModule(t.target),this.removeDropTarget(),this.removeBlur("hover"),"navigationpane"===this.targetModule?((n=sf.base.closest(t.target,"li")).classList.add("e-hover","e-fe-drop-folder"),i=!0):"detailsview"===this.targetModule?((n=sf.base.closest(t.target,"tr"))&&n.querySelector(".e-fe-folder")&&!n.classList.contains(e)?n.classList.add("e-fe-drop-folder"):!n||n.querySelector(".e-fe-folder")||n.classList.contains(e)||n.classList.add("e-fe-drop-file"),i=!0):"largeiconsview"===this.targetModule?((n=sf.base.closest(t.target,"li"))&&n.querySelector(".e-fe-folder")&&!n.classList.contains(e)&&n.classList.add("e-hover","e-fe-drop-folder"),i=!0):"breadcrumbbar"===this.targetModule&&(i=!0),this.element.classList.remove("e-fe-drop","e-no-drop"),this.element.classList.add(i?"e-fe-drop":"e-no-drop"),this.UpdateXY(t),this.dotnetRef.invokeMethodAsync("DraggingCall",this.dragLeft,this.dragTop)},t.prototype.UpdateXY=function(e){this.dragLeft=this.getXYValue(e.event,"X"),this.dragTop=this.getXYValue(e.event,"Y")},t.prototype.dragStopHandler=function(e){var t,i,n=!1;if(e.cancel=!1,this.removeDropTarget(),this.element.classList.remove("e-fe-drop","e-no-drop"),this.dragCancel(),this.getTargetModule(e.target),""===this.targetModule&&e.target.classList.contains("e-view-container")&&(n=!0),this.removeBlur("hover"),"largeiconsview"===this.targetModule||"navigationpane"===this.targetModule||"breadcrumbbar"===this.targetModule){t=sf.base.closest(e.target,"li");var s="breadcrumbbar"===this.targetModule?"data-utext":"data-uid";i=t?t.getAttribute(s):null}else"detailsview"===this.targetModule&&(i=(t=sf.base.closest(e.target,"tr"))?t.getAttribute("data-rowindex"):null);null==i&&(n=!0);var o=this.treeviewEle?this.dragLi.getAttribute("data-uid"):null;"detailsview"===this.activeModule&&(o=this.dragLi.getAttribute("data-rowindex")),this.UpdateXY(e),this.dotnetRef.invokeMethodAsync("DragStopCall",o,i,this.targetModule,this.activeModule,n,this.dragLeft,this.dragTop),this.dragCount=0,this.dragName="",this.dragType=""},t.prototype.dragCancel=function(){this.removeBlur();var e=sf.base.select(".e-fe-clone",this.element);e&&sf.base.detach(e)},t.prototype.gridBlur=function(e){var t=e.target;"TD"===t.tagName&&t.blur()},t.prototype.removeItemClass=function(e){for(var t=this.element.querySelectorAll("."+e),i=0;i<t.length;i++)t[i].classList.remove(e)},t.prototype.removeDropTarget=function(){this.removeItemClass("e-fe-drop-folder"),this.removeItemClass("e-fe-drop-file")},t.prototype.removeBlur=function(t){for(var i=t?this.element.querySelectorAll(".e-hover"):this.element.querySelectorAll("."+e),n=0;n<i.length;)i[n].classList.remove(t?"e-hover":e),n++},t.prototype.bindTreeViewKeyBoardEvent=function(){var e=this.element.querySelector(".e-navigation"),t={altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:this.isMac?"cmd+x":"ctrl+x",ctrlC:this.isMac?"cmd+c":"ctrl+c",ctrlV:this.isMac?"cmd+v":"ctrl+v",f2:"f2",shiftF10:"shift+f10"};if(e)new sf.base.KeyboardEvents(e,{keyAction:this.treeviewKeydownHandler.bind(this),keyConfigs:t,eventName:"keydown"})},t.prototype.bindKeyboardEvent=function(){if("Details"===this.properties.view){var e={altEnter:"alt+enter",esc:"escape",tab:"tab",moveDown:"downarrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",ctrlUp:"ctrl+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",end:"end",home:"home",moveUp:"uparrow",del:"delete",ctrlX:this.isMac?"cmd+x":"ctrl+x",ctrlC:this.isMac?"cmd+c":"ctrl+c",ctrlV:this.isMac?"cmd+v":"ctrl+v",ctrlShiftN:"ctrl+shift+n",shiftdel:"shift+delete",ctrlD:"ctrl+d",f2:"f2",ctrlA:this.isMac?"cmd+a":"ctrl+a",enter:"enter"},t=this.element.querySelector("#"+this.properties.id+"_grid");t&&this.bindKeyboardEvents(e,t)}else if("LargeIcons"===this.properties.view){e={altN:"alt+n",f5:"f5",ctrlShift1:"ctrl+shift+1",ctrlShift2:"ctrl+shift+2",ctrlU:"ctrl+u",end:"end",home:"home",tab:"tab",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",ctrlUp:"ctrl+uparrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftLeft:"shift+leftarrow",shiftRight:"shift+rightarrow",shiftUp:"shift+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csLeft:"ctrl+shift+leftarrow",csRight:"ctrl+shift+rightarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",ctrlA:this.isMac?"cmd+a":"ctrl+a",enter:"enter",altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:this.isMac?"cmd+x":"ctrl+x",ctrlC:this.isMac?"cmd+c":"ctrl+c",ctrlV:this.isMac?"cmd+v":"ctrl+v",f2:"f2",shiftdel:"shift+delete",back:"backspace",ctrlD:"ctrl+d"};var i=this.element.querySelector("#"+this.properties.id+"_largeicons");i&&this.bindKeyboardEvents(e,i)}},t.prototype.bindKeyboardEvents=function(e,t){this.keyboardModule=new sf.base.KeyboardEvents(t,{keyAction:this.keyupHandler.bind(this),keyConfigs:e,eventName:"keyup"}),this.keyboardDownModule=new sf.base.KeyboardEvents(t,{keyAction:this.keydownHandler.bind(this),keyConfigs:e,eventName:"keydown"})},t.prototype.getRowValue=function(){var e=this.element.querySelector("#"+this.element.id+"_largeicons").querySelectorAll(".e-list-item"),t=1;if(e)for(var i=0,n=e.length-1;i<n&&e[i].getBoundingClientRect().top===e[i+1].getBoundingClientRect().top;i++)t++;return t},t.prototype.keyupHandler=function(e){e.preventDefault();var t=0;"LargeIcons"===this.properties.view&&(t=this.getRowValue());var i=null;switch(e.action){case"altN":i="NewFolder";break;case"f5":i="Refresh";break;case"ctrlShift1":i="DetailsView";break;case"ctrlShift2":i="LargeIconsView";break;case"ctrlU":i="Upload";break;case"altEnter":i="Details";break;case"del":case"shiftdel":i="Delete";break;case"enter":i="Open";break;case"ctrlC":i="Copy";break;case"ctrlV":i="Paste";break;case"ctrlX":i="Cut";break;case"ctrlD":i="Download";break;case"f2":i="Rename";break;case"ctrlA":i="SelectAll";break;case"home":i="Home";break;case"end":i="End";break;case"moveDown":i="MoveDown_"+t.toString();break;case"moveLeft":i="MoveLeft";break;case"moveRight":i="MoveRight";break;case"moveUp":i="MoveUp_"+t.toString();break;case"esc":i="Esc";break;case"ctrlLeft":i="ControlLeft";break;case"ctrlRight":i="ControlRight";break;case"ctrlEnd":i="ControlEnd";break;case"ctrlHome":i="ControlHome";break;case"shiftHome":i="ShiftHome";break;case"shiftEnd":i="ShiftEnd";break;case"shiftLeft":i="ShiftLeft";break;case"shiftRight":i="ShiftRight";break;case"csHome":i="ControlShiftHome";break;case"csEnd":i="ControlShiftEnd";break;case"csLeft":i="ControlShiftLeft";break;case"csRight":i="ControlShiftRight";break;case"ctrlUp":i="ControlUp_"+t.toString();break;case"shiftUp":i="ShiftUp_"+t.toString();break;case"csUp":i="ControlShiftUp_"+t.toString();break;case"ctrlDown":i="ControlDown_"+t.toString();break;case"shiftDown":i="ShiftDown_"+t.toString();break;case"csDown":i="ControlShiftDown_"+t.toString();break;case"space":i="Space";break;case"csSpace":i="ControlShiftSpace";break;case"shiftSpace":i="ShiftSpace";break;case"ctrlSpace":i="ControlSpace";break;case"tab":i="Tab"}i&&this.dotnetRef.invokeMethodAsync("PerformKeyboardAction",i)},t.prototype.treeviewKeydownHandler=function(e){if(e.preventDefault(),null==this.element.querySelector(".e-dialog.e-popup-open")){var t=null;switch(e.action){case"altEnter":t="Details";break;case"esc":t="Esc";break;case"del":t="Delete";break;case"ctrlC":t="Copy";break;case"ctrlV":t="Paste";break;case"ctrlX":t="Cut";break;case"shiftF10":t="Download";break;case"f2":t="Rename"}t&&this.dotnetRef.invokeMethodAsync("PerformTreeViewKeyboardAction",t)}},t.prototype.keydownHandler=function(e){if(null==this.element.querySelector(".e-dialog.e-popup-open"))switch(e.action){case"end":case"home":case"space":case"ctrlSpace":case"shiftSpace":case"csSpace":case"ctrlA":case"enter":case"altEnter":case"ctrlEnd":case"shiftEnd":case"csEnd":case"ctrlHome":case"shiftHome":case"csHome":case"ctrlDown":case"shiftDown":case"csDown":case"ctrlLeft":case"shiftLeft":case"csLeft":case"esc":case"del":case"shiftdel":case"ctrlC":case"ctrlV":case"ctrlX":case"f2":case"moveDown":case"moveUp":case"ctrlD":case"altN":case"f5":case"ctrlShift1":case"ctrlShift2":case"ctrlU":e.preventDefault()}},t}();return{initialize:function(e,i,n,s){if(new t(e,i,n),e.getElementsByClassName("e-upload-browse-btn")&&e.getElementsByClassName("e-upload-browse-btn")[0].children.length<2){e.getElementsByClassName("e-upload-browse-btn")[0].classList.add("e-tbar-btn","e-tbtn-txt");var o=e.querySelector(".e-fe-upload");document.querySelector(".e-upload-browse-btn.e-tbar-btn").appendChild(o),e.getElementsByClassName("e-fe-upload")[0].classList.add("e-btn-icon","e-icon-left");var r=document.createElement("span");r.className="e-tbar-btn-text",r.textContent="Upload",document.querySelector(".e-upload-browse-btn.e-tbar-btn").appendChild(r)}return n.draggable&&e.blazor__instance.createDragObj(),e.blazor__instance.isMobile=s,e.blazor__instance.adjustHeight()},dragStartActionContinue:function(e,t){e&&e.blazor__instance.TriggerDragStartEvent(t)},wireMobileEvents:function(e){e.blazor__instance.wireMobileEvents()},dragActionContinue:function(e,t){e&&e.blazor__instance.TriggerDragEvent(t)},focusItem:function(e,t){if(e&&"LargeIcons"===e.blazor__instance.properties.view){var i=e.querySelector('.e-list-item.e-large-icon[data-uid="'+t+'"]');i&&i.focus()}},updateProperties:function(e,t){return e.blazor__instance.properties=t,e.blazor__instance.unWireEvents(),e.blazor__instance.wireEvents(),e.blazor__instance.isMobile&&(e.blazor__instance.unWireMobileEvents(),e.blazor__instance.wireMobileEvents()),e.blazor__instance.adjustHeight()},uploadOpen:function(e,t,i){var n=(sf.base.isNullOrUndefined(i)?e:document.querySelector(i)).querySelector("#"+t);n&&n.click()},appendUploadElement:function(e){if(e){for(var t=e.querySelector(".e-upload-files"),i=t.getElementsByClassName("e-file-name"),n=0;n<i.length;n++)i[n].getAttribute("data-tail")&&i[n].removeAttribute("data-tail");var s=document.createElement("div");s.className="e-upload",s.appendChild(t),e.querySelector(".e-dlg-content").appendChild(s)}},triggerBlur:function(e){e&&"TD"===document.activeElement.tagName&&document.activeElement.blur()},updateFocus:function(e,t){e&&e.blazor__instance.UpdateGridFocus(t)},updateView:function(e,t){e&&(e.blazor__instance.properties.view=t,e.blazor__instance.keyboardDownModule.destroy(),e.blazor__instance.keyboardModule.destroy(),e.blazor__instance.bindKeyboardEvent(),e.blazor__instance.isMobile&&(e.blazor__instance.unWireMobileEvents(),e.blazor__instance.wireMobileEvents())),e.blazor__instance.properties.draggable&&e.blazor__instance.createDragObj()},updateGridRow:function(e,t){if(e){for(var i=e.querySelectorAll('tr.e-row[tabindex="0"]'),n=0;n<i.length;n++)i[n].removeAttribute("tabindex");var s=e.querySelector('[data-rowindex="'+t+'"]');s&&(s.setAttribute("tabindex","0"),s.focus())}},focusToolbar:function(e,t){var i=e.querySelector(t);e&&i&&i.children[0].focus()},saveFile:function(e,t,i){var n={action:"download",path:e.path,names:e.names,data:e.data},s=sf.base.createElement("form",{id:i.id+"_downloadForm",attrs:{action:t,method:"post",name:"downloadForm",download:""}}),o=sf.base.createElement("input",{id:i.id+"_hiddenForm",attrs:{name:"downloadInput",value:JSON.stringify(n),type:"hidden"}});s.appendChild(o),document.body.appendChild(s),document.forms.namedItem("downloadForm").submit(),document.body.removeChild(s)},getTargetElement:function(e,t,i){var n,s,o=document.elementFromPoint(t,i),r=sf.base.closest(o,'li[role="treeitem"]');if(o)if(o.classList.contains("e-yscroll")&&o.classList.contains("e-content")||o.classList.contains("e-list-parent")&&o.classList.contains("e-ul")||o.classList.contains("e-view-container")||o.classList.contains("e-large-icons")||sf.base.closest(o,".e-empty.e-view-container"))s={IsFile:!1,RowIndex:null,IsFolder:!1,IsLayout:!0,IsTree:!1};else if(r){s={IsFile:!1,RowIndex:parseInt(r.getAttribute("data-uid"),10),IsFolder:!0,IsLayout:!1,IsTree:!0}}else{if("Details"===e)s={IsFile:a=!(n=sf.base.closest(o,"tr")).querySelector(".e-fe-grid-icon .e-fe-icon").classList.contains("e-fe-folder"),RowIndex:parseInt(n.getAttribute("data-rowindex"),10),IsFolder:!a,IsLayout:!1,IsTree:!1};else if("LargeIcons"===e){var a,l=(n=sf.base.closest(o,"li")).querySelector(".e-list-icon");s={IsFile:a=!l||!l.classList.contains("e-fe-folder"),RowIndex:parseInt(n.getAttribute("data-uid"),10),IsFolder:!a,IsLayout:!1,IsTree:!1}}}else s={IsFile:!1,RowIndex:null,IsFolder:!1,IsLayout:!1,IsTree:!1};return s}}}()},"./modules/sf-floating-action-button.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Fab=function(){"use strict";var e=function(){function e(e){this.sfBlazor=window.sfBlazor,this.updateContext(e),this.sfBlazor.setCompInstance(this),this.initialize()}return e.prototype.updateContext=function(e){sf.base.extend(this,this,e)},e.prototype.initialize=function(){this.checkTarget(),this.setClientProps(!0),this.bindEvent(),this.visible&&this.element.classList.remove("e-fab-hidden")},e.prototype.checkTarget=function(){this.targetEle=null,sf.base.isNullOrUndefined(this.target)||"string"!=typeof this.target||(this.targetEle=document.querySelector(this.target)),this.isFixed=sf.base.isNullOrUndefined(this.targetEle),!this.isFixed&&this.targetEle.appendChild(this.element),this.isFixed?this.element.classList.add("e-fab-fixed"):this.element.classList.remove("e-fab-fixed")},e.prototype.bindEvent=function(){sf.base.EventHandler.add(window,"resize",this.resizeHandler,this)},e.prototype.unBindEvent=function(){sf.base.EventHandler.remove(window,"resize",this.resizeHandler)},e.prototype.resizeHandler=function(){this.getOffset(),(this.isMiddle||this.isCenter)&&this.dotNetRef.invokeMethodAsync("UpdatePosition",this.yOffset,this.xOffset)},e.prototype.setClientProps=function(e){this.getOffset();var t={yOffset:this.isMiddle?this.yOffset:"",xOffset:this.isCenter?this.xOffset:""};e&&(t.isFixed=this.isFixed?"Fixed":"Absolute"),this.clientProps=JSON.stringify(t)},e.prototype.getOffset=function(){this.isMiddle&&(this.yOffset=((this.targetEle?this.targetEle.clientHeight:window.innerHeight)-this.element.offsetHeight)/2+"px",this.element.style.setProperty("--fabVertDist",this.yOffset)),this.isCenter&&(this.xOffset=((this.targetEle?this.targetEle.clientWidth:window.innerWidth)-this.element.offsetWidth)/2+"px",this.element.style.setProperty("--fabHorzDist",this.xOffset))},e.prototype.destroy=function(){this.unBindEvent()},e.prototype.validateTarget=function(e){this.updateContext(e),this.checkTarget(),this.setClientProps(!0)},e.prototype.setPosition=function(e){this.updateContext(e),this.setClientProps(!1)},e}();return{initialize:function(t){return t.dataId?new e(t).clientProps:{}},validateTarget:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);return t.validateTarget(e),t.clientProps}return{}},setPosition:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);return t.setPosition(e),t.clientProps}return{}},destroy:function(e){e&&window.sfBlazor.getCompInstance(e).destroy()}}}()},"./modules/sf-gantt.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Gantt=function(){"use strict";var e=function(){function e(e,t,i,n){this.previousCount=-1,this.timelineScrollLeft=0,this.parent=e,this.chartRootElement=t.querySelector(".e-chart-root-container"),this.chartElement=t.querySelector(".e-gantt-chart-pane"),this.element=t.querySelector(".e-chart-scroll-container"),this.timelineHeaderElement=t.querySelector(".e-timeline-header-container"),this.chartVirtualTable=this.element.querySelector(".e-virtualtable"),this.timelineVirtualTrack=this.timelineHeaderElement.querySelector(".e-virtualtrack"),this.dependencyViewContainer=t.querySelector(".e-gantt-dependency-view-container"),this.addEventListeners(),this.ChartHeight(t,this.chartRootElement)}return e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.element,"scroll",this.onScroll,this),sf.base.EventHandler.add(this.chartElement,sf.base.Browser.touchStartEvent,this.mouseDownHandler,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gantt-chart-pane"),i=e.element.querySelector(".e-chart-scroll-container");sf.base.EventHandler.remove(i,"scroll",this.onScroll),sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.mouseDownHandler)},e.prototype.gridScrollHandler=function(e){this.element.scrollTop=e,this.parent.isFromTreeGrid=!0},e.prototype.showHideSpinner=function(e){var t=this.parent;e&&!this.parent.spinnerShown?(this.parent.dotNetRef.invokeMethodAsync("ShowSpinner"),this.parent.spinnerShown=!0):!e&&this.parent.spinnerShown&&(t.dotNetRef.invokeMethodAsync("HideSpinner"),t.spinnerShown=!1)},e.prototype.updateSpinner=function(e){var t=this;this.showHideSpinner(!0),window.clearTimeout(this.isScrolling),this.isScrolling=setTimeout((function(){e&&t.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",t.timelineScrollLeft,t.parent.element.offsetWidth).then((function(){t.updateChartElementStyle()})),t.element.querySelector(".e-chart-rows-container").style.visibility="visible",t.showHideSpinner(!1)}),200)},e.prototype.onScroll=function(){var e=this.parent;e.scrollbarUpdate=!0,this.element.scrollTop!==e.chartPreviousScroll.top&&this.parent.options.enableVirtualization&&this.updateSpinner(!1),this.element.scrollLeft!==this.parent.chartPreviousScroll.left&&(this.timelineHeaderElement.scrollLeft=this.element.scrollLeft,e.options.enableVirtualization&&(this.appendDummyTable(),this.updateSpinner(!0)),this.parent.chartPreviousScroll.left=this.element.scrollLeft),this.element.scrollTop!==this.parent.chartPreviousScroll.top&&(this.parent.isFromTreeGrid||this.parent.treeGridModule.updateScrollTop(this.element.scrollTop),this.parent.chartPreviousScroll.top=this.element.scrollTop,this.parent.isFromTreeGrid=!1)},e.prototype.updateContent=function(){this.timelineScrollLeft=this.timelineHeaderElement.scrollLeft;var e=this.parent.element,t=Math.round(this.timelineScrollLeft/(2*e.offsetWidth));this.previousCount!=t&&(this.timelineScrollLeft-=e.offsetWidth,this.calculateScrollLeft(),this.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",this.timelineScrollLeft,e.offsetWidth),this.updateChartElementStyle()),this.previousCount=t},e.prototype.updateChartElementStyle=function(){var e=this.timelineScrollLeft,t=3*this.parent.element.offsetWidth;if(this.timelineVirtualTrack.offsetWidth>t){var i=new DOMMatrixReadOnly(this.chartVirtualTable.style.transform).m42;this.chartVirtualTable.style.transform="translate("+e+"px,"+i+"px)",this.chartTaskTable.style.left=-e+"px",this.chartTaskTable.style.width=t+e+"px",sf.base.isNullOrUndefined(this.dependencyViewContainer)||(this.dependencyViewContainer.style.left=-e+"px",this.dependencyViewContainer.style.transform="translate("+-e+"px, 0px)")}else this.timelineVirtualTrack.offsetWidth<t&&(this.chartTaskTable.style.width=this.timelineVirtualTrack.offsetWidth+"px")},e.prototype.calculateScrollLeft=function(){var e=this.parent.element,t=3*e.offsetWidth,i=this.timelineVirtualTrack.offsetWidth>t?this.timelineVirtualTrack.offsetWidth-t:t;this.timelineScrollLeft>=i?this.timelineScrollLeft=i:this.element.scrollLeft<this.parent.chartPreviousScroll.left?this.timelineScrollLeft<=e.offsetWidth&&(this.timelineScrollLeft=0):this.timelineScrollLeft<0&&(this.timelineScrollLeft=0)},e.prototype.appendDummyTable=function(){this.timelineScrollLeft=this.timelineHeaderElement.scrollLeft;var e=this.timelineHeaderElement.querySelectorAll(".e-virtualtable");this.element.querySelector(".e-chart-rows-container").style.visibility="hidden",this.calculateScrollLeft();for(var t=0;t<e.length;t++){var i=e[t],n=new DOMMatrixReadOnly(i.style.transform).m42;i.style.transform="translate("+this.timelineScrollLeft+"px,"+n+"px)"}},e.prototype.mouseDownHandler=function(e){if(null!=this.parent.getParentElement(e.target,"e-gantt-chart")){var t=null,i=null;this.parent.getParentElement(e.target,"e-timeline-header-container")?t="Header":this.parent.getParentElement(e.target,"e-content")&&(t="Content",i=this.parent.getParentElement(e.target,"e-chart-row-cell")?this.parent.getParentElement(e.target,"e-chart-row-cell").getAttribute("data-uid"):null),"Header"!=t&&"Content"!=t||this.parent.dotNetRef.invokeMethodAsync("ChartMouseDownHandler",t,i)}},e.prototype.setScrollLeft=function(e){this.element.scrollLeft=e,this.timelineHeaderElement.scrollLeft=this.element.scrollLeft,this.parent.chartPreviousScroll.left=this.element.scrollLeft},e.prototype.setScrollTop=function(e){this.element.scrollTop=e,this.parent.treeGrid.element.querySelector(".e-content").scrollTop=e},e.prototype.ChartHeight=function(e,t){this.toolbarElement=e.querySelector("#"+e.id+"_Gantt_Toolbar"),this.viewPortHeight=this.parent.height-this.parent.toolbarHeight-this.timelineHeaderElement.offsetHeight,t.style.height="calc(100% - "+this.timelineHeaderElement.offsetHeight+"px)"},e.prototype.destroy=function(e){this.removeEventListeners(e)},e}(),t=function(){function e(e,t){this.parent=e,this.content=t,this.addEventListeners()}return e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.content,"scroll",this.scrollHandler,this),sf.base.EventHandler.add(window,"resize",this.windowResize,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gridcontent");sf.base.EventHandler.remove(t,"scroll",this.scrollHandler),sf.base.EventHandler.remove(window,"resize",this.windowResize)},e.prototype.scrollHandler=function(e){this.content.scrollTop!==this.parent.treegridPreviousScroll.top&&this.parent.chartScrollModule.gridScrollHandler(this.content.scrollTop),this.parent.treegridPreviousScroll.top=this.content.scrollTop},e.prototype.windowResize=function(){if(sf.base.Browser.isDevice&&this.parent.dotNetRef.invokeMethodAsync("WindowResize"),this.parent.options.enableVirtualization){var e=this.parent.chartScrollModule.timelineHeaderElement;e&&(e.style.width=this.parent.chartScrollModule.element.offsetWidth-this.parent.scrollWidth+"px"),this.parent.chartScrollModule.updateContent()}},e.prototype.updateScrollTop=function(e){this.content.scrollTop=e,this.parent.treegridPreviousScroll.top=this.content.scrollTop},e.prototype.destroy=function(e){this.removeEventListeners(e)},e}(),i="e-active-container",n=function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},s=function(){function e(e){this.elementOffsetLeft=0,this.elementOffsetTop=0,this.elementOffsetWidth=0,this.elementOffsetHeight=0,this.restrictTaskbarEdit=!1,this.parent=e,this.initPublicProp(),this.ganttChartTableBody=this.parent.element.querySelector("#"+this.parent.element.id+"_chartContentBody"),this.chartPane=this.parent.element.querySelector(".e-gantt-chart-pane"),this.chartBodyContainer=this.parent.element.querySelector(".e-chart-root-container"),this.addEventListeners()}return e.prototype.initPublicProp=function(){this.taskBarEditElement=null,this.taskBarEditRecord=null,this.taskBarEditAction=null,this.dragMouseLeave=!1,this.isMouseDragging=!1,this.isTaskbarHold=!1,this.taskbarTouchEditing=!1,this.connectorPointWidth=null,this.connectorSecondAction=null,this.toPredecessorText=null,this.highlightedSecondElement=null,this.falseLine=null},e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseDown,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchCancelEvent,this.ganttMouseLeave,this),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp,this),sf.base.EventHandler.add(this.chartBodyContainer,"click",this.click,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gantt-chart-pane"),i=e.element.querySelector(".e-chart-root-container");sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.ganttMouseDown),sf.base.EventHandler.remove(t,sf.base.Browser.touchMoveEvent,this.ganttMouseMove),sf.base.EventHandler.remove(t,sf.base.Browser.touchCancelEvent,this.ganttMouseLeave),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp),sf.base.EventHandler.remove(i,"click",this.click)},e.prototype.ganttMouseDown=function(e){this.taskbarCanDrag=!1;var t=this.getElementByPosition(e);this.parent.getParentElement(t,"e-taskbar-main-container")==this.taskbarCurrentEditElement&&(this.taskbarCanDrag=!0),this.updateTaskBarEditElement(e)},e.prototype.click=function(e){var t=this.getElementByPosition(e);this.taskbarCurrentEditElement=this.parent.getParentElement(t,"e-taskbar-main-container")},e.prototype.ganttMouseLeave=function(e){this.dragMouseLeave=!0},e.prototype.ganttChartMouseUp=function(e){var t=this;this.isTaskbarHold=!1,this.taskBarEditAction&&this.isMouseDragging?this.dragMouseLeave?(this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",null,null,null),this.taskBarEditRecord=this.previousItem,this.updateItemPosition()):this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",this.dataGuid,this.taskBarEditAction,this.taskBarEditRecord).then((function(e){null!=t.taskBarEditRecord&&null!=e&&(t.taskBarEditRecord.left=e.left,t.taskBarEditRecord.width=e.width),t.updateItemPosition()})):this.taskBarEditElement&&this.taskbarTouchEditing?(this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",null,null,null),this.falseLine&&this.removeFalseLine(!0),this.initPublicProp()):this.tappedPoint&&(this.taskbarCurrentEditElement=null),this.stopScrollTimer()},e.prototype.updateItemPosition=function(){this.setItemPosition(),this.falseLine&&this.removeFalseLine(!0),this.initPublicProp()},e.prototype.updateTaskBarEditElement=function(e){var t=this,i=this.getElementByPosition(e),n=this.parent.getParentElement(i,"e-taskbar-main-container");if(this.taskBarEditElement=n,this.taskBarEditElement&&!this.tappedPoint)"mousedown"!==e.type&&"touchstart"!==e.type&&"click"!==e.type||(this.dataGuid=this.taskBarEditElement.getAttribute("rowuniqueid"),this.parent.dotNetRef.invokeMethodAsync("GetConnectorValues").then((function(e){t.connectorPointWidth=e})),this.taskBarEditAction=this.getTaskBarAction(e),this.parent.isTaskbarEditingEventMapped&&this.parent.dotNetRef.invokeMethodAsync("OnTaskbarEditing",this.dataGuid,this.taskBarEditAction).then((function(e){t.restrictTaskbarEdit=e})),this.parent.dotNetRef.invokeMethodAsync("GetEditedRecord",this.dataGuid,this.taskBarEditAction).then((function(i){t.taskBarEditRecord=i,t.updateMouseDownProperties(e)})),this.isTaskbarHold=!0);else if(this.taskBarEditElement&&this.tappedPoint){var s=n.getAttribute("rowuniqueid");this.parent.dotNetRef.invokeMethodAsync("RenderConnectorLine",this.tappedPoint,this.dataGuid,s),this.initPublicProp()}"touchstart"!==e.type&&"click"!==e.type||sf.base.isNullOrUndefined(this.chartBodyContainer.querySelector(".e-connector-line-container"))||(this.taskBarEditElement||this.tappedPoint?sf.base.addClass(this.chartBodyContainer.querySelectorAll(".e-connector-line-container"),"e-connector-line-z-index"):sf.base.removeClass(this.chartBodyContainer.querySelectorAll(".e-connector-line-container"),"e-connector-line-z-index"))},e.prototype.updateMouseDownProperties=function(e){var t=this.getCoordinate(e);if(t.pageX||t.pageY){var i=this.parent.getOffsetRect(this.chartBodyContainer);this.mouseDownX=t.pageX-i.left+this.parent.chartPreviousScroll.left,this.mouseDownY=t.pageY-i.top+this.parent.chartPreviousScroll.top}},e.prototype.getTaskBarAction=function(e){var t=this.getElementByPosition(e),i=(this.taskBarEditRecord,"");return t.classList.contains("e-taskbar-left-resizer")?i="LeftResizing":t.classList.contains("e-taskbar-right-resizer")?i="RightResizing":t.classList.contains("e-child-progress-resizer")||sf.base.closest(t,".e-child-progress-resizer")?i="ProgressResizing":t.classList.contains("e-connectorpoint-left-hover")?(i="ConnectorPointLeftDrag","touchstart"!==e.type&&"click"!==e.type||(this.tappedPoint="ConnectorPointLeftDrag")):t.classList.contains("e-connectorpoint-right-hover")?(i="ConnectorPointRightDrag","touchstart"!==e.type&&"click"!==e.type||(this.tappedPoint="ConnectorPointRightDrag")):"Auto"===this.parent.options.taskMode&&(sf.base.closest(t,".e-gantt-parent-taskbar")||sf.base.closest(t,".e-gantt-parent-milestone"))?i="ParentDrag":sf.base.closest(t,".e-gantt-child-taskbar")?i="ChildDrag":sf.base.closest(t,".e-gantt-milestone")&&(i="MilestoneDrag"),i},e.prototype.getElementByPosition=function(e){var t=this.getCoordinate(e);return t.pageX=null!=t.pageX?t.pageX:0,t.pageY=null!=t.pageY?t.pageY:0,document.elementFromPoint(t.pageX-window.pageXOffset,t.pageY-window.pageYOffset)},e.prototype.getCoordinate=function(e){var t={};if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchleave"===e.type){var i=e;t.pageX=i.changedTouches[0].pageX,t.pageY=i.changedTouches[0].pageY}else{i=e;t.pageX=i.pageX,t.pageY=i.pageY}return t},e.prototype.ganttMouseMove=function(e){if("touchmove"!==e.type&&"click"!==e.type||this.taskbarCanDrag){if(this.taskBarEditAction&&this.taskBarEditRecord&&this.isTaskbarHold){var t=this.parent.getOffsetRect(this.chartBodyContainer),i=this.getCoordinate(e);this.mouseMoveX=i.pageX-t.left+this.parent.chartPreviousScroll.left,this.mouseMoveY=i.pageY-t.top+this.parent.chartPreviousScroll.top,this.dragMouseLeave=!1,this.isMouseDragCheck(),this.isMouseDragging&&this.taskBarEditingAction(e,!1)}var n=sf.base.closest(e.target,".e-taskbar-main-container");n&&(this.parent.options.allowTaskbarEditing&&"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction?n.style.cursor="move":n.style.cursor="auto"),sf.base.isNullOrUndefined(this.chartBodyContainer.querySelector(".e-connector-line-container"))||(null!==n?sf.base.addClass(this.chartBodyContainer.querySelectorAll(".e-connector-line-container"),"e-connector-line-z-index"):sf.base.isNullOrUndefined(this.chartBodyContainer.querySelectorAll(".e-connector-line-z-index"))||sf.base.removeClass(this.chartBodyContainer.querySelectorAll(".e-connector-line-container"),"e-connector-line-z-index"))}},e.prototype.isMouseDragCheck=function(){if(!this.isMouseDragging&&this.taskBarEditAction&&(this.mouseDownX!==this.mouseMoveX&&(this.mouseDownX+3<this.mouseMoveX||this.mouseDownX-3>this.mouseMoveX)||this.mouseDownY!==this.mouseMoveY&&(this.mouseDownY+3<this.mouseMoveY||this.mouseDownY-3>this.mouseMoveY))){this.isMouseDragging=!0;var e=this.taskBarEditRecord;this.previousItem=n({},e),this.taskBarEditElement.setAttribute("aria-grabbed","true")}},e.prototype.updateMouseMoveProperties=function(e){var t=this.parent.getOffsetRect(this.chartBodyContainer),i=this.getCoordinate(e),n="ConnectorPointLeftDrag"===this.taskBarEditAction||"ConnectorPointRightDrag"===this.taskBarEditAction;if((i.pageX||i.pageY)&&(this.mouseMoveX=i.pageX-t.left+this.parent.chartPreviousScroll.left,this.mouseMoveY=i.pageY-t.top+this.parent.chartPreviousScroll.top),this.taskBarEditRecord.width>3&&("ProgressResizing"!==this.taskBarEditAction||0!==this.taskBarEditRecord.progress&&100!==this.taskBarEditRecord.progress)||n){var s=this.mouseMoveX-this.parent.chartPreviousScroll.left+t.left,o=this.mouseMoveY-this.parent.chartPreviousScroll.top+t.top;s+20>t.left+this.chartBodyContainer.offsetWidth?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):s-10<t.left?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("left")):n&&o>t.top+this.chartBodyContainer.offsetHeight-80?(this.timerCount=this.parent.chartPreviousScroll.top,this.startScrollTimer("bottom")):n&&o-25<t.top?(this.timerCount=this.parent.chartPreviousScroll.top,this.startScrollTimer("top")):null!=this.scrollTimer&&this.stopScrollTimer()}e.preventDefault()},e.prototype.startScrollTimer=function(e){var t=this;this.parent.chartScrollModule.previousCount=0,this.stopScrollTimer(),this.scrollTimer=window.setInterval((function(){if("right"===e)t.timerCount=t.timerCount+1>=t.parent.totalTimelineWidth?t.parent.totalTimelineWidth:t.timerCount+1;else if("bottom"===e){var i=t.parent.options.enableVirtualization?parseFloat(t.parent.element.querySelector(".e-virtualtrack").style.height):parseFloat(t.parent.element.querySelector(".e-chart-rows-container").style.height);t.timerCount=t.timerCount+1>=i?i:t.timerCount+1}else t.timerCount=t.timerCount-1<0?0:t.timerCount-1;"bottom"===e||"top"===e?t.parent.chartScrollModule.setScrollTop(t.timerCount):(t.parent.chartScrollModule.setScrollLeft(t.timerCount),t.parent.options.enableVirtualization&&t.parent.chartScrollModule.updateContent()),"ConnectorPointLeftDrag"!==t.taskBarEditAction&&"ConnectorPointRightDrag"!==t.taskBarEditAction||t.drawFalseLine()}),0)},e.prototype.stopScrollTimer=function(){window.clearInterval(this.scrollTimer),this.scrollTimer=null},e.prototype.taskBarEditingAction=function(e,t){this.restrictTaskbarEdit||this.updateMouseMoveProperties(e),"ProgressResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"LeftResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"RightResizing"!==this.taskBarEditAction&&"ParentResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"ParentDrag"!==this.taskBarEditAction&&"ChildDrag"!==this.taskBarEditAction&&"MilestoneDrag"!==this.taskBarEditAction||this.restrictTaskbarEdit?"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction||"touchmove"==e.type||this.restrictTaskbarEdit||(this.updateConnectorLineSecondProperties(e),this.triggerDependencyEvent(e),this.drawFalseLine()):this.enableDragging(e):this.enableRightResizing(e):this.enableLeftResizing(e):this.performProgressResize(e),this.restrictTaskbarEdit||this.setItemPosition(),"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction&&this.parent.dotNetRef.invokeMethodAsync("UpdateResizingData",this.dataGuid,this.taskBarEditAction,this.taskBarEditRecord),this.taskbarTouchEditing=!0,this.updateTooltip(e)},e.prototype.updateTooltip=function(e){var t=document.getElementById(this.parent.element.id+"_editingtooltip_content");if(!sf.base.isNullOrUndefined(t)){var i=this.taskBarEditRecord,n=i.width,s=i.progressWidth,o=this.parent.getOffsetRect(this.taskBarEditElement),r=this.parent.tooltipModule.getPointerPosition(e),a=sf.base.select(".e-arrow-tip",t),l=a.offsetWidth/2+(t.offsetWidth-t.clientWidth);if(a.style.left="2px","ConnectorPointLeftDrag"===this.taskBarEditAction||"ConnectorPointRightDrag"===this.taskBarEditAction)return;"LeftResizing"===this.taskBarEditAction?t.style.left=o.left-l+"px":"RightResizing"===this.taskBarEditAction||"ParentResizing"===this.taskBarEditAction?t.style.left=o.left+n-l+"px":"ProgressResizing"===this.taskBarEditAction?t.style.left=o.left+s-l+"px":t.style.left=r.x-l+"px"}},e.prototype.setItemPosition=function(){var e=this.taskBarEditRecord;if(null!=e&&null!=this.taskBarEditElement){var t="MilestoneDrag"===this.taskBarEditAction||e.isMilestone?this.milestoneHeight:e.width,i=t-10,n=t-2,s=e.progress/100*e.width,o=this.taskBarEditElement.classList.contains("e-taskbar-main-container")?this.taskBarEditElement:sf.base.closest(this.taskBarEditElement,"tr.e-chart-row").querySelector(".e-taskbar-main-container"),r=sf.base.closest(this.taskBarEditElement,"tr.e-chart-row").querySelector(".e-left-label-container"),a=sf.base.closest(this.taskBarEditElement,"tr.e-chart-row").querySelector(".e-right-label-container"),l=this.taskBarEditElement.querySelector(".e-gantt-child-progressbar"),d=this.taskBarEditElement.querySelector(".e-gantt-child-taskbar"),h=this.taskBarEditElement.querySelector(".e-child-progress-resizer"),c=this.taskBarEditElement.querySelector(".e-taskbar-right-resizer"),p=(this.taskBarEditElement.querySelector(".e-gantt-parent-taskbar"),this.taskBarEditElement.querySelector(".e-gantt-parent-progressbar")),u=this.taskBarEditElement.querySelector(".e-right-connectorpoint-outer-div");this.parent.biggerMode&&(i=t-24,n=t+10),"ParentResizing"!==this.taskBarEditAction&&(o.style.width=t+"px",o.style.left=e.left+"px",r.style.width=e.left+"px",sf.base.isNullOrUndefined(a)||(a.style.left=e.left+t+"px")),u&&(u.style.left=n+"px"),c&&(c.style.left=i+"px"),"MilestoneDrag"===this.taskBarEditAction||e.isMilestone?(o.style.left=e.left-t/2+"px",r.style.width=e.left-t/2+"px",sf.base.isNullOrUndefined(a)||(a.style.left=e.left+t/2+"px")):"ProgressResizing"===this.taskBarEditAction?(d.style.left=e.left+e.progressWidth-10+"px",sf.base.isNullOrUndefined(l)||(l.style.width=e.progressWidth+"px",l.style.borderBottomRightRadius=this.progressBorderRadius+"px",l.style.borderTopRightRadius=this.progressBorderRadius+"px",h.style.left=e.progressWidth-8+"px")):"RightResizing"===this.taskBarEditAction?(d.style.width=t+"px",sf.base.isNullOrUndefined(l)||(l.style.width=s+"px",c.style.left=i+"px",h.style.left=s-5+"px")):"ParentDrag"===this.taskBarEditAction?sf.base.isNullOrUndefined(l)||(p.style.width=e.progressWidth+"px"):(sf.base.isNullOrUndefined(d)||(d.style.width=t+"px"),sf.base.isNullOrUndefined(l)||(c.style.left=i+"px",l.style.width=s+"px",h.style.left=s-5+"px"))}},e.prototype.enableLeftResizing=function(e){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX<t.left+t.width?(i=this.mouseDownX-this.mouseMoveX,t.left>0&&(t.left=this.previousItem.left-i,t.width=this.previousItem.width+i)):this.mouseMoveX>t.left+t.width&&(i=this.mouseDownX-this.mouseMoveX,t.left=this.previousItem.left-i,t.width=3):this.mouseMoveX<t.left+t.width?(i=this.mouseMoveX-this.mouseDownX,t.left<t.left+t.width&&this.previousItem.left+i<=this.previousItem.left+this.previousItem.width&&(t.left=this.previousItem.left+i,t.width=this.previousItem.width-i)):(i=this.mouseMoveX-this.mouseDownX,t.left=this.previousItem.left+i,t.width=3),this.updateEditPosition(e,t),t.left=this.previousItem.left+this.previousItem.width-t.width},e.prototype.enableRightResizing=function(e){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX>t.left&&this.mouseDownX-this.mouseMoveX>3?(i=this.mouseDownX-this.mouseMoveX,t.width=this.previousItem.width-i):this.mouseMoveX<t.left&&(t.width=3):this.mouseMoveX>t.left&&(i=this.mouseMoveX-this.mouseDownX,t.width=this.previousItem.width+i),this.updateEditPosition(e,t)},e.prototype.enableDragging=function(e){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?(i=this.mouseDownX-this.mouseMoveX)>0&&(t.left=this.previousItem.left-i):(i=this.mouseMoveX-this.mouseDownX,t.left=this.previousItem.left+i);var n=this.chartBodyContainer.querySelector(".e-task-table"),s=t.left<0?0:t.left+t.width>=n.offsetWidth?n.offsetWidth-t.width:t.left;t.left=s},e.prototype.performProgressResize=function(e){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX>t.left&&this.mouseMoveX<t.left+t.width&&t.left>0?(i=this.mouseMoveX-t.left,t.progressWidth=i):this.mouseMoveX>=t.left+t.width?t.progressWidth=t.width:t.progressWidth=0:this.mouseMoveX>t.left&&this.mouseMoveX<t.left+t.width?(i=this.mouseMoveX-t.left,t.progressWidth=i):this.mouseMoveX<=t.left?t.progressWidth=0:t.progressWidth=t.width;var n=t.progressWidth>t.width?t.width:t.progressWidth;n=t.progressWidth<0?0:t.progressWidth,t.progressWidth=n;var s=t.width-t.progressWidth;this.progressBorderRadius=s<=4?4-s:0},e.prototype.updateEditPosition=function(e,t){this.updateIsMilestone(t)},e.prototype.updateIsMilestone=function(e){e.width<=3?(e.width=3,e.isMilestone=!0):e.isMilestone=!1},e.prototype.updateConnectorLineSecondProperties=function(e){var t=this.getElementByPosition(e),i=this.parent.getParentElement(t,"e-taskbar-main-container");this.connectorSecondAction=null;var n=0;this.parent.getParentElement(t,"e-connectorpoint-left")?(this.connectorSecondAction="ConnectorPointLeftDrag",this.toPredecessorText="Start"):this.parent.getParentElement(t,"e-connectorpoint-right")?(this.connectorSecondAction="ConnectorPointRightDrag",this.toPredecessorText="Finish"):(this.connectorSecondAction=null,this.toPredecessorText=null),this.taskBarEditElement!==i&&this.taskBarEditElement!==this.highlightedSecondElement&&(this.parent.options.enableVirtualization&&(n=this.getTopPosition(this.parent.element)),(this.parent.options.enableVirtualization&&0==this.elementOffsetLeft||!this.parent.options.enableVirtualization)&&(this.elementOffsetLeft=this.taskBarEditElement.offsetLeft,this.elementOffsetTop=this.taskBarEditElement.offsetTop+n,this.elementOffsetWidth=this.taskBarEditElement.offsetWidth,this.elementOffsetHeight=this.taskBarEditElement.offsetHeight,this.showHideTaskBarEditingElements(i,this.highlightedSecondElement))),sf.base.isNullOrUndefined(this.connectorSecondAction)&&!sf.base.isNullOrUndefined(this.connectorSecondElement)&&(this.connectorSecondElement.querySelector(".e-connectorpoint-left").classList.remove("e-connectorpoint-allow-block"),this.connectorSecondElement.querySelector(".e-connectorpoint-right").classList.remove("e-connectorpoint-allow-block")),this.connectorSecondElement=this.connectorSecondAction?i:null,this.toDataGuid=sf.base.isNullOrUndefined(this.connectorSecondElement)?null:this.connectorSecondElement.getAttribute("rowuniqueid")},e.prototype.getTopPosition=function(e){var t,i=e.querySelector(".e-virtualtable"),n=i.style.transform.split(",");if(n.length>1)t=n[1].trim().split(")")[0];else{var s=i.style.transform;t=s.substring(s.lastIndexOf("(")+1,s.lastIndexOf(")"))}return parseFloat(t)},e.prototype.showHideTaskBarEditingElements=function(e,t){if((t=t||this.taskBarEditElement)&&e!==t&&(t.querySelector(".e-taskbar-left-resizer")&&(t.querySelector(".e-taskbar-left-resizer").classList.remove("e-left-resize-gripper"),t.querySelector(".e-taskbar-right-resizer").classList.remove("e-right-resize-gripper"),t.querySelector(".e-child-progress-resizer")&&t.querySelector(".e-child-progress-resizer").classList.remove("e-progress-resize-gripper")),t.querySelector(".e-connectorpoint-left")||t.parentElement.querySelector(".e-connectorpoint-left"))){var i=sf.base.isNullOrUndefined(t.querySelector(".e-connectorpoint-left"))?t.parentElement:t;i.querySelector(".e-connectorpoint-left").classList.remove("e-connectorpoint-left-hover"),i.querySelector(".e-connectorpoint-right").classList.remove("e-connectorpoint-right-hover")}},e.prototype.triggerDependencyEvent=function(e,t){var i=this;this.parent.dotNetRef.invokeMethodAsync("DrawConnectorLine",this.taskBarEditAction,this.connectorSecondAction,this.toDataGuid).then((function(t){if(t){var n=document.getElementById(i.parent.element.id+"_editingtooltip_content");if(!sf.base.isNullOrUndefined(n)){var s=i.parent.tooltipModule.getPointerPosition(e),o=sf.base.select(".e-arrow-tip",n).offsetWidth/2+(n.offsetWidth-n.clientWidth);n.style.left=s.x-o+"px",n.style.visibility="visible"}}else{var r=i.getElementByPosition(e);(r.classList.contains("e-connectorpoint-left")||r.classList.contains("e-connectorpoint-right"))&&r.classList.add("e-connectorpoint-allow-block")}}))},e.prototype.drawFalseLine=function(){var e,t=this.mouseDownX,i=this.mouseDownY,n=this.mouseMoveX,s=this.mouseMoveY,o=Math.sqrt((t-n)*(t-n)+(i-s)*(i-s)),r="rotate("+180*Math.atan2(s-i,n-t)/Math.PI+"deg)";"ConnectorPointLeftDrag"===this.taskBarEditAction&&(e=this.elementOffsetLeft-this.connectorPointWidth/2-this.parent.chartPreviousScroll.left),"ConnectorPointRightDrag"===this.taskBarEditAction&&(e=this.elementOffsetLeft+this.elementOffsetWidth+this.connectorPointWidth/2-this.parent.chartPreviousScroll.left);var a=this.elementOffsetTop+this.elementOffsetHeight/2+this.chartBodyContainer.offsetTop-this.parent.chartPreviousScroll.top;this.removeFalseLine(!1),this.falseLine=document.createElement("div"),this.falseLine.className="e-gantt-false-line",this.falseLine.id="ganttfalseline"+this.parent.element.id,this.falseLine.style.transformOrigin="0% 100%",this.falseLine.style.right="auto",this.falseLine.style.position="absolute",this.falseLine.style.transform=r,this.falseLine.style.borderTopWidth="1px",this.falseLine.style.borderTopStyle="dashed",this.falseLine.style.zIndex="5",this.falseLine.style.width=o-3+"px",this.falseLine.style.left=e+"px",this.falseLine.style.top=a+"px",this.chartBodyContainer.appendChild(this.falseLine)},e.prototype.removeFalseLine=function(e){this.falseLine&&(sf.base.remove(this.falseLine),this.falseLine=null,e&&(this.elementOffsetLeft=0,this.elementOffsetTop=0,this.elementOffsetWidth=0,this.elementOffsetHeight=0,sf.base.isNullOrUndefined(this.chartBodyContainer.querySelector(".e-connector-line-container"))||sf.base.removeClass(this.chartBodyContainer.querySelectorAll(".e-connector-line-container"),"e-connector-line-z-index")))},e.prototype.destroy=function(e){this.stopScrollTimer(),this.removeEventListeners(e)},e}(),o=function(){function e(e){this.parent=e,this.chartPane=this.parent.element.querySelector(".e-gantt-chart-pane"),this.addEventListeners()}return e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseMove,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gantt-chart-pane");sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.ganttMouseMove),sf.base.EventHandler.remove(t,sf.base.Browser.touchMoveEvent,this.ganttMouseMove)},e.prototype.ganttMouseMove=function(e){this.tooltipMouseEvent=e},e.prototype.tooltipOpened=function(e){var t=document.getElementById(e.element.id);if(!sf.base.isNullOrUndefined(this.tooltipMouseEvent)){var i=this.getPointerPosition(this.tooltipMouseEvent),n=this.parent.getOffsetRect(this.chartPane),s=n.top+this.chartPane.offsetHeight,o=n.left+this.chartPane.offsetWidth,r=i.x,a=i.y;if(o<r+t.offsetWidth+10)for(;o<r+t.offsetWidth+10;)r=o-t.offsetWidth-10,t.style.left=r+"px";else r+=10,t.style.left=r+"px";window.innerHeight<t.offsetHeight+a&&(a=a-t.offsetHeight-10),s<a+t.offsetHeight+20?a=a-t.offsetHeight-10:a+=10,t.style.top=a+"px",t.style.visibility="visible"}},e.prototype.predecessorTooltipOpened=function(e){var t=document.getElementById(e.element.id);if(!sf.base.isNullOrUndefined(this.tooltipMouseEvent)){var i=this.getPointerPosition(this.tooltipMouseEvent),n=this.parent.getOffsetRect(this.chartPane),s=n.top+this.chartPane.offsetHeight,o=n.left+this.chartPane.offsetWidth,r=i.x,a=i.y;if(o<r+t.offsetWidth+10)for(;o<r+t.offsetWidth+10;)r=o-t.offsetWidth-10,t.style.left=r+"px";else r=r,t.style.left=r+"px";if(window.innerHeight<t.offsetHeight+a&&(a=a-t.offsetHeight-10),s<a+t.offsetHeight+20?a=a-t.offsetHeight-10:a+=10,document.getElementsByClassName("e-arrow-tip e-tip-bottom").length>0)document.getElementsByClassName("e-arrow-tip e-tip-bottom")[0].style.left=i.x-t.offsetLeft+"px";t.style.visibility="visible"}},e.prototype.getPointerPosition=function(e){var t,i;return sf.base.isNullOrUndefined(sf.base.getValue("pageX",e))&&sf.base.isNullOrUndefined(sf.base.getValue("pageY",e))?sf.base.isNullOrUndefined(sf.base.getValue("touches[0].pageX",e))&&sf.base.isNullOrUndefined(sf.base.getValue("touches[0].pageY",e))?sf.base.isNullOrUndefined(sf.base.getValue("clientX",e))&&sf.base.isNullOrUndefined(sf.base.getValue("clientY",e))||(t=sf.base.getValue("clientX",e)+document.body.scrollLeft+document.documentElement.scrollLeft,i=sf.base.getValue("clientY",e)+document.body.scrollTop+document.documentElement.scrollTop):(t=sf.base.getValue("touches[0].pageX",e),i=sf.base.getValue("touches[0].pageY",e)):(t=sf.base.getValue("pageX",e),i=sf.base.getValue("pageY",e)),{x:t,y:i}},e.prototype.destroy=function(e){this.removeEventListeners(e)},e}(),r=function(){function i(e,t,i,n){this.toolbarHeight=0,this.chartPreviousScroll={top:0,left:0},this.treegridPreviousScroll={top:0,left:0},this.spinnerShown=!1,this.isTaskbarEditingEventMapped=!1,this.scrollbarUpdate=!1,window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=n,this.isFromTreeGrid=!1,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return i.prototype.getOffsetRect=function(e){var t=e.getBoundingClientRect(),i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,n=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,s=document.documentElement.clientTop||document.body.clientTop||0,o=document.documentElement.clientLeft||document.body.clientLeft||0,r=t.top+i-s,a=t.left+n-o;return{top:Math.round(r),left:Math.round(a),width:t.width,height:t.height}},i.prototype.getParentElement=function(e,t,i){for(var n=e;n&&!(i?n.id===t:n.classList.contains(t));)n=n.parentElement;return n},i.prototype.destroy=function(){e.prototype.destroy(this),s.prototype.destroy(this),o.prototype.destroy(this),t.prototype.destroy(this)},i}(),a=function(){function e(e){this.parent=e}return e.prototype.taskbarFocus=function(e){var t=e.querySelector(".e-gantt-child-taskbar"),n=e.querySelector(".e-gantt-parent-taskbar");return t?(t.focus(),e.querySelector(".e-taskbar-main-container").querySelector(".e-gantt-child-taskbar").classList.add(i)):(n.focus(),e.querySelector(".e-taskbar-main-container").querySelector(".e-gantt-parent-taskbar").classList.add(i)),"isNextTaskbar"},e.prototype.RightLabelFocus=function(e){var t=e.querySelector(".e-right-label-container");return t.focus(),t.querySelector(".e-label").classList.add(i),"isNextRightLabel"},e.prototype.LeftLabelFocus=function(e){var t=e.querySelector(".e-left-label-container");return t.focus(),t.querySelector(".e-label").classList.add(i),"isNextLeftLabel"},e}();return{initialize:function(e,t,i,n){var s={taskMode:i.taskMode,allowTaskbarEditing:i.allowTaskbarEditing,enableVirtualization:i.enableVirtualization},o=new r(e,t,s,n);this.dotnetRef=n;var a={};this.instance=window.sfBlazor.getCompInstance(e);var l=o.element.querySelector("#"+o.element.id+"_Gantt_Splitter");return o.height=a.height=t.offsetHeight,o.width=a.width=t.offsetWidth,o.toolbarElement=t.querySelector("#"+t.id+"_Gantt_Toolbar"),sf.base.isNullOrUndefined(o.toolbarElement)||(o.toolbarHeight=a.toolbarHeight=o.toolbarElement.offsetHeight),document.body.classList.contains("e-bigger")&&(o.biggerMode=a.biggerMode=!0),a.ganttOffsetSize=this.ChartInitialize(t,i.contentHeight,i.timelineWidth,i.milestoneHeight,i.taskbarEvent),l.style.height="calc(100% - "+o.toolbarHeight+"px)",a},refreshGantt:function(e){var t=window.sfBlazor.getCompInstance(e);return document.body.classList.contains("e-bigger")?t.biggerMode=!0:t.biggerMode=!1,t.biggerMode},adjustTable:function(e){if(e.options.enableVirtualization){var t=document.getElementById("treeGrid"+e.element.id+"_gridcontrol").querySelector(".e-gridcontent").querySelector(".e-virtualtable"),i=e.element.querySelector(".e-chart-root-container").querySelector(".e-virtualtable"),n=new DOMMatrixReadOnly(i.style.transform),s=new DOMMatrixReadOnly(t.style.transform);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(i)||(""==i.style.transform?i.style.transform=t.style.transform:i.style.transform="translate("+n.m41+"px, "+s.m42+"px)")}},setChartHeight:function(e,t){var i=window.sfBlazor.getCompInstance(e),n=0,s={},o=i.chartScrollModule,r=i.element.querySelector(".e-gridcontent").querySelector(".e-virtualtrack");if(sf.base.isNullOrUndefined(r)&&(r=i.element.querySelector("#treeGrid"+i.element.id+"_gridcontrol_content_table")),r&&r.clientHeight){var a=i.element.querySelector("#treeGrid"+i.element.id+"_gridcontrol"),l=r.clientHeight+1+"px",d=o.chartRootElement,h=d.querySelector(".e-virtualtrack"),c=o.chartVirtualTable;o.chartTaskTable=d.querySelector(".e-task-table");var p=o.chartTaskTable.clientHeight,u=d.getElementsByClassName("e-chart-rows-container")[0],f=a.querySelectorAll(".e-content")[0].clientHeight,m=d.querySelector("#"+i.element.id+"line-container"),g=o.timelineHeaderElement;if(void 0!==m&&null!=m&&(m.style.height=l,void 0!==c&&null!=c&&(m.style.height=p+"px")),f<r.clientHeight?(n=r.clientHeight,u.style.height=l,g.style.width="calc(100% - "+i.scrollWidth+"px)"):(n=f,u.style.height=f-1+"px",g.style.width="100%"),this.viewPortHeight=f,s.chartHeight=n,s.viewPortHeight=f,void 0!==c&&null!=c){if(h.style.height=n-p+"px",i.options.enableVirtualization){var v=g.querySelector(".e-virtualtable"),b=3*i.element.offsetWidth,y=new DOMMatrixReadOnly(v.style.transform).m41,w=new DOMMatrixReadOnly(c.style.transform),C=t-b;h.style.width=o.timelineVirtualTrack.offsetWidth+"px",t<b?(c.style.transform="translate(0px,"+w.m42+"px)",o.chartTaskTable.style.left="0px",o.chartTaskTable.style.width=t+"px",sf.base.isNullOrUndefined(o.dependencyViewContainer)||(o.dependencyViewContainer.style.left="0px",o.dependencyViewContainer.style.transform="translate(0px, 0px)")):t<y&&(C>b?(g.scrollLeft=C,c.style.transform="translate("+C+"px,"+w.m42+"px)"):t>b&&(c.style.transform="translate("+C+"px,"+w.m42+"px)"),sf.base.isNullOrUndefined(o.dependencyViewContainer)||(o.dependencyViewContainer.style.left=-C+"px",o.dependencyViewContainer.style.transform="translate("+-C+"px, 0px)"))}u.style.height=p+"px",s.chartHeight=n-p}}return this.adjustTable(i),s},treegridHeaderAlign:function(e,t){if(t){sf.base.addClass(e.treeGridElement.querySelectorAll(".e-headercell"),"e-timeline-single-header-outer-div"),sf.base.addClass(e.treeGridElement.querySelectorAll(".e-columnheader"),"e-timeline-single-header-outer-div");var i=e.element.querySelector(".e-gridheader").offsetHeight;e.element.querySelector(".e-gridcontent").style.height="calc(100% - "+i+"px)"}else sf.base.removeClass(e.treeGridElement.querySelectorAll(".e-headercell"),"e-timeline-single-header-outer-div"),sf.base.removeClass(e.treeGridElement.querySelectorAll(".e-columnheader"),"e-timeline-single-header-outer-div")},getTreeGrid:function(e,t){var i=window.sfBlazor.getCompInstance(e);this.hideTreeGridScrollBar(i),sf.base.isNullOrUndefined(i.treeGridElement)||(this.instance.treeGrid=i.treeGridElement.blazor_instance),this.treegridHeaderAlign(i,t),this.adjustTable(i)},hideTreeGridScrollBar:function(e){e.treeGridElement=e.element.querySelector("#treeGrid"+e.element.id);var i=e.treeGridElement.querySelector(".e-content"),n=e.treeGridElement.querySelector(".e-headercontent");i&&(i.style.height="100%",e.element.querySelector(".e-gridcontent").style.height="calc(100% - "+e.element.querySelector(".e-gridheader").offsetHeight+"px)",e.treeGridModule=new t(e,i)),e.scrollWidth=this.getScrollbarWidth(e.element),0!==e.scrollWidth?i.style.cssText+="width: calc(100% + "+(e.scrollWidth+1)+"px);":i.classList.add("e-gantt-scroll-padding"),i.style.cssText.includes("overflow: auto")?n.style.width="calc(100% + "+(e.scrollWidth+1)+"px)":n.style.width="calc(100% + 1px)"},getScrollbarWidth:function(e){var t=e,i=document.createElement("div");i.style.visibility="hidden",i.style.overflow="scroll",i.style.msOverflowStyle="scrollbar";var n=document.createElement("div");i.appendChild(n),t.appendChild(i);var s=i.offsetWidth-n.offsetWidth;return i.parentNode.removeChild(i),s},getOffsetLeft:function(e){var t=this.instance.element.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.clientLeft||document.body.clientLeft||0,s=t.left+i-n;return Math.round(s)},tooltipOpened:function(e,t){this.instance.tooltipModule.tooltipOpened(t)},predecessorTooltipOpened:function(e,t){this.instance.tooltipModule.predecessorTooltipOpened(t)},setTooltipVisibility:function(){var e=document.getElementById(this.instance.element.id+"_editingtooltip_content");sf.base.isNullOrUndefined(e)||(e.style.visibility="visible")},ChartInitialize:function(t,i,n,r,a){this.instance.totalTimelineWidth=n,this.instance.isTaskbarEditingEventMapped=a;var l=this.instance.element.offsetHeight;return this.instance.options.allowTaskbarEditing&&(this.instance.taskbarEditModule=new s(this.instance),this.instance.taskbarEditModule.milestoneHeight=r),this.instance.tooltipModule=new o(this.instance),this.instance.chartScrollModule=new e(this.instance,this.instance.element,l,i),this.instance.spinnerShown=!1,{viewPortHeight:this.instance.chartScrollModule.viewPortHeight,chartWidth:this.instance.element.querySelector(".e-gantt-chart-pane").offsetWidth}},UpdateScroll:function(e,t){this.scrollBarElement=this.instance.element.querySelector(".e-chart-scroll-container"),this.instance.chartScrollModule.previousCount=-1,(this.scrollBarElement.offsetWidth<t||this.scrollBarElement.scrollLeft>t)&&(this.scrollBarElement.scrollLeft=t)},chartFocusOutHandler:function(e,t){this.instance.keyboardModule=new a(this.instance);var n=this.instance.element.querySelector(".e-chart-row-cell[data-uid="+e+"]"),s=n.querySelector("."+i)?n.querySelector("."+i).parentElement:null;s&&(s.querySelector(".e-label").classList.remove(i),s.blur())},focusOutHandler:function(e){sf.base.isNullOrUndefined(e.classList)||e.classList.remove(i)},resetPrivateProperties:function(e){this.instance.taskbarEditModule.tappedPoint=null},tabFocusHandler:function(e,t,n){this.instance.keyboardModule=new a(this.instance);var s=this.instance.element.querySelector(".e-chart-row-cell[data-uid="+e+"]"),o=s.querySelector("."+i)?s.querySelector("."+i).parentElement:null;if(o)return o.classList.contains("e-left-label-inner-div")?n?(o.querySelector(".e-label").classList.remove(i),o.blur(),"isNextGrid"):this.instance.keyboardModule.taskbarFocus(s):o.classList.length?o.classList.contains("e-right-label-inner-div")?n?this.instance.keyboardModule.taskbarFocus(s):"isNextGrid":"":n?s.querySelector(".e-left-label-inner-div")?this.instance.keyboardModule.LeftLabelFocus(s):"isNextGrid":s.querySelector(".e-right-label-inner-div")?this.instance.keyboardModule.RightLabelFocus(s):"isNextGrid";return!n&&s.querySelector(".e-left-label-inner-div")?this.instance.keyboardModule.LeftLabelFocus(s):n&&s.querySelector(".e-right-label-inner-div")?this.instance.keyboardModule.RightLabelFocus(s):this.instance.keyboardModule.taskbarFocus(s)},updateScrollLeft:function(e,t,i){var n=this.instance.element.querySelector(".e-chart-scroll-container");if(null!=i){var s=this.instance.element.querySelector(".e-row").offsetHeight,o=i*s;(n.offsetHeight-s/2+n.scrollTop<o||n.scrollTop>o)&&(n.scrollTop=o)}t=t>0?t:0,t=n.scrollWidth<=t?n.scrollWidth:t,(n.offsetWidth+n.scrollLeft<t||n.scrollLeft>t)&&(n.scrollLeft=t-50)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);null!=t&&null!=t.dotNetRef&&t.destroy()}}}()},"./modules/sf-grid.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Grid=function(){"use strict";var e,t,n=null;function s(){if(null!==n)return n;var e,t=document.createElement("div");return t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth|0,document.body.removeChild(t),n=e}function o(e,t){for(var i=e[t+"ElementSibling"],n=0,s=["e-gridheader","e-gridfooter","e-groupdroparea","e-gridpager","e-toolbar"];i;)s.some((function(e){return i.classList.contains(e)}))&&(n+=i.offsetHeight),i=i[t+"ElementSibling"];return n}function r(e,t,i){for(var n=e;n&&!(i?n.id===t:n.classList.contains(t));)n=n.parentElement;return n}function a(e,t){for(var i=-1,n=0,s=t.length;n<s;n++)if(t[n].isEqualNode(e)){i=n;break}return i}function l(e,t){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}function d(e){var t={};return t.x=sf.base.isNullOrUndefined(e.clientX)?e.changedTouches[0].clientX:e.clientX,t.y=sf.base.isNullOrUndefined(e.clientY)?e.changedTouches[0].clientY:e.clientY,t}function h(e,t){for(var i=[],n=0,s=e.length;n<s;n++){var o=t(e[n],n);sf.base.isNullOrUndefined(o)||i.push(o)}return i}function c(e){var t=e.querySelector("#"+e.id+"EditConfirm");return e.querySelectorAll(".e-updatedtd").length&&(!t||t.classList.contains("e-popup-close"))}function p(e){return e.options.enableVirtualization&&e.options.groupCount>0&&(e.options.offline||""===e.options.url)}function u(e,t){for(var i=[].slice.call(e.querySelectorAll(t)),n=0;n<i.length;n++)sf.base.remove(i[n])}function f(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];for(var s=0,o=e.length;s<o;s++)t?(sf.base.classList(e[s],i.slice(),[]),e[s].setAttribute("aria-selected","true")):(sf.base.classList(e[s],[],i.slice()),e[s].removeAttribute("aria-selected"))}!function(e){e.timer=null}(e||(e={}));var m=function(){function e(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.addEventListener(),this.setHeight(),this.setPadding()}return e.prototype.setHeight=function(){var e=0,t=this.parent.element.querySelector(".e-content");if(this.parent.options.frozenRows&&"auto"!==this.parent.options.height&&!this.parent.options.height.match(/%/g)){var i=this.parent.element.querySelector(".e-headercontent").querySelector("tbody");e=i?i.offsetHeight:0,t.style.height=sf.base.formatUnit(parseInt(this.parent.options.height)-e)}},e.prototype.removeUnwantedScroll=function(e,t){void 0===t&&(t=0);var i=!1,n=this.parent.content.offsetWidth>=this.parent.getContentTable().offsetWidth,s=0!=this.parent.options.frozenRows&&0==this.parent.options.frozenColumns,o=this.parent.element.querySelector(".e-movablescrollbar"),r=o?o.offsetHeight:0;return 0!=this.parent.options.frozenColumns&&(i=this.getMovableContent().offsetWidth>=this.getMovableContentTable().offsetWidth+t-2),"Height"===e&&this.parent.content.offsetHeight>=this.parent.getContentTable().offsetHeight+r||!("Width"!==e||!(i||s&&n))&&("100%"==this.parent.options.height&&(this.frozenContentElement().style.borderBottom="none"),!0)},e.prototype.getMovableContent=function(){return this.parent.element.querySelector(".e-movablecontent")},e.prototype.getMovableContentTable=function(){return this.parent.element.querySelector(".e-movablecontent .e-table")},e.prototype.frozenContentElement=function(){return this.parent.element.querySelector(".e-frozencontent")},e.prototype.getScrollbar=function(){return this.parent.element.querySelector(".e-scrollbar")},e.prototype.setPadding=function(){var t=this.parent.element.querySelector(".e-gridheader");if(!sf.base.isNullOrUndefined(t)&&("auto"!=this.parent.options.height||"None"!=this.parent.options.frozenName||0!=this.parent.options.frozenColumns)){if(this.removeUnwantedScroll("Height"))return this.content.style.overflow="auto",void(t.style.paddingRight="");var i=e.getScrollBarWidth()-this.getThreshold(),n=this.getCssProperties();t.style[n.padding]=i>0?i+"px":"0px",t.querySelector(".e-headercontent").style[n.border]=i>0?"1px":"0px";var s=this.parent.element.querySelector(".e-gridfooter");if(s)s.querySelector(".e-summarycontent").style[n.border]=i>0?"1px":"0px",s.style[n.padding]=i>0?i+"px":"0px"}},e.prototype.removePadding=function(e){var t=this.getCssProperties(e),i=this.parent.getHeaderContent().querySelector(".e-headercontent");i.style[t.border]="",i.parentElement.style[t.padding]="";this.parent.getFooterContent()},e.prototype.refresh=function(){if("100%"===this.parent.options.height){var e,t=this.parent.element.querySelector(".e-gridcontent"),i=o(e=t,"previous")+o(e,"next");t.style.height="calc(100% - "+i+"px)"}},e.prototype.getThreshold=function(){return"mozilla"===sf.base.Browser.info.name?.5:1},e.prototype.addEventListener=function(){this.wireEvents()},e.prototype.onContentScroll=function(e){var t=this,i=e,n=i.classList.contains("e-headercontent");return function(e){if(null!==t.content.querySelector("tbody")){var s=e.target,o=s.scrollLeft,r=(s.scrollWidth,s.classList.contains("e-summarycontent"));if(t.previousValues.left!==o){i.scrollLeft=o;var a=0!=t.parent.options.frozenColumns?t.parent.element.querySelector(".e-movablefootercontent"):t.parent.element.querySelector(".e-summarycontent");a&&(a.scrollLeft=o),r&&(t.header.scrollLeft=o),t.previousValues.left=o}else t.previousValues.top=n?s.scrollTop:t.previousValues.top}}},e.prototype.onFreezeContentScroll=function(e){var t=this,i=e;return function(e){if(null!==t.content.querySelector("tbody")){var n=e.target.scrollTop;t.previousValues.top!==n&&(i.scrollTop=n,t.previousValues.top=n)}}},e.prototype.onCustomScrollbar=function(e,t){var i,n=this,s=e,o=t;return function(e){if(null!==n.content.querySelector("tbody")){var t=e.target.scrollLeft;n.previousValues.left!==t&&(n.parent.options.aggregatesCount&&(i=n.parent.element.querySelector(".e-movablefootercontent")),s.scrollLeft=t,o.scrollLeft=t,i&&(i.scrollLeft=t),n.previousValues.left=t)}}},e.prototype.onWheelScroll=function(e){var t=this,i=e;return function(e){if(null!==t.content.querySelector("tbody")){var n=i.scrollTop+(1===e.deltaMode?30*e.deltaY:e.deltaY);t.previousValues.top!==n&&(e.preventDefault(),t.parent.getContent().querySelector(".e-frozencontent").scrollTop=n,i.scrollTop=n,t.previousValues.top=n)}}},e.prototype.onTouchScroll=function(e){var t=this,i=e;return function(e){if("mouse"!==e.pointerType){var n=t.parent.options.frozenColumns>0,s=t.getPointXY(e),o=i.scrollLeft+(t.pageXY.x-s.x),r=n?t.parent.getHeaderContent().querySelector(".e-movableheader"):t.parent.getHeaderContent().querySelector(".e-headercontent"),a=n?t.parent.getContent().querySelector(".e-movablecontent"):t.parent.getContent().querySelector(".e-content");if(!(t.previousValues.left===o||o<0||r.scrollWidth-r.clientWidth<o)){if(event.cancelable&&e.preventDefault(),r.scrollLeft=o,a.scrollLeft=o,n)t.parent.element.querySelector(".e-movablescrollbar").scrollLeft=o;t.pageXY.x=s.x,t.previousValues.left=o}}}},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.wireEvents=function(){var e=this;if(this.oneTimeReady){var t=this.parent.options.frozenColumns;this.content=this.parent.getContent(),this.header=this.parent.getHeaderContent();var i=this.content.querySelector(".e-movablecontent"),n=this.content.querySelector(".e-frozencontent"),s=this.header.querySelector(".e-movableheader"),o=this.content.parentElement.querySelector(".e-movablescrollbar");if(this.parent.options.frozenColumns&&(sf.base.EventHandler.add(t?s:this.header,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(t?s:this.header,"touchmove pointermove",this.onTouchScroll(t?i:this.content),this)),t?(sf.base.EventHandler.add(o,"scroll",this.onCustomScrollbar(i,s),this),sf.base.EventHandler.add(i,"scroll",this.onCustomScrollbar(o,s),this),sf.base.EventHandler.add(s,"scroll",this.onCustomScrollbar(o,i),this),sf.base.EventHandler.add(i,"scroll",this.onFreezeContentScroll(n),this),sf.base.EventHandler.add(n,"scroll",this.onFreezeContentScroll(i),this),sf.base.EventHandler.add(s,"scroll",this.onContentScroll(i),this),sf.base.EventHandler.add(n,"wheel",this.onWheelScroll(i),this),sf.base.EventHandler.add(s,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(s,"touchmove pointermove",this.onTouchScroll(i),this),sf.base.EventHandler.add(i,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(i,"touchmove pointermove",this.onTouchScroll(s),this)):(sf.base.EventHandler.add(this.content,"scroll",this.onContentScroll(this.header),this),sf.base.EventHandler.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.options.aggregatesCount){var r=this.parent.options.frozenColumns?this.parent.element.querySelector(".e-movablefootercontent"):this.parent.element.querySelector(".e-summarycontent");sf.base.isNullOrUndefined(r)||sf.base.EventHandler.add(r,"scroll",this.onContentScroll(this.content),this)}this.parent.options.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}var a,l,d,h,c,p=this.parent.getContent().querySelector(".e-table");h=function(){a=e.header.scrollLeft,l=p.scrollHeight,d=e.parent.getContent().clientHeight},c=function(){e.parent.options.enableVirtualization||(l<d&&(sf.base.addClass(p.querySelectorAll("tr:last-child td"),"e-lastrowcell"),e.parent.options.frozenColumns&&sf.base.addClass(e.parent.getContent().querySelector(".e-movablecontent").querySelectorAll("tr:last-child td"),"e-lastrowcell")),(e.parent.options.frozenColumns>0||e.parent.options.frozenColumns>0)&&e.header.querySelector(".e-movableheader")?e.header.querySelector(".e-movableheader").scrollLeft=e.previousValues.left:e.header.scrollLeft=e.previousValues.left,e.content.scrollLeft=e.previousValues.left,e.content.scrollTop=e.previousValues.top),e.parent.options.enableColumnVirtualization||(e.content.scrollLeft=a),e.parent.options.frozenColumns&&e.header.querySelector(".e-movableheader")&&(e.header.querySelector(".e-movableheader").scrollLeft=e.content.querySelector(".e-movablecontent").scrollLeft)},requestAnimationFrame((function(){try{c(null,h())}catch(e){c(e)}}))},e.prototype.getCssProperties=function(e){var t={},i=sf.base.isNullOrUndefined(e)?this.parent.options.enableRtl:e;return t.border=i?"borderLeftWidth":"borderRightWidth",t.padding=i?"paddingLeft":"paddingRight",t},e.prototype.getScrollableParent=function(e){if(null===e)return null;var t=sf.base.isNullOrUndefined(e.tagName)?e.scrollingElement:e,i=document.defaultView.getComputedStyle(t,null).overflowY;return t.scrollHeight>t.clientHeight&&"hidden"!==i&&"visible"!==i||"HTML"===e.tagName||"ARTICLE"===e.tagName?e:this.getScrollableParent(e.parentNode)},e.prototype.addStickyListener=function(e){this.gridParentElement=this.getScrollableParent(this.parent.element.parentElement),e&&(this.gridParentElement?sf.base.EventHandler.add("HTML"===this.gridParentElement.tagName||"ARTICLE"===this.gridParentElement.tagName?document:this.gridParentElement,"scroll",this.makeStickyHeader,this):sf.base.EventHandler.remove(this.gridParentElement,"scroll",this.makeStickyHeader))},e.prototype.makeStickyHeader=function(){if(this.parent.options.enableStickyHeader&&this.parent.element&&this.parent.getContent()){var e=this.parent.getContent().parentElement.getBoundingClientRect();if(e){var t=this.parent.getHeaderContent().parentElement,i=this.parent.element.querySelector(".e-toolbar"),n=this.parent.element.querySelector(".e-groupdroparea"),s=this.parent.element.querySelector(".e-ccdlg"),o=this.parent.element.querySelector(".e-cc-toolbar"),r=t.offsetHeight+(i?i.offsetHeight:0)+(n?n.offsetHeight:0),a=this.gridParentElement.getBoundingClientRect().top,l=e.top-(a<0?0:a),d=e.left;if(l<r&&e.bottom>0){t.classList.add("e-sticky");var h=0;n&&(this.setSticky(n,h,e.width,d,!0),h+=n.getBoundingClientRect().height-2),i&&(this.setSticky(i,h,e.width,d,!0),h+=i.getBoundingClientRect().height-2),this.setSticky(t,h,e.width,d,!0)}else if(t.classList.contains("e-sticky")&&this.setSticky(t,null,null,null,!1),n&&this.setSticky(n,null,null,null,!1),i&&this.setSticky(i,null,null,null,!1),s){var c=sf.popups.calculateRelativeBasedPosition(o,s).top+o.getBoundingClientRect().height,p=s.style.display;s.style.display="block";var u=s.getBoundingClientRect(),f=o.getBoundingClientRect().left-e.left-u.width+o.clientWidth+2;s.style.display=p,this.setSticky(s,c,u.width,f,!1)}}}},e.prototype.setSticky=function(e,t,i,n,s){s?(e.style.width=i+"px",e.classList.add("e-sticky")):e.classList.remove("e-sticky"),e.style.top=null!=t?t-2+"px":"",e.style.left=null!==n?parseInt(e.style.left,10)!==n?n+"px":e.style.left:""},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.parent.options.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),sf.base.EventHandler.remove(this.parent.getContent(),"scroll",this.onContentScroll))},e.getScrollBarWidth=function(){return s()},e}(),g=function(){function e(e){this.parent=e,this.frozenHeader=e.element.querySelector(".e-frozenheader"),this.movableHeader=e.element.querySelector(".e-movableheader"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.options.frozenColumns&&(this.setFrozenHeight(),this.refreshFreeze({case:"textwrap"}),this.refreshFreeze({case:"refreshHeight"}))},e.prototype.refreshFreeze=function(e){if("textwrap"===e.case||"refreshHeight"===e.case){var t=void 0,i=void 0,n=void 0,s=this.getFrozenHeader(),o=this.getMovableHeader(),r=this.parent.getContent(),a=this.parent.options.wrapMode;"textwrap"===e.case?(("Header"!==a||e.isModeChg)&&(t=r.querySelector(".e-frozencontent").querySelectorAll("tr"),"LeftRight"===this.parent.options.frozenName&&(n=r.querySelector(".e-frozen-right-content").querySelectorAll("tr")),i=r.querySelector(".e-movablecontent").querySelectorAll("tr"),this.setWrapHeight(t,i,e.isModeChg,!0,!1,n)),"Both"===a||e.isModeChg?(t=s.querySelectorAll("tr"),i=o.querySelectorAll("tr"),"LeftRight"==this.parent.options.frozenName&&(n=this.parent.element.querySelectorAll(".e-frozenheader")[1].querySelectorAll("tr"))):(t=s.querySelector("Content"===a?"tbody":"thead").querySelectorAll("tr"),i=o.querySelector("Content"===a?"tbody":"thead").querySelectorAll("tr")),this.parent.getHeaderContent().querySelectorAll(".e-stackedheadercell").length||this.setWrapHeight(t,i,e.isModeChg,!1,!1,n),this.refreshStackedHdrHgt()):"refreshHeight"===e.case&&("LeftRight"===this.parent.options.frozenName&&(n=r.querySelector(".e-frozen-right-content").querySelectorAll("tr")),this.setWrapHeight(r.querySelector(".e-frozencontent").querySelectorAll("tr"),r.querySelector(".e-movablecontent").querySelectorAll("tr"),e.isModeChg,!1,!1,n),this.parent.getHeaderContent().querySelectorAll(".e-stackedheadercell").length||("LeftRight"==this.parent.options.frozenName&&(n=this.parent.element.querySelectorAll(".e-frozenheader")[1].querySelectorAll("tr")),this.setWrapHeight(s.querySelectorAll("tr"),o.querySelectorAll("tr"),e.isModeChg,!1,!1,n)))}},e.prototype.updateResizeHandler=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-rhandler")),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},e.prototype.setWrapHeight=function(e,t,i,n,s,o){for(var r,a,l,d=this.parent.options.allowTextWrap,h=this.parent.options.wrapMode,c=this.parent.getHeaderContent().querySelector("thead"),p=this.parent.getHeaderContent().querySelector("tbody"),u=[],f=[],m=[],g=0,v=e.length;g<v;g++)sf.base.isNullOrUndefined(e[g])||sf.base.isNullOrUndefined(t[g])||(o&&(m[g]=o[g].getBoundingClientRect().height),u[g]=e[g].getBoundingClientRect().height,f[g]=t[g].getBoundingClientRect().height);for(g=0,v=e.length;g<v;g++){(i&&("Header"===h&&n||"Content"===h&&c.contains(e[g])||"Header"===h&&p.contains(e[g]))||s)&&(o[g]&&(o[g].style.height=null),e[g].style.height=null,t[g].style.height=null),r=u[g],a=f[g],l=m[g]?m[g]:0;var b=Math.max(r,a,l);t[g].style.height=b+"px",e[g].style.height=b+"px",o&&(o[g].style.height=b+"px")}d&&this.setFrozenHeight()},e.prototype.setFrozenHeight=function(e){if(!this.parent.options.isPreventScrollEvent){var t=sf.base.isNullOrUndefined(this.parent.element.querySelector(".e-frozencontent"))?0:this.parent.element.querySelector(".e-frozencontent").getElementsByClassName("e-table")[0].offsetHeight,i=this.parent.element.querySelector(".e-movablecontent"),n=this.parent.element.querySelectorAll(".e-frozencontent"),o=this.parent.element.querySelectorAll(".e-frozenscrollbar"),r=this.parent.element.querySelector(".e-movablescrollbar"),a=this.parent.element.querySelector(".e-movablechild"),l=this.parent.element.querySelector(".e-content"),d=0;if(e=Array.from(i.getElementsByClassName("e-table")[0].querySelectorAll("col")).filter((function(e){return"width: auto"==e.getAttribute("style")})).length>0&&e?e:0,r&&"100%"!==this.parent.options.height&&"auto"!==this.parent.options.height){var h=parseInt(this.parent.options.height.split?this.parent.options.height.split("px")[0]:this.parent.options.height,10)-r.offsetHeight;l.style.height=h+"px",t<h&&(t=h-1)}if(n.length>0){if("100%"===this.parent.options.height){var c=this.parent.element.querySelector(".e-scrollbar").offsetHeight;this.parent.getContent().style.height="calc(100% - "+c+"px)"}for(var p=0;p<n.length;p++)n[p].style.height=t+1+"px",n[p].style.borderBottom="",o[p].classList.contains("e-frozen-right-scrollbar")?(o[p].style.width=n[p].offsetWidth+s()+"px",d+=n[p].offsetWidth+s()):(o[p].style.width=n[p].offsetWidth+"px",d+=n[p].offsetWidth)}if(this.parent.options.enableVirtualization&&this.parent.options.enableColumnVirtualization&&o){for(var u=this.parent.options.columns,f=0,m=0;m<u.length;m++)u[m].visible&&!sf.base.isNullOrUndefined(u[m].width)&&(f+=parseInt(u[m].width.split?u[m].width.split("px")[0]:u[m].width.toString(),10));a.style.width=f-d+s()+"px"}else{i.style.height=t+1+"px";var g=this.parent.getColumns();if(this.parent.getRowHeight()<=20&&g.filter((function(e){return"CheckBox"==e.type})))i.getElementsByClassName("e-table")[0].style.height=t-1+"px";r.style.width=i.offsetWidth+"px",a.style.width=i.getElementsByClassName("e-table")[0].offsetWidth+e+s()+"px"}this.parent.options.enableVirtualization&&!this.parent.options.enableColumnVirtualization&&(i.style.width=this.parent.element.querySelector(".e-movableheader").offsetWidth-1+"px"),this.parent.scrollModule.getScrollbar().style.display=this.parent.scrollModule.removeUnwantedScroll("Width",e)?"none":"flex"}},e.prototype.updateStackedFrozenHeight=function(e,t){for(var i,n,s=0,o=e.length;s<o;s++)i=this.getRowSpan(e[s]),n=this.getRowSpan(t[s]),i.min>1?this.updateStackedHdrRowHgt(s,i.max,e[s],t):n.min>1&&this.updateStackedHdrRowHgt(s,n.max,t[s],e)},e.prototype.refreshStackedHdrHgt=function(){var e,t=this.getFrozenHeader().querySelectorAll(".e-columnheader"),i=this.getMovableHeader().querySelectorAll(".e-columnheader");"LeftRight"==this.parent.options.frozenName?(e=this.parent.element.querySelectorAll(".e-frozenheader")[1].querySelectorAll(".e-columnheader"),this.updateStackedFrozenHeight(e,i)):this.updateStackedFrozenHeight(t,i),this.parent.options.allowResizing&&this.updateResizeHandler()},e.prototype.getRowSpan=function(e){for(var t,i,n,s=0,o=e.childElementCount;s<o;s++)0===s&&(i=e.children[0].rowSpan),t=e.children[s].rowSpan,i=Math.min(t,i),n=Math.max(t,i);return{min:i,max:n}},e.prototype.updateStackedHdrRowHgt=function(e,t,i,n){for(var s=0,o=0;o<t;o++)s+=n[e+o].style.height?parseInt(n[e+o].style.height,10):n[e+o].offsetHeight;i.style.height=s+"px"},e.prototype.getFrozenHeader=function(){return this.frozenHeader},e.prototype.getMovableHeader=function(){return this.movableHeader},e.prototype.refreshRowHeight=function(){0==this.parent.options.rowHeight&&(this.parent.options.frozenColumns||this.parent.options.frozenRows)&&(this.clearWrapHeight(),this.refreshStackedHdrHgt(),this.refreshFreeze({case:"refreshHeight"}),this.parent.options.allowResizing&&this.updateResizeHandler())},e.prototype.clearWrapHeight=function(){var e=function(e,t){for(var i=0,n=e.length;i<n;i++)sf.base.isNullOrUndefined(e[i])||sf.base.isNullOrUndefined(t[i])||(e[i].style.height=null,t[i].style.height=null)};this.parent.options.frozenColumns&&((this.parent.options.frozenRows||"Both"==this.parent.options.wrapMode||"Header"==this.parent.options.wrapMode)&&e(this.parent.element.querySelector(".e-frozenheader").querySelectorAll("tr"),this.parent.element.querySelector(".e-movableheader").querySelectorAll("tr")),e(this.parent.element.querySelector(".e-frozencontent").querySelectorAll("tr"),this.parent.element.querySelector(".e-movablecontent").querySelectorAll("tr"))),this.parent.options.frozenRows&&0==this.parent.options.frozenColumns&&e(this.parent.element.querySelector(".e-headercontent").querySelectorAll("tr"),this.parent.element.querySelector(".e-content").querySelectorAll("tr"))},e}(),v=function(){function e(e){this.parent=e}return e.prototype.setMinwidthBycalculation=function(e){var t=0,i=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)||"auto"===e.width||""===e.width}));if(i.length){t=sf.base.isNullOrUndefined(this.parent.options.width)||"auto"===this.parent.options.width?this.parent.element.getBoundingClientRect().width-e:("string"==typeof this.parent.options.width?parseInt(this.parent.options.width,10):this.parent.options.width)-e;for(var n=0,s=0,o=0,r=i;o<r.length;o++){var a=r[o];n+=sf.base.isNullOrUndefined(a.minWidth)?0:"string"==typeof a.minWidth?parseInt(a.minWidth,10):a.minWidth}for(var l={},d=0;d<i.length;d++)0===e&&this.parent.options.allowResizing&&this.isWidthUndefined()&&d!==i.length-1&&this.setUndefinedColumnWidth(i),0!==e&&t<n?(l[i[d].field]=i[d].minWidth+"px",s+=parseInt(i[d].minWidth.toString(),10)):0!==e&&t>n&&(l[i[d].field]="",s+=0);this.parent.dotNetRef.invokeMethodAsync("SetMinWidth",l),this.parent.options.frozenColumns&&this.parent.freezeModule.setFrozenHeight(s)}},e.prototype.setUndefinedColumnWidth=function(e){for(var t=0;t<e.length;t++)t!==e.length-1&&(e[t].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[t].field)))},e.prototype.setColumnWidth=function(e,t,i,n){if(void 0===n&&(n=!0),!(this.parent.getColumns().length<1)){var s;s=this.parent.options.enableColumnVirtualization?this.parent.options.virtualizedColumns.findIndex((function(t){return t.uid==e.uid}))+this.parent.getIndentCount():sf.base.isNullOrUndefined(t)?this.parent.getNormalizedColumnIndex(e.uid):t;var o=this.getWidth(e),r=this.getTableWidth(this.parent.getColumns());null!==o&&(this.setWidth(o,s),"auto"!==this.parent.options.width&&-1===this.parent.options.width.toString().indexOf("%")&&this.setMinwidthBycalculation(r),this.parent.options.enableColumnVirtualization&&"resize"===i&&(this.parent.options.virtualizedColumns.filter((function(t){return t.uid==e.uid}))[0].width=o,this.parent.virtualContentModule.refreshOffsets(),this.parent.virtualContentModule.setVirtualHeight()),(this.parent.options.allowResizing&&"resize"===i||this.parent.options.frozenColumns&&this.parent.options.allowResizing)&&this.setWidthToTable(null,!1,"resize"),n&&(o.toString().indexOf("px")>0&&(o=o.toString().replace("px","")),this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{index:s,width:o,columnUid:e.uid})))}},e.prototype.setWidth=function(e,t,i){var n=this;if("string"==typeof e&&-1!==e.indexOf("%")&&(!Boolean(window.chrome)||!Boolean(window.chrome.webstore))&&this.parent.options.allowGrouping){var s=this.parent.element.offsetWidth;e=parseInt(e,10)/100*s}var o,a,l=this.parent.getHeaderTable(),d=this.parent.getContentTable(),h=sf.base.formatUnit(e),c=this.parent.options.frozenColumns,p=this.parent.getHeaderContent().querySelector(".e-movableheader"),u=this.parent.getContent().querySelector(".e-movablecontent"),f=0;if(0!=this.parent.options.frozenRightCount||0!=this.parent.options.frozenLeftCount){this.parent.updateColumnLevelFrozen();var m=this.parent.options.enableColumnVirtualization?t:this.parent.frozenColumnModel.findIndex((function(e){return e.uid==n.parent.columnModel[t].uid}));if("Left"==this.parent.options.frozenName&&(v=m<this.parent.options.frozenLeftCount?l:p),"Right"==this.parent.options.frozenName)v=m>=(f=this.parent.options.columns.length-this.parent.options.frozenRightCount)?l:p;else if("LeftRight"==this.parent.options.frozenName){f=this.parent.options.columns.length-this.parent.options.frozenRightCount-this.parent.options.frozenLeftCount;var g=this.parent.getHeaderContent().querySelector(".e-frozen-right-header");v=m<this.parent.options.frozenLeftCount?l:m<this.parent.options.frozenLeftCount+f?p:g}if(!(o=this.getColumnLevelFrozenColgroup(m,this.parent.options.frozenLeftCount,f,v)))return}else if(c&&t>=c&&p&&p.querySelector("colgroup"))o=p.querySelector("colgroup").children[t-c];else if(this.parent.options.enableColumnVirtualization&&c&&p.scrollLeft>0){o=(y=p.querySelector("colgroup")).children[y.children.length-1-t]}else o=l.querySelector("colgroup").children[t];if(o&&!i?o.style.width=h:o&&i&&(o.style.width=" "),0!=this.parent.options.frozenRightCount||0!=this.parent.options.frozenLeftCount){var v;m=this.parent.options.enableColumnVirtualization?t:this.parent.frozenColumnModel.findIndex((function(e){return e.uid==n.parent.columnModel[t].uid}));if("Left"==this.parent.options.frozenName&&(v=m<this.parent.options.frozenLeftCount?d:u),"Right"==this.parent.options.frozenName&&(v=m>=(f=this.parent.options.columns.length-this.parent.options.frozenRightCount)?d:u),"LeftRight"==this.parent.options.frozenName){var b=this.parent.getContent().querySelector(".e-frozen-right-content");v=m<this.parent.options.frozenLeftCount?d:m<this.parent.options.frozenLeftCount+f?u:b}a=this.getColumnLevelFrozenColgroup(m,this.parent.options.frozenLeftCount,f,v)}else if(c&&t>=c)a=this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup").children[t-c];else if(this.parent.options.enableColumnVirtualization&&c&&u.scrollLeft>0){var y;a=(y=this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup")).children[y.children.length-1-t]}else a=d.querySelector("colgroup").children[t];if(a&&!i?a.style.width=h:a&&i&&(a.style.width=" "),0!=this.parent.options.aggregatesCount){var w=void 0;if(c&&t>=c){var C=this.parent.getFooterContent().querySelector(".e-movablefootercontent"),S=sf.base.isNullOrUndefined(C)?null:C.querySelector("colgroup");w=sf.base.isNullOrUndefined(S)?null:S.children[t-c]}else{var E=this.parent.getFooterContent().querySelector("colgroup");w=sf.base.isNullOrUndefined(E)?null:E.children[t]}a&&w&&!i?w.style.width=h:a&&w&&i&&(w.style.width=" ")}for(var x=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),O=[],T=0;T<x.length;T++)if(r(x[T],"e-grid").id===this.parent.element.id)for(var A=0;A<x[T].querySelector("colgroup").children.length;A++)O.push(x[T].querySelector("colgroup").children[A]);x.length&&O.length&&(O[t].style.width=h),0==this.parent.options.frozenColumns||this.parent.options.enableColumnVirtualization||this.parent.freezeModule.setFrozenHeight()},e.prototype.getColumnLevelFrozenColgroup=function(e,t,i,n){if(!n||!n.querySelector("colgroup"))return null;var s=this.parent.options.enableColumnVirtualization?this.parent.options.virtualizedColumns:this.parent.frozenColumnModel,o=[].slice.call(n.querySelector("colgroup").children);return"Left"===s[e].freeze&&s[e].isFrozen?o[e]:"Right"===s[e].freeze&&s[e].isFrozen?o[e-(t+i)]:o[e-t]},e.prototype.isWidthUndefined=function(){var e=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)&&sf.base.isNullOrUndefined(e.minWidth)})).length;return this.parent.getColumns().length===e},e.prototype.getWidth=function(e){if(!e.width)return null;var t=parseInt(e.width.toString(),10);return e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width},e.prototype.getTableWidth=function(e){for(var t=0,i=0,n=e;i<n.length;i++){var s=n[i],o=this.getWidth(s);"auto"===s.width&&(o=0),!1!==s.visible&&null!==o&&(t+=parseInt(o.toString(),10))}return t},e.prototype.calcMovableOrFreezeColWidth=function(e){var t=0!=this.parent.frozenColumnModel.length?this.parent.frozenColumnModel.slice():this.parent.getColumns().slice(),i=this.parent.options.frozenLeftColumnsCount||this.parent.options.actualFrozenColumns,n=t.length-this.parent.options.frozenColumns;return"movable"===e?t.splice(0,this.parent.options.frozenColumns):"freeze-left"===e?t.splice(i,t.length):"freeze-right"===e&&t.splice(0,i+n),sf.base.formatUnit(this.getTableWidth(t))},e.prototype.setWidthToFrozenLeftTable=function(e){var t=sf.base.isNullOrUndefined(e)?this.calcMovableOrFreezeColWidth("freeze-left"):e;this.parent.getHeaderTable().style.width=t,this.parent.getContentTable().style.width=t,this.parent.resizeModule.leftFrozenTableWidth=t,this.parent.getFooterContent()&&this.parent.getFooterContent().querySelector(".e-frozenfootercontent").firstElementChild&&(this.parent.getFooterContent().querySelector(".e-frozenfootercontent").firstElementChild.style.width=t)},e.prototype.setWidthToFrozenRightTable=function(e){var t=sf.base.isNullOrUndefined(e)?this.calcMovableOrFreezeColWidth("freeze-right"):e;this.parent.options.enableColumnVirtualization||(this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(".e-table").style.width=t,this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(".e-table").style.width=t,this.parent.resizeModule.rightFrozenTableWidth=t),this.parent.getFooterContent()&&this.parent.getFooterContent().querySelector(".e-frozenfootercontent").firstElementChild&&(this.parent.getFooterContent().querySelector(".e-frozenfootercontent").firstElementChild.style.width=t)},e.prototype.setWidthToMovableTable=function(e){var t="";if(sf.base.isNullOrUndefined(e)){var i=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)})).length>=1,n=this.parent.getColumns().filter((function(e){return"auto"===e.width})).length>=1;"number"!=typeof this.parent.options.width||i||n?i||n||(t=this.calcMovableOrFreezeColWidth("movable")):t=sf.base.formatUnit(this.parent.options.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5)}else t=e;this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild&&!this.parent.options.enableColumnVirtualization&&(this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild.style.width=t),this.parent.getFooterContent()&&this.parent.getFooterContent().querySelector(".e-movablefootercontent").firstElementChild&&(this.parent.getFooterContent().querySelector(".e-movablefootercontent").firstElementChild.style.width=t),this.parent.options.enableColumnVirtualization||(this.parent.getContent().querySelector(".e-movablecontent").firstElementChild.style.width=t,this.parent.resizeModule.tableWidth=t)},e.prototype.setWidthToFrozenEditTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=e},e.prototype.setWidthToMovableEditTable=function(){var e=this.calcMovableOrFreezeColWidth("movable");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=e},e.prototype.setPersistedWidth=function(e){this.parent.options.frozenColumns?0!=this.parent.options.frozenRightColumnsCount||0!=this.parent.options.frozenLeftColumnsCount?(0!=this.parent.options.frozenLeftColumnsCount&&this.setWidthToFrozenLeftTable(e.leftFrozenTableWidth),0!=this.parent.options.frozenRightColumnsCount&&this.setWidthToFrozenRightTable(e.rightFrozenTableWidth),this.setWidthToMovableTable(e.tableWidth)):(this.setWidthToFrozenLeftTable(e.leftFrozenTableWidth),this.setWidthToMovableTable(e.tableWidth)):(this.parent.getHeaderTable().style.width=e.tableWidth,this.parent.getContentTable().style.width=e.tableWidth,0!=this.parent.options.aggregatesCount&&(this.parent.getFooterContent().querySelector(".e-table").style.width=e.tableWidth))},e.prototype.setWidthToTable=function(e,t,i){var n;void 0===e&&(e=null),void 0===t&&(t=!1),void 0===i&&(i=""),n=this.parent.options.enableColumnVirtualization&&"resize"===i?sf.base.formatUnit(this.getTableWidth(this.parent.options.virtualizedColumns)):sf.base.formatUnit(this.getTableWidth(null!=e?e:this.parent.getColumns())),this.parent.options.frozenColumns?0!=this.parent.options.frozenRightColumnsCount||0!=this.parent.options.frozenLeftColumnsCount?(0!=this.parent.options.frozenLeftColumnsCount&&this.setWidthToFrozenLeftTable(),0!=this.parent.options.frozenRightColumnsCount&&this.setWidthToFrozenRightTable(),this.setWidthToMovableTable()):(this.setWidthToFrozenLeftTable(),this.setWidthToMovableTable()):(this.parent.options.hasDetailTemplate&&this.setWidth("30",0),t&&(n=""),this.parent.resizeModule.tableWidth=n,this.parent.getHeaderTable().style.width=n,this.parent.getContentTable().style.width=n,0!=this.parent.options.aggregatesCount&&(this.parent.getFooterContent().querySelector(".e-table").style.width=n));var s=this.parent.element.querySelector(".e-table.e-inline-edit");s&&this.parent.options.frozenColumns?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):s&&(s.style.width=n)},e}(),b=function(){function e(e){var t=this;this.dragStart=function(e){var i=t.parent;document.body.classList.add("e-prevent-select");var n=i.element.querySelector(".e-gridpopup");n&&(n.style.display="none"),t.parent.reorderModule.dragStart({target:e.target,column:t.column,event:e.event}),t.parent.groupModule.columnDragStart({target:e.target,column:t.column}),e.bindEvents(e.dragElement)},this.drag=function(e){var i=t.parent,n=e.target;if(n){var s=sf.base.closest(n,".e-grid"),o=sf.base.closest(n,".e-gridcontent"),r=sf.base.closest(n,".e-gridpager"),a=t.parent.element.querySelector(".e-cloneproperties");if((!s||s.getAttribute("id")!==i.element.getAttribute("id")||o||r)&&(sf.base.classList(a,["e-notallowedcur"],["e-defaultcur"]),i.options.allowReordering&&(i.element.querySelector(".e-reorderuparrow").style.display="none",i.element.querySelector(".e-reorderdownarrow").style.display="none"),!i.options.groupReordering))return;i.options.allowReordering&&t.parent.reorderModule.drag({target:e.target,column:t.column,event:e.event}),i.options.allowGrouping&&t.parent.groupModule.columnDrag({target:e.target})}},this.dragStop=function(e){var i,n=t.parent;document.body.classList.remove("e-prevent-select");var s=n.element.querySelector(".e-gridpopup");s&&(s.style.display="none"),(!r(e.target,"e-headercell")&&!r(e.target,"e-groupdroparea")||!n.options.allowReordering&&r(e.target,"e-headercell")||!e.helper.getAttribute("e-mappinguid")&&r(e.target,"e-groupdroparea"))&&(sf.base.remove(e.helper),i=!0),n.options.allowReordering&&t.parent.reorderModule.dragStop({target:e.target,event:e.event,column:t.column,cancel:i})},this.drop=function(e){var i=t.parent,n=(e.droppedElement.getAttribute("e-mappinguid"),sf.base.closest(e.target,".e-grid"));sf.base.remove(e.droppedElement),n&&n.getAttribute("id")!==i.element.getAttribute("id")||!i.options.allowReordering&&!i.options.allowGrouping||(i.options.allowReordering&&t.parent.reorderModule.headerDrop({target:e.target}),i.options.allowGrouping&&i.options.showDropArea&&t.parent.groupModule.columnDrop({target:e.target,droppedElement:e.droppedElement}))},this.helper=function(e){var i=t.parent,n=e.sender.target,s=sf.base.closest(n,".e-headercell:not(.e-stackedHeaderCell)");if(s){var o=(s.querySelector(".e-headercelldiv")||s.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid"),a=i.getColumnByUid(o);if(!sf.base.isNullOrUndefined(a)&&!a.allowGrouping&&!a.allowReordering)return!1}var l=r(n,"e-headercell");if(i.getContent().classList.contains("e-freezeline-moving")||!i.options.allowReordering&&!i.options.allowGrouping||!sf.base.isNullOrUndefined(l)&&l.querySelectorAll(".e-checkselectall").length>0)return!1;var d=sf.base.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),h=n.classList.contains("e-headercell")?n:l;if(!h||!i.options.allowReordering&&h.classList.contains("e-stackedheadercell"))return!1;var c,p=h.offsetHeight,u=h.querySelector(".e-headercelldiv")||h.querySelector(".e-stackedheadercelldiv");if(u){if(c=h.querySelector(".e-stackedheadercelldiv")?i.getStackedHeaderColumnByHeaderText(u.innerText.trim(),i.options.columns):i.getColumnByUid(u.getAttribute("e-mappinguid")),t.column=c,t.column.lockColumn)return!1;d.setAttribute("e-mappinguid",u.getAttribute("e-mappinguid"))}return d.innerHTML=u?c.headerText:h.firstElementChild.innerHTML,d.style.width=h.offsetWidth+"px",d.style.height=h.offsetHeight+"px",d.style.lineHeight=(p-6).toString()+"px",i.element.appendChild(d),d},this.parent=e,(this.parent.options.allowGrouping||this.parent.options.allowReordering)&&(this.initializeHeaderDrag(),this.initializeHeaderDrop())}return e.prototype.initializeHeaderDrag=function(){var e=this.parent;if(this.parent.options.allowReordering||this.parent.options.allowGrouping&&this.parent.options.showDropArea)for(var t=[].slice.call(e.getHeaderContent().querySelectorAll(".e-columnheader")),i=0,n=t.length;i<n;i++)this.draggable=new sf.base.Draggable(t[i],{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isPreventSelect:!1})},e.prototype.initializeHeaderDrop=function(){var e=this.parent;this.droppable=new sf.base.Droppable(e.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})},e.prototype.destroy=function(){sf.base.isNullOrUndefined(this.draggable)||this.draggable.destroy(),sf.base.isNullOrUndefined(this.droppable)||this.droppable.destroy()},e}(),y=function(){function e(e){var t=this;this.drop=function(e){t.parent.groupModule.columnDrop({target:e.target,droppedElement:e.droppedElement}),sf.base.remove(e.droppedElement)},this.parent=e,this.parent.options.allowGrouping&&this.initializeContentDrop()}return e.prototype.initializeContentDrop=function(){var e=this.parent;new sf.base.Droppable(e.getContent(),{accept:".e-dragclone",drop:this.drop})},e}(),w=function(){function e(e){this.parent=e,e.options.allowReordering&&this.createReorderElement()}return e.prototype.chkDropPosition=function(e,t){var i=this.parent.getColumnByUid(t.firstElementChild.getAttribute("e-mappinguid")),n=!i||!i.lockColumn;return(e.parentElement.isEqualNode(t.parentElement)||this.parent.options.frozenColumns&&Array.prototype.indexOf.call(sf.base.closest(e,"thead").children,e.parentElement)===Array.prototype.indexOf.call(sf.base.closest(t,"thead").children,t.parentElement))&&this.targetParentContainerIndex(e,t)>-1&&n},e.prototype.chkDropAllCols=function(e,t){for(var i,n=this.getHeaderCells();!i&&n.length>0;)i=e!==n.pop()&&this.targetParentContainerIndex(e,t)>-1;return i},e.prototype.findColParent=function(e,t,i){i=i;for(var n=0,s=t.length;n<s;n++){if(e===t[n])return!0;if(t[n].columns){var o=i.length;if(i.push(t[n]),this.findColParent(e,t[n].columns,i))return!0;i.splice(o,i.length-o)}}return!1},e.prototype.getColumnsModel=function(e){for(var t=[],i=[],n=0,s=e.length;n<s;n++)t.push(e[n]),e[n].columns&&(i=i.concat(e[n].columns));return i.length&&(t=t.concat(this.getColumnsModel(i))),t},e.prototype.headerDrop=function(e){var t=this.parent,i=(this.element.querySelector(".e-headercelldiv")||this.element.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid"),n=t.getColumnByUid(i);if(sf.base.closest(e.target,"th")&&(sf.base.isNullOrUndefined(n)||n.allowReordering&&!n.lockColumn)){var s=sf.base.closest(e.target,".e-headercell"),o=(s.querySelector(".e-headercelldiv")||s.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");if(!sf.base.isNullOrUndefined(o)){var r=t.getColumnByUid(o);if(sf.base.isNullOrUndefined(r)||!r.allowReordering||r.lockColumn)return}if(s&&this.chkDropPosition(this.element,s)&&this.chkDropAllCols(this.element,s))if(this.parent.options.enableColumnVirtualization){var l=this.parent.options.columns,d=this.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),h=this.parent.getColumns(!0).filter((function(e){return e.uid===d})),c=null,p=h[0],u=s.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");l.some((function(e,t){return e.uid===u&&(c=t,e.uid===u)}));sf.base.isNullOrUndefined(c)||this.moveColumns(c,p)}else{var f=this.targetParentContainerIndex(this.element,s),m=this.element.firstElementChild.getAttribute("e-mappinguid");if(this.destElement=s,m)this.moveColumns(f,this.parent.getColumnByUid(m));else{var g=this.getHeaderCells(),v=a(this.element,g),b=(l=this.getColumnsModel(this.parent.options.columns))[v];this.moveColumns(f,b)}}}},e.prototype.isActionPrevent=function(e){return c(e.element)},e.prototype.moveColumns=function(e,t,i,n){var s=this.parent;if(!this.isActionPrevent(s)){var o=this.getColParent(t,this.parent.options.columns),r=o?o.columns:this.parent.options.columns,a=l(t,r);if(this.parent.options.frozenColumns&&o&&!i){for(var d=0;d<r.length;d++)if(r[d].field===t.field){a=d;break}var h=this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute("e-mappinguid"));if(h){for(d=0;d<r.length;d++)if(r[d].field===h.field){e=d;break}}else for(d=0;d<r.length;d++)r[d].headerText===this.destElement.innerText.trim()&&(e=d)}s.options.allowReordering&&a!==e&&-1!==a&&-1!==e&&(r.splice(e,0,r.splice(a,1)[0]),s.getColumns(!0),!1!==n&&setTimeout((function(){s.dotNetRef.invokeMethodAsync("ColumnReordered",{requestType:"reorder",fromIndex:e,toIndex:a,toColumnUid:t.uid})}),10))}},e.prototype.targetParentContainerIndex=function(e,t){var i=this.getHeaderCells();"None"!==this.parent.options.frozenName&&this.parent.updateColumnLevelFrozen();var n=this.parent.options.columns,s="None"==this.parent.options.frozenName?this.getColumnsModel(n):this.parent.frozenReorderColumnModel.slice(),o=this.getColParent(s[a(e,i)],n);return n=o?o.columns:n,l(s[a(t,i)],n)},e.prototype.getHeaderCells=function(){var e=this.parent.options.frozenColumns;if(e&&"None"===this.parent.options.frozenName){var t=void 0,i=void 0,n=[],s=[].slice.call(this.parent.element.querySelector(".e-frozenheader").querySelectorAll(".e-columnheader"));if(e&&"None"===this.parent.options.frozenName)for(var o=[].slice.call(this.parent.getHeaderContent().querySelector(".e-movableheader").querySelectorAll(".e-columnheader")),r=0;r<s.length;r++){t=[].slice.call(s[r].getElementsByClassName("e-headercell")),i=[].slice.call(o[r].getElementsByClassName("e-headercell"));for(var a=void 0,l=0;l<t.length;l++){for(var d=0;d<i.length;d++)if(i[d].innerText===t[l].innerText){a=!0;break}a||(n=n.concat([t[l]]))}for(d=0;d<i.length;d++)n.push(i[d])}else for(r=0;r<s.length;r++){i=[].slice.call(s[r].getElementsByClassName("e-headercell"));for(l=0;l<i.length;l++){for(a=void 0,d=l+1;d<i.length;d++)if(i[d].innerText===i[l].innerText){a=!0;break}a||(n=n.concat([i[l]]))}}return n}return[].slice.call(this.parent.element.getElementsByClassName("e-headercell"))},e.prototype.getColParent=function(e,t){var i=[];return this.findColParent(e,t,i),i[i.length-1]},e.prototype.reorderSingleColumn=function(e,t){var i=this.parent.getColumnByField(e),n=this.parent.getColumnByField(t);if((sf.base.isNullOrUndefined(i)||i.allowReordering&&!i.lockColumn)&&(sf.base.isNullOrUndefined(n)||n.allowReordering&&!i.lockColumn)){var s=this.parent.getColumnByField(t),o=this.getColParent(s,this.parent.options.columns),r=l(s,o?o.columns:this.parent.options.columns);r>-1&&this.moveColumns(r,this.parent.getColumnByField(e),!0)}},e.prototype.reorderMultipleColumns=function(e,t){var i=this.parent.getColumnIndexByField(t),n=this.parent.getColumnByField(t);if(!(i<0)&&(sf.base.isNullOrUndefined(n)||n.allowReordering&&!n.lockColumn)){for(var s=0;s<e.length;s++){var o=this.parent.getColumnByField(e[s]);if(!sf.base.isNullOrUndefined(o)&&(!o.allowReordering||o.lockColumn))return}for(s=0;s<e.length;s++){o=this.parent.getColumnByIndex(i);var r=this.getColParent(o,this.parent.options.columns),a=l(o,r?r.columns:this.parent.options.columns);a>-1&&this.moveColumns(a,this.parent.getColumnByField(e[s]),!0,!1),this.parent.getColumnIndexByField(e[s+1])>=a&&i++}var d=this.parent.getColumns();this.parent.dotNetRef.invokeMethodAsync("ColumnReordered",{fromColumnUid:e.map((function(e){return d.filter((function(t){return t.field===e}))[0].uid})),toColumnUid:n.uid,isMultipleReorder:!0,requestType:"reorder",type:"actionBegin"})}},e.prototype.moveTargetColumn=function(e,t){t>-1&&this.moveColumns(t,e,!0)},e.prototype.reorderSingleColumnByTarget=function(e,t){var i=this.parent.getColumnByField(e);this.moveTargetColumn(i,t)},e.prototype.reorderMultipleColumnByTarget=function(e,t){for(var i=0;i<e.length;i++)this.reorderSingleColumnByTarget(e[i],t)},e.prototype.reorderColumns=function(e,t){"string"==typeof e?(this.reorderSingleColumn(e,t),this.fromCol=e):(this.reorderMultipleColumns(e,t),this.fromCol=e[0])},e.prototype.reorderColumnByIndex=function(e,t){var i=this.parent.getColumnByIndex(e);this.moveTargetColumn(i,t)},e.prototype.reorderColumnByTargetIndex=function(e,t){"string"==typeof e?this.reorderSingleColumnByTarget(e,t):this.reorderMultipleColumnByTarget(e,t)},e.prototype.createReorderElement=function(){var e=this.parent.element.querySelector(".e-headercontent");this.upArrow=e.appendChild(sf.base.createElement("div",{className:"e-icons e-icon-reorderuparrow e-reorderuparrow",attrs:{style:"display:none"}})),this.downArrow=e.appendChild(sf.base.createElement("div",{className:"e-icons e-icon-reorderdownarrow e-reorderdownarrow",attrs:{style:"display:none"}}))},e.prototype.destroy=function(){this.parent.element;this.upArrow&&sf.base.remove(this.upArrow),this.downArrow&&sf.base.remove(this.downArrow)},e.prototype.keyPressHandler=function(e){this.parent;e.action},e.prototype.drag=function(e){var t=this.parent,i=e.target,n=t.element.querySelector(".e-cloneproperties");if(e.column.allowReordering&&!e.column.lockColumn){var s=sf.base.closest(i,".e-headercell:not(.e-stackedHeaderCell)"),o=this.x>d(e.event).x+t.getContent().firstElementChild.scrollLeft;if(sf.base.removeClass(t.element.querySelector(".e-headercontent").querySelectorAll(".e-reorderindicate"),["e-reorderindicate"]),this.setDisplay("none"),this.stopTimer(),sf.base.classList(n,["e-defaultcur"],["e-notallowedcur"]),this.updateScrollPostion(e.event),s&&!s.isEqualNode(this.element)){i=s;var a=(s.querySelector(".e-headercelldiv")||s.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid"),l=t.getColumnByUid(a);this.chkDropPosition(this.element,i)&&this.chkDropAllCols(this.element,i)&&l.allowReordering?(this.updateArrowPosition(i,o),sf.base.classList(i,["e-allowDrop","e-reorderindicate"],[])):t.options.allowGrouping&&r(e.target,"e-groupdroparea")||sf.base.classList(n,["e-notallowedcur"],["e-defaultcur"])}}else sf.base.classList(n,["e-notallowedcur"],["e-defaultcur"])},e.prototype.updateScrollPostion=function(e){var t=this,i=this.parent.options.frozenColumns,n=d(e).x,s=this.parent.element.getBoundingClientRect(),o=i?this.parent.element.querySelector(".e-movableheader").getBoundingClientRect().left:s.left,r=s.right,a=i?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent();"None"!==this.parent.options.frozenName?this.updateFrozenScrollPosition(n,s):n>o&&n<o+35?this.timer=window.setInterval((function(){t.setScrollLeft(a,!0)}),50):n<r&&n>r-35&&(this.timer=window.setInterval((function(){t.setScrollLeft(a,!1)}),50))},e.prototype.updateFrozenScrollPosition=function(e,t){var i=this.parent.getContent().querySelector(".e-movablecontent"),n=this.parent.element.querySelector(".e-movableheader").getBoundingClientRect(),s=this.parent.options.frozenLeftCount,o=this.parent.options.frozenRightCount?n.right:t.right,r=s?n.left:t.left;e>r&&e<r+35?this.timer=window.setInterval((function(){this.setScrollLeft(i,!0)}),50):e<o&&e>o-35&&(this.timer=window.setInterval((function(){this.setScrollLeft(i,!1)}),50))},e.prototype.setScrollLeft=function(e,t){var i=e.scrollLeft;e.scrollLeft=e.scrollLeft+(t?-5:5),i!==e.scrollLeft&&this.setDisplay("none")},e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.updateArrowPosition=function(e,t){var i=e.getBoundingClientRect(),n=this.parent.element.getBoundingClientRect();t&&i.left<n.left||!t&&i.right>n.right||(this.upArrow.style.top=i.top+i.height-n.top-7+"px",this.downArrow.style.top=i.top-n.top-2+"px",this.upArrow.style.left=this.downArrow.style.left=(t?i.left:i.right)-n.left-4+"px",this.parent.options.enableColumnVirtualization&&(this.upArrow.style.left=this.downArrow.style.left=Number(this.upArrow.style.left.replace("px",""))+this.parent.getContent().scrollLeft+"px"),this.setDisplay(""))},e.prototype.dragStart=function(e){var t=this.parent;document.body.classList.add("e-prevent-select");var i=e.target;this.element=i.classList.contains("e-headercell")?i:r(i,"e-headercell"),e.column.allowReordering&&!e.column.lockColumn&&(this.x=d(e.event).x+t.getContent().firstElementChild.scrollLeft)},e.prototype.dragStop=function(e){var t=this.parent;document.body.classList.remove("e-prevent-select"),this.setDisplay("none"),this.stopTimer(),e.cancel,sf.base.removeClass(t.element.querySelector(".e-headercontent").querySelectorAll(".e-reorderindicate"),["e-reorderindicate"])},e.prototype.setDisplay=function(e){this.upArrow.style.display=e,this.downArrow.style.display=e},e.prototype.getModuleName=function(){return"reorder"},e}(),C="e-rhandler",S="e-rsuppress",E="e-ricon",x="e-rhelper",O="th.e-headercell",T="e-rcursor",A=function(){function e(e){this.tapped=!1,this.isDblClk=!0,this.parent=e,this.widthService=new v(this.parent)}return e.prototype.autoFitColumns=function(e){var t=null==e||e.length<=0?this.parent.getColumns().map((function(e){return e.field||e.uid})):"string"==typeof e?[e]:e;this.findColumn(t)},e.prototype.autoFit=function(){var e=this.parent.getColumns().filter((function(e){return!0===e.autoFit})).map((function(e){return e.field||e.uid}));e.length>0&&this.autoFitColumns(e)},e.prototype.resizeColumn=function(e,t,i){var n,s,o,r=this.parent,a=0,l=0,d=i||this.parent.getUidByColumnField(e);d=d||e;var h,c,p,u=this.parent.getNormalizedColumnIndex(d),f=this.parent.getColumnIndexByField(e);f=-1===f?this.parent.getColumnIndexByUid(e):f;var m=r.options.frozenColumns;sf.base.isNullOrUndefined(r.getFooterContent())||(o=r.getFooterContent().querySelector(".e-table")),m?t<m?(n=r.getHeaderTable(),s=r.getContentTable(),h=n.querySelector('[e-mappinguid="'+d+'"]').parentElement.cloneNode(!0),c=s.querySelectorAll("td:nth-child("+(u+1)+")"),o&&(p=o.querySelectorAll("td:nth-child("+(u+1)+")"))):(n=r.getHeaderContent().querySelector(".e-movableheader").children[0],s=r.getContent().querySelector(".e-movablecontent").children[0],h=n.querySelector('[e-mappinguid="'+d+'"]').parentElement.cloneNode(!0),c=s.querySelectorAll("td:nth-child("+(u-m+1)+")"),o&&(p=(o=r.getFooterContent().querySelector(".e-movablefootercontent").children[0]).querySelectorAll("td:nth-child("+(u-m+1)+")"))):(n=r.getHeaderTable(),s=r.getContentTable(),h=n.querySelector('[e-mappinguid="'+d+'"]').parentElement.cloneNode(!0),c=s.querySelectorAll("td:nth-child("+(u+1)+"):not(.e-groupcaption)"),o&&(p=o.querySelectorAll("td:nth-child("+(u+1)+"):not(.e-groupcaption)")));var g=n.querySelector("tr").querySelectorAll(".e-grouptopleftcell");if(g.length>0)for(var v=0;v<g.length;v++)l+=g[v].offsetWidth;var b=s.querySelector(".e-detailrowcollapse")||s.querySelector(".e-detailrowexpand");this.parent.options.hasDetailTemplate&&b&&(l+=b.offsetWidth);var y=[h],w=[],C=[];if(o)for(v=0;v<p.length;v++)C[v]=p[v].cloneNode(!0);for(v=0;v<c.length;v++)w[v]=c[v].cloneNode(!0);var S=this.createTable(n,y,"e-gridheader"),E=this.createTable(s,w,"e-gridcontent"),x=null;C.length&&(x=this.createTable(o,C,"e-gridfooter"));var O=r.getColumns()[f].width=sf.base.formatUnit(Math.max(S,E,x));if(this.widthService.setColumnWidth(r.getColumns()[f]),!1===r.getColumns().some((function(e){return(null===e.width||void 0===e.width||e.width.length<=0)&&e.visible}))){var T=r.getColumns();for(v=0;v<T.length;v++)T[v].visible&&(a+=parseFloat(T[v].width))}var A=a+l;a>0&&!r.options.frozenColumns&&(this.parent.options.hasDetailTemplate&&this.widthService.setWidth("30",0),n.style.width=sf.base.formatUnit(A),s.style.width=sf.base.formatUnit(A),sf.base.isNullOrUndefined(o)||(o.style.width=sf.base.formatUnit(A)));var N=n.offsetWidth;r.getContent().scrollWidth>N?(n.classList.add("e-tableborder"),s.classList.add("e-tableborder")):(n.classList.remove("e-tableborder"),s.classList.remove("e-tableborder")),sf.base.isNullOrUndefined(o)||o.classList.add("e-tableborder"),this.parent.freezeModule.refreshRowHeight(),O.toString().indexOf("px")>0&&(O=O.replace("px","")),this.parent.options.isResizedGrid=!0,this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{width:O,columnUid:d})},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.widthService=null,this.unwireEvents())},e.prototype.getModuleName=function(){return"resize"},e.prototype.findColumn=function(e){for(var t=function(t){var n=e[t],s=i.parent.getColumnIndexByField(n);s=-1===s?i.parent.getColumnIndexByUid(n):s;var o=i.parent.getColumns()[s];s>-1&&!sf.base.isNullOrUndefined(o)&&!0===o.visible&&(i.parent.options.allowGrouping&&!sf.base.isNullOrUndefined(i.parent.options.initGroupingField)&&i.parent.options.initGroupingField.some((function(e){return e==o.field}))&&!i.parent.options.showGroupedColumn||i.resizeColumn(n,s))},i=this,n=0;n<e.length;n++)t(n)},e.prototype.createTable=function(e,t,i){var n=sf.base.createElement("div");n.className=this.parent.element.className,n.style.cssText="display: inline-block;visibility:hidden;position:absolute";var s=sf.base.createElement("div");s.className=i;var o=sf.base.createElement("table");o.className=e.className,o.classList.add("e-resizetable"),o.style.cssText="table-layout: auto;width: auto";for(var r=sf.base.createElement("tr"),a=0;a<t.length;a++){var l=r.cloneNode();l.className=e.querySelector("tr").className,l.appendChild(t[a]),o.appendChild(l)}s.appendChild(o),n.appendChild(s),document.body.appendChild(n);var d=o.getBoundingClientRect().width;return document.body.removeChild(n),Math.ceil(d)},e.prototype.render=function(){this.unwireEvents(),this.wireEvents(),this.setHandlerHeight()},e.prototype.refreshHeight=function(){for(var e=this.getResizeHandlers(),t=0;t<e.length;t++)e[t].parentElement.offsetHeight>0&&(e[t].style.height=e[t].parentElement.offsetHeight+"px");this.setHandlerHeight()},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.resizeStart,this),sf.base.EventHandler.add(this.parent.getHeaderContent(),"dblclick",this.callAutoFit,this)},e.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.EventHandler.remove(this.parent.getHeaderContent(),"dblclick",this.callAutoFit)},e.prototype.getResizeHandlers=function(){return this.parent.options.frozenColumns?[].slice.call(this.parent.getHeaderContent().querySelectorAll("."+C)):[].slice.call(this.parent.getHeaderContent().querySelector(".e-table").querySelectorAll("."+C))},e.prototype.setHandlerHeight=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelector(".e-table").querySelectorAll("."+S)),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},e.prototype.callAutoFit=function(e){if(e.target.classList.contains("e-rhandler")){var t=this.getTargetColumn(e);if(t.columns)return;this.resizeColumn(t.field,this.parent.getNormalizedColumnIndex(t.uid),t.uid),sf.base.closest(e.target,O).classList.add("e-resized")}},e.prototype.resizeStart=function(e){if(e.target.classList.contains("e-rhandler")){var t=[],i={};if(!this.helper){if(0===this.getScrollBarWidth()){for(var n=0,s=this.refreshColumnWidth();n<s.length;n++){var o=s[n];this.widthService.setColumnWidth(o,null,null,!1),i={width:""==o.width?0:o.width,columnUid:o.uid},t.push(i)}this.widthService.setWidthToTable()}this.refreshStackedColumnWidth(),this.element=e.target,this.parentElementWidth=this.parent.element.getBoundingClientRect().width,this.appendHelper(),this.column=this.getTargetColumn(e),this.pageX=this.getPointX(e),this.parent.options.enableRtl?this.minMove=parseFloat(this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.minMove=(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(sf.base.isNullOrUndefined(this.column.width)?"":this.column.width.toString()),this.minMove+=this.pageX}sf.base.Browser.isDevice&&!this.helper.classList.contains(E)?(this.helper.classList.add(E),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.removeHelper,this),sf.base.EventHandler.add(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart,this)):(sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,this.resizeEnd,this),this.parent.dotNetRef.invokeMethodAsync("ResizeStarted",{columnUid:this.column.uid,columnList:t}))}},e.prototype.preventResizeAction=function(e){e?this.cancelResizeAction():(sf.base.EventHandler.add(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing,this),this.updateCursor("add"))},e.prototype.cancelResizeAction=function(e){e&&(sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove")),sf.base.Browser.isDevice&&(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart)),sf.base.detach(this.helper),this.refresh()},e.prototype.getWidth=function(e,t,i){return t&&e<t?t:i&&e>i?i:e},e.prototype.updateResizeEleHeight=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-rhandler")),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},e.prototype.getColData=function(e,t){return{width:parseFloat(sf.base.isNullOrUndefined(this.widthService.getWidth(e))||"auto"===this.widthService.getWidth(e)?"0":this.widthService.getWidth(e).toString())+t,minWidth:e.minWidth?parseFloat(e.minWidth.toString()):null,maxWidth:e.maxWidth?parseFloat(e.maxWidth.toString()):null}},e.prototype.resizing=function(e){if(!sf.base.isNullOrUndefined(this.column)){var t=0;sf.base.isNullOrUndefined(this.column)&&(t=r(this.element,"th").offsetWidth),this.parent.options.allowTextWrap&&(this.updateResizeEleHeight(),this.setHelperHeight());var i=this.getPointX(e),n=this.parent.options.enableRtl?-(i-this.pageX):i-this.pageX;"Right"===this.column.freeze&&this.column.isFrozen&&(n=this.parent.options.enableRtl?i-this.pageX:this.pageX-i);var s=this.getColData(this.column,n);s.width||(s.width=sf.base.closest(this.element,"th").offsetWidth);var o=this.getWidth(s.width,s.minWidth,s.maxWidth);if("Right"!==this.column.freeze&&(!this.parent.options.enableRtl&&this.minMove>=i||this.parent.options.enableRtl&&this.minMove<=i)&&(o=this.column.minWidth?parseFloat(this.column.minWidth.toString()):0,this.pageX=i=this.minMove),o!==parseFloat(sf.base.isNullOrUndefined(this.column.width)||"auto"===this.column.width?t.toString():this.column.width.toString())){this.pageX=i,this.column.width=sf.base.formatUnit(o);var a=[this.column],l=[this.column];this.column.columns&&(a=this.getSubColumns(this.column,[]),a=this.calulateColumnsWidth(a,!1,n),l=this.calulateColumnsWidth(a,!0,n));for(var d=0,h=l;d<h.length;d++){var c=h[d];this.widthService.setColumnWidth(c,null,"resize")}this.updateHelper()}this.isDblClk=!1}},e.prototype.calulateColumnsWidth=function(e,t,i){for(var n=[],s=0,o=e;s<o.length;s++){for(var r=o[s],a=0,l=0;l<e.length;l++)a+=parseFloat(e[l].width.toString());var d=this.getColData(r,parseFloat(r.width)*i/a),h=this.getWidth(d.width,d.minWidth,d.maxWidth);h!==parseFloat(r.width.toString())&&(t&&(r.width=sf.base.formatUnit(h<1?1:h)),n.push(r))}return n},e.prototype.getSubColumns=function(e,t){for(var i=0,n=e.columns;i<n.length;i++){var s=n[i];!1!==s.visible&&s.allowResizing&&(s.columns?this.getSubColumns(s,t):t.push(s))}return t},e.prototype.resizeEnd=function(e){if(this.helper){sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove"),sf.base.detach(this.helper);this.parent.getContent();sf.base.closest(this.element,".e-headercell").classList.add("e-resized"),r(this.element,"e-frozenheader")?this.isFrozenColResized=!0:this.isFrozenColResized=!1,this.parent.options.frozenColumns&&(this.parent.freezeModule.refreshRowHeight(),this.parent.freezeModule.setFrozenHeight()),this.parent.options.allowTextWrap&&this.updateResizeEleHeight();var t=this.column.width.toString();t=t.replace("px",""),this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{width:t,columnUid:this.column.uid,allowStopEvent:!0,tableWidth:this.tableWidth,leftFrozenTableWidth:this.leftFrozenTableWidth,rightFrozenTableWidth:this.rightFrozenTableWidth}),this.parent.options.enableColumnVirtualization||this.parent.updateColumnWidth(this.parent.columnModel),this.refresh(),this.doubleTapEvent(e),this.isDblClk=!0}},e.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},e.prototype.refreshColumnWidth=function(){for(var e=this.parent.getColumns(),t=0,i=[].slice.apply(this.parent.getHeaderContent().querySelectorAll("th.e-headercell"));t<i.length;t++)for(var n=i[t],s=0,o=e;s<o.length;s++){var r=o[s];if(n.querySelector("[e-mappinguid]")&&n.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===r.uid&&r.visible){r.width=n.getBoundingClientRect().width?n.getBoundingClientRect().width:r.width;break}}return e},e.prototype.refreshStackedColumnWidth=function(){for(var e=0,t=this.parent.getStackedColumns(this.parent.options.columns);e<t.length;e++){var i=t[e];i.width=this.getStackedWidth(i,0)}},e.prototype.getStackedWidth=function(e,t){for(var i=0,n=e.columns;i<n.length;i++){var s=n[i];!1!==s.visible&&(s.columns?this.getStackedWidth(s,t):t+=s.width)}return t},e.prototype.getTargetColumn=function(e){var t=sf.base.closest(e.target,O),i=(t=t.querySelector(".e-headercelldiv")||t.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");return this.parent.getColumnByUid(i)},e.prototype.updateCursor=function(e){var t=[].slice.call(this.parent.getHeaderContent().querySelectorAll("th"));t.push(this.parent.element);for(var i=0,n=t;i<n.length;i++){n[i].classList[e](T)}},e.prototype.refresh=function(){this.column=null,this.pageX=null,this.element=null,this.helper=null},e.prototype.appendHelper=function(){this.helper=sf.base.createElement("div",{className:x}),this.parent.element.appendChild(this.helper),this.setHelperHeight()},e.prototype.setHelperHeight=function(){var e=this.parent.getContent().offsetHeight-(this.parent.options.enableVirtualization&&this.parent.options.frozenColumns?0:this.getScrollBarWidth()),t=sf.base.closest(this.element,O),i=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr"));this.parent.options.frozenColumns&&t.parentElement.children.length&&!t.parentElement.children[0].classList.contains("e-stackedheadercell")&&(i=r(t,"e-movableheader")?[].slice.call(this.parent.getHeaderContent().querySelector(".e-movableheader").querySelectorAll("tr")):r(t,"e-frozen-right-header")?[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelectorAll("tr")):[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-left-header").querySelectorAll("tr")));for(var n=i.indexOf(t.parentElement);n<i.length;n++)e+=i[n].offsetHeight;var s=this.calcPos(t);r(t,"e-frozen-right-header")?s.left+=this.parent.options.enableRtl?t.offsetWidth-2:-1:s.left+=this.parent.options.enableRtl?-1:t.offsetWidth-2,this.helper.style.cssText="height: "+e+"px; top: "+s.top+"px; left:"+Math.floor(s.left)+"px;"},e.prototype.getScrollBarWidth=function(e){var t=this.parent.options.frozenColumns?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent();return t.scrollHeight>t.clientHeight&&e||t.scrollWidth>t.clientWidth?s():0},e.prototype.removeHelper=function(e){var t=e.target.classList;t.contains(C)||t.contains(E)||!this.helper||(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.detach(this.helper),this.refresh())},e.prototype.updateHelper=function(){var e=sf.base.closest(this.element,O),t=Math.floor(this.calcPos(e).left+(this.parent.options.enableRtl?-1:e.offsetWidth-2));if(r(e,"e-frozen-right-header")&&(t=Math.floor(this.calcPos(e).left+(this.parent.options.enableRtl?e.offsetWidth-2:-1))),t>this.parentElementWidth&&(t=this.parentElementWidth-2),this.parent.options.frozenColumns){var i=sf.base.closest(e,".e-table").offsetLeft;t<i&&(t=i)}this.helper.style.left=t+"px"},e.prototype.calcPos=function(e){for(var t={top:0,left:0},i=e.getBoundingClientRect(),n=e.ownerDocument,s=r(e,"e-grid")||n.documentElement;s&&(s===n.body||s===n.documentElement)&&"static"===s.style.position;)s=s.parentNode;return s&&s!==e&&1===s.nodeType&&(t=s.getBoundingClientRect()),{top:i.top-t.top,left:i.left-t.left}},e.prototype.doubleTapEvent=function(e){this.getUserAgent()&&this.isDblClk&&(this.tapped?(clearTimeout(this.tapped),this.callAutoFit(e),this.tapped=null):this.tapped=setTimeout(this.timeoutHandler(),300))},e.prototype.getUserAgent=function(){var e=sf.base.Browser.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)},e.prototype.timeoutHandler=function(){this.tapped=null},e}(),N=function(){function e(e){var t=this;this.visualElement=sf.base.createElement("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}}),this.helper=function(e){var i=t.parent,n=e.sender.target,s=n.classList.contains("e-groupheadercell")?n:r(n,"e-groupheadercell");return!(!s||!n.classList.contains("e-drag")&&t.parent.options.groupReordering)&&(t.column=i.getColumnByField(s.firstElementChild.getAttribute("ej-mappingname")),t.visualElement.textContent=s.textContent,t.visualElement.style.width=s.offsetWidth+2+"px",t.visualElement.style.height=s.offsetHeight+2+"px",t.visualElement.setAttribute("e-mappinguid",t.column.uid),i.element.appendChild(t.visualElement),t.visualElement)},this.dragStart=function(e){t.parent.element.classList.add("e-ungroupdrag"),document.body.classList.add("e-prevent-select"),e.bindEvents(e.dragElement)},this.drag=function(e){var i=e.target,n=t.parent.element.querySelector(".e-cloneproperties");t.parent.options.groupReordering||(sf.base.classList(n,["e-defaultcur"],["e-notallowedcur"]),r(i,"e-gridcontent")||r(i,"e-headercell")||sf.base.classList(n,["e-notallowedcur"],["e-defaultcur"]))},this.dragStop=function(e){document.body.classList.remove("e-prevent-select"),t.parent.element.classList.remove("e-ungroupdrag"),!(r(e.target,"e-gridcontent")||r(e.target,"e-gridheader"))&&sf.base.remove(e.helper)},this.preventTouchOnWindow=function(e){e.preventDefault()},this.drop=function(e){var i=t.parent,n=i.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));i.element.querySelector(".e-groupdroparea").classList.remove("e-hover"),sf.base.remove(e.droppedElement),i.options.allowGrouping&&sf.base.EventHandler.remove(window,"touchmove",t.preventTouchOnWindow),t.parent.element.querySelector(".e-groupdroparea").removeAttribute("aria-dropeffect"),t.parent.element.querySelector("[aria-grabbed=true]").setAttribute("aria-grabbed","false"),sf.base.isNullOrUndefined(n)||!1===n.allowGrouping||r(i.getColumnHeaderByUid(n.uid),"e-grid").getAttribute("id")!==i.element.getAttribute("id")||i.dotNetRef.invokeMethodAsync("GroupColumn",n.field,"Group")},this.parent=e,this.parent.options.allowGrouping&&this.parent.options.showDropArea&&this.initDragAndDrop()}return e.prototype.columnDrag=function(e){this.parent.options.groupReordering;var t=this.parent,i=t.element.querySelector(".e-cloneproperties"),n=t.getColumnByUid(i.getAttribute("e-mappinguid"));r(e.target,"e-groupdroparea")&&sf.base.classList(i,["e-defaultcur"],["e-notallowedcur"]),sf.base.EventHandler.add(window,"touchmove",this.preventTouchOnWindow),(r(e.target,"e-groupdroparea")||t.options.allowReordering&&r(e.target,"e-headercell"))&&(n.allowGrouping||!r(e.target,"e-groupdroparea"))||sf.base.classList(i,["e-notallowedcur"],["e-defaultcur"]),t.options.showDropArea&&(e.target.classList.contains("e-groupdroparea")?t.element.querySelector(".e-groupdroparea").classList.add("e-hover"):t.element.querySelector(".e-groupdroparea").classList.remove("e-hover"))},e.prototype.columnDragStart=function(e){if(!e.target.classList.contains("e-stackedheadercell")){var t=this.parent.element.querySelector(".e-groupdroparea");t&&t.setAttribute("aria-dropeffect","copy"),(e.target.classList.contains("e-headercell")?e.target:r(e.target,"e-headercell")).setAttribute("aria-grabbed","true")}},e.prototype.columnDrop=function(e){var t=this.parent;if("grouping"===e.droppedElement.getAttribute("action")){var i=t.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));if(sf.base.isNullOrUndefined(i)||!1===i.allowGrouping||r(t.getColumnHeaderByUid(i.uid),"e-grid").getAttribute("id")!==t.element.getAttribute("id"))return;t.dotNetRef.invokeMethodAsync("GroupColumn",i.field,"Ungroup")}},e.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop(),this.initializeGHeaderDrag()},e.prototype.initializeGHeaderDrag=function(){var e=this.parent.element.querySelector(".e-groupdroparea");if(e)new sf.base.Draggable(e,{dragTarget:this.parent.options.groupReordering?".e-drag":".e-groupheadercell",distance:this.parent.options.groupReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,isPreventSelect:!1})},e.prototype.initializeGHeaderDrop=function(){this.parent;var e=this.parent.element.querySelector(".e-groupdroparea");if(e)new sf.base.Droppable(e,{accept:".e-dragclone",drop:this.drop})},e.prototype.getModuleName=function(){return"group"},e.prototype.getGHeaderCell=function(e){return this.element&&this.element.querySelector('[ej-mappingname="'+e+'"]')?this.element.querySelector('[ej-mappingname="'+e+'"]').parentElement:null},e}(),k=function(){function e(e){this.mediaCol=[],this.media={},this.mediaBindInstance={},this.mediaColVisibility={},this.noOfTimesInvokedByMedia=0,this.mediaChange=!0,this.mediaColumnList=[],this.parent=e}return e.prototype.renderColumnChooser=function(){var e=this.parent.element.querySelector("#"+this.parent.element.id+"_ccdlg");e.style.maxHeight="430px";var t=e.style.display;e.style.display="block";var i,n=this.parent.element.querySelector(".e-cc-toolbar");this.parent.getHeaderContent().parentElement.classList.contains("e-sticky")?(i=n.getBoundingClientRect(),e.classList.add("e-sticky")):i=sf.popups.calculateRelativeBasedPosition(n,e),e.style.display=t;var s,o=i.top+n.getBoundingClientRect().height;s=this.parent.options.enableRtl?this.parent.element.querySelector(".e-columnchooser-btn").offsetLeft:i.left-250+n.clientWidth+2,this.parent.dotNetRef.invokeMethodAsync("GetChooserPosition",s.toString(),o.toString())},e.prototype.setMediaColumns=function(e){var t=this.parent.getColumns();if(!sf.base.isNullOrUndefined(t)){for(var i=0;i<t.length;i++)""!==t[i].hideAtMedia&&(sf.base.isNullOrUndefined(t[i].visible)||t[i].visible||e)&&this.pushMediaColumn(t[i],i);this.parent.dotNetRef.invokeMethodAsync("SetMediaColumnVisibility",{mediaColVisibility:this.mediaColVisibility}),this.mediaColVisibility={}}},e.prototype.pushMediaColumn=function(e,t){this.mediaCol.push(e),this.media[e.uid]=window.matchMedia(e.hideAtMedia),this.mediaQueryUpdate(t,this.media[e.uid],!0),this.mediaBindInstance[t]=this.mediaQueryUpdate.bind(this,t),this.media[e.uid].addListener(this.mediaBindInstance[t])},e.prototype.mediaQueryUpdate=function(e,t,i){var n=this.parent.getColumns()[e],s=this.parent.getColumns();if(this.mediaCol.some((function(e){return e.uid===n.uid}))&&(this.mediaColVisibility[n.uid]=t.matches,!i)){if(this.noOfTimesInvokedByMedia++,this.mediaChange=0===this.mediaColumnList.length,this.mediaChange)for(var o=0;o<s.length;o++)s[o].hideAtMedia.split(" ").slice(-1).toLocaleString()===t.media.split(" ").slice(-1).toLocaleString()&&this.mediaColumnList.push(s[o]);(this.mediaColumnList.length>0&&this.noOfTimesInvokedByMedia===this.mediaColumnList.length||this.mediaCol.length>0&&0===this.mediaColumnList.length)&&(this.parent.dotNetRef.invokeMethodAsync("SetMediaColumnVisibility",{mediaColVisibility:this.mediaColVisibility,invokedByMedia:!0}),this.noOfTimesInvokedByMedia=0,this.mediaColVisibility={},this.mediaColumnList=[])}},e.prototype.updateMediaColumns=function(e){for(var t=Object.keys(e),i=function(e){var i=-1;n.mediaCol.some((function(n){return i++,n.uid===t[e]}))?n.mediaCol.splice(i,1):n.pushMediaColumn(n.parent.getColumnByUid(t[e]),n.parent.getColumnIndexByUid(t[e]))},n=this,s=0;s<t.length;s++)i(s)},e.prototype.removeMediaListener=function(){for(var e=0;e<this.mediaCol.length;e++)this.media[this.mediaCol[e].uid].removeListener(this.mediaBindInstance[this.mediaCol[e].index])},e}(),I=function(){function e(e){this.key=null,this.uid=null,this.parent=e}return e.prototype.renderColumnMenu=function(e,t,i){this.key=i,this.uid=e;var n=this.parent.getColumnHeaderByUid(e).querySelector(".e-columnmenu"),s=document.getElementsByClassName("e-"+this.parent.element.id+"-column-menu")[0];s.style.position="absolute";var o=s.getElementsByTagName("ul")[0];if(sf.base.isNullOrUndefined(o))return{Left:1,Top:1};var r={top:0,left:0};o.style.visibility="hidden",s.style.display="block";var a=o.getBoundingClientRect();o.classList.add("e-transparent"),o.style.visibility="",s.style.display="";var l=this.getHeaderCell(n);return sf.base.Browser.isDevice?(r.top=window.innerHeight/2-a.height/2,r.left=window.innerWidth/2-a.width/2):(this.parent.options.enableRtl?r=sf.popups.calculatePosition(l,"left","bottom"):(r=sf.popups.calculatePosition(l,"right","bottom")).left-=a.width,r.left-=pageXOffset,r.top-=pageYOffset),t&&sf.base.EventHandler.add(o,"mouseover",this.appendFilter,this),{Left:-1!==Math.sign(r.left)?Math.ceil(r.left):0,Top:Math.ceil(r.top)}},e.prototype.setPosition=function(){var e=document.getElementsByClassName("e-"+this.parent.element.id+"-column-menu")[0],t=sf.base.isNullOrUndefined(e)?null:e.getElementsByTagName("ul")[0];if(!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(this.uid)){var i=this.parent.getColumnHeaderByUid(this.uid).querySelector(".e-columnmenu"),n=this.getHeaderCell(i).getBoundingClientRect(),s=n.left+pageXOffset,o=n.bottom+pageYOffset,r=t.getBoundingClientRect(),a=document.documentElement;n.bottom+r.height>a.clientHeight&&o-n.height-r.height>a.clientTop&&(o=o-n.height-r.height),n.left+r.width>a.clientWidth&&n.right-r.width>a.clientLeft&&(s=s+n.width-r.width),s=s-t.getBoundingClientRect().width+n.width,e.style.left=Math.ceil(s+1)+"px",e.style.top=Math.ceil(o+1)+"px"}},e.prototype.appendFilter=function(e){var t=this,i=!1;setTimeout((function(){sf.base.closest(e.target,"#"+t.key)&&(t.parent.element.querySelector(".e-filter-popup")||!t.parent.element.querySelector(".e-filter-popup"))||e.target.parentElement.id==t.key&&(t.parent.element.querySelector(".e-filter-popup")||!t.parent.element.querySelector(".e-filter-popup"))?i=!0:!sf.base.closest(e.target,"#"+t.key)&&t.parent.element.querySelector(".e-filter-popup")&&(i=!1),t.parent.dotNetRef.invokeMethodAsync("FilterMouseOverHandler",t.uid,i)}),10)},e.prototype.getHeaderCell=function(e){return sf.base.closest(e,"th.e-headercell")},e}(),M=function(){function e(e){this.parent=e}return e.prototype.filterPopupRender=function(e,t,i,n){var s=this.parent.element.querySelector("#"+e);if(!sf.base.isNullOrUndefined(s))if(n){sf.base.EventHandler.add(s,"mousedown",this.mouseDownHandler,this),s.style.maxHeight="excel"==i?"800px":"350px";var o=document.getElementsByClassName("e-"+this.parent.element.id+"-column-menu")[0].getElementsByTagName("ul")[0].querySelector(".e-icon-filter").parentElement,a=this.parent.element.querySelector(".e-filter-popup"),l=this.parent.element.getBoundingClientRect(),d=o.getBoundingClientRect(),h=d.left-l.left,c=d.top-l.top,p=s.style.display;s.style.display="block",l.height<c?c=c-a.offsetHeight+d.height:l.height<c+a.offsetHeight&&(c=l.height-a.offsetHeight),window.innerHeight<a.offsetHeight+c+l.top&&(c=window.innerHeight-a.offsetHeight-l.top),h+=this.parent.options.enableRtl?-a.offsetWidth:d.width,l.width<=h+a.offsetWidth?h-=d.width+a.offsetWidth:h<0&&(h+=a.offsetWidth+d.width),s.style.display=p,this.parent.dotNetRef.invokeMethodAsync("GetFilterIconPosition",h.toString(),c.toString())}else{var u=[].slice.call(this.parent.element.querySelector(".e-headercontent").querySelectorAll("div[e-mappinguid="+t+"]"))[1];s.style.maxHeight="excel"==i?"800px":"350px";p=s.style.display;s.style.display="block";var f=sf.popups.calculateRelativeBasedPosition(u,s);this.parent.options.enableColumnVirtualization&&this.parent.virtualContentModule.virtualEle.filterTranslateX&&!r(u,"e-frozenheader")&&(f.left+=this.parent.virtualContentModule.virtualEle.filterTranslateX),s.style.display=p;h=f.left-250+u.clientWidth;var m=f.top+u.getBoundingClientRect().height-5;h<1?h=250+h-16:h-=4;var g=this.parent.element.offsetWidth;if(g-h<250)h-=250-(g-h);this.parent.dotNetRef.invokeMethodAsync("GetFilterIconPosition",h.toString(),m.toString())}},e.prototype.mouseDownHandler=function(e){(e&&sf.base.closest(e.target,".e-filter-popup")||e.currentTarget&&e.currentTarget.activeElement&&r(e.currentTarget.activeElement,"e-filter-popup")||r(e.target,"e-popup")||r(e.target,"e-popup-wrapper"))&&!sf.base.Browser.isDevice&&this.parent.dotNetRef.invokeMethodAsync("PreventColumnMenuClose",!0)},e}(),L=function(){function e(e){this.parent=e}return e.prototype.createTooltip=function(e,t){for(var n,o={},r=function(){var i=a.parent.getContent();a.parent.options.frozenColumns&&(i=a.parent.getContent().querySelector(".e-movablecontent"));var r=e[l].fieldName,d=e[l].message;r=r.replace(/[.]/g,"___");var h=a.parent.element.querySelector("#"+r)||document.querySelector("#"+r);if(sf.base.isNullOrUndefined(h)){var c=a.parent.columnModel.filter((function(e){return e.field.split(r).length>1}));sf.base.isNullOrUndefined(c)||0==c.length||(r=c[0].field.replace(/[.]/g,"___"),h=a.parent.element.querySelector("#"+r)||document.querySelector("#"+r))}var p=i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth,u="Dialog"!==a.parent.options.editMode;if(!h)return{value:void 0};var f=sf.base.closest(h,".e-rowcell"),m=sf.base.closest(h,".e-row"),g=a.parent.getContent().querySelector(".e-frozencontent"),v=void 0,b=!1,y=Math.round(a.parent.getContent().clientHeight/a.parent.getRowHeight())-1,w=[].slice.call(a.parent.getContent().querySelectorAll(".e-row"));a.parent.options.enableVirtualization&&a.parent.options.allowGrouping&&a.parent.options.groupCount>0&&t&&(w=[].slice.call(a.parent.getContent().querySelectorAll("tr"))).pop(),"Batch"===a.parent.options.editMode&&y>1&&w.length>=y&&w[w.length-1].getAttribute("data-rowindex")===m.getAttribute("data-rowindex")&&(b=!0),u&&(a.parent.options.frozenRows,(y>1&&w.length>=y&&("Bottom"===a.parent.options.newRowPosition&&t||!sf.base.isNullOrUndefined(f)&&f.classList.contains("e-lastrowcell")&&!m.classList.contains("e-addedrow"))||b)&&(v=!0));var C=u?a.parent.getContentTable():document.querySelector("#"+a.parent.element.id+"_dialogEdit_wrapper").querySelector(".e-dlg-content"),S=C.getBoundingClientRect(),E=u?a.parent.element.getBoundingClientRect().left:S.left,x=sf.base.closest(h,"td"),O=x?x.getBoundingClientRect():h.parentElement.getBoundingClientRect(),T=a.parent.element.querySelector("#"+r+"_Error")||document.querySelector("#"+r+"_Error");T.style.top=O.bottom-S.top-(a.parent.options.frozenColumns?g.scrollTop:0)+C.scrollTop+9+"px",T.style.left=O.left-E+C.scrollLeft+O.width/2+"px",T.style.maxWidth=O.width-4+"px",u&&S.left<E&&(T.style.left=parseInt(T.style.left,10)-S.left+E+"px");var A=void 0;(A=v?T.querySelector(".e-tip-bottom"):T.querySelector(".e-tip-top"),(a.parent.options.frozenColumns||a.parent.options.frozenRows)&&"Dialog"!==a.parent.options.editMode)&&(("Normal"===a.parent.options.editMode?sf.base.closest(h,".e-editcell"):sf.base.closest(h,".e-table")).style.position="relative",T.style.position="absolute");T.style.display="block",T.querySelector(".e-error").innerText=d,!v&&u&&i.getBoundingClientRect().bottom<O.bottom+O.height&&(i.scrollTop=i.scrollTop+T.offsetHeight+A.scrollHeight);var N=parseInt(document.defaultView.getComputedStyle(T,null).getPropertyValue("font-size"),10);if(T.getBoundingClientRect().width<O.width&&T.querySelector("label").getBoundingClientRect().height/(1.2*N)>=2&&(T.style.width=T.style.maxWidth),!a.parent.options.frozenColumns&&!a.parent.options.frozenRows||"Normal"!==a.parent.options.editMode&&"Batch"!==a.parent.options.editMode?T.style.left=parseInt(T.style.left,10)-T.offsetWidth/2+"px":T.style.left=x.offsetLeft+(x.offsetWidth/2-T.offsetWidth/2)+"px",u&&!p&&!a.parent.options.allowPaging||a.parent.options.frozenColumns||a.parent.options.frozenRows){i.style.position="static";var k=sf.popups.calculateRelativeBasedPosition(x,T);T.style.top=k.top+O.height+9+"px"}if(v){if(!p||a.parent.options.frozenColumns||"auto"===a.parent.options.height||a.parent.options.frozenRows||a.parent.options.enableVirtualization)T.style.bottom=O.height+9+"px";else{var I=i.scrollWidth>i.offsetWidth?s():0;T.style.bottom=parseInt(a.parent.options.height)-i.querySelector("table").offsetHeight-I+O.height+9+"px"}T.style.top=null}n=v?"bottom":"top",o[r]="top: "+T.style.top+"; bottom: "+T.style.bottom+"; left: "+T.style.left+"; \n            max-width: "+T.style.maxWidth+"; width: "+T.style.width+"; text-align: center; position: "+T.style.position+";"},a=this,l=0;l<e.length;l++){var d=r();if("object"===i(d))return d.value}this.parent.dotNetRef.invokeMethodAsync("ShowValidationPopup",o,n)},e}(),B=function(){function e(e){this.copyContent="",this.isSelect=!1,this.parent=e,this.clipBoardTextArea=sf.base.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard","aria-hidden":"true"}}),this.parent.element.appendChild(this.clipBoardTextArea)}return e.prototype.pasteHandler=function(){var e=this,t=this.parent;if(sf.base.closest(document.activeElement,".e-rowcell")&&t.options.allowEditing&&"Batch"===t.options.editMode&&"Cell"===t.options.selectionMode&&"Flow"!==t.options.cellSelectionMode){this.activeElement=document.activeElement,this.clipBoardTextArea.value="";var i=window.scrollX,n=window.scrollY;this.clipBoardTextArea.focus(),setTimeout((function(){e.activeElement.focus(),window.scrollTo(i,n),e.paste(e.clipBoardTextArea.value,e.getSelectedRowCellIndexes()[0].rowIndex,e.getSelectedRowCellIndexes()[0].cellIndexes[0])}),10)}},e.prototype.paste=function(e,t,i){var n,s,o,r=this.parent,a=i,l=t;if(r.options.allowEditing&&"Batch"===r.options.editMode&&"Cell"===r.options.selectionMode&&"Flow"!==r.options.cellSelectionMode){var d,h,c=e.split("\n"),p=r.getDataRows(),u=this.parent.options.frozenColumns;u&&(h=r.getMovableDataRows());for(var f=0;f<c.length;f++){if(d=c[f].split("\t"),a=i,f===c.length-1&&""===c[f]||sf.base.isUndefined(r.getRowByIndex(l))){a++;break}for(var m=0;m<d.length;m++){if(o=r.getCellFromIndex(l,a),u){var g=p[l],v=h[l];o=!!g.querySelector('[data-colindex="'+a+'"]')||v.querySelector('[data-colindex="'+a+'"]')}if(!o){a++;break}n=r.getColumnByIndex(a),s=d[m],!n.allowEditing||n.isPrimaryKey||n.template||r.editModule&&r.dotNetRef.invokeMethodAsync("UpdateCell",l,n.field,s),a++}l++}var b=this.parent.getCellFromIndex(l-1,a-1);b&&sf.base.classList(b,["e-focus","e-focused"],[])}},e.prototype.setCopyData=function(e){if(""===window.getSelection().toString()){var t=this.parent.options.frozenColumns;this.clipBoardTextArea.value=this.copyContent="";var i=void 0,n=this.parent.getRows();if(t&&(i=this.parent.getMovableDataRows()),"Cell"!==this.parent.options.selectionMode){var s=this.parent.getSelectedRowIndexes();if(e){for(var o=[],r=0;r<this.parent.getVisibleColumns().length;r++)o[r]=this.parent.getVisibleColumns()[r].headerText;this.getCopyData(o,!1,"\t",e),this.copyContent+="\n"}for(r=0;r<s.length;r++){r>0&&(this.copyContent+="\n");var a=[].slice.call(n[s[r]].querySelectorAll(".e-rowcell:not(.e-hide)"));t&&a.push.apply(a,[].slice.call(i[s[r]].querySelectorAll(".e-rowcell:not(.e-hide)"))),this.getCopyData(a,!1,"\t",e)}}else{var l=this.checkBoxSelection();if(l.status){if(e){var d=[];for(r=0;r<l.colIndexes.length;r++)d.push(this.parent.getColumnHeaderByIndex(l.colIndexes[r]));this.getCopyData(d,!1,"\t",e),this.copyContent+="\n"}for(r=0;r<l.rowIndexes.length;r++){r>0&&(this.copyContent+="\n");a=[].slice.call(n[l.rowIndexes[r]].querySelectorAll(".e-cellselectionbackground"));t&&a.push.apply(a,[].slice.call(i[l.rowIndexes[r]].querySelectorAll(".e-cellselectionbackground"))),this.getCopyData(a,!1,"\t",e)}}else this.getCopyData([].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),!0,"\n",e)}this.clipBoardTextArea.value=this.copyContent,sf.base.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},e.prototype.getCopyData=function(e,t,i,n){for(var s="string"!=typeof e[0],o=0;o<e.length;o++)n&&t&&(this.copyContent+=this.parent.getColumns()[parseInt(e[o].getAttribute("data-colindex"),10)].headerText+"\n"),s?e[o].classList.contains("e-hide")||(!e[o].classList.contains("e-gridchkbox")&&Object.keys(e[o].querySelectorAll(".e-check")).length?this.copyContent+=!0:!e[o].classList.contains("e-gridchkbox")&&Object.keys(e[o].querySelectorAll(".e-uncheck")).length?this.copyContent+=!1:this.copyContent+=e[o].innerText):this.copyContent+=e[o],o<e.length-1&&(this.copyContent+=i)},e.prototype.copy=function(e){if(document.queryCommandSupported("copy")){var t=document.activeElement;this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur(),t.focus()}this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},e.prototype.getSelectedRowCellIndexes=function(){var e,t=this.parent,i=[],n=t.getRows();t.options.frozenColumns&&(e=t.getMovableDataRows());for(var s=function(s){var o=n[s].querySelectorAll(".e-cellselectionbackground");if(t.options.frozenColumns&&!o.length&&(o=e[s].querySelectorAll(".e-cellselectionbackground")),o.length){var r=[];o.forEach((function(e){r.push(parseInt(e.getAttribute("data-colindex")))})),i.push({rowIndex:s,cellIndexes:r})}},o=0;o<n.length;o++)s(o);return i},e.prototype.checkBoxSelection=function(){var e,t={status:!1};if("Cell"===this.parent.options.selectionMode){e=this.getSelectedRowCellIndexes();var i=void 0,n=[],s=void 0;for(s=0;s<e.length&&(e[s].cellIndexes.length&&n.push(e[s].rowIndex),!e[s].cellIndexes.length||(i||(i=JSON.stringify(e[s].cellIndexes.sort())),i===JSON.stringify(e[s].cellIndexes.sort())));s++);n.sort((function(e,t){return e-t})),s===e.length&&n[n.length-1]-n[0]==n.length-1&&(t={status:!0,rowIndexes:n,colIndexes:e[0].cellIndexes})}return t},e}(),D=function(){function e(e){this.parent=e,this.wireEvents()}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getContent(),"scroll",this.scrollHandler,this),sf.base.EventHandler.add(this.parent.element,"mousemove",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.parent.element,"mouseout",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.parent.element,"keydown",this.onKeyPressed,this)},e.prototype.unWireevents=function(){sf.base.EventHandler.remove(this.parent.getContent(),"scroll",this.scrollHandler),sf.base.EventHandler.remove(this.parent.element,"mousemove",this.mouseMoveHandler),sf.base.EventHandler.remove(this.parent.element,"mouseout",this.mouseMoveHandler),sf.base.EventHandler.remove(this.parent.element,"keydown",this.onKeyPressed)},e.prototype.open=function(e){this.close(),this.ctrlId=sf.base.getUniqueID(this.parent.element.getAttribute("id")),sf.base.isNullOrUndefined(this.toolTipElement)&&(this.toolTipElement=sf.base.createElement("div",{className:"e-tooltip-wrap e-popup e-lib e-control e-popup-open",styles:'width: "auto", height: "auto", position: "absolute"',attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"}})),sf.base.attributes(e,{"aria-describedby":this.ctrlId+"_content","data-tooltip-id":this.ctrlId+"_content"}),this.renderToolTip(),this.setPosition(e)},e.prototype.renderToolTip=function(){var e=sf.base.createElement("div",{className:"e-tip-content"});e.innerHTML=this.content,this.toolTipElement.appendChild(e);var t=sf.base.createElement("div",{className:"e-arrow-tip e-tip-bottom",styles:"top: 99.9%"});t.appendChild(sf.base.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),t.appendChild(sf.base.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom",styles:"top: -6px"})),this.toolTipElement.appendChild(t),document.body.appendChild(this.toolTipElement)},e.prototype.setPosition=function(e){var t={top:0,left:0},i=this.toolTipElement.querySelector(".e-arrow-tip"),n=sf.popups.calculatePosition(e,"Center","Top");t.top-=this.toolTipElement.offsetHeight+i.offsetHeight,t.left-=this.toolTipElement.offsetWidth/2,this.toolTipElement.style.top=n.top+t.top+"px",this.toolTipElement.style.left=n.left+t.left+"px"},e.prototype.close=function(){if(this.toolTipElement){var e=this.parent.element.querySelector('[aria-describedby="'+this.ctrlId+'_content"]');sf.base.isNullOrUndefined(e)?sf.base.isNullOrUndefined(this.parent.element.querySelector("form"))||(document.getElementById(this.ctrlId+"_content").remove(),this.toolTipElement=null):(e.removeAttribute("aria-describedby"),e.removeAttribute("data-tooltip-id"),document.getElementById(this.ctrlId+"_content").remove(),this.toolTipElement=null)}},e.prototype.getTooltipStatus=function(e){var t,i=this.parent.getHeaderTable(),n=this.parent.getContentTable(),s=this.createTable(i,"e-gridheader","header"),o=this.createTable(n,"e-gridcontent","content"),r=e.classList.contains("e-headercell")?s:o,a=e.classList.contains("e-headercell")?"th":"tr";return r.querySelector(a).className=e.className,r.querySelector(a).innerHTML=e.innerHTML,t=r.querySelector(a).getBoundingClientRect().width,document.body.removeChild(s),document.body.removeChild(o),t>e.getBoundingClientRect().width},e.prototype.mouseMoveHandler=function(e){if(this.isEllipsisTooltip()){if(this.parent.options.allowTextWrap){var t=this.parent.options.wrapMode;if("Header"==t&&r(e.target,"e-gridheader")||"Content"==t&&r(e.target,"e-gridcontent")||"Both"==t)return}var i=r(e.target,"e-ellipsistooltip");this.prevElement===i&&"mouseout"!==e.type||this.close();var n=e.target.tagName;if(i&&"mouseout"!==e.type&&(!sf.base.Browser.isDevice||-1===["A","BUTTON","INPUT"].indexOf(n))){if(i.getAttribute("aria-describedby"))return;this.getTooltipStatus(i)&&(i.getElementsByClassName("e-headertext").length?this.content=i.getElementsByClassName("e-headertext")[0].innerText:this.content=i.innerText,this.prevElement=i,this.open(i))}}this.hoverFrozenRows(e)},e.prototype.hoverFrozenRows=function(e){if(this.parent.options.frozenColumns){var t=r(e.target,"e-row"),i=[].slice.call(this.parent.element.querySelectorAll(".e-frozenhover"));if(i.length&&"mouseout"===e.type)for(var n=0;n<i.length;n++)i[n].classList.remove("e-frozenhover");else if(t){var s=[].slice.call(this.parent.element.querySelectorAll('tr[data-rowindex="'+t.getAttribute("data-rowindex")+'"]'));if(s.splice(s.indexOf(t),1),"true"!=t.getAttribute("aria-selected"))for(n=0;n<s.length;n++)s[n].classList.add("e-frozenhover");else for(n=0;n<s.length;n++)s[n].classList.remove("e-frozenhover")}}},e.prototype.isEllipsisTooltip=function(){var e=this.parent.getColumns();if("EllipsisWithTooltip"===this.parent.options.clipMode)return!0;for(var t=0;t<e.length;t++)if("EllipsisWithTooltip"===e[t].clipMode)return!0;return!1},e.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.close()},e.prototype.createTable=function(e,t,i){var n=sf.base.createElement("div");n.className=this.parent.element.className,n.style.cssText="display: inline-block;visibility:hidden;position:absolute";var s=sf.base.createElement("div");s.className=t;var o=sf.base.createElement("table");o.className=e.className,o.style.cssText="table-layout: auto;width: auto";var r="header"===i?"th":"td",a=sf.base.createElement("tr"),l=sf.base.createElement(r);return a.appendChild(l),o.appendChild(a),s.appendChild(o),n.appendChild(s),document.body.appendChild(n),n},e.prototype.onKeyPressed=function(e){"Tab"!==e.key&&"ShiftTab"!==e.key||this.close()},e.prototype.destroy=function(){this.close(),this.unWireevents()},e}(),P=function(){function e(e){var t=this;this.isOverflowBorder=!0,this.helper=function(e){var i=t.parent,n=t.draggable.currentStateTarget;e.sender.target.classList.contains("e-input")||"INPUT"==e.sender.target.tagName||"TEXTAREA"==e.sender.target.tagName||e.sender.target.blur();var s=sf.base.createElement("div",{className:"e-cloneproperties e-draganddrop e-grid e-dragclone",styles:'height:"auto", z-index:2, width:'+i.element.offsetWidth}),o=sf.base.createElement("table",{styles:"width:"+i.element.offsetWidth}),a=sf.base.createElement("tbody");if(document.getElementsByClassName("e-griddragarea").length||i.options.rowDropTarget&&!e.sender.target.classList.contains("e-selectionbackground")&&"Single"!==i.options.selectionType||!i.options.rowDropTarget&&!r(e.sender.target,"e-rowdragdrop")||i.options.rowDropTarget&&"Single"===i.options.selectionType&&null===t.draggable.currentStateTarget.parentElement.getAttribute("data-rowindex"))return!1;i.options.rowDropTarget&&"Row"===i.options.selectionMode&&"Single"===i.options.selectionType&&null!==t.draggable.currentStateTarget.parentElement.getAttribute("data-rowindex")&&i.dotNetRef.invokeMethodAsync("SelectRow",parseInt(t.draggable.currentStateTarget.parentElement.getAttribute("data-rowindex"),10)),t.startedRow=sf.base.closest(n,"tr").cloneNode(!0);var l=i.getSelectedRows();u(t.startedRow,".e-indentcell"),u(t.startedRow,".e-detailrowcollapse"),u(t.startedRow,".e-detailrowexpand"),t.removeCell(t.startedRow,"e-gridchkbox");var d=new RegExp("e-active","g");if(t.startedRow.innerHTML=t.startedRow.innerHTML.replace(d,""),a.appendChild(t.startedRow),i.getSelectedRows().length>1&&t.startedRow.hasAttribute("aria-selected")){var h=sf.base.createElement("span",{className:"e-dropitemscount",innerHTML:""+l.length});s.appendChild(h)}var c=sf.base.closest(n,"tr").querySelector(".e-icon-rowdragicon");return c&&c.classList.add("e-dragstartrow"),o.appendChild(a),s.appendChild(o),i.element.appendChild(s),s},this.dragStart=function(e){var i=t.parent;if(document.body.classList.add("e-prevent-select"),!document.getElementsByClassName("e-griddragarea").length){var n=t.parent.element.querySelector(".e-dropitemscount");t.parent.getSelectedRows().length>1&&n&&(n.style.left=t.parent.element.querySelector(".e-cloneproperties table").offsetWidth-5+"px");var s=parseInt(t.startedRow.getAttribute("data-rowindex"),10);t.parent.dotNetRef.invokeMethodAsync("RowDragStartEvent",s),e.bindEvents(e.dragElement),t.dragStartData=t.rowData;var o=document.getElementById(i.options.rowDropTarget);i.options.rowDropTarget&&o&&o.blazor__instance&&"function"==typeof o.blazor__instance.getModuleName&&"grid"===o.blazor__instance.getModuleName()&&o.blazor__instance.getContent().classList.add("e-allowRowDrop")}},this.drag=function(e){var i=t.parent,n=t.parent.element.querySelector(".e-cloneproperties"),s=t.getElementFromPosition(n,e.event);sf.base.classList(n,["e-defaultcur"],["e-notallowedcur","e-movecur"]),t.isOverflowBorder=!0;var o=r(s,"e-grid")?sf.base.closest(e.target,"tr"):null;if(e.target){if(t.stopTimer(),i.element.classList.add("e-rowdrag"),t.dragTarget=o&&r(s,"e-grid").id===n.parentElement.id?o.rowIndex:parseInt(t.startedRow.getAttribute("data-rowindex"),10),i.options.rowDropTarget)r(s,"e-gridcontent")?r(n.parentElement,"e-grid").id===r(s,"e-grid").id?sf.base.classList(n,["e-notallowedcur"],["e-defaultcur"]):sf.base.classList(n,["e-defaultcur"],["e-notallowedcur"]):r(s,"e-droppable")?sf.base.classList(n,["e-defaultcur"],["e-notallowedcur"]):sf.base.classList(n,["e-notallowedcur"],["e-defaultcur"]);else{var a=r(s,"e-grid");a&&a.id===n.parentElement.id?sf.base.classList(n,["e-movecur"],["e-defaultcur"]):sf.base.classList(n,["e-notallowedcur"],["e-movecur"])}if(!i.options.rowDropTarget&&(!i.options.groupCount||e.target.classList.contains("e-selectionbackground")))if(r(s,"e-grid")&&t.updateScrollPostion(e.event,s),t.isOverflowBorder&&parseInt(t.startedRow.getAttribute("data-rowindex"),10)!==t.dragTarget)t.moveDragRows(e,t.startedRow,o);else{if(o&&t.parent.getRowByIndex(t.parent.getRows().length-1).getAttribute("data-uid")===o.getAttribute("data-uid")){var l=sf.base.createElement("div",{className:"e-lastrow-dragborder"}),d=t.parent.getContent();l.style.width=t.parent.element.offsetWidth-t.getScrollWidth()+"px",d.querySelectorAll(".e-lastrow-dragborder").length||(d.classList.add("e-grid-relative"),d.appendChild(l),l.style.bottom=t.getScrollWidth()+"px")}t.removeBorder(o)}}},this.dragStop=function(e){document.body.classList.remove("e-prevent-select"),c(t.parent.element)||t.processDragStop(e)},this.processDragStop=function(e){var i=t.parent,n=t.getElementFromPosition(e.helper,e.event),s=n&&!n.classList.contains("e-dlg-overlay")?n:e.target;i.element.classList.remove("e-rowdrag");var o=document.getElementById(i.options.rowDropTarget);if(t.parent.options.allowRowDragAndDrop&&t.parent.options.rowDropTarget&&!r(s,"e-grid")){var a=t.getElementXPath(s),l=s.id,d=parseInt(t.startedRow.getAttribute("data-rowindex"),10),h=s.getBoundingClientRect();i.dotNetRef.invokeMethodAsync("ReorderRows",d,0,"add",!1,a,l,h,null,!0)}if(i.options.rowDropTarget&&o&&o.blazor__instance&&"function"==typeof o.blazor__instance.getModuleName&&"grid"===o.blazor__instance.getModuleName()&&o.blazor__instance.getContent().classList.remove("e-allowRowDrop"),!r(s,"e-gridcontent"))return t.dragTarget=null,void sf.base.remove(e.helper);if(t.parent.options.allowRowDragAndDrop&&!t.parent.options.rowDropTarget){t.stopTimer(),t.parent.getContent().classList.remove("e-grid-relative"),t.removeBorder(n);var c=i.element.querySelector(".e-dragstartrow");c&&c.classList.remove("e-dragstartrow");var p=t.dragTarget,u=t.getElementXPath(e.target),f=s.id,m=parseInt(t.startedRow.getAttribute("data-rowindex"),10);setTimeout((function(){i.dotNetRef.invokeMethodAsync("ReorderRows",m,p,"delete",!0,u,f,null,null,!1)}),10),t.dragTarget=null}},this.removeCell=function(e,t){return[].slice.call(e.querySelectorAll("td")).filter((function(i){i.classList.contains(t)&&e.deleteCell(i.cellIndex)}))},this.drop=function(e){t.columnDrop({target:e.target,droppedElement:e.droppedElement}),sf.base.remove(e.droppedElement)},this.parent=e,this.parent.options.allowRowDragAndDrop&&this.initializeDrag()}return e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.initializeDrag=function(){var e=this.parent;this.draggable=new sf.base.Draggable(e.getContent(),{dragTarget:".e-rowcelldrag, .e-rowdragdrop, .e-rowcell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,isPreventSelect:!1}),this.droppable=new sf.base.Droppable(e.getContent(),{accept:".e-dragclone",drop:this.drop})},e.prototype.updateScrollPostion=function(e,t){var i=this,n=this.parent.options.frozenColumns,s=d(e).y,o=this.parent.getContent().getBoundingClientRect(),r=this.parent.getRowHeight()-15,a=n?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent();if(o.top+r>=s){var l=-this.parent.getRowHeight();this.isOverflowBorder=!1,this.timer=window.setInterval((function(){i.setScrollDown(a,l,!0)}),200)}else if(o.top+this.parent.getContent().clientHeight-r-20<=s){var h=this.parent.getRowHeight();this.isOverflowBorder=!1,this.timer=window.setInterval((function(){i.setScrollDown(a,h,!0)}),200)}},e.prototype.setScrollDown=function(e,t,i){e.scrollTop=e.scrollTop+t},e.prototype.moveDragRows=function(e,t,i){var n=this.parent.element.querySelector(".e-cloneproperties"),s=sf.base.closest(e.target,"tr");if(r(s,"e-gridcontent")&&r(n.parentElement,"e-grid").id===r(s,"e-grid").id){var o=s||this.startedRow;this.setBorder(o,e.event,t,i)}},e.prototype.setBorder=function(e,t,i,n){var s=this.parent.element,o=this.parent.element.querySelector(".e-cloneproperties");if(this.removeFirstRowBorder(e),this.removeLastRowBorder(e),r(e,"e-gridcontent")&&r(o.parentElement,"e-grid").id===r(e,"e-grid").id){sf.base.removeClass(s.querySelectorAll(".e-rowcell,.e-rowdragdrop"),["e-dragborder"]);var a=[];if(n&&0===n.rowIndex){var l=sf.base.createElement("div",{className:"e-firstrow-dragborder"}),d=this.parent.getHeaderContent();d.classList.add("e-grid-relative"),l.style.width=s.offsetWidth-this.getScrollWidth()+"px",d.querySelectorAll(".e-firstrow-dragborder").length||d.appendChild(l)}else n&&parseInt(i.getAttribute("data-rowindex"),10)>n.rowIndex?(e=this.parent.getRowByIndex(n.rowIndex-1),a=[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))):a=[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"));a.length>0&&f(a,!0,"e-dragborder")}},e.prototype.getScrollWidth=function(){var e=this.parent.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?s():0},e.prototype.removeFirstRowBorder=function(e){this.parent.element.getElementsByClassName("e-firstrow-dragborder").length>0&&e&&0!==e.rowIndex&&this.parent.element.getElementsByClassName("e-firstrow-dragborder")[0].remove()},e.prototype.removeLastRowBorder=function(e){var t=e&&this.parent.getRowByIndex(this.parent.getRows().length-1).getAttribute("data-uid")!==e.getAttribute("data-uid");this.parent.element.getElementsByClassName("e-lastrow-dragborder").length>0&&e&&t&&this.parent.element.getElementsByClassName("e-lastrow-dragborder")[0].remove()},e.prototype.removeBorder=function(e){(this.removeFirstRowBorder(e),this.removeLastRowBorder(e),e=this.parent.getRows().filter((function(e){return e.querySelector("td.e-dragborder")}))[0])&&f([].slice.call(e.querySelectorAll(".e-dragborder")),!1,"e-dragborder")},e.prototype.getElementFromPosition=function(e,t){var i,n=d(t);return e.style.display="none",i=document.elementFromPoint(n.x,n.y),e.style.display="",i},e.prototype.getElementXPath=function(e){if(!e)return null;if(e.id)return"//[@id="+e.id+"]"+(""!=e.className?"."+e.className.toLowerCase():"");if("BODY"===e.tagName)return"/html/body";var t=[].slice.call(e.parentElement.childNodes).filter((function(t){return t.nodeName===e.nodeName})),i=t.indexOf(e);return this.getElementXPath(e.parentNode)+"/"+e.tagName.toLowerCase()+(""!=e.className?"."+e.className.toLowerCase():"")+(t.length>1?"["+(i+1)+"]":"")},e.prototype.getTargetIdx=function(e){return e?parseInt(e.getAttribute("data-rowindex"),10):0},e.prototype.columnDrop=function(e){var t=this.parent;if("grouping"!==e.droppedElement.getAttribute("action")){var i=sf.base.closest(e.target,"tr"),n=void 0;if("true"!==e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.id===t.element.id||"true"===e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.id!==t.element.id)return;if(e.droppedElement.parentElement.id!==t.element.id&&(n=e.droppedElement.parentElement.blazor__instance),n.element.id!==t.element.id&&n.options.rowDropTarget!==t.element.id)return;var s=this.getTargetIdx(i);isNaN(s)&&(s=0),t.options.allowPaging&&(s=s+t.options.currentPage*t.options.pageSize-t.options.pageSize);var o=this.getElementXPath(e.target),r=e.target.id,a=e.target.getBoundingClientRect();t.dotNetRef.invokeMethodAsync("ReorderRows",0,s,"add",!1,o,r,a,n.dotNetRef,!1),n.dotNetRef.invokeMethodAsync("ReorderRows",0,s,"delete",!1,o,r,a,null,!1)}},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(sf.base.isNullOrUndefined(this.draggable)||this.draggable.destroy(),sf.base.isNullOrUndefined(this.droppable)||this.droppable.destroy())},e}(),R=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){sf.base.EventHandler.add(this.parent.getContent().parentElement,"mousedown",this.mouseDownHandler,this),this.parent.options.allowDragSelection&&sf.base.EventHandler.add(this.parent.getContent().parentElement,"touchstart",this.mouseDownHandler,this)},e.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.parent.getContent().parentElement,"mousedown",this.mouseDownHandler),this.parent.options.allowDragSelection&&sf.base.EventHandler.remove(this.parent.getContent().parentElement,"touchstart",this.mouseDownHandler)},e.prototype.mouseDownHandler=function(e){var t,i=e.target,n=this.parent,s=r(i,"e-grid");if(!(s&&s.id!==n.element.id||r(i,"e-headercontent")&&!this.parent.options.frozenRows)){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),r(i,"e-rowcell")&&!e.shiftKey&&!e.ctrlKey){if(!(n.options.cellSelectionMode.indexOf("Box")>-1||(n.options.allowDragSelection&&!n.options.enableAutoFill&&n.options.cellSelectionMode.indexOf("Flow"))>-1)||this.isRowType()||this.isSingleSel()?this.isCellDrag=!1:(this.isCellDrag=!0,t=!0),(n.options.allowRowDragAndDrop||n.options.allowDragSelection&&!n.options.enableAutoFill)&&!n.options.isEdit){if(!n.options.allowDragSelection&&(!this.isRowType()||sf.base.closest(i,"td").classList.contains("e-selectionbackground"))||this.isSingleSel())return n.options.allowDragSelection&&document.body.classList.add("e-disableuserselect"),void(this.isDragged=!1);t=!0,this.element=sf.base.createElement("div",{className:"e-griddragarea"}),this.element.style.left="0px",this.element.style.top="0px",n.getContent().appendChild(this.element)}t&&(this.isAutoFillSel=!1,this.enableDrag(e,!0))}this.updateStartEndCells(),(i.classList.contains("e-autofill")||i.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e),document.body.style.cursor="crosshair")}},e.prototype.mouseUpHandler=function(e){if(document.body.classList.remove("e-disableuserselect"),this.element&&sf.base.remove(this.element),this.isCellDrag||sf.base.isNullOrUndefined(this.prevStartDIndex)&&sf.base.isNullOrUndefined(this.prevEndIndex)?!this.parent.options.allowDragSelection||this.parent.options.enableAutoFill||!this.isDragged||this.isAutoFillSel||sf.base.isNullOrUndefined(this.startDragIndex)&&sf.base.isNullOrUndefined(this.endDragIndex)&&sf.base.isNullOrUndefined(this.endDragCellIndex)||(this.isDragged=!1,this.parent.dotNetRef.invokeMethodAsync("DragCellSelection",this.startDragIndex,this.startDragCellIndex,this.endDragIndex,this.endDragCellIndex,!1)):this.parent.dotNetRef.invokeMethodAsync("DragSelection",this.prevStartDIndex,this.prevEndIndex,!1),this.isDragged=!1,document.body.style.cursor="default",this.prevStartDIndex=void 0,this.prevEndIndex=void 0,this.startDragIndex=void 0,this.startDragCellIndex=void 0,this.endDragIndex=void 0,this.endDragCellIndex=void 0,"Batch"==this.parent.options.editMode&&this.parent.options.enableAutoFill&&0===this.parent.options.frozenColumns&&0===this.parent.options.frozenRows){if(!sf.base.isNullOrUndefined(this.endRowIndex)&&!sf.base.isNullOrUndefined(this.endColIndex)&&!this.isAutoFillSel&&this.isInitialSelect){this.parent.dotNetRef.invokeMethodAsync("ClearSelection");var t=this.updateAutofillPosition(this.endColIndex,this.endRowIndex,!0);this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",t,"UpdateAutofillBox"),this.assignCells(),this.selectCellByRow(),this.isInitialSelect=!1}if(this.isAutoFillSel){var i=this;this.assignCells(),setTimeout((function(){i.selectCellByRow()}),10),this.expandAFBorder(e,!0);var n=this.createBorder(this.startRowIndex,this.startColIndex,this.endRowIndex,this.endColIndex,!0);this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",n,"UpdateAutofillBorder");t=this.updateAutofillPosition(this.endColIndex,this.endRowIndex,!0);this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",t,"UpdateAutofillBox")}}sf.base.EventHandler.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.options.allowDragSelection&&sf.base.EventHandler.remove(this.parent.getContent(),"touchmove",this.mouseMoveHandler),this.parent.options.frozenRows&&(sf.base.EventHandler.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),this.parent.options.allowDragSelection&&sf.base.EventHandler.remove(this.parent.getHeaderContent(),"touchmove",this.mouseMoveHandler)),sf.base.EventHandler.remove(document.body,"mouseup",this.mouseUpHandler),this.parent.options.allowDragSelection&&sf.base.EventHandler.remove(document.body,"touchend",this.mouseUpHandler)},e.prototype.enableDrag=function(e,t){var i=this.parent;if(t){var n=sf.base.closest(e.target,"tr");this.startDragIndex=parseInt(n.getAttribute("data-rowindex"),10),this.startDragCellIndex=parseInt(r(e.target,"e-rowcell").getAttribute("data-colindex"),10)}document.body.classList.add("e-disableuserselect");var s=i.element.getBoundingClientRect(),o=d(e);this.x=o.x-s.left,this.y=o.y-s.top,sf.base.EventHandler.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.options.allowDragSelection&&sf.base.EventHandler.add(i.getContent(),"touchmove",this.mouseMoveHandler,this),this.parent.options.frozenRows&&(sf.base.EventHandler.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),this.parent.options.allowDragSelection&&sf.base.EventHandler.add(i.getHeaderContent(),"touchmove",this.mouseMoveHandler,this)),sf.base.EventHandler.add(document.body,"mouseup",this.mouseUpHandler,this),this.parent.options.allowDragSelection&&sf.base.EventHandler.add(document.body,"touchend",this.mouseUpHandler,this)},e.prototype.mouseMoveHandler=function(e){e.preventDefault();var t,i,n=this.parent.element.getBoundingClientRect(),s=this.x,o=this.y,a=d(e),l=a.x-n.left,h=a.y-n.top,c="touchmove"==e.type?e.touches[0].pageX:e.pageX,p="touchmove"==e.type?e.touches[0].pageY:e.pageY,u=p+2;if(i=sf.base.isNullOrUndefined(e.touches)||sf.base.isNullOrUndefined(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY))?sf.base.closest(e.target,"tr"):sf.base.closest(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY),"tr"),this.isDragged=!0,!this.isCellDrag||this.parent.options.allowDragSelection&&!this.parent.options.enableAutoFill&&this.isCellDrag){i||(i=sf.base.closest(document.elementFromPoint(this.parent.element.offsetLeft+2,sf.base.isNullOrUndefined(e.touches)?e.clientY:e.touches[0].clientY),"tr")),s>l&&(t=l,l=s,s=t),o>h&&(t=h,h=o,o=t,u=p-2);for(var f=[".e-gridheader",".e-groupdroparea",".e-toolbar"],m=0,g=0;g<f.length;g++){var v=this.parent.element.querySelector(f[g]);v&&(m+=v.offsetHeight)}var b=this.parent.element.querySelector(".e-yscroll"),y=0;b&&(y+=b.scrollTop),this.element.style.left=s+"px",this.element.style.top=o-m+y+"px",this.element.style.width=l-s+"px",this.element.style.height=h-o+"px"}if(i&&!e.ctrlKey&&!e.shiftKey){var w=parseInt(i.getAttribute("data-rowindex"),10);if(this.isCellDrag||!sf.base.isNullOrUndefined(this.prevStartDIndex)&&this.prevStartDIndex==this.startDragIndex&&this.prevEndIndex==w){if(this.parent.options.allowDragSelection&&!this.parent.options.enableAutoFill&&this.isCellDrag){var C;O=!1;(C=sf.base.isNullOrUndefined(e.touches)||sf.base.isNullOrUndefined(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY))?sf.base.closest(e.target,"td"):sf.base.closest(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY),"td"))||(C=document.elementFromPoint(c,u)),C&&(sf.base.isNullOrUndefined(this.prevStartDIndex)&&(O=!0),this.prevStartDIndex=this.startDragIndex,this.endDragIndex=w,this.endDragCellIndex=parseInt(C.getAttribute("data-colindex"),10),this.isAutoFillSel||(O?this.parent.dotNetRef.invokeMethodAsync("DragCellSelection",this.startDragIndex,this.startDragCellIndex,w,parseInt(C.getAttribute("data-colindex"),10),!0):this.performDragCellSelection(this.startDragIndex,this.startDragCellIndex,w,parseInt(C.getAttribute("data-colindex"),10))))}else if("Batch"==this.parent.options.editMode&&this.parent.options.enableAutoFill&&this.startCell){var S=r(e.target,"e-rowcell");if(S&&!S.classList.contains("e-editedbatchcell"))if(this.startAFCell=this.startCell,this.endAFCell=S,this.endCell=S,this.isAutoFillSel)this.expandAFBorder(e,!1);else{this.assignCells();var E=this.createBorder(this.startRowIndex,this.startColIndex,this.endRowIndex,this.endColIndex,!0);this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",E,"UpdateAutofillBorder"),this.isInitialSelect=!0}}}else{var x=-1,O=!1,T=this.parent.getSelectedRowIndexes();sf.base.isNullOrUndefined(this.prevStartDIndex)?(x=-1,O=!0):(w>=this.prevStartDIndex&&T.indexOf(w)>=0||this.prevStartDIndex>w&&T.indexOf(this.startDragIndex)>=0)&&(x=this.prevEndIndex),this.prevStartDIndex=this.startDragIndex,this.prevEndIndex=w,O?this.parent.dotNetRef.invokeMethodAsync("DragSelection",this.startDragIndex,w,!0):this.performDragSelection(this.startDragIndex,w,x)}}},e.prototype.performDragCellSelection=function(e,t,i,n){var s=e,o=i;e>i&&(s=i,o=e),this.selectCellsByRange(s,o,t,n)},e.prototype.selectCellsByRange=function(e,t,i,n){for(var s,o,r=this.parent.getRows(),a=0;a<r.length;a++){var l=r[a],d=[].slice.call(l.querySelectorAll(".e-rowcell"));l.removeAttribute("aria-selected"),f.apply(void 0,[d,!1].concat(["e-aria-selected","e-active"]))}var h=[];if(e>t){var c=e;e=t,t=c}if(i>n){var p=i;i=n,n=p}for(a=e;a<=t;a++){this.parent.options.cellSelectionMode.indexOf("Box")<0?(s=a===e?i:0,o=a===t?n:this.getLastColIndex(a)):(s=i,o=n);for(var u=s<o?s:o,m=s>o?s:o;u<=m;u++)h.push(r[a].querySelectorAll(".e-rowcell")[u]);f.apply(void 0,[h,!0].concat(["e-aria-selected","e-active"]))}},e.prototype.getLastColIndex=function(e){var t=this.parent.options.frozenColumns?this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute("data-colindex"),10)},e.prototype.updateAutofillPosition=function(e,t,i){void 0===i&&(i=!1);var n=this.parent.getRowByIndex(t).querySelector('[data-colindex="'+e+'"]'),s=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),o="",r="",a="";if(s&&!i&&(n=s[s.length-1]),n&&n.offsetParent){var l=n.getBoundingClientRect(),d=n.offsetParent.getBoundingClientRect(),h=this.isLastCell(n)?4:0,c=this.isLastRow(n)?3:0;this.parent.options.enableRtl?r=d.right-l.right+l.width-4-h+"px":o=l.left-d.left+l.width-4-h+"px",a=l.top-d.top+l.height-5-c+"px"}return{Left:o,Right:r,Top:a}},e.prototype.createBorder=function(e,t,i,n,s){void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=!1);var o,r,a,l=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),d=this.parent.getRowByIndex(e),h=d.querySelector('[data-colindex="'+t+'"]'),c=[].slice.call(h.parentElement.querySelectorAll('[data-colindex="'+t+'"]')),p="",u="",f="";null!=i&&null!=n?(o=this.parent.getRowByIndex(i).querySelector('[data-colindex="'+n+'"]'),r=[].slice.call(o.parentElement.querySelectorAll('[data-colindex="'+n+'"]'))):(d,o=h,r=c),l&&!s&&(c=[].slice.call(l[0].parentElement.querySelectorAll('[data-colindex="'+l[0].cellIndex+'"]')),r=[].slice.call(l[l.length-1].parentElement.querySelectorAll('[data-colindex="'+l[l.length-1].cellIndex+'"]'))),this.startCell||(this.startCell=c[0]),this.endCells=r[0];var m=c[0],g=r[0],v=m.getBoundingClientRect(),b=g.getBoundingClientRect(),y=m.offsetParent.getBoundingClientRect(),w=this.isLastRow(g)?2:0,C=this.parent.options.frozenRows&&this.isFirstRow(m)?1.5:0,S=this.parent.options.frozenColumns&&this.isFirstCell(m)?1:0;return this.parent.options.enableRtl?(p=y.right-v.right-S+"px",f=v.right-b.left+S+1+"px"):(u=v.left-y.left-S+"px",f=b.right-v.left+S+1+"px"),a=v.top-y.top-C+"px","2px",{Right:p,Width:f,BorderWidth:"2px",Left:u,Height:b.top-v.top>0?b.top-y.top+b.height+1-(v.top-y.top)-w+C+"px":b.height+C-w+1+"px",Top:a}},e.prototype.expandAFBorder=function(e,t){for(var i=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),n=parseInt(r(this.startCell,"e-row").getAttribute("data-rowindex"),10),s=parseInt(this.startCell.getAttribute("data-colindex"),10),o=parseInt(r(this.endCell,"e-row").getAttribute("data-rowindex"),10),a=parseInt(this.endCell.getAttribute("data-colindex"),10),l=parseInt(r(i[i.length-1],"e-row").getAttribute("data-rowindex"),10)-parseInt(r(i[0],"e-row").getAttribute("data-rowindex"),10),d=parseInt(r(i[0],"e-row").getAttribute("data-rowindex"),10),h=this.parent.getRowByIndex(d),c=0,p=0,u=h.cells.length;p<u;p++)h.cells[p].classList.contains("e-cellselectionbackground")&&c++;switch(c=(c-=1)>=0?c:0,!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!r(e.target,"e-rowcell"):this.startAFCell=this.parent.getCellFromIndex(n,s),this.endAFCell=this.parent.getCellFromIndex(n+l,s+c),this.drawAFBorders();break;case s+c<a&&a-s-c+1>o-n-l&&a-s-c+1>n-o:if(this.endAFCell=this.parent.getCellFromIndex(n+l,a),o=parseInt(r(this.endAFCell,"e-row").getAttribute("data-rowindex"),10),a=parseInt(this.endAFCell.getAttribute("data-colindex"),10),t){var f=parseInt(this.endCells.getAttribute("data-colindex"),10);for(p=n;p<=o;p++)for(var m=this.getAutoFillCells(p,s),g=0,v=f+1;v<=a;v++)g>c&&(g=0),this.updateValue(p,v,m[g]),g++}else this.drawAFBorders();break;case s>a&&s-a+1>o-n-l&&s-a+1>n-o:if(this.startAFCell=this.parent.getCellFromIndex(n,a),this.endAFCell=this.endCells,t)for(p=n;p<=n+l;p++){(m=this.getAutoFillCells(p,s)).reverse();for(g=0,v=this.startCellIndex-1;v>=a;v--)g>c&&(g=0),this.updateValue(p,v,m[g]),g++}else this.drawAFBorders();break;case n>o:if(this.startAFCell=this.parent.getCellFromIndex(o,s),this.endAFCell=this.endCells,t){var b=y=parseInt(this.endCells.parentElement.getAttribute("data-rowindex"),10);for(p=n-1;p>=o;p--){b===this.startIndex-1&&(b=y);m=this.getAutoFillCells(b,s),g=0;b--;for(v=this.startCellIndex;v<=this.startCellIndex+c;v++)this.updateValue(p,v,m[g]),g++}}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(o,s+c),t){var y=parseInt(this.endCells.parentElement.getAttribute("data-rowindex"),10);for(b=this.startIndex,p=y+1;p<=o;p++){b===y+1&&(b=this.startIndex);m=this.getAutoFillCells(b,s);b++;g=0;for(var w=this.startCellIndex;w<=this.startCellIndex+c;w++)this.updateValue(p,w,m[g]),g++}}else this.drawAFBorders()}},e.prototype.drawAFBorders=function(){if(this.startCell){var e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),i=t.top-e.top>0?1:0,n=t.top-e.top>=0&&(r(this.startAFCell,"e-movablecontent")||r(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,s=(r(this.startAFCell,"e-movablecontent")||r(this.startAFCell,"e-movableheader"))&&this.isFirstCell(this.startAFCell)?1:0,o=this.isLastRow(this.endAFCell)&&(r(this.endAFCell,"e-movablecontent")||r(this.endAFCell,"e-frozencontent"))?2:1,a=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect(),d=this.startAFCell.offsetParent.parentElement.scrollTop,h=this.startAFCell.offsetParent.parentElement.scrollLeft,c=d-this.startAFCell.offsetTop,p=h-this.startAFCell.offsetLeft;c=c>0?Math.floor(c)-1:0,p=p>0?p:0;var u,f,m,g=e.left-l.left,v="",b="",y="",w="",C="",S="";if(this.parent.options.enableRtl){var E=r(this.startAFCell,"e-movablecontent")||r(this.startAFCell,"e-movableheader")?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;b=l.right-t.right-2+t.width+"px",w=l.right-e.right-s+E-1+"px",C=t.left-l.left-.5+"px",S=parseInt(b,10)-parseInt(w,10)-s+1+"px"}else v=g-s+p-1+h+"px",y=t.left-l.left-2+t.width+h+"px",C=g+p-.5+h+"px",S=parseInt(y,10)-parseInt(v,10)-s+1+"px";m=f=e.top-a.top-n+"px";var x={BorderLeftAutofillLeft:v,BorderLeftAutofillTop:f,BorderLeftAutofillHeight:u=t.top-e.top>0?t.top-a.top+t.height+1-(e.top-a.top)+n-o-c+"px":t.height+n-o-c+"px",BorderLeftAutofillRight:b,BorderRightAutofillLeft:y,BorderRightAutofillHeight:parseInt(u,10)+"px",BorderRightAutofillRight:w,BorderRightAutofillTop:m,BorderTopAutofillLeft:C,BorderTopAutofillTop:m,BorderTopAutofillWidth:S,BorderBottomAutofillLeft:C,BorderBottomAutofillTop:parseFloat(f)+parseFloat(u)-i-1+"px",BorderBottomAutofillWidth:S};this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",x,"UpdateAutofillPosition")}},e.prototype.updateValue=function(e,t,i){var n=this.parent.getColumnByIndex(t),s=parseInt(r(i,"e-row").getAttribute("data-rowindex"),10),o=this.parent.getColumnByIndex(i.cellIndex),a=i.innerText;this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillCell",e,n.field,o.field,s,a)},e.prototype.getAutoFillCells=function(e,t){return[].slice.call(this.parent.getDataRows()[e].querySelectorAll(".e-cellselectionbackground"))},e.prototype.updateStartEndCells=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute("data-rowindex"),10),this.startCellIndex=parseInt(r(this.startCell,"e-rowcell").getAttribute("data-colindex"),10))},e.prototype.assignCells=function(){this.startRowIndex=parseInt(this.startAFCell.parentElement.getAttribute("data-rowindex"),10),this.endRowIndex=parseInt(this.endAFCell.parentElement.getAttribute("data-rowindex"),10),this.startColIndex=parseInt(this.startAFCell.getAttribute("data-colindex"),10),this.endColIndex=parseInt(this.endAFCell.getAttribute("data-colindex"),10),this.startRowIndex>this.endRowIndex&&(this.startRowIndex=this.endRowIndex,this.endRowIndex=parseInt(this.startAFCell.parentElement.getAttribute("data-rowindex"),10)),this.endColIndex<this.startColIndex&&(this.startColIndex=this.endColIndex,this.endColIndex=parseInt(this.startAFCell.getAttribute("data-colindex"),10))},e.prototype.selectCellByRow=function(){for(var e=this.startRowIndex;e<=this.endRowIndex;e++)for(var t=this.startColIndex;t<=this.endColIndex;t++)this.parent.dotNetRef.invokeMethodAsync("SelectCellByRow",e,t)},e.prototype.isLastCell=function(e){var t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]==e},e.prototype.isLastRow=function(e){var t=[].slice.call(sf.base.closest(e,"tbody").querySelectorAll(".e-row:not(.e-hiddenrow)"));return t[t.length-1]==e.parentElement},e.prototype.isFirstRow=function(e){var t=[].slice.call(sf.base.closest(e,"tbody").querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[0]},e.prototype.isFirstCell=function(e){return[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===e},e.prototype.performDragSelection=function(e,t,i){var n=e,s=t;e>t&&(n=t,s=e),-1!=i&&this.clearSelectionExceptDragIndexes(n,s),this.selectRangeOfRows(n,s)},e.prototype.selectRangeOfRows=function(e,t){var i=this.parent.getRows(),n=null;this.parent.options.frozenColumns&&(n=this.parent.getMovableDataRows());for(var s=function(e){if(!sf.base.isNullOrUndefined(n)&&n.length>0){var t=o.parent.options.enableVirtualization?n.filter((function(t){return parseInt(t.getAttribute("data-rowindex"),10)==e}))[0]:n[e];o.selectRow(t,!0)}var s=o.parent.options.enableVirtualization?i.filter((function(t){return parseInt(t.getAttribute("data-rowindex"),10)==e}))[0]:i[e];o.selectRow(s,!1)},o=this,r=e;r<=t;r++)s(r)},e.prototype.selectRow=function(e,t){if(!sf.base.isNullOrUndefined(e)){e.setAttribute("aria-selected","true");var i=[].slice.call(e.querySelectorAll(".e-rowcell"));f.apply(void 0,[i,!0].concat(["e-aria-selected","e-active"])),t||i[0].classList.contains("e-gridchkbox")&&i[0].querySelector(".e-frame").classList.replace("e-uncheck","e-check")}},e.prototype.clearSelectionByRow=function(e){var t=[].slice.call(e.querySelectorAll(".e-rowcell"));e.removeAttribute("aria-selected"),f.apply(void 0,[t,!1].concat(["e-aria-selected","e-active"])),t[0].classList.contains("e-gridchkbox")&&t[0].querySelector(".e-frame").classList.replace("e-check","e-uncheck")},e.prototype.clearSelectionExceptDragIndexes=function(e,t){var i=this.parent.getRows(),n=null;this.parent.options.frozenColumns&&(n=this.parent.getMovableDataRows());for(var s=0;s<i.length;s++){var o=this.parent.options.enableVirtualization?parseInt(i[s].getAttribute("data-rowindex"),10):s;if(o<e||o>t){if(!sf.base.isNullOrUndefined(n)&&n.length>0){var r=this.parent.options.enableVirtualization?n.filter((function(e){return parseInt(e.getAttribute("data-rowindex"),10)==o}))[0]:n[o];this.clearSelectionByRow(r)}var a=this.parent.options.enableVirtualization?i.filter((function(e){return parseInt(e.getAttribute("data-rowindex"),10)==o}))[0]:i[o];this.clearSelectionByRow(a)}}},e.prototype.isRowType=function(){return"Row"===this.parent.options.selectionMode||"Both"===this.parent.options.selectionMode},e.prototype.isSingleSel=function(){return"Single"===this.parent.options.selectionType},e}(),H=function(){function e(e,t){var i=this;this.fromWheel=!1,this.touchMove=!1,this.options={},this.sentinelInfo={up:{check:function(e,t){var n=e.top-i.containerRect.top;return t.entered=n>=0,n+i.options.pageHeight/2>=0},axis:"Y"},down:{check:function(e,t){i.options.container.clientHeight;var n=e.bottom;return t.entered=e.bottom<=i.containerRect.bottom,n-i.options.pageHeight/2<=i.options.pageHeight/2},axis:"Y"},right:{check:function(e,t){var n=e.right;return t.entered=n<i.containerRect.right,n-i.containerRect.width<=i.containerRect.right},axis:"X"},left:{check:function(e,t){var n=e.left;return t.entered=n>0,n+i.containerRect.width>=i.containerRect.left},axis:"X"}},this.element=e,this.options=t}return e.prototype.observe=function(e,t){var i=this;this.options.virtualScrollHandler=this.virtualScrollHandler(e,t),this.containerRect=this.options.container.getBoundingClientRect(),sf.base.EventHandler.add(this.options.container,"wheel",(function(){return i.fromWheel=!0}),this),sf.base.EventHandler.add(this.options.container,"scroll",this.options.virtualScrollHandler,this),sf.base.isNullOrUndefined(r(this.element,"e-gridcontent"))||sf.base.isNullOrUndefined(r(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"))||sf.base.EventHandler.add(r(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"),"scroll",this.options.virtualScrollHandler,this)},e.prototype.disconnect=function(){var e=this;this.containerRect=this.options.container.getBoundingClientRect(),sf.base.EventHandler.remove(this.options.container,"wheel",(function(){return e.fromWheel=!0})),sf.base.EventHandler.remove(this.options.container,"scroll",this.options.virtualScrollHandler),sf.base.isNullOrUndefined(r(this.element,"e-gridcontent"))||sf.base.isNullOrUndefined(r(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"))||sf.base.EventHandler.remove(r(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"),"scroll",this.options.virtualScrollHandler)},e.prototype.check=function(e){var t=this.sentinelInfo[e];return t.check(this.element.getBoundingClientRect(),t)},e.prototype.virtualScrollHandler=function(e,t){var i=this,n="chrome"===sf.base.Browser.info.name?200:100,s=0,o=0,r=sf.base.debounce(e,n),a=sf.base.debounce(e,50);return function(e){var n=e.target.scrollTop,l=e.target.scrollLeft,d=s<n?"down":"up",h=e.target.classList.contains("e-movablescrollbar"),c=!0,p=i.options.container.querySelectorAll(".e-masked-row").length>0;d=o===l?d:o<l?"right":"left",h&&(d=o<l?"right":"left"),"down"==d?c=!!(p&&i.options.totalItems<100)||n-s<30:"up"==d?c=s-n<30:"right"==d?c=l-o<20:"left"==d&&(c=o-l<20),s=n,o=l;var u=i.sentinelInfo[d];if(-1!==i.options.axes.indexOf(u.axis)){var f=i.check(d),m=i.options.container.querySelectorAll(".e-masked-row").length&&"X"!=u.axis;if((u.entered||(sf.base.isNullOrUndefined(i.blazorActiveKey)||""==i.blazorActiveKey)&&!i.fromWheel&&m)&&t(i.element,u,c,d,{top:n,left:l},i.fromWheel,f),f||m){var g=r;"X"===u.axis&&(g=a),g({direction:d,sentinel:u,offset:{top:n,left:l},focusElement:document.activeElement})}m||(i.fromWheel=!1)}}},e.prototype.setPageHeight=function(e){this.options.pageHeight=e},e}(),z=function(){function e(e){var t=this;this.prevHeight=0,this.preStartIndex=0,this.preventEvent=!1,this.actions=["filtering","searching","grouping","ungrouping","Filtering","Searching","Grouping","Ungrouping","UnGrouping"],this.offsets={},this.tmpOffsets={},this.offsetKeys=[],this.currentInfo={},this.blazorActiveKey="",this.nextRowToNavigate=0,this.startIndex=0,this.bindScrollEvent=function(){t.observer.observe((function(e){t.parent.options.enableVirtualization&&t.scrollListener(e)}),t.onEntered());var e=t.parent;if(e.options.enablePersistence&&e.scrollPosition){t.content.scrollTop=e.scrollPosition.top;var i={direction:"down",sentinel:t.observer.sentinelInfo.down,offset:e.scrollPosition,focusElement:e.element};t.scrollListener(i),e.options.enableColumnVirtualization&&(t.content.scrollLeft=e.scrollPosition.left)}},this.parent=e,this.contentPanel=this.parent.element.querySelector(".e-gridcontent"),this.vHelper=new _(e),this.virtualEle=new q(e),this.addEventListener()}return e.prototype.getPanel=function(){return this.contentPanel},e.prototype.getTable=function(){return this.contentPanel.querySelector(".e-table")},e.prototype.renderTable=function(){this.header=this.parent.virtualHeaderModule,this.virtualEle.table=this.getTable(),this.virtualEle.content=this.content=this.getPanel().querySelector(".e-content"),this.virtualEle.renderWrapper(Number(this.parent.options.height)),this.virtualEle.renderPlaceHolder();var e={container:this.content,pageHeight:2*this.getBlockHeight(),debounceEvent:!0,axes:this.parent.options.enableColumnVirtualization?["X","Y"]:["Y"],totalItems:this.parent.options.totalItemCount};this.observer=new H(this.virtualEle.wrapper,e),this.parent.dotNetRef.invokeMethodAsync("SetRowHeight",this.parent.getRowHeight())},e.prototype.addEventListener=function(){sf.base.EventHandler.add(this.parent.element,"keydown",this.keyDownHandler,this)},e.prototype.removeEventListener=function(){sf.base.isNullOrUndefined(this.observer)||this.observer.disconnect(),this.getPanel().firstElementChild.scrollTop=0,this.getPanel().firstElementChild.scrollLeft=0,sf.base.EventHandler.remove(this.parent.element,"keydown",this.keyDownHandler)},e.prototype.ensurePageSize=function(){var e=this.parent.getRowHeight(),t=2*~~((this.parent.options.height.toString().indexOf("%")<0?this.content.getBoundingClientRect().height:this.parent.element.getBoundingClientRect().height)/e),i=this.parent.options.pageSize,n=i<t?t:i;this.parent.dotNetRef.invokeMethodAsync("SetPageSizeAndCIndex",{pageSize:n,startColumnIndex:this.startColIndex,endColumnIndex:this.endColIndex,VTableWidth:this.getColumnOffset(this.endColIndex)-this.getColumnOffset(this.startColIndex-1)+""}),this.parent.options.pageSize=n,this.observer.options.pageHeight=2*this.getBlockHeight()},e.prototype.scrollListener=function(e){var t=this;if(this.parent.options.enablePersistence&&(this.parent.scrollPosition=e.offset),this.preventEvent)this.preventEvent=!1;else{var i=e.sentinel,n=this.preStartIndex,s=this.parent.getColumnIndexesInView(),o=this.currentInfo=this.getInfoFromView(e.direction,i,e.offset);if(this.parent.options.enableColumnVirtualization&&JSON.stringify(s)!==JSON.stringify(o.columnIndexes)){var r=this.getColumnOffset(this.startColIndex-1),a=this.getColumnOffset(this.endColIndex)-r+"";setTimeout((function(){t.parent.dotNetRef.invokeMethodAsync("RemoveValidationPopup"),t.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",{requestType:"virtualscroll",startColumnIndex:o.columnIndexes[0],endColumnIndex:o.columnIndexes[o.columnIndexes.length-1],axis:"X",VTablewidth:a,translateX:t.getColumnOffset(o.columnIndexes[0]-1),translateY:t.parent.options.enableVirtualMaskRow?t.parent.options.frozenColumns?t.movableTranslateY:t.translateMaskY+t.movableTranslateY:0},Math.ceil(e.offset.top))}),0),this.parent.options.frozenColumns||this.setColVTableWidthAndTranslate()}else"left"!==this.currentInfo.direction&&"right"!==this.currentInfo.direction||!this.parent.options.enableVirtualMaskRow||0!==this.parent.options.frozenColumns||this.virtualEle.adjustTable(this.getColumnOffset(o.columnIndexes[0]-1),this.translateMaskY),this.virtualEle.movableAdjustTable(this.getColumnOffset(o.columnIndexes[0]-1),0),this.header.virtualEle.movableAdjustTable(this.getColumnOffset(o.columnIndexes[0]-1),0);this.parent.setColumnIndexesInView(this.parent.options.enableColumnVirtualization?o.columnIndexes:[]),this.nextRowToNavigate=""!=this.blazorActiveKey?this.nextRowToNavigate:0,this.preStartIndex!==n&&(this.parent.options.currentPage=o.currentPage,setTimeout((function(){t.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",{requestType:"virtualscroll",nextRowToNavigate:t.nextRowToNavigate,virtualStartIndex:o.endIndex-t.parent.options.pageSize,virtualEndIndex:o.endIndex,axis:"Y",RHeight:t.parent.getRowHeight()},(o.endIndex-t.parent.options.pageSize)*(t.parent.options.rowHeight?t.parent.options.rowHeight:t.parent.getRowHeight()))}),0)),this.prevInfo=o,this.blazorActiveKey=""}},e.prototype.setColVTableWidthAndTranslate=function(e){if(this.parent.options.enableColumnVirtualization&&this.prevInfo&&JSON.stringify(this.currentInfo.columnIndexes)!==JSON.stringify(this.prevInfo.columnIndexes)||e&&e.refresh){var t=this.getColumnOffset(this.startColIndex-1),i=this.getColumnOffset(this.endColIndex)-t+"";0!=this.parent.options.frozenColumns?(this.virtualEle.movableContentWrapper.style.width=i,this.header.virtualEle.movableHeaderWrapper.style.width=i,this.header.virtualEle.movableAdjustTable(this.movableTranslateX,this.movableTranslateY),this.virtualEle.movableAdjustTable(this.movableTranslateX,this.movableTranslateY)):(this.header.virtualEle.setWrapperWidth(i),this.virtualEle.setWrapperWidth(i),this.header.virtualEle.adjustTable(this.movableTranslateX,0),this.parent.getContentTable().parentElement.style.width=i+"px")}},e.prototype.refreshOnDataChange=function(){this.getPanel().firstElementChild.scrollTop=0,this.getPanel().firstElementChild.scrollLeft=0,this.parent.options.enableColumnVirtualization&&this.header.virtualEle.adjustTable(0,0),this.virtualEle.adjustTable(0,0),this.refreshOffsets(),this.refreshVirtualElement()},e.prototype.keyDownHandler=function(e){this.blazorActiveKey="ArrowDown"===e.key||"ArrowUp"===e.key?e.key:"",sf.base.isNullOrUndefined(this.observer)||(this.observer.blazorActiveKey=this.blazorActiveKey)},e.prototype.focusCell=function(e,t){e.focus({preventScroll:!0});var i=this.parent.getRowHeight(),n=this.parent.getContent();"MoveDownCell"==t&&e.getBoundingClientRect().bottom>n.getBoundingClientRect().top+n.getBoundingClientRect().height-s()?n.scrollTop=n.scrollTop+i:"MoveUpCell"==t&&e.getBoundingClientRect().bottom<n.getBoundingClientRect().top+i&&(this.isScrollFromFocus=!0,n.scrollTop=n.scrollTop-i)},e.prototype.getInfoFromView=function(e,t,i){var n={direction:e,sentinelInfo:t,offsets:i,startIndex:this.preStartIndex,endIndex:this.preEndIndex},s=this.parent.options.height.toString().indexOf("%")<0?this.content.getBoundingClientRect().height:this.parent.element.getBoundingClientRect().height;n.page=this.getPageFromTop(i.top+s,n),n.blockIndexes=this.vHelper.getBlockIndexes(n.page),n.columnIndexes="X"===t.axis?this.vHelper.getColumnIndexes():this.parent.getColumnIndexesInView();var o=this.parent.getRowHeight(),r=i.top/o,a=s/o,l=r+a,d=this.parent.options.pageSize/4,h=this.parent.options.groupCount?this.getVisibleGroupedRowCount():this.count;if("down"!==n.direction||this.isScrollFromFocus){if("up"===n.direction&&(n.startIndex&&n.endIndex||this.parent.options.enableVirtualMaskRow)){var c=Math.round((n.startIndex*o+d*o)/o);if(this.parent.options.enableVirtualMaskRow)if(a=Math.ceil(a),r<c||Math.ceil(r)>this.preStartIndex){var p=Math.ceil(r)>0?Math.ceil(r):0,u=h-this.parent.options.pageSize-this.parent.options.pageSize/2;n.startIndex=r<h&&u<=r?p>0?p-this.parent.options.pageSize/2:0:p>0?p+this.parent.options.pageSize>h?h-this.parent.options.pageSize:p:0,n.startIndex=n.startIndex>0?n.startIndex-1:n.startIndex;g=n.startIndex+this.parent.options.pageSize;n.endIndex=n.startIndex<0?this.parent.options.pageSize:g<h?g:h,n.currentPage=Math.ceil(n.startIndex/this.parent.options.pageSize),this.isScrollFromFocus=!1,this.preStartIndex=this.startIndex=n.startIndex,this.preEndIndex=n.endIndex}else this.isScrollFromFocus=!1,this.preStartIndex=this.preStartIndex,this.preEndIndex=this.preEndIndex;if(r<c&&!this.parent.options.enableVirtualMaskRow){var f=d>a?d:a+a/4;g=Math.round(r+f);n.endIndex=g<h?g:h;m=n.endIndex-this.parent.options.pageSize;n.startIndex=m>0?m:0,n.endIndex=m<0?this.parent.options.pageSize:n.endIndex,n.currentPage=Math.ceil(n.startIndex/this.parent.options.pageSize)}v=this.parent.getSelectedRowIndexes(!0);this.nextRowToNavigate=v.length>0?v[0]+1:-1}}else{var m=Math.round(l)-Math.round(d);if(this.parent.options.enableVirtualMaskRow)if(a=Math.ceil(a)-1,Math.ceil(r)-this.preStartIndex>=a){n.startIndex=Math.ceil(r)>=0?Math.ceil(r):0;var g=n.startIndex+this.parent.options.pageSize;n.endIndex=g<h?g:h,n.startIndex=g>=h?n.endIndex-this.parent.options.pageSize<0?0:n.endIndex-this.parent.options.pageSize:n.startIndex,n.currentPage=Math.ceil(n.endIndex/this.parent.options.pageSize),this.isScrollFromFocus=!1,this.preStartIndex=this.startIndex=n.startIndex,this.preEndIndex=n.endIndex}else this.isScrollFromFocus=!1,this.preStartIndex=this.preStartIndex,this.preEndIndex=this.preEndIndex;if(!this.parent.options.enableVirtualMaskRow&&sf.base.isNullOrUndefined(n.startIndex)||l>n.startIndex+Math.round(this.parent.options.pageSize/2+d)&&n.endIndex!==h){n.startIndex=m>=0?Math.round(m):0,n.startIndex=n.startIndex>r?Math.floor(r):n.startIndex;var g=n.startIndex+this.parent.options.pageSize;n.startIndex=g<l?Math.ceil(l)-this.parent.options.pageSize:n.startIndex,n.endIndex=g<h?g:h,n.startIndex=g>=h?n.endIndex-this.parent.options.pageSize>0?n.endIndex-this.parent.options.pageSize:0:n.startIndex,n.currentPage=Math.ceil(n.endIndex/this.parent.options.pageSize)}var v=this.parent.getSelectedRowIndexes(!0);this.nextRowToNavigate=v.length>0?v[0]-1:-1}return this.parent.options.enableVirtualMaskRow||(this.isScrollFromFocus=!1,this.preStartIndex=this.startIndex=n.startIndex,this.preEndIndex=n.endIndex),n},e.prototype.onDataReady=function(){var e=this,t=this;if(!this.movableColumnIndex&&this.parent.options.frozenColumns&&(this.movableColumnIndex=parseInt(this.parent.scrollModule.getMovableContent().querySelector("td").getAttribute("data-colindex"))),this.observer.options.totalItems=this.parent.options.totalItemCount,this.bindScrollEvent(),this.count=this.parent.options.totalItemCount,this.maxPage=Math.ceil(this.count/this.parent.options.pageSize),["Refresh","Filtering","Searching","Grouping","UnGrouping","Reorder","refresh","filtering","searching","grouping","ungrouping","reorder","GroupExpandCollapse",null].some((function(t){return e.parent.options.requestType===t}))&&this.refreshOffsets(),this.setVirtualHeight(),this.parent.scrollModule.refresh(),this.resetScrollPosition(this.parent.options.requestType),this.setColVTableWidthAndTranslate(),(this.parent.options.enableVirtualMaskRow||this.parent.options.enableLazyLoading)&&"GroupExpandCollapse"!=this.parent.options.requestType){var i=this.parent.options.rowHeight,n=(this.currentInfo.endIndex-this.parent.options.pageSize)*(i||this.parent.getRowHeight());n="NaN"==n.toString()?0:n,n-=this.parent.options.pageSize*(i||this.parent.getRowHeight()),0==this.count&&(n=0),sf.base.isNullOrUndefined(this.currentInfo.startIndex)||0==this.currentInfo.startIndex||sf.base.isNullOrUndefined(this.currentInfo.endIndex)||this.currentInfo.endIndex===this.parent.options.totalItemCount||(n-=20),setTimeout((function(){t.translateMaskY=n,t.translateMaskX=sf.base.isNullOrUndefined(t.translateMaskX)?0:t.translateMaskX,0==t.parent.options.frozenColumns?t.virtualEle.wrapper.style.transform="translate("+t.translateMaskX+"px,"+n+"px)":t.virtualEle.wrapper.style.transform="translate(0px,"+n+"px)"}),0)}this.prevInfo=this.prevInfo?this.prevInfo:this.vHelper.getData()},e.prototype.setVirtualHeight=function(){var e=this.parent.options.enableColumnVirtualization?this.getColumnOffset(this.parent.options.columns.length+this.parent.options.groupCount-1)+"px":"100%",t=this.parent.options.enableColumnVirtualization||this.parent.options.enableLazyLoading?this.parent.options.enableVirtualMaskRow&&this.parent.options.enableColumnVirtualization?4:2:0,i=this.parent.options.groupCount?this.parent.options.enableLazyLoading?this.parent.options.totalItemCount*this.parent.getRowHeight():this.parent.options.visibleGroupedRowsCount*this.parent.getRowHeight():this.offsets[this.getTotalBlocks()-t];this.parent.options.allowEditing&&!this.parent.options.enableLazyLoading||this.virtualEle.setVirtualHeight(i,e),this.parent.options.enableColumnVirtualization&&this.header.virtualEle.setVirtualHeight(1,e)},e.prototype.getPageFromTop=function(e,t){var i=this,n=p(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks(),s=0;this.offsets[n],this.prevHeight;return this.offsetKeys.some((function(o){var r=Number(o),a=e<=i.offsets[o]||r===n&&e>i.offsets[o];return a&&(t.block=r%2==0?1:0,s=Math.max(1,Math.min(i.vHelper.getPage(r),i.maxPage))),a})),s},e.prototype.getTranslateY=function(e,t,i,n){void 0===i&&((i={page:this.getPageFromTop(e+t,{})}).blockIndexes=this.vHelper.getBlockIndexes(i.page));var s=(i.blockIndexes[0]||1)-1,o=this.getOffset(s),r=this.getOffset(i.blockIndexes[i.blockIndexes.length-1]);n&&(i=this.prevInfo);var a=o>e?this.getOffset(s-1):r<e+t?this.getOffset(s+1):o,l=this.offsets[i.blockIndexes[i.blockIndexes.length-1]]-this.tmpOffsets[i.blockIndexes[0]];return a+l>this.offsets[p(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks()]&&0==this.parent.options.groupCount&&(a-=a+l-this.offsets[this.getTotalBlocks()]),a},e.prototype.getOffset=function(e){return Math.min(0|this.offsets[e],0|this.offsets[this.maxBlock])},e.prototype.onEntered=function(){var e=this;return function(t,i,n,s,o,r,a){var l=e;sf.base.Browser.isIE&&!r&&a&&e.preventEvent;var d="X"===i.axis,h=e.prevInfo.offsets?e.prevInfo.offsets.top:null,c=e.content.getBoundingClientRect().height,p=e.getColumnOffset(d?e.vHelper.getColumnIndexes()[0]-1:e.prevInfo.columnIndexes[0]-1),u=e.getTranslateY(o.top,c,d&&h===o.top?e.prevInfo:void 0,!0);if(e.currentInfo&&e.currentInfo.startIndex&&d&&(u=e.currentInfo.startIndex*e.parent.getRowHeight()),e.movableTranslateX=e.vHelper.cOffsets[e.startColIndex-1]?e.vHelper.cOffsets[e.startColIndex-1]:p,e.movableTranslateY=e.parent.options.pageSize*e.parent.options.rowHeight,e.parent.options.enableVirtualMaskRow){if(e.offsets[e.maxBlock]>u)if("right"==s||"left"==s){var f=e.parent.getColumnIndexesInView(),m=e.getInfoFromView(s,i,o);e.header.virtualEle.movableAdjustTable(e.movableTranslateX,0),e.virtualEle.movableAdjustTable(e.movableTranslateX,e.movableTranslateY),e.parent.options.frozenColumns||JSON.stringify(f)===JSON.stringify(m.columnIndexes)||e.virtualEle.adjustTable(e.movableTranslateX,e.translateMaskY+e.movableTranslateY)}else{var g=e.parent.options.enableColumnVirtualization?e.parent.options.enableVirtualMaskRow?4:2:0;setTimeout((function(){l.virtualEle.adjustTable(p,Math.min(n?l.translateMaskY:u,l.offsets[l.maxBlock-g]))}),0)}}else e.parent.options.frozenColumns&&(e.virtualEle.movableAdjustTable(e.movableTranslateX,Math.min(u,e.offsets[e.maxBlock])),e.header.virtualEle.movableAdjustTable(e.movableTranslateX,Math.min(u,e.offsets[e.maxBlock]))),e.virtualEle.adjustTable(e.movableTranslateX,Math.min(u,e.offsets[e.maxBlock]));d&&!e.parent.options.frozenColumns&&e.setColVTableWidthAndTranslate({refresh:!0})}},e.prototype.getBlockSize=function(){return this.parent.options.pageSize>>1},e.prototype.getBlockHeight=function(){return this.getBlockSize()*this.parent.getRowHeight()},e.prototype.getGroupedTotalBlocks=function(){if(this.parent.options.enableLazyLoading&&this.parent.options.enableVirtualization)return this.getTotalBlocks();var e=this.getVisibleGroupedRowCount();return Math.floor(e/this.getBlockSize()<1?1:e/this.getBlockSize())},e.prototype.getVisibleGroupedRowCount=function(){return Number(this.virtualEle.placeholder.style.height.substring(0,this.virtualEle.placeholder.style.height.indexOf("p")))/this.parent.getRowHeight()},e.prototype.getTotalBlocks=function(){return Math.ceil(this.count/this.getBlockSize())},e.prototype.getColumnOffset=function(e){return 0|this.vHelper.cOffsets[e]},e.prototype.resetScrollPosition=function(e){var t=sf.base.isNullOrUndefined(e)?e:e.toLowerCase();if(this.actions.some((function(t){return t===e}))||this.parent.options.filterCount>0&&!sf.base.isNullOrUndefined(t)&&("save"==t||"delete"==t)||!sf.base.isNullOrUndefined(this.parent.options.initGroupingField)&&this.parent.options.initGroupingField.length>0&&!sf.base.isNullOrUndefined(t)&&("sorting"==t||"save"==t||"delete"==t)){var i=this.content;this.preventEvent=0!==i.scrollTop,i.scrollTop=0}},e.prototype.refreshOffsets=function(){this.parent;var e=0,t=this.getBlockSize(),i=p(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks();this.prevHeight=this.offsets[i],this.maxBlock=i%2==0?i-2:i-1,this.offsets={};for(var n=[],s={},o=Array.apply(null,Array(i)).map((function(){return++e})),r=0;r<o.length;r++){var a=(s[o[r]]||[]).length,l=p(this.parent)?n.length%t:this.count%t,d=!p(this.parent)&&o[r]in s?a*this.parent.getRowHeight():l&&o[r]===i?l*this.parent.getRowHeight():this.getBlockHeight();this.offsets[o[r]]=(0|this.offsets[o[r]-1])+d,this.tmpOffsets[o[r]]=0|this.offsets[o[r]-1]}this.offsetKeys=Object.keys(this.offsets),this.parent.options.enableColumnVirtualization&&this.vHelper.refreshColOffsets()},e.prototype.updateTransform=function(e,t){var i=this;setTimeout((function(){i.translateMaskX=e,i.virtualEle.adjustTable(e,i.translateMaskY),i.virtualEle.movableAdjustTable(i.translateMaskX,0),i.header.virtualEle.movableAdjustTable(i.translateMaskX,0)}),500)},e.prototype.refreshColumnIndexes=function(){this.vHelper.refreshColOffsets();var e=this.vHelper.getColumnIndexes();this.parent.setColumnIndexesInView(e),this.parent.dotNetRef.invokeMethodAsync("SetColumnIndexes",e[0],e[e.length-1])},e.prototype.refreshVirtualElement=function(){this.vHelper.refreshColOffsets(),this.setVirtualHeight()},e}(),U=function(){function e(e){this.parent=e,this.vHelper=new _(this.parent),this.virtualEle=new q(this.parent),this.headerPanel=this.parent.element.querySelector(".e-gridheader")}return e.prototype.getPanel=function(){return this.headerPanel},e.prototype.getTable=function(){return this.headerPanel.querySelector(".e-table")},e.prototype.renderTable=function(){this.vHelper.refreshColOffsets(),this.parent.setColumnIndexesInView(this.vHelper.getColumnIndexes(this.getPanel().querySelector(".e-headercontent"))),this.virtualEle.table=this.getTable(),this.virtualEle.content=this.getPanel().querySelector(".e-headercontent"),this.virtualEle.content.style.position="relative",this.virtualEle.renderWrapper(),this.virtualEle.renderPlaceHolder()},e}(),q=function(){function e(e){this.parent=e}return e.prototype.renderWrapper=function(e){this.wrapper=this.content.querySelector(".e-virtualtable"),this.wrapper.setAttribute("styles","min-height:"+sf.base.formatUnit(e)),this.content.querySelector(".e-movableheader")&&(this.movableHeaderWrapper=this.content.querySelector(".e-movableheader").querySelector(".e-virtualtable")),null!=this.content.querySelector(".e-movablecontent")&&(this.movableContentWrapper=this.content.querySelector(".e-movablecontent").querySelector(".e-virtualtable"))},e.prototype.renderPlaceHolder=function(){this.placeholder=this.content.lastElementChild},e.prototype.movableAdjustTable=function(e,t){this.filterTranslateX=e,this.movableHeaderWrapper&&(this.movableHeaderWrapper.style.transform="translate("+e+"px, 0px)"),this.parent.options.enableVirtualMaskRow&&this.movableContentWrapper?this.movableContentWrapper.style.transform="translate("+e+"px, "+t+"px)":this.movableContentWrapper&&(this.movableContentWrapper.style.transform="translate("+e+"px, 0px)")},e.prototype.adjustTable=function(e,t){this.filterTranslateX=e,0!=this.parent.options.frozenColumns?this.wrapper.style.transform="translate(0px, "+t+"px)":this.wrapper.style.transform="translate("+e+"px, "+t+"px)"},e.prototype.setWrapperWidth=function(e,t){this.wrapper.style.width=e?e+"px":t?"100%":""},e.prototype.setVirtualHeight=function(e,t){this.placeholder.style.height=e+"px",this.parent.options.frozenColumns?this.placeholder.style.width="100%":this.placeholder.style.width=t},e}(),_=function(){function e(e){this.cOffsets={},this.data={},this.groups={},this.parent=e}return e.prototype.getBlockIndexes=function(e){return[e+(e-1),2*e]},e.prototype.getPage=function(e){return e%2==0?e/2:(e+1)/2},e.prototype.getData=function(){return{page:this.parent.options.currentPage,blockIndexes:this.getBlockIndexes(this.parent.options.currentPage),direction:"down",columnIndexes:this.parent.getColumnIndexesInView()}},e.prototype.getColumnIndexes=function(e){var t=this;void 0===e&&(e=this.parent.getHeaderContent()),sf.base.isNullOrUndefined(e.querySelector(".e-movableheader"))||(e=e.querySelector(".e-movableheader"));var i=[],n=0|e.scrollLeft,s=Object.keys(this.cOffsets),o=this.parent.options.needClientAction?this.parent.options.frozenColumns&&this.parent.options.enableColumnVirtualization?this.parent.getHeaderContent().offsetWidth:e.getBoundingClientRect().width:Number(this.parent.options.width);n=Math.min(this.cOffsets[s.length-1]-o,n);var r=sf.base.Browser.isDevice?2*o:o/2,a=n+o+(0===n?r:0);return s.some((function(e,s,o){var l=Number(e),d=t.cOffsets[e];return n-r<=d&&a+r>=d&&i.push(l),a+r<d})),i.length||this.parent.options.frozenColumns||(i=[],a+=this.cOffsets[this.getColumnIndexes()[0]],s.some((function(e,s,o){var l=Number(e),d=t.cOffsets[e];return n-r<=d&&a+r>=d&&i.push(l),a+r<d}))),1!=i.length||this.parent.options.frozenColumns?(this.parent.virtualContentModule.startColIndex=i[0],this.parent.virtualContentModule.endColIndex=i[i.length-1]):(this.parent.virtualContentModule.startColIndex=i[0],this.parent.virtualContentModule.endColIndex=i[0]+1,i.push(i[0]+1)),i},e.prototype.refreshColOffsets=function(){var e=0;this.cOffsets={};for(var t=this.parent.options.groupCount,i=this.parent.options.columns,n=i.length,s=Array.apply(null,Array(n)).map((function(){return e++})),o=0;o<s.length;o++)s[o]=s[o]+t,this.cOffsets[s[o]]=(0|this.cOffsets[s[o]-1])+(i[o].visible?parseInt(i[o].width,10):0)},e}(),F="th.e-headercell",V=".e-rowcell",j=".e-filterbarcell",W="e-frozen-helper",X="e-frozen-cursor",Y="data-colindex",K=function(){function e(e){this.currentBorderIndex=-1,this.originalBorderIndex=-1,this.visibleLtoROrderedColumns=[],this.visibleRtoLOrderedColumns=[],this.widthCollection=[],this.visibleFrozenColumns=[],this.visibleFrozenLeftColumns=[],this.domRtoLOrderedColumns=[],this.domLtoROrderedColumns=[],this.parent=e,this.parent.options.allowFreezeLineMoving&&this.wireEvents()}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getContent(),sf.base.Browser.touchStartEvent,this.dragStart,this),sf.base.EventHandler.add(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.dragStart,this)},e.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.parent.getContent(),sf.base.Browser.touchStartEvent,this.dragStart),sf.base.EventHandler.remove(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.dragStart)},e.prototype.dragStart=function(e){if(e.target.classList.contains(X)){this.currentCursorElement=e.target,this.parent.getContent().classList.add("e-freezeline-moving"),this.isLeftCursorDragging=!!(this.currentCursorElement.classList.contains("e-frozen-left-cursor")&&!this.currentCursorElement.classList.contains("e-frozen-default-cursor")||this.currentCursorElement.classList.contains("e-frozen-default-cursor")&&this.currentCursorElement.classList.contains("e-frozen-right-cursor")),this.appendHelper();var t,i=sf.base.closest(this.currentCursorElement,F);if(sf.base.isNullOrUndefined(i))if(i=sf.base.closest(this.currentCursorElement,V),sf.base.isNullOrUndefined(i))t=sf.base.closest(this.currentCursorElement,j).getAttribute("e-mappinguid");else{var n=i.getAttribute(Y);t=this.parent.getHeaderContent().querySelector("["+Y+'="'+n+'"]').firstElementChild.getAttribute("e-mappinguid")}else t=i.firstElementChild.getAttribute("e-mappinguid");var s=this.parent.getColumns().filter((function(e){return e.uid==t}))[0].index;this.setColumnsForBorderUpdate(),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,this.dragEnd,this),this.parent.dotNetRef.invokeMethodAsync("InvokeFreezeLineMoving",{fromIndex:s})}},e.prototype.appendHelper=function(){this.helperElement=sf.base.createElement("div",{className:W}),this.setHelperHeight(),this.parent.element.appendChild(this.helperElement)},e.prototype.setHelperHeight=function(){var e=this.parent.getContent().offsetHeight,t=sf.base.closest(this.currentCursorElement,F);if(sf.base.isNullOrUndefined(t)){var i=sf.base.closest(this.currentCursorElement,V);if(sf.base.isNullOrUndefined(i)){var n=sf.base.closest(this.currentCursorElement,j).getAttribute("e-mappinguid");t=this.parent.getHeaderContent().querySelectorAll("[e-mappinguid="+n+"]")[0].parentElement}else{var s=i.getAttribute(Y);t=this.parent.getHeaderContent().querySelector("["+Y+'="'+s+'"]')}}var o=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr"));this.parent.options.frozenColumns&&t.parentElement.children.length&&!t.parentElement.children[0].classList.contains("e-stackedheadercell")&&(o=r(t,"e-movableheader")?[].slice.call(this.parent.getHeaderContent().querySelector(".e-movableheader").querySelectorAll("tr")):r(t,"e-frozen-right-header")?[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelectorAll("tr")):[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-left-header").querySelectorAll("tr")));for(var a=o.indexOf(t.parentElement);a<o.length;a++)e+=o[a].offsetHeight;var l=this.calcPos(t),d=this.calcPos(this.parent.getHeaderContent()).top;this.currentCursorElement.classList.contains("e-frozen-default-cursor")?l.left=this.isLeftCursorDragging?l.left:l.left+t.offsetWidth-2:r(t,"e-frozen-right-content")||r(t,"e-frozen-right-header")?l.left+=this.parent.options.enableRtl?t.offsetWidth-2:-1:l.left+=this.parent.options.enableRtl?-1:t.offsetWidth-2,this.helperElement.style.cssText="height: "+e+"px; top: "+d+"px; left:"+Math.floor(l.left)+"px;"},e.prototype.calcPos=function(e){for(var t={top:0,left:0,right:0},i=e.getBoundingClientRect(),n=e.ownerDocument,s=r(e,"e-grid")||n.documentElement;s&&(s===n.body||s===n.documentElement)&&"static"===s.style.position;)s=s.parentNode;return s&&s!==e&&1===s.nodeType&&(t=s.getBoundingClientRect()),{top:i.top-t.top,left:i.left-t.left,right:i.right-t.right}},e.prototype.preventFreezeLineMoving=function(e){e?this.cancelFreezeLineMoving():sf.base.EventHandler.add(this.parent.element,sf.base.Browser.touchMoveEvent,this.freezeLineDragging,this)},e.prototype.cancelFreezeLineMoving=function(){this.unwireEvents(),sf.base.detach(this.helperElement),this.setDefaultValue()},e.prototype.setDefaultValue=function(){this.parent.getContent().classList.remove("e-freezeline-moving"),this.addOrRemoveClasses("remove"),this.helperElement=null,this.currentBorderIndex=-1,this.currentCursorElement=null,this.borderCells=null,this.widthCollection=[]},e.prototype.freezeLineDragging=function(e){this.helperElement&&(this.scrollHorizontally(),this.updateHelper(e),this.updateBorder())},e.prototype.setColumnsForBorderUpdate=function(){var e=this,t=this.parent.getColumns(),i=t.filter((function(e){return"Left"==e.freeze&&e.isFrozen}));this.visibleFrozenLeftColumns=i.filter((function(e){return e.visible}));var n=t.filter((function(e){return"Right"==e.freeze&&e.isFrozen})),s=n.filter((function(e){return e.visible}));if(this.parent.options.actualFrozenColumns>0){var o=t.slice(0,this.parent.options.actualFrozenColumns);this.visibleFrozenColumns=o.filter((function(e){return e.visible}));var r=(a=t.filter((function(t){return t.index>e.parent.options.actualFrozenColumns-1&&!t.isFrozen}))).filter((function(e){return e.visible}));this.isLeftCursorDragging?(this.visibleLtoROrderedColumns=[].concat(this.visibleFrozenColumns,this.visibleFrozenLeftColumns,r,s),this.domLtoROrderedColumns=[].concat(o,i,a,n),this.widthCollection=this.pushColumnWidth(this.visibleLtoROrderedColumns,this.widthCollection)):(this.visibleRtoLOrderedColumns=[].concat(s.reverse(),r.reverse(),this.visibleFrozenLeftColumns.reverse(),this.visibleFrozenColumns.reverse()),this.domRtoLOrderedColumns=[].concat(n.reverse(),a.reverse(),i.reverse(),o.reverse()),this.widthCollection=this.pushColumnWidth(this.visibleRtoLOrderedColumns,this.widthCollection))}else{var a;r=(a=t.filter((function(e){return!e.isFrozen}))).filter((function(e){return e.visible}));this.isLeftCursorDragging?(this.domLtoROrderedColumns=[].concat(i,a,n),this.visibleLtoROrderedColumns=[].concat(this.visibleFrozenLeftColumns,r,s),this.widthCollection=this.pushColumnWidth(this.visibleLtoROrderedColumns,this.widthCollection)):(this.domRtoLOrderedColumns=[].concat(n.reverse(),a.reverse(),i.reverse()),this.visibleRtoLOrderedColumns=[].concat(s.reverse(),r.reverse(),this.visibleFrozenLeftColumns.reverse()),this.widthCollection=this.pushColumnWidth(this.visibleRtoLOrderedColumns,this.widthCollection))}},e.prototype.updateBorder=function(){var e;if(-1==this.currentBorderIndex)if(sf.base.isNullOrUndefined(r(this.currentCursorElement,"e-rowcell")))if(sf.base.isNullOrUndefined(r(this.currentCursorElement,"e-filterbarcell")))this.currentBorderIndex=Number(r(this.currentCursorElement,"e-headercell").getAttribute(Y));else{var t=r(this.currentCursorElement,"e-filterbarcell").getAttribute("e-mappinguid"),i=this.parent.getHeaderContent().querySelectorAll("[e-mappinguid="+t+"]")[0].parentElement;this.currentBorderIndex=Number(i.getAttribute(Y))}else this.currentBorderIndex=Number(r(this.currentCursorElement,"e-rowcell").getAttribute(Y));var n=this.isLeftCursorDragging?this.convertWidthToNumber(this.helperElement.style.left):-this.calcPos(this.helperElement).right;if(n<this.widthCollection[0]/2)e=0,this.frozenDefaultBorderClass=this.isLeftCursorDragging?"e-frozen-left-border":"e-frozen-right-border";else if(n>this.widthCollection[0]/2&&n<this.widthCollection[0])e=0,this.frozenDefaultBorderClass=this.isLeftCursorDragging?"e-frozen-right-border":"e-frozen-left-border";else{this.frozenDefaultBorderClass="default";for(var s=0;s<this.widthCollection.length&&s+1!=this.widthCollection.length;s++)if(n>this.widthCollection[s]&&n<this.widthCollection[s+1]){var o=(this.widthCollection[s+1]-this.widthCollection[s])/2;e=n<this.widthCollection[s]+o?s:s+1;break}}if(!sf.base.isNullOrUndefined(e)&&this.currentBorderIndex!=e||"default"!=this.frozenDefaultBorderClass&&e==this.currentBorderIndex){this.addOrRemoveClasses("remove"),this.currentBorderIndex=e;var a=this.isLeftCursorDragging?this.visibleLtoROrderedColumns[this.currentBorderIndex].uid:this.visibleRtoLOrderedColumns[this.currentBorderIndex].uid;if(sf.base.isNullOrUndefined(this.parent.getHeaderContent().querySelectorAll("[e-mappinguid="+a+"]")[0])||(this.borderHeaderCell=this.parent.getHeaderContent().querySelectorAll("[e-mappinguid="+a+"]")[0].parentElement),this.parent.getHeaderContent().querySelector(".e-filterbar")){var l=this.parent.getHeaderContent().querySelectorAll(".e-filterbarcell");for(s=0;s<l.length;s++)l[s].getAttribute("e-mappinguid")==a&&(this.filterBarCell=l[s])}this.originalBorderIndex=Number(this.borderHeaderCell.getAttribute(Y)),this.borderCells=this.parent.getContent().querySelectorAll("["+Y+'="'+this.originalBorderIndex+'"]'),this.addOrRemoveClasses("add")}},e.prototype.addOrRemoveClasses=function(e){var t=this.isLeftCursorDragging?"e-frozen-right-border":"e-frozen-left-border";sf.base.isNullOrUndefined(this.borderCells)||("add"==e?(t="default"==this.frozenDefaultBorderClass?t:this.frozenDefaultBorderClass,sf.base.addClass(this.borderCells,t),this.borderHeaderCell.classList.add(t),sf.base.isNullOrUndefined(this.filterBarCell)||this.filterBarCell.classList.add(t)):"default"!=this.frozenDefaultBorderClass?(sf.base.removeClass(this.borderCells,["e-frozen-left-border","e-frozen-right-border"]),this.borderHeaderCell.classList.remove("e-frozen-right-border"),this.borderHeaderCell.classList.remove("e-frozen-left-border"),sf.base.isNullOrUndefined(this.filterBarCell)||(this.filterBarCell.classList.remove("e-frozen-right-border"),this.filterBarCell.classList.remove("e-frozen-left-border"))):(sf.base.removeClass(this.borderCells,t),this.borderHeaderCell.classList.remove(t),sf.base.isNullOrUndefined(this.filterBarCell)||this.filterBarCell.classList.remove(t)))},e.prototype.convertWidthToNumber=function(e){return Number(e.toString().replace("px",""))},e.prototype.pushColumnWidth=function(e,t){for(var i=0,n=0;n<e.length;n++){var s=this.convertWidthToNumber(e[n].width);t.push(i+s),i=t[t.length-1]}return t},e.prototype.scrollHorizontally=function(){if(0!=this.parent.options.frozenColumns){var e=this.parent.getContent().querySelector(".e-movablecontent");if(e.scrollWidth>e.clientWidth){var t=this.parent.element.querySelector(".e-movablescrollbar"),i=this.parent.element.querySelector(".e-movablechild");e.scrollLeft=this.isLeftCursorDragging?0:i.scrollWidth-t.offsetWidth}}},e.prototype.updateHelper=function(e){var t=this.getCurrentScreenX(e),i=this.calcPos(this.currentCursorElement).left,n=t-(this.parent.element.getBoundingClientRect().left+i),o=this.parent.getContent().offsetWidth,r=i+n,a=this.parent.getContent().querySelector(".e-movablecontent");if(a||(a=this.parent.getContent()),this.isLeftCursorDragging){var l=this.calcPos(a).right;r=r>o+l?o+l-1:r}else{var d=this.calcPos(a).left;r=(r=r<d?d+1:r)>o-s()?o-s()-1:r}this.helperElement.style.left=r+"px"},e.prototype.getCurrentScreenX=function(e){return e.touches&&e.touches.length?e.touches[0].screenX:e.screenX},e.prototype.dragEnd=function(e){if(this.helperElement){sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.freezeLineDragging),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.dragEnd);var t=this.getServerParams(),i=this.parent.options.actualFrozenColumns;if(this.parent.options.actualFrozenColumns>0&&!t.isFrozen)for(var n=0;n<t.frozenColumnsUidCollection.length;n++)for(var s=0;s<this.visibleFrozenColumns.length;s++)this.visibleFrozenColumns[s].uid==t.frozenColumnsUidCollection[n]&&i--;var o=!!(this.currentCursorElement.classList.contains("e-frozen-default-cursor")||this.isLeftCursorDragging&&"e-frozen-left-border"==this.frozenDefaultBorderClass||!this.isLeftCursorDragging&&"e-frozen-right-border"==this.frozenDefaultBorderClass);sf.base.detach(this.helperElement),this.setDefaultValue(),this.checkForServerCall(t.isFrozen,t.frozenColumnsUidCollection)&&this.parent.dotNetRef.invokeMethodAsync("InvokeFreezeLineMoved",{frozenColumnsUidCollection:t.frozenColumnsUidCollection,freezeDirection:t.freezeDirection,freezeLineMovingDirection:t.freezeLineMovingDirection,isFrozen:t.isFrozen,fromIndex:t.startIndex,toIndex:t.endIndex,frozenColumnsCount:i,hasGridStructureChanges:o})}},e.prototype.getServerParams=function(){var e,t,i,n,s,o=[];if(!sf.base.isNullOrUndefined(this.borderCells)){var a=this.convertWidthToNumber(this.helperElement.style.left),l=this.calcPos(this.currentCursorElement).left,d=sf.base.closest(this.currentCursorElement,V);if(sf.base.isNullOrUndefined(d)&&(d=sf.base.closest(this.currentCursorElement,F),sf.base.isNullOrUndefined(d))){var h=r(this.currentCursorElement,"e-filterbarcell").getAttribute("e-mappinguid");d=this.parent.getHeaderContent().querySelectorAll("[e-mappinguid="+h+"]")[0].parentElement}if(n=Number(d.getAttribute(Y)),s=Number(this.borderCells[0].getAttribute(Y)),this.isLeftCursorDragging)if(e="Left",a>l){t=!0,i="Right";for(var c=0==this.parent.options.frozenColumns||0==this.parent.options.actualFrozenColumns&&0==this.visibleFrozenLeftColumns.length?0:n+1,p=this.currentCursorElement.classList.contains("e-frozen-default-cursor")&&"e-frozen-left-border"==this.frozenDefaultBorderClass?-1:s,u=c;u<=p;u++)this.domLtoROrderedColumns[u].visible&&o.push(this.domLtoROrderedColumns[u].uid)}else if(t=!1,i="Left","e-frozen-left-border"!=this.frozenDefaultBorderClass)for(u=n;u>s;u--)this.domLtoROrderedColumns[u].visible&&o.push(this.domLtoROrderedColumns[u].uid);else for(u=n;-1!=u;u--)this.domLtoROrderedColumns[u].visible&&o.push(this.domLtoROrderedColumns[u].uid);else{var f=this.domRtoLOrderedColumns.reverse();if(a<l){if(t=!0,e="Right",i="Left","e-frozen-right-border"!=this.frozenDefaultBorderClass){n=this.currentCursorElement.classList.contains("e-frozen-default-cursor")?n+1:n;for(u=s;u<n;u++)f[u].visible&&o.push(f[u].uid)}}else if(t=!1,e="Left",i="Right","e-frozen-right-border"==this.frozenDefaultBorderClass)for(u=n;u<=s;u++)f[u].visible&&o.push(f[u].uid);else for(u=n;u<s;u++)f[u].visible&&o.push(f[u].uid)}}return{startIndex:n,endIndex:s,freezeDirection:e,isFrozen:t,freezeLineMovingDirection:i,frozenColumnsUidCollection:o}},e.prototype.checkForServerCall=function(e,t){var i=!0,n=this.parent.columnModel.slice(0,this.parent.options.actualFrozenColumns);if(n=(n=n.filter((function(e){return e.visible}))).concat(this.parent.columnModel.filter((function(e){return e.isFrozen&&e.visible}))),e)for(var s=0;s<this.parent.columnModel.length;s++)for(var o=0;o<t.length;o++)t[o]==this.parent.columnModel[s].uid&&n.push(this.parent.columnModel[s]);for(var r=0,a=0;a<n.length;a++)r+=+n[a].width;return this.parent.element.offsetWidth<=r&&(i=!1),i},e}(),G=function(){function i(t,i,n,s){var o=this;if(this.columnModel=[],this.frozenColumnModel=[],this.frozenReorderColumnModel=[],window.sfBlazor=window.sfBlazor,this.inViewIndexes=[],this.isRendered=!1,this.isGridFirstRender=!1,this.nColumnOffsets=[],this.tapEvent=function(t){if(this.resizeModule.getUserAgent())if(e.timer){clearTimeout(e.timer),e.timer=null;var i=document.createEvent("MouseEvents");i.initEvent("dblclick",!0,!0),t.target.dispatchEvent(i)}else e.timer=setTimeout((function(){e.timer=null}),300)},this.element=i,!sf.base.isNullOrUndefined(this.element)){if(this.dotNetRef=s,this.dataId=t,this.options=n,this.header=this.element.querySelector(".e-headercontent"),this.content=this.element.querySelector(".e-gridcontent .e-content"),this.footer=this.element.querySelector(".e-summarycontent"),this.element.offsetWidth<=0)var r=setInterval((function(){o.element.offsetWidth>0&&(o.initModules(),clearInterval(r))}),500);else this.initModules();this.addScrollEvents(!0),sf.base.isNullOrUndefined(this.element)||(this.element.blazor__instance=this,window.sfBlazor.setCompInstance(this))}}return i.prototype.initModules=function(){this.scrollModule=new m(this),this.freezeModule=new g(this),this.headerDragDrop=new b(this),this.contentDragDrop=new y(this),this.reorderModule=new w(this),this.groupModule=new N(this),this.resizeModule=new A(this),this.frozenDragDropModule=new K(this),this.editModule=new L(this),this.columnChooserModule=new k(this),this.clipboardModule=new B(this),this.columnMenuModule=new I(this),this.filterModule=new M(this),this.virtualContentModule=new z(this),this.virtualHeaderModule=new U(this),this.toolTipModule=new D(this),this.rowDragAndDropModule=new P(this),this.selectionModule=new R(this),this.widthService=new v(this),this.isRendered=this.options.isPrerendered,this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:Z,eventName:"keydown"}),this.options.enableColumnVirtualization&&this.virtualHeaderModule.renderTable(),this.options.enableVirtualization&&this.virtualContentModule.renderTable(),this.options.allowResizing&&this.resizeModule.render(),this.options.isFreezeLineMoved&&this.freezeLineMovedAction(),this.options.needClientAction?this.clientActions():this.contentReady(),this.lastRowBorderCheck(),this.wireEvents(),this.options.enableColumnVirtualization||this.updateColumnWidth(this.options.columns)},i.prototype.getHeaderContent=function(){return this.header},i.prototype.getHeaderTable=function(){return this.header.querySelector(".e-table")},i.prototype.getContent=function(){return this.content},i.prototype.getContentTable=function(){return this.content.querySelector(".e-table")},i.prototype.getFooterContent=function(){return this.footer},i.prototype.getColumns=function(e){return this.columnModel=[],this.updateColumnModel(this.options.columns),this.columnModel},i.prototype.freezeLineMovedAction=function(){this.options.isFreezeLineMoved=!1;var e=this.getContent().querySelector(".e-movablecontent");(sf.base.isNullOrUndefined(e)&&(e=this.getContent()),""!=e.querySelector("table").style.width)&&(0==this.options.frozenLeftColumnsCount&&0==this.options.frozenRightColumnsCount||this.updateColumnLevelFrozen(),new v(this).setWidthToTable());e.scrollLeft=0,this.element.querySelector(".e-movablescrollbar").scrollLeft=0},i.prototype.addScrollEvents=function(e){if(this.options.showColumnMenu){for(var t=sf.popups.getScrollableParent(this.element),i=0;i<t.length;i++)t[i]instanceof HTMLElement&&(e?sf.base.EventHandler.add(t[i],"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(t[i],"scroll",this.scrollHandler));e?sf.base.EventHandler.add(this.content,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(this.content,"scroll",this.scrollHandler)}},i.prototype.scrollHandler=function(e){if(!sf.base.isNullOrUndefined(this.element)&&!sf.base.isNullOrUndefined(this.element.blazor__instance))return this.columnMenuModule.setPosition()},i.prototype.updateColumnLevelFrozen=function(){var e=this.columnModel,t=[],i=[],n=[];if(0!=this.options.frozenRightCount||0!=this.options.frozenLeftCount||0!=this.options.frozenColumns){for(var s=0,o=e.length;s<o;s++){var r=e[s];"Left"===r.freeze&&r.isFrozen?t.push(r):"Right"===r.freeze&&r.isFrozen?i.push(r):n.push(r)}this.frozenColumnModel=t.concat(n).concat(i),this.frozenReorderColumnModel=t.concat(i).concat(n)}},i.prototype.updateColumnModel=function(e){if(!sf.base.isNullOrUndefined(e))for(var t=0,i=e.length;t<i;t++)null!=e[t].columns&&e[t].columns.length>0?this.updateColumnModel(e[t].columns):this.columnModel.push(e[t])},i.prototype.updateColumnWidth=function(e){this.nColumnOffsets=[];var t=0;if(!this.options.enableColumnVirtualization)for(var i=0,n=e.length;i<n;i++)t=parseInt(t.toString())+(e[i].visible?parseInt(e[i].width):0),this.nColumnOffsets.push(t)},i.prototype.getColumnByIndex=function(e){var t;return this.getColumns().some((function(i,n){return t=i,n===e})),t},i.prototype.getDataRows=function(){if(sf.base.isNullOrUndefined(this.getContentTable().querySelector("tbody")))return[];var e=[].slice.call(this.getContentTable().querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderTable().querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},i.prototype.addMovableRows=function(e,t){for(var i=0,n=t.length;i<n;i++)e.push(t[i]);return e},i.prototype.generateDataRows=function(e){for(var t=[],i=0,n=e.length;i<n;i++)e[i].classList.contains("e-row")&&!e[i].classList.contains("e-hiddenrow")&&t.push(e[i]);return t},i.prototype.getMovableDataRows=function(){var e=[].slice.call(this.getContent().querySelector(".e-movablecontent").querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},i.prototype.getFrozenDataRows=function(){var e=[].slice.call(this.getContent().querySelector(".e-frozencontent").querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},i.prototype.getRowByIndex=function(e){return this.getDataRows()[e]},i.prototype.getCellFromIndex=function(e,t){var i=this.options.frozenColumns;return i&&t>=i?this.getMovableDataRows()[e]&&this.getMovableDataRows()[e].querySelectorAll(".e-rowcell")[t-i]:this.getDataRows()[e]&&this.getDataRows()[e].querySelectorAll(".e-rowcell")[t]},i.prototype.getColumnHeaderByIndex=function(e){return this.getHeaderTable().querySelectorAll(".e-headercell")[e]},i.prototype.getRows=function(){return this.options.frozenColumns?this.getFrozenDataRows():[].slice.call(this.getContentTable().querySelectorAll("tr.e-row[data-uid]"))},i.prototype.getSelectedRows=function(){return this.getRows().filter((function(e){return"true"===e.getAttribute("aria-selected")}))},i.prototype.getSelectedRowIndexes=function(e){for(var t=[],i=this.getRows(),n=0;n<i.length;n++)if(i[n].hasAttribute("aria-selected")&&"true"===i[n].getAttribute("aria-selected")){var s=this.options.allowDragSelection&&this.options.enableVirtualization||e?parseInt(i[n].getAttribute("data-rowindex"),10):n;t.push(s)}return t},i.prototype.getVisibleColumns=function(){for(var e=[],t=0,i=this.columnModel;t<i.length;t++){var n=i[t];n.visible&&e.push(n)}return e},i.prototype.getColumnByField=function(e){return h(this.getColumns(),(function(t,i){if(t.field===e)return t}))[0]},i.prototype.getColumnIndexByField=function(e){for(var t=this.getColumns(),i=0;i<t.length;i++)if(t[i].field===e)return i;return-1},i.prototype.getColumnByUid=function(e){return h(this.getColumns().concat(this.getStackedColumns(this.options.columns)),(function(t,i){if(t.uid===e)return t}))[0]},i.prototype.getStackedColumns=function(e,t){void 0===t&&(t=[]);for(var i=0,n=e;i<n.length;i++){var s=n[i];s.columns&&(t.push(s),this.getStackedColumns(s.columns,t))}return t},i.prototype.getColumnIndexByUid=function(e){var t=h(this.getColumns(),(function(t,i){if(t.uid===e)return i}))[0];return sf.base.isNullOrUndefined(t)?-1:t},i.prototype.getColumnHeaderByUid=function(e){return this.getHeaderContent().querySelector("[e-mappinguid="+e+"]").parentElement},i.prototype.getUidByColumnField=function(e){return h(this.getColumns(),(function(t,i){if(t.field===e)return t.uid}))[0]},i.prototype.getStackedHeaderColumnByHeaderText=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(n.field===e||n.headerText===e){this.stackedColumn=n;break}n.columns&&this.getStackedHeaderColumnByHeaderText(e,n.columns)}return this.stackedColumn},i.prototype.getNormalizedColumnIndex=function(e){return this.getColumnIndexByUid(e)+this.getIndentCount()},i.prototype.getIndentCount=function(){var e=0;return this.options.allowGrouping&&(e+=this.options.groupCount),this.options.hasDetailTemplate&&e++,this.options.allowRowDragAndDrop&&!this.options.hasDropTarget&&e++,e},i.prototype.isPercentageWidth=function(){for(var e=this.getVisibleColumns(),t=0,i=0,n=0;n<e.length;n++)sf.base.isNullOrUndefined(e[n].width)?i++:-1!==e[n].width.toString().indexOf("%")&&t++;return t===e.length&&!i},i.prototype.recalcIndentWidth=function(){if(this.isRendered&&this.getHeaderTable().querySelector(".e-emptycell")&&(this.options.groupCount||this.options.hasDetailTemplate||!this.options.allowRowDragAndDrop||!this.options.hasDropTarget)&&this.getContentTable()&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")){var e=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,t=e/30;if(t>=1&&(e=30/t),this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true"),this.isPercentageWidth()){var i=e/30;i>=1&&(e=(e=30/i)>5?3.5:e),this.dotNetRef.invokeMethodAsync("SetIndentWidth",e+"%")}else this.dotNetRef.invokeMethodAsync("SetIndentWidth",e+"px")}},i.prototype.resetColumnWidth=function(){if(("auto"===this.options.width||"string"==typeof this.options.width)&&this.getColumns().filter((function(e){return(!e.width||"auto"===e.width)&&e.minWidth})).length>0){var e=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(e)}},i.prototype.contentReady=function(e){(void 0===e&&(e=null),this.getColumns().some((function(e){return e.autoFit}))&&this.resizeModule.autoFit(),this.options.allowResizing&&this.isGridFirstRender&&this.options.isColumnResized)&&(new v(this).setWidthToTable(),this.isGridFirstRender=!1);!this.isGridFirstRender&&this.options.frozenColumns&&this.options.enablePersistence&&new v(this).setWidthToTable();this.options.isColumnReordered&&!sf.base.isNullOrUndefined(this.getContent().querySelector(".e-movablecontent"))&&""!=this.getContent().querySelector(".e-movablecontent").querySelector("table").style.width&&new v(this).setWidthToTable();if(this.options.frozenColumns){if(this.freezeModule.refreshRowHeight(),this.freezeModule.setFrozenHeight(),0!=this.options.aggregatesCount){for(var t=this.element.querySelectorAll(".e-summaryrow"),i=0,n=0;n<t.length;n++)if(t[n].querySelectorAll(".e-templatecell").length>0){i=t[n].offsetHeight;break}for(n=0;n<t.length;n++)t[n].style.height=i+"px"}this.freezeModule.refreshStackedHdrHgt()}this.options.enableVirtualization&&this.virtualContentModule.onDataReady(),this.recalcIndentWidth(),this.resetColumnWidth(),this.lastRowBorderCheck(),"Paging"===e&&(r(document.activeElement,"e-grid")||this.element.focus());var s=this.element.querySelector(".e-groupdroparea");!sf.base.isNullOrUndefined(s)&&this.options.enableStickyHeader&&s.classList.contains("e-sticky")&&""===s.style.top&&s.classList.remove("e-sticky")},i.prototype.lastRowBorderCheck=function(){this.options.enableVirtualization||(this.getContent().querySelector(".e-table").scrollHeight<this.getContent().clientHeight?this.dotNetRef.invokeMethodAsync("LastRowBorder",!0):this.dotNetRef.invokeMethodAsync("LastRowBorder",!1))},i.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"focus",this.gridFocus,this),sf.base.EventHandler.add(document,"click",this.documentClickHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.gridKeyDownHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(document.body,"keydown",this.documentKeyHandler,this),sf.base.EventHandler.add(this.getContent(),"touchstart",this.tapEvent,this),sf.base.EventHandler.add(window,"resize",this.windowResized,this),sf.base.EventHandler.add(this.element,"contextmenu",this.mouseDownHandler,this),this.options.allowEditing&&sf.base.EventHandler.add(this.element,"dblclick",this.doubleClickHandler,this)},i.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"focus",this.gridFocus),sf.base.EventHandler.remove(document,"click",this.documentClickHandler),sf.base.EventHandler.remove(this.element,"keydown",this.gridKeyDownHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(document.body,"keydown",this.documentKeyHandler),sf.base.EventHandler.remove(this.element,"dblclick",this.doubleClickHandler),sf.base.EventHandler.remove(this.getContent(),"touchstart",this.tapEvent),sf.base.EventHandler.remove(window,"resize",this.windowResized),sf.base.EventHandler.remove(this.element,"contextmenu",this.mouseDownHandler)},i.prototype.windowResized=function(){var e=this;setTimeout((function(){var t=e.element.querySelector(".e-content.e-yscroll");!sf.base.isNullOrUndefined(t)&&t.scrollHeight>t.clientHeight?e.element.querySelector(".e-gridheader").style.paddingRight=s()+"px":e.scrollModule.setPadding()}),100)},i.prototype.doubleClickHandler=function(e){"TD"==e.target.tagName&&e.target.blur()},i.prototype.setOptions=function(e,t){var i=sf.base.extend(t,{});if(this.options=e,!i.allowResizing&&e.allowResizing&&this.resizeModule.render(),(!i.allowGrouping&&e.allowGrouping||!i.allowReordering&&e.allowReordering||e.showDropArea)&&(this.headerDragDrop.initializeHeaderDrag(),this.headerDragDrop.initializeHeaderDrop(),this.groupModule.initializeGHeaderDrag(),this.groupModule.initializeGHeaderDrop()),!i.allowGrouping&&e.allowGrouping&&this.contentDragDrop.initializeContentDrop(),!i.allowRowDragAndDrop&&e.allowRowDragAndDrop?this.rowDragAndDropModule.initializeDrag():i.allowRowDragAndDrop&&!e.allowRowDragAndDrop&&this.rowDragAndDropModule.destroy(),this.isRendered||(this.isRendered=this.options.isPrerendered),i.groupCount!=e.groupCount){var n=this.getHeaderTable().querySelector(".e-emptycell");if(!n)return;n.removeAttribute("indentRefreshed")}},i.prototype.documentClickHandler=function(e){var t=r(e.target,"e-cc-toolbar"),i=r(e.target,"e-gridform"),n=r(e.target,"e-toolbar-item"),s=r(e.target,"e-rowcell");this.options.enableAdaptiveUI||this.targetIsFilterDialog(e)||e.target.classList.contains("e-cc-cancel")||e.target.classList.contains("e-choosercheck")||e.target.classList.contains("e-icon-filter")||t||!this.element.querySelectorAll(".e-filter-popup.e-popup-open").length&&!this.element.querySelectorAll(".e-ccdlg.e-popup-open").length||(null!=this.element.querySelector(".e-datetimepicker")&&this.element.querySelector(".e-datetimepicker").blur(),this.dotNetRef.invokeMethodAsync("FilterPopupClose")),!sf.base.isNullOrUndefined(i)||s||n||this.targetIsFilterDialog(e)||!this.element.querySelector(".e-gridform")||this.dotNetRef.invokeMethodAsync("UpdateChanges")},i.prototype.targetIsFilterDialog=function(e){var t=r(r(e.target,"e-filter-popup"),"e-popup-open"),i=r(r(e.target,"e-ddl"),"e-popup-open"),n=r(r(e.target,"e-selectall"),"e-ftrchk"),s=r(e.target,"e-chkcancel-icon"),o=r(e.target,"e-datepicker"),a=r(e.target,"e-timepicker"),l=r(e.target,"e-daterangepicker")||r(e.target,"e-zoomin"),d=e.target.classList.contains("e-check")||e.target.classList.contains("e-uncheck"),h=r(r(e.target,"e-ccdlg"),"e-popup-open");return!!(t||i||n||s||o||a||l||d||h)},i.prototype.documentKeyHandler=function(e){if(e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&(this.element.focus(),this.dotNetRef.invokeMethodAsync("GridFocus",e)),e.altKey&&87===e.keyCode&&!sf.base.isNullOrUndefined(this.element)){var t=e.target.classList.contains("e-grid"),i=!sf.base.isNullOrUndefined(r(e.target,"e-pager"));this.dotNetRef.invokeMethodAsync("GridKeyDown",{key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey},!1,t,i)}},i.prototype.keyDownHandler=function(e){var t=r(e.target,"e-grid"),i=e.target.tagName,n=e.target.classList.contains("e-grid"),s=!sf.base.isNullOrUndefined(r(e.target,"e-pager")),o=!1;if(!(t&&t.id!==this.element.id||"Shift"==e.key||"Control"==e.key||"Alt"==e.key)&&("INPUT"!=i&&"TEXTAREA"!=i||"Delete"!=e.code)){e.target.classList.contains("e-searchinput")&&"Enter"==e.key&&(o=!0);var a=this.isPopUpOpened(e);!a||"Escape"!=e.key&&"Enter"!=e.key||"BODY"!=document.activeElement.tagName||e.target.focus(),"Escape"==e.key&&a&&"true"===e.target.getAttribute("aria-expanded")||this.dotNetRef.invokeMethodAsync("GridKeyDown",{key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey},o,n,s)}},i.prototype.isPopUpOpened=function(e){var t=e.target.classList.contains("e-datepicker"),i=e.target.classList.contains("e-datetimepicker"),n=e.target.classList.contains("e-timepicker"),s=e.target.classList.contains("e-daterangepicker"),o=e.target.classList.contains("e-multiselect"),r=e.target.classList.contains("e-ddl"),a=e.target.classList.contains("e-autocomplete"),l=e.target.classList.contains("e-combobox");return t||i||n||s||o||r||a||l},i.prototype.gridKeyDownHandler=function(e){var t=r(e.target,"e-filter-popup"),i=e.target.tagName;!sf.base.isNullOrUndefined(t)&&t.classList.contains("e-popup-open")&&"Escape"!=e.key&&(e.stopPropagation(),"Tab"!=e.key&&"shiftTab"!=e.key&&"Enter"!=e.key&&"shiftEnter"!=e.key||"INPUT"!=i&&"TEXTAREA"!=i||((n=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.target.dispatchEvent(n)));(("Tab"==e.key||"Escape"==e.key||"shiftTab"==e.key||"Enter"==e.key||"shiftEnter"==e.key)&&("INPUT"==i||"TEXTAREA"==i||e.target.classList.contains("e-datepicker")||e.target.classList.contains("e-datetimepicker"))||e.target.classList.contains("e-rowcell")&&"F2"==e.key)&&("Tab"==e.key&&(e.target.classList.contains("e-datepicker")||e.target.classList.contains("e-datetimepicker"))||e.target.blur()),"Shift"!=e.key&&"Control"!=e.key&&"Alt"!=e.key||e.stopPropagation(),67===e.keyCode&&e.ctrlKey?this.clipboardModule.copy():72===e.keyCode&&e.ctrlKey&&e.shiftKey&&this.clipboardModule.copy(!0),86===e.keyCode&&e.ctrlKey&&!this.options.isEdit&&(e.stopPropagation(),this.clipboardModule.pasteHandler());var n,s=this.element.querySelector(".e-normaledit");if(!sf.base.isNullOrUndefined(s)&&"Tab"==e.key){var o=Array.from(s.querySelectorAll(".e-rowcell")).filter((function(e){return!(e.classList.contains("e-hide")||e.querySelector(".e-disabled"))}));(!e.shiftKey&&o[o.length-1]==r(e.target,"e-rowcell")||e.shiftKey&&o[0]==r(e.target,"e-rowcell"))&&(this.dotNetRef.invokeMethodAsync("EndEdit"),e.preventDefault())}this.element.querySelector(".e-batchrow")&&("Tab"!=e.key&&"shiftTab"!=e.key&&"Enter"!=e.key&&"shiftEnter"!=e.key&&"Escape"!=e.key&&e.stopPropagation(),("Tab"==e.key||"shiftTab"==e.key||"Enter"==e.key||"shiftEnter"==e.key)&&(e.preventDefault(),("INPUT"==i||"TEXTAREA"==i)&&((n=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.target.dispatchEvent(n))))},i.prototype.mouseDownHandler=function(e){var t=r(e.target,"e-grid");if(!t||t.id===this.element.id)if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),-1!==e.button&&2!==e.button&&r(e.target,"e-headercell")||2!==e.button&&r(e.target,"e-detailcell")||r(e.target,"e-detailrowexpand")||r(e.target,"e-detailrowcollapse")||e.target.classList.contains("e-content")||e.target.classList.contains("e-headercontent")||sf.base.closest(e.target,".e-groupdroparea")||sf.base.closest(e.target,".e-gridpopup")||sf.base.closest(e.target,".e-summarycell")||sf.base.closest(e.target,".e-rhandler")||sf.base.closest(e.target,".e-filtermenudiv")||sf.base.closest(e.target,".e-filterbarcell")||sf.base.closest(e.target,".e-groupcaption"))this.dotNetRef.invokeMethodAsync("MouseDownHandler",null,null);else{var i=null,n=null,s=r(r(e.target,"e-gridform"),"e-grid");r(e.target,"e-editcell")||s&&s.id==t.id?i="Edit":r(e.target,"e-pager")?i="Pager":r(e.target,"e-headercontent")?(i="Header",n=r(e.target,"e-headercell")?r(e.target,"e-headercell").getAttribute("data-uid"):null):r(e.target,"e-content")&&(i="Content",n=r(e.target,"e-rowcell")?r(e.target,"e-rowcell").getAttribute("data-uid"):null),"Header"!=i&&"Content"!=i&&"Pager"!=i&&"Edit"!=i||this.dotNetRef.invokeMethodAsync("MouseDownHandler",i,n)}},i.prototype.gridFocus=function(e){!sf.base.isNullOrUndefined(this.element.querySelector(".e-gridform"))&&this.element.querySelector(".e-gridform").classList.contains("e-editing")||this.dotNetRef.invokeMethodAsync("GridFocus",e)},i.prototype.keyActionHandler=function(e){var t=this;"pageUp"!==e.action&&"pageDown"!==e.action&&"ctrlAltPageUp"!==e.action&&"ctrlAltPageDown"!==e.action&&"altPageUp"!==e.action&&"altPageDown"!==e.action&&"altDownArrow"!==e.action&&"ctrlPlusP"!==e.action||e.preventDefault();var i=this.isPopUpOpened(e);"enter"===e.action&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-gridform"))&&this.element.querySelector(".e-gridform").classList.contains("e-editing")&&"Batch"!==this.options.editMode&&(i&&"false"===e.target.getAttribute("aria-expanded")||!i)&&setTimeout((function(){e.target.blur(),t.dotNetRef.invokeMethodAsync("EndEdit")}),40)},i.prototype.destroy=function(e){this.unWireEvents(),this.frozenDragDropModule.unwireEvents(),e&&this.virtualContentModule.removeEventListener(),this.addScrollEvents(!1),this.toolTipModule.destroy(),this.keyModule.destroy(),this.columnChooserModule.removeMediaListener(),this.selectionModule.removeEventListener(),this.rowDragAndDropModule.destroy(),this.headerDragDrop.destroy()},i.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},i.prototype.setColumnIndexesInView=function(e){this.inViewIndexes=e},i.prototype.getRowHeight=function(){return this.options.rowHeight?this.options.rowHeight:function(e){if(void 0!==t)return t;var i=sf.base.createElement("table",{className:"e-table",styles:"visibility: hidden"});i.innerHTML='<tr><td class="e-rowcell">A<td></tr>',e.appendChild(i);var n=i.querySelector("td").getBoundingClientRect();return e.removeChild(i),t=Math.ceil(n.height)}(this.element)},i.prototype.clientActions=function(){!this.options.enableVirtualization||12!==this.options.pageSize&&"auto"!==this.options.width||this.virtualContentModule.ensurePageSize(),this.getColumns().some((function(e){return""!==e.hideAtMedia}))&&this.columnChooserModule.setMediaColumns()},i.prototype.print=function(){this.removeColGroup();var e=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no");e.moveTo(0,0),e.resizeTo(screen.availWidth,screen.availHeight),sf.base.print(this.element,e)},i.prototype.removeColGroup=function(){var e=this.options.groupCount,t=this.element,i="#"+this.element.id;if(e){for(var n=t.querySelectorAll(".e-groupcaption"),s=n[e-1].getAttribute("colspan"),o=0;o<n.length;o++)n[o].setAttribute("colspan",s);var r=t.querySelectorAll("colgroup"+i+"colGroup"),a=t.querySelector(".e-content").querySelectorAll("colgroup");this.hideColGroup(r,e),this.hideColGroup(a,e)}},i.prototype.hideColGroup=function(e,t){for(var i=0;i<e.length;i++)for(var n=0;n<t;n++)e[i].children[n].style.display="none"},i.prototype.getModuleName=function(){return"grid"},i}(),Z={pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",enter:"enter"};return{initialize:function(e,t,i,n){sf.base.enableBlazorMode(),new G(e,t,i,n)},contentReady:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.element.blazor__instance)){var s=n.element.blazor__instance;s.setOptions(t,s.options),s.options=t,s.scrollModule.setPadding(),s.contentReady(i),t.enableColumnVirtualization&&"100%"==t.height&&s.scrollModule.refresh()}},customFilterDialog:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.element.blazor__instance)){var s=document.querySelector("#"+t);if(s.style.maxHeight="100%",s.style.border="1px",s.style.top="0px",i){var o=n.element.querySelector(".e-sfcontextmenu");o.querySelector("li").style.paddingLeft="0px",o.querySelector(".e-caret").style.paddingRight="8px"}}},setCustomFilterDialogPadding:function(e,t){document.querySelector("#"+t).style.padding="16px"},searchClear:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=document.querySelector("#"+t);n.value="",n.focus()}},updateTableWidth:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;if(n.options.columns=t,n.options.allowResizing&&n.options.isResizedGrid)new v(n).setWidthToTable(t)}},preventResizeAction:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.resizeModule.preventResizeAction(t)},preventFreezeLineMoving:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.frozenDragDropModule.preventFreezeLineMoving(t)},freezeLineMovedActions:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;n.options.actualFrozenColumns=t.actualFrozenColumns,n.options.columns=t.columns,n.options.frozenRightCount=t.frozenRightCount,n.options.frozenLeftCount=t.frozenLeftCount,n.options.frozenLeftColumnsCount=t.frozenLeftColumnsCount,n.options.frozenColumns=t.frozenColumns,n.options.isColumnReordered=t.isColumnReordered,n.freezeLineMovedAction(),n.freezeModule.setFrozenHeight()}},frozenHeight:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.element.blazor__instance)){var s=n.element.blazor__instance;s.freezeModule.setFrozenHeight(),t.allowTextWrap&&s.freezeModule.refreshRowHeight()}},updateVirtualColumns:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;if(n.options.virtualizedColumns=t,n.options.allowResizing&&0==n.options.frozenColumns&&""!=n.getContent().querySelector("table").style.width)new v(n).setWidthToTable(null,!1,"resize")}},updateOptions:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;n.setOptions(t,n.options)}},virtualHeight:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.element.blazor__instance)){var s=n.element.blazor__instance;s.options=t,s.options.totalItemCount=i,s.virtualContentModule.refreshOffsets(),s.virtualContentModule.setVirtualHeight()}},lazyGroupExpand:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;n.setOptions(t,n.options),n.options=t,n.options.enableVirtualization&&n.virtualContentModule.onDataReady()}},viewRefresh:function(e,t){if(!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(e.blazor__instance)){e.blazor__instance;var i=void 0;i=new v(this);var n=(t=t.filter((function(e){return e.visible}))).some((function(e){return""==e.width||null==e.width}));i.setWidthToTable(t,n)}},virtualDisconnect:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||sf.base.isNullOrUndefined(i.element.blazor__instance.virtualContentModule)||(i.element.blazor__instance.options.enableVirtualization=t.enableVirtualization,i.element.blazor__instance.virtualContentModule.observer.disconnect())},reorderColumns:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)||n.element.blazor__instance.reorderModule.reorderColumns(t,i)},reorderColumnByIndex:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)||n.element.blazor__instance.reorderModule.reorderColumnByIndex(t,i)},reorderColumnByTargetIndex:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)||n.element.blazor__instance.reorderModule.reorderColumnByTargetIndex(t,i)},renderColumnChooser:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||t.element.blazor__instance.columnChooserModule.renderColumnChooser()},renderColumnMenu:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(s.element)||sf.base.isNullOrUndefined(s.element.blazor__instance)?{Left:1,Top:1}:s.element.blazor__instance.columnMenuModule.renderColumnMenu(t,i,n)},filterPopupRender:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(o.element)||sf.base.isNullOrUndefined(o.element.blazor__instance)||o.element.blazor__instance.filterModule.filterPopupRender(t,i,n,s)},clientHeight:function(e){var t=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)?0:Math.max(t.element.blazor__instance.content.clientHeight,window.innerHeight||0)},clientTransformUpdate:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)||n.element.blazor__instance.virtualContentModule.updateTransform(t,i)},updatePersistedGrid:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o.element)&&!sf.base.isNullOrUndefined(o.element.blazor__instance)){var r=o.element.blazor__instance;if(t&&(r.options.columns=n,r.resizeModule.autoFitColumns(s)),i)new v(r).setPersistedWidth(n[0])}},refreshColumnIndex:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;n.options.columns=t,n.virtualContentModule.refreshColumnIndexes()}},focus:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e),o=s.element.querySelector('[data-uid="'+i+'"]');if(!sf.base.isNullOrUndefined(s.element)&&!sf.base.isNullOrUndefined(s.element.blazor__instance)&&!sf.base.isNullOrUndefined(o)){var r=s.element.blazor__instance;r.options.enableVirtualization?r.virtualContentModule.focusCell(o,n):o.focus()}},focusFilterBar:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||("Tab"==t?document.activeElement.classList.contains("e-headercell")&&(i.element.querySelector(".e-headercell.e-focus.e-focused").blur(),i.element.querySelector(".e-filterbarcell")[0].focus()):"ShiftTab"==t&&document.activeElement.classList.contains("e-rowcell")&&(i.element.querySelector(".e-rowcell.e-focus.e-focused").blur(),i.element.querySelector(".e-filterbarcell:last-child").focus()))},focusFirstGroupHeader:function(e){var t=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(t.element)&&!sf.base.isNullOrUndefined(t.element.blazor__instance)){var i=t.element.querySelector(".e-groupheadercell");sf.base.isNullOrUndefined(i)||i.focus()}},focusExcelInput:function(e,t){var i=window.sfBlazor.getCompInstance(e),n=document.querySelector("#"+t+"_excelDlg");sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||sf.base.isNullOrUndefined(n)||setTimeout((function(){n.querySelector("#"+i.element.id+"_SearchBox").focus()}),10)},refreshOnDataChange:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||t.element.blazor__instance.virtualContentModule.refreshOnDataChange()},updateAutofillPosition:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)?null:n.element.blazor__instance.selectionModule.updateAutofillPosition(t,i)},createBorder:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)?null:n.element.blazor__instance.selectionModule.createBorder(t,i)},removePersistItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;n.getHeaderTable().style.width="",n.getContentTable().style.width="",0!=n.options.aggregatesCount&&(n.getFooterContent().querySelector(".e-table").style.width=""),n.options.frozenColumns>0&&(n.element.querySelector(".e-movableheader").querySelector(".e-table").style.width="",n.element.querySelector(".e-movablecontent").querySelector(".e-table").style.width="")}localStorage.removeItem(t)},focusChild:function(e,t,i){var n=window.sfBlazor.getCompInstance(e),s=[].slice.call(n.element.querySelector('[data-uid="'+i+'"]').querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])'));return s.length>0?s[0].focus():n.element.querySelector('[data-uid="'+i+'"]').focus(),!!s.length},exportSave:function(e,t){if(navigator.msSaveBlob){for(var i=window.atob(t),n=new Uint8Array(i.length),s=0;s<i.length;s++)n[s]=i.charCodeAt(s);var o=new Blob([n.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(o,e)}else{var r=document.createElement("a");r.download=e,r.href="data:application/octet-stream;base64,"+t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},destroy:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.destroy(t)},validation:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)||n.element.blazor__instance.editModule.createTooltip(t,i)},focusCell:function(e,t,i,n){void 0===n&&(n=!1);var s=window.sfBlazor.getCompInstance(e);i&&!sf.base.isNullOrUndefined(s.element)&&!sf.base.isNullOrUndefined(s.element.blazor__instance)&&s.element.blazor__instance.options.frozenColumns&&(s.element.querySelector(".e-frozencontent").style.height=s.element.querySelector(".e-movablecontent").getBoundingClientRect().height+"px");var o="#"+t.replace(/[.]/g,"___");if(n)for(var r=[].slice.call(s.element.querySelectorAll("form")),a=void 0,l=0;l<r.length;l++)(a=r[l].querySelector("td:not(.e-hide)")).style.height=sf.base.closest(a,".e-row").getBoundingClientRect().height+"px";""===t&&s.element.querySelector("input.e-boolcell")?s.element.querySelector("input.e-boolcell").focus():""!==t&&s.element.querySelector(o)&&s.element.querySelector(o).focus()},CurrentPageFocus:function(e,t,i){var n=window.sfBlazor.getCompInstance(e).element.querySelector(".e-numericcontainer");"PreviousPage"==t||n.querySelectorAll(".e-link:last-child")[0].innerText!=i?n.querySelector(".e-link").focus():n.querySelectorAll(".e-link:last-child")[0].focus()},pagerFocus:function(e,t){var i=window.sfBlazor.getCompInstance(e).element.querySelector(".e-gridpager").querySelector(".e-pagercontainer"),n=i.querySelector(".e-numericcontainer"),s=i.querySelector(".e-firstpage.e-pager-default"),o=i.querySelector(".e-prevpage.e-pager-default");if("ArrowDown"===t)return s?(s.focus(),"FirstPage"):o?(s.focus(),"PreviousPage"):(n.querySelectorAll(".e-link")[1].focus(),"1");if("ArrowRight"==t)return null!=s&&s.classList.contains("e-focused")?(o.focus(),"PreviousPage"):null!=o&&o.classList.contains("e-focused")||null!=i.querySelector(".e-pp.e-focused")?null==i.querySelector(".e-pp")||i.querySelector(".e-pp").classList.contains("e-focused")?(n.querySelectorAll(".e-link")[0].focus(),n.querySelectorAll(".e-link")[0].innerText):(i.querySelector(".e-pp").focus(),"PreviousPagerCount"):n.querySelectorAll(".e-link.e-focused").length>0&&null!=i.querySelector(".e-link.e-focused")&&null!=i.querySelector(".e-link.e-focused").nextElementSibling?(n.querySelector(".e-link.e-focused").nextElementSibling.focus(),n.querySelector(".e-link.e-focused").nextElementSibling.innerText):n.querySelectorAll(".e-link.e-focused").length>0&&null!=i.querySelector(".e-np")&&null==i.querySelector(".e-np.e-focused")?(i.querySelector(".e-np").focus(),"NextPagerCount"):n.querySelectorAll(".e-link.e-focused").length>0||i.querySelectorAll(".e-np.e-focused").length>0?null!=i.querySelector(".e-nextpage")?(i.querySelector(".e-nextpage").focus(),"NextPage"):(n.querySelector(".e-link.e-focused").focus(),n.querySelector(".e-link.e-focused").innerText):(i.querySelector(".e-nextpage.e-focused"),i.querySelector(".e-lastpage").focus(),"LastPage");if("ArrowLeft"==t){if(null!=o&&o.classList.contains("e-focused"))return s.focus(),"FirstPage";if(o&&i.querySelector(".e-pp.e-focused"))return o.focus(),"PreviousPage";if(n.querySelectorAll(".e-link")[0].classList.contains("e-focused"))return null!=i.querySelector(".e-pp")?(i.querySelector(".e-pp").focus(),"PreviousPagerCount"):o?(o.focus(),"PreviousPage"):(n.querySelectorAll(".e-link")[0].focus(),"1");if(n.querySelectorAll(".e-link.e-focused").length>0)return n.querySelector(".e-link.e-focused").previousElementSibling.focus(),n.querySelector(".e-link.e-focused").previousElementSibling.innerText;if(i.querySelectorAll(".e-nextpage.e-focused").length>0&&null!=i.querySelector(".e-np"))return i.querySelector(".e-np").focus(),"NextPagerCount";if(i.querySelectorAll(".e-nextpage.e-focused").length>0||i.querySelectorAll(".e-np.e-focused").length>0){var r=n.querySelectorAll(".e-link").length;return n.querySelectorAll(".e-link")[r-1].focus(),n.querySelectorAll(".e-link:last-child")[0].innerText}return null!=i.querySelector(".e-lastpage.e-focused")?(i.querySelector(".e-nextpage").focus(),"NextPage"):s.classList.contains(".e-disabled")?"0":(s.focus(),"FirstPage")}return"0"},setFrozenHeight:function(e){e.querySelector(".e-frozencontent").style.height=e.querySelector(".e-movablecontent").offsetHeight-s()+"px"},printGrid:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||t.element.blazor__instance.print()},updateMediaColumns:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.columnChooserModule.updateMediaColumns(t)},copyToClipBoard:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.clipboardModule.copy(t)},setMediaColumns:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.columnChooserModule.setMediaColumns(t)},gridFocus:function(e){var t=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(t.element)){if(t.element.querySelectorAll(".e-groupheadercell").length>0&&document.activeElement.classList.contains("e-headercell")){var i=t.element.querySelectorAll(".e-ungroupbutton").length;return void t.element.querySelectorAll(".e-ungroupbutton")[i-1].focus()}if(0==t.element.querySelectorAll(".e-groupheadercell").length&&t.options.allowGrouping&&document.activeElement.classList.contains("e-headercell"))return void t.element.querySelector(".e-groupdroparea").focus();t.element.focus()}},isMacDevice:function(){return-1!==navigator.userAgent.indexOf("Mac OS")},scrollIntoView:function(e,t,i,n,s){void 0===s&&(s=!1);var o=window.sfBlazor.getCompInstance(e).element.blazor__instance,r=o.getContent();s?r.scrollTop=r.scrollHeight:-1!=i&&(r.scrollTop=-1!=n?i*n:i*o.getRowHeight()),r=o.options.frozenColumns?o.scrollModule.getMovableContent():r;var a=o.virtualContentModule.vHelper.cOffsets,l=o.nColumnOffsets;setTimeout((function(){if(o.options.frozenColumns||-1==t||(o.options.enableColumnVirtualization?r.scrollLeft=a[t-1]:r.scrollLeft=l[t-1]),o.options.enableColumnVirtualization&&t>0&&o.options.frozenColumns){var e=t-(o.virtualContentModule.movableColumnIndex+1);r.scrollLeft=a[e]}}),20)}}}()},"./modules/sf-heatmap.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.HeatMap=function(){"use strict";var e=function(){function e(e,t){this.resizeTimer=0,this.previousCellID="",this.element=e,this.element.blazorInstance=this,this.dotnetRef=t}return e.prototype.initialize=function(e){var t=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.add(this.element,"click",this.heatMapMouseClick,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.heatMapMouseMove,this),sf.base.EventHandler.add(this.element,t,this.heatMapMouseLeave,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.heatMapMouseMove,this);var i=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,i,this.resizeBound.bind(this),this);var n=this.getElementBounds(this.element),s=this.getMaxLabelSize(e.XAxisLabels,e.XAxisTextStyles),o=this.getMaxLabelSize(e.YAxisLabels,e.YAxisTextStyles),r=this.getMaxLabelSize([e.TitleText],e.TitleStyle),a=this.getMaxLabelSize(e.LegendLabels,e.LegendTextStyle);return JSON.stringify({availableSize:n,xAxisSize:s,yAxisSize:o,titleSize:r,legendTextSize:a})},e.prototype.heatMapMouseClick=function(e){this.dotnetRef.invokeMethodAsync("HeatMapMouseClick",this.getEventArgs(e),this.getElementBounds(this.element))},e.prototype.heatMapMouseLeave=function(e){this.dotnetRef.invokeMethodAsync("HeatMapMouseLeave",this.getEventArgs(e),this.getElementBounds(this.element))},e.prototype.heatMapMouseMove=function(e){this.dotnetRef.invokeMethodAsync("HeatMapMouseMove",this.getEventArgs(e),this.getElementBounds(this.element))},e.prototype.resizeBound=function(){var e=this;this.resizeTimer&&clearTimeout(this.resizeTimer),this.element&&(this.resizeTimer=setTimeout((function(){return e.dotnetRef.invokeMethodAsync("ResizeBound",e.getElementBounds(e.element).height,e.getElementBounds(e.element).width,e.getElementBounds(e.element).parentHeight)}),500))},e.prototype.setMouseXY=function(e,t,i){var n=document.getElementById(i).getBoundingClientRect(),s=document.getElementById(i).getBoundingClientRect();this.mouseY=t-s.top-Math.max(n.top-s.top,0),this.mouseX=e-s.left-Math.max(n.left-s.left,0)},e.prototype.renderTooltip=function(e,t,i,n,s,o,r,a,l){var d=document.getElementById(t+"_svg"),h=!(d&&parseInt(d.getAttribute("opacity"),10)>0),c="string"==typeof i?JSON.parse(i):i;s&&!o&&this.updateCellHighlight(i.id),l&&"TailwindDark"==l&&(c.fill="#F9FAFB"),l&&"Bootstrap5Dark"==l&&(c.fill="#E9ECEF");var p=e.blazorInstance;c.content=c.xLabel+c.yLabel+c.value,h&&!sf.base.isNullOrUndefined(p)?(c.content=c.displayText,c.location={x:c.x+c.width/2,y:c.y+c.height/2},c.areaBounds={height:n.height+n.y,width:n.width,x:n.x},c.opacity="Tailwind"==l||"TailwindDark"===l||"Bootstrap5"===l||"Bootstrap5Dark"===l?1:.75,c.theme=l,p.tooltip=new sf.svgbase.Tooltip(c),p.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(p.tooltip)||(sf.base.isNullOrUndefined(r)||(p.tooltip.border.color=a.color||p.tooltip.border.color,p.tooltip.textStyle.color=r.color||p.tooltip.textStyle.color,p.tooltip.textStyle.fontFamily=r.fontFamily||p.tooltip.textStyle.fontFamily,p.tooltip.textStyle.fontStyle=r.fontStyle||p.tooltip.textStyle.fontStyle,p.tooltip.textStyle.fontWeight=r.fontWeight||p.tooltip.textStyle.fontWeight,p.tooltip.textStyle.size=r.size||p.tooltip.textStyle.size),l&&"Tailwind"==l&&(p.tooltip.textStyle.color="#FFFFFF",p.tooltip.textStyle.fontWeight="500",p.tooltip.textStyle.size="12px",p.tooltip.textStyle.fontFamily="Inter"),l&&"TailwindDark"==l&&(p.tooltip.textStyle.color="#1F2937",p.tooltip.textStyle.fontWeight="500",p.tooltip.textStyle.size="12px",p.tooltip.textStyle.fontFamily="Inter"),l&&"Bootstrap5"==l&&(p.tooltip.border.width=0,p.tooltip.border.color="",p.tooltip.fill="",p.tooltip.opacity=.75,p.tooltip.textStyle.opacity=1,p.tooltip.textStyle.color=null,p.tooltip.textStyle.fontWeight="Normal",p.tooltip.textStyle.size="13px",p.tooltip.textStyle.fontFamily="Segoe UI"),l&&"Bootstrap5Dark"==l&&(p.tooltip.textStyle.color="#212529",p.tooltip.textStyle.fontWeight="500",p.tooltip.textStyle.size="14px",p.tooltip.textStyle.fontFamily="system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'"),c.toolTipX=c.x+c.width/2,c.toolTipY=c.y+c.height/2,c.content=c.displayText,p.tooltip.location=new sf.svgbase.TooltipLocation(c.toolTipX,c.toolTipY),p.tooltip.content=[c.content],p.tooltip.dataBind())},e.prototype.updateCellHighlight=function(e){this.previousCellID!==e&&(""!=this.previousCellID&&this.setOpacity(document.getElementById(this.previousCellID),"1"),this.setOpacity(document.getElementById(e),"0.65"),this.previousCellID=e)},e.prototype.setOpacity=function(e,t){e.setAttribute("opacity",t)},e.prototype.getElementBounds=function(e){var t=this.stringToNumber(this.width,e.offsetWidth)||e.offsetWidth||600,i=this.stringToNumber(this.height,e.offsetHeight)||450,n=e.getBoundingClientRect();return{width:t,height:i,parentHeight:e.parentElement?e.parentElement.offsetHeight:i,left:Math.ceil(n.left),top:Math.ceil(n.top),right:Math.ceil(n.right),bottom:Math.ceil(n.bottom)}},e.prototype.stringToNumber=function(e,t){return sf.base.isNullOrUndefined(e)?null:-1!==e.indexOf("%")?t/100*parseInt(e,10):parseInt(e,10)},e.prototype.getMaxLabelSize=function(e,t){for(var i={height:0,width:0,top:0,left:0,right:0,bottom:0,parentHeight:0},n=0;n<e.length;n++){var s=this.measureText(e[n],t);i.height<s.height&&(i.height=s.height),i.width<s.width&&(i.width=s.width)}return i},e.prototype.getEventArgs=function(e){var t=e.changedTouches?e.changedTouches[0].clientX:e.clientX,i=e.changedTouches?e.changedTouches[0].clientY:e.clientY;this.setMouseXY(t,i,e.currentTarget.id);var n=e.touches,s=[];if(e.type.indexOf("touch")>-1)for(var o=0,r=n.length;o<r;o++)s.push({pageX:n[o].clientX,pageY:n[o].clientY,pointerId:e.pointerId||0});return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0},touches:s,pointerId:e.pointerId,ctrlKey:e.ctrlKey}},e.prototype.labelInterSect=function(e,t,i,n){for(var s=!1,o=0;o<t[0].length;o++){if(this.measureText(t[0][o],t[1]).width>n){s=!0;break}}var r=this.returnLabels(t[0],t[1],t[2]),a=this.returnLabels(i[0],i[1],i[2]);this.dotnetRef.invokeMethodAsync("LabelInterSect",s,r,a)},e.prototype.returnLabels=function(e,t,i){for(var n=0;n<e.length;n++){var s=e[n],o=this.measureText(s,t).width;if(o>i)for(var r=s.length-1;r>=0&&(s=s.substring(0,r)+"...",!((o=this.measureText(s,t).width)<=i));--r);e[n]=s}return e},e.prototype.measureText=function(e,t){var i=document.getElementById("heatmapmeasuretext");return null===i&&(i=sf.base.createElement("text",{id:"heatmapmeasuretext"}),document.body.appendChild(i)),i.setAttribute("style","position:absolute;visibility:hidden;font-size:"+t.size+";font-weight:"+t.fontWeight+";font-style:"+t.fontStyle+";font-family:"+t.fontFamily+";top:-100;left:0;white-space:nowrap;line-height:normal"),i.innerText=e,{height:i.clientHeight,width:i.clientWidth,top:null,left:null,right:null,bottom:null,parentHeight:null}},e.prototype.destroy=function(){var e=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.remove(this.element,"click",this.heatMapMouseClick),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.heatMapMouseMove),sf.base.EventHandler.remove(this.element,e,this.heatMapMouseLeave),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.heatMapMouseMove);var t=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,t,this.resizeBound.bind(this)),this.element=null},e}();return{initialize:function(t,i,n){return new e(t,i),t&&t.blazorInstance?t.blazorInstance.initialize(n):null},labelInterSect:function(e,t,i,n,s){e&&e.blazorInstance&&e.blazorInstance.labelInterSect(t,i,n,s)},renderTooltip:function(e,t,i,n,s,o,r,a,l,d){e&&e.blazorInstance&&e.blazorInstance.renderTooltip(e,t,n,s,o,r,a,l,d)},fadeOut:function(e){if(e&&e.blazorInstance){if(sf.base.isNullOrUndefined(e.blazorInstance)||!sf.base.isNullOrUndefined(e.blazorInstance)&&sf.base.isNullOrUndefined(e.blazorInstance.tooltip))return;""!=e.blazorInstance.previousCellID&&(e.blazorInstance.setOpacity(document.getElementById(e.blazorInstance.previousCellID),"1"),e.blazorInstance.previousCellID="",e.blazorInstance.tooltip.fadeOut())}},destroy:function(e){e&&e.blazorInstance&&e.blazorInstance.destroy()}}}()},"./modules/sf-inplaceeditor.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.InPlaceEditor=function(){"use strict";var e="e-inplaceeditor",t="e-editable-open",i=function(){function i(e){this.submitOnEnter=!0,this.clearComponents=["AutoComplete","Mask","Text"],window.sfBlazor=window.sfBlazor,this.updateContext(e),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this)}return i.prototype.updateContext=function(e){sf.base.extend(this,this,e)},i.prototype.initialize=function(){this.onResizeScrollHandler=this.scrollResizeHandler.bind(this),this.wireEvents(),this.id=this.element.id,this.dotNetRef.invokeMethodAsync("Created",null)},i.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.valueKeyDownHandler,this),sf.base.EventHandler.add(document,"scroll",this.scrollResizeHandler,this),window.addEventListener("resize",this.onResizeScrollHandler),Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this)},i.prototype.scrollResizeHandler=function(){"Popup"!==this.mode||sf.base.Browser.isDevice||this.dotNetRef.invokeMethodAsync("CancelAction",null)},i.prototype.valueKeyDownHandler=function(i){"Tab"===i.code&&!0===i.shiftKey&&"BUTTON"!==i.target.tagName&&("Submit"===this.actionOnBlur?this.dotNetRef.invokeMethodAsync("SaveAction",null):"Cancel"===this.actionOnBlur&&this.dotNetRef.invokeMethodAsync("CancelAction",null)),"Enter"!==i.code||!i.target.classList.contains(e)||this.element.querySelector(".e-editable-value-container").classList.contains(t)||this.element.classList.contains("e-disable")||(i.preventDefault(),this.dotNetRef.invokeMethodAsync("RenderEditor",null))},i.prototype.mouseDownHandler=function(e){e.target.classList.contains("e-clear-icon")&&(this.isClearTarget=!0)},i.prototype.openEditor=function(e){if(this.updateContext(e),"Popup"===this.mode&&(this.popupContent=document.querySelector("#"+this.popupElement+"_content")),"Ignore"!==this.actionOnBlur&&sf.base.EventHandler.add(document,"mousedown",this.docClickHandler,this),this.submitOnEnter){var t="Popup"===this.mode?this.popupContent:this.element;sf.base.EventHandler.add(t,"keydown",this.enterKeyDownHandler,this)}this.dotNetRef.invokeMethodAsync("FocusEditor")},i.prototype.enterKeyDownHandler=function(i){sf.base.closest(i.target,".e-editable-component .e-richtexteditor")||(13===i.keyCode&&13===i.which&&sf.base.closest(i.target,".e-editable-component")?this.dotNetRef.invokeMethodAsync("SaveAction",null):27===i.keyCode&&27===i.which?(sf.base.isNullOrUndefined(this.element)||sf.base.isNullOrUndefined(this.element.querySelector("input"))||"Inline"!==this.mode?sf.base.isNullOrUndefined(this.popupContent)||sf.base.isNullOrUndefined(this.popupContent.querySelector("input"))||"Popup"!==this.mode||this.popupContent.querySelector("input").blur():this.element.querySelector("input").blur(),this.dotNetRef.invokeMethodAsync("CancelAction",null)):"Enter"!==i.code||!i.target.classList.contains(e)||sf.base.isNullOrUndefined(this.element.querySelector(".e-editable-value-container"))||this.element.querySelector(".e-editable-value-container").classList.contains(t)||this.element.classList.contains("e-disable")||(i.preventDefault(),this.dotNetRef.invokeMethodAsync("RenderEditor",null)))},i.prototype.removeEditor=function(e){this.updateContext(e),this.enablePersistence&&window.localStorage.setItem(this.id,this.value),this.unWireEvents(),sf.base.EventHandler.remove(document,"mousedown",this.docClickHandler)},i.prototype.Destroy=function(e){var t=this;for(this.updateContext(e),this.unWireEvents(),sf.base.EventHandler.remove(document,"mousedown",this.docClickHandler),this.enablePersistence&&window.localStorage.setItem(this.id,this.value),"Popup"===this.mode&&this.destroyPopup(),["e-disable","e-rtl"].forEach((function(e){sf.base.removeClass([t.element],[e])}));this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild)},i.prototype.destroyPopup=function(){var e=document.querySelector("#"+this.popupElement);if(e){for(;e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);for(var t=e.children,i=t.length-1;i>=0;i--)sf.base.detach(t[i])}},i.prototype.unWireEvents=function(){sf.base.EventHandler.remove(document,"scroll",this.scrollResizeHandler),window.removeEventListener("resize",this.onResizeScrollHandler),sf.base.EventHandler.remove(this.element,"keydown",this.valueKeyDownHandler),Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler)},i.prototype.validate=function(){return"Inline"===this.mode?!!this.element.querySelector(".validation-message"):!(!this.componentParent||!this.componentParent.querySelector(".validation-message"))},i.prototype.docClickHandler=function(t){var i=sf.base.closest(t.target,"."+e),n=sf.base.closest(t.target,".e-inplaceeditor-tip"),s=sf.base.closest(t.target,".e-editable-elements"),o=sf.base.closest(t.target,".e-rte-elements");if(this.isClearTarget||!sf.base.isNullOrUndefined(i)&&i.isEqualNode(this.element)||!sf.base.isNullOrUndefined(n)&&this.popupContent&&n.id.indexOf("tooltip")>-1||!sf.base.isNullOrUndefined(s)||!sf.base.isNullOrUndefined(o)||t.target.classList.contains("e-chips-close"))this.isClearTarget=!1;else{var r="Inline"===this.mode?this.element.querySelector(".e-editable-component"):this.element,a="Inline"===this.mode?this.element.querySelector(".e-editable-action-buttons"):this.componentParent;r.contains(t.target)||a&&a.contains(t.target)||sf.base.closest(t.target,".e-dropdown-popup.e-control.e-rte-elements")||sf.base.closest(t.target,".e-dropdown-popup.e-control.e-colorpicker-popup")||this.popupContent&&this.popupContent.contains(t.target)||("Submit"!==this.actionOnBlur||this.element.querySelector(".validation-message")?"Cancel"===this.actionOnBlur&&this.dotNetRef.invokeMethodAsync("CancelAction",null):this.dotNetRef.invokeMethodAsync("SaveAction",null))}},i}();return{initialize:function(e){e.dataId&&(new i(e),window.sfBlazor.instances.initialize())},openEditor:function(e,t){e&&window.sfBlazor.instances[e].openEditor(t)},closeEditor:function(e,t){e&&window.sfBlazor.instances[e].removeEditor(t)},destroy:function(e,t){e&&window.sfBlazor.instances[e].Destroy(t)},propertyChanged:function(e,t){e&&window.sfBlazor.instances[e].updateContext(t)},validate:function(e){return e&&window.sfBlazor.instances[e].validate()}}}()},"./modules/sf-kanban.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Kanban=function(){"use strict";var e="e-kanban-content",t="e-show-add-button",i=function(){function i(e){this.parent=e,this.dragObj={element:null,cloneElement:null,instance:null,targetClone:null,draggedClone:null,targetCloneMulti:null,selectedCards:[],pageX:0,pageY:0,navigationInterval:null,cardDetails:[],modifiedData:[]},this.isDragging=!1,this.dragEdges={left:!1,right:!1,top:!1,bottom:!1},this.isExternalDrop=!1}return i.prototype.wireDragEvents=function(t){var i;null!=!this.parent.element&&this.parent.externalDropId&&0===this.parent.externalDropId.length&&(i=this.parent.element.querySelector("."+e)),this.dragObj.instance=new sf.base.Draggable(t,{clone:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!0,cursorAt:{top:-10,left:-10},dragArea:i,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this)})},i.prototype.dragHelper=function(e){if(this.dragObj.element=sf.base.closest(e.sender.target,".e-card"),sf.base.isNullOrUndefined(this.dragObj.element))return null;this.dragObj.element.style.width=sf.base.formatUnit(this.dragObj.element.offsetWidth);var t=this.dragObj.element.cloneNode(!0);return this.dragObj.cloneElement=t,sf.base.addClass([this.dragObj.cloneElement],"e-cloned-card"),this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement),this.dragObj.targetCloneMulti=sf.base.createElement("div",{className:"e-target-multi-clone"}),this.dragObj.targetClone=sf.base.createElement("div",{className:"e-target-dropped-clone",styles:"width:100%;height:"+sf.base.formatUnit(this.dragObj.element.offsetHeight)}),this.dragObj.modifiedData=[],this.dragObj.cloneElement},i.prototype.dragStart=function(e){var t=this;if(this.dragObj.selectedCards=this.dragObj.element,this.dragObj.element.classList.contains("e-selection")){var i=sf.base.closest(this.dragObj.element,".e-content-row");this.dragObj.selectedCards=[].slice.call(i.querySelectorAll(".e-card.e-selection:not(.e-cloned-card)"))}var n=[];if(this.dragObj.selectedCards instanceof HTMLElement){var s=this.dragObj.selectedCards.getAttribute("data-id");n.push(s)}else this.dragObj.selectedCards&&this.dragObj.selectedCards.length>0&&this.dragObj.selectedCards.forEach((function(e){n.push(e.getAttribute("data-id"))}));var o=this.getXYValue(e,"X"),r=this.getXYValue(e,"Y");this.dragObj.cloneElement.style.display="none",this.parent.dotNetRef.invokeMethodAsync("DragStart",n,o,r).then((function(i){var n=document.body.querySelector(".e-kanban-dialog");if(i.cancel||n&&n.classList.contains("e-popup-open"))return t.removeElement(t.dragObj.cloneElement),t.dragObj.instance.intDestroy(e),t.dragObj.element=null,t.dragObj.targetClone=null,t.dragObj.draggedClone=null,t.dragObj.cloneElement=null,void(t.dragObj.targetCloneMulti=null);if(t.dragObj.cloneElement.style.display="block",e.bindEvents(e.dragElement),t.dragObj.element.classList.contains("e-selection")){if(t.dragObj.selectedCards.forEach((function(e){t.draggedClone(e)})),t.dragObj.selectedCards.length>1){t.dragObj.cloneElement.innerHTML="";var s=sf.base.createElement("div",{className:"e-multi-card-text",innerHTML:t.dragObj.selectedCards.length+" Cards"});t.dragObj.cloneElement.appendChild(s),sf.base.classList(t.dragObj.cloneElement,["e-multi-card-clone"],["e-selection"]),t.dragObj.cloneElement.style.width="90px"}}else t.draggedClone(t.dragObj.element);sf.base.EventHandler.add(document.body,"keydown",t.keydownHandler,t)}))},i.prototype.drag=function(e){var t=this;if(e.target){var i=sf.base.closest(e.target,".e-card"),n=i||e.target,s=sf.base.closest(n,".e-content-row:not(.e-swimlane-row) .e-content-cells.e-droppable");if(this.externalDrop(n,"drag"),this.target=this.parent.isExternalKanbanDrop?this.externalTarget:this.parent.element,this.calculateArgs(e),s&&"not-allowed"!==document.body.style.cursor){var o=this.getColumnKey(s),r=o.split(",");this.multiCloneRemove();var a=o===this.getColumnKey(sf.base.closest(this.dragObj.draggedClone,".e-content-cells"));if(1===r.length||a)if(n.classList.contains("e-card")||n.classList.contains("e-target-dragged-clone")){var l=n.classList.contains("e-target-dragged-clone")&&n.previousElementSibling.classList.contains("e-kanban-dragged-card")?null:n.previousElementSibling,d="afterend";if(sf.base.isNullOrUndefined(l)){var h=n.classList.contains("e-target-dragged-clone")?this.dragObj.pageY/2:this.dragObj.pageY,c=n.classList.contains("e-target-dragged-clone")?n.offsetHeight:n.offsetHeight/2;h-(this.target.getBoundingClientRect().top+n.offsetTop)<c&&(d="beforebegin")}n.insertAdjacentElement(d,this.dragObj.targetClone)}else n.classList.contains("e-content-cells")&&!sf.base.closest(n,".e-swimlane-row")?n.querySelector(".e-card-container").appendChild(this.dragObj.targetClone):n.classList.contains("e-card-container")&&!sf.base.closest(n,".e-swimlane-row")&&0===s.querySelectorAll(".e-card").length&&n.appendChild(this.dragObj.targetClone);else r.length>1&&s.classList.contains("e-dropping")&&this.multiCloneCreate(r,s)}0===this.target.querySelectorAll(".e-dropping").length&&this.cellDropping();var p=sf.base.closest(n,".e-column-key");if(p){var u=[].slice.call(this.target.querySelectorAll(".e-column-key:not(.e-disabled)")).filter((function(e){return t.getColumnKey(e)===t.getColumnKey(p)}));u.length>0&&(sf.base.addClass(u,"e-multi-active"),u[0].previousElementSibling&&sf.base.addClass([u[0].previousElementSibling],"e-multi-bottom-border"))}document.body.style.cursor=s&&s.classList.contains("e-dropping")?"":"not-allowed",i&&!sf.base.closest(i,".e-content-cells").classList.contains("e-dropping")&&(i.style.cursor="not-allowed",document.body.style.cursor="not-allowed"),this.isExternalDrop&&this.removeElement(this.dragObj.targetClone),this.isExternalDrop&&"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),"not-allowed"===document.body.style.cursor&&(this.removeElement(this.dragObj.targetClone,this.target),this.multiCloneRemove()),this.updateScrollPosition(),this.parent.isExternalKanbanDrop=!1,this.isExternalDrop=!1}},i.prototype.dragStop=function(e){var t,i=sf.base.closest(this.dragObj.targetClone,".e-content-cells"),n=0;if(sf.base.EventHandler.remove(document.body,"keydown",this.keydownHandler),this.externalDrop(e.target,"dragStop"),this.dragObj.targetClone.parentElement){n=[].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(".e-card:not(.e-kanban-dragged-card),.e-target-dropped-clone")).indexOf(this.dragObj.targetClone)}this.target&&this.target.querySelector(".e-target-multi-clone")&&(t=sf.base.closest(e.target,".e-column-key:not(.e-disabled)"));var s=this.getXYValue(e,"X"),o=this.getXYValue(e,"Y"),r=[];if(this.dragObj.selectedCards instanceof HTMLElement){var a=this.dragObj.selectedCards.getAttribute("data-id");r.push(a)}else this.dragObj.selectedCards&&this.dragObj.selectedCards.length>0&&this.dragObj.selectedCards.forEach((function(e){r.push(e.getAttribute("data-id"))}));if(i||t){var l=void 0;i?l=this.getColumnKey(i):(l=this.getColumnKey(t),i=sf.base.closest(t,".e-content-cells"));var d=void 0;if(this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop){var h=sf.base.closest(i,".e-content-row").previousElementSibling;d=this.getColumnKey(h)}var c=!1,p=void 0,u="";this.parent.sortSettings.field&&"Index"===this.parent.sortSettings.sortBy&&(!(p="Ascending"===this.parent.sortSettings.direction?this.dragObj.targetClone.previousElementSibling:this.dragObj.targetClone.nextElementSibling)||p.classList.contains("e-kanban-dragged-card")||p.classList.contains("e-cloned-card")||p.classList.contains("e-target-dragged-clone")?this.dragObj.targetClone.nextElementSibling&&"Ascending"===this.parent.sortSettings.direction?p=this.dragObj.targetClone.nextElementSibling:this.dragObj.targetClone.previousElementSibling&&"Descending"===this.parent.sortSettings.direction&&(p=this.dragObj.targetClone.previousElementSibling):c=!0),p&&(u=p.getAttribute("data-id")),this.parent.dotNetRef.invokeMethodAsync("DragStop",r,l,d,n,c,u,this.parent.isExternalKanbanDrop,s,o)}else this.isExternalDrop&&this.parent.dotNetRef.invokeMethodAsync("DragStop",r,"","",0,!1,"",!0,s,o);this.dragStopClear()},i.prototype.dragStopClear=function(){this.removeElement(this.dragObj.draggedClone),this.removeElement(this.dragObj.targetClone,this.target),this.removeElement(this.dragObj.cloneElement),[].slice.call(this.parent.element.querySelectorAll(".e-target-dragged-clone")).forEach((function(e){return sf.base.remove(e)})),this.dragObj.element.style.removeProperty("width"),this.multiCloneRemove(),this.dragObj.selectedCards instanceof HTMLElement?sf.base.removeClass([this.dragObj.selectedCards],"e-kanban-dragged-card"):sf.base.removeClass(this.dragObj.selectedCards,"e-kanban-dragged-card"),clearInterval(this.dragObj.navigationInterval),this.dragObj.navigationInterval=null,"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),[].slice.call(this.parent.element.querySelectorAll(".e-card[style]")).forEach((function(e){e.style.cursor=""}));[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row) .e-content-cells")).forEach((function(e){return sf.base.removeClass([e],"e-dropping")})),this.parent.isAdaptive&&(this.parent.touchModule.tabHold=!1),this.dragObj.cardDetails=this.dragObj.modifiedData=[],this.isDragging=!1,this.parent.isExternalKanbanDrop=!1,this.target=null,this.externalTarget=null},i.prototype.keydownHandler=function(e){"Escape"===e.code&&this.dragObj.cloneElement&&(sf.base.EventHandler.remove(this.dragObj.cloneElement,"keydown",this.keydownHandler),this.dragObj.element.removeAttribute("aria-grabbed"),this.dragStopClear())},i.prototype.draggedClone=function(e){this.dragObj.draggedClone=sf.base.createElement("div",{className:"e-target-dragged-clone",styles:"width:"+sf.base.formatUnit(e.offsetWidth-1)+";height:"+sf.base.formatUnit(e.offsetHeight)}),e.insertAdjacentElement("afterend",this.dragObj.draggedClone),sf.base.addClass([e],"e-kanban-dragged-card")},i.prototype.calculateArgs=function(e){var t=this.getPageCoordinates(e);this.dragObj.pageY=t.pageY,this.dragObj.pageX=t.pageX,this.isDragging=!0},i.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},i.prototype.getColumnKey=function(e){return e&&e.getAttribute("data-key")?e.getAttribute("data-key").trim():""},i.prototype.multiCloneRemove=function(){if(this.target){var e=[].slice.call(this.target.querySelectorAll(".e-target-multi-clone"));if(e.length>0)[].slice.call(this.target.querySelectorAll(".e-column-key")).forEach((function(e){return sf.base.remove(e)})),e.forEach((function(e){var i=sf.base.closest(e,".e-content-cells");i&&(i.style.borderStyle="",i.querySelector("."+t)&&sf.base.removeClass([i.querySelector("."+t)],"e-multi-card-container"),sf.base.removeClass([i.querySelector(".e-card-container")],"e-multi-card-container"))})),this.removeElement(this.dragObj.targetCloneMulti,this.target)}},i.prototype.removeElement=function(e,t){t=t||this.parent.element,e&&t&&t.getElementsByClassName(e.className).length>0&&sf.base.remove(e)},i.prototype.externalDrop=function(e,t){var i=this;this.parent.externalDropId&&this.parent.externalDropId.forEach((function(n){if(i.externalTarget=sf.base.closest(e,n),i.externalTarget)if(i.externalTarget.classList.contains("e-kanban")){i.parent.isExternalKanbanDrop=!0;var s=[].slice.call(i.externalTarget.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed) .e-content-cells"));"drag"===t?sf.base.addClass(s,"e-dropping"):sf.base.removeClass(s,"e-dropping")}else i.isExternalDrop=!0}))},i.prototype.multiCloneCreate=function(e,i){var n=i.offsetHeight,s=i.querySelector(".e-limits");s&&(n-=s.offsetHeight),this.dragObj.targetCloneMulti.style.height=sf.base.formatUnit(n),i.querySelector("."+t)&&sf.base.addClass([i.querySelector("."+t)],"e-multi-card-container"),sf.base.addClass([i.querySelector(".e-card-container")],"e-multi-card-container"),i.querySelector(".e-card-container").style.height="auto",i.style.borderStyle="none",this.removeElement(this.dragObj.targetClone);for(var o=0,r=e;o<r.length;o++){var a=r[o],l=sf.base.closest(this.dragObj.draggedClone,".e-content-cells"),d=this.parent.transition[l.cellIndex].transitionColumn,h=this.allowedTransition(this.dragObj.element.getAttribute("data-key"),a,d),c=h?"":" e-disabled",p=sf.base.createElement("div",{className:"e-column-key"+c,attrs:{"data-key":a.trim()}}),u=sf.base.createElement("div",{className:"e-text",innerHTML:a.trim()});i.appendChild(this.dragObj.targetCloneMulti).appendChild(p).appendChild(u),p.style.cursor=h?"":"not-allowed",p.style.lineHeight=p.style.height=sf.base.formatUnit(n/e.length),u.style.top=sf.base.formatUnit(n/2-u.offsetHeight/2)}},i.prototype.allowedTransition=function(e,t,i){for(var n=!0,s=t.split(","),o=0;o<s.length;o++){if(e===s[o].trim())return!0;if(i){if(1===i.length&&0===i[0].length)return!0;for(var r=0;r<i.length;r++){if(s[o].trim()===i[r].trim())return!0;n=!1}}}return n},i.prototype.cellDropping=function(){var e=this,t=sf.base.closest(this.dragObj.draggedClone,".e-content-cells"),i=sf.base.closest(this.dragObj.draggedClone,".e-content-row");if(this.addDropping(i,t),t&&t.classList.contains("e-drop")&&sf.base.addClass([t],"e-dropping"),this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop){var n=[].slice.call(this.target.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed)"));[].slice.call(n).forEach((function(n){i!==n&&e.addDropping(n,t)}))}},i.prototype.addDropping=function(e,t){var i=this;t&&e&&[].slice.call(e.children).forEach((function(e){var n=i.parent.transition[t.cellIndex].transitionColumn;e!==t&&e.classList.contains("e-drop")&&i.allowedTransition(t.getAttribute("data-key"),e.getAttribute("data-key"),n)&&sf.base.addClass([e],"e-dropping")}))},i.prototype.updateScrollPosition=function(){var e=this;sf.base.isNullOrUndefined(this.dragObj.navigationInterval)&&(this.dragObj.navigationInterval=window.setInterval((function(){e.autoScroll()}),100))},i.prototype.autoScrollValidation=function(){var t=this.dragObj.pageY,i=this.dragObj.pageX,n={left:!1,right:!1,top:!1,bottom:!1},s=this.target.querySelector("."+e).getBoundingClientRect();t<s.top+30+window.pageYOffset&&t>s.top+window.pageYOffset&&(n.top=!0),t>s.bottom-30+window.pageYOffset&&t<s.bottom+window.pageYOffset&&(n.bottom=!0),i<s.left+30+window.pageXOffset&&i>s.left+window.pageXOffset&&(n.left=!0),i>s.right-30+window.pageXOffset&&i<s.right+window.pageXOffset&&(n.right=!0),this.dragEdges=n},i.prototype.autoScroll=function(){this.autoScrollValidation();if(this.parent.isAdaptive){var t;if(this.dragEdges.top||this.dragEdges.bottom?t=this.dragObj.targetClone?sf.base.closest(this.dragObj.targetClone,".e-card-container"):sf.base.closest(this.dragObj.draggedClone,".e-card-container"):(this.dragEdges.right||this.dragEdges.left)&&(t=this.target.querySelector("."+e)),t){var i=t.offsetHeight<=t.scrollHeight,n=t.offsetWidth<=t.scrollWidth,s=t.scrollTop>=0&&t.scrollTop+t.offsetHeight<=t.scrollHeight,o=t.scrollLeft>=0&&t.scrollLeft+t.offsetWidth<=t.scrollWidth;if(i&&s&&(this.dragEdges.top||this.dragEdges.bottom)&&(t.scrollTop+=this.dragEdges.top?-66:30),n&&o&&(this.dragEdges.left||this.dragEdges.right))(this.getWidth()*(this.target.querySelector(".e-content-row:not(.e-swimlane-row)").childElementCount-1)>t.scrollLeft||this.dragEdges.left)&&(t.scrollLeft+=this.dragEdges.left?-30:30)}}else{var r=this.target.querySelector("."+e),a=this.dragObj.targetClone.parentElement,l=r.offsetHeight<=r.scrollHeight,d=r.offsetWidth<=r.scrollWidth,h=l&&r.scrollTop>=0&&r.scrollTop+r.offsetHeight<=r.scrollHeight,c=d&&r.scrollLeft>=0&&r.scrollLeft+r.offsetWidth<=r.scrollWidth;h&&(this.dragEdges.top||this.dragEdges.bottom)&&(r.scrollTop+=this.dragEdges.top?-30:30,a&&(a.scrollTop+=this.dragEdges.top?-30:30)),c&&(this.dragEdges.left||this.dragEdges.right)&&(r.scrollLeft+=this.dragEdges.left?-30:30,a&&(a.scrollLeft+=this.dragEdges.left?-30:30)),this.dragObj.pageY-window.scrollY<30?window.scrollTo(window.scrollX,window.scrollY-30):window.innerHeight-(this.dragObj.pageY-window.scrollY)<30&&window.scrollTo(window.scrollX,window.scrollY+30)}},i.prototype.getWidth=function(){return 80*window.innerWidth/100},i.prototype.unWireDragEvents=function(){this.dragObj.instance&&!this.dragObj.instance.isDestroyed&&this.dragObj.instance.destroy()},i.prototype.destroy=function(){this.unWireDragEvents()},i.prototype.getXYValue=function(e,t){var i,n=e.event,s=n.changedTouches;if(!(i="X"===t?s?s[0].clientX:n.clientX:s?s[0].clientY:n.clientY)&&"focus"===e.type&&e.target){var o=e.target.getBoundingClientRect();i=o?"X"===t?o.left:o.top:null}return Math.ceil(i)},i}(),n=function(){function e(e){this.keyConfigs={firstCardSelection:"36",lastCardSelection:"35",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",multiSelectionEnter:"ctrl+13",multiSelectionSpace:"ctrl+32",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40",shiftTab:"shift+tab",enter:"13",tab:"tab",delete:"46",escape:"27",space:"32"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.multiSelection=!1}return e.prototype.keyActionHandler=function(e){var i,n=this.parent.element.querySelectorAll(".e-card.e-selection").item(0);if(n||sf.base.closest(document.activeElement,".e-kanban"))switch(e.action){case"upArrow":case"downArrow":case"multiSelectionByUpArrow":case"multiSelectionByDownArrow":e.preventDefault(),this.processUpDownArrow(e.action,n);break;case"rightArrow":case"leftArrow":this.processLeftRightArrow(e);break;case"firstCardSelection":case"lastCardSelection":this.processCardSelection(e.action,n);break;case"multiSelectionEnter":case"multiSelectionSpace":document.activeElement&&this.parent.cardSelection(document.activeElement,!0,!1);break;case"space":case"enter":this.processEnter(e,n);break;case"escape":if(document.activeElement.classList.contains("e-card")||document.activeElement.classList.contains(t))if(document.activeElement.classList.contains("e-selection"))sf.base.removeClass([document.activeElement],"e-selection"),document.activeElement.focus();else{var s=sf.base.closest(document.activeElement,".e-content-cells"),o=[].slice.call(s.querySelectorAll(".e-card"));sf.base.removeClass(o,"e-selection"),s.focus(),this.cardTabIndexRemove(),this.addRemoveTabIndex("Add")}break;case"tab":case"shiftTab":i=sf.base.closest(document.activeElement,".e-content-cells"),document.activeElement.classList.contains("e-card")&&(document.activeElement.nextElementSibling||"tab"!==e.action||e.preventDefault(),!document.activeElement.previousElementSibling&&i.querySelector("."+t)&&"tab"===e.action&&sf.base.addClass([i.querySelector("."+t)],"e-show-add-focus")),document.activeElement.classList.contains(t)&&(!i.querySelector(".e-card")&&"tab"===e.action||"shiftTab"===e.action)&&e.preventDefault(),document.activeElement.classList.contains("e-kanban")&&(this.cardTabIndexRemove(),this.addRemoveTabIndex("Add"))}},e.prototype.processCardSelection=function(e,t){if(t){sf.base.removeClass([t],"e-selection"),this.parent.disableAttributeSelection(t);var i=this.parent.selectionArray;i.splice(i.indexOf(t.getAttribute("data-id")),1)}this.cardTabIndexRemove();var n=[].slice.call(this.parent.element.querySelectorAll(".e-card")),s="firstCardSelection"===e?n[0]:n[n.length-1];this.parent.cardSelection(s,!1,!1),this.addRemoveTabIndex("Remove"),s.focus(),[].slice.call(sf.base.closest(s,".e-content-cells").querySelectorAll(".e-card")).forEach((function(e){e.setAttribute("tabindex","0")}))},e.prototype.processLeftRightArrow=function(e){document.activeElement.classList.contains("e-content-cells")&&("rightArrow"===e.action&&document.activeElement.nextElementSibling?document.activeElement.nextElementSibling.focus():"leftArrow"===e.action&&document.activeElement.previousElementSibling&&document.activeElement.previousElementSibling.focus())},e.prototype.processUpDownArrow=function(e,i){if("upArrow"===e&&document.activeElement){if(document.activeElement.classList.contains("e-card")&&document.activeElement.previousElementSibling)document.activeElement.previousElementSibling.focus();else if(document.activeElement.classList.contains(t)){document.activeElement.setAttribute("tabindex","-1"),sf.base.removeClass([document.activeElement],"e-show-add-focus");var n=sf.base.closest(document.activeElement,".e-content-cells");n.querySelectorAll(".e-card").length>0&&[].slice.call(n.querySelectorAll(".e-card")).slice(-1)[0].focus()}this.removeSelection()}else if("downArrow"===e&&document.activeElement&&document.activeElement.classList.contains("e-card")){if(document.activeElement.nextElementSibling)document.activeElement.nextElementSibling.focus();else if(sf.base.closest(document.activeElement,".e-card-container").nextElementSibling){var s=sf.base.closest(document.activeElement,".e-card-container").nextElementSibling;s.setAttribute("tabindex","0"),sf.base.addClass([s],"e-show-add-focus"),s.focus()}this.removeSelection()}if(("multiSelectionByUpArrow"===e||"multiSelectionByDownArrow"===e)&&i&&"Multiple"===this.parent.cardSettings.selectionType){var o=void 0;(o="multiSelectionByUpArrow"===e?document.activeElement.previousElementSibling:document.activeElement.nextElementSibling)&&(this.parent.cardSelection(o,!1,!0),o.focus(),this.multiSelection=!0)}},e.prototype.removeSelection=function(){if(this.multiSelection){var e=this.parent.getSelectedCards();e.length>0&&(sf.base.removeClass(e,"e-selection"),this.parent.disableAttributeSelection(e)),this.multiSelection=!1}},e.prototype.cardTabIndexRemove=function(){[].slice.call(this.parent.element.querySelectorAll(".e-card")).forEach((function(e){e.setAttribute("tabindex","-1")})),[].slice.call(this.parent.element.querySelectorAll("."+t)).forEach((function(e){e.setAttribute("tabindex","-1"),sf.base.removeClass([e],"e-show-add-focus")}))},e.prototype.processEnter=function(e,i){"space"===e.action&&e.preventDefault();var n=e.target;if(n.classList.contains("e-header-icon")&&n.click(),(n.classList.contains("e-swimlane-row-expand")||n.classList.contains("e-swimlane-row-collapse"))&&n.click(),document.activeElement.classList.contains("e-card")&&this.parent.cardSelection(document.activeElement,!1,!1),document.activeElement.classList.contains(t)&&document.activeElement.focus(),n.classList.contains("e-content-cells")){var s=[].slice.call(n.querySelectorAll(".e-card"));this.addRemoveTabIndex("Remove"),s.length>0&&(n.querySelector(".e-card").focus(),s.forEach((function(e){e.setAttribute("tabindex","0")}))),n.querySelector("."+t)&&(n.querySelector("."+t).setAttribute("tabindex","0"),n.querySelector("."+t).focus())}i===document.activeElement&&1===this.parent.element.querySelectorAll(".e-selection").length&&(this.parent.dotNetRef.invokeMethodAsync("OpenDialog",i.getAttribute("data-id")),i.focus())},e.prototype.addRemoveTabIndex=function(e){var t="Add"===e?"0":"-1",i=[].slice.call(this.parent.element.querySelectorAll(".e-header-icon"));i.length>0&&i.forEach((function(e){e.setAttribute("tabindex",t)}));var n=[].slice.call(this.parent.element.querySelectorAll(".e-swimlane-row-expand"));n.length>0&&n.forEach((function(e){e.setAttribute("tabindex",t)}));[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row) .e-content-cells")).forEach((function(e){e.setAttribute("tabindex",t)}))},e.prototype.destroy=function(){this.keyboardModule.destroy()},e}(),s=function(){function t(e){this.parent=e,this.tabHold=!1}return t.prototype.wireTouchEvents=function(){this.element=this.parent.element.querySelector("."+e),this.touchObj=new sf.base.Touch(this.element,{tapHold:this.tapHoldHandler.bind(this)})},t.prototype.tapHoldHandler=function(e){this.tabHold=!0,sf.base.closest(e.originalEvent.target,".e-card")&&"Multiple"===this.parent.cardSettings.selectionType&&(this.mobilePopup||(this.renderMobilePopup(),this.mobilePopup.show()),this.updatePopupContent())},t.prototype.renderMobilePopup=function(){if("Multiple"===this.parent.cardSettings.selectionType){var e=sf.base.createElement("div",{className:"e-mobile-popup-wrapper e-popup-close",innerHTML:'<div class="e-popup-header"><button class="e-btn e-close e-flat e-round e-small"><span class="e-icons e-close-icon"></span></button></div><div class="e-popup-content"></div>'});document.body.appendChild(e),sf.base.addClass([e],"e-device"),this.mobilePopup=new sf.popups.Popup(e,{targetType:"container",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut"},showAnimation:{name:"ZoomIn"},collision:{X:"fit",Y:"fit"},position:{X:"left",Y:"top"},viewPortElement:document.body,zIndex:1004,close:this.popupClose.bind(this)});var t=this.mobilePopup.element.querySelector(".e-close");sf.base.EventHandler.add(t,"click",this.closeClick,this)}},t.prototype.closeClick=function(){this.mobilePopup.hide()},t.prototype.popupClose=function(){this.popupDestroy()},t.prototype.getPopupContent=function(){var e,t=this.parent.getSelectedCards();return t.length>1?e="("+t.length+") Cards Selected":1===t.length&&(e=" "+t[0].getAttribute("data-id")),e},t.prototype.updatePopupContent=function(){if(this.mobilePopup){var e=this.getPopupContent();e?this.mobilePopup.element.querySelector(".e-popup-content").textContent=e:this.mobilePopup.hide()}},t.prototype.popupDestroy=function(){this.mobilePopup&&this.mobilePopup.element&&(this.mobilePopup.destroy(),sf.base.remove(this.mobilePopup.element),this.mobilePopup=null)},t.prototype.unWireTouchEvents=function(){this.touchObj&&this.touchObj.destroy(),this.touchObj=null,this.element=null},t.prototype.destroy=function(){this.popupDestroy(),this.unWireTouchEvents(),this.tabHold=!1},t}(),o=function(){function o(e){window.sfBlazor=window.sfBlazor,this.updateContext(e),this.columnToggleArray=[],this.selectionArray=[],this.lastCardSelection=null,this.lastSelectionRow=null,this.lastCard=null,this.selectedCardsElement=[],this.selectedCardsData=[],this.hideColumnKeys=[],this.frozenOrder=0,this.scrollPosition={content:{},column:{}},this.initializeModules(),this.scrollUiUpdate(),this.wireEvents(),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this)}return o.prototype.initializeModules=function(){(this.isAdaptive||sf.base.Browser.isTouch)&&(this.touchModule=new s(this)),this.allowDragAndDrop&&(this.dragAndDropModule=new i(this)),this.allowKeyboard&&(this.keyboardModule=new n(this)),this.scrollPosition.content={left:0,top:0},this.initializeSwimlaneTree()},o.prototype.updateContext=function(e){sf.base.extend(this,this,e)},o.prototype.getSelectedCards=function(){return[].slice.call(this.element.querySelectorAll(".e-card.e-selection"))},o.prototype.documentClick=function(e){if(e.target&&this.element.querySelector(".e-swimlane-resource")&&e.target.classList.contains("e-swimlane-overlay")&&this.element.querySelector(".e-swimlane-resource").classList.contains("e-popup-open")&&(this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable")),!sf.base.closest(e.target,".e-kanban")){var t=[].slice.call(this.element.querySelectorAll(".e-card.e-selection"));sf.base.removeClass(t,"e-selection"),this.disableAttributeSelection(t)}},o.prototype.disableAttributeSelection=function(e){e instanceof Element?e.setAttribute("aria-selected","false"):e.forEach((function(e){e.setAttribute("aria-selected","false")}))},o.prototype.wireDragEvent=function(){var e=this;if(this.allowDragAndDrop){var t=[].slice.call(this.element.querySelectorAll(".e-content-cells.e-drag .e-card:not(e-draggable)"));sf.base.addClass(t,"e-droppable"),t.forEach((function(t){return e.dragAndDropModule.wireDragEvents(t)}))}},o.prototype.initializeSwimlaneTree=function(){if(this.swimlaneSettings.keyField&&this.isAdaptive){var t=this.element.querySelector(".e-swimlane-header").offsetHeight,i=window.innerHeight-t;this.popupOverlay=this.element.querySelector(".e-swimlane-content .e-swimlane-overlay"),sf.base.setStyleAttribute(this.element.querySelector(".e-swimlane-overlay"),{height:i+"px"}),sf.base.setStyleAttribute(this.element.querySelector(".e-swimlane-content"),{top:t+"px"});var n=this.element.querySelector(".e-swimlane-resource");sf.base.setStyleAttribute(n,{height:i+"px"});var s={targetType:"relative",actionOnScroll:"none",enableRtl:this.enableRtl,zIndex:10,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.element.querySelector("."+e)};this.treePopup=new sf.popups.Popup(n,s)}},o.prototype.cardSelection=function(e,t,i){var n=this;if(e){var s=this.getSelectedCards();if("None"!==this.cardSettings.selectionType){var o=sf.base.closest(e,".e-content-row");if((sf.base.isNullOrUndefined(this.lastSelectionRow)?o.rowIndex:this.lastSelectionRow.rowIndex)!==o.rowIndex&&(t||i)&&"Multiple"===this.cardSettings.selectionType)return;if(0===s.length||t&&"Single"!==this.cardSettings.selectionType||(sf.base.removeClass(s,"e-selection"),this.disableAttributeSelection(s),s.forEach((function(e){n.selectionArray.splice(n.selectionArray.indexOf(e.getAttribute("data-id")),1),n.selectedCardsElement.splice(n.selectedCardsElement.indexOf(e),1)}))),s.length>0&&i&&"Multiple"===this.cardSettings.selectionType){var r=[],a=void 0,l=void 0,d=void 0,h=[].slice.call(o.querySelectorAll(".e-card"));h.forEach((function(e){return r.push(e.getAttribute("data-id"))}));var c=e.getAttribute("data-id"),p=this.lastCard.getAttribute("data-id"),u=l=r.indexOf(c),f=a=r.indexOf(p),m=u>f?"next":"prev";for("prev"===m&&(a=u,l=f),d=a;d<=l;d++){var g=h[d];sf.base.addClass([g],"e-selection"),g.setAttribute("aria-selected","true"),g.setAttribute("tabindex","0"),this.selectionArray.push(g.getAttribute("data-id")),this.selectedCardsElement.push(g),this.lastCardSelection=g,"prev"===m&&(this.lastCardSelection=h[a])}}else if(sf.base.addClass([e],"e-selection"),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),this.selectionArray.push(e.getAttribute("data-id")),this.selectedCardsElement.push(e),this.lastCard=this.lastCardSelection=e,this.lastSelectionRow=sf.base.closest(e,".e-content-row"),this.lastSelectionRow.previousElementSibling){var v=this.lastSelectionRow.previousElementSibling.querySelector(".e-swimlane-row-expand,.e-swimlane-row-collapse");v&&v.classList.contains("e-swimlane-row-collapse")&&v.click()}}}},o.prototype.scrollUiUpdate=function(){var t=this,i=this.element.querySelector(".e-kanban-header"),n=this.element.querySelector("."+e),s=this.element.offsetHeight-i.offsetHeight;if(this.isAdaptive){s=window.innerHeight-(i.offsetHeight+25);var o=this.element.querySelector(".e-swimlane-header");o&&(s-=o.offsetHeight),[].slice.call(this.element.querySelectorAll(".e-content-cells")).forEach((function(e){var i=e.querySelector(".e-card-container");i.classList.contains("e-multi-card-container")||(i.style.height=sf.base.formatUnit(s),sf.base.EventHandler.add(e,"touchmove",t.onAdaptiveScroll,t))}))}"auto"!==this.height&&"100%"!==this.height&&(n.style.height=sf.base.formatUnit(s)),[].slice.call(i.children).forEach((function(e){var i=0;n.offsetWidth-n.clientWidth>0&&(i=17,n.offsetHeight-n.clientHeight>0&&(e.style.width=sf.base.formatUnit(n.clientWidth))),t.enableRtl?e.style.paddingLeft=sf.base.formatUnit(i):e.style.paddingRight=sf.base.formatUnit(i)}))},o.prototype.onContentScroll=function(e){var t=e.target,i=this.element.querySelector(".e-kanban-header");[].slice.call(i.children).forEach((function(e){e.scrollLeft=t.scrollLeft})),this.scrollPosition.content={left:t.scrollLeft,top:t.scrollTop},!sf.base.isNullOrUndefined(this.swimlaneSettings.keyField)&&this.swimlaneSettings.enableFrozenRows&&this.frozenRows(e)},o.prototype.frozenRows=function(t){var i=this.element.querySelector(".e-swimlane-row"),n=this.element.querySelector(".e-kanban-header"),s=this.element.querySelector("."+e);if(sf.base.isNullOrUndefined(this.frozenSwimlaneRow)){this.frozenSwimlaneRow=sf.base.createElement("div",{className:"e-frozen-swimlane-row"});var o=sf.base.createElement("div",{className:"e-frozen-row"});this.frozenSwimlaneRow.appendChild(o),this.element.insertBefore(this.frozenSwimlaneRow,this.element.firstElementChild),i&&(o.appendChild(i.querySelector(".e-swimlane-header").cloneNode(!0)),sf.base.addClass([o.querySelector(".e-icons")],"e-frozen-icons"),sf.base.setStyleAttribute(this.frozenSwimlaneRow,{height:sf.base.formatUnit(i.getBoundingClientRect().height),width:sf.base.formatUnit(s.querySelector(".e-swimlane").getBoundingClientRect().width),top:sf.base.formatUnit(n.getBoundingClientRect().height.toString())}),sf.base.setStyleAttribute(n,{position:"relative",top:sf.base.formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)}),sf.base.setStyleAttribute(s,{position:"relative",top:sf.base.formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)}))}else{var r=[].slice.call(this.element.querySelectorAll(".e-swimlane-row")),a=r[this.frozenOrder],l=r[this.frozenOrder-1],d=r[this.frozenOrder+1],h=void 0,c=void 0,p=void 0;a&&(h=a.getBoundingClientRect().top+a.getBoundingClientRect().height),l&&(c=l.getBoundingClientRect().top+l.getBoundingClientRect().height),d&&(p=d.getBoundingClientRect().top+d.getBoundingClientRect().height);var u=s.getBoundingClientRect().top+this.frozenSwimlaneRow.getBoundingClientRect().height,f=this.frozenSwimlaneRow.querySelector(".e-frozen-row");p&&u>=p&&this.frozenOrder<r.length-1?(f&&(sf.base.remove(f.querySelector(".e-swimlane-header")),d&&f.appendChild(d.querySelector(".e-swimlane-header").cloneNode(!0)),sf.base.addClass([f.querySelector(".e-icons")],"e-frozen-icons")),++this.frozenOrder):c&&u<h&&u>c&&this.frozenOrder>0&&(f&&(sf.base.remove(f.querySelector(".e-swimlane-header")),l&&f.appendChild(l.querySelector(".e-swimlane-header").cloneNode(!0)),sf.base.addClass([f.querySelector(".e-icons")],"e-frozen-icons")),--this.frozenOrder)}t&&0==t.target.scrollTop&&this.removeFrozenRows()},o.prototype.removeFrozenRows=function(){sf.base.remove(this.frozenSwimlaneRow),this.frozenSwimlaneRow=null;var t=this.element.querySelector(".e-kanban-header"),i=this.element.querySelector("."+e);sf.base.setStyleAttribute(t,{position:"",top:""}),sf.base.setStyleAttribute(i,{position:"",top:""}),this.scrollPosition.content={left:this.scrollPosition.content.left,top:0},i.scrollTop=0},o.prototype.onColumnScroll=function(e){var t=e.target;if(t.offsetParent){var i=t.offsetParent.getAttribute("data-key");this.scrollPosition.column[i]={left:t.scrollLeft,top:t.scrollTop}}},o.prototype.onAdaptiveScroll=function(e){this.touchModule.tabHold&&!this.touchModule.mobilePopup&&e.preventDefault()},o.prototype.updateScrollPosition=function(){var t=this,i=this.element.querySelector("."+e);i&&i.scrollTo(this.scrollPosition.content.left,this.scrollPosition.content.top),[].slice.call(this.element.querySelectorAll(".e-card-container")).forEach((function(e){if(e.offsetParent){var i=t.scrollPosition.column[e.offsetParent.getAttribute("data-key")];i&&e.scrollTo(i.left,i.top)}}))},o.prototype.wireEvents=function(){var t=this,i=this.element.querySelector("."+e);sf.base.EventHandler.add(i,"scroll",this.onContentScroll,this),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.documentClick,this),[].slice.call(this.element.querySelectorAll(".e-card-container")).forEach((function(e){e.offsetParent&&(t.scrollPosition.column[e.offsetParent.getAttribute("data-key")]={left:0,top:0}),sf.base.EventHandler.add(e,"scroll",t.onColumnScroll,t)})),this.isAdaptive&&this.touchModule.wireTouchEvents(),this.wireDragEvent()},o.prototype.unWireEvents=function(){var t=this,i=this.element.querySelector("."+e);(sf.base.EventHandler.remove(i,"scroll",this.onContentScroll),sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.documentClick),[].slice.call(this.element.querySelectorAll(".e-card-container")).forEach((function(e){sf.base.EventHandler.remove(e,"scroll",t.onColumnScroll)})),this.isAdaptive)&&([].slice.call(this.element.querySelectorAll(".e-content-cells")).forEach((function(e){sf.base.EventHandler.remove(e,"touchmove",t.onAdaptiveScroll)})),this.touchModule.unWireTouchEvents())},o.prototype.onCardClick=function(e,t){if(e){if(e.classList.contains("e-selection"))sf.base.removeClass([e],"e-selection"),this.disableAttributeSelection(e);else{var i=t.ctrlKey;this.isAdaptive&&this.touchModule&&(i=this.touchModule.mobilePopup&&this.touchModule.tabHold||i),this.cardSelection(e,i,t.shiftKey)}this.isAdaptive&&this.touchModule&&this.touchModule.updatePopupContent();var n=sf.base.closest(e,".e-content-cells");if(this.allowKeyboard)[].slice.call(n.querySelectorAll(".e-card")).forEach((function(e){e.setAttribute("tabindex","0")})),this.keyboardModule.addRemoveTabIndex("Remove")}},o.prototype.onMenuClick=function(){this.element.querySelector(".e-swimlane-resource").classList.contains("e-popup-open")?(this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable")):(this.treePopup.show(),sf.base.addClass([this.popupOverlay],"e-enable"))},o.prototype.onListViewClick=function(){this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable")},o.prototype.onPropertyChanged=function(e){for(var t=0,i=e;t<i.length;t++){switch(i[t]){case"width":this.setWidth();break;case"height":this.setHeight();break;case"enableRtl":this.enableRtl?sf.base.addClass([this.element],"e-rtl"):sf.base.removeClass([this.element],"e-rtl")}}},o.prototype.getWidth=function(){return 80*window.innerWidth/100},o.prototype.onToggleColumn=function(e,i){var n=this,s=[].slice.call(this.element.querySelectorAll('.e-kanban-table col[data-key="'+e+'"]')),o=[].slice.call(this.element.querySelectorAll('.e-content-cells[data-key="'+e+'"]')),r=this.element.querySelector('.e-header-cells[data-key="'+e+'"]');i?(sf.base.removeClass(s,"e-collapsed"),this.isAdaptive&&s.forEach((function(e){return e.style.width=sf.base.formatUnit(n.getWidth())})),sf.base.removeClass(o,"e-collapsed"),sf.base.removeClass([r],"e-collapsed"),sf.base.classList(r.querySelector(".e-header-icon"),["e-column-expand"],["e-column-collapse"]),r.setAttribute("aria-expanded","true"),o.forEach((function(e){e.querySelector(".e-collapse-header-text").style.display="none",e.querySelector("."+t)&&(e.querySelector("."+t).style.display=""),e.setAttribute("aria-expanded","true")})),r.querySelector(".e-header-icon").setAttribute("aria-label",e+" Expand")):(sf.base.addClass(s,"e-collapsed"),this.isAdaptive&&s.forEach((function(e){return e.style.width=sf.base.formatUnit(50)})),sf.base.addClass(o,"e-collapsed"),sf.base.addClass([r],"e-collapsed"),sf.base.classList(r.querySelector(".e-header-icon"),["e-column-collapse"],["e-column-expand"]),r.setAttribute("aria-expanded","false"),o.forEach((function(e){e.querySelector(".e-collapse-header-text").style.display="",e.querySelector("."+t)&&(e.querySelector("."+t).style.display="none"),e.setAttribute("aria-expanded","false")})),r.querySelector(".e-header-icon").setAttribute("aria-label",e+" Collapse"))},o.prototype.onSwimlaneProperties=function(e,t,i){this.swimlaneSettings.allowDragAndDrop=e,this.swimlaneSettings.keyField=t,this.swimlaneSettings.enableFrozenRows=i,this.frozenSwimlaneRow&&!this.swimlaneSettings.enableFrozenRows&&this.removeFrozenRows()},o.prototype.setWidth=function(){"100%"===this.width?this.element.style.width="":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)})},o.prototype.setHeight=function(){sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.height)})},o.prototype.destroy=function(){this.touchModule&&this.touchModule.destroy(),this.dragAndDropModule&&this.dragAndDropModule.destroy(),this.keyboardModule&&this.keyboardModule.destroy(),this.unWireEvents()},o}();return{initialize:function(e){e.dataId&&new o(e)},isDevice:function(e){e.invokeMethodAsync("WindowWidth",70*window.innerWidth/100)},updateScrollPosition:function(e){e&&window.sfBlazor.instances[e].updateScrollPosition()},wireDragEvents:function(e){e&&window.sfBlazor.instances[e].wireDragEvent()},propertyChanged:function(e,t){e&&window.sfBlazor.instances[e].onPropertyChanged(t)},swimlaneProperties:function(e,t,i,n){e&&window.sfBlazor.instances[e].onSwimlaneProperties(t,i,n)},cardClick:function(e,t,i){window.sfBlazor.instances[e].onCardClick(t,i)},menuClick:function(e){window.sfBlazor.instances[e].onMenuClick()},listViewClick:function(e){window.sfBlazor.instances[e].onListViewClick()},toggleColumn:function(e,t,i){e&&window.sfBlazor.instances[e].onToggleColumn(t,i)},getTargetDetails:function(e,t,i,n,s){if(e&&window.sfBlazor){var o=window.sfBlazor.instances[e].element,r=document.elementFromPoint(t,i),a=void 0,l=null;if("tooltip"===s)return n?(a=sf.base.closest(r,".e-card"),l=JSON.stringify(a.getAttribute("data-id"))):r.classList.contains("e-tooltip-text")&&(l=JSON.stringify(r.innerText)),o.querySelector(".e-cloned-card")&&(l=null),l;if(a=sf.base.closest(r,".e-content-cells")){var d={};d.columnKeyField=a.getAttribute("data-key"),a.parentElement.previousElementSibling&&(d.swimlaneKeyField=a.parentElement.previousElementSibling.getAttribute("data-key"));var h=sf.base.closest(r,".e-card");if(h){var c=[].slice.call(a.querySelectorAll(".e-card"));d.index=c.indexOf(h),d.currentCardId=h.getAttribute("data-id"),h.previousElementSibling?d.previousCardId=h.previousElementSibling.getAttribute("data-id"):d.previousCardId=null}else{var p=a,u=null!=o.querySelector(".e-card")?parseInt(getComputedStyle(o.querySelector(".e-card")).marginBottom.replace("px","")):null;i-a.getBoundingClientRect().top>=u&&(p=document.elementFromPoint(t,i-u));var f=sf.base.closest(p,".e-card");if(f){c=[].slice.call(a.querySelectorAll(".e-card"));d.index=c.indexOf(f),d.previousCardId=f.getAttribute("data-id")}else{c=[].slice.call(a.querySelectorAll(".e-card"));i-a.getBoundingClientRect().top>=u&&c.length>0?d.previousCardId=c[c.length-1].getAttribute("data-id"):d.previousCardId=null}}return JSON.stringify(d)}}return null},destroy:function(e){e&&window.sfBlazor.instances[e].destroy()}}}()},"./modules/sf-lineargauge.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.LinearGauge=function(){"use strict";var e=function(){function e(e,t,i,n){this.dragMillisecond=0,window.sfBlazor=window.sfBlazor,this.valueToCoefficient=function(e,t){var i=(e-t.Minimum)/t.Maximum;return i="Vertical"===t.Orientation?t.IsInversed&&"Thermometer"!==t.ContainerType?i:1-i:t.IsInversed&&"Thermometer"!==t.ContainerType?1-i:i},this.barAnimationProgress=function(e,t,i,n,s,o){var r=e.PointerValue>e.PreviousPointerValue?n+t*s:n+t*(e.PreviousPointerValue-s),a=e.PointerValue>e.PreviousPointerValue?r+e.PreviousPointerValue<e.PointerValue?r+e.PreviousPointerValue:e.PointerValue:e.PreviousPointerValue-r,l=this.valueToCoefficient(a,e)*e.RectHeight+e.RectY,d=this.valueToCoefficient(e.Minimum,e)*e.RectHeight+e.RectY,h=Math.abs(l-d);"Vertical"===e.Orientation?(e.PointerBoundY="Thermometer"===e.ContainerType?l:e.IsInversed?d:l,e.PointerBoundHeight=h,"Bar"===e.PointerType&&"Normal"===e.ContainerType&&(i.setAttribute("y",e.PointerBoundY.toString()),i.setAttribute("height",e.PointerBoundHeight.toString()),i.setAttribute("x",e.PointerBoundX.toString()),i.setAttribute("width",e.PointerWidth.toString())),"path"===i.tagName&&i.setAttribute("d",o?"":this.getPathContainer(e))):(e.PointerBoundX="Thermometer"===e.ContainerType?d:e.IsInversed?l:d,e.PointerBoundWidth=h,"Bar"===e.PointerType&&"Normal"===e.ContainerType&&(i.setAttribute("x",e.PointerBoundX.toString()),i.setAttribute("width",e.PointerBoundWidth.toString()),i.setAttribute("y",e.PointerBoundY.toString()),i.setAttribute("height",e.PointerHeight.toString())),"path"===i.tagName&&i.setAttribute("d",o?"":this.getPathContainer(e)))},this.markerAnimationProgress=function(e,t,i,n,s){var o=e.PointerValue>e.PreviousPointerValue?n+t*s:n+t*(e.PreviousPointerValue-s),r=e.PointerValue>e.PreviousPointerValue?o+e.PreviousPointerValue<e.PointerValue?o+e.PreviousPointerValue:e.PointerValue:e.PreviousPointerValue-o,a=e.MarkerType;if("InvertedTriangle"!=e.MarkerType&&"Triangle"!=e.MarkerType||(a=("Outside"==e.Position&&!e.OpposedPosition||"Inside"==e.Position&&e.OpposedPosition||"Cross"==e.Position)&&"Triangle"==e.MarkerType?"InvertedTriangle":("Inside"==e.Position&&!e.OpposedPosition||"Outside"==e.Position&&e.OpposedPosition)&&"InvertedTriangle"==e.MarkerType?"Triangle":e.MarkerType),"Vertical"===e.Orientation){var l=e.PointerBoundX;if(e.PointerBoundY=this.valueToCoefficient(r,e)*e.RectHeight+e.RectY,"Circle"===e.MarkerType){var d=(e.PointerWidth+e.PointerHeight)/4,h=e.OpposedPosition?"Near"==e.Placement?l-d:l+d:"Far"!=e.Placement?l-d:l+d;i.setAttribute("cy",e.PointerBoundY.toString()),i.setAttribute("cx",h.toString())}else if("Image"===e.MarkerType||"Rectangle"===e.MarkerType){var c=!e.OpposedPosition&&"Far"!=e.Placement||e.OpposedPosition&&"Near"==e.Placement?l-e.PointerWidth:l;i.setAttribute("y",(e.PointerBoundY-e.PointerHeight/2).toString()),i.setAttribute("x",c.toString())}else i.setAttribute("d",this.calculateShapes(e,a))}else{e.PointerBoundX=this.valueToCoefficient(r,e)*e.RectHeight+e.RectY;var p=e.PointerBoundY;if("Circle"===e.MarkerType){d=(e.PointerWidth+e.PointerHeight)/4;var u=e.OpposedPosition?"Near"==e.Placement?p-d:p+d:"Far"==e.Placement?p+d:p-d;i.setAttribute("cx",e.PointerBoundX.toString()),i.setAttribute("cy",u.toString())}else if("Image"===e.MarkerType||"Rectangle"===e.MarkerType){var f=e.PointerHeight,m=e.OpposedPosition?"Near"==e.Placement?p-f/2:p+f/2:"Far"==e.Placement?p+f/2:p-f/2;i.setAttribute("x",(e.PointerBoundX-e.PointerWidth/2).toString()),i.setAttribute("y",m.toString())}else i.setAttribute("d",this.calculateShapes(e,a))}},this.id=e,this.element=t,this.dotNetRef=n,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.destroy=function(){this.dotNetRef=null,this.unWireEvents()},e.prototype.unWireEvents=function(){
/*! Bind the Event handler */
sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.gaugeOnMouseDown),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.gaugeOnMouseMove),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchEndEvent,this.gaugeOnMouseEnd),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchCancelEvent,this.gaugeOnMouseEnd),sf.base.EventHandler.remove(this.element,"click",this.gaugeOnMouseClick),sf.base.EventHandler.remove(this.element,"mouseleave",this.gaugeOnMouseLeave),window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.gaugeOnResize.bind(this))},e.prototype.render=function(){this.wireEvents()},e.prototype.wireEvents=function(){
/*! Bind the Event handler */
sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.gaugeOnMouseDown,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.gaugeOnMouseMove,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchEndEvent,this.gaugeOnMouseEnd,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchCancelEvent,this.gaugeOnMouseEnd,this),sf.base.EventHandler.add(this.element,"click",this.gaugeOnMouseClick,this),sf.base.EventHandler.add(this.element,"mouseleave",this.gaugeOnMouseLeave,this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.gaugeOnResize.bind(this))},e.prototype.gaugeOnResize=function(){var e,t;if(!sf.base.isNullOrUndefined(this.element)){var i=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(i)){i.style.display="none";var n=this.element.getBoundingClientRect();e=n.width,t=n.height,i.style.removeProperty("display")}}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerResizeEvent",e,t))},e.prototype.gaugeOnMouseClick=function(e){var t=e.target.id;(t.indexOf("Bar")>-1||t.indexOf("Marker")>-1)&&(this.pointerCheck=!1)},e.prototype.gaugeOnMouseLeave=function(e){sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseLeaveEvent",e.x,e.y)},e.prototype.gaugeOnMouseDown=function(e){var t=e.target.id,i=0,n=0;if("touchstart"===e.type?(i=e.touches[0].clientX,n=e.touches[0].clientY):(i=e.pageX,n=e.pageY),t.indexOf("Bar")>-1||t.indexOf("Marker")>-1){this.pointerCheck=!0,this.pointerId=t;var s=parseInt(t.split("_AxisIndex_")[1].split("_")[0],10),o=parseInt(t.split("_AxisIndex_")[1].split("_")[2],10);sf.base.isNullOrUndefined(this.enableDragCollection)||!this.enableDragCollection[s][o]||sf.base.isNullOrUndefined(this.dotNetRef)||(e.preventDefault(),this.dotNetRef.invokeMethodAsync("TriggerDragStart",s,o))}else sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseDownEvent",i,n)},e.prototype.gaugeOnMouseMove=function(e){var t=new Date,i=this.pointerCheck?this.pointerId:e.target.id,n=0,s=0;if("touchmove"===e.type?(n=e.touches[0].clientX,s=e.touches[0].clientY):(n=e.clientX,s=e.clientY),i.indexOf("Bar")>-1||i.indexOf("Marker")>-1){var o=this.svgClient(i),r=parseInt(i.split("_AxisIndex_")[1].split("_")[0],10),a=parseInt(i.split("_AxisIndex_")[1].split("_")[2],10);this.pointerCheck&&(0==this.dragMillisecond||Math.abs(t.getMilliseconds()-this.dragMillisecond)>80)&&!sf.base.isNullOrUndefined(this.enableDragCollection)&&this.enableDragCollection[r][a]&&!sf.base.isNullOrUndefined(this.dotNetRef)?(this.dragMillisecond=t.getMilliseconds(),document.getElementById(this.id+"_svg").setAttribute("cursor","grabbing"),this.dotNetRef.invokeMethodAsync("TriggerDrag",i,r,a,n-o.left,s-o.top)):this.pointerCheck||sf.base.isNullOrUndefined(this.enableDragCollection)||!this.enableDragCollection[r][a]||document.getElementById(this.id+"_svg").setAttribute("cursor","pointer")}else sf.base.isNullOrUndefined(document.getElementById(this.id+"_svg"))||document.getElementById(this.id+"_svg").setAttribute("cursor","auto");if(i.indexOf("Bar")>-1||i.indexOf("Marker")>-1||i.indexOf("Range")>-1){o=this.svgClient(i),r=parseInt(i.split("_AxisIndex_")[1].split("_")[0],10),a=parseInt(i.split("_AxisIndex_")[1].split("_")[2],10);var l=i.split("_")[0],d=document.getElementById(l).getBoundingClientRect(),h={Bottom:d.bottom,Height:d.height,Left:d.left,Right:d.right,Top:d.top,Width:d.width,X:d.x,Y:d.y},c=document.getElementById(l+"_AxisLine_"+r).getBoundingClientRect(),p={Bottom:c.bottom,Height:c.height,Left:c.left,Right:c.right,Top:c.top,Width:c.width,X:c.x,Y:c.y},u=document.getElementById(l+"_MajorTicksLine_"+r).getBoundingClientRect(),f={Bottom:u.bottom,Height:u.height,Left:u.left,Right:u.right,Top:u.top,Width:u.width,X:u.x,Y:u.y},m=document.getElementById(i).getBoundingClientRect(),g={Bottom:m.bottom,Height:m.height,Left:m.left,Right:m.right,Top:m.top,Width:m.width,X:m.x,Y:m.y},v=i.split("_")[0];null!=(b=document.getElementById(v+"_Tooltip"))&&(b.style.visibility="visible"),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerTooltip",i,r,a,n-o.left,s-o.top,h,p,f,g)}else{var b;v=i.split("_")[0];null!=(b=document.getElementById(v+"_Tooltip"))&&(b.style.visibility="hidden")}},e.prototype.gaugeOnMouseEnd=function(e){var t=this.pointerCheck?this.pointerId:e.target.id,i=0,n=0;if("touchend"===e.type){var s=e;i=s.changedTouches[0].pageX,n=s.changedTouches[0].pageY}else i=e.clientX,n=e.clientY;if(this.pointerCheck=!1,t.indexOf("Bar")>-1||t.indexOf("Marker")>-1){this.pointerCheck=!1,this.dragMillisecond=0,this.pointerId="";var o=this.svgClient(t),r=t.split("_AxisIndex_")[0].split("_")[0],a=parseInt(t.split("_AxisIndex_")[1].split("_")[0],10),l=parseInt(t.split("_AxisIndex_")[1].split("_")[2],10);sf.base.isNullOrUndefined(this.enableDragCollection)||!this.enableDragCollection[a][l]||sf.base.isNullOrUndefined(this.dotNetRef)||(document.getElementById(this.id+"_svg").setAttribute("cursor","pointer"),this.dotNetRef.invokeMethodAsync("TriggerDragEnd",a,l,r,t,i-o.left,n-o.top))}else sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseUpEvent",i,n)},e.prototype.svgClient=function(e){return document.getElementById(e.split("_AxisIndex_")[0]+"_svg").getBoundingClientRect()},e.prototype.pointerAnimation=function(e){var t=this,i=document.getElementById(e.AnimationId),n=e.Minimum,s=e.PointerValue;n=n===s?e.Minimum:n;var o,r=Math.abs(n-s);new sf.base.Animation({}).animate(i,{duration:e.Duration,progress:function(s){o=s.timeStamp/e.Duration,"Bar"!=e.PointerType?t.markerAnimationProgress(e,o,i,n,r):t.barAnimationProgress(e,o,i,n,r,!1)},end:function(s){o=1,"Bar"!=e.PointerType?t.markerAnimationProgress(e,o,i,n,r):t.barAnimationProgress(e,o,i,n,r,"RoundedRectangle"===e.ContainerType&&e.Minimum===e.PointerValue)}})},e.prototype.getPathContainer=function(e){var t=" ",i=e.CornerRadius,n=e.PointerBoundWidth,s=e.PointerBoundHeight,o=e.Orientation,r=e.IsInversed,a=e.PointerType,l=e.PointerBoundX,d=e.PointerBoundY,h=0,c=0;switch(e.ContainerType){case"RoundedRectangle":var p=l+n-i,u=d+s-i,f=i+d,m=i+l;"Bar"===a&&("Vertical"===o&&0!==s||"Horizontal"===o&&0!==n)&&(m>l+n/2&&(m=p=l+n/2),f>d+s/2&&(f=u=d+s/2)),"Bar"===a&&("Vertical"===o&&0===s||"Horizontal"===o&&0===n)&&(n<i/2&&!r?p=p+i+i/2:n<i/2&&r&&(m=l-Math.ceil(i/4)),s<i/2&&!r?f=d-Math.ceil(i/4):s<i/2&&r&&(u=u+i+i/2)),t="M "+l+" "+f+" Q "+l+" "+d+" "+m+" "+d+" L "+p+" "+d+" Q "+(l+n)+" "+d+" "+(l+n)+" "+f+" L "+(l+n)+" "+u+" Q "+(l+n)+" "+(d+s)+" "+p+" "+(d+s)+"  L "+m+" "+(d+s)+" Q "+l+" "+(d+s)+" "+l+" "+u+" L "+l+" "+f+" z";break;case"Thermometer":var g="Vertical"===o?n:s;if(h=g+g/2/Math.PI,c=g/2,"Vertical"===o){var v=e.ContainerWidth+e.ContainerWidth/2/Math.PI-h,b="Bar"===a?d+v:d,y="Bar"===a?d+(c-c/Math.PI):d;t="M"+l+" "+(b+s)+" A "+h+" "+h+", 0, 1, 0, "+(l+n)+" "+(b+s)+" L "+(l+n)+" "+y+" A "+c+" "+c+", 0, 1, 0, "+l+" "+y+" z "}else{var w="Bar"!==a||e.IsInversed?l:l-(e.ContainerWidth+e.ContainerWidth/2/Math.PI-h),C="Bar"===a?n-(c-c/Math.PI):n;t="M"+w+" "+d+" A "+h+" "+h+", 0, 1, 0, "+w+" "+(d+s)+" L "+(("Bar"===a?l:w)+C)+" "+(d+s)+" A "+c+" "+c+", 0, 1, 0, "+(("Bar"===a?l:w)+C)+" "+d+" z "}}return t},e.prototype.calculateShapes=function(e,t){var i,n=e.PointerWidth,s=e.PointerHeight,o=e.PointerBoundX,r=e.PointerBoundY,a=e.Placement,l=e.OpposedPosition,d=e.Orientation;switch(t){case"Diamond":i="M "+(o="Horizontal"===d?o-n/2:!l&&"Far"!==a||l&&"Near"===a?o-n:o)+" "+(r="Vertical"===d?r:l?"Near"===a?r-s/2:r+s/2:"Far"===a?r+s/2:r-s/2)+" L "+(o+n/2)+" "+(r-s/2)+" L "+(o+n)+" "+r+" L "+(o+n/2)+" "+(r+s/2)+" L "+o+" "+r+" z";break;case"Triangle":i="Vertical"===d?"M "+o+" "+r+" L"+(o-n)+" "+(r-s/2)+"L"+(o-n)+" "+(r+s/2)+" Z":"M "+o+" "+r+" L"+(o+n/2)+" "+(r-s)+"L"+(o-n/2)+" "+(r-s)+" Z";break;case"InvertedTriangle":i="Vertical"===d?"M "+o+" "+r+" L"+(o+n)+" "+(r-s/2)+"L"+(o+n)+" "+(r+s/2)+" Z":"M "+o+" "+r+" L"+(o+n/2)+" "+(r+s)+"L"+(o-n/2)+" "+(r+s)+" Z";break;case"Arrow":i="Vertical"===d?"M "+o+" "+r+" L"+(o-n/2)+" "+(r-s/2)+" L"+(o-n/2)+" "+(r-s/2+s/4)+" L"+(o-n)+" "+(r-s/2+s/4)+" L"+(o-n)+" "+(r+s/2-s/4)+" L"+(o-n/2)+" "+(r+s/2-s/4)+" L"+(o-n/2)+" "+(r+s/2)+"z":"M "+o+" "+r+" L"+(o+n/2)+" "+(r-s/2)+" L"+(o+n/2-n/4)+" "+(r-s/2)+" L"+(o+n/2-n/4)+" "+(r-s)+" L"+(o-n/2+n/4)+" "+(r-s)+" L"+(o-n/2+n/4)+" "+(r-s/2)+" L"+(o-n/2)+" "+(r-s/2)+"z";break;case"InvertedArrow":i="Vertical"===d?"M "+o+" "+r+"L"+(o+n/2)+" "+(r-s/2)+" L"+(o+n/2)+" "+(r-s/2+s/4)+" L"+(o+n)+" "+(r-s/2+s/4)+" L"+(o+n)+" "+(r+s/2-s/4)+" L"+(o+n/2)+" "+(r+s/2-s/4)+" L"+(o+n/2)+" "+(r+s/2)+"z":"M "+o+" "+r+" L"+(o+n/2)+" "+(r+s/2)+" L"+(o+n/2-n/4)+" "+(r+s/2)+" L"+(o+n/2-n/4)+" "+(r+s)+" L"+(o-n/2+n/4)+" "+(r+s)+" L"+(o-n/2+n/4)+" "+(r+s/2)+" L"+(o-n/2)+" "+(r+s/2)+"z"}return i},e}();return{initialize:function(t,i,n,s){return new e(t.id,t,i,n).render(),sf.base.isNullOrUndefined(s)||t.setAttribute("style",s),this.getElementSize(t.id)},getElementSize:function(e){var t,i,n=document.getElementById(e);if(null!=n){var s=n.getBoundingClientRect();t=s.width,i=s.height}return{width:t,height:i,isIE:sf.base.Browser.isIE}},animationProcess:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element)for(var s=JSON.parse(t.animationSettings),o=0;o<i;o++)n.pointerAnimation(s[o])},setPathAttribute:function(e,t,i,n,s,o){var r=document.getElementById(e);""===t?r.setAttribute("d",i):"Circle"==t?"Horizontal"==o?r.setAttribute("cx",n.toString()):r.setAttribute("cy",s.toString()):"Rectangle"==t||"Image"==t?"Horizontal"==o?r.setAttribute("x",n.toString()):r.setAttribute("y",s.toString()):(r.setAttribute("x",n.toString()),r.setAttribute("y",s.toString()))},updateCollection:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.enableDragCollection=JSON.parse(t.enableDragCollection))},getElementBounds:function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return{width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}return null},dispose:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.destroy()}}}()},"./modules/sf-listbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ListBox=function(){"use strict";var e="e-list-item",t=function(){function t(e,t,i,n){this.element=e,this.dotnetRef=n,this.allowDragAndDrop=i,this.element.blazor__instance=this,this.scope=t,sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),i&&this.initializeDraggable()}return t.prototype.initializeDraggable=function(){var t=this;if(this.allowDragAndDrop){var i=sf.base.select(".e-ul",this.element),n=new sf.lists.Sortable(i,{scope:this.scope,itemClass:e,beforeDragStart:this.triggerBeforeDragStart.bind(this),drag:this.triggerDrag.bind(this),dragStart:this.triggerDragStart.bind(this),beforeDrop:this.dragEnd.bind(this),placeHolder:function(){return sf.base.createElement("span",{className:"e-placeholder"})},helper:function(i){var n=t.element.cloneNode(),s=i.sender.cloneNode(!0);n.appendChild(s);var o=sf.base.select("."+e,t.element);n.style.width=o.offsetWidth+"px",n.style.height=o.offsetHeight+"px";var r=[].slice.call(sf.base.selectAll("."+e+".e-selected",t.element));return r.length&&r.length>1&&r.indexOf(i.sender)>-1&&s.appendChild(sf.base.createElement("span",{className:"e-list-badge",innerHTML:r.length.toString()})),n.style.zIndex=sf.popups.getZindexPartial(t.element).toString(),n}});this.updateDraggable(n,this.allowDragAndDrop)}},t.prototype.triggerBeforeDragStart=function(e){e.cancel=e.target.classList.contains("e-drag-prevent")},t.prototype.triggerDragStart=function(e){e.bindEvents(e.dragElement)},t.prototype.triggerDrag=function(e){var t,i,n,s=0,o=e.event;e.target&&(e.target.classList.contains("e-listbox-container")||e.target.classList.contains("e-list-item")||e.target.classList.contains("e-input-group")||e.target.classList.contains("e-filter-parent"))&&(i=(t=(n=e.target.classList.contains("e-list-item")||e.target.classList.contains("e-input-group")||e.target.classList.contains("e-filter-parent")?e.target.closest(".e-listbox-container"):e.target).querySelector(".e-list-parent")).getBoundingClientRect(),n.classList.contains("e-filter-list")&&(s=40),i.y+t.offsetHeight-(o.pageY+36)<1?t.scrollTop=t.scrollTop+10:o.pageY-36-(i.y+s)<1&&(t.scrollTop=t.scrollTop-10)),e.target},t.prototype.dragEnd=function(e){var t,i,n,s=!1,o=!1,r=!1;n=e.target.parentElement.parentElement,"UL"==e.target.tagName&&e.target.className.indexOf("e-list-parent")>-1&&(n=e.target.parentElement),n.blazor__instance||((n=n.parentElement).className.indexOf("e-list-parent")>-1?n=n.parentElement.parentElement:n.className.indexOf("e-list-wrap")>-1&&(n=n.parentElement)),e.cancel=!0,n.blazor__instance?(t=n.blazor__instance.scope,i=n.blazor__instance.dotnetRef,o=this.scope===t,this.element===n&&(r=!0,o=!1)):s=!0,this.dotnetRef.invokeMethodAsync("DragEndAsync",s,e.droppedElement.getAttribute("data-value"),r,o,e.previousIndex,e.currentIndex,i)},t.prototype.keyDownHandler=function(t){var i=t.target;if(38===t.keyCode||40===t.keyCode)if(t.preventDefault(),i.classList.contains("e-listbox-container")){var n=sf.base.select("."+e,this.element);n&&n.focus()}else{var s=[].slice.call(sf.base.selectAll("."+e,this.element)),o=s.indexOf(i);if(o<0)return;if((o=38===t.keyCode?o-1:o+1)<0||o>s.length-1)return;s[o].focus()}else 65===t.keyCode&&t.ctrlKey&&t.preventDefault()},t.prototype.updateDraggable=function(t,i){if(t){var n=sf.base.getComponent(t.element,sf.base.Draggable);n.abort=i?"":"."+e}},t.prototype.destroyDraggable=function(){var e=sf.base.getComponent(sf.base.select(".e-ul",this.element),"sortable");sf.base.isNullOrUndefined(e)||(this.updateDraggable(e,this.allowDragAndDrop),e.destroy())},t.prototype.destroy=function(){this.destroyDraggable(),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler)},t.prototype.onPropertyChanged=function(e){this.allowDragAndDrop=e,e?this.initializeDraggable():this.destroyDraggable()},t.prototype.getScopedElement=function(e){return sf.base.select("#"+e).blazor__instance.dotnetRef},t}();return{initialize:function(e,i,n,s){sf.base.isNullOrUndefined(e)||new t(e,i,n,s)},destroy:function(e){sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.blazor__instance)||e.blazor__instance.destroy()},onPropertyChanged:function(e,t){sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.blazor__instance)||e.blazor__instance.onPropertyChanged(t)},getScopedListBox:function(e,t){return e.blazor__instance.getScopedElement(t)}}}()},"./modules/sf-listview.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ListView=function(){"use strict";var e={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},t={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},i="e-focused",n="e-list-item",s="e-has-child",o="e-list-header",r="e-disabled",a="e-check",l="none",d=function(){function d(e,t,i,n,s){this.dataSourceLevel=["defaultData_Key"],this.currentDataSourceKey="defaultData_Key",this.isWindow=!1,this.liDifference=0,this.liHeight=0,this.virtualListDifference=0,this.isCheckAll=!1,this.isFocus=!1,this.element=e,this.dotNetRef=t,this.showCheckBox=i.ShowCheckBox,this.showHeader=i.ShowHeader,this.enable=i.Enabled,this.currentUlElement=e.querySelector("ul"),this.enableVirtualization=i.EnableVirtualization,this.isWindow=!i.Height,this.enableSelectEvent=n,this.height=i.Height,this.headerTitleInfo=[i.HeaderTitle],this.selectedItems={defaultData_Key:i.SelectedElementIdInfo},this.enableRtl=i.EnableRtl,this.animation=i.Animation,this.isTemplate=i.Template,this.focusId=[],this.element.blazor__instance=this,this.datasource=s}return d.prototype.initialize=function(){if(this.enableVirtualization){if(this.isWindow)this.dotNetRef.invokeMethodAsync("GetComponenetHeight",window.innerHeight);else if(-1!==this.height.indexOf("%")){var e=this.element.parentElement.getBoundingClientRect().height;this.dotNetRef.invokeMethodAsync("GetComponenetHeight",e/100*parseFloat(this.height))}this.updateLiElementHeight()}this.headerElement=this.element.querySelector(".e-headertext"),this.animationObject=new sf.base.Animation(this.animateOptions),this.wireEvents()},d.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyActionHandler,this),sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),sf.base.EventHandler.add(this.element,"focusout",this.removeFocus,this),this.touchModule=new sf.base.Touch(this.element,{swipe:this.swipeActionHandler.bind(this)}),this.enableVirtualization?(sf.base.EventHandler.add(this.element,"scroll",this.scrollHandler,this),this.isWindow&&window.addEventListener("scroll",this.scrollHandler.bind(this))):(sf.base.EventHandler.add(this.element,"mouseover",this.mouseHoverHandler,this),sf.base.EventHandler.add(this.element,"mouseout",this.mouseOutHandler,this))},d.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"focus",this.focusHandler),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyActionHandler),sf.base.EventHandler.remove(this.element,"click",this.clickHandler),sf.base.EventHandler.remove(this.element,"focusout",this.removeFocus),this.enableVirtualization?(sf.base.EventHandler.remove(this.element,"scroll",this.scrollHandler),this.isWindow&&window.removeEventListener("scroll",this.scrollHandler.bind(this))):(sf.base.EventHandler.remove(this.element,"mouseover",this.mouseHoverHandler),sf.base.EventHandler.remove(this.element,"mouseout",this.mouseOutHandler)),this.touchModule.destroy()},d.prototype.swipeActionHandler=function(e){"Right"===e.swipeDirection&&e.velocity>.5&&"touchend"===e.originalEvent.type&&(this.showCheckBox&&this.dataSourceLevel[this.dataSourceLevel.length-1]&&this.uncheckAllItems(),this.back())},d.prototype.showHideItem=function(e,t){var i=this.getLi(e);i&&(i.style.display=t)},d.prototype.enableState=function(e,t){var i=this.getLi(e);i&&(t?i.classList.remove("e-disabled"):i.classList.add("e-disabled"))},d.prototype.getLi=function(e){var t;return this.element&&(t=this.element.querySelector('[data-uid="'+e.id+'"]')),t},d.prototype.scrollHandler=function(e){var t,n=this.isWindow?e.target.documentElement.scrollTop:e.target.scrollTop;if(this.liHeight||this.updateLiElementHeight(),(t=Math.round(n/this.liHeight))-this.liDifference>=this.virtualListDifference||t-this.liDifference<=-1){var s=this.currentUlElement.querySelector("."+i);s&&(this.focusedElementId=s.getAttribute("data-uid"));var o=this.element.querySelector(".e-list-virtualcontainer");o&&(o.style.top=(t-1)*this.liHeight<0?"0px":(t-2)*this.liHeight+"px",this.liDifference=t,this.dotNetRef.invokeMethodAsync("VirtualScrolling",t-2))}},d.prototype.preventSelection=function(e){var t=this.mouseEvent.target,i=sf.base.closest(t,"."+n);e?this.dataSourceLevel.length>1&&this.dataSourceLevel.pop():this.performSelection(i)},d.prototype.performSelection=function(e){null!==e&&!e.classList.contains(r)&&this.enable&&(this.removeFocus(),this.focusId=[],this.addFocusId(e.getAttribute("data-uid")),this.showCheckBox?this.mouseEvent.target.classList.contains("e-frame")?this.checkUncheckItem(e):e.classList.contains(s)?(this.removeHover(),this.removeFocus(),this.setSelectLI(e,this.mouseEvent)):this.checkUncheckItem(e):(this.currentUlElement.querySelector("."+i)&&this.currentUlElement.querySelector("."+i).classList.remove(i),e.classList.contains(s)?this.setSelectLI(e,this.mouseEvent):e.classList.contains(i)||(e.classList.add(i),this.selectedItems[this.currentDataSourceKey][0]=e.getAttribute("data-uid"))))},d.prototype.updateLiElementHeight=function(){var e=this.element.querySelector(".e-list-virtualcontainer");if(e){this.currentUlElement||(this.currentUlElement=this.element.querySelector("ul"));var t=e.children[0];if(t){if(this.liHeight=t.getBoundingClientRect().height,this.liHeight&&this.enableVirtualization){var i=e.getBoundingClientRect().height;e.parentElement.style.height=i+"px"}}else{var s=sf.base.createElement("li",{className:n});e.appendChild(s),this.liHeight=e.children[0].getBoundingClientRect().height,sf.base.detach(s)}this.liHeight&&this.dotNetRef.invokeMethodAsync("UpdateLiElementHeight",this.liHeight)}},d.prototype.updateElementDifference=function(e){this.virtualListDifference=e,this.enableVirtualization&&this.updateLiElementHeight()},d.prototype.selectItem=function(e){var t=this.getLi(e);this.showCheckBox?this.setChecked(t,t.querySelector(".e-checkbox-wrapper")):(sf.base.isNullOrUndefined(t)?this.removeFocus():this.setSelectLI(t,null),this.selectedItems[this.currentDataSourceKey][0]=t.getAttribute("data-uid"))},d.prototype.clickHandler=function(e){if(this.currentUlElement&&!this.element.classList.contains("e-disabled")){var t=e.target,i=t.classList;if(this.mouseEvent=e,i.contains("e-icon-back")||i.contains("e-headertext"))this.back();else{var o=sf.base.closest(t.parentNode,"."+n)?sf.base.closest(t.parentNode,"."+n):sf.base.closest(t,"."+n);if(this.enableSelectEvent||this.performSelection(o),null!==o&&!o.classList.contains(r)&&this.enable){if(o.classList.contains(s)){var a=o.getAttribute("data-uid");-1===this.dataSourceLevel.indexOf(a)&&this.dataSourceLevel.push(a)}this.enableSelectEvent&&(this.isFocus=!1,this.getSelectEventData(o,e))}}}},d.prototype.checkUncheckItem=function(e){e.classList.add(i),e.querySelector("."+a)?this.uncheckItem(e):this.setChecked(e,e.querySelector(".e-checkbox-wrapper")),this.dotNetRef.invokeMethodAsync("UpdateData",!sf.base.isNullOrUndefined(e.querySelector("."+a)),e.getAttribute("data-uid"))},d.prototype.back=function(){if(this.dataSourceLevel.length>1){for(var e=this.element.querySelectorAll("ul"),t=this.element.querySelector("."+o),n=0;n<e.length;n++)this.dataSourceLevel.length>2?e[n].getAttribute("pid")===this.dataSourceLevel[this.dataSourceLevel.length-2]?(this.switchView(this.currentUlElement,e[n],!0),this.currentUlElement=e[n]):e[n].style.display=l:null===e[n].getAttribute("pid")?(this.switchView(this.currentUlElement,e[n],!0),this.currentUlElement=e[n]):e[n].style.display=l;if(this.dataSourceLevel.pop(),!this.showCheckBox)this.currentUlElement.querySelectorAll("."+i)[0].setAttribute("aria-selected","false");this.isTemplate||(this.headerTitleInfo.length>1&&this.headerTitleInfo.pop(),this.headerElement&&(this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1])),this.currentDataSourceKey=this.dataSourceLevel[this.dataSourceLevel.length-1],1===this.dataSourceLevel.length&&t&&(t.children[0].style.display=l,t.classList.remove("e-list-navigation"));var s={IsInteracted:!(!event&&!this.isRootFocus),Level:this.dataSourceLevel.length>0?this.dataSourceLevel.length-1:this.dataSourceLevel.length};this.dotNetRef.invokeMethodAsync("TriggerBackEvent",s)}},d.prototype.setHoverLI=function(e){this.element.classList.contains(r)||e.classList.contains(r)||e.classList.add("e-hover")},d.prototype.mouseHoverHandler=function(e){var t=sf.base.closest(e.target.parentNode,"."+n);t&&this.setHoverLI(t)},d.prototype.mouseOutHandler=function(e){this.removeHover()},d.prototype.removeHover=function(){var e=this.element.querySelector(".e-hover");e&&e.classList.remove("e-hover")},d.prototype.removeFocus=function(){this.currentUlElement||(this.currentUlElement=this.element.querySelector("ul"));for(var e=0,t=this.currentUlElement.querySelectorAll("."+i);e<t.length;e++){t[e].classList.remove(i)}this.isRestrictFocus=void 0},d.prototype.isValidLI=function(e){return e&&e.classList.contains(n)&&!e.classList.contains("e-list-group-item")&&!e.classList.contains(r)},d.prototype.setSelectLI=function(e,t){if(this.enable&&this.isValidLI(e)&&!e.classList.contains(i)){var n=this.currentUlElement.querySelector("."+i);n&&this.removeFocusId(n.getAttribute("data-uid")),this.removeFocus(),this.addAriaAttribute(!0,e),this.removeHover(),e.classList.contains(s)&&this.renderSubList(e)}},d.prototype.addAriaAttribute=function(e,t){e?(this.isCheckAll||t.classList.add(i),this.addFocusId(t.getAttribute("data-uid"))):this.showCheckBox||e||!t.classList.contains(i)||(t.classList.remove(i),this.focusId.indexOf(t.getAttribute("data-uid"))>=0&&this.focusId.splice(this.focusId.indexOf(t.getAttribute("data-uid")),1)),(this.showCheckBox||t.classList.contains(s))&&t.setAttribute("aria-selected",e.toString())},d.prototype.renderSubList=function(e){var t=e,n=e.getAttribute("data-uid"),r=this.element.querySelector("."+o);if(e.classList.remove(i),e.classList.add(i),this.showHeader&&r&&(r.children[0].style.display=null,r.classList.add("e-list-navigation")),t.classList.contains(s)&&n){if(this.element.querySelector("[pid='"+n+"']"))this.renderChildList(n,[n]);else{var a={ElementId:n,Key:this.currentDataSourceKey};this.dotNetRef.invokeMethodAsync("ListChildDataSource",a)}this.isTemplate||(this.headerTitleInfo.push(t.innerText.trim()),this.headerElement&&(this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1])),-1==this.dataSourceLevel.indexOf(n)&&this.dataSourceLevel.push(n),this.currentDataSourceKey=n}},d.prototype.renderChildList=function(e,t){var i=this.element.querySelectorAll("ul");i[i.length-1].getAttribute("pid")||i[i.length-1].setAttribute("pid",e);for(var n=0;n<i.length;n++)if(i[n].getAttribute("pid")===e){this.switchView(this.currentUlElement,i[n],!1),this.currentUlElement=i[n];var s=i[n].querySelectorAll(".e-list-item");if(s[0].getAttribute("aria-level")!==n.toString())for(var o=0;o<s.length;o++)s[o].setAttribute("aria-level",n.toString());t&&(this.selectedItems[e]=t)}},d.prototype.mouseDownHandler=function(){this.isRestrictFocus=null==this.isRestrictFocus||this.isRestrictFocus},d.prototype.focusHandler=function(e){this.isRestrictFocus?this.isRestrictFocus=!1:sf.base.isNullOrUndefined(this.focusId)||0==this.focusId.length?(this.isRootFocus=!0,this.arrowKeyHandler(e),this.isRootFocus=!1):(this.isFocus=!0,this.updateFocusElement(e))},d.prototype.keyActionHandler=function(e){if("INPUT"!=e.target.tagName)switch(e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 39:this.arrowKeyHandler(e);break;case 37:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:var t=this.element.querySelector("."+o+" .e-icon-back");t&&t.style.display!=l&&(this.showCheckBox&&this.currentDataSourceKey&&this.uncheckAllItems(),this.back());break;case 32:this.spaceKeyHandler(e)}},d.prototype.addFocusId=function(e){this.focusId.indexOf(e)<0&&this.focusId.push(e)},d.prototype.removeFocusId=function(e){this.focusId.indexOf(e)>=0&&this.focusId.splice(this.focusId.indexOf(e),1)},d.prototype.updateFocusElement=function(e){var t=this.currentUlElement.querySelector("."+i);t&&(t.classList.remove(i),this.focusId.indexOf(t.getAttribute("data-uid"))>=0&&this.focusId.splice(this.focusId.indexOf(t.getAttribute("data-uid")),1));for(var n=this.currentUlElement.children,s=0;s<n.length;s++)this.focusId.indexOf(n[s].getAttribute("data-uid"))>=0&&(n[s].classList.add(i),this.addFocusId(n[s].getAttribute("data-uid")),this.addAriaAttribute(!0,n[s]),this.element.setAttribute("aria-activedescendant",n[s].id.toString()),this.enableSelectEvent&&(this.getSelectEventData(n[s],e),this.isFocus=!1))},d.prototype.homeKeyHandler=function(e,t){e.preventDefault();var n=this.currentUlElement.querySelector("."+i);n&&(n.classList.remove(i),this.removeFocusId(n.getAttribute("data-uid")));var s=t?this.currentUlElement.children.length-1:0;s=this.currentUlElement.children[s].classList.contains("e-list-group-item")&&this.currentUlElement.children.length>1?s+1:s;var o=this.currentUlElement.children[s];this.addAriaAttribute(!0,o),o.classList.add(i),this.addFocusId(o.getAttribute("data-uid")),this.currentUlElement.children[s]?this.element.setAttribute("aria-activedescendant",this.currentUlElement.children[s].id.toString()):this.element.removeAttribute("aria-activedescendant"),this.enableSelectEvent&&this.getSelectEventData(o,e)},d.prototype.onArrowKeyDown=function(e,t){var o,r;return!sf.base.isNullOrUndefined(this.currentUlElement.querySelector("."+s))||this.showCheckBox?((r=this.currentUlElement.querySelector("."+i)||this.currentUlElement.querySelector("."+i))&&this.removeFocusId(r.getAttribute("data-uid")),o=this.getSiblingLI(this.currentUlElement.querySelectorAll("."+n),r,t),sf.base.isNullOrUndefined(o)||(r&&(r.classList.remove(i),this.showCheckBox||r.classList.remove(i),this.removeFocusId(r.getAttribute("data-uid"))),o.classList.contains(s)||this.showCheckBox?o.classList.add(i):this.setSelectLI(o,e))):(r=this.currentUlElement.querySelector("."+i),o=this.getSiblingLI(this.currentUlElement.querySelectorAll("."+n),r,t),this.setSelectLI(o,e)),o?this.element.setAttribute("aria-activedescendant",o.id.toString()):this.element.removeAttribute("aria-activedescendant"),o},d.prototype.getSiblingLI=function(e,t,i){var n=Array.prototype.slice.call(e),s=n.indexOf(t);return i?n[s-1]:n[s+1]},d.prototype.arrowKeyHandler=function(e,t){if(this.isRootFocus||e.preventDefault(),this.currentUlElement){var i=this.onArrowKeyDown(e,t);i&&this.addFocusId(i.getAttribute("data-uid"));var n=this.element.getBoundingClientRect().top,s=this.element.getBoundingClientRect().height,o=void 0;if(i){var r=i.getBoundingClientRect().top,a=i.getBoundingClientRect().height;if(t)(o=this.isWindow?r:r-n)<0&&(this.isWindow?window.scroll(0,pageYOffset+o):this.element.scrollTop=this.element.scrollTop+o);else{var l=this.isWindow?window.innerHeight:s;(o=this.isWindow?r+a:r-n+a)>l&&(this.isWindow?window.scroll(0,pageYOffset+(o-l)):this.element.scrollTop=this.element.scrollTop+(o-l))}}}},d.prototype.enterKeyHandler=function(e){if(this.currentUlElement){var t=this.currentUlElement.querySelector("."+i);this.currentUlElement.querySelector("."+s)&&t?(t.classList.remove(i),this.showCheckBox&&(this.removeFocus(),this.removeHover()),this.setSelectLI(t,e)):sf.base.isNullOrUndefined(t)||this.spaceKeyHandler(e)}},d.prototype.checkAllItems=function(){this.isCheckAll=!0,this.updateCheckBoxState(!0),this.isCheckAll=!1},d.prototype.uncheckAllItems=function(){this.updateCheckBoxState(!1)},d.prototype.updateCheckBoxState=function(e){if(this.showCheckBox)for(var t=this.currentUlElement.querySelectorAll("li"),i=this.enableVirtualization?this.currentUlElement.querySelector(".e-list-virtualcontainer").childElementCount:this.currentUlElement.childElementCount,n=0;n<i;n++){var s=t[n].querySelector(".e-frame");s&&(e&&!s.classList.contains(a)?this.checkItem(t[n]):!e&&s.classList.contains(a)&&this.uncheckItem(t[n]))}},d.prototype.checkItem=function(e){this.toggleCheckBox(e,!0)},d.prototype.getCheckData=function(e,t,i){var n=e.id;if(i!==e.id||sf.base.isNullOrUndefined(e.id)){i=i.toLowerCase();for(var s=0,o=Object.entries(e);s<o.length;s++){var r=o[s],a=""+r[0],l=""+r[1];(a=a.toLowerCase())===i&&(n=l)}}var d=this.currentUlElement.querySelector("[data-uid='"+n+"']");t?this.checkItem(d):this.uncheckItem(d),this.removeFocus()},d.prototype.spaceKeyHandler=function(e){if(this.isTemplate||e.preventDefault(),this.enable&&this.showCheckBox&&this.currentUlElement){var t=this.currentUlElement.querySelector("."+i);!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.querySelector("."+a))?this.setChecked(t,t.querySelector(".e-checkbox-wrapper")):this.uncheckItem(t),this.enableSelectEvent&&this.getSelectEventData(t,e)}},d.prototype.setChecked=function(e,t){this.removeFocus(),e.classList.add(i),this.addAriaAttribute(!0,e),t&&(t.querySelector(".e-frame").classList.add(a),t.setAttribute("aria-checked","true")),this.selectedItems[this.currentDataSourceKey]&&-1===this.selectedItems[this.currentDataSourceKey].indexOf(e.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].push(e.getAttribute("data-uid"))},d.prototype.toggleCheckBox=function(e,t){if(this.showCheckBox){var i=e;if(!sf.base.isNullOrUndefined(i)){var n=i.querySelector(".e-frame");this.addAriaAttribute(t,i),sf.base.isNullOrUndefined(n)||(t?n.classList.add(a):n.classList.remove(a),n.parentElement.setAttribute("aria-checked",t?"true":"false"))}}},d.prototype.uncheckItem=function(e){e&&(this.selectedItems[this.currentDataSourceKey]&&-1!==this.selectedItems[this.currentDataSourceKey].indexOf(e.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].splice(this.selectedItems[this.currentDataSourceKey].indexOf(e.getAttribute("data-uid")),1),this.toggleCheckBox(e,!1))},d.prototype.addCheckClass=function(){this.currentUlElement||(this.currentUlElement=this.element.querySelector("ul"));for(var e=this.enableVirtualization?this.currentUlElement.querySelector(".e-list-virtualcontainer").children:this.currentUlElement.children,t=this.selectedItems[this.currentDataSourceKey],n=0;n<e.length;n++)this.showCheckBox?(this.focusedElementId&&(this.focusedElementId===e[n].getAttribute("data-uid")?e[n].classList.add(i):e[n].classList.remove(i)),t.length>0&&(-1!==t.indexOf(e[n].getAttribute("data-uid"))?this.toggleCheckBox(e[n],!0):this.toggleCheckBox(e[n],!1))):t[0]===e[n].getAttribute("data-uid")?e[n].classList.add(i):e[n].classList.remove(i);for(n=0;n<e.length;n++)this.showCheckBox?(this.focusedElementId&&(this.focusedElementId===e[n].getAttribute("data-uid")?e[n].classList.add(i):e[n].classList.remove(i)),t.length>0&&(-1!==t.indexOf(e[n].getAttribute("data-uid"))?this.toggleCheckBox(e[n],!0):this.toggleCheckBox(e[n],!1))):t&&t[0]===e[n].getAttribute("data-uid")?e[n].classList.add(i):e[n].classList.remove(i)},d.prototype.getSelectedItems=function(){var e=this.currentUlElement.querySelectorAll(".e-check");this.selectedItems[this.currentDataSourceKey]=[];for(var t=0;t<e.length;t++){var i=sf.base.closest(e[t],"."+n);this.selectedItems[this.currentDataSourceKey]&&-1===this.selectedItems[this.currentDataSourceKey].indexOf(i.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].push(i.getAttribute("data-uid"))}return{ElementId:this.selectedItems[this.currentDataSourceKey],Key:this.currentDataSourceKey}},d.prototype.getSelectEventData=function(e,t){if(e){var i="click"===t.type?!e.querySelector("."+a):!!e.querySelector("."+a),n={ElementId:e.getAttribute("data-uid"),IsChecked:i,Key:e.classList.contains(s)&&!t.target.classList.contains("e-frame")?this.dataSourceLevel[this.dataSourceLevel.length-2]:this.currentDataSourceKey,IsInteracted:!(!t&&!this.isRootFocus),Level:this.dataSourceLevel.length>0?this.dataSourceLevel.length-1:this.dataSourceLevel.length};this.isFocus||this.dotNetRef.invokeMethodAsync("TriggerClickEvent",n)}},d.prototype.switchView=function(i,n,s){var o=this;if(i&&n){var r=i.style.position,a="hidden"!==this.element.style.overflow?this.element.style.overflow:"",d=void 0,h=this.animation.duration;if(i.style.position="absolute",i.classList.add("e-view"),"Disable"===sf.base.animationMode){d=this.enableRtl?t.None:e.None,s=this.enableRtl,h=0}else if(this.animation.effect)"None"===this.animation.effect&&"Enable"===sf.base.animationMode&&(this.animation.effect="SlideLeft"),d=this.enableRtl?t[this.animation.effect]:e[this.animation.effect];else{d=e.SlideLeft,s=this.enableRtl,h=0}this.element.style.overflow="hidden",this.animationObject.animate(i,{name:s?d[0]:d[1],duration:h,timingFunction:this.animation.easing,end:function(e){i.style.display=l,o.element.style.overflow=a,i.style.position=r,i.classList.remove("e-view")}}),n.style.display="",this.animationObject.animate(n,{name:s?d[2]:d[3],duration:h,timingFunction:this.animation.easing,end:function(){o.dotNetRef.invokeMethodAsync("TriggerActionComplete",o.datasource)}}),this.currentUlElement=n}},d.prototype.setAnimation=function(e){this.animation=e},d.prototype.setSelectedItems=function(e){var t=this.element.querySelector("."+o);sf.base.isNullOrUndefined(e)||(this.selectedItems={defaultData_Key:e}),e.length>0?this.currentUlElement=this.element.querySelector('[data-uid="'+e+'"]').closest("ul"):this.currentUlElement=this.element.querySelector("ul");var i=this.element.querySelector('[data-uid="'+e+'"]').classList.contains("e-has-child");i?(this.dataSourceLevel=["defaultData_Key"],this.currentUlElement.style.removeProperty("display"),this.addCheckClass(),this.currentDataSourceKey="defaultData_Key"):this.selectedItems[this.currentDataSourceKey]=[this.currentDataSourceKey],this.showCheckBox&&this.removeFocus(),this.headerElement&&i&&(this.headerTitleInfo=this.headerTitleInfo.splice(0,1),this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1]),1===this.dataSourceLevel.length&&t&&i&&(t.children[0].style.display=l,t.classList.remove("e-list-navigation"))},d.prototype.updateHeaderTitle=function(e){this.headerTitleInfo[0]=e,this.headerElement&&(this.headerElement.innerText=e)},d.prototype.destroy=function(){this.element.style.display=l,this.unWireEvents()},d}();return{initialize:function(e,t,i,n,s,o){this.isValid(e)&&(new d(e,t,i,n,o),e.blazor__instance.initialize(),e.blazor__instance.updateElementDifference(s))},renderChildList:function(e,t,i){this.isValid(e)&&e.blazor__instance.renderChildList(t,i)},addActiveClass:function(e){this.isValid(e)&&e.blazor__instance.addCheckClass()},showHideItem:function(e,t,i){this.isValid(e)&&e.blazor__instance.showHideItem(t,i)},enableState:function(e,t,i){this.isValid(e)&&e.blazor__instance.enableState(t,i)},back:function(e){this.isValid(e)&&e.blazor__instance.back()},checkAllItems:function(e){this.isValid(e)&&e.blazor__instance.checkAllItems()},uncheckAllItems:function(e){this.isValid(e)&&e.blazor__instance.uncheckAllItems()},getCheckData:function(e,t,i,n){if(this.isValid(e)&&null!=t)for(var s=0;s<t.length;s++)e.blazor__instance.getCheckData(t[s],i,n)},selectItem:function(e,t){if(e&&null!=t)for(var i=0;i<t.length;i++)e.blazor__instance.selectItem(t[i])},preventSelection:function(e,t){e.blazor__instance.preventSelection(t)},updateLiElementHeight:function(e){this.isValid(e)&&e.blazor__instance.updateLiElementHeight()},getCheckedItems:function(e){return this.isValid(e)?e.blazor__instance.getSelectedItems():{}},setAnimation:function(e,t){this.isValid(e)&&e.blazor__instance.setAnimation(t)},setCheckedItems:function(e,t){this.isValid(e)&&e.blazor__instance.setSelectedItems(t)},updateHeaderTitle:function(e,t){this.isValid(e)&&e.blazor__instance.updateHeaderTitle(t)},destroy:function(e){this.isValid(e)&&e.blazor__instance.destroy()},updateElementDifference:function(e,t){this.isValid(e)&&e.blazor__instance.updateElementDifference(t)},isValid:function(e){return!!e}}}()},"./modules/sf-maps.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Maps=function(){"use strict";var e=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):new i((function(t){t(e.value)})).then(r,a)}l((n=n.apply(e,t||[])).next())}))},t=function(e,t){var i,n,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=document.createElementNS("http://www.w3.org/2000/svg","rect"),n=function(e,t){this.x=e,this.y=t};function s(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.setAttribute("id",e),t}function o(e,t,i){var n="";switch(e){case"Balloon":n="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z";break;case"Cross":n="M "+i.x+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" M "+(i.x-t.width/2)+" "+i.y+" L "+(i.x+t.width/2)+" "+i.y;break;case"Diamond":n="M "+i.x+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+i.y+" L "+i.x+" "+(i.y+t.height/2)+" L "+(i.x-t.width/2)+" "+i.y+" Z";break;case"Star":n="M "+(i.x+t.width/3)+" "+(i.y-t.height/2)+" L "+(i.x-t.width/2)+" "+(i.y+t.height/6)+" L "+(i.x+t.width/2)+" "+(i.y+t.height/6)+" L "+(i.x-t.width/3)+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" L "+(i.x+t.width/3)+" "+(i.y-t.height/2)+" Z";break;case"Triangle":n="M "+i.x+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+(i.y+t.height/2)+" L "+(i.x-t.width/2)+" "+(i.y+t.height/2)+" Z";break;case"HorizontalLine":n=" M "+(i.x-t.width/2)+" "+i.y+" L "+(i.x+t.width/2)+" "+i.y;break;case"VerticalLine":n="M "+i.x+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2);break;case"InvertedTriangle":n="M "+(i.x-t.width/2)+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" Z";break;case"Pentagon":for(var s=void 0,o=void 0,r=0;r<5;r++)s=t.width/2*Math.cos(Math.PI/180*(72*r)),o=t.height/2*Math.sin(Math.PI/180*(72*r)),n+=(0===r?"M ":"L ")+(i.x+s)+" "+(i.y+o);n+=" Z"}return n}var r=function(){function r(e,t,i,n){this.previousMarkerId="",this.previousId="",this.moveClientX=0,this.moveClientY=0,this.clientX=0,this.clientY=0,this.enableSelectionZoom=!1,this.allowPanning=!1,this.isPanning=!1,this.isPan=!0,this.zoomClick=!1,this.mouseClick=!1,this.position=null,this.height=0,this.width=0,this.mapsBorderWidth=0,this.toolbarButtonOpacity=1,this.toolbarShapeOpacity=1,this.markerClusterExpandCheck=!1,this.svgCreated=!1,this.zoomIn=1,this.zoomOut=1,this.scaleFactor=1,this.factorCount=0,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.lastScale=1,this.clusterLocation=[],this.isTouch=!1,this.touchMoveList=[],this.touchStartList=[],this.tileTranslatePoint=null,this.isToolbarTooltip=!1,this.marginTop=0,this.marginLeft=0,this.isPinchZoomed=!1,this.panComplete=!1,this.pinchComplete=!1,window.sfBlazor=window.sfBlazor,this.tapCount=0,this.id=e,this.element=t,this.dotNetRef=n,this.layerCount=i.layerCount,this.clusterSettings=i.markerCluster?JSON.parse(i.markerCluster):null,this.dataSource=i.dataSource?JSON.parse(i.dataSource):null,this.shapeTranslatePoint=i.shapeTranslatePoint?i.shapeTranslatePoint:null,this.shapeBorderWidth=i.shapeBorderWidth,this.projectionType=i.projectionType,this.options=i,this.options.layerHighlightSettings=JSON.parse(this.options.layerHighlightSettings),this.options.markerHighlightSettings=JSON.parse(this.options.markerHighlightSettings),this.options.bubbleHighlightSettings=JSON.parse(this.options.bubbleHighlightSettings),this.options.navigationHighlightSettings=JSON.parse(this.options.navigationHighlightSettings),this.options.selectionSettings=JSON.parse(this.options.selectionSettings),this.marginLeft=0,this.urlTemplate=i.urlTemplate?i.urlTemplate:null,this.isToolbarTooltip=!1,this.isTouch=!1,this.pinchFactor=1,this.lastScale=1,this.touchStartList=[],this.touchMoveList=[],this.dataId=e,window.sfBlazor.setCompInstance(this)}return r.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"wheel",this.mapMouseWheel.bind(this),this),sf.base.EventHandler.add(this.element,"touchmove mousemove",this.mouseMove.bind(this),this),sf.base.EventHandler.add(this.element,"touchend mouseup mouseleave",this.mouseUp.bind(this),this),sf.base.EventHandler.add(this.element,"touchstart mousedown",this.mouseDown.bind(this),this),sf.base.EventHandler.add(this.element,"click pointerdown",this.click.bind(this),this),sf.base.EventHandler.add(this.element,"dblclick",this.doubleClick.bind(this),this),sf.base.EventHandler.add(this.element,"contextmenu",this.rightClick.bind(this),this),sf.base.EventHandler.add(this.element,"keydown",this.keyDown.bind(this),this),sf.base.EventHandler.add(this.element,"keyup",this.keyUp.bind(this),this),window.addEventListener("resize",this.reSize.bind(this))},r.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.element,"wheel",this.mapMouseWheel),sf.base.EventHandler.remove(this.element,"touchmove mousemove",this.mouseMove),sf.base.EventHandler.remove(this.element,"touchend mouseup mouseleave",this.mouseUp),sf.base.EventHandler.remove(this.element,"touchstart mousedown",this.mouseDown),sf.base.EventHandler.remove(this.element,"click pointerdown",this.click),sf.base.EventHandler.remove(this.element,"dblclick",this.doubleClick),sf.base.EventHandler.remove(this.element,"contextmenu",this.rightClick),sf.base.EventHandler.remove(this.element,"keydown",this.keyDown),sf.base.EventHandler.remove(this.element,"keyup",this.keyUp),window.removeEventListener("resize",this.reSize.bind(this))},r.prototype.destroy=function(){this.unwireEvents(),this.dotNetRef=null},r.prototype.keyUp=function(e){var t=e.target.id;if(this.options.enablePanning&&this.isPanning){this.isPanning=!1;var i=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&!sf.base.isNullOrUndefined(this.currentTiles)&&!sf.base.isNullOrUndefined(i)&&this.currentTiles.childElementCount!=i.childElementCount&&this.currentTiles.childElementCount<i.childElementCount)for(var n=i.childElementCount-1;n>=this.currentTiles.childElementCount;n--)i.removeChild(i.children[n]);this.currentTiles=null,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!1)}if("Tab"===e.code&&t.indexOf("_LayerIndex_")>-1){var s=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10);if(t.indexOf("shapeIndex")>-1){this.targetElementPath=e.target;var o=parseInt(t.split("_shapeIndex_")[1].split("_")[0],10);t.indexOf("shapeIndex")>-1&&this.options.layerHighlightSettings[s]&&this.options.layerHighlightSettings[s].Enable&&(this.removeAllHighlight(),this.targetElementPath.classList.contains("mapShapeSelection")||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerShapeHighlight",s,o,t))}}},r.prototype.triggerEnableZoom=function(e,t,i){e>=1&&(this.scaleFactor=e,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerZoom",t,i))},r.prototype.keyDown=function(e){var t=1,i=e.type,n=e.target.id,s=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&!sf.base.isNullOrUndefined(s)&&(this.currentTiles=s.cloneNode(!0)),"+"===e.key||"Equal"===e.code)this.options.enableZoom&&(e.preventDefault(),this.mergeSeparation(),t=0===this.factorCount?this.options.factor+1:this.scaleFactor+1,this.factorCount++,this.triggerEnableZoom(t,"ZoomIn",i));else if("-"===e.key||"Minus"===e.code)this.options.enableZoom&&(e.preventDefault(),this.mergeSeparation(),t=0===this.factorCount?this.options.factor-1:this.scaleFactor-1,this.factorCount++,this.triggerEnableZoom(t,"ZoomOut",i));else if(82===e.keyCode)e.preventDefault(),this.mergeSeparation(),this.zoomClick=!1,this.handleToolbarSelection("_Zooming_ToolBar_Pan_Path","_Zooming_ToolBar_Zoom_Path"),"Reset",this.scaleFactor=this.options.minZoom,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerZoom","Reset",i);else if("ArrowUp"!==e.code&&"ArrowDown"!==e.code||!this.options.enablePanning)if("ArrowLeft"!==e.code&&"ArrowRight"!==e.code||!this.options.enablePanning){if("Enter"===e.code)if(e.preventDefault(),(n.indexOf("_Left_Page_Rect")>-1||n.indexOf("_Right_Page_Rect")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var o=document.getElementById(this.id+"_Paging_Text").textContent,r=(o=o.trim().replace("\n","")).split("/").map(Number);n.indexOf("_Left_Page_Rect")>-1?document.getElementById(n).style.outlineColor=r[0]+1!=r[1]?"":"transparent":document.getElementById(n).style.outlineColor=r[0]!=r[1]+1?"":"transparent",this.dotNetRef.invokeMethodAsync("TriggerLegendPaging",n.indexOf("_Left_Page_Rect")>-1?1:0)}else if(n.indexOf("_LayerIndex_")>-1&&n.indexOf("shapeIndex")>-1){var a=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10);this.shapeSelection(n,a)}}else this.isPanning=!0,e.preventDefault(),this.mergeSeparation(),this.clientY=0,this.moveClientX=this.areaRect.width/7,this.panning("ArrowLeft"===e.code?-this.moveClientX:this.moveClientX,this.clientY,e.layerX,e.layerY,this.scaleFactor,!0),this.clientX=this.moveClientX;else this.isPanning=!0,e.preventDefault(),this.mergeSeparation(),this.moveClientY=this.areaRect.height/7,this.clientX=0,this.panning(this.clientX,"ArrowUp"===e.code?-this.moveClientY:this.moveClientY,e.layerX,e.layerY,this.scaleFactor,!0),this.clientY=this.moveClientY;this.toolbarButtonColor(t,n),this.clientX=this.moveClientX,this.clientY=this.moveClientY},r.prototype.shapeSelection=function(e,t){var i=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10),n=-1!==e.indexOf("_dataIndex_")?parseInt(e.split("_dataIndex_")[1].split("_")[0],10):null;this.options.selectionSettings&&this.options.selectionSettings[t]&&this.options.selectionSettings[t].Enable&&this.removeAllHighlight(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("SelectMap",e,t,i,"Shape",n)},r.prototype.rightClick=function(e){var t=e.target.id,i=this.getMousePosition(e.pageX,e.pageY);sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseClick",i.x,i.y,document.getElementById(t))},r.prototype.reSize=function(){var e,t;if(this.mergeSeparation(),null!==this.element){var i=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(i)){i.style.display="none";var n=this.element.getBoundingClientRect();e=n.width,t=n.height,i.style.removeProperty("display")}}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerResize",e,t))},r.prototype.doubleClick=function(e){if(!sf.base.isNullOrUndefined(this.dotNetRef)){if(2===e.detail&&this.options.enableZoom&&this.options.doubleClickZoom){var t=document.getElementById(this.id).getBoundingClientRect(),i=this.scaleFactor+1;i>=1&&(this.scaleFactor=i,this.removeCluster(),this.dotNetRef.invokeMethodAsync("MouseWheelZoom",e.pageX-t.x,e.pageY-t.y,e.which,"doubleClick"))}var n=e.target.id,s=this.getMousePosition(e.pageX,e.pageY);if("DoubleClick"===this.options.tooltipDisplayMode){var o=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10);if(n.indexOf("shapeIndex")>-1){var r=parseInt(n.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",n,s.x,s.y,o,r,"Shape",0)}else if(n.indexOf("_MarkerIndex_")>-1&&-1===n.indexOf("_cluster_")){var a=parseInt(n.split("_MarkerIndex_")[1].split("_")[0],10),l=parseInt(n.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",n,s.x,s.y,o,l,"Marker",a)}else if(n.indexOf("_BubbleIndex_")>-1){a=parseInt(n.split("_BubbleIndex_")[1].split("_")[0],10),l=parseInt(n.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",n,s.x,s.y,o,l,"Bubble",a)}else-1===n.indexOf("_shapeIndex_")&&-1===n.indexOf("_MarkerIndex_")&&-1===n.indexOf("_BubbleIndex_")&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",s.x,s.y,0,0,"",0)}this.dotNetRef.invokeMethodAsync("TriggerDoubleClick",s.x,s.y,document.getElementById(n))}},r.prototype.mapMouseWheel=function(e){this.mergeSeparation();document.getElementById(this.element.id).getBoundingClientRect();var t=sf.base.isNullOrUndefined(e.wheelDelta)?-e.deltaY:e.wheelDelta,i="ZoomIn"===(t/120>0?"ZoomIn":"ZoomOut")?this.scaleFactor+1:this.scaleFactor-1,n=this.getMousePosition(e.pageX,e.pageY);this.options.enableZoom&&this.options.enableMouseWheelZoom&&i>=1&&(e.preventDefault(),this.scaleFactor=i,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("MouseWheelZoom",n.x,n.y,t,"wheelZoom"))},r.prototype.mouseUp=function(e){var t,i,n=e.target.id,s=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,o=!1;this.lastScale=1,"touchend"===e.type?(this.options.enablePanning&&e.preventDefault(),t=0,i=0,o=!0,this.isTouch=!1,this.touchMoveList=[],this.touchStartList=[]):(this.moveClientX=e.pageX,this.moveClientY=e.pageY,t=e.layerX,i=e.layerY);var r=this.getMousePosition(this.moveClientX,this.moveClientY);this.moveClientX=r.x,this.moveClientY=r.y;n.split("_")[0];if(this.options.doubleClickZoom&&"touchend"===e.type){this.tapCount=this.tapCount>1?0:this.tapCount+1;var a=this;sf.base.isNullOrUndefined(this.tapCountTimer)&&(this.tapCountTimer=setTimeout((function(){window.clearTimeout(a.tapCountTimer),a.tapCountTimer=null,a.tapCount=0}),1e3))}if(!(n.indexOf("_Zooming_")>-1)&&this.options.enableZoom&&!this.isPanning&&"mouseleave"!==e.type&&(this.options.zoomOnClick||this.options.doubleClickZoom&&"touchend"===e.type&&this.tapCount>1)){this.tapCount=0;var l=this.scaleFactor+1;if(l>=1){this.scaleFactor=l,this.removeCluster();var d="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,h="touchend"===e.type?e.changedTouches[0].pageY:e.pageY,c=this.getMousePosition(d,h);sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("MouseWheelZoom",c.x,c.y,"touchend"===e.type?1:e.which,this.options.zoomOnClick?"click":"doubleClick")}}if(this.allowPanning&&this.isPanning&&this.options.enablePanning||this.isPinchZoomed){var p=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&this.isPinchZoomed&&(p.style.removeProperty("transform"),this.scaleFactor=this.tileZoomLevel=Math.round(this.scaleFactor),this.getTileTranslatePosition(this.scaleFactor,this.scaleFactor,this.currentTouchCenter,null),this.translatePoint.x=(this.tileTranslatePoint.x-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.translatePoint.y=(this.tileTranslatePoint.y-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.generateTiles(),this.renderMarkers()),this.isTileMap&&!sf.base.isNullOrUndefined(this.currentTiles)&&!sf.base.isNullOrUndefined(p)&&this.currentTiles.childElementCount!=p.childElementCount&&this.currentTiles.childElementCount<p.childElementCount)for(var u=p.childElementCount-1;u>=this.currentTiles.childElementCount;u--)p.removeChild(p.children[u]);this.currentTiles=null,sf.base.isNullOrUndefined(this.dotNetRef)||this.isPinchZoomed||(this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!1),this.panComplete&&this.dotNetRef.invokeMethodAsync("TriggerPanningComplete",this.previousPoint.x,this.previousPoint.y,s.x,s.y,t,i,this.scaleFactor))}if(this.isPinchZoomed&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!0),this.pinchComplete&&this.dotNetRef.invokeMethodAsync("TriggerOnZoomComplete",s.x,s.y)),this.isPanning=!1,this.allowPanning=!1,this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick){this.svgCreated=!1,this.mouseClick=!1;var f=document.getElementById(this.element.id+"drawRect");if(f){f.remove(),this.mergeSeparation(),this.removeCluster();var m=0;if(this.height>0&&this.width>0){var g=this.element.getBoundingClientRect();this.isTileMap?(m=this.scaleFactor+Math.round(this.scaleFactor+(g.width/this.width+g.height/this.height)/2),m-=2):m=this.scaleFactor+Math.round((g.width/this.width+g.height/this.height)/2),this.scaleFactor=m}m>=1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerZoomSelection",this.position.x,this.position.y,this.height,this.width)}}if(n.indexOf("_LayerIndex_")>-1){var v=void 0,b=void 0,y=void 0,w=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10);if(n.indexOf("shapeIndex")>-1&&this.shapeSelection(n,w),n.indexOf("_BubbleIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(b=parseInt(n.split("_BubbleIndex_")[1].split("_")[0],10),v=-1!==n.indexOf("_dataIndex_")?parseInt(n.split("_dataIndex_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",n,w,v,"Bubble",b)),n.indexOf("_NavigationIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(y=parseInt(n.split("_NavigationIndex_")[1].split("_")[0],10),v=-1!==n.indexOf("_Line_")?parseInt(n.split("_Line_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",n,w,v,"NavigationLine",y)),o&&n.indexOf("MarkerIndex")>-1&&!(n.indexOf("cluster")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var C=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10),S=parseInt(n.split("_MarkerIndex_")[1].split("_")[0],10);v=parseInt(n.split("_dataIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerMouseLeave",C,S,v,r.x,r.y,o)}}var E=document.getElementById(this.element.id+"_AnnotationGroup"),x=!sf.base.isNullOrUndefined(E)&&E.contains(e.target);n.indexOf("_Zooming_")>-1||"mouseleave"===e.type||this.isPinchZoomed||!this.element.contains(e.target)||sf.base.isNullOrUndefined(this.dotNetRef)||x||this.dotNetRef.invokeMethodAsync("TriggerClickEventArgs",!1,t,i,document.getElementById(n),this.isTileMap),this.isPinchZoomed=!1},r.prototype.targetTouches=function(e){for(var t=[],i=0;i<e.length;i++)t.push({pageX:e[i].pageX,pageY:e[i].pageY});return t},r.prototype.mouseMove=function(e){var t,n,s=e.target.id;this.moveClientX=e.pageX,this.moveClientY=e.pageY;var o,r,a=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,l=!1;if("touchmove"===e.type)this.moveClientX=o=e.touches[0].clientX,this.moveClientY=r=e.touches[0].clientY,2===e.touches.length&&(this.touchMoveList=this.targetTouches(e.touches)),this.options.enablePanning&&e.preventDefault(),t=0,n=0,l=!0;else if(this.moveClientX=e.pageX,this.moveClientY=e.pageY,o=e.clientX,r=e.clientY,t=e.layerX,n=e.layerY,s.indexOf("_Zooming")>-1)document.getElementById(this.element.id+"_Zooming_ToolBar").setAttribute("opacity","1");else{var d=document.getElementById(this.element.id+"_Zooming_ToolBar");sf.base.isNullOrUndefined(d)||d.setAttribute("opacity","0.3")}if(s.indexOf("_Zooming_ToolBar_")>-1){for(var h=document.getElementById(this.element.id+"_Zooming_KitCollection"),c=0;c<h.childElementCount;c++)h.children[c].setAttribute("class"," e-maps-toolbar");h&&(!this.options.enableSelectionZooming&&s.indexOf("_Zoom_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Group").setAttribute("class",""),!this.options.enablePanning&&s.indexOf("_Pan_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Group").setAttribute("class",""),1===this.options.factor?(this.isTileMap?(this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,.3,.3),!this.enableSelectionZoom&&this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection)):(this.options.enablePanning&&s.indexOf("_Pan_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Group").setAttribute("class",""),this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,.3,.3,.3,.3)),s.indexOf("_ZoomOut_")>-1?document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Group").setAttribute("class",""):s.indexOf("_Pan_")>-1&&!this.isPan?document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Group").setAttribute("class",""):s.indexOf("_Reset_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Group").setAttribute("class","")):this.options.maxZoom===this.options.factor?(this.removeZoomOpacity(.3,.3,.3,.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity),s.indexOf("_ZoomIn_")>-1?document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Group").setAttribute("class",""):s.indexOf("_Zoom_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Group").setAttribute("class","")):this.options.factor>1&&(this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity),this.enableSelectionZoom&&this.options.enableSelectionZooming&&this.removeZoomColor(this.toolbarSelection),this.options.minZoom===this.options.factor&&this.minZoomSelection(s))),this.previousId=s}(this.previousId.indexOf("_Zooming_ToolBar_")>-1&&-1===s.indexOf("_Zooming_ToolBar_")&&(this.removeZoomOpacity(this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity),this.previousId=""),sf.base.isNullOrUndefined(this.legendSettings)||"Interactive"!==this.legendSettings.mode||!(s.indexOf("_MapAreaBorder")>-1||this.isTileMap&&""===s)||sf.base.isNullOrUndefined(this.dotNetRef))||null!==document.getElementById(this.element.id+"_Interactive_Legend")&&this.dotNetRef.invokeMethodAsync("MapsAreaInteractive");if(!sf.base.isNullOrUndefined(this.legendSettings)&&"Interactive"===this.legendSettings.mode&&s.indexOf("_LayerIndex")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var p=document.getElementById(e.target.id).getAttribute("fill");if(s.indexOf("_shapeIndex")>-1&&"Layers"===this.legendSettings.type)this.dotNetRef.invokeMethodAsync("RenderInteractive",p,0,0,0);else if(s.indexOf("_MarkerIndex_")>-1&&"Markers"===this.legendSettings.type){var u=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),f=parseInt(s.split("_MarkerIndex_")[1].split("_")[0],10),m=-1!==s.indexOf("_dataIndex_")?parseInt(s.split("_dataIndex_")[1].split("_")[0],10):null;this.dotNetRef.invokeMethodAsync("RenderInteractive",p,u,f,m)}else if(s.indexOf("_BubbleIndex_")>-1&&"Bubbles"===this.legendSettings.type){u=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10);var g=parseInt(s.split("_BubbleIndex_")[1].split("_")[0],10);m=-1!==s.indexOf("_dataIndex_")?parseInt(s.split("_dataIndex_")[1].split("_")[0],10):null;this.dotNetRef.invokeMethodAsync("RenderInteractive",p,u,g,m)}}var v=this.getMousePosition(this.moveClientX,this.moveClientY);this.moveClientX=v.x,this.moveClientY=v.y;var b=s.split("_")[0];if(-1==s.indexOf("_MapAreaBorder")?this.highlightMap(e):this.removeAllHighlight(),this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick&&this.options.maxZoom>this.options.factor&&this.enableSelectionZoom){e.preventDefault(),this.svgCreated||(this.startValue=this.svgPoint(this.svg,o,r),this.svgCreated=!0),this.position=this.svgPoint(this.svg,o,r);var y=document.getElementById(this.element.id).getBoundingClientRect();this.width=Math.abs(this.position.x-this.startValue.x),this.height=Math.abs(this.position.y-this.startValue.y),this.position.x>this.startValue.x&&(this.position.x=this.startValue.x),this.position.y>this.startValue.y&&(this.position.y=this.startValue.y),this.position.x=this.position.x-y.x,this.position.y=this.position.y-y.y,i.setAttributeNS(null,"x",this.position.x.toString()),i.setAttributeNS(null,"y",this.position.y.toString()),i.setAttributeNS(null,"id",this.element.id+"drawRect"),i.setAttributeNS(null,"width",this.width.toString()),i.setAttributeNS(null,"height",this.height.toString()),i.setAttributeNS(null,"fill","#d3d3d3"),i.setAttributeNS(null,"stroke-dasharray","3"),i.setAttributeNS(null,"opacity","0.5"),i.setAttributeNS(null,"stroke","#009900"),null!==document.getElementById(this.element.id+"_tile_parent")?document.getElementById(this.element.id+"_LayerCollections").parentNode.appendChild(i):document.getElementById(this.element.id+"_svg").appendChild(i)}if(this.options.enableZoom&&this.options.enablePinchZooming&&this.touchMoveList.length>=2&&this.touchStartList.length>=2&&(this.isPinchZoomed=!0,this.pinchComplete||this.panComplete||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerOnZoom",a.x,a.y),this.pinchZooming(e),this.pinchComplete=!0),this.allowPanning&&this.options.enablePanning&&(this.clientX!==this.moveClientX||this.clientY!==this.moveClientY)&&!this.isPinchZoomed){if(this.isPanning=!0,!this.isTileMap){var w=document.getElementById(this.element.id+"_LayerCollections");for(c=0;c<w.children.length;c++)for(var C=0;C<w.children[c].childElementCount;C++)if(w.children[c].children[C].id.indexOf("Polygon_Group")>-1){this.scaleFactor=w.children[c].children[C].transform.baseVal[0].matrix.a;break}if(this.clientX!==this.moveClientX&&this.clientY!==this.moveClientY){var S=this.clientX-this.moveClientX,E=this.clientY-this.moveClientY,x=a.x-S/this.scaleFactor,O=a.y-E/this.scaleFactor;this.panComplete||this.pinchComplete||sf.base.isNullOrUndefined(this.dotNetRef)||(this.previousPoint=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,this.dotNetRef.invokeMethodAsync("TriggerPanning",a.x,a.y,x,O,t,n,this.scaleFactor)),this.panning(S,E,t,n,this.scaleFactor,!1),this.panComplete=!this.isTouch||2!==this.touchMoveList.length||2!==this.touchStartList.length,this.clientX=this.moveClientX,this.clientY=this.moveClientY}}if(s.indexOf(b)>-1)if(null!==(w=document.getElementById(e.currentTarget.id+"_animated_tiles"))){this.isTileMap=!0,this.scaleFactor=parseInt(w.className,10);S=this.clientX-this.moveClientX,E=this.clientY-this.moveClientY,this.getTileGeoLocation(t,n);this.panComplete||sf.base.isNullOrUndefined(this.dotNetRef)||2===this.touchMoveList.length||2===this.touchStartList.length||(this.previousPoint=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,this.dotNetRef.invokeMethodAsync("TriggerTilePanning",this.previousPoint.x,this.previousPoint.y,a.x,a.y,t,n,this.scaleFactor)),this.panning(S,E,t,n,this.scaleFactor,!1),this.panComplete=!this.isTouch||2!==this.touchMoveList.length||2!==this.touchStartList.length,this.clientX=this.moveClientX,this.clientY=this.moveClientY}}if(!sf.base.isNullOrUndefined(this.dotNetRef)){if(!(this.allowPanning||this.mouseClick&&this.zoomClick)&&s.indexOf("shapeIndex")>-1&&"MouseMove"===this.options.tooltipDisplayMode){u=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10);var T=parseInt(s.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",s,v.x,v.y,u,T,"Shape",0)}if((-1===s.indexOf("_shapeIndex_")&&-1===s.indexOf("_MarkerIndex_")&&-1===s.indexOf("_BubbleIndex_")&&"MouseMove"===this.options.tooltipDisplayMode||this.isToolbarTooltip&&-1===s.indexOf("_Zooming_ToolBar_")&&"MouseMove"!==this.options.tooltipDisplayMode)&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",v.x,v.y,0,0,"",0),this.isToolbarTooltip=!1,s.indexOf("_Zooming_ToolBar_")>-1){this.isToolbarTooltip=!0;var A=s.split("_Zooming_ToolBar_")[1].split("_")[0];this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",s,v.x,v.y,0,0,A,0)}if(s.indexOf("_LayerIndex_")>-1&&s.indexOf("_MarkerIndex_")>-1||l&&s.indexOf("MarkerIndex")>-1&&!(s.indexOf("cluster")>-1)){u=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),f=parseInt(s.split("_MarkerIndex_")[1].split("_")[0],10),m=parseInt(s.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerMouseMove",u,f,m,s,v.x,v.y,s.indexOf("cluster")>-1?"cluster":"marker",l)}if(s.indexOf("_LayerIndex_")>-1&&s.indexOf("_BubbleIndex_")>-1){u=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),f=parseInt(s.split("_BubbleIndex_")[1].split("_")[0],10),m=parseInt(s.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerBubbleMouseMove",u,f,m,s,v.x,v.y)}if(this.previousMarkerId.indexOf("_MarkerIndex_")>-1&&this.previousMarkerId!=s){u=parseInt(this.previousMarkerId.split("_LayerIndex_")[1].split("_")[0],10),f=parseInt(this.previousMarkerId.split("_MarkerIndex_")[1].split("_")[0],10),m=parseInt(this.previousMarkerId.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerMouseLeave",u,f,m,v.x,v.y,l)}}this.previousMarkerId=s.indexOf("MarkerIndex")>-1&&!(s.indexOf("cluster")>-1)?s:""},r.prototype.mouseDown=function(e){var t=e.target.id,i=this.options.factor+(t.indexOf("_ZoomIn_")>1&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect").getAttribute("stroke-opacity")?1:0)+(t.indexOf("_ZoomOut_")>1&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect").getAttribute("stroke-opacity")?-1:0);i=t.indexOf("_Reset_")>1?this.options.minZoom:i,this.isPinchZoomed=!1,this.isTouch=!1,this.panComplete=!1,this.pinchComplete=!1,this.currentTiles=null;var n=document.getElementById(this.element.id+"_animated_tiles");this.isTileMap&&!sf.base.isNullOrUndefined(n)&&(this.currentTiles=n.cloneNode(!0)),"touchstart"===e.type?(this.options.enablePanning&&e.preventDefault(),this.clientX=e.touches[0].clientX,this.clientY=e.touches[0].clientY,2===e.touches.length&&(this.touchStartList=this.targetTouches(e.touches)),this.isTouch=!0):(this.clientX=e.pageX,this.clientY=e.pageY);var s=this.getMousePosition(this.clientX,this.clientY);if(this.clientX=s.x,this.clientY=s.y,this.options.enableZoom&&this.options.enableSelectionZooming&&this.zoomClick&&(this.mouseClick=!0,e.preventDefault()),this.mouseClick||-1!==t.indexOf("ToolBar_Pan")||(t.indexOf("_MapAreaBorder")>-1&&this.options.enablePanning&&(this.allowPanning=!0),!this.enableSelectionZoom&&t.indexOf("")>-1&&!(t.indexOf("Zooming")>-1)&&this.options.enablePanning&&(this.allowPanning=!0)),this.isTouch&&t.indexOf("MarkerIndex")>-1&&!(t.indexOf("cluster")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var o=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),r=parseInt(t.split("_MarkerIndex_")[1].split("_")[0],10),a=parseInt(t.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerMarkerClick",o,r,a,t,s.x,s.y,null,"marker",this.isTouch)}this.toolbarButtonColor(i,t)},r.prototype.toolbarButtonColor=function(e,t){document.getElementById(this.element.id+"_Zooming_KitCollection")&&(1===e?(document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Rect")&&document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Group").setAttribute("class",""),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect")&&document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Group").setAttribute("class",""),this.removePanColor(this.toolbarColor),this.isTileMap&&(!this.enableSelectionZoom||this.previousId.indexOf("_Reset_")>-1)?(document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect").getAttribute("stroke-opacity")&&this.removePanColor(this.toolbarSelection),this.allowPanning?this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity):this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,.3,.3),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&!this.enableSelectionZoom&&this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection)):this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,.3,.3,.3,.3)):(this.options.maxZoom===e||this.options.maxZoom<e)&&!this.allowPanning?(document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect")&&document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Group").setAttribute("class",""),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Group").setAttribute("class",""),""!=this.previousId&&this.removeZoomOpacity(.3,.3,.3,.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity),this.options.maxZoom===e&&this.enableSelectionZoom&&document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",this.toolbarColor),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",this.toolbarColor),this.isPan=!1),this.options.maxZoom>=e&&1!=e&&!this.enableSelectionZoom&&this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection),this.options.minZoom===e&&this.minZoomSelection(t)):e>1&&(this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity),this.options.maxZoom>=e&&1!=e&&(!this.enableSelectionZoom&&this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection),this.enableSelectionZoom&&this.isTileMap&&this.removePanColor(this.toolbarColor)),this.enableSelectionZoom&&this.options.enableSelectionZooming&&this.removeZoomColor(this.toolbarSelection),this.options.minZoom===e&&this.minZoomSelection(t)))},r.prototype.pinchZooming=function(e){this.pinchFactor=this.scaleFactor;var t=this.scaleFactor;if(this.isTileMap){r=this.getTouchCenterPoint();var i=Math.sqrt(Math.pow(this.touchMoveList[0].pageX-this.touchMoveList[1].pageX,2)+Math.pow(this.touchMoveList[0].pageY-this.touchMoveList[1].pageY,2)),n=this.pinchFactor;sf.base.isNullOrUndefined(this.pinchDistance)||(this.pinchDistance>i?n-=1:this.pinchDistance<i&&(n+=1),(n=Math.min(this.options.maxZoom,Math.max(this.options.minZoom,n)))!=this.pinchFactor&&(this.pinchFactor=n,this.tileZoomLevel=this.pinchFactor,this.scaleFactor=this.pinchFactor,this.currentTouchCenter=r,this.getTileTranslatePosition(t,this.pinchFactor,{x:r.x,y:r.y},null),this.translatePoint.x=(this.tileTranslatePoint.x-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.translatePoint.y=(this.tileTranslatePoint.y-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.generateTiles(),this.renderMarkers(),this.clusterMarkerProcess())),this.pinchDistance=i}else{var s=this.areaRect;this.previousScale=this.scaleFactor,this.previousPoint=this.shapeTranslatePoint;this.tileTranslatePoint;var o=this.calculateScale(this.touchStartList,this.touchMoveList),r=this.getTouchCenter(this.touchMoveList),a=o/this.lastScale;this.lastScale=o,this.pinchFactor*=a,this.pinchFactor=Math.min(this.options.maxZoom,Math.max(this.options.minZoom,this.pinchFactor));var l=Math.abs(this.baseMapBounds.minBounds.x-this.baseMapBounds.maxBounds.x),d=Math.abs(this.baseMapBounds.minBounds.y-this.baseMapBounds.maxBounds.y),h=Math.abs(this.baseMapBounds.maxBounds.y-this.baseMapBounds.minBounds.y)*this.pinchFactor,c=this.shapeTranslatePoint.x-(s.width/this.scaleFactor-s.width/this.pinchFactor)/(s.width/r.x),p=this.shapeTranslatePoint.y-(s.height/this.scaleFactor-s.height/this.pinchFactor)/(s.height/r.y);c=h<this.areaRect.height?s.x+(-this.baseMapBounds.minBounds.x+(s.width/2-l/2)):c,p=h<this.areaRect.height?s.y+(-this.baseMapBounds.minBounds.y+(s.height/2-d/2)):p,this.scaleFactor=this.pinchFactor,this.shapeTranslatePoint={x:c,y:p},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)}},r.prototype.minZoomSelection=function(e){this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,.3,.3),e.indexOf("_ZoomOut_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Group").setAttribute("class",""),e.indexOf("_Reset_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Group").setAttribute("class","")},r.prototype.removeZoomOpacity=function(e,t,i,n,s,o,r,a,l,d){document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect").setAttribute("stroke-opacity",t.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("opacity",e.toString())),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect").setAttribute("stroke-opacity",n.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Path").setAttribute("opacity",i.toString())),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect").setAttribute("stroke-opacity",o.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Path").setAttribute("opacity",s.toString())),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect").setAttribute("stroke-opacity",a.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("opacity",r.toString())),document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Rect").setAttribute("stroke-opacity",d.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Path").setAttribute("opacity",l.toString()))},r.prototype.removePanColor=function(e){document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",e),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",e))},r.prototype.removeZoomColor=function(e){document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",e),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",e))},r.prototype.getTileTranslatePosition=function(e,t,i,n){var s=256*Math.pow(2,e),o=256*Math.pow(2,t),r=(i.x-this.tileTranslatePoint.x)/s*100,a=(i.y-this.tileTranslatePoint.y)/s*100,l=this.baseMapBounds.availableSize;this.tileTranslatePoint.x=1===t?l.width/2-256:i.x-r*o/100,this.tileTranslatePoint.y=1===t?l.height/2-256:i.y-a*o/100},r.prototype.calculateScale=function(e,t){var i=this.getDistance(e[0],e[1]);return this.getDistance(t[0],t[1])/i},r.prototype.getDistance=function(e,t){var i=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(i*i+n*n)},r.prototype.sum=function(e,t){return e+t},r.prototype.getTouchCenter=function(e){return{x:e.map((function(e){return e.pageX})).reduce(this.sum)/e.length,y:e.map((function(e){return e.pageY})).reduce(this.sum)/e.length}},r.prototype.getTouchCenterPoint=function(){for(var e=[],t=0;t<this.touchMoveList.length;t++)e.push(this.getMousePosition(this.touchMoveList[t].pageX,this.touchMoveList[t].pageY));return{x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}},r.prototype.highlightMap=function(e){var t=e.target,i=t.id;if(t.classList.contains("highlightLine")||t.classList.contains("highlightShape")||t.classList.contains("highlightMarker")||t.classList.contains("highlightBubble")||t.classList.contains("highlightNavigation")||this.removeAllHighlight(),this.targetElementPath=t,i.indexOf("_LayerIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var n=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),s=i.indexOf("_dataIndex_")>-1?parseInt(i.split("_dataIndex_")[1].split("_")[0],10):0;if(i.indexOf("shapeIndex")>-1&&-1==i.indexOf("LabelIndex_")&&this.options.layerHighlightSettings[n]&&this.options.layerHighlightSettings[n].Enable){if(!t.classList.contains("mapShapeSelection")){var o=parseInt(i.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeHighlight",n,o,i)}}else if(i.indexOf("_BubbleIndex_")>-1){var r=parseInt(i.split("_BubbleIndex_")[1].split("_")[0],10);this.options.bubbleHighlightSettings[n][r]&&this.options.bubbleHighlightSettings[n][r].Enable&&!t.classList.contains("mapBubbleSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Bubble",n,r,s,i)}else if(i.indexOf("_NavigationIndex_")>-1){var a=parseInt(i.split("_NavigationIndex_")[1].split("_")[0],10);this.options.navigationHighlightSettings[n][a]&&this.options.navigationHighlightSettings[n][a].Enable&&!t.classList.contains("mapNavigationSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Navigation",n,a,0,i)}else if(i.indexOf("_MarkerIndex_")>-1&&-1===i.indexOf("_cluster_")&&!(i.indexOf("markerClusterConnectorLine")>-1)){var l=parseInt(i.split("_MarkerIndex_")[1].split("_")[0],10);this.options.markerHighlightSettings[n][l]&&this.options.markerHighlightSettings[n][l].Enable&&!t.classList.contains("mapMarkerSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Marker",n,l,s,i)}}else if(i.indexOf("_Legend_Shape_")>-1){var d=parseInt(i.split("_Index_")[1],10),h=this.legendDetails[d];if("Layers"===this.legendSettings.type){if(!t.classList.contains("mapShapeSelection"))for(var c=0;c<h.length;c++)if(this.options.layerHighlightSettings[h[c].layerIndex]&&!sf.base.isNullOrUndefined(this.options.layerHighlightSettings[h[c].layerIndex])&&this.options.layerHighlightSettings[h[c].layerIndex].Enable){t.classList.add("highlightShape");var p=document.getElementById(this.element.id+"_LayerIndex_"+h[c].layerIndex+"_shapeIndex_"+h[c].settingIndex);this.handleHighlight(p,"Shape",this.options.layerHighlightSettings[h[c].layerIndex])}}else if("Markers"===this.legendSettings.type){if(!t.classList.contains("mapMarkerSelection"))for(c=0;c<h.length;c++)if(this.options.markerHighlightSettings[h[c].layerIndex]&&!sf.base.isNullOrUndefined(this.options.markerHighlightSettings[h[c].layerIndex][h[c].settingIndex])&&this.options.markerHighlightSettings[h[c].layerIndex][h[c].settingIndex].Enable){t.classList.add("highlightMarker");p=document.getElementById(this.element.id+"_LayerIndex_"+h[c].layerIndex+"_MarkerIndex_"+h[c].settingIndex+"_dataIndex_"+h[c].dataIndex);this.handleHighlight(p,"Marker",this.options.markerHighlightSettings[h[c].layerIndex][h[c].settingIndex])}}else if("Bubbles"===this.legendSettings.type&&!t.classList.contains("mapBubbleSelection"))for(c=0;c<h.length;c++)if(this.options.bubbleHighlightSettings[h[c].layerIndex]&&!sf.base.isNullOrUndefined(this.options.bubbleHighlightSettings[h[c].layerIndex][h[c].settingIndex])&&this.options.bubbleHighlightSettings[h[c].layerIndex][h[c].settingIndex].Enable){t.classList.add("highlightBubble");p=document.getElementById(this.element.id+"_LayerIndex_"+h[c].layerIndex+"_BubbleIndex_"+h[c].settingIndex+"_dataIndex_"+h[c].dataIndex);this.handleHighlight(p,"Bubble",this.options.bubbleHighlightSettings[h[c].layerIndex][h[c].settingIndex])}}},r.prototype.removeAllHighlight=function(){this.removeHighlight("Shape"),this.removeHighlight("Line"),this.removeHighlight("Marker"),this.removeHighlight("Bubble"),this.removeHighlight("Navigation")},r.prototype.handleHighlight=function(e,t,i){if(("Marker"===t||"Bubble"===t||"Shape"===t)&&!sf.base.isNullOrUndefined(this.legendDetails)&&0!==this.legendDetails.length)for(var n=0;n<this.legendDetails.length;n++)for(var s=0;s<this.legendDetails[n].length;s++)if("Marker"===t&&e.id===this.element.id+"_LayerIndex_"+this.legendDetails[n][s].layerIndex+"_MarkerIndex_"+this.legendDetails[n][s].settingIndex+"_dataIndex_"+this.legendDetails[n][s].dataIndex||"Bubble"===t&&e.id===this.element.id+"_LayerIndex_"+this.legendDetails[n][s].layerIndex+"_BubbleIndex_"+this.legendDetails[n][s].settingIndex+"_dataIndex_"+this.legendDetails[n][s].dataIndex||"Shape"===t&&e.id===this.element.id+"_LayerIndex_"+this.legendDetails[n][s].layerIndex+"_shapeIndex_"+this.legendDetails[n][s].settingIndex){document.getElementById(this.element.id+"_Legend_Shape_Index_"+n).classList.add("highlight"+t);break}if("Arrow"!==t){var o=!sf.base.isNullOrUndefined(e.getAttribute("data-geometry"))&&e.getAttribute("data-geometry").indexOf("LineString")>-1?"Line":t;e.classList.add("highlight"+o),null!==document.querySelector("#highlight"+o+"Style")&&0!==document.querySelector("#highlight"+o+"Style").length?this.customizeStyle("highlight"+o+"Style","highlight"+o,i,e.id):this.createStyle("highlight"+o+"Style","highlight"+o,i,e.id)}else e.setAttribute("fill",i.Fill),e.setAttribute("fill-opacity",i.opacity),e.setAttribute("stroke-opacity",i.BorderOpacity)},r.prototype.removeHighlight=function(e){var t=document.querySelectorAll(".highlight"+e);if(t&&t.length>0)for(var i=0;i<t.length;i++)if(t[i].classList.remove("highlight"+e),"Navigation"===e&&""!==t[i].id&&(""!==t[i].getAttribute("marker-start")||""!==t[i].getAttribute("marker-end"))){var n=document.getElementById(t[i].id+"_triangle"),s=parseInt(t[i].id.split("_LayerIndex_")[1].split("_")[0],10),o=parseInt(t[i].id.split("_NavigationIndex_")[1].split("_")[0],10);sf.base.isNullOrUndefined(n)||(n.setAttribute("fill",this.navigation[s][o].ArrowColor),n.setAttribute("opacity","1"))}},r.prototype.createStyle=function(e,t,i,n){var s=document.createElement("style");s.id=e,this.highlightStyle(s,t,i,n),document.body.appendChild(s)},r.prototype.highlightStyle=function(e,t,i,n){if(n.indexOf("NavigationIndex")>-1){var s=sf.base.isNullOrUndefined(i.Fill)?sf.base.isNullOrUndefined(i.BorderColor)?"transparent":i.BorderColor:i.Fill,o=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10),r=parseInt(n.split("_NavigationIndex_")[1].split("_")[0],10);this.navigation[o][r].Angle,e.innerHTML="."+t+" {fill: none;fill-opacity:"+i.Opacity+";stroke:"+s+";stroke-width:"+i.BorderWidth+";stroke-opacity:"+i.BorderOpacity}else t.indexOf("Line")>-1?e.innerHTML="."+t+" {fill: transparent;fill-opacity:"+i.Opacity+";stroke:"+i.Fill+";stroke-width:"+(this.isTileMap?i.BorderWidth/Math.pow(2,this.options.factor-1):i.BorderWidth/this.options.factor)+";stroke-opacity:"+i.BorderOpacity:e.innerHTML="."+t+" {fill:"+i.Fill+";fill-opacity:"+i.Opacity+";stroke:"+i.BorderColor+";stroke-width:"+(this.isTileMap?i.BorderWidth/Math.pow(2,this.options.factor-1):i.BorderWidth/this.options.factor)+";stroke-opacity:"+i.BorderOpacity},r.prototype.customizeStyle=function(e,t,i,n){var s=document.getElementById(e);this.highlightStyle(s,t,i,n)},r.prototype.renderMarkers=function(){for(var e=document.getElementById(this.element.id+"_LayerCollections"),t=0;t<this.layerCount;t++){var i=document.getElementById(this.element.id+"_LayerIndex_"+t+"_Markers_Template_Group");this.markerTemplateTranslate(i,0,this.translatePoint.x,this.translatePoint.y,this.scaleFactor);var n=document.getElementById(this.element.id+"_LayerIndex_"+t+"_DataLabel_Group");this.labelTemplateTranslate(n,this.translatePoint.x,this.translatePoint.y,this.scaleFactor)}for(var s=0;s<e.childElementCount;s++){var o=e.children[s];if("g"===o.tagName){o.id.indexOf("_LayerIndex_")>-1&&parseFloat(o.id.split("_LayerIndex_")[1].split("_")[0]);for(var r=0;r<o.children.length;r++){var a=o.children[r];if(a.COMMENT_NODE!==a.nodeType)if(a.id.indexOf("Polygon")>-1)a.setAttribute("transform","scale("+Math.pow(2,this.scaleFactor-1)+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(a.id.indexOf("_MarkerGroup")>-1)for(t=0;t<a.childElementCount;t++)this.markerTranslate(a.children[t],0,this.translatePoint.x,this.translatePoint.y,this.scaleFactor,!1);else if(a.id.indexOf("_line_Group")>-1)if(this.isTileMap)for(var l=0;l<a.childElementCount;l++){var d=document.getElementById(a.children[l].id);for(t=0;t<d.childElementCount;t++)if(""!==d.children[t].id){var h=parseInt(d.children[t].id.split("_LayerIndex_")[1].split("_")[0],10),c=parseInt(d.children[t].id.split("_NavigationIndex_")[1].split("_")[0],10);this.navigationTranslate(d.children[t],0,h,c)}}else a.setAttribute("transform","scale("+this.scaleFactor+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(a.id.indexOf("_dataLableIndex_Group")>-1){var p=Math.pow(2,this.scaleFactor-1);for(t=0;t<a.children.length;t++)this.dataLabelTranslate(a.children[t],0,this.translatePoint.x,this.translatePoint.y,p,"DataLabel")}}}}},r.prototype.setMarkerTranslate=function(e,t,i,n,s){"Balloon"!==this.dataSource[t][i][n][this.markerSettings[t][i].ShapeValuePath]&&"Balloon"!=this.markerSettings[t][i].Type||e.id.indexOf("cluster")>-1?"Rectangle"!==this.dataSource[t][i][n][this.markerSettings[t][i].ShapeValuePath]&&"Rectangle"!=this.markerSettings[t][i].Type||e.id.indexOf("cluster")>-1?this.isTileMap&&e.classList.contains("e-maps-cluster")?e.setAttribute("transform","translate( "+(s.x-this.areaRect.x)+" "+(s.y-this.areaRect.y)+" )"):e.setAttribute("transform","translate( "+s.x+" "+s.y+" )"):e.setAttribute("transform","translate( "+(s.x-this.markerSettings[t][i].Width/2)+" "+(s.y-this.markerSettings[t][i].Height/2)+" )"):e.setAttribute("transform","translate( "+(s.x-this.markerSettings[t][i].Width/2)+" "+(s.y-this.markerSettings[t][i].Height)+" )scale("+this.markerSettings[t][i].Width/30+" "+this.markerSettings[t][i].Height/30+" )")},r.prototype.markerTranslate=function(e,t,i,n,s,o){if(e.COMMENT_NODE!==e.nodeType&&e.TEXT_NODE!==e.nodeType){var r=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),a=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10),l=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),d=sf.base.isNullOrUndefined(this.markerSettings[r][a].LatitudeValuePath)||""===this.markerSettings[r][a].LatitudeValuePath?"Latitude":this.markerSettings[r][a].LatitudeValuePath,h=sf.base.isNullOrUndefined(this.markerSettings[r][a].LongitudeValuePath)||""===this.markerSettings[r][a].LongitudeValuePath?"Longitude":this.markerSettings[r][a].LongitudeValuePath,c=0!==this.dataSource[r].length&&0!==this.dataSource[r][a].length?this.dataSource[r][a][l][h]:null,p=0!==this.dataSource[r].length&&0!==this.dataSource[r][a].length?this.dataSource[r][a][l][d]:null;if(p&&c)if(this.isTileMap){var u=this.convertTileLatLongToPoint({x:c,y:p},this.tileZoomLevel,this.tileTranslatePoint,!0);u.x=u.x+this.markerSettings[r][a].X,u.y=u.y+this.markerSettings[r][a].Y,o?(e.style.left=u.x-this.areaRect.x+"px",e.style.top=u.y-this.areaRect.y+"px"):this.setMarkerTranslate(e,r,a,l,u)}else{var f=this.convertGeoToPoint(p,c,t);f.x=(f.x+i)*s+this.markerSettings[r][a].X,f.y=(f.y+n)*s+this.markerSettings[r][a].Y,o?(e.style.left=f.x-this.areaRect.x+"px",e.style.top=f.y-this.areaRect.y+"px"):this.setMarkerTranslate(e,r,a,l,f)}}},r.prototype.navigationTranslate=function(e,t,i,n){if(!sf.base.isNullOrUndefined(this.navigation[i])){var s=this.navigation[i][n].Angle,o=void 0,r=void 0,a=[];if(this.navigation[i][n].Latitude.length===this.navigation[i][n].Longitude.length)for(var l=0;l<this.navigation[i][n].Latitude.length;l++){var d=this.isTileMap?this.convertTileLatLongToPoint({x:this.navigation[i][n].Longitude[l],y:this.navigation[i][n].Latitude[l]},this.tileZoomLevel,this.tileTranslatePoint,!0):this.convertGeoToPoint(this.navigation[i][n].Latitude[l],this.navigation[i][n].Longitude[l],t);a.push(d)}for(var h=0;h<a.length-1;h++){s=1<(s=-1>s?-1:s)?1:s;var c=this.convertRadius(a[h],a[h+1]);s<=1&&s>0&&(o=0,a[h].x>a[h+1].x&&(o=1)),s>=-1&&s<0&&(o=1,a[h].x>a[h+1].x&&(o=0)),r=0===(s=Math.abs(s))?"M "+a[h].x+","+a[h].y+"L "+a[h+1].x+","+a[h+1].y+" ":"M "+a[h].x+","+a[h].y+" A "+(c/2+(1-s)*c/(10*s))+" "+(c/2+(1-s)*c/(10*s))+" 0,0,"+o+" , "+a[h+1].x+","+a[h+1].y+" ",document.getElementById(this.id+"_LayerIndex_"+i+"_NavigationIndex_"+n+"_Line_"+h).setAttribute("d",r)}}},r.prototype.dataLabelTranslate=function(e,t,i,n,s,o){if(e.COMMENT_NODE!==e.nodeType&&e.TEXT_NODE!==e.nodeType){var r,a,l=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),d=parseFloat(e.id.split("_shapeIndex_")[1].split("_")[0]);if("Template"!==o){r=(h=this.labelCollection[l][d]).LocationX,a=h.LocationY;r=(r+i)*s-h.BorderSize.Height/4+h.OffsetX,a=(a+n)*s+h.BorderSize.Height/4+h.OffsetY,e.id.indexOf("_RectIndex_")>-1?(e.setAttribute("x",(r-parseInt(e.getAttribute("width"))/2).toString()),e.setAttribute("y",(a-(5+parseInt(e.getAttribute("height"))/2)).toString())):e.setAttribute("transform","translate( "+r+" "+a+" )")}else{var h;r=((h=this.dataLabelTemplateCollection[l][d]).LocationX+i)*s+h.OffsetX,a=(h.LocationY+n)*s+h.OffsetY,e.style.left=r+"px",e.style.top=a+"px"}}},r.prototype.convertTileLatLongToPoint=function(e,t,i,n){var s=256*Math.pow(2,t),o=(e.x+180)/360,r=Math.sin(e.y*Math.PI/180),a=.5-Math.log((1+r)/(1-r))/(4*Math.PI),l=e.x,d=e.y;return n&&(l=o*s+.5+i.x,d=a*s+.5+i.y),{x:l,y:d}},r.prototype.panning=function(e,t,i,n,s,o){if(this.mergeSeparation(),this.isTileMap){r=this.tileTranslatePoint.x-e,a=this.tileTranslatePoint.y-t;this.tileTranslatePoint.x=r,this.tileTranslatePoint.y=a,(this.tileTranslatePoint.y>-10&&t<0||this.tileTranslatePoint.y<-256*(Math.pow(2,s)-2)&&t>0)&&(this.tileTranslatePoint.x=r+e,this.tileTranslatePoint.y=a+t),o&&(e=0,t=0),this.translatePoint.x=(this.tileTranslatePoint.x-e)/Math.pow(2,s-1),this.translatePoint.y=(this.tileTranslatePoint.y-t)/Math.pow(2,s-1),this.generateTiles(),this.renderMarkers()}else{this.shapeTranslatePoint;var r=this.shapeTranslatePoint.x-e/s,a=this.shapeTranslatePoint.y-t/s,l=document.getElementById(this.element.id+"_LayerCollections").getBoundingClientRect(),d=document.getElementById(this.element.id+"_svg").getBoundingClientRect(),h=document.getElementById(this.element.id+"_Legend_Group"),c=sf.base.isNullOrUndefined(h)?0:h.getClientRects()[0].height,p=e<0?l.left<=d.left+this.areaRect.x:l.left+l.width>=d.left+d.width+this.areaRect.x+this.marginLeft,u=t<0?l.top<=d.top+this.areaRect.y:l.top+l.height+c+this.marginTop>=d.top+d.height;p&&u?(this.shapeTranslatePoint={x:r,y:a},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)):p?(this.shapeTranslatePoint={x:r,y:this.shapeTranslatePoint.y},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)):u&&(this.shapeTranslatePoint={x:this.shapeTranslatePoint.x,y:a},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint))}},r.prototype.applyTransform=function(e,t){for(var i=this.isTileMap?this.translatePoint.x:t.x,n=this.isTileMap?this.translatePoint.y:t.y,s=document.getElementById(this.element.id+"_LayerCollections"),o=this.calculateFactor(),r=0;r<s.children.length;r++){var a=s.children[r];if(a.COMMENT_NODE!==a.nodeType&&"g"===a.tagName){a.id.indexOf("_LayerIndex_")>-1&&parseFloat(a.id.split("_LayerIndex_")[1].split("_")[0]);for(var l=0;l<a.children.length;l++){var d=a.children[l];if(d.COMMENT_NODE!==d.nodeType&&!sf.base.isNullOrUndefined(d.id))if(d.id.indexOf("Polygon")>-1||d.id.indexOf("_line_Group")>-1)d.setAttribute("transform","scale("+e+") translate( "+i+" "+n+" )");else if(d.id.indexOf("_MarkerGroup")>-1)for(var h=0;h<d.children.length;h++)sf.base.isNullOrUndefined(d.children[h].id)||this.markerTranslate(d.children[h],o,i,n,e,!1);else if(d.id.indexOf("_bubble_Group_")>-1)for(h=0;h<d.children.length;h++){var c=d.children[h];if(!sf.base.isNullOrUndefined(c.id)){var p=parseFloat(c.id.split("_LayerIndex_")[1].split("_")[0]),u=parseFloat(c.id.split("_BubbleIndex_")[1].split("_")[0]),f=parseFloat(c.id.split("_BubbleIndex_")[1].split("_")[2]);if(this.bubbleCollection[p]&&this.bubbleCollection[p][u]){var m=this.bubbleCollection[p][u][f],g=(m.ZoomTranslatePoint.X+i)*e,v=(m.ZoomTranslatePoint.Y+n)*e;1==m.Type&&(g-=m.Radius,v-=m.Radius),c.setAttribute("transform","translate( "+g+" "+v+" )")}}}else if(d.id.indexOf("_dataLableIndex_Group")>-1)for(h=0;h<d.children.length;h++)this.dataLabelTranslate(d.children[h],o,i,n,e,"DataLabel")}}}for(var b=0;b<this.layerCount;b++){var y=document.getElementById(this.element.id+"_LayerIndex_"+b+"_Markers_Template_Group");this.markerTemplateTranslate(y,o,i,n,e);var w=document.getElementById(this.element.id+"_LayerIndex_"+b+"_DataLabel_Group");this.labelTemplateTranslate(w,i,n,e)}},r.prototype.markerTemplateTranslate=function(e,t,i,n,s){if(e)for(var o=0;o<e.childElementCount;o++)this.markerTranslate(e.children[o],t,i,n,s,!0)},r.prototype.labelTemplateTranslate=function(e,t,i,n){if(e)for(var s=this.isTileMap?Math.pow(2,n-1):n,o=0;o<e.childElementCount;o++)this.dataLabelTranslate(e.children[o],0,t,i,s,"Template")},r.prototype.calculateFactor=function(){var e,t,i,n=1,s=this.baseMapBounds,o=this.areaRect.width,r=this.areaRect.height;if(s){var a=this.convertGeoToPoint(s.latitudeMin,s.longitudeMin,null),l=this.convertGeoToPoint(s.latitudeMax,s.longitudeMax,null);t=l.y-a.y,i=l.x-a.x}else t=i=500;return e=t<r?parseFloat(Math.abs(100*Number(r/Number(t.toString()+"e+1"))).toString().split(".")[0])/10:r/t,n=i<o?parseFloat(Math.abs(100*Number(o/Number(i.toString()+"e+1"))).toString().split(".")[0])/10:o/i,Math.min(n,e)},r.prototype.convertRadius=function(e,t){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))},r.prototype.convertGeoToPoint=function(e,t,i){var n,s,o,r,a={width:this.areaRect.width,height:this.areaRect.height},l=this.degreesToRadians(e),d=this.degreesToRadians(t),h=null==i?Math.min(a.width,a.height):Math.min(a.width,a.height)*i;switch(this.projectionType){case"Mercator":var c={x:h/2,y:h/2};n=c.x+t*(h/360);var p=this.calculateBound(Math.sin(this.degreesToRadians(e)),-.9999,.9999);s=c.y+.5*Math.log((1+p)/(1-p))*(-h/(2*Math.PI));break;case"Winkel3":((o=this.aitoff(d,l)).x+d/(Math.PI/2))/2,(o.y+l)/2;break;case"Miller":d,1.25*Math.log(Math.tan(Math.PI/4+.4*l));break;case"Eckert3":2/(r=Math.sqrt(Math.PI*(4+Math.PI)))*d*(1+Math.sqrt(1-4*l*l/(Math.PI*Math.PI))),4/r*l;break;case"AitOff":(o=this.aitoff(d,l)).x,o.y;break;case"Eckert5":d*(1+Math.cos(l))/Math.sqrt(2+Math.PI),2*l/Math.sqrt(2+Math.PI);break;case"Equirectangular":d,l;break;case"Eckert6":r=(1+Math.PI/2)*Math.sin(l);for(var u=1/0,f=0;f<10&&Math.abs(u)>1e-6;f++)l-=u=(l+Math.sin(l)-r)/(1+Math.cos(l));r=Math.sqrt(2+Math.PI),d*(1+Math.cos(l))/r,2*l/r}return{x:n,y:s}},r.prototype.aitoff=function(e,t){var i=Math.cos(t),n=Math.sin(Math.cos(i*Math.cos(e/=2)));return{x:2*i*Math.sin(e)*n,y:Math.sin(t)*n}},r.prototype.degreesToRadians=function(e){return e*(Math.PI/180)},r.prototype.calculateBound=function(e,t,i){return sf.base.isNullOrUndefined(t)||(e=Math.max(e,t)),sf.base.isNullOrUndefined(i)||(e=Math.min(e,i)),e},r.prototype.getTileGeoLocation=function(e,t){var i=this.getBound(this.element.id),n=this.getBound(this.element.id+"_tile_parent");return this.pointToLatLong(e+this.areaRect.x-(n.x-i.x),t+this.areaRect.y-(n.y-i.y))},r.prototype.pointToLatLong=function(e,t){var i=256*Math.pow(2,this.scaleFactor),n=this.clip(e-this.translatePoint.x*this.scaleFactor,0,i-1)/i-.5,s=.5-this.clip(t-this.translatePoint.y*this.scaleFactor,0,i-1)/i;return{latitude:90-360*Math.atan(Math.exp(2*-s*Math.PI))/Math.PI,longitude:360*n}},r.prototype.generateTiles=function(){var e,t=this.baseMapBounds.availableSize.width,i=this.baseMapBounds.availableSize.height,n=0,s=0,o=0;n=e=Math.pow(2,this.tileZoomLevel);var r=[];this.tileTranslatePoint.x+256*n<t&&(s=this.tileTranslatePoint.x>0?Math.ceil(this.tileTranslatePoint.x/256):0,o=this.tileTranslatePoint.x+256*n<t?Math.ceil((t-(this.tileTranslatePoint.x+256*n))/256):0),n+=s+o,n=this.horizontalPanXCount>=n?this.horizontalPanXCount:n,this.horizontalPan=!1;for(var a=Math.min(e,(-this.tileTranslatePoint.y+i)/256+1),l=Math.min(n,(-this.tileTranslatePoint.x+t+256*o)/256+1),d=-(this.tileTranslatePoint.x+256*s+256)/256,h=-(this.tileTranslatePoint.y+256)/256,c=Math.round(d);c<Math.round(l);c++)for(var p=Math.round(h);p<Math.round(a);p++){var u=256*c+this.tileTranslatePoint.x,f=256*p+this.tileTranslatePoint.y;if(u>-256&&u<=t&&f>-256&&f<i&&p>=0){var m=c;c<0&&(m=m%e+e);var g={x:m%e,y:p,left:u,top:f,height:256,width:256,src:null};-1===this.urlTemplate.indexOf("virtualearth")?g.src=this.urlTemplate.replace("level",this.scaleFactor.toString()).replace("tileX",g.x.toString()).replace("tileY",g.y.toString()):g.src=this.getBingMap(g,this.urlTemplate),r.push(g)}}var v=document.getElementById(this.element.id+"_animated_tiles"),b=[];for(p=0;p<r.length;p++){var y=document.getElementById(this.element.id+"tile"+p),w=null,C=!1;b.push(p),y?(y.style.removeProperty("display"),w=y.children[0]):((y=document.createElement("div")).id=this.element.id+"tile"+p,y.style.userSelect="none",w=document.createElement("img"),C=!0),w.src!==r[p].src&&w.setAttribute("src",r[p].src),y.style.position="absolute",y.style.left=r[p].left+"px",y.style.top=r[p].top+"px",y.style.height=r[p].height+"px",y.style.width=r[p].width+"px",C&&(y.appendChild(w),v.appendChild(y))}for(var S=r.length;S<v.childElementCount;S++){for(var E=!1,x=0;x<this.currentTiles.childElementCount;x++)E||this.currentTiles.children[x].id!==v.children[S].id||(E=!0);E?v.children[S].style.display="none":v.removeChild(v.children[S])}},r.prototype.getBingMap=function(e,t){for(var i="",n=["t0","t1","t2","t3"],s=Math.min(this.tileZoomLevel,this.options.maxZoom);s>0;s--){var o=0,r=1<<s-1;0!=(e.x&r)&&o++,0!=(e.y&r)&&(o+=2),i=i+""+o}var a=n[Math.min(parseInt(i.substr(i.length-1,1),10),n.length)];return(t=t.replace("{quadkey}",i).replace("{subdomain}",a))+"&mkt=en-US&ur=IN&Key="+this.key},r.prototype.clip=function(e,t,i){return Math.min(Math.max(e,t),i)},r.prototype.svgPoint=function(e,t,i){var n=this.svg.createSVGPoint();return n.x=t-(this.isTileMap?this.areaRect.x:0),n.y=i-(this.isTileMap?this.areaRect.y:0),n.matrixTransform(e.getScreenCTM().inverse())},r.prototype.clusterExpand=function(e,t){var i,n=JSON.parse(t.dataSource),s=parseInt(e[0].split("_LayerIndex_")[1].split("_")[0],10),o=this.markerClusterCollection[s],r=e[0].split("_LayerIndex_"),a=parseInt(r[1].split("_")[0],10),l=[],d=[];if(e[0].indexOf("_MarkerIndex_")>-1){var h=parseInt(r[1].split("_MarkerIndex_")[1].split("_")[0],10),c=parseInt(r[1].split("_dataIndex_")[1].split("_")[0],10);if(!isNaN(h)){i=n[c];var p=[];if(e[0].indexOf("_cluster_")>-1&&o.AllowClustering)for(var u=0;u<n.length;u++)n[u].Latitude===i.Latitude&&n[u].Longitude===i.Longitude&&p.push({data:i,index:a});if(e[0].indexOf("_cluster_")>-1){var f=document.getElementById(e[0].indexOf("_datalabel_")>-1?e[0].split("_datalabel_")[0]:e[0]),m=void 0;"Balloon"===this.markerClusterCollection[s].Shape||sf.base.isNullOrUndefined(f)?sf.base.isNullOrUndefined(f.firstElementChild)||(m=f.firstElementChild.innerHTML.split(",").map(Number)):m=f.innerHTML.split(",").map(Number),p=[];for(var g=0,v=m;g<v.length;g++){u=v[g];p.push({data:n[u],index:u}),n[u].text="",l.push(n[u])}!1,d.push({data:p,layerIndex:a,markerIndex:h,dataIndex:c,targetClusterIndex:+(e[0].split("_cluster_")[1].indexOf("_datalabel_")>-1?e[0].split("_cluster_")[1].split("_datalabel_")[0]:e[0].split("_cluster_")[1]),isClusterSame:!1})}}}if(d.length>0){this.sameMarkerData=d;var b=document.getElementById(r[0]+"_LayerIndex_"+s+"_MarkerGroup");this.markerClusterExpandCheck?(this.mergeSeparateCluster(this.sameMarkerData,r[0]),this.markerClusterExpandCheck=!1):(this.clusterSeparate(this.sameMarkerData,b,!0,r[0],o),this.markerClusterExpandCheck=!0)}},r.prototype.mergeSeparateCluster=function(e,t){var i,n=e[0].layerIndex,s=e[0].targetClusterIndex,o=e[0].markerIndex,r=t+"_LayerIndex_"+n+"_MarkerIndex_"+o,a=r+"_dataIndex_"+e[0].dataIndex+"_cluster_"+s,l=this.getElementId(a),d=this.getElementId(a+"_datalabel_"+s);sf.base.isNullOrUndefined(l)||(l.style.visibility="visible"),sf.base.isNullOrUndefined(d)||(d.style.visibility="visible");var h=e[0].data.length;if(0!=this.clusterLocation.length)for(var c=0;c<h;c++)if(i=this.getElementId(r+"_dataIndex_"+e[0].data[c].index),!sf.base.isNullOrUndefined(i)){if(-1===i.parentElement.id.indexOf("Template")){var p=this.markerSettings[n][o];"Balloon"===p.Type?i.setAttribute("transform","translate( "+this.clusterLocation[c].x+" "+this.clusterLocation[c].y+")scale( "+p.Width/30+" "+p.Height/30+" ) "):i.setAttribute("transform","translate( "+this.clusterLocation[c].x+" "+this.clusterLocation[c].y+")")}else i.style.left=this.clusterLocation[c].x+"px",i.style.top=this.clusterLocation[c].y+"px";i.style.visibility="hidden",i.style.content="marker",i.classList.add("e-maps-marker-hidden")}this.clusterLocation=[],this.removeElement(t+"_LayerIndex_"+n+"_MarkerIndex_"+o+"_markerClusterConnectorLine")},r.prototype.removeElement=function(e){var t=document.getElementById(e);sf.base.isNullOrUndefined(t)||t.remove()},r.prototype.drawPath=function(e){var t=document.getElementById(e.id);return sf.base.isNullOrUndefined(t)&&(t=document.createElementNS("http://www.w3.org/2000/svg","path")),t.setAttribute("id",e.id),t.setAttribute("d",e.d),t.setAttribute("opacity",e.opacity.toString()),t.setAttribute("stroke",e.stroke),t.setAttribute("stroke-width",e.strokeWidth.toString()),t},r.prototype.clusterSeparate=function(e,t,i,n,o){var r=e[0].layerIndex,a=e[0].markerIndex,l=e[0].targetClusterIndex,d=e[0].dataIndex,h=(document.getElementById(n).getBoundingClientRect(),i?this.getElementId:t.querySelector.bind(t)),c=i?"":"#",p=n+"_LayerIndex_"+r+"_MarkerIndex_"+a,u=p+"_dataIndex_"+d+"_cluster_"+l,f=h(c+""+u),m=h(c+""+u+"_datalabel_"+l);f.style.visibility="hidden",m.style.visibility="hidden";var g=h(c+""+p+"_dataIndex_"+d),v=+f.getAttribute("transform").split("translate(")[1].trim().split(" ")[0],b=+f.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim(),y=30,w=6.28*y,C=0,S=Math.round(w/25);C+=S;for(var E=e[0].data.length,x=Math.round(25/w*100),O=(x=E<S?100/E:x)/100*360,T=E<S?45:0,A=1,N="M "+v+" "+b+" ",k="",I=0;I<E;I++){if(C===I||Math.round(T)>=360){for(T=0,w=6.28*(y=30*++A),S=Math.round(w/25),x=Math.round(25/w*100);x*S<100;)S++;O=x/100*360,C+=S}var M=v+y*Math.sin(2*Math.PI*T/360),L=b+y*Math.cos(2*Math.PI*T/360);if(k+=N+"L "+M+" "+L+" ",g=h(c+""+p+"_dataIndex_"+e[0].data[I].index),!sf.base.isNullOrUndefined(g.getAttribute("transform"))){var B=parseFloat(g.getAttribute("transform").split("translate(")[1].trim().split(" ")[0]),D=parseFloat(g.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim());this.clusterLocation.push({x:B,y:D})}var P=this.markerSettings[r][a];-1===g.parentElement.id.indexOf("Template")?"Balloon"===P.Type?g.setAttribute("transform","translate( "+(M-P.Width/2)+" "+(L-P.Height)+"  ) scale( "+P.Width/30+" "+P.Height/30+" ) "):g.setAttribute("transform","translate( "+M+" "+L+")"):(g.style.left=M+"px",g.style.top=L+"px"),g.style.visibility="visible",m.style.visibility="hidden",T+=O}var R={d:k,id:n+"_LayerIndex_"+r+"_MarkerIndex_"+a+"_dataIndex_"+d+"_markerClusterConnectorLine",stroke:sf.base.isNullOrUndefined(o.LineColor)?"#000000":o.LineColor,opacity:o.LineOpacity,strokeWidth:o.LineWidth};t=i?h(n+"_LayerIndex_"+r+"_MarkerGroup"):t;var H=s(n+"_LayerIndex_"+r+"_MarkerIndex_"+a+"_markerClusterConnectorLine");H.appendChild(this.drawPath(R)),t.insertBefore(H,t.querySelector("#"+p+"_dataIndex_0"))},r.prototype.getElementId=function(e){return document.getElementById(e)},r.prototype.shapeHighlightHandle=function(e,t,i){var n=this.options.layerHighlightSettings[i];this.handleHighlight(this.targetElementPath,"Shape",{BorderColor:n.BorderColor,BorderWidth:n.BorderWidth/this.scaleFactor,BorderOpacity:n.BorderOpacity,Enable:n.Enable,EnableMultiSelect:n.EnableMultiSelect,Fill:e,Opacity:t})},r.prototype.itemHighlightHandle=function(e,t,i,n,s){if("Bubble"===s){var o=this.options.bubbleHighlightSettings[i][n];this.handleHighlight(this.targetElementPath,"Bubble",{BorderColor:o.BorderColor,BorderWidth:o.BorderWidth,BorderOpacity:o.BorderOpacity,Enable:o.Enable,EnableMultiSelect:o.EnableMultiSelect,Fill:e,Opacity:t})}if("Marker"===s){var r=this.options.markerHighlightSettings[i][n];this.handleHighlight(this.targetElementPath,"Marker",{BorderColor:r.BorderColor,BorderWidth:r.BorderWidth,BorderOpacity:r.BorderOpacity,Enable:r.Enable,EnableMultiSelect:r.EnableMultiSelect,Fill:e,Opacity:t})}if("Navigation"===s){var a=this.options.navigationHighlightSettings[i][n];if(this.handleHighlight(this.targetElementPath,"Navigation",{BorderColor:a.BorderColor,BorderWidth:a.BorderWidth,BorderOpacity:a.BorderOpacity,Enable:a.Enable,EnableMultiSelect:a.EnableMultiSelect,Fill:e,Opacity:t}),""!==this.targetElementPath.getAttribute("marker-start")||""!==this.targetElementPath.getAttribute("marker-end")){var l=document.getElementById(this.targetElementPath.id+"_triangle");this.handleHighlight(l,"Arrow",{BorderColor:l.BorderColor,BorderWidth:l.BorderWidth,BorderOpacity:l.BorderOpacity,Enable:l.Enable,EnableMultiSelect:l.EnableMultiSelect,Fill:e,Opacity:t})}}},r.prototype.elementAnimate=function(e,t,i,n,s,o,r,a,l,d,h){var c=this;sf.base.isNullOrUndefined(r)&&(r=0);var p=n,u=s,f=0;new sf.base.Animation({}).animate(e,{duration:i,delay:t,progress:function(t){t.timeStamp>t.delay&&(f=(t.timeStamp-t.delay)/t.duration,e.style.visibility="visible",e.setAttribute("transform","translate( "+(p-r*f)+" "+(u-r*f)+" ) scale("+f+")"))},end:function(t){e.style.visibility="visible",e.setAttribute("transform",""),"Balloon"===a||"Balloon"===l?e.setAttribute("transform","translate( "+n+" "+s+"  ) scale( "+d/30+" "+h/30+" ) "):e.setAttribute("transform","translate( "+n+" "+s+"  )"),sf.base.isNullOrUndefined(c.dotNetRef)||c.dotNetRef.invokeMethodAsync("TriggerAnimation",e)}})},r.prototype.markerAnimation=function(e,t){for(var i=JSON.parse(t.markerData),n=0;n<i.length;n++)for(var s=0;s<i[n].MarkerAnimation.length;s++)if(i[n].MarkerAnimation[s].IsMarkerShape)for(var o=0;o<i[n].MarkerAnimation[s].DataSourceLength;o++){var r=document.getElementById(e+"_LayerIndex_"+n+"_MarkerIndex_"+s+"_dataIndex_"+o),a=sf.base.isNullOrUndefined(this.dataSource[i[n].MarkerAnimation[s].Layer][s][o][i[n].MarkerAnimation[s].ShapeValuePath])?" ":this.dataSource[i[n].MarkerAnimation[s].Layer][s][o][i[n].MarkerAnimation[s].ShapeValuePath];this.elementAnimate(r,i[n].MarkerAnimation[s].AnimationDelay,i[n].MarkerAnimation[s].AnimationDuration,r.transform.baseVal[0].matrix.e,r.transform.baseVal[0].matrix.f,null,0,i[n].MarkerAnimation[s].MarkerType,a,i[n].MarkerAnimation[s].Width,i[n].MarkerAnimation[s].Height)}},r.prototype.bubbleAnimation=function(e,t){for(var i=JSON.parse(t.bubbleData),n=0;n<i.length;n++)for(var s=0;s<i[n].MarkerAnimation.length;s++)for(var o=0;o<i[n].MarkerAnimation[s].DataSourceLength;o++){var r=document.getElementById(e+"_LayerIndex_"+n+"_BubbleIndex_"+s+"_dataIndex_"+o);sf.base.isNullOrUndefined(r)||this.elementAnimate(r,i[n].MarkerAnimation[s].AnimationDelay,i[n].MarkerAnimation[s].AnimationDuration,r.transform.baseVal[0].matrix.e,r.transform.baseVal[0].matrix.f,null,0," "," ",0,0)}},r.prototype.toolbarOpacity=function(e,t){this.removeZoomOpacity(t,e,t,e,t,e,t,e,t,e)},r.prototype.clusterMarkerProcess=function(){for(var e=!1,t=0;t<this.layerCount;t++)e||(this.mergeSeparation(),this.removeCluster(),e=!0),this.clusterMarkers(t)},r.prototype.clusterMarkers=function(e){var t=this.markerClusterCollection[e];if(t.AllowClustering){var i=void 0,n=void 0,r=this.id,a=[],l=[],d=0,h=0,c=s(r+"_LayerIndex_"+e+"_cluster"),p=3.75,u=0,f=void 0,m=void 0,g=void 0,v=[],b=void 0,y=document.getElementById(r),w=document.getElementById(r+"_LayerIndex_"+e+"_MarkerGroup");if(!sf.base.isNullOrUndefined(w)&&w.childElementCount<=0&&w.childElementCount<=0&&(w=document.getElementById(r+"_LayerIndex_"+e+"_Markers_Template_Group"),b=!0),w=sf.base.isNullOrUndefined(w)?document.getElementById(r+"_LayerIndex_"+e+"_Markers_Template_Group"):w)for(var C=0;C<w.childElementCount;C++)if(!(w.children[C].id.indexOf("markerClusterConnectorLine")>-1)){a=[];var S=parseInt(w.children[C].id.split("_MarkerIndex_")[1].split("_")[0],10),E=("Balloon"===this.markerSettings[e][S].Type||"Image"===this.markerSettings[e][S].Type)&&sf.base.isNullOrUndefined(this.markerSettings[e][S].ShapeValuePath);if("hidden"!==w.children[C].style.visibility&&0===S){var x=(m=w.children[C]).getBoundingClientRect();if(a.push(C),null!==x){for(var O=C+1;O<w.childElementCount;O++){var T=parseInt(w.children[O].id.split("_MarkerIndex_")[1].split("_")[0],10);if("hidden"!==w.children[O].style.visibility&&0===T){var A=(m=w.children[O]).getBoundingClientRect();null!==A&&(x.left>A.right||x.right<A.left||x.top>A.bottom||x.bottom<A.top||(l.push(A),w.children[O].style.visibility="hidden",w.children[O].style.content="marker",w.children[O].classList.add("e-maps-marker-hidden"),a.push(O)))}}if(d=x.left+x.width/2,h=x.top+(E?x.height:x.height/2),l.length>0){var N=y.getBoundingClientRect();d=this.isTileMap?d-N.left-this.areaRect.x:d-N.left,h=this.isTileMap?h-N.top-this.areaRect.y:h-N.top;var k=parseInt(w.children[C].id.split("_dataIndex_")[1].split("_")[0],10),I=parseInt(w.children[C].id.split("_LayerIndex_")[1].split("_")[0],10);w.children[C].getAttribute("transform")?(d+=this.isTileMap?0:b?this.areaRect.x:0,h+=this.isTileMap?0:b?this.areaRect.y:0):(d=parseFloat(w.children[C].style.left.replace("px",""))+(this.isTileMap?0:b?this.areaRect.x:0),h=parseFloat(w.children[C].style.top.replace("px",""))+(this.isTileMap?0:b?this.areaRect.y:0));var M=r+"_LayerIndex_"+I+"_MarkerIndex_"+S+"_dataIndex_"+k+"_cluster_"+u,L=r+"_LayerIndex_"+I+"_MarkerIndex_"+S+"_dataIndex_"+k+"_cluster_"+u+"_datalabel_"+u;u++;var B=void 0;switch(t.Shape){case"Circle":(B=this.createClusterShape("circle",M,t.Fill,t.Opacity,"translate( "+d+" "+h+" )",!0,a,t)).setAttribute("r",(t.Height+t.Width)/4);break;case"Rectangle":(B=this.createClusterShape("rect",M,t.Fill,t.Opacity,"translate( "+d+" "+h+" )",!0,a,t)).setAttribute("x",-t.Width/2),B.setAttribute("y",-t.Height/2),B.setAttribute("height",t.Height),B.setAttribute("width",t.Width);break;case"Balloon":g=s(M);(B=this.createClusterShape("path",M,t.Fill,t.Opacity,"translate( "+-t.Width/2+", "+-t.Height+" ) scale( "+t.Width/30+", "+t.Height/30+" )",!0,a,t)).classList.remove("clusterGroup"),B.setAttribute("d","M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z"),g.appendChild(B),g.style.visibility="visible",g.style.cursor="pointer",g.setAttribute("class","clusterGroup"),b&&g.classList.add("e-maps-cluster"),g.setAttribute("transform","translate( "+d+" "+h+" )");break;case"Image":var D=-(0+t.Width/2),P=-(0+t.Height/2);(B=this.createClusterShape("image",M,null,null,"translate( "+d+" "+h+" )",!0,a,t)).setAttributeNS(null,"height",t.Height),B.setAttributeNS(null,"width",t.Width),B.setAttributeNS("http://www.w3.org/1999/xlink","href",t.ImageUrl),B.setAttributeNS(null,"x",D),B.setAttributeNS(null,"y",P);break;case"Cross":case"Diamond":case"Star":case"Triangle":case"HorizontalLine":case"VerticalLine":case"InvertedTriangle":case"Pentagon":var R;R=o(t.Shape,{height:t.Height,width:t.Width},{x:0,y:0}),(B=this.createClusterShape("path",M,t.Fill,t.Opacity,"translate( "+d+" "+h+" )",!1,a,t)).setAttribute("d",R),"Cross"!==t.Shape&&"HorizontalLine"!==t.Shape&&"VerticalLine"!==t.Shape||(B.setAttribute("stroke",t.Fill),B.setAttribute("stroke-width",((t.Width+t.Height)/4).toString()))}"Balloon"!==t.Shape&&(b&&this.isTileMap||B.setAttribute("class","clusterGroup")),b&&"Balloon"!==t.Shape&&B.classList.add("e-maps-cluster");var H=document.createElementNS("http://www.w3.org/2000/svg","text");H.setAttribute("id",L),H.setAttribute("x","0"),H.setAttribute("y",p.toString()),H.setAttribute("fill",t.LabelColor),H.setAttribute("font-size",t.LabelSize),H.setAttribute("font-style",t.LabelFontStyle),H.setAttribute("font-family",t.LabelFontFamily),H.setAttribute("font-weight",t.LabelFontWeight),H.setAttribute("text-anchor","middle"),H.setAttribute("transform","translate( "+d+" "+h+" )"),H.setAttribute("opacity",t.LabelOpacity),H.style.visibility="visible",H.style.cursor="pointer",H.setAttribute("class","clusterGroup"),H.innerHTML=(l.length+1).toString(),b&&H.classList.add("e-maps-cluster"),c.appendChild(H),c.setAttribute("class","clusterGroup"),"Balloon"!==t.Shape?c.appendChild(B):c.appendChild(g),w.children[C].style.visibility="hidden",w.children[C].style.content="marker",w.children[C].classList.add("e-maps-marker-hidden")}l=[]}}}if(c.childElementCount>0){var z=document.getElementById(r+"_LayerIndex_"+e);z.appendChild(c),f=document.getElementById(r+"_LayerIndex_"+e+"_MarkerGroup");for(C=0;C<c.childElementCount;C++)if("hidden"!==c.children[C].style.visibility&&null!==(i=(m=c.children[C]).getBoundingClientRect())&&!(m.id.indexOf("_datalabel_")>-1)){for(O=C+1;O<c.childElementCount;O++)if("hidden"!==c.children[O].style.visibility){var U=c.children[O];null===(n=U.getBoundingClientRect())||U.id.indexOf("_datalabel_")>-1||i.left>n.right||i.right<n.left||i.top>n.bottom||i.bottom<n.top||(v.push(U),v.push(c.children[O-1]),c.children[O].style.visibility="hidden",c.children[O-1].style.visibility="hidden",a.push(O))}if(v.length>0){m=c.children[C];for(var q=0;q<v.length;q++)"g"===m.tagName?m.children[0].textContent=m.children[0].textContent+","+v[q].textContent:m.textContent=m.textContent+","+v[q].textContent,c.children[C-1].textContent=(+c.children[C-1].textContent+ +v[q+1].textContent).toString(),q++}v=[]}for(;0<c.children.length;)f.insertBefore(c.children[0],f.firstChild);(z=document.getElementById(r+"_LayerIndex_"+e)).appendChild(f),z.removeChild(c)}}},r.prototype.createClusterShape=function(e,t,i,n,s,o,r,a){var l=document.createElementNS("http://www.w3.org/2000/svg",e);return l.setAttribute("id",t),l.setAttribute("fill",i),l.setAttribute("stroke",a.BorderColor),l.setAttribute("stroke-width",a.BorderWidth),l.setAttribute("stroke-dasharray",a.DashArray),l.setAttribute("fill-opacity",n),l.setAttribute("stroke-opacity",a.BorderOpacity),l.setAttribute("transform",s),l.setAttribute("style","visibility:visible"),l.setAttribute("style","cursor: pointer"),o?l.setAttribute("class","clusterGroup"):l.setAttribute(null,"class","clusterGroup"),l.innerHTML=r.toString(),l},r.prototype.mergeSeparation=function(){this.markerClusterExpandCheck&&this.sameMarkerData&&(this.mergeSeparateCluster(this.sameMarkerData,this.id),this.markerClusterExpandCheck=!1)},r.prototype.click=function(e){if("pointerdown"!==e.type||"mouse"!==e.pointerType){var t=e.target.id,i=this.getMousePosition(e.pageX,e.pageY);t.split("_")[0];if((t.indexOf("_Left_Page_Rect")>-1||t.indexOf("_Right_Page_Rect")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerLegendPaging",t.indexOf("_Left_Page_Rect")>-1?1:0),t.indexOf("_Zooming_")>-1&&this.options.enableZoom){var n="pointerdown"===e.type?"click":e.type,s=1;if(this.mergeSeparation(),t.indexOf("_ZoomIn_")>-1&&(s=0===this.factorCount?this.options.factor+1:this.scaleFactor+1,this.factorCount++,this.triggerEnableZoom(s,t.split("_Zooming_ToolBar_")[1].split("_")[0],n)),t.indexOf("_ZoomOut_")>-1&&(s=0===this.factorCount?this.options.factor-1:this.scaleFactor-1,this.factorCount++,this.triggerEnableZoom(s,t.split("_Zooming_ToolBar_")[1].split("_")[0],n)),t.indexOf("_Reset_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){this.zoomClick=!1,this.handleToolbarSelection("_Zooming_ToolBar_Pan_Path","_Zooming_ToolBar_Zoom_Path");var o=t.split("_Zooming_ToolBar_")[1].split("_")[0];this.removeCluster(),this.dotNetRef.invokeMethodAsync("TriggerZoom",o,n)}t.indexOf("_Zoom_")>-1&&"0.3"!==document.getElementById(this.id+"_Zooming_ToolBar_Zoom_Rect").getAttribute("stroke-opacity")&&(this.zoomClick=!0,this.handleToolbarSelection("_Zooming_ToolBar_Zoom_Path","_Zooming_ToolBar_Pan_Path"),this.allowPanning=!1,this.enableSelectionZoom=!0),t.indexOf("_Pan_")>-1&&"0.3"!==document.getElementById(this.id+"_Zooming_ToolBar_Pan_Rect").getAttribute("stroke-opacity")&&(this.zoomClick=!1,this.handleToolbarSelection("_Zooming_ToolBar_Pan_Path","_Zooming_ToolBar_Zoom_Path"),this.allowPanning=!1,this.enableSelectionZoom=!1,this.isPan=!0)}if((t.indexOf("MapAreaBorder")>-1||t.indexOf("shapeIndex")>-1||t.indexOf("_Legend_")>-1||t.indexOf("BubbleIndex")>-1||t.indexOf("Zooming")>-1||t.indexOf("MapMargin")>-1||""===t)&&this.mergeSeparation(),""===t){var r=e.target.offsetParent.id;t=r.indexOf("_MarkerIndex_")>-1?r:t}if(t.indexOf("_LayerIndex_")>-1&&t.indexOf("_MarkerIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var a=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),l=parseInt(t.split("_MarkerIndex_")[1].split("_")[0],10),d=parseInt(t.split("_dataIndex_")[1].split("_")[0],10),h=document.getElementById(t),c=void 0;(t.indexOf("cluster")>-1||t.indexOf("Cluster")>-1)&&(this.mergeSeparation(),"Balloon"===this.markerClusterCollection[a].Shape?!sf.base.isNullOrUndefined(h.firstElementChild)&&h.firstElementChild.innerHTML.length>0&&(c=h.firstElementChild.innerHTML.split(",")):!sf.base.isNullOrUndefined(h)&&h.innerHTML.length>0&&(c=h.innerHTML.split(","))),this.removeAllHighlight(),t.indexOf("markerClusterConnectorLine")>-1||this.dotNetRef.invokeMethodAsync("TriggerMarkerClick",a,l,d,t,i.x,i.y,c,t.indexOf("cluster")>-1?"cluster":"marker",this.isTouch)}if(t.indexOf("shapeIndex")>-1&&"Click"===this.options.tooltipDisplayMode&&!sf.base.isNullOrUndefined(this.dotNetRef)){a=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10);var p=parseInt(t.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",t,i.x,i.y,a,p,"Shape",0)}if(t.indexOf("_LayerIndex_")>-1&&t.indexOf("BubbleIndex")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){a=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),l=parseInt(t.split("_BubbleIndex_")[1].split("_")[0],10),d=parseInt(t.split("_dataIndex_")[1].split("_")[0],10),h=document.getElementById(t);this.dotNetRef.invokeMethodAsync("TriggerBubbleClick",a,l,d,t,i.x,i.y)}t.indexOf("_Legend_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("TriggerLegendClick",parseInt(t.split("_Index_")[1].split("_")[0],10))),-1!==t.indexOf("_shapeIndex_")||-1!==t.indexOf("_MarkerIndex_")||-1!==t.indexOf("_BubbleIndex_")||"Click"!==this.options.tooltipDisplayMode||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",i.x,i.y,0,0,"",0)}},r.prototype.handleToolbarSelection=function(e,t){var i=document.getElementById(this.element.id+e);i&&(i.setAttribute("stroke",this.toolbarSelection),i.setAttribute("fill",this.toolbarSelection));var n=document.getElementById(this.element.id+t);n&&(n.setAttribute("stroke",this.toolbarColor),n.setAttribute("fill",this.toolbarColor))},r.prototype.removeCluster=function(){var e=document.querySelectorAll('[class="clusterGroup"]');if(e.length>0)for(var t=0;t<e.length;t++)document.getElementById(e[t].id).remove();else if((e=document.querySelectorAll('[class="clusterGroup e-maps-cluster"]')).length>0)for(var i=0;i<e.length;i++)document.getElementById(e[i].id).remove();for(var n=document.querySelectorAll('[class="e-maps-marker-hidden"]'),s=0;s<n.length;s++){var o=document.getElementById(n[s].id);o.style.visibility="visible",o.classList.remove("e-maps-marker-hidden")}},r.prototype.createImageUrl=function(e,t){var i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+e.outerHTML+"</svg>";return window.URL.createObjectURL(new Blob("SVG"===t?[i]:[(new XMLSerializer).serializeToString(e)],{type:"image/svg+xml"}))},r.prototype.imageExport=function(i,n,s){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){return e=this,[2,new Promise((function(t,o){var r=document.createElement("canvas"),a=e.element.getBoundingClientRect();r.width=a.width,r.height=a.height;var l=document.getElementById(e.element.id+"_svg"),d=e.createImageUrl(l,i),h=document.getElementById(e.element.id+"_animated_tiles").children.length,c=r.getContext("2d"),p=document.getElementById(e.element.id+"_Map_title"),u=document.getElementById(e.element.id+"_MapBorder");sf.base.isNullOrUndefined(u)||(c.fillStyle=document.getElementById(e.element.id+"_MapBorder").getAttribute("fill"),c.fillStyle="transparent"===c.fillStyle?"#ffffff":c.fillStyle,c.fillStyle=e.options.background?e.options.background:"#ffffff"),sf.base.isNullOrUndefined(p)||(c.font=p.getAttribute("font-size")+" Arial",c.fillStyle=p.getAttribute("fill"),c.fillText(p.textContent,parseFloat(p.getAttribute("x")),parseFloat(p.getAttribute("y")))),c.save();var f=document.getElementById(e.element.id+"_Tile_SVG_Parent");c.rect(parseFloat(f.style.left),parseFloat(f.style.top),parseFloat(f.style.width),parseFloat(f.style.height)),c.clip(),c.fillRect(0,0,a.width,a.height),e.exportedCount=0;for(var m=[],g=0;g<h;g++){var v=document.getElementById(e.element.id+"tile"+g),b=new Image;b.crossOrigin="Anonymous",m.push(e.renderImages(r,v,c,b,h,i,n,d,e,s)),b.src=v.children[0].getAttribute("src")}Promise.all(m).then((function(e){for(var i=0;i<e.length;i++)if(null!=e[i]){t(e[i]);break}}))}))]}))}))},r.prototype.renderImages=function(e,t,i,n,s,o,r,a,l,d){return new Promise((function(h,c){n.onload=function(){l.exportedCount++,i.setTransform(1,0,0,1,parseFloat(t.style.left)+10,parseFloat(t.style.top)+parseFloat(document.getElementById(l.element.id+"_tile_parent").style.top));if(i.drawImage(n,0,0,257,257),l.exportedCount===s){var c=document.getElementById(l.element.id+"_Tile_SVG_Parent");a=l.createImageUrl(c.children[0],o);var p=new Image;p.onload=function(){if(i.setTransform(1,0,0,1,parseFloat(c.style.left),parseFloat(c.style.top)),i.drawImage(p,0,0),d)l.triggerDownload(o,r,e.toDataURL("image/png").replace("image/png","image/octet-stream")),h(null);else{var t="JPEG"===o?e.toDataURL("image/jpeg"):"PNG"===o?e.toDataURL("image/png"):"";h(t)}},p.src=a}else h(null)}}))},r.prototype.triggerDownload=function(e,t,i){var n=document.createElement("a");n.download=t+"."+e.toLocaleLowerCase(),n.href=i,n.click()},r.prototype.getMousePosition=function(e,t){var i=this.element.getBoundingClientRect(),s=this.element.ownerDocument.defaultView.pageXOffset,o=this.element.ownerDocument.defaultView.pageYOffset,r=this.element.ownerDocument.documentElement.clientTop,a=this.element.ownerDocument.documentElement.clientLeft,l=i.left+s-a,d=i.top+o-r;return new n(e-l,t-d)},r.prototype.getBound=function(e){var t=document.getElementById(e);return{x:t.offsetLeft,y:t.offsetTop}},r.prototype.createToolbarStyle=function(e,t){var i=document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path");sf.base.isNullOrUndefined(i)||i.setAttribute("stroke",this.toolbarColor),this.enableSelectionZoom||(this.zoomClick=!1);var n=document.getElementById(this.element+"_zoomToolbar_style");n&&n.parentNode.removeChild(n);var s=".e-maps-toolbar:hover { opacity:1; } .e-maps-toolbar:hover > circle { stroke:"+e+"; } .e-maps-toolbar:hover > path { fill: "+e+" ;  stroke: "+e+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }",o=document.createElement("style");o.id=this.element+"_zoomToolbar_style",o.appendChild(document.createTextNode(s)),t.appendChild(o)},r.prototype.render=function(){this.wireEvents()},r}();return{getMarker:function(e,t,i){var n=window.sfBlazor.getCompInstance(i);n&&n.element&&n.clusterExpand(e,t)},markerCluster:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.clusterMarkerProcess()},clusterSeperation:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.mergeSeparation()},itemHighlight:function(e,t,i,n,s,o){var r=window.sfBlazor.getCompInstance(o);r&&r.element&&r.itemHighlightHandle(e,t,i,n,s)},shapeHighlight:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(n);s&&s.element&&s.shapeHighlightHandle(e,t,i)},panDirection:function(e,t,i,n,s,o){var r=window.sfBlazor.getCompInstance(o);if(r&&r.element){var a=document.getElementById(r.element.id+"_animated_tiles");r.isTileMap&&!sf.base.isNullOrUndefined(a)&&(r.currentTiles=a.cloneNode(!0)),r.panning(e,t,i,n,s,!1),sf.base.isNullOrUndefined(r.dotNetRef)||r.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",r.isTileMap?r.translatePoint:r.shapeTranslatePoint,r.tileTranslatePoint,r.scaleFactor,!1)}},initialize:function(e,t,i){return new r(e.id,e,t,i).render(),this.getElementSize(e.id)},updateInstance:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.dataSource=t.dataSource?JSON.parse(t.dataSource):null,i.options.layerHighlightSettings=JSON.parse(t.layerHighlightSettings),i.options.markerHighlightSettings=JSON.parse(t.markerHighlightSettings),i.options.bubbleHighlightSettings=JSON.parse(t.bubbleHighlightSettings),i.options.navigationHighlightSettings=JSON.parse(t.navigationHighlightSettings),i.options.selectionSettings=JSON.parse(t.selectionSettings))},getElementSize:function(e){var t,i,n,s,o=document.getElementById(e);if(null!==o){var r=o.getBoundingClientRect();t=r.width,i=r.height,n=r.x,s=r.y}return{width:t,height:i,isIE:sf.base.Browser.isIE,x:n,y:s}},getElementBounds:function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return{width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}return null},getBound:function(e){var t=document.getElementById(e);return{x:t.offsetLeft,y:t.offsetTop}},getBoundData:function(e){var t=document.getElementById(e);return{x:t.getBoundingClientRect().x,y:t.getBoundingClientRect().y}},getTileZoom:function(i,n,s,o,r,a,l){return e(this,void 0,void 0,(function(){var e,d,h,c,p,u,f,m,g,v,b;return t(this,(function(t){switch(t.label){case 0:e=document.getElementById(i+"_animated_tiles"),d=parseInt(e.className,10),e.children[l].setAttribute("style","top:"+s+"; height:"+r+";width:"+a+"; left:"+n+"; position:absolute;"),e.children[l].innerHTML="",(h=document.createElement("img")).src=o,e.children[l].appendChild(h),c=document.getElementById(i+"_LayerCollections"),p=0,t.label=1;case 1:if(!(p<c.children.length))return[3,8];u=0,t.label=2;case 2:if(!(u<c.children[p].childElementCount))return[3,7];if(!(c.children[p].children[u].id.indexOf("MarkerGroup")>-1))return[3,6];f=0,t.label=3;case 3:return f<c.children[p].children[u].childElementCount?(m=parseInt(c.children[p].children[u].children[f].id.split("_LayerIndex_")[1].split("_")[0],10),g=parseInt(c.children[p].children[u].children[f].id.split("_MarkerIndex_")[1].split("_")[0],10),v=parseInt(c.children[p].children[u].children[f].id.split("_dataIndex_")[1].split("_")[0],10),[4,this.dotNetRef.invokeMethodAsync("ZoomMarker",m,g,v,0,0,d)]):[3,6];case 4:b=t.sent(),c.children[p].children[u].children[f].setAttribute("transform","translate("+b[0]+","+b[1]+")"),t.label=5;case 5:return f++,[3,3];case 6:return u++,[3,2];case 7:return p++,[3,1];case 8:return[2,l]}}))}))},getLayer:function(e){var t=document.getElementById(e+"_LayerCollections").getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},getElement:function(e){var t=document.getElementById(e).getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},getSvg:function(e){var t=document.getElementById(e+"_svg").getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},updateTileTranslatePoint:function(e,t,i,n,s,o,r,a,l,d){var h=window.sfBlazor.getCompInstance(d);h&&h.element&&(h.tileTranslatePoint={x:e.x,y:e.y},h.translatePoint={x:t.x,y:t.y},h.areaRect={x:i,y:n,width:s,height:o},h.marginLeft=r,h.marginTop=a,h.tileZoomLevel=h.options.factor=h.scaleFactor=l,(l===h.options.maxZoom||l>1||1===l)&&""===h.previousId&&(h.toolbarOpacity(h.toolbarButtonOpacity,h.toolbarShapeOpacity),l===h.options.maxZoom&&document.getElementById(h.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(h.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",h.toolbarColor),document.getElementById(h.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",h.toolbarColor),h.isPan=!1)),h.isTileMap&&h.previousId.indexOf("_Reset_")>-1&&(h.options.enablePanning||document.getElementById(h.id+"_Zooming_ToolBar_Pan_Rect")&&(document.getElementById(h.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",h.toolbarColor),document.getElementById(h.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",h.toolbarColor)),h.enableSelectionZoom=!h.enableSelectionZoom&&h.enableSelectionZoom),h.isPan=!!(h.previousId.indexOf("_Reset_")>-1&&h.options.enablePanning)||h.isPan)},updateTranslatePoint:function(e,t,i,n,s,o,r,a,l){var d=window.sfBlazor.getCompInstance(l);d&&d.element&&(d.shapeTranslatePoint=e,d.areaRect={x:t,y:i,width:n,height:s},d.marginLeft=o,d.marginTop=r,d.options.factor=d.scaleFactor=a,d.previousId.indexOf("_Reset_")>-1&&document.getElementById(d.id+"_Zooming_ToolBar_Pan_Rect")&&(1===d.options.minZoom&&(document.getElementById(d.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",d.toolbarColor),document.getElementById(d.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",d.toolbarColor)),d.enableSelectionZoom=!1,d.isPan=!0),a===d.options.maxZoom&&d.enableSelectionZoom&&(d.isPan=!1),(a===d.options.maxZoom||a>1||1===a)&&""===d.previousId&&(d.toolbarOpacity(d.toolbarButtonOpacity,d.toolbarShapeOpacity),a===d.options.maxZoom&&document.getElementById(d.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(d.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",d.toolbarColor),document.getElementById(d.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",d.toolbarColor))))},updateZoomSettings:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enableZoom=t.enable,i.options.zoomOnClick=t.zoomOnClick,i.options.doubleClickZoom=t.doubleClickZoom,i.options.enablePanning=t.enablePanning,i.options.enablePinchZooming=t.pinchZooming,i.options.enableSelectionZooming=t.enableSelectionZooming,i.options.enableMouseWheelZoom=t.mouseWheelZoom)},updateCollection:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.bubbleCollection=JSON.parse(t.bubble),i.labelCollection=JSON.parse(t.dataLabel),i.dataLabelTemplateCollection=JSON.parse(t.dataLabelTemplate),i.markerSettings=JSON.parse(t.markerSettings),i.navigation=JSON.parse(t.navigationLine),i.markerClusterCollection=JSON.parse(t.markerCluster),i.baseMapBounds={latitudeMax:t.latitudeMax,latitudeMin:t.latitudeMin,longitudeMax:t.longitudeMax,longitudeMin:t.longitudeMin,minBounds:t.minBounds,maxBounds:t.maxBounds,availableSize:t.availableSize},i.isTileMap=t.isTileMap,i.legendSettings=JSON.parse(t.legendSettings),i.legendDetails=null!=t.legendDetails?JSON.parse(t.legendDetails):null,i.urlTemplate=t.urlTemplate,i.key=t.key,i.dataSource=JSON.parse(t.markerDataSource),i.toolbarSelection=t.toolbarSelection,i.toolbarColor=t.toolbarColor,i.mapsBorderWidth=t.mapsBorder,i.toolbarButtonOpacity=t.toolbarButtonOpacity,i.toolbarShapeOpacity=t.toolbarShapeOpacity,i.removeAllHighlight())},updateLayerHighlight:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(n);s&&s.element&&(i?(s.options.layerHighlightSettings[e].BorderColor=t.borderColor,s.options.layerHighlightSettings[e].BorderWidth=t.borderWidth,s.options.layerHighlightSettings[e].BorderOpacity=t.borderOpacity):(s.options.layerHighlightSettings[e].Fill=t.fill,s.options.layerHighlightSettings[e].Opacity=t.opacity,s.options.layerHighlightSettings[e].Enable=t.enable))},updateMarkerHighlight:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(s);o&&o.element&&(n?(o.options.markerHighlightSettings[e][t].BorderColor=i.borderColor,o.options.markerHighlightSettings[e][t].BorderWidth=i.borderWidth,o.options.markerHighlightSettings[e][t].BorderOpacity=i.borderOpacity):(o.options.markerHighlightSettings[e][t].Fill=i.fill,o.options.markerHighlightSettings[e][t].Opacity=i.opacity,o.options.markerHighlightSettings[e][t].Enable=i.enable))},updateBubbleHighlight:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(s);o&&o.element&&(n?(o.options.bubbleHighlightSettings[e][t].BorderColor=i.borderColor,o.options.bubbleHighlightSettings[e][t].BorderWidth=i.borderWidth,o.options.bubbleHighlightSettings[e][t].BorderOpacity=i.borderOpacity):(o.options.bubbleHighlightSettings[e][t].Fill=i.fill,o.options.bubbleHighlightSettings[e][t].Opacity=i.opacity,o.options.bubbleHighlightSettings[e][t].Enable=i.enable))},updateTooltipDisplayMode:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.tooltipDisplayMode=t)},updateNavigationHighlight:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(s);o&&o.element&&(n?(o.options.navigationHighlightSettings[e][t].BorderColor=i.borderColor,o.options.navigationHighlightSettings[e][t].BorderWidth=i.borderWidth,o.options.navigationHighlightSettings[e][t].BorderOpacity=i.borderOpacity):(o.options.navigationHighlightSettings[e][t].Fill=i.fill,o.options.navigationHighlightSettings[e][t].Opacity=i.opacity,o.options.navigationHighlightSettings[e][t].Enable=i.enable))},exportToImage:function(i,n,s,o){return e(this,void 0,void 0,(function(){var r,a,l=this;return t(this,(function(d){switch(d.label){case 0:return(a=window.sfBlazor.getCompInstance(o))&&a.element?[4,a.imageExport(i,n,s)]:[3,2];case 1:r=d.sent(),d.label=2;case 2:return r instanceof Promise?[4,r.then((function(i){return e(l,void 0,void 0,(function(){return t(this,(function(e){return[2,i]}))}))}))]:[3,4];case 3:return d.sent(),[3,5];case 4:return[2,r];case 5:return[2]}}))}))},getLegendRect:function(e,t){var i=document.getElementById(e).getBoundingClientRect(),n=e.split("_Legend_")[0],s=document.getElementById(n).getBoundingClientRect();return{x:i.left-s.left,y:i.top-s.top,width:i.width,height:i.height}},markerAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.markerAnimation(e,t)},layerAnimation:function(e,t,i,n,s,o){var r=window.sfBlazor.getCompInstance(e);if(r&&r.element)for(var a=document.getElementById(e+"_LayerIndex_0"),l=0;l<a.children.length;l++)null!==a.children[l].getAttribute("transform")&&this.zoomAnimation(a.children[l],0,o,n,s,t,i,r)},slope:function(e,t){return e.x===t.x?null:(t.y-e.y)/(t.x-e.x)},interception:function(e,t){return null===t?e.x:e.y-t*e.x},zoomAnimation:function(e,t,i,n,s,o,r,a){var l=0,d={x:n.x,y:n.y},h=s-r,c={x:0,y:0},p=1;if(s!==r){var u=this.slope(o,d),f=this.interception(o,u),m=d.x-o.x,g=d.y-o.y;e.style.removeProperty("visibility"),this.animate(e,i,(function(e){e.timeStamp>e.delay&&(l=(e.timeStamp-e.delay)/e.duration,p=r+l*h,c.x=o.x+l*m/(p/s),sf.base.isNullOrUndefined(u)?c.y=o.y+l*g:c.y=u*c.x+f,a.applyTransform(p,c))}),(function(t){a.applyTransform(s,d),this.markerCluster(a.id),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerAnimation",e)}))}else e.setAttribute("transform","scale( "+s+" ) translate( "+d.x+" "+d.y+" )")},bubbleAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.bubbleAnimation(e,t)},animate:function(e,t,i,n){var s,o=this,r=null;s=window.requestAnimationFrame((function a(l){r||(r=l);var d=l-r;d<t?(i.call(o,{element:e,delay:0,timeStamp:d,duration:t}),window.requestAnimationFrame(a)):(window.cancelAnimationFrame(s),n.call(o,{element:e}),e.setAttribute("style","visibility:visible"))}))},getToolbarAlign:function(e,t){var i=t.verticalAlignment,n=t.horizontalAlignment,s=document.getElementById(e+"_Zooming_KitCollection").getBoundingClientRect(),o=0,r=0;switch(i){case 0:r=t.y;break;case 1:r=t.height/2-s.height/2+t.mapsBorder;break;case 2:r=t.height-s.height+t.mapsBorder-2*t.buttonPadding}switch(n){case 0:o=t.x;break;case 1:o=t.width/2-s.width/2+t.mapsBorder;break;case 2:o=t.width-s.width-2*t.buttonPadding+t.mapsBorder}var a=document.getElementById(e+"_ToolBar");a.style.left=o+"px",a.style.top=r+"px",a.style.visibility="visible";var l=t.color,d=window.sfBlazor.getCompInstance(e);d&&d.element&&d.createToolbarStyle(l,a)},getTemplate:function(e,t,i,n,s,o,r,a){for(var l=e[0],d=Object.keys(l),h=t,c=0;c<d.length;c++)"latitude"!==d[c].toLowerCase()&&"longitude"!==d[c].toLowerCase()&&(h=h.replace(new RegExp("{{:"+d[c]+"}}","g"),l[d[c].toString()]));var p=document.createElementNS("http://www.w3.org/2000/svg","div");p.setAttribute("id",s),p.style.position="absolute",p.style.transform="translate(-50 %, -50 %)",p.style.left=n.toString(),p.style.top=i.toString(),p.innerHTML=h.toString();var u=document.getElementById(a+"_LayerIndex_0_Markers_Template_Group");u.appendChild(p);var f=document.getElementById(a+"_Secondary_Element");return f.appendChild(u),document.getElementById(a).appendChild(f),h},dispose:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-maskedtextbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.MaskedTextBox=function(){"use strict";var e=function(){function e(e,t,i,n,s){this.ismultipledelete=!1,this.isClicked=!1,this.previousVal="",this.inputData=null,this.isFocusInput=!1,this.isKeyDown=!1,window.sfBlazor=window.sfBlazor,this.dataId=e,this.wrapperElement=t,this.isClicked=!1,this.sIndex=0,this.eIndex=0,this.element=i,this.options=s,window.sfBlazor.setCompInstance(this),this.dotNetRef=n,this.previousVal=this.options.maskedValue}return e.prototype.initialize=function(){sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this),sf.base.EventHandler.add(this.element,"blur",this.focusOutHandler,this),sf.base.EventHandler.add(this.element,"paste",this.pasteHandler,this),sf.base.EventHandler.add(this.element,"cut",this.cutHandler,this),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"mouseup",this.mouseUpHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(this.element,"input",this.inputHandler,this),sf.base.EventHandler.add(this.element,"select",this.selectionHandler,this)},e.prototype.focusOutHandler=function(e){var t=this.wrapperElement.querySelector(".e-clear-icon");null!==t&&t.classList.add("e-clear-icon-hide")},e.prototype.mouseDownHandler=function(e){this.isClicked=!0},e.prototype.mouseUpHandler=function(e){this.isClicked=!1,sf.base.Browser.isDevice&&(this.ismultipledelete=!1,this.sIndex=this.eIndex=0)},e.prototype.selectionHandler=function(e){var t=this.element;t.selectionStart!==t.selectionEnd&&sf.base.Browser.isDevice&&(this.sIndex=t.selectionStart,this.eIndex=t.selectionEnd)},e.prototype.keyDownHandler=function(e){var t=this.element;this.previousVal=t.value,this.isKeyDown=!0,sf.base.Browser.isDevice||(t.selectionStart!==t.selectionEnd?(this.sIndex=t.selectionStart,this.eIndex=t.selectionEnd):(this.ismultipledelete=!1,this.sIndex=this.eIndex=0))},e.prototype.inputHandler=function(e){if(this.options.mask){var t=this.element,i=t.selectionStart,n=t.selectionEnd;if(e.data&&"insertText"!==e.inputType)t.value=this.previousVal,t.selectionStart=t.selectionEnd=i-1;else if((e.data||e.inputType)&&this.isKeyDown){var s=e.data?e.data:"deleteContentBackward"===e.inputType?"Backspace":"deleteContentForward"===e.inputType?"Delete":null;if(this.sIndex!==this.eIndex?(this.ismultipledelete=!0,i=this.sIndex,n=this.eIndex,this.sIndex=this.eIndex=0):n=i=e.data?i-1:"deleteContentBackward"===e.inputType?i+1:i,t.value=this.previousVal,t.selectionStart=t.selectionEnd=i,this.ismultipledelete){this.ismultipledelete=!1;var o=this.multipleDeletion(this.previousVal,i,n);t.value=o,this.previousVal=t.value,t.selectionStart=t.selectionEnd=i,null!==s&&"Backspace"!==s&&"Delete"!==s&&this.updateMask(s,i)}else this.updateMask(s,i);this.previousVal=t.value,this.updateServerValue()}else this.inputData=t.value,t.value=this.previousVal,t.selectionStart=t.selectionEnd=t.selectionStart,this.pasteHandler(e);this.isKeyDown=!1}},e.prototype.multipleDeletion=function(e,t,i){for(var n=e,s=t;s<i;s++)n=n.substring(0,s)+this.options.promptMask[s]+n.substring(s+1);return n},e.prototype.updateServerValue=function(){var e=this,t=this.element;setTimeout((function(){e.dotNetRef.invokeMethodAsync("UpdateInputValue",t.value,!1)}),20)},e.prototype.updateMask=function(e,t){var i=this.element;if(!this.ismultipledelete){var n=this.previousVal,s="";t>=0&&t<this.options.customRegExpCollec.length&&(s=1===this.options.customRegExpCollec[t].length?this.getRegex(this.options.customRegExpCollec[t]):this.options.customRegExpCollec[t]);var o=new RegExp(s);if("Backspace"===e||"Delete"===e)"Backspace"===e?(this.options.promptMask[t-1]===this.options.promptCharacter?i.value=n.substring(0,t-1)+this.options.promptCharacter+n.substring(t):i.value=n.substring(0,t-1)+this.options.promptMask[t-1]+n.substring(t),i.selectionStart=i.selectionEnd=t-1):(this.options.promptMask[t]===this.options.promptCharacter?i.value=n.substring(0,t)+this.options.promptCharacter+n.substring(t+1):i.value=n.substring(0,t)+this.options.promptMask[t]+n.substring(t+1),i.selectionStart=i.selectionEnd=t);else if(t<this.options.promptMask.length)if(this.options.promptMask[t]===this.options.promptCharacter){if(o.test(e)){var r=this.getLetterCase(e,t);i.value=n.substring(0,t)+r+n.substring(t+1),i.selectionStart=i.selectionEnd=t+1}}else i.selectionStart=i.selectionEnd=t+1,this.updateMask(e,i.selectionStart)}},e.prototype.getRegex=function(e){var t="";switch(e){case"0":t="\\d";break;case"9":t="[0-9 ]";break;case"L":t="[A-Za-z]";break;case"A":t="[A-Za-z0-9]";break;case"a":t="[A-Za-z0-9 ]";break;case"C":t="[^]+";break;case"#":t="[0-9 +-]";break;case"?":t="[A-Za-z ]";break;case"&":t="[^ ]+";break;default:t="("===e||"+"===e||")"===e?"\\"+e:e}return t},e.prototype.getLetterCase=function(e,t){for(var i=!1,n=!1,s=!1,o=!1,r=this.options.hiddenMask,a=[],l=[],d=0;d<r.length;d++)"<"!==r[d]&&!i||">"===r[d]||"|"===r[d]?">"!==r[d]&&!n||"<"===r[d]||"|"===r[d]?"|"!==r[d]&&!s||"<"===r[d]||">"===r[d]?o||(a[d]=!1,l[d]=!1):(s=o=!0,n=i=!1,a[d]=!1,l[d]=!1,"|"===r[d]&&(r=r.replace(r[d],""))):(n=o=!0,i=s=!1,a[d]=!1,l[d]=!0,">"===r[d]&&(r=r.replace(r[d],""))):(i=o=!0,n=s=!1,a[d]=!0,l[d]=!1,"<"===r[d]&&(r=r.replace(r[d],"")));return l[t]?e.toUpperCase():a[t]?e.toLowerCase():e},e.prototype.focusHandler=function(e){var t=this,i=this.element,n=0,s=this.stripValue(i.value),o=!1,r=!1;if(null!==this.options.mask&&(null!==s&&""!==s||"Always"===this.options.floatLabelType||null===this.options.placeHolder||""===this.options.placeHolder||(i.value=this.options.maskedValue),setTimeout((function(){if(i.selectionStart===t.options.mask.length||i.value[i.selectionStart]===t.options.promptCharacter)o=!0;else for(var e=i.selectionStart;e<t.options.mask.length;e++){if(i.value[e]===t.options.promptCharacter){o=!0;break}if(i.value[e]!==t.options.mask[e]){o=!1;break}}})),setTimeout((function(){var e=i.selectionStart-1;if(e===t.options.mask.length-1||i.value[e]===t.options.promptCharacter)r=!0;else for(var n=e;n>=0;n--){if(i.value[n]===t.options.promptCharacter){r=!0;break}if(i.value[n]!==t.options.mask[n]){r=!1;break}}})),this.isClicked||this.isFocusInput||"Always"!==this.options.floatLabelType&&(null===s||""===s)&&null!==this.options.placeHolder&&""!==this.options.placeHolder)){for(this.isFocusInput=!0,n=0;n<this.options.mask.length;n++)if(i.value[n]===this.options.promptCharacter){setTimeout((function(){(o||r)&&(i.selectionEnd=n,i.selectionStart=n)}));break}this.isClicked=!1}},e.prototype.stripValue=function(e){var t="";if(null!==this.options.mask&&null!=e&&""!==e)for(var i=0;i<this.options.mask.length;i++)this.options.mask[i]!==e[i]&&(t+=e[i]);return t},e.prototype.pasteHandler=function(e){var t=this;if(null!==this.options.mask&&!this.options.readonly&&this.options.enabled){var i=this.element,n=void 0;if(void 0===e.clipboardData||this.inputData?(n=this.inputData,i.selectionStart=i.selectionEnd=0,this.inputData=null):n=e.clipboardData.getData("text/plain"),null!==n){var s={Readonly:!1,Enabled:!0,Value:i.value,selectionEnd:i.selectionEnd,selectionStart:i.selectionStart,IsMultipleDelete:this.ismultipledelete,PasteValue:n};e.preventDefault(),this.dotNetRef.invokeMethodAsync("UpdatePasteValue",s).then((function(e){i.value=e.inputValue,i.selectionStart=i.selectionEnd=e.cursorPosition,t.previousVal=i.value}))}}},e.prototype.cutHandler=function(e){if(this.options.mask){var t=this.element,i=t.selectionStart,n=t.selectionEnd;if(i!==n&&null!==this.options.mask){this.ismultipledelete=!0;var s=t.value.substring(i,n);e.clipboardData.setData("text",s),window.clipboardData.setData("text",s),t.value=this.multipleDeletion(t.value,i,n),t.selectionStart=t.selectionEnd=i,this.previousVal=t.value,this.updateServerValue()}}},e.prototype.propertyChange=function(e){var t=this.options.mask!==e.mask||this.options.promptCharacter!==e.promptCharacter;this.options=e,this.previousVal=this.options.maskedValue,t&&e.maskValue&&(this.element.value=e.maskValue,this.element.setSelectionRange(e.selectionStart,e.selectionStart))},e}();return{initialize:function(t,i,n,s,o){n&&new e(t,i,n,s,o).initialize()},propertyChange:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.propertyChange(t)},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.isFocusInput=!0,t.element.focus())},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()}}}()},"./modules/sf-menu.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Menu=function(){"use strict";function e(e,i,n,s){if(40===n||38===n){var o=void 0,r=void 0,a=void 0;i.classList.contains("e-menu-parent")?((a=(r=i).querySelector(".e-menu-item.e-focused"))?(o=Array.prototype.indexOf.call(r.children,a),o=40===n?o===r.childElementCount-1?0:o+1:0===o?r.childElementCount-1:o-1):o=0,o=t(r,o,40===n)):i.classList.contains("e-menu-item")&&(a=(r=i.parentElement).querySelector(".e-menu-item.e-focused"),o=Array.prototype.indexOf.call(r.children,a||i),o=t(r,o=40===n?o===r.childElementCount-1?0:o+1:0===o?r.childElementCount-1:o-1,40===n)),r&&-1!==o&&r.children[o].focus()}else if(((e.classList.contains("e-rtl")?39===n:37===n)||27===n||13===n&&sf.base.closest(i,".e-menu-container"))&&(i.classList.contains("e-ul")||i.classList.contains("e-menu-item")&&!i.parentElement.classList.contains("e-contextmenu"))){var l=void 0;s&&(l=sf.base.select(s));r=i.classList.contains("e-ul")?i:i.parentElement;var d=sf.base.closest(r,".e-menu-vscroll"),h=void 0,c=d?d.previousElementSibling:r.previousElementSibling;if(!l||c&&13!==n){var p=sf.base.closest(r,".e-hamburger");h=p?sf.base.select(".e-menu-item.e-selected",p):sf.base.select(".e-menu-item.e-selected",c)}else h=sf.base.select(".e-menu-item.e-selected",l),(d=sf.base.select(".e-menu-vscroll",e))&&l.blazor__instance.destroyScroll("none");h&&h.focus()}}function t(e,i,n,s){void 0===s&&(s=0);var o=e.children[i];return s===e.childElementCount?-1:((o.classList.contains("e-separator")||o.classList.contains("e-disabled")||o.classList.contains("e-menu-hide"))&&(i=n?i===e.childElementCount-1?0:i+1:0===i?e.childElementCount-1:i-1,s++),((o=e.children[i]).classList.contains("e-separator")||o.classList.contains("e-disabled")||o.classList.contains("e-menu-hide"))&&(i=t(e,i,n)),i)}var i="e-menu-item",n=function(){function t(e,t){this.dataId=e.dataId,this.element=e.element,this.dotnetRef=t,this.enableScroller=e.enableScrolling,window.sfBlazor.setCompInstance(this),this.addEventListener(),this.updateScroll(e.enableScrolling,e.isRtl,!1)}return t.prototype.calculatePosition=function(e){var t,n,s=e.element.getElementsByClassName(i)[e.itemIndex].getBoundingClientRect();this.popupInstance=window.sfBlazor.getCompInstance(e.popupDataId);var o=this.popupInstance.hideMenu(!0);if(o){if(this.popup=e.popup,e.enableScrolling){o=this.positionHelper(e,o);var r=this.popup.querySelector(".e-vscroll-bar");r&&sf.base.EventHandler.add(r,"scroll",this.scrollHandler,this)}var a=o.classList.contains("e-menu-parent")?o:sf.base.select(".e-menu-parent",o);this.popupInstance.setBlankIconStyle(a,e.isRtl);var l,d=a.getBoundingClientRect(),h=this.popupInstance.getMenuWidth(a,d.width,e.isRtl);if(e.isVertical){if(n=s.top,e.isRtl){if((t=s.left)-h<document.documentElement.clientLeft)(l=s.right+h)<document.documentElement.clientWidth&&(t=l)}else if((t=s.right)+h>document.documentElement.clientWidth)(l=s.left-h)>document.documentElement.clientLeft&&(t=l)}else if(n=s.bottom,e.isRtl){if(t=s.right,s.right-h<document.documentElement.clientLeft)(l=s.left+h)<document.documentElement.clientWidth&&(t=l)}else if((t=s.left)+h>document.documentElement.clientWidth)(l=s.right-h)>document.documentElement.clientLeft&&(t=l);var c=e.scrollHeight||d.height;if(n+c>document.documentElement.clientHeight){var p=document.documentElement.clientHeight-c-20;p>document.documentElement.clientTop&&(n=p)}this.popupInstance.updateProperty(e.showItemOnClick,e.element),this.popup.style.zIndex=sf.popups.getZindexPartial(this.popup).toString(),o.style.width=Math.ceil(h)+"px",this.popup.style.left=Math.ceil(t)+"px",this.popup.style.top=Math.ceil(n)+"px",a.style.visibility="",a.focus()}},t.prototype.subMenuPosition=function(e){var t=window.sfBlazor.getCompInstance(e.popupDataId),i=t.hideMenu();e.enableScrolling&&i&&(i=this.positionHelper(e,i)),t.subMenuPosition(i,e.isRtl,e.showItemOnClick,!1,e.scrollHeight)},t.prototype.positionHelper=function(e,t){return this.destroyScroll(null,t),e.scrollHeight?sf.navigations.addScrolling(sf.base.createElement,e.popup,t,"vscroll",e.isRtl,e.scrollHeight):t},t.prototype.clickHandler=function(e){var t=e.target;if(!sf.base.isNullOrUndefined(this.popup)&&sf.base.closest(t,"#"+this.popup.id)){if((s=sf.base.closest(t,"."+i))&&!s.classList.contains("e-menu-caret-icon")){sf.base.closest(t,"."+i+".e-selected")||this.destroyScroll("none");var n=sf.base.select(".e-selected",this.element);!n||sf.base.closest(document.activeElement,"#"+this.popup.id)&&"LI"!==document.activeElement.tagName||n.focus()}}else if(sf.base.closest(t,"#"+this.element.id+".e-hamburger")&&!t.classList.contains("e-menu-parent")&&!t.classList.contains("e-menu-container")){var s;(s=t.classList.contains(i)?t:sf.base.closest(t,"."+i+".e-focused"))&&!s.classList.contains("e-menu-caret-icon")&&this.focusMenu(!0)}},t.prototype.resizeMenu=function(){if(this.enableScroller){var e=this.element.parentElement.querySelectorAll(".e-menu-container")[0],t=e.getElementsByClassName("e-menu-parent")[0],i=sf.base.select(".e-menu-hscroll",e),n=t&&t.offsetWidth,s=window.innerWidth-t.getBoundingClientRect().left;if(n>s&&(e.style.width=Math.ceil(s)+"px",!i)){var o=sf.base.select(".e-menu",e);o&&sf.navigations.addScrolling(sf.base.createElement,e,o,"hscroll",!1)}}},t.prototype.scrollHandler=function(){var e=this.popup.querySelector(".e-menu-parent");null!=e&&e.classList.contains("e-transparent")&&e.classList.remove("e-transparent")},t.prototype.keyDownHandler=function(t){(t.preventDefault(),this.element.classList.contains("e-hamburger"))?e(this.element,t.target,t.keyCode):sf.base.select(".e-menu",this.element).classList.contains("e-vertical")?38!==t.keyCode&&40!==t.keyCode||e(this.element,t.target,t.keyCode):37!==t.keyCode&&39!==t.keyCode||e(this.element,t.target,37===t.keyCode?38:40)},t.prototype.focusMenu=function(e){if(sf.base.select(".e-menu-vscroll",this.popup)){this.destroyScroll("");var t=this.popupInstance.getLastMenu();t&&t.focus()}else{var n=sf.base.selectAll(".e-menu-parent",this.element);if(n.length)if(e)n[0].focus();else{var s=sf.base.select("."+i+".e-focused",n[n.length-1]);(s||n[n.length-1]).focus()}}},t.prototype.destroyScroll=function(e,t,i){var n,s=sf.base.selectAll(".e-menu-vscroll",this.popup),o=[].slice.call(sf.base.selectAll(".e-menu-parent",this.popup)),r=-1;!sf.base.isNullOrUndefined(e)&&t&&(r=o.indexOf(t)),s.forEach((function(s){null,n=sf.base.select(".e-ul",s),i||n&&!sf.base.isNullOrUndefined(e)?t?o.indexOf(n)>r&&(s.style.display=e):s.style.display=e:sf.navigations.destroyScroll(sf.base.getInstance(s,sf.navigations.VScroll),s,t)}))},t.prototype.mouseDownHandler=function(e){var t=e.target,n=!document.body.contains(this.element);(sf.base.isNullOrUndefined(this.element)||n)&&this.removeEventListener(!1);var s=sf.base.closest(t,".e-scroll-nav");if(sf.base.isNullOrUndefined(this.popup)||!sf.base.closest(t,"#"+this.popup.id)||s){var o=sf.base.selectAll(".e-ul",this.element).length;if(n||!sf.base.select(".e-focused",this.element)&&!sf.base.select(".e-selected",this.element)||sf.base.closest(e.target,"#"+this.element.id)||s&&!(o>1)||this.dotnetRef.invokeMethodAsync("DocumentMouseDownAsync",!0,!1,!sf.base.isNullOrUndefined(s),!1,!1),!(sf.base.isNullOrUndefined(this.popup)||sf.base.isNullOrUndefined(this.popupInstance)||sf.base.closest(e.target,"."+i+".e-selected")&&this.popupInstance.subMenuOpen||s))if(this.popupInstance.subMenuOpen)this.destroyScroll("none");else{var r=sf.base.closest(e.target,".e-ul");sf.base.select(".e-menu-vscroll",this.popup)&&this.destroyScroll("none",r)}}},t.prototype.mouseOverHandler=function(e){var t=document.body.contains(this.element);!sf.base.isNullOrUndefined(this.element)&&t||this.removeEventListener(!1);var n=sf.base.closest(e.target,"."+i);this.popup&&this.popupInstance.subMenuOpen&&sf.base.closest(e.target,"#"+this.element.id)&&n&&(n.querySelector(".e-caret")&&parseInt(this.popup.style.top)===Math.ceil(e.target.getBoundingClientRect().top)||this.destroyScroll("none",sf.base.closest(e.target,".e-ul"),!0)),t&&sf.base.select(".e-focused",this.element)&&!sf.base.closest(e.target,"#"+this.element.id)&&this.dotnetRef.invokeMethodAsync("DocumentMouseDownAsync",!1,!1,!1,!0,!0)},t.prototype.updateScroll=function(e,t,i){if(e){sf.base.EventHandler.add(window,"resize",this.resizeMenu,this);var n=sf.base.select(".e-menu",this.element);n&&sf.base.isNullOrUndefined(this.element.querySelector(".e-menu-hscroll"))&&sf.navigations.addScrolling(sf.base.createElement,this.element,n,n.classList.contains("e-vertical")?"vscroll":"hscroll",t)}else if(i){var s=sf.base.select(".e-menu-"+(this.element.classList.contains("e-vertical")?"vscroll":"hscroll"),this.element);if(s){sf.base.EventHandler.remove(window,"resize",this.resizeMenu);var o=this.element.classList.contains("e-vertical")?sf.base.getInstance(s,sf.navigations.VScroll):sf.base.getInstance(s,sf.navigations.HScroll);sf.navigations.destroyScroll(o,s)}}},t.prototype.addDocEvent=function(e,t,i,n){e.__eventList={};var s=e.__eventList.events=[],o=i;n&&(o=o.bind(n));for(var r=t.split(" "),a=0;a<r.length;a++)s.push({name:r[a],listener:i,debounce:o,id:n.element.id}),sf.base.Browser.isIE?e.addEventListener(r[a],o):e.addEventListener(r[a],o,{passive:!1});return o},t.prototype.removeDocEvent=function(e,t,i,n){var s,o,r=-1;"__eventList"in e&&(s=e.__eventList.events);for(var a=t.split(" "),l=0;l<a.length;l++){for(var d=s.length-1;d>=0;d--)s[d].name===a[l]&&s[d].listener===i&&s[d].id===n&&(r=d,o=s[d].debounce);-1!==r&&s.splice(r,1),o&&e.removeEventListener(a[l],o)}},t.prototype.addEventListener=function(){sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),this.addDocEvent(document,"mousedown touchstart",this.mouseDownHandler,this),this.addDocEvent(document,"mouseover",this.mouseOverHandler,this),this.addDocEvent(document,"click",this.clickHandler,this)},t.prototype.removeEventListener=function(e){e&&sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler),this.removeDocEvent(document,"mousedown touchstart",this.mouseDownHandler,this.element.id),this.removeDocEvent(document,"mouseover",this.mouseOverHandler,this.element.id),this.removeDocEvent(document,"click",this.clickHandler,this.element.id)},t}();return{initialize:function(e,t){sf.base.isNullOrUndefined(e.element)||new n(e,t)},calculatePosition:function(e){var t=window.sfBlazor.getCompInstance(e.dataId);sf.base.isNullOrUndefined(t)||t.calculatePosition(e)},subMenuPosition:function(e){var t=window.sfBlazor.getCompInstance(e.dataId);sf.base.isNullOrUndefined(t)||t.subMenuPosition(e)},focusMenu:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.focusMenu(!1)},updateScroll:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.updateScroll(t,i,!0)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.removeEventListener(!0)}}}()},"./modules/sf-multiselect.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.MultiSelect=function(){"use strict";var e="e-list-group-item",t=function(){function t(e,t,i,n,s,o){window.sfBlazor=window.sfBlazor,this.dataId=e,this.containerElement=t,this.childContainerElement=i,this.element=n,this.options=o,window.sfBlazor.setCompInstance(this),this.dotNetRef=s,this.isDisposed=!1}return t.prototype.initialize=function(){sf.base.EventHandler.add(window,"resize",this.windowResize,this),sf.base.EventHandler.add(this.element,"blur",this.blurHandler,this),sf.base.EventHandler.add(this.element,"input",this.inputHandler,this)},t.prototype.blurHandler=function(){this.isDisposed||this.dotNetRef.invokeMethodAsync("InvokeBlur")},t.prototype.inputHandler=function(e){var t=null!=this.element&&this.element.placeholder.length,i=null!=e?e.target.value.length:0;this.element.size=Math.max(t,i)>0?Math.max(t,i):1},t.prototype.getPopupHeight=function(e,t,i){var n=Math.round(i.getBoundingClientRect().height);return(parseInt(e,10)-(n+t)).toString()+"px"},t.prototype.renderPopup=function(e,t,i,n,s,o){this.options=s,this.popupHolder=t,this.list=t.querySelector(".e-content")||sf.base.select(".e-content"),this.liCollections=this.getItems();var r,a=sf.base.formatUnit(this.options.popupHeight);if(document.body.appendChild(e),e.style.visibility="hidden",this.options.allowFiltering&&"CheckBox"===this.options.mode?(this.filterInput=e.querySelector("input.e-input"),r=this.filterInput.parentElement,sf.base.EventHandler.add(this.filterInput,"keypress",this.filterKeydown,this)):this.filterInput=this.element,"auto"!==this.options.popupHeight){var l=0;sf.base.isNullOrUndefined(r)||(l=r.parentElement.getBoundingClientRect().height,a=(parseInt(a,10)-l).toString()+"px");var d=0,h=e.querySelector(".e-selectall-parent");if(h&&(d=h.getBoundingClientRect().height,a=(parseInt(a,10)-d).toString()+"px"),e.querySelector(".e-ddl-header")){var c=e.querySelector(".e-ddl-header");a=this.getPopupHeight(a,l,c)}if(e.querySelector(".e-ddl-footer")){var p=e.querySelector(".e-ddl-footer");a=this.getPopupHeight(a,l,p)}this.list.style.maxHeight=(parseInt(a,10)-2).toString()+"px",e.style.maxHeight=sf.base.formatUnit(this.options.popupHeight)}else e.style.height="auto";if(this.popupCreation(e),sf.base.Browser.isDevice&&"CheckBox"===this.options.mode&&this.options.allowFiltering&&(this.popupObj.element.classList.add("e-ddl-device"),this.popupObj.element.classList.add("e-ddl-device-filter"),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),sf.base.attributes(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),sf.base.addClass([document.body,this.popupObj.element],"e-popup-full-page"),this.setSearchBoxPosition()),e.style.visibility="visible",sf.base.addClass([e],"e-popup-close"),sf.base.attributes(this.element,{"aria-expanded":"true"}),null!==i&&null!==i.popup&&n){for(var u=0,f=Object.keys(i.popup);u<f.length;u++){switch(f[u]){case"collision":!i.popup.collision||this.popupObj.collision.X===i.popup.collision.X.toLowerCase()&&this.popupObj.collision.Y===i.popup.collision.Y.toLowerCase()||(this.popupObj.collision={X:i.popup.collision.X.toLowerCase(),Y:i.popup.collision.Y.toLowerCase()});break;case"position":!this.popupObj.position||this.popupObj.position.X===i.popup.position.X&&this.popupObj.position.Y===i.popup.position.Y||(this.popupObj.position={X:i.popup.position.X,Y:i.popup.position.Y});break;case"relateTo":this.popupObj.relateTo!==i.popup.relateTo&&(this.popupObj.relateTo=i.popup.relateTo);break;case"targetType":this.popupObj.targetType!==i.popup.targetType.toLowerCase()&&(this.popupObj.targetType=i.popup.targetType);break;case"offsetX":this.popupObj.offsetX!==i.popup.offsetX&&(this.popupObj.offsetX=i.popup.offsetX);break;case"offsetY":this.popupObj.offsetY!==i.popup.offsetY&&(this.popupObj.offsetY=i.popup.offsetY)}}this.popupObj.dataBind(),this.popupObj.refreshPosition(this.popupObj.relateTo,!0)}this.options.enableVirtualization&&sf.base.EventHandler.add(this.list,"scroll",this.virtualScroll,this);this.popupObj.show(new sf.base.Animation({name:"FadeIn",duration:100}),1e3===this.options.zIndex?this.element:null)},t.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px"},t.prototype.filterKeydown=function(e){""===this.filterInput.value&&32===e.keyCode&&this.list.querySelector(".e-item-focus")&&e.preventDefault()},t.prototype.setWidth=function(){var e=sf.base.formatUnit(this.options.popupWidth);e.indexOf("%")>-1&&(e=(this.containerElement.offsetWidth*parseFloat(e)/100).toString()+"px");return e},t.prototype.popupCreation=function(t){var i=this;this.popupContainer=t,this.popupObj=new sf.popups.Popup(this.popupContainer,{width:this.setWidth(),targetType:"relative",relateTo:this.containerElement,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.options.enableRtl,position:{X:"left",Y:"bottom"},zIndex:this.options.zIndex,close:function(){sf.base.EventHandler.remove(i.list,"scroll",i.setFloatingHeader),sf.base.removeClass([i.containerElement],"e-icon-anim"),i.fixedHeaderElement=null,i.popupHolder.appendChild(i.popupContainer),sf.base.EventHandler.remove(document,"mousedown",i.onDocumentClick),sf.base.Browser.isDevice&&i.isFilterLayout()&&(sf.base.removeClass([document.body,i.popupObj.element],"e-popup-full-page"),sf.base.EventHandler.remove(i.list,"scroll",i.listScroll)),i.options.enableVirtualization&&sf.base.EventHandler.remove(i.list,"scroll",i.virtualScroll),i.popupObj&&i.popupObj.destroy(),sf.base.isNullOrUndefined(i.isDisposed)||i.isDisposed||i.dotNetRef.invokeMethodAsync("ClosePopup"),i.popupObj=null},open:function(){sf.base.EventHandler.add(document,"mousedown",i.onDocumentClick,i),i.options.allowFiltering&&i.filterInput&&i.filterInput.focus(),i.list.querySelector("li")&&i.list.querySelector("li").classList.contains(e)&&!t.classList.contains("e-multiselect-group")&&sf.base.EventHandler.add(i.list,"scroll",i.setFloatingHeader,i),i.setScrollPosition()},targetExitViewport:function(){sf.base.Browser.isDevice||i.isDisposed||i.dotNetRef.invokeMethodAsync("Hide")}})},t.prototype.virtualScroll=function(){if(this.popupObj&&this.popupObj.element){var e=parseInt(getComputedStyle(this.popupObj.element).borderWidth,10);e=0==e?1:e;var t=this.popupObj.element.classList.contains("e-popup-open");this.list.scrollTop+this.list.offsetHeight+e>=this.list.scrollHeight&&t&&!this.isDisposed&&this.dotNetRef.invokeMethodAsync("VirtualScrollHandler")}},t.prototype.onDocumentClick=function(e){var t=e.target;!sf.base.isNullOrUndefined(this.popupObj)&&sf.base.closest(t,"[id='"+this.popupObj.element.id+"']")||this.containerElement.contains(e.target)?t===this.element||this.options.allowFiltering&&"CheckBox"===this.options.mode&&t===this.filterInput||!this.options.allowFiltering&&sf.base.Browser.isDevice&&t===this.containerElement.querySelector(".e-ddl-icon")||e.preventDefault():(!this.isDisposed&&this.containerElement.classList.contains("e-input-focus")||this.isPopupOpen())&&this.dotNetRef.invokeMethodAsync("Hide")},t.prototype.listScroll=function(){this.filterInput.blur()},t.prototype.setFloatingHeader=function(t){sf.base.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=sf.base.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(e)||(this.fixedHeaderElement.style.display="none"),sf.base.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader()),this.scrollStop(t)},t.prototype.isFilterLayout=function(){return"CheckBox"===this.options.mode&&this.options.allowFiltering},t.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var t=0;this.list&&this.list.parentElement&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10));var i=this.liCollections[0].offsetWidth-t;this.fixedHeaderElement.style.width=i.toString()+"px",sf.base.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});var n=this.list.querySelector("."+e);this.fixedHeaderElement.innerHTML=n.innerHTML},t.prototype.scrollStop=function(t){for(var i=t.target,n=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10),s=Math.round(i.scrollTop/n),o=this.list.querySelectorAll("li"),r=s;r>-1;r--){if(!sf.base.isNullOrUndefined(o[r])&&o[r].classList.contains(e)){var a=o[r];this.fixedHeaderElement.innerHTML=a.innerHTML,this.fixedHeaderElement.style.top=t.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},t.prototype.closePopup=function(e,t){if(this.options=t,this.isPopupOpen()&&!e.cancel&&this.popupObj){this.popupObj.hide(new sf.base.Animation({name:"FadeOut",duration:100,delay:0}))}},t.prototype.setScrollPosition=function(e){if(sf.base.isNullOrUndefined(e)||""===e)this.scrollBottom(!0);else switch(e){case"PageDown":case"ArrowDown":case"End":this.scrollBottom();break;default:this.scrollTop()}},t.prototype.scrollBottom=function(t){if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var i=(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active")).nextElementSibling,n=this.list.offsetHeight,s=this.list.querySelector("li").classList.contains(e),o=i.offsetTop+i.offsetHeight-this.list.scrollTop,r=this.list.scrollTop+o-n;r=t?r+2*parseInt(getComputedStyle(this.list).paddingTop,10):r+parseInt(getComputedStyle(this.list).paddingTop,10);var a=i.offsetTop+i.offsetHeight-this.list.scrollTop;a=s&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?a-this.fixedHeaderElement.offsetHeight:a,(o>n||!(a>0&&this.list.offsetHeight>a))&&(this.list.scrollTop=r)}},t.prototype.scrollTop=function(){if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var t=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),i=t.offsetTop-this.list.scrollTop,n=this.list.querySelector("li").classList.contains(e);i=n&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?i-this.fixedHeaderElement.offsetHeight:i;var s=t.offsetTop+t.offsetHeight-this.list.scrollTop;i<0?this.list.scrollTop=this.list.scrollTop+i:s>0&&this.list.offsetHeight>s||(this.list.scrollTop=t.offsetTop-(n&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.windowResize=function(){"Box"!==this.options.mode&&this.viewContainer&&this.updateDelimViews(this.viewContainer,this.options)},t.prototype.updateDelimViews=function(e,t){this.options=t,this.viewContainer=e,this.viewContainer&&this.viewContainer.previousElementSibling&&this.viewContainer.previousElementSibling.classList.add("e-delim-hide");var i=this.options.delimValue;if(!sf.base.isNullOrUndefined(i)&&i.length>0?this.viewContainer.classList.remove("e-delim-hide"):this.viewContainer.innerHTML="",this.dropIconEle=this.containerElement.querySelector(".e-input-group-icon e-ddl-icon"),this.clearIconEle=this.containerElement.querySelector(".e-clear-icon"),this.viewContainer.classList.remove("e-delim-total"),i&&i.length>0){var n="",s=void 0,o=void 0,r=1,a=void 0,l=void 0,d=0,h=0,c=void 0;this.viewContainer.innerHTML="";var p=sf.base.createElement("span",{className:"e-remain"});p.innerHTML=this.options.overFlowContent,this.viewContainer.appendChild(p);var u=p.offsetWidth;if(sf.base.remove(p),this.dropIconEle&&(d=this.dropIconEle.offsetWidth+parseInt(window.getComputedStyle(this.dropIconEle).marginRight,10)),this.clearIconEle&&(h=this.clearIconEle.offsetWidth+parseInt(window.getComputedStyle(this.clearIconEle).marginRight,10)),sf.base.isNullOrUndefined(i))this.viewContainer.innerHTML="",this.viewContainer.style.display="none";else{for(var f=0;!sf.base.isNullOrUndefined(i[f]);f++){if(n+=0===f?"":this.options.delimiterChar+" ",n+=s=i[f],s=this.viewContainer.innerHTML,this.viewContainer.innerHTML=n,(a=this.viewContainer.offsetWidth+parseInt(window.getComputedStyle(this.viewContainer).paddingRight,10))+d+h>(c=this.childContainerElement.offsetWidth-parseInt(window.getComputedStyle(this.childContainerElement).paddingLeft,10)-parseInt(window.getComputedStyle(this.childContainerElement).paddingRight,10))){for(sf.base.isNullOrUndefined(o)||""===o||(s=o,f=r+1),this.viewContainer.innerHTML=s,l=i.length-f,a=this.viewContainer.offsetWidth;a+u+d>c&&0!==a&&""!==this.viewContainer.innerHTML;){var m=this.viewContainer.innerHTML.split(this.options.delimiterChar),g=m.length;m.pop();var v=m.length;this.viewContainer.innerHTML=m.join(this.options.delimiterChar),v!==g&&0!==v&&(l=l-v+g),""===this.viewContainer.innerHTML&&l++,a=this.viewContainer.offsetWidth}break}a+u+d+h<=c?(o=n,r=f):0===f&&(o="",r=-1)}if(l>0){var b=c-d-h;this.updateRemainElement(p,this.viewContainer,l,b)}}}},t.prototype.updateRemainWidth=function(e,t){e.classList.contains("e-delim-total")&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=t+"px")},t.prototype.updateRemainElement=function(e,t,i,n){var s=this;t.firstChild&&3===t.firstChild.nodeType&&""===t.firstChild.nodeValue&&t.removeChild(t.firstChild),e.innerHTML="",this.isDisposed||this.dotNetRef.invokeMethodAsync("RemainCount",i).then((function(i){var o=s.options.overFlowContent.replace("${count}",i),r=s.options.totalCountContent.replace("${count}",i);e.innerHTML=t.firstChild&&3===t.firstChild.nodeType?o:r,t.firstChild&&3===t.firstChild.nodeType?t.classList.remove("e-delim-total"):(t.classList.add("e-delim-total"),s.updateRemainWidth(t,n));var a=s.viewContainer.querySelector(".e-remain");a&&sf.base.remove(a),s.viewContainer.appendChild(e),s.updateRemainWidth(s.viewContainer,n)}))},t.prototype.isPopupOpen=function(){return this.popupObj&&document.body.contains(this.popupObj.element)},t.prototype.getItems=function(){return this.list?this.list.querySelectorAll(".e-list-item"):[]},t.prototype.refreshPopup=function(){this.isPopupOpen()&&this.popupObj.refreshPosition(this.containerElement)},t}();return{initialize:function(e,i,n,s,o,r){s&&new t(e,i,n,s,o,r).initialize()},renderPopup:function(e,t,i,n,s,o,r){var a=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(a)&&t&&i&&a.renderPopup(t,i,n,s,o,r)},closePopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.closePopup(t,i)},refreshPopup:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.refreshPopup()},updateScrollPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setScrollPosition(t)},getPageCount:function(e){var t=e&&e.querySelector(".e-content");if(t){var i=t.classList.contains("e-nodata")?null:getComputedStyle(t.querySelectorAll(".e-list-item:not(.e-hide-listitem)")[0],null).getPropertyValue("height");return Math.round(t.getBoundingClientRect().height/parseInt(i,10))}return 0},updateDelimViews:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.updateDelimViews(t,i)},setInputValue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.element.value=t)},destroy:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(n,s))},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()}}}()},"./modules/sf-numerictextbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.NumericTextBox=function(){"use strict";var e=new RegExp("^(-)?(\\d*)$"),t=function(){function t(e,t,i,n,s){window.sfBlazor=window.sfBlazor,this.dataId=e,this.wrapperElement=t,this.element=i,this.options=s,window.sfBlazor.setCompInstance(this),this.dotNetRef=n}return t.prototype.initialize=function(){this.spinButtonEvents(),sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this),sf.base.EventHandler.add(this.element,"blur",this.focusOutHandler,this),sf.base.EventHandler.add(this.element,"keypress",this.keyPressHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(this.element,"paste",this.pasteHandler,this),sf.base.Browser.isDevice&&sf.base.EventHandler.add(document,"scroll",this.scrollHandler)},t.prototype.clearInvalid=function(e){this.element.value=e},t.prototype.keyPressHandler=function(e){if(!this.options.enabled||this.options.readonly)return!0;var t=e.keyCode;if(0===e.which||e.metaKey||e.ctrlKey||8===t||13===t)return!0;var i=this.options.decimalSeparator,n=String.fromCharCode(e.which),s="NumpadDecimal"===e.code&&this.keyPressHelper(e)!==i;s&&(n=i);var o=this.element.value;if(o=o.substring(0,this.element.selectionStart)+n+o.substring(this.element.selectionEnd),this.numericRegex().test(o)){if(s){var r=this.element.selectionStart+1;this.element.value=o,this.element.setSelectionRange(r,r),e.preventDefault(),e.stopPropagation()}return!0}return e.preventDefault(),e.stopPropagation(),!1},t.prototype.pasteHandler=function(e){if(this.options.enabled&&!this.options.readonly){var t=e.clipboardData.getData("text/plain");this.numericRegex().test(t.trim())?this.dotNetRef.invokeMethodAsync("InvokePasteHandler",t):e.preventDefault()}},t.prototype.preventHandler=function(){var e=this,t=!!navigator.platform&&/iPad|iPhone|iPod|MacIntel/.test(navigator.platform);setTimeout((function(){if(e.element.selectionStart>0){var i=e.element.selectionStart,n=e.element.selectionStart-1,s=e.element.value.split(""),o=e.options.decimalSeparator.charCodeAt(0);" "===e.element.value[n]&&e.element.selectionStart>0&&!t?(sf.base.isNullOrUndefined(e.prevVal)?e.element.value=e.element.value.trim():0!==n?e.element.value=e.prevVal:0===n&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(n,n)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&45!==e.element.value[e.element.selectionStart-1].charCodeAt(0)?(s.indexOf(e.element.value[e.element.selectionStart-1])!==s.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===o||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==o)&&(e.element.value=e.element.value.substring(0,n)+e.element.value.substring(i,e.element.value.length),e.element.setSelectionRange(n,n),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&45!==e.element.value[e.element.selectionStart-2].charCodeAt(0)&&(s.indexOf(e.element.value[e.element.selectionStart-2])!==s.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===o||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==o)&&(e.element.setSelectionRange(n,n),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),!0===e.cursorPosChanged&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),""===e.element.value.trim()&&e.element.setSelectionRange(0,0),e.element.selectionStart>0&&45===e.element.value[e.element.selectionStart-1].charCodeAt(0)&&e.element.selectionStart>1&&(sf.base.isNullOrUndefined(e.prevVal)?e.element.value=e.element.value:e.element.value=e.prevVal,e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.prevVal=e.element.value}}))},t.prototype.keyDownHandler=function(e){var t=!!navigator.platform&&/iPad|iPhone|iPod|MacIntel/.test(navigator.platform);this.options.readonly||(sf.base.Browser.isDevice&&38!==e.keyCode&&40!==e.keyCode&&8!==e.keyCode&&(this.numericRegex().test(this.keyPressHelper(e))||(t&&sf.base.Browser.isDevice?this.preventHandler():e.preventDefault())),!t&&sf.base.Browser.isDevice&&this.preventHandler(),38===e.keyCode?(e.preventDefault(),this.dotNetRef.invokeMethodAsync("ServerAction","increment",e,this.element.value)):40===e.keyCode&&(e.preventDefault(),this.dotNetRef.invokeMethodAsync("ServerAction","decrement",e,this.element.value)))},t.prototype.keyPressHelper=function(e){return this.element.value.substring(0,this.element.selectionStart)+String.fromCharCode(e.which)+this.element.value.substring(this.element.selectionEnd)},t.prototype.numericRegex=function(){var t=this.options.decimalSeparator,i="*";return"."===t&&(t="\\"+t),0===this.options.decimals&&this.options.validateDecimalOnType?e:(this.options.decimals&&this.options.validateDecimalOnType&&(i="{0,"+this.options.decimals+"}"),new RegExp("^(-)?(((\\d+("+t+"\\d"+i+")?)|("+t+"\\d"+i+")))?$"))},t.prototype.mouseWheel=function(e){var t;e.preventDefault();var i=e;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this.dotNetRef.invokeMethodAsync("ServerAction","increment",e,this.element.value):t<0&&this.dotNetRef.invokeMethodAsync("ServerAction","decrement",e,this.element.value)},t.prototype.focusHandler=function(e){this.isFocused=!0,this.options.enabled&&!this.options.readonly&&(sf.base.Browser.isDevice||sf.base.EventHandler.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this))},t.prototype.focusOutHandler=function(e){this.isFocused=!1,e.preventDefault(),sf.base.Browser.isDevice||sf.base.EventHandler.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)},t.prototype.mouseDownOnSpinner=function(e){var t=this;if(this.options.enabled&&!this.options.readonly){if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),!this.getElementData(e))return;var i=e.currentTarget,n=i.classList.contains("e-spin-up")?"increment":"decrement";sf.base.EventHandler.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval((function(){t.isCalled=!0,t.dotNetRef.invokeMethodAsync("ServerAction",n,e,t.element.value)}),150),sf.base.EventHandler.add(document,"mouseup",this.mouseUpClick,this)}},t.prototype.mouseUpOnSpinner=function(e){if(this.options.enabled&&!this.options.readonly){if(this.isPrevFocused&&(this.element.focus(),sf.base.Browser.isDevice||(this.isPrevFocused=!1)),sf.base.Browser.isDevice||e.preventDefault(),!this.getElementData(e))return;var t=e.currentTarget,i=t.classList.contains("e-spin-up")?"increment":"decrement";sf.base.EventHandler.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.dotNetRef.invokeMethodAsync("ServerAction",i,e,this.element.value),this.isCalled=!1,sf.base.EventHandler.remove(document,"mouseup",this.mouseUpClick)}},t.prototype.touchMoveOnSpinner=function(e){!this.options.enabled||this.options.readonly?document.elementFromPoint(e.clientX,e.clientY).classList.contains("e-input-group-icon")||clearInterval(this.timeOut):clearInterval(this.timeOut)},t.prototype.scrollHandler=function(e){clearInterval(this.timeOut)},t.prototype.getElementData=function(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.options.enabled||this.options.readonly)&&(clearInterval(this.timeOut),!0)},t.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,sf.base.EventHandler.remove(this.spinUp,"mouseleave",this.mouseUpClick),sf.base.EventHandler.remove(this.spinDown,"mouseleave",this.mouseUpClick)},t.prototype.selectRange=function(e){var t=this;if(sf.base.Browser.isDevice||"11.0"!==sf.base.Browser.info.version){var i=sf.base.Browser.isDevice&&sf.base.Browser.isIos?600:90;setTimeout((function(){t.element.setSelectionRange(0,e.length)}),i)}else this.element.setSelectionRange(0,e.length)},t.prototype.isDevice=function(){return sf.base.Browser.isDevice},t.prototype.spinButtonEvents=function(){this.spinDown=this.wrapperElement?this.wrapperElement.querySelector(".e-spin-down"):null,this.spinUp=this.wrapperElement?this.wrapperElement.querySelector(".e-spin-up"):null,this.spinDown&&this.spinUp&&(this.unBindSpinButton(),this.bindSpinButton())},t.prototype.bindSpinButton=function(){sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner,this),sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner,this),sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner,this),sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner,this),sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner,this),sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner,this)},t.prototype.unBindSpinButton=function(){sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner),sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner),sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner),sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner),sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner),sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner)},t.prototype.destroy=function(){sf.base.EventHandler.remove(this.element,"focus",this.focusHandler),sf.base.EventHandler.remove(this.element,"blur",this.focusOutHandler),sf.base.EventHandler.remove(this.element,"keypress",this.keyPressHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(this.element,"paste",this.pasteHandler),sf.base.Browser.isDevice&&sf.base.EventHandler.remove(document,"scroll",this.scrollHandler)},t}();return{initialize:function(e,i,n,s,o){n&&e&&new t(e,i,n,s,o).initialize()},selectRange:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.selectRange(t)},propertyChanges:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.options=t)},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()},spinButtonEvents:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.spinButtonEvents()},clearInvalid:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.clearInvalid(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-pager.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Pager=function(){"use strict";var e=function(){function e(e,t,i){this.previousBrowserWidth=0,this.element=t,this.dataId=e,this.dotnetRef=i,this.wireEvents(),window.sfBlazor.setCompInstance(this)}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.documentKeyHandler,this),sf.base.EventHandler.add(window,"resize",this.windowResized,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"keydown",this.documentKeyHandler),sf.base.EventHandler.remove(window,"resize",this.windowResized)},e.prototype.windowResized=function(){var e=this;setTimeout((function(){var t=e.element.querySelector(".e-parentmsgbar");if(0==e.element.querySelector(".e-mfirst").offsetWidth){var i=e.element.offsetWidth,n=e.element.offsetWidth-e.getMargin(e.element,"Left")-e.getMargin(e.element,"Right")-16,s=e.element.querySelector(".e-pagercontainer").offsetWidth+e.getMargin(e.element.querySelector(".e-pagercontainer"),"Left")+4,o=e.element.querySelector(".e-pagesizes"),r=void 0,a=void 0,l=0;sf.base.isNullOrUndefined(o)||(r=o.querySelector(".e-pagerdropdown"),a=o.querySelector(".e-pagerconstant"),l=r.offsetWidth+e.getMargin(r,"Left")+e.getMargin(r,"Right")+a.offsetWidth+e.getMargin(a,"Left")+e.getMargin(a,"Right")+5),s+l+t.offsetWidth>n&&e.previousBrowserWidth>i?(t.style.display="none",s+l>n&&(sf.base.isNullOrUndefined(o)||(a.style.display="none",s+r.offsetWidth+e.getMargin(r,"Left")+e.getMargin(r,"Right")+3>n&&(r.style.display="none")))):e.previousBrowserWidth<i&&(s+l<n?(sf.base.isNullOrUndefined(o)||(r.style.display="",s+r.offsetWidth+e.getMargin(r,"Left")+e.getMargin(r,"Right")+105<n&&(a.style.display="")),s+l<n&&(t.style.visibility="hidden",t.style.display="",s+l+t.offsetWidth>n&&(t.style.display="none"),t.style.visibility="visible")):sf.base.isNullOrUndefined(o)||(t.style.display="none"))}else t.style.display="";e.previousBrowserWidth=e.element.offsetWidth}),50)},e.prototype.getMargin=function(e,t){var i="Left"===t?getComputedStyle(e).marginLeft:getComputedStyle(e).marginRight;return Number(i.replace("px",""))},e.prototype.documentKeyHandler=function(e){e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&this.element.focus();var t=document.activeElement;e.shiftKey&&9==e.keyCode&&null!=t&&t.classList.contains("e-pager")&&e.stopImmediatePropagation()},e}();return{initialize:function(t,i,n){sf.base.enableBlazorMode(),new e(t,i,n)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t.previousBrowserWidth=0,t.unWireEvents()},currentPageFocus:function(e,t,i){var n=window.sfBlazor.getCompInstance(e).element.querySelector(".e-numericcontainer"),s=n.querySelectorAll(".e-link:last-child")[0];"PreviousPage"!=t&&s.innerText==i||t==s.innerText||"LastPage"!=t||null==s.nextElementSibling?"FirstPage"==t||document.activeElement.classList.contains("e-first")||"1"==i||s.focus():n.querySelector(".e-link").focus()},pagerFocus:function(e,t){var i,n=window.sfBlazor.getCompInstance(e),s=n.element.querySelector(".e-pagercontainer"),o=s.querySelector(".e-numericcontainer"),r=s.querySelector(".e-firstpage.e-pager-default"),a=s.querySelector(".e-prevpage.e-pager-default"),l=s.querySelector(".e-pp"),d=o.querySelectorAll(".e-link")[0],h=o.querySelectorAll(".e-link.e-focused"),c=o.querySelector(".e-link.e-focused"),p=s.querySelector(".e-nextpage"),u=s.querySelector(".e-lastpage"),f=o.querySelectorAll(".e-link"),m=n.element.querySelector(".e-ddl"),g=document.activeElement;if(sf.base.isNullOrUndefined(a)||(i=a.classList.contains("e-focused")),"ArrowDown"===t)return r?(r.focus(),"FirstPage"):a&&r?(r.focus(),"PreviousPage"):(f[1].focus(),"1");if("Tab"==t)return null!=g&&g.classList.contains("e-pager")?s&&s.firstElementChild&&s.firstElementChild.classList.contains("e-firstpagedisabled")?(d.focus(),"1"):(r.focus(),"FirstPage"):null!=r&&r.classList.contains("e-focused")?(a.focus(),"PreviousPage"):null!=a&&i||null!=s.querySelector(".e-pp.e-focused")?null==l||l.classList.contains("e-focused")?(d.focus(),d.innerText):(l.focus(),"PreviousPagerCount"):!sf.base.isNullOrUndefined(c)&&h.length>0&&null!=s.querySelector(".e-link.e-focused")&&null!=s.querySelector(".e-link.e-focused").nextElementSibling?(c.nextElementSibling.focus(),c.nextElementSibling.innerText):h.length>0&&null!=s.querySelector(".e-np")&&null==s.querySelector(".e-np.e-focused")?(s.querySelector(".e-np").focus(),"NextPagerCount"):!sf.base.isNullOrUndefined(c)&&c.classList.contains("e-focused")&&h.length>0||s.querySelectorAll(".e-np.e-focused").length>0?null!=p?(p.focus(),"NextPage"):sf.base.isNullOrUndefined(m)||m.classList.contains("e-input-focus")?sf.base.isNullOrUndefined(m)?"":(c.blur(),n.element.blur(),null!=g&&g.classList.contains("e-numericitem")&&g.blur(),"FocusOut"):(m.focus(),"DropDown"):null!=s.querySelector(".e-nextpage.e-focused")?(u.focus(),"LastPage"):sf.base.isNullOrUndefined(u)||u.classList.contains("e-focused")||sf.base.isNullOrUndefined(m)||m.classList.contains("e-input-focus")?sf.base.isNullOrUndefined(m)||m.classList.contains("e-input-focus")?!sf.base.isNullOrUndefined(u)&&u.classList.contains("e-focused")&&sf.base.isNullOrUndefined(m)?(u.blur(),"FocusOut"):(sf.base.isNullOrUndefined(m)||m.blur(),n.element.blur(),"FocusOut"):(m.focus(),"DropDown"):(u.focus(),"LastPage");if("ShiftTab"==t){if(!sf.base.isNullOrUndefined(m)&&m.classList.contains("e-input-focus"))return sf.base.isNullOrUndefined(u)?(o.lastElementChild.focus(),o.lastElementChild.innerText):(u.focus(),"LastPage");if(null!=a&&i)return r.focus(),"FirstPage";if(a&&s.querySelector(".e-pp.e-focused"))return a.focus(),"PreviousPage";if(f[0].classList.contains("e-focused")||document.activeElement==f[0])return null!=l?(l.focus(),"PreviousPagerCount"):a?(a.focus(),"PreviousPage"):(d.blur(),n.element.focus(),"FocusOut");if(h.length>0)return c.previousElementSibling.focus(),c.previousElementSibling.innerText;if(s.querySelectorAll(".e-nextpage.e-focused").length>0&&null!=s.querySelector(".e-np"))return s.querySelector(".e-np").focus(),"NextPagerCount";if(s.querySelectorAll(".e-nextpage.e-focused").length>0||s.querySelectorAll(".e-np.e-focused").length>0)return f[f.length-1].focus(),o.querySelectorAll(".e-link:last-child")[0].innerText;if(null!=g&&g.classList.contains("e-numericitem")){var v=g.previousElementSibling.innerText;return g.previousElementSibling.focus(),v}return null!=s.querySelector(".e-lastpage.e-focused")||g.classList.contains("e-lastpage")?(p.focus(),"NextPage"):r.classList.contains(".e-disabled")?r.classList.contains("e-focused")?(r.blur(),n.element.focus(),"FocusOut"):"0":(r.focus(),"FirstPage")}return"0"}}}()},"./modules/sf-pivotview.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.PivotView=function(){"use strict";var e="e-icons",t="e-group-row",i="e-format",n="e-pivot-formula",s="e-remove-report",o="e-pivot-toolbar",r="e-list-icon",a="e-hover",l="e-popup",d="e-popup-open",h="e-rowsheader",c="e-columnsheader",p="e-cellselectionbackground",u="e-selectionbackground",f="e-table",m="e-dlg-closeicon-btn.e-icon-btn",g=function(){function e(e){this.parent=e,this.parent.pivotButtonModule=this}return e.prototype.createPivotButtonDrop=function(){for(var e=0,t=[].slice.call(this.parent.parentElement.querySelectorAll(".e-axis-content"));e<t.length;e++){var i=t[e];new sf.base.Droppable(i,{}),this.unWireEvents(i),this.wireEvents(i)}},e.prototype.setPivotButtonDrag=function(){for(var e=0,t=[].slice.call(this.parent.parentElement.querySelectorAll("."+(this.parent instanceof N?"e-grouping-bar":"e-pivotfieldlist")+"-button"));e<t.length;e++){var i=t[e],n=!!sf.base.closest(i,".e-group-all-fields"),s=i.querySelector(".e-pivot-button");this.parent.pivotButtonModule.createDraggable(n,this.parent instanceof N?s.querySelector(".e-content"):s.firstElementChild,n?this.parent.commonActionModule.getFieldInfo(s.getAttribute("data-uid")).fieldItem:JSON.parse(s.getAttribute("data-fieldInfo")))}},e.prototype.createDraggable=function(e,t,i){var n=this;this.draggable=new sf.base.Draggable(t,{clone:!0,enableTailMode:!0,enableAutoScroll:!1,helper:this.createDragClone.bind(this,i,e),dragStart:this.onDragStart.bind(this,e),drag:function(e){n.draggable.setProperties({cursorAt:{top:!sf.base.isNullOrUndefined(e.event.targetTouches)||sf.base.Browser.isDevice?60:-20}})},dragStop:this.onDragStop.bind(this,e),abort:this.parent instanceof N?this.parent.groupingBarSettings.allowDragAndDrop&&i.allowDragAndDrop?"":".e-pivot-button":i.allowDragAndDrop?"":".e-pivot-button"}),e||(this.unWireEvents(this.parent instanceof N?sf.base.closest(t,".e-grouping-bar-button"):t),this.wireEvents(this.parent instanceof N?sf.base.closest(t,".e-grouping-bar-button"):t))},e.prototype.createDragClone=function(e,t,i){var n=t?null:sf.base.closest(i.element,".e-pivot-button");e=n?JSON.parse(n.getAttribute("data-fieldInfo")):e;var s=sf.base.createElement("div",{id:this.parent.element.id+"_DragClone",className:"e-button-drag-clone"}),o=sf.base.createElement("span",{className:"e-text-content",innerHTML:e?e.caption?e.caption:e.name:""});return s.appendChild(o),document.body.appendChild(s),s},e.prototype.onDragStart=function(e,t){var i=this,n=sf.base.closest(t.element,"."+(e?this.parent instanceof N?"e-pivot-button":"e-list-item":"e-pivot-button"));this.parent.dotNetRef.invokeMethodAsync("TriggerNodeDraggingEvent",n.getAttribute("data-uid")).then((function(s){if(s.cancel)i.parent.isDragging=!1,i.draggable.intDestroy(t.event),sf.base.detach(document.getElementById(i.parent.element.id+"_DragClone"));else{i.parent.isDragging=!0;var o=i.parent.fieldList[n.getAttribute("data-uid")],r=["e-rows","e-columns","e-filters"];if(sf.base.addClass([e?i.parent instanceof N?n:n.querySelector(".e-list-text"):n],"e-list-selected"),o&&"CalculatedField"===o.aggregateType)for(var a=0,l=r;a<l.length;a++){var d=l[a];sf.base.addClass([i.parent.parentElement.querySelector("."+d)],"e-drag-restrict")}if(document.getElementById(i.parent.element.id+"_DragClone")){var h=sf.popups.getZindexPartial(n);document.getElementById(i.parent.element.id+"_DragClone").style.zIndex=h?h.toString():"100000"}t.bindEvents(t.dragElement)}}))},e.prototype.onDragStop=function(e,t){this.parent.isDragging=!1;var i=!1;t.target&&t.element&&sf.base.closest(t.element,".e-group-all-fields")&&!sf.base.closest(t.target,".e-droppable")&&(i=!0);var n=sf.base.closest(t.element,"."+(e?this.parent instanceof N?"e-pivot-button":"e-list-item":"e-pivot-button"));this.parent.parentElement.querySelector(".e-list-selected")&&sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-list-selected")),"e-list-selected");for(var s=0,o=["e-rows","e-columns","e-filters"];s<o.length;s++){var r=o[s];sf.base.removeClass([this.parent.parentElement.querySelector("."+r)],"e-drag-restrict")}sf.base.removeClass([e?this.parent instanceof N?n:n.querySelector(".e-list-text"):n],"e-list-selected"),document.getElementById(this.parent.element.id+"_DragClone")&&sf.base.remove(t.helper?t.helper:document.getElementById(this.parent.element.id+"_DragClone")),document.body.style.cursor="auto",!this.isNodeDropped(e,t,n)||!e&&i||this.nodeStateModified(e,t,i,n.getAttribute("data-uid"))},e.prototype.nodeStateModified=function(e,t,i,n){var s=sf.base.closest(t.target,".e-droppable")?JSON.stringify(sf.base.closest(t.target,".e-droppable").className.split(" ")):void 0,o=e||!t.element.parentElement?void 0:JSON.stringify({isvalue:t.element.parentElement.getAttribute("isvalue")});this.parent.dotNetRef.invokeMethodAsync("OnFieldDropped",window.sfBlazor.getDomObject("target",t.target).xPath,s,o,!(!e&&!i),n)},e.prototype.isNodeDropped=function(e,t,i){var n=!0,s=i.getAttribute("data-uid");if(this.parent.fieldList[s]&&this.parent.fieldList[s].isSelected||!e){var o=e?this.getButton(s):i,r=sf.base.closest(o,".e-droppable"),a=sf.base.closest(t.target,".e-droppable");if(o&&r&&r===a){for(var l=[].slice.call(r.querySelectorAll(".e-pivot-button")),d=sf.base.closest(t.target,".e-pvt-btn-div"),h=void 0,c=-1,p=0;p<l.length;p++)if(l[p].id===o.id&&(h=p),d){var u=d.querySelector(".e-pivot-button");l[p].id===u.id&&(c=p)}(h===c||h===l.length-1&&-1===c)&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),n=!1)}}return n},e.prototype.getButton=function(e){for(var t=0,i=[].slice.call(this.parent.parentElement.querySelectorAll(".e-pivot-button"));t<i.length;t++){var n=i[t];if(n.id===e)return n}},e.prototype.getButtonPosition=function(e,t){var i=sf.base.closest(e,".e-pvt-btn-div");if(i){i=i.querySelector(".e-pivot-button");for(var n=this.parent instanceof N?this.parent.parentElement.querySelector(".e-chart-grouping-bar"):void 0,s=[].slice.call((n&&"Chart"===this.parent.currentView?n:this.parent.parentElement).querySelector(".e-"+t).querySelectorAll(".e-pivot-button")),o=0,r=s.length;o<r;o++)if(s[o].id===i.id)return o}return-1},e.prototype.wireEvents=function(e){sf.base.EventHandler.add(e,"mouseover",this.parent.commonActionModule.updateDropIndicator,this),sf.base.EventHandler.add(e,"mouseleave",this.parent.commonActionModule.updateDropIndicator,this)},e.prototype.unWireEvents=function(e){sf.base.EventHandler.remove(e,"mouseover",this.parent.commonActionModule.updateDropIndicator),sf.base.EventHandler.remove(e,"mouseleave",this.parent.commonActionModule.updateDropIndicator)},e.prototype.destroy=function(){for(var e=0,t=[].slice.call(this.parent.parentElement.querySelectorAll(".e-axis-content"));e<t.length;e++){var i=t[e];this.unWireEvents(i)}this.draggable&&this.draggable.isDestroyed&&this.draggable.destroy()},e}(),v=function(){function e(e){this.parent=e,this.parent.groupingBarModule=this,this.parent.pivotButtonModule=new g(this.parent)}return e.prototype.updatePivotButtons=function(){this.createPivotButtonDrop(),this.parent.pivotButtonModule.setPivotButtonDrag()},e.prototype.createPivotButtonDrop=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-axis-container"));e<t.length;e++){var i=t[e].firstElementChild;this.parent.groupingBarSettings.allowDragAndDrop&&new sf.base.Droppable(i,{}),this.unWireEvent(i),this.wireEvent(i)}},e.prototype.refreshUI=function(){var e=this.parent.element.querySelector(".e-pivot-grouping-bar");if(e){e.style.minWidth="400px";var i=e.querySelector(".e-group-rows"),n=e.querySelector(".e-group-values"),s=e.querySelector(".e-group-columns"),o=e.querySelector(".e-group-filters"),r=e.querySelector(".e-left-axis-fields"),a=e.querySelector(".e-right-axis-fields");e.style.width=sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).offsetWidth+"px";var l=this.parent.element.querySelector(".e-frozenheader").querySelector("colgroup").children[0],d=e.offsetWidth-parseInt(l.style.width,10)+"px";if(r.style.minWidth=l.style.width,n.style.width=l.style.width,a.style.width=d,sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element)){var h=this.parent.element.querySelector(".e-frozenheader").querySelector(".e-columnheader");h.querySelector(".e-headercell").classList.add(t),h.style.height=h.querySelector(".e-rhandler").style.height="auto",sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).querySelector(".e-group-rows")&&h.querySelector(".e-axis-row")?i?(i.style.height=this.parent.element.querySelector(".e-headercontent").offsetHeight+"px",sf.base.remove(h.querySelector(".e-axis-row")),h.querySelector("."+t).appendChild(e.querySelector(".e-axis-row"))):(i=sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).querySelector(".e-group-rows")).style.height="auto":(i.style.height=this.parent.element.querySelector(".e-headercontent").offsetHeight+"px",h.querySelector("."+t).appendChild(e.querySelector(".e-axis-row"))),h.querySelector("."+t).querySelector(".e-headercelldiv").style.display="none",h.querySelector("."+t).querySelector(".e-sortfilterdiv").style.display="none";for(var c=[].slice.call(this.parent.element.querySelector(".e-movableheader").querySelector("thead").querySelectorAll("tr")).filter((function(e){return e.childNodes.length>0})),p=0,u=c;p<u.length;p++){var f=u[p];sf.base.setStyleAttribute(f,{height:"auto"})}var m=this.parent.element.querySelector(".e-headercontent").offsetHeight;i.style.height=m+"px",s.style.height=o.style.height="auto";var g=n.offsetHeight/2;g>s.offsetHeight&&(sf.base.setStyleAttribute(o,{height:sf.base.formatUnit(g)}),sf.base.setStyleAttribute(s,{height:sf.base.formatUnit(g+2)})),this.parent.element.querySelector(".e-frozenheader").querySelector(".e-rhandler")&&(h.style.height=this.parent.element.querySelector(".e-frozenheader").querySelector(".e-rhandler").style.height=m+"px");for(var v=m/c.length,b=0,y=c;b<y.length;b++){f=y[b];sf.base.setStyleAttribute(f,{height:v+"px"});for(var w=0,C=[].slice.call(f.querySelectorAll(".e-rhandler"));w<C.length;w++){var S=C[w];sf.base.setStyleAttribute(S,{height:sf.base.closest(S,"th").offsetHeight+"px"})}}}}},e.prototype.wireEvent=function(e){sf.base.EventHandler.add(e,"mouseover",this.dropIndicatorUpdate,this),sf.base.EventHandler.add(e,"mouseleave",this.dropIndicatorUpdate,this)},e.prototype.unWireEvent=function(e){sf.base.EventHandler.remove(e,"mouseover",this.dropIndicatorUpdate),sf.base.EventHandler.remove(e,"mouseleave",this.dropIndicatorUpdate)},e.prototype.dropIndicatorUpdate=function(e){(this.parent.isDragging&&e.target.classList.contains("e-droppable")&&"mouseover"===e.type||"mouseleave"===e.type)&&(sf.base.removeClass([].slice.call(this.parent.element.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.element.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"))},e.prototype.destroy=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-axis-container"));e<t.length;e++){var i=t[e];this.unWireEvent(i.firstElementChild)}},e}(),b=function(){function t(e){this.parent=e,this.parent.calculatedFieldModule=this}return t.prototype.getNodeLocation=function(e,t){var i=e.querySelector('li[data-uid="'+CSS.escape(JSON.parse(t))+'"]').getBoundingClientRect();return JSON.stringify([i.top+(window.scrollY||document.documentElement.scrollTop),i.left])},t.prototype.setSelectionRange=function(e){e&&sf.base.select("#"+this.parent.element.id+"droppable").setSelectionRange(e,e),sf.base.select("#"+this.parent.element.id+"droppable").focus()},t.prototype.getIconInfo=function(e,t){var n=document.elementFromPoint(t,e);if(n){if(n.classList.contains(i))return JSON.stringify(i);if(n.classList.contains("e-edit"))return JSON.stringify("e-edit");if(n.classList.contains(s))return JSON.stringify(s);if(n.classList.contains("e-edited"))return JSON.stringify("e-edited")}},t.prototype.emptyFieldName=function(e){sf.base.addClass([document.getElementById(e+"ddlelement")],["e-empty-field","e-pivot-calc-input"]),document.getElementById(e+"ddlelement").focus()},t.prototype.editCalculatedFieldInfo=function(e,t,i,n){var s=sf.base.closest(document.elementFromPoint(i,t),"li");e?("pivot"===this.parent.options.dataType&&(sf.base.addClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edit"),sf.base.removeClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edited"),sf.base.addClass([s.querySelector("."+r)],"e-edited"),sf.base.removeClass([s.querySelector("."+r)],"e-edit"),s.querySelector(".e-edited").setAttribute("title",n)),sf.base.select("#"+this.parent.element.id+"droppable").value=s.getAttribute("data-uid")):this.updatedCalculatedFieldInfo(s,n)},t.prototype.updatedCalculatedFieldInfo=function(e,t){"pivot"===this.parent.options.dataType&&(sf.base.addClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edit"),sf.base.removeClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edited"),e.querySelector(".e-edit").setAttribute("title",t)),sf.base.select("#"+this.parent.element.id+"droppable").value=""},t.prototype.updateNodeExpandIcons=function(t,i){for(var n=t.querySelector('li[data-uid="'+CSS.escape(i)+'"]'),o=[].slice.call(n.querySelectorAll("li")),a=0;a<o.length;a++){var l=o[a].querySelector(".e-text-content");if("CalculatedField"===o[a].getAttribute("data-type")&&l&&o[a].querySelector("."+r+".e-calc-member")&&!o[a].querySelector("."+s)){var d=sf.base.createElement("span",{className:s+" "+e+" "+r});l.classList.add("e-calcfieldmember"),l.appendChild(d)}(o[a].querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||o[a].querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||o[a].querySelector(".e-level-members,.e-namedSetCDB-icon"))&&this.createDraggable(o[a])}return this.olapExpand(n)},t.prototype.olapExpand=function(e){if(e&&e.querySelector("."+r)&&e.querySelector(".e-icon-expandable")&&e.querySelector("."+r).className.indexOf("e-folderCDB-icon")>-1){var t=e.querySelector("."+r);return sf.base.removeClass([t],"e-folderCDB-icon"),sf.base.addClass([t],"e-folderCDB-open-icon"),JSON.stringify(!1)}return e&&e.querySelector("."+r)&&e.querySelector(".e-icon-collapsible")&&e.querySelector("."+r).className.indexOf("e-folderCDB-open-icon")>-1?(e=e.querySelector("."+r),sf.base.removeClass([e],"e-folderCDB-open-icon"),sf.base.addClass([e],"e-folderCDB-icon"),JSON.stringify(!1)):JSON.stringify(!0)},t.prototype.updateEditOptions=function(t){var i=[].slice.call(sf.base.selectAll("#"+t+" .e-acrdn-item"));sf.base.addClass(sf.base.selectAll("#"+t),"e-pivot-accord");for(var n=0;n<i.length;n++)if(i[n].querySelector('[data-type="CalculatedField"]')){var o=i[n].querySelector(".e-acrdn-header .e-toggle-icon");sf.base.removeClass([o],"e-toggle-icon"),sf.base.addClass([o],"e-acrdn-header-icon");var a=o.querySelector(".e-tgl-collapse-icon");sf.base.removeClass([a],"e-tgl-collapse-icon"),sf.base.addClass([a],[r,"e-edit"]),o.appendChild(sf.base.createElement("span",{className:s+" "+e+" "+r}))}},t.prototype.updateAccordionLabel=function(e){var t=document.elementFromPoint(JSON.parse(e).ClientX,JSON.parse(e).ClientY),i=t.parentElement.querySelector(".e-label").innerText,n=sf.base.closest(t,".e-acrdn-item").querySelector("[data-field").getAttribute("data-caption"),s=sf.base.closest(t,".e-adaptive-calc-radio-btn").querySelector(".input");sf.base.closest(t,".e-acrdn-item").querySelector(".e-label").innerText=n+" ("+i+")",sf.base.closest(t,".e-acrdn-item").querySelector("[data-type").setAttribute("data-type",s.getAttribute("data-value"))},t.prototype.accordionClick=function(e,t,i){var n=document.elementFromPoint(JSON.parse(e),JSON.parse(t));if(sf.base.closest(n,".e-acrdn-header-icon")){var o=sf.base.closest(n,".e-acrdn-header").querySelector(".e-pivot-calc-check input");if(o){var a=void 0,l=sf.base.closest(n,".e-acrdn-header-icon");return l.querySelector(".e-edit")&&n.classList.contains("e-edit")?(sf.base.addClass([l.querySelector("."+r)],"e-edited"),sf.base.removeClass([l.querySelector("."+r)],"e-edit"),a="e-edit"):l.querySelector(".e-edited")&&n.classList.contains("e-edited")?(sf.base.addClass([l.querySelector("."+r)],"e-edit"),sf.base.removeClass([l.querySelector("."+r)],"e-edited"),a="e-edited"):l.querySelector("."+s)&&n.classList.contains(s)&&(a=s),JSON.stringify([o.getAttribute("data-field"),a,o.getAttribute("id").split(i+"_")[1]])}}return JSON.stringify([])},t.prototype.getAccordionValue=function(){for(var e="",t=[].slice.call(document.querySelectorAll(".e-accordion .e-check")),i=0;i<t.length;i++){var n=t[i].parentElement.querySelector("[data-field]").getAttribute("data-field"),s=t[i].parentElement.querySelector("[data-type]").getAttribute("data-type");-1===s.indexOf("CalculatedField")?e=e+'"'+s+"("+n+')"':e+=t[i].parentElement.querySelector("[data-formula]").getAttribute("data-formula")}return e},t.prototype.createFormulaDroppable=function(t,o,a,l,d,h,c){var p=document.getElementById(this.parent.element.id+c);if(p.querySelector("."+n)){new sf.base.Droppable(p.querySelector("."+n),{});for(var u=[].slice.call(p.querySelectorAll(".e-pivot-treeview ul li")),f=0;f<u.length;f++){var m=u[f].getAttribute("data-field");if("olap"===this.parent.options.dataType){u[f].querySelector(".e-measure-icon")&&(u[f].querySelector("."+r).style.display="none");var g=u[f].querySelector(".e-text-content");"CalculatedField"===u[f].getAttribute("data-type")&&g&&u[f].querySelector("."+r+".e-calc-member")&&(g.classList.add("e-calcfieldmember"),g.appendChild(sf.base.createElement("span",{className:s+" "+e+" "+r}))),(u[f].querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||u[f].querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||u[f].querySelector(".e-level-members,.e-namedSetCDB-icon"))&&this.createDraggable(u[f])}else if("pivot"===this.parent.options.dataType&&u[f].querySelector(".e-text-content span")){var v=u[f].getAttribute("data-type"),b=sf.base.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:o},className:e+" e-drag"}),y=sf.base.createElement("div",{className:" e-iconspace"});sf.base.prepend([b],u[f].querySelector(".e-text-content")),sf.base.append([y,u[f].querySelector("."+i)],u[f].querySelector(".e-text-content")),"CalculatedField"===v&&(u[f].querySelector("."+i).setAttribute("title",a),sf.base.addClass([u[f].querySelector("."+i)],s),d&&h===m&&(sf.base.select("#"+this.parent.element.id+"droppable",p).value=u[f].getAttribute("data-uid")),sf.base.addClass([u[f].querySelector(".e-iconspace")],[d&&h===m?"e-edited":"e-edit",e,r]),u[f].querySelector(".e-edit,.e-edited").setAttribute("title",d&&h===m?l:t),u[f].querySelector(".e-edit,.e-edited").setAttribute("aria-disabled","false"),u[f].querySelector(".e-edit,.e-edited").setAttribute("tabindex","-1"),sf.base.removeClass([u[f].querySelector("."+i)],i),sf.base.removeClass([u[f].querySelector(".e-iconspace")],"e-iconspace")),this.createDraggable(b)}}}},t.prototype.createDraggable=function(e){new sf.base.Draggable(e,{dragTarget:".e-list-item",clone:!0,enableTailMode:!0,enableAutoScroll:!1,helper:this.calculatedDragClone.bind(this),dragStart:this.onCalcDragStart.bind(this),drag:this.onDragging.bind(this),dragStop:this.onCalcDragStop.bind(this)})},t.prototype.onDragging=function(t){var i=sf.base.select("#"+this.parent.element.id+"_DragClone ."+e);t.target&&t.target.classList.contains(n)?(sf.base.removeClass([i],"e-drag-restrict"),sf.base.addClass([t.target],"e-copy-drop")):(sf.base.addClass([i],"e-drag-restrict"),sf.base.removeClass([t.target],"e-copy-drop"),sf.base.addClass([i],"e-icon-expandable"),sf.base.removeClass([i],r))},t.prototype.onCalcDragStop=function(e){var t=document.getElementById(this.parent.element.id+"droppable"),i=sf.base.closest(e.element,".e-list-item");sf.base.removeClass([t],"e-copy-drop"),sf.base.removeClass([i.querySelector(".e-list-text")],"e-list-selected");var n=t.selectionStart;e.target.id===this.parent.element.id+"droppable"&&this.parent.dotNetRef.invokeMethodAsync("UpdateCalcDroppable",i.getAttribute("data-uid"),n,e.target.id),document.getElementById(this.parent.element.id+"_DragClone")&&sf.base.remove(e.helper),document.body.style.cursor="auto",this.parent.isDragging=!1},t.prototype.onCalcDragStart=function(e){var t=sf.base.closest(e.element,".e-list-item"),i=document.getElementById(this.parent.element.id+"_DragClone");if(i&&t&&("pivot"===this.parent.options.dataType&&e.target&&e.target.classList.contains("e-drag")||"olap"===this.parent.options.dataType&&(t.querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||t.querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||t.querySelector(".e-level-members,.e-namedSetCDB-icon")))){sf.base.addClass([t.querySelector(".e-list-text")],"e-list-selected");var n=sf.popups.getZindexPartial(t);i.style.zIndex=n?n.toString():document.querySelector(".e-pivot-calc-dialog-div.e-olap-calc-dialog-div").style.zIndex+1,i.style.display="inline",this.parent.isDragging=!0}else this.parent.isDragging=!1;e.bindEvents(e.dragElement)},t.prototype.calculatedDragClone=function(t){var i=sf.base.createElement("div",{id:this.parent.element.id+"_DragClone",className:"e-drag-item e-treeview e-pivot-calc"}),n=sf.base.createElement("div",{className:"e-text-content e-calcfieldmember"});return n.appendChild(sf.base.createElement("div",{className:e})),n.appendChild(sf.base.createElement("span",{className:"e-list-text",innerHTML:sf.base.closest(t.element,"li").getAttribute("data-caption")})),i.appendChild(n),document.body.appendChild(i),i},t}(),y=function(){function e(e){this.parent=e,this.parent.toolbarModule=this}return e.prototype.renderToolbar=function(){this.parent.element.querySelector("."+o)&&this.updateItemElements(this.parent.element.querySelector("."+o))},e.prototype.updateItemElements=function(e){for(var t=0,i=[].slice.call(e.querySelectorAll(".e-toolbar-item"));t<i.length;t++){var n=i[t];n.querySelector("button")?n.classList.contains("e-overlay")||n.querySelector("button").setAttribute("tabindex","0"):n.querySelector(".e-menu.e-menu-parent")&&(n.querySelector(".e-menu.e-menu-parent").setAttribute("tabindex","-1"),!n.classList.contains("e-overlay")&&n.querySelector(".e-menu-item.e-menu-caret-icon")&&n.querySelector(".e-menu-item.e-menu-caret-icon").setAttribute("tabindex","0"))}},e.prototype.focusToolBar=function(){sf.base.removeClass(document.querySelector("."+o).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),sf.base.removeClass(document.querySelector("."+o).querySelectorAll(".e-menu-item.e-selected"),"e-selected"),document.querySelector(".e-toolbar-items")&&sf.base.addClass([document.querySelector(".e-toolbar-items")],"e-focused")},e.prototype.selectInputRange=function(e){if(e.querySelector(".e-pivotview-report-input")){var t=e.querySelector(".e-pivotview-report-input input");t.setSelectionRange(t.value.length,t.value.length)}},e.prototype.copyMdxQuery=function(e){if(e.querySelector(".e-mdx-query-content")){var t=e.querySelector(".e-mdx-query-content");try{t.select(),document.execCommand("copy")}catch(e){window.alert("Oops, unable to copy")}}else;},e}(),w=function(){function t(e){this.parent=e,this.parent.treeRendererModule=this}return t.prototype.updateFieldListIcons=function(e,t){if(this.parent.fieldList)for(var i=document.getElementById(e),n=[].slice.call(i.querySelectorAll("ul li")),s=0;s<n.length;s++){var o=n[s].getAttribute("data-uid");this.updateTreeNode(n[s],o,t)}},t.prototype.updateTreeNode=function(t,i,n){var s=!1;s="olap"!==this.parent.options.dataType||this.updateOlapTreeNode(t);var o=t.querySelector(".e-text-content");if(t.querySelector("."+r)&&o){var a=t.querySelector("."+r);o.insertBefore(a,t.querySelector(".e-list-text"))}if(s&&!this.parent.isAdaptive){var l=this.parent.commonActionModule.getFieldInfo(i);s=!1;var d=sf.base.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false"}});d.appendChild(sf.base.createElement("span",{attrs:{tabindex:"-1",title:l.fieldItem?l.fieldItem.allowDragAndDrop?n:"":n,"aria-disabled":"false"},className:e+" e-drag "+(l.fieldItem?l.fieldItem.allowDragAndDrop?"":"e-disable-drag":"")})),t.querySelector(".e-checkbox-wrapper")&&!t.querySelector(".e-drag")&&o&&o.insertBefore(d,t.querySelector(".e-checkbox-wrapper")),this.parent.pivotButtonModule.createDraggable(!0,d,l.fieldItem)}t.querySelector(".e-check")&&sf.base.addClass([t.querySelector(".e-list-text")],"e-selected-node")},t.prototype.updateOlapTreeNode=function(e){if("olap"!==this.parent.options.dataType||!e)return!0;var t=e.querySelector(".e-text-content");return t.querySelector(".e-calcMemberGroupCDB,.e-measureGroupCDB-icon,.e-folderCDB-icon,.e-folderCDB-open-icon,.e-dimensionCDB-icon,.e-kpiCDB-icon")&&(t.querySelector(".e-checkbox-wrapper").style.display="none"),t.querySelector("."+r)&&t.querySelector("."+r).className.indexOf("e-level-members")>-1&&(this.parent.isAdaptive?t.querySelector(".e-checkbox-wrapper").style.display="none":t.querySelector(".e-checkbox-wrapper").style.visibility="hidden"),!!(t.querySelector(".e-hierarchyCDB-icon,.e-attributeCDB-icon,.e-namedSetCDB-icon")||t.querySelector(".e-measure-icon,.e-kpiGoal-icon,.e-kpiStatus-icon,.e-kpiTrend-icon,.e-kpiValue-icon")||t.querySelector(".e-calc-measure-icon,.e-calc-dimension-icon"))&&(!t.querySelector(".e-measure-icon")||(t.querySelector("."+r).style.display="none",!0))},t}(),C=function(){function e(e,t,i,n){window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=n,this.dataId=e,window.sfBlazor.setCompInstance(this),this.getOptions(t,i)}return e.prototype.getOptions=function(e,t){this.element=e,this.options=t,this.parentElement=document.getElementById(e.id+"_Dialog_Container"),this.isAdaptive=sf.base.Browser.isDevice,this.pivotGridModule=t.pivotGridModule?window.sfBlazor.getCompInstance(t.pivotGridModule):this.pivotGridModule,this.pivotGridModule&&sf.base.isNullOrUndefined(this.pivotGridModule.pivotFieldListModule)&&(this.pivotGridModule.pivotFieldListModule=this),this.fieldList=t.fieldList?t.fieldList:this.fieldList,this.dataSourceSettings=t.dataSourceSettings,this.parentElement&&sf.base.select("#"+this.parentElement.id+"_title",this.parentElement)&&sf.base.setStyleAttribute(sf.base.select("#"+this.parentElement.id+"_title",this.parentElement),{width:"100%"})},e.prototype.initModules=function(){this.treeRendererModule=new w(this),this.commonActionModule=new E(this),this.pivotButtonModule=new g(this),this.options.allowCalculatedField&&(this.calculatedFieldModule=new b(this)),this.unWireEvents(),this.wireEvents()},e.prototype.contentReady=function(){this.initModules(),this.pivotButtonModule&&(this.pivotButtonModule.createPivotButtonDrop(),this.pivotButtonModule.setPivotButtonDrag()),this.parentElement&&sf.base.select("#"+this.parentElement.id+"_title",this.parentElement)&&sf.base.setStyleAttribute(sf.base.select("#"+this.parentElement.id+"_title",this.parentElement),{width:"100%"})},e.prototype.onShowFieldList=function(e,t){e.querySelector(".e-toggle-field-list")&&sf.base.addClass([e.querySelector(".e-toggle-field-list")],"e-hide"),t.style.top=parseInt(t.style.top,10)<0?"0px":t.style.top},e.prototype.removeFieldListIcon=function(e){document.getElementById(e.id+"calculateddialog")&&!document.getElementById(e.id+"calculateddialog").classList.contains("e-popup-close")||!e.querySelector(".e-toggle-field-list")||sf.base.removeClass([e.querySelector(".e-toggle-field-list")],"e-hide")},e.prototype.updateFieldList=function(e){var t=e.querySelector(".e-footer-content");sf.base.select("#"+e.id+"_dialog-content",e)?(sf.base.setStyleAttribute(sf.base.select("#"+e.id+"_dialog-content",e),{padding:"0"}),sf.base.addClass([t],"e-field-list-footer")):e.querySelector(".e-adaptive-container").appendChild(t)},e.prototype.updateSelectedNodes=function(e,t){e=sf.base.closest(e,".e-text-content"),"check"===t?sf.base.addClass([e.querySelector(".e-list-text")],"e-selected-node"):sf.base.removeClass([e.querySelector(".e-list-text")],"e-selected-node");var i=sf.base.closest(e,"li");if(i&&i.querySelector("ul"))for(var n=0,s=[].slice.call(i.querySelectorAll("li"));n<s.length;n++){var o=s[n];"check"===t?sf.base.addClass([o.querySelector(".e-list-text")],"e-selected-node"):sf.base.removeClass([o.querySelector(".e-list-text")],"e-selected-node")}},e.prototype.removeFocusedElements=function(){this.element.querySelectorAll(".e-btn-focused").length>0&&sf.base.removeClass(this.element.querySelectorAll(".e-btn-focused"),"e-btn-focused")},e.prototype.wireEvents=function(){sf.base.EventHandler.add(document,"click",this.removeFocusedElements,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(document,"click",this.removeFocusedElements)},e.prototype.destroy=function(e){this.unWireEvents(),this.commonActionModule.destroy(),this.pivotButtonModule.destroy(),this.isDestroyed=e},e}(),S=function(){function e(e){this.keyConfigs={shiftF:"shift+F",shiftS:"shift+S",shiftE:"shift+E",delete:"delete",enter:"enter",escape:"escape",upArrow:"upArrow",downArrow:"downArrow"},this.parent=e,this.parent.parentElement.tabIndex=-1===this.parent.parentElement.tabIndex?0:this.parent.parentElement.tabIndex,this.keyboardModule=new sf.base.KeyboardEvents(this.parent.parentElement,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"shiftF":this.processFilter(e);break;case"shiftS":this.processSort(e);break;case"shiftE":this.processEdit(e);break;case"delete":this.processDelete(e);break;case"enter":this.processEnter(e);break;case"escape":this.processClose(e);break;case"upArrow":case"downArrow":this.processFilterNodeSelection(e)}},e.prototype.getButtonElement=function(e){for(var t=[].slice.call(this.parent.parentElement.querySelectorAll(".e-pivot-button")),i=0,n=t.length;i<n;i++)if(t[i].getAttribute("data-uid")===e.getAttribute("data-uid"))return t[i];return e},e.prototype.processEnter=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button"))return t.querySelector(".e-dropdown-icon")&&sf.base.closest(t,".e-values")?t.querySelector(".e-dropdown-icon").click():t.querySelector(".e-edit")?t.querySelector(".e-edit").click():!t.querySelector(".e-sort")||sf.base.closest(t,".e-values")||sf.base.closest(t,".e-axis-filter")?t.querySelector(".e-btn-filter")&&!sf.base.closest(t,".e-values")&&t.querySelector(".e-btn-filter").click():(t.querySelector(".e-sort").click(),this.getButtonElement(t).focus()),e.stopPropagation(),void e.preventDefault()},e.prototype.processSort=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-sort")&&!sf.base.closest(t,".e-values")&&!sf.base.closest(t,".e-axis-filter"))return t.querySelector(".e-sort").click(),this.getButtonElement(t).focus(),e.stopPropagation(),void e.preventDefault()},e.prototype.processEdit=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-edit"))return t.querySelector(".e-edit").click(),e.stopPropagation(),void e.preventDefault()},e.prototype.processFilter=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-btn-filter")&&!sf.base.closest(t,".e-values"))return t.querySelector(".e-btn-filter").click(),e.stopPropagation(),void e.preventDefault()},e.prototype.processFilterNodeSelection=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-select-all")&&40===e.keyCode){if((n=sf.base.closest(t,".e-member-editor-outer-container").querySelector(".e-member-editor-container"))&&n.querySelector("li")){var i=n.querySelector("li");return n.querySelector("li#_active")&&(sf.base.removeClass([n.querySelector("li#_active")],[a,"e-node-focus"]),n.querySelector("li#_active").removeAttribute("id")),i.setAttribute("id","_active"),sf.base.addClass([i],[a,"e-node-focus"]),n.focus(),e.stopPropagation(),void e.preventDefault()}}else if(t&&sf.base.closest(t,".e-member-editor-container")&&38===e.keyCode){var n;if((n=sf.base.closest(t,".e-member-editor-container")).querySelector("li#_active."+a+".e-node-focus")&&n.querySelector("li")&&n.querySelector("li")===n.querySelector("li#_active."+a+".e-node-focus")){sf.base.removeClass(n.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node");var s=sf.base.closest(t,".e-member-editor-outer-container").querySelector(".e-select-all");if(s&&s.querySelector("li"))return(i=s.querySelector("li")).setAttribute("id","_active"),sf.base.addClass([i],[a,"e-node-focus"]),s.focus(),e.stopPropagation(),void e.preventDefault()}}},e.prototype.processDelete=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-remove"))return t.querySelector(".e-remove").click(),e.stopPropagation(),void e.preventDefault()},e.prototype.processClose=function(e){var t=e.target;if(t&&sf.base.closest(t,"."+l+"."+d)){var i=sf.base.closest(t,"."+l+"."+d).blazor__instance,n=this;if(i&&!i.closeOnEscape){var s=i.element.getAttribute("data-fieldName");i.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type}).then((function(){if(n.parent.parentElement)for(var t=0,i=[].slice.call(n.parent.parentElement.querySelectorAll(".e-pivot-button"));t<i.length;t++){var o=i[t];if(o.getAttribute("data-uid")===s){o.focus();break}}e.preventDefault()}))}else this.closeDialog(sf.base.closest(t,"."+l+"."+d),e)}},e.prototype.closeDialog=function(e,t){return e.querySelector("."+m)?(e.querySelector("."+m).click(),void t.preventDefault()):e.querySelector(".e-cancel-btn")?(e.querySelector(".e-cancel-btn").click(),void t.preventDefault()):void 0},e.prototype.destroy=function(){this.keyboardModule&&this.keyboardModule.destroy()},e}(),E=function(){function e(e){this.parent=e,this.parent.commonActionModule=this,this.keyboardModule=new S(e),this.getElementInfo()}return e.prototype.getElementInfo=function(){if(this.parent instanceof N){var e=this.parent.element.getBoundingClientRect();this.parent.dotNetRef.invokeMethodAsync("GetElementInfo",e.width,e.height)}},e.prototype.updateActiveNode=function(e,t){var i=e.querySelectorAll("li.e-node-focus");return sf.base.removeClass(e.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node"),sf.base.addClass([e.querySelector('li[data-uid="'+t+'"]')],"e-prev-active-node"),i&&i.length>0&&e.querySelectorAll("li")[0]===i[0]},e.prototype.isFullRowElement=function(e,t){var i=document.elementFromPoint(t,e),n=i.classList.contains("e-fullrow");return JSON.stringify(this.parent instanceof C&&sf.base.closest(i,".e-field-list-tree-outer-div")?n&&!sf.base.isNullOrUndefined(i.parentElement.querySelector(".e-drag")):n)},e.prototype.validateInputs=function(e){var t=e.value1,i=e.value2,n=e.condition,s=e.type;if(sf.base.isNullOrUndefined(t)||""===t||["Between","NotBetween"].indexOf(n)>-1&&(sf.base.isNullOrUndefined(i)||""===i)){var o=sf.base.select("#"+this.parent.element.id+"_"+s.toLowerCase()+(sf.base.isNullOrUndefined(t)||""===t?"_input_option_1":"_input_option_2"),this.parent.parentElement);sf.base.addClass([o],"e-empty-field"),o.focus()}},e.prototype.updateDropIndicator=function(e){this.parent.isDragging&&e.target.classList.contains("e-axis-content")&&"mouseover"===e.type?(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"),(t=[].slice.call(e.target.querySelectorAll(".e-pvt-btn-div"))).length>0&&sf.base.addClass([t[t.length-1].querySelector(".e-drop-indicator-last")],"e-drop-hover")):this.parent instanceof C&&(!this.parent.isDragging||!e.target.classList.contains("e-droppable")&&"mouseleave"===e.type)&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"));if(this.parent.isDragging&&sf.base.closest(e.target,".e-pvt-btn-div")&&"mouseover"===e.type&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.closest(e.target,".e-droppable"))){var t=sf.base.closest(e.target,".e-pvt-btn-div");sf.base.addClass([t.querySelector(".e-drop-indicator")],"e-drop-hover")}},e.prototype.getFieldInfo=function(e,t){for(var i=[this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.values,this.parent.dataSourceSettings.filters],n=0,s=i.length;n<s;n++)for(var o=0,r=i[n]?i[n].length:0;o<r&&!t;o++)if(i[n][o]&&i[n][o].name===e)return{fieldName:e,fieldItem:i[n][o],axis:0===n?"rows":1===n?"columns":2===n?"values":"filters",position:o};var a=this.parent.fieldList[e];return{fieldName:e,fieldItem:a||t?{name:e,caption:a?a.caption:e,baseField:a?a.baseField:void 0,baseItem:a?a.baseItem:void 0,isCalculatedField:!!a&&a.isCalculatedField,isNamedSet:!!a&&a.isNamedSets,showNoDataItems:!!a&&a.showNoDataItems,showSubTotals:!!a&&a.showSubTotals,type:a?a.aggregateType:void 0,showFilterIcon:!!a&&a.showFilterIcon,showSortIcon:!!a&&a.showSortIcon,showRemoveIcon:!a||a.showRemoveIcon,showValueTypeIcon:!!a&&a.showValueTypeIcon,showEditIcon:!!a&&a.showEditIcon,allowDragAndDrop:!a||a.allowDragAndDrop}:void 0,axis:t?"row"===this.parent.dataSourceSettings.valueAxis?"rows":"columns":"fieldlist",position:-1}},e.prototype.getAggregateIcoPosition=function(e){var t=this.parent instanceof N?this.parent.parentElement.querySelector(".e-chart-grouping-bar"):void 0,i=(t&&"Chart"===this.parent.currentView?t:this.parent.parentElement).querySelector(".e-pivot-button."+e);if(i&&i.querySelector(".e-dropdown-icon")){var n=i.querySelector(".e-dropdown-icon").getBoundingClientRect(),s={};return s.top=n.top,s.left=n.left,s.bottom=n.bottom,s.right=n.right,JSON.stringify(s)}return null},e.prototype.destroy=function(){this.keyboardModule.destroy()},e}(),x=function(){function i(e){this.keyConfigs={tab:"tab",shiftTab:"shift+tab",enter:"enter",shiftEnter:"shift+enter",ctrlEnter:"ctrl+enter",ctrlShiftF:"ctrl+shift+f"},this.parent=e,this.event=void 0,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.pivotViewKeyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return i.prototype.keyActionHandler=function(e){var t=e.target;if(!t||!sf.base.closest(t,".e-pivotfieldlist-container"))switch(e.action){case"tab":this.processTab(e);break;case"shiftTab":this.processShiftTab(e);break;case"enter":case"shiftEnter":case"ctrlEnter":this.processEnter(e);break;case"ctrlShiftF":this.toggleFieldList(e)}},i.prototype.getAdjacentButton=function(e,t){var i=this.allpivotButtons(e);if(sf.base.removeClass(i,"e-btn-focused"),this.parent.internalGrid&&i)for(var n=i.length,s=0;s<n;s++)if(i[s].getAttribute("data-uid")===e.getAttribute("data-uid")){var o="next"===t?i[s+1]:i[s-1];return o||e}return e},i.prototype.allpivotButtons=function(e){var t=[];if(e&&this.parent.options.showGroupingBar){var i=sf.base.closest(e,".e-pivot-grouping-bar"),n=sf.base.closest(e,".e-group-pivot-rows"),s=sf.base.closest(e,".e-chart-grouping-bar"),o=e.classList.contains(h),r=void 0,a=void 0,l=void 0;if(null!==i?a=i.classList.contains("e-pivot-grouping-bar"):null!==n?l=n.classList.contains("e-group-pivot-rows"):null!==s&&(r=s.classList.contains("e-chart-grouping-bar")),a||l||o){var d=[].slice.call(this.parent.element.querySelector(".e-pivot-grouping-bar").querySelectorAll(".e-pivot-button")),c=[].slice.call(this.parent.element.querySelector(".e-group-pivot-rows").querySelectorAll(".e-pivot-button"));t=d.concat(c)}else r&&(t=[].slice.call(this.parent.element.querySelector(".e-chart-grouping-bar").querySelectorAll(".e-pivot-button")))}return t},i.prototype.processTab=function(e){var i=this,n=e.target;if(n&&(sf.base.closest(n,".e-pivot-button")||n.classList.contains(t))){if(this.parent.internalGrid){if(n.parentElement.parentElement.classList.contains("e-group-rows")&&n.classList.contains("e-btn-focused")){var s=this.getAdjacentButton(n,"next");return s.getAttribute("data-uid")!==n.getAttribute("data-uid")&&(sf.base.addClass([s],"e-btn-focused"),s.focus()),e.stopPropagation(),void e.preventDefault()}var r=this.getAdjacentButton(n,"next");return r.getAttribute("data-uid")!==n.getAttribute("data-uid")&&(sf.base.addClass([r],"e-btn-focused"),r.focus()),void e.preventDefault()}}else n&&sf.base.closest(n,"."+o)&&this.parent.options.showToolbar&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout((function(){var e=i.getAdjacentToolbarItem(document.activeElement,"next");sf.base.removeClass(sf.base.closest(n,"."+o).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),e&&e.classList.contains("e-menu-item")&&sf.base.addClass([e],"e-focused")})))},i.prototype.getAdjacentToolbarItem=function(e,t){if(e.classList.contains("e-menu-item")&&e.classList.contains("e-focused")){var i=sf.base.closest(e,".e-toolbar-item"),n=[].slice.call(sf.base.closest(e,"."+o).querySelectorAll(".e-toolbar-item:not(.e-overlay)"));if("next"===t){for(var s=0;s<n.length;s++)if(i.id===n[s].id)return this.getActiveElement(n[s+1])}else for(s=n.length-1;s>-1;s--)if(i.id===n[s].id)return this.getActiveElement(n[s-1])}return e},i.prototype.getActiveElement=function(e){if(e){if("button"===e.firstElementChild.tagName.toLowerCase())return e.firstElementChild.focus(),e.firstElementChild;if(e.querySelector(".e-menu-item"))return e.querySelector(".e-menu-item").focus(),e.querySelector(".e-menu-item")}return document.activeElement},i.prototype.processShiftTab=function(e){var i=this,n=e.target;if(n&&(sf.base.closest(n,".e-pivot-button")||n.classList.contains(t))){if(this.parent.internalGrid){if(n.classList.contains(t)&&n.querySelector(".e-btn-focused"))n=n.querySelector(".e-btn-focused");else if(n.classList.contains(t)){n=this.parent.element.querySelector(".e-btn-focused")?this.parent.element.querySelector(".e-btn-focused"):this.parent.element.querySelector(".e-pivot-grouping-bar");var s=this.allpivotButtons(n);if(s.length>0&&s[s.length-1])return s[s.length-1].focus(),sf.base.removeClass(s,"e-btn-focused"),sf.base.addClass([s[s.length-1]],"e-btn-focused"),e.stopPropagation(),void e.preventDefault()}var r=this.getAdjacentButton(n,"previous");if(r.getAttribute("data-uid")!==n.getAttribute("data-uid"))return r.focus(),e.stopPropagation(),void e.preventDefault()}}else if(n&&this.parent.internalGrid&&(n.classList.contains("e-movablefirst")||n.classList.contains(h)&&sf.base.closest(n,"tr").getAttribute("data-uid")===this.parent.internalGrid.element.querySelector(".e-frozencontent tr").getAttribute("data-uid"))){var a=this.allpivotButtons(n);if(a.length>0)return setTimeout((function(){a[a.length-1].focus()})),sf.base.removeClass(a,"e-btn-focused"),sf.base.addClass([a[a.length-1]],"e-btn-focused"),e.stopPropagation(),void e.preventDefault()}else n&&sf.base.closest(n,"."+o)&&this.parent.options.showToolbar&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout((function(){var e=i.getAdjacentToolbarItem(document.activeElement,"previous");sf.base.removeClass(sf.base.closest(n,"."+o).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),e&&e.classList.contains("e-menu-item")&&sf.base.addClass([e],"e-focused")})))},i.prototype.processEnter=function(t){var i=t.target;if(i&&sf.base.closest(i,".e-grid"))return 13!==t.keyCode||t.shiftKey||t.ctrlKey?13===t.keyCode&&t.shiftKey&&!t.ctrlKey?this.parent.options.enableValueSorting&&(this.event=t,i.click()):13===t.keyCode&&!t.shiftKey&&t.ctrlKey&&this.parent.options.hyperlinkSettings&&i.querySelector("a")&&i.querySelector("a").click():i.querySelector("."+e)?(this.event=t,i.querySelector("."+e).click()):i.classList.contains("e-valuescontent")&&i.dispatchEvent(new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0})),void t.preventDefault()},i.prototype.toggleFieldList=function(e){var t=this.parent,i=e.target;if(t&&t.element&&t.options.showFieldList&&t.pivotFieldListModule){t.pivotFieldListModule=t.pivotFieldListModule&&t.pivotFieldListModule.blazor__instance?t.pivotFieldListModule.blazor__instance:t.pivotFieldListModule;var n=t.element.querySelector("#"+t.element.id+"fieldlist");if(t.options.showToolbar&&t.toolbarModule&&n&&n.querySelector("button")&&t.pivotFieldListModule.parentElement.classList.contains("e-popup-close"))return n.click(),void e.preventDefault();if(t.element.querySelector(".e-toggle-field-list")){if(!t.element.querySelector(".e-toggle-field-list").classList.contains("e-hide"))return t.element.querySelector(".e-toggle-field-list").click(),void e.preventDefault();if((t.element.querySelector(".e-toggle-field-list").classList.contains("e-hide")||t.options.showToolbar)&&i&&sf.base.closest(i,".e-pivotview")&&t.pivotFieldListModule.parentElement&&t.pivotFieldListModule.parentElement.classList.contains(d)){var s=t.pivotFieldListModule.parentElement.blazor__instance;s&&!s.closeOnEscape?s.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type}):t.closeDialog(t.pivotFieldListModule.parentElement,e)}}}},i.prototype.destroy=function(){this.pivotViewKeyboardModule&&this.pivotViewKeyboardModule.destroy()},i}(),O=function(){function e(e){this.isPopupClicked=!1,this.shiftLockedPos=[],this.savedSelectedCellsPos=[],this.cellSelectionPos=[],this.parent=e,this.parent.selectionModule=this}return e.prototype.addInternalEvents=function(){this.wireEvents()},e.prototype.wireEvents=function(){this.unWireEvents(),sf.base.EventHandler.add(this.parent.element,this.parent.isAdaptive?"touchend":"click",this.mouseClickHandler,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.parent.element,this.parent.isAdaptive?"touchend":"click",this.mouseClickHandler)},e.prototype.mouseClickHandler=function(e){(3===e.which||0===e.which)&&(this.lastCellClicked=e.target);var t=e.target;if((t.classList.contains("e-headercell")||t.classList.contains("e-headercelldiv")||t.classList.contains(h)||t.classList.contains("e-rowcell")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headertext")||t.classList.contains("e-stackedheadertext"))&&"pivot"===this.parent.options.dataType){t.classList.contains("e-headercell")||t.classList.contains(h)||t.classList.contains("e-rowcell")?t:t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-cellvalue")||t.classList.contains("e-headercelldiv")||t.classList.contains("e-ascending")||t.classList.contains("e-descending")?t.parentElement:t.classList.contains("e-headertext")&&t.parentElement.parentElement,this.cellClicked(t,e)}else this.cellClicked(t,e)},e.prototype.cellClicked=function(e,t){var i=this,n=null;if(e.classList.contains("e-headercell")||e.classList.contains("e-stackedheadercell")||e.classList.contains("e-rowcell")?n=e:e.classList.contains("e-stackedheadercelldiv")||e.classList.contains("e-cellvalue")||e.classList.contains("e-headercelldiv")?n=e.parentElement:e.classList.contains("e-headertext")?n=e.parentElement.parentElement.parentElement:e.classList.contains("e-stackedheadertext")?n=e.parentElement.parentElement:e.classList.contains("e-rowselect")&&(e.classList.contains("e-spanclicked")?this.isPopupClicked=!1:this.isPopupClicked=!0),n){var s=Number(n.getAttribute("aria-colindex")),o=Number(n.getAttribute("index")),r=Number(n.getAttribute("aria-colspan"));this.parent.gridSettings.allowSelection&&(("Both"===this.parent.gridSettings.selectionSettings.mode?!n.classList.contains("e-rowcell"):"Cell"===this.parent.gridSettings.selectionSettings.mode?n.classList.contains(c):"Row"!==this.parent.gridSettings.selectionSettings.mode)?this.parent.dotNetRef.invokeMethodAsync("ColumnSelectHandler",o,s,t).then((function(e){i.clearSelection(n,t,s,o),e||(i.clearSelection(n,t,s,o),i.applyColumnSelection(t,n,s,s+(r>0?r-1:0),o),i.afterColumnSelected(n,t,s,o))})):(this.clearSelection(n,t,s,o),this.afterColumnSelected(n,t,s,o))),this.parent.gridSettings.allowSelection||e.classList.contains("e-expand")||e.classList.contains("e-collapse")||this.parent.dotNetRef.invokeMethodAsync("CellClickedHandler",o,s,t)}},e.prototype.afterColumnSelected=function(e,t,i,n){this.getSelectedCellsPos();var s=JSON.stringify(this.savedSelectedCellsPos);("Both"===this.parent.gridSettings.selectionSettings.mode?!e.classList.contains("e-rowcell"):"Cell"===this.parent.gridSettings.selectionSettings.mode?e.classList.contains(c):"Row"!==this.parent.gridSettings.selectionSettings.mode)&&(this.parent.dotNetRef.invokeMethodAsync("CellClickedHandler",n,i,t),this.parent.dotNetRef.invokeMethodAsync("SelectHandler",i,n,s),this.savedSelectedCellsPos=[])},e.prototype.clearSelection=function(e,t,i,n){if(sf.base.isNullOrUndefined(e))for(var s=0,o=[].slice.call(this.parent.element.querySelectorAll("."+u+", ."+p));s<o.length;s++){var r=o[s];sf.base.removeClass([r],["e-active",u,p])}else if(!t.shiftKey&&!t.ctrlKey||"Single"===this.parent.gridSettings.selectionSettings.type)if("Cell"===this.parent.gridSettings.selectionSettings.mode)e.classList.contains(c)?sf.base.removeClass(this.parent.element.querySelectorAll(".e-rowcell."+p),p):sf.base.removeClass(this.parent.element.querySelectorAll("."+c+".e-active"),["e-active",u]);else if("Both"===this.parent.gridSettings.selectionSettings.mode||"Row"===this.parent.gridSettings.selectionSettings.mode)if(e.classList.contains("e-rowcell"))for(var a=0,l=[].slice.call(this.parent.element.querySelectorAll("."+u+", ."+p));a<l.length;a++){r=l[a];sf.base.removeClass([r],["e-active",u,p])}else sf.base.removeClass(this.parent.element.querySelectorAll("."+p),p)},e.prototype.applyColumnSelection=function(e,t,i,n,s){var o=Number(t.getAttribute("index"));if(!t.classList.contains(h)||"Cell"!==this.parent.gridSettings.selectionSettings.mode||t.classList.contains(c)){var r=e.ctrlKey;"Multiple"===this.parent.gridSettings.selectionSettings.type&&null!==this.parent.element.querySelector(".e-rowselect")&&(this.isPopupClicked?(this.parent.element.querySelector(".e-rowselect").classList.add("e-spanclicked"),r=!0):(this.parent.element.querySelector(".e-rowselect").classList.remove("e-spanclicked"),r=!1));for(var a=[],l=this.parent.gridSettings.selectionSettings.type,d=t.classList.contains("e-active"),f=[],m={},g=i;g<=n;g++)f.push(g.toString());if(r&&"Single"!==l)d=!1;else{for(var v=0,b=[].slice.call(this.parent.element.querySelectorAll(".e-active"));v<b.length;v++){var y=b[v];sf.base.removeClass([y],["e-active",u]),-1===f.indexOf(y.getAttribute("aria-colindex"))&&(d=!1);var w=Number(y.getAttribute("aria-colindex"));m[w]=w}f=Object.keys(m).length>0?Object.keys(m).sort((function(e,t){return e-t})):f}"Multiple"===l&&e.shiftKey?(this.shiftLockedPos=0===this.shiftLockedPos.length?f:this.shiftLockedPos,Number(this.shiftLockedPos[0])<=i?i=Number(this.shiftLockedPos[0]):n=n<Number(this.shiftLockedPos[this.shiftLockedPos.length-1])?Number(this.shiftLockedPos[this.shiftLockedPos.length-1]):n):this.shiftLockedPos=[];var C=[];if(e.ctrlKey&&"Both"===this.parent.gridSettings.selectionSettings.mode&&"Multiple"===l&&!t.classList.contains(h))for(var S=0,E=[].slice.call(this.parent.element.querySelectorAll("."+h+"."+p));S<E.length;S++){y=E[S];C.push(y.getAttribute("index"))}for(var x=i;x<=n;)a.push('[aria-colindex="'+x+'"]'+("Cell"===this.parent.gridSettings.selectionSettings.mode?'[index="'+s+'"]':"")),x++;if(!d){s=t.classList.contains("e-headercell")?s:this.parent.scrollPageInfo.rowStartPos-1;for(var O=t.classList.contains("e-active"),T=0,A=[].slice.call(this.parent.element.querySelectorAll(a.toString()));T<A.length;T++){y=A[T];Number(y.getAttribute("index"))>=s&&(O&&r&&-1===C.indexOf(o.toString())?sf.base.removeClass([y],["e-active",u]):sf.base.addClass([y],["e-active",u]))}}}},e.prototype.getSelectedCellsPos=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll("."+u));e<t.length;e++){var i=t[e];this.savedSelectedCellsPos.push({rowIndex:i.getAttribute("index"),colIndex:i.getAttribute("aria-colindex")})}for(var n=0,s=[].slice.call(this.parent.element.querySelectorAll("."+p));n<s.length;n++){i=s[n];this.cellSelectionPos.push({rowIndex:i.getAttribute("index"),colIndex:i.getAttribute("aria-colindex")})}},e.prototype.destroy=function(){this.unWireEvents()},e}(),T=function(){function e(e){this.previousValues={top:0,left:0},this.frozenPreviousValues={top:0,left:0},this.eventType="",this.isScrolling=!1,this.parent=e,this.parent.virtualScrollModule=this}return e.prototype.addInternalEvents=function(){this.wireEvents()},e.prototype.wireEvents=function(){if(this.unWireEvents(),"Chart"!==this.parent.displayOptions.view){var e=this.parent.element.querySelector(".e-movablecontent"),t=this.parent.element.querySelector(".e-frozencontent"),i=this.parent.element.querySelector(".e-movableheader"),n=e.parentElement.parentElement.querySelector(".e-movablescrollbar");sf.base.EventHandler.clearEvents(e),sf.base.EventHandler.clearEvents(t);var s=this.parent.isAdaptive?e:e.parentElement.parentElement.querySelector(".e-movablescrollbar");sf.base.EventHandler.add(s,"scroll touchmove pointermove",this.onHorizondalScroll(i,e,t),this),sf.base.EventHandler.add(e.parentElement,"scroll wheel touchmove pointermove keyup keydown",this.onVerticalScroll(t,e),this),sf.base.EventHandler.add(e.parentElement.parentElement,"mouseup touchend",this.common(i,e,t),this),sf.base.EventHandler.add(n,"scroll",this.onCustomScrollbarScroll(e,i),this),sf.base.EventHandler.add(e,"scroll",this.onCustomScrollbarScroll(n,i),this),sf.base.EventHandler.add(i,"scroll",this.onCustomScrollbarScroll(n,e),this),sf.base.EventHandler.add(i,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(i,"touchmove pointermove",this.onTouchScroll(i,e,t),this),sf.base.EventHandler.add(e,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(e,"touchmove pointermove",this.onTouchScroll(i,e,t),this)}},e.prototype.unWireEvents=function(){var e=this.parent.element.querySelector(".e-movablecontent"),t=this.parent.element.querySelector(".e-frozencontent"),i=this.parent.element.querySelector(".e-movableheader"),n=e.parentElement.parentElement.querySelector(".e-movablescrollbar"),s=this.parent.isAdaptive?e:e.parentElement.parentElement.querySelector(".e-movablescrollbar");sf.base.EventHandler.remove(s,"scroll touchmove pointermove",this.onHorizondalScroll(i,e,t)),sf.base.EventHandler.remove(e.parentElement,"scroll wheel touchmove pointermove keyup keydown",this.onVerticalScroll(t,e)),sf.base.EventHandler.remove(e.parentElement.parentElement,"mouseup touchend",this.common(i,e,t)),sf.base.EventHandler.remove(n,"scroll",this.onCustomScrollbarScroll(e,i)),sf.base.EventHandler.remove(e,"scroll",this.onCustomScrollbarScroll(n,i)),sf.base.EventHandler.remove(i,"scroll",this.onCustomScrollbarScroll(n,e)),sf.base.EventHandler.remove(i,"touchstart pointerdown",this.setPageXY()),sf.base.EventHandler.remove(i,"touchmove pointermove",this.onTouchScroll(i,e,t)),sf.base.EventHandler.remove(e,"touchstart pointerdown",this.setPageXY()),sf.base.EventHandler.remove(e,"touchmove pointermove",this.onTouchScroll(i,e,t))},e.prototype.onWheelScroll=function(e,t){var i=this,n=e;return function(e){var t=n.parentElement.scrollTop+(1===e.deltaMode?30*e.deltaY:e.deltaY);i.frozenPreviousValues.top!==t&&(e.preventDefault(),i.frozenPreviousValues.top=t,i.eventType=e.type)}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.onCustomScrollbarScroll=function(e,t){var i=this,n=e,s=t;return function(e){if(null!==i.parent.element.querySelector(".e-movablecontent").parentElement.querySelector("tbody")){var t=e.target.scrollLeft;i.previousValues.left!==t&&(n.scrollLeft=t,s.scrollLeft=t,i.previousValues.left=t)}}},e.prototype.onTouchScroll=function(e,t,i){var n=this,s=t;return function(i){if("mouse"!==i.pointerType){var o=n.getPointXY(i),r=s.parentElement.scrollTop+(n.pageXY.y-o.y),a=n.parent.isAdaptive?t:s.parentElement.parentElement.querySelector(".e-movablescrollbar"),l=a.scrollLeft+(n.pageXY.x-o.x);n.frozenPreviousValues.left===l||l<0||(e.scrollLeft=l,a.scrollLeft=l,n.pageXY.x=o.x,n.frozenPreviousValues.left=l,n.frozenPreviousValues.top===r||r<0||(n.pageXY.y=o.y,n.frozenPreviousValues.top=r,n.eventType=i.type))}}},e.prototype.update=function(e,t,i,n,s){var o=this;if(this.isScrolling=!0,this.parent.pageSettings)if("vertical"===this.direction){var r="pivot"===this.parent.options.dataType&&"row"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,a=this.parent.pageSettings.rowSize*r*this.parent.gridSettings.rowHeight,l=Math.ceil(i/a);if(this.parent.scrollPosObject.vertical===l||this.parent.pageSettings.rowSize>=this.parent.scrollPageInfo.rowCount)return;this.parent.scrollPosObject.vertical=l,this.parent.pageSettings.rowCurrentPage=l>1?l:1;var d=0;"pivot"===this.parent.options.dataType&&this.parent.dotNetRef.invokeMethodAsync("UpdateScrollInfo",l,this.direction).then((function(e){o.parent.getScrollInfo(e),d=o.parent.scrollPageInfo.rowStartPos;var t=Math.ceil(d/(o.parent.pageSettings.rowSize*r)),i=a*t-o.parent.scrollPageInfo.rowFirstLvl*r*o.parent.gridSettings.rowHeight;o.parent.scrollPosObject.verticalSection=i}))}else{var h="pivot"===this.parent.options.dataType&&"column"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,c=this.parent.pageSettings.columnSize*h*this.parent.gridSettings.columnWidth;l=Math.ceil(n/c);if(this.parent.scrollPosObject.horizontal===l)return;this.parent.scrollPosObject.horizontal=l,this.parent.pageSettings.columnCurrentPage=l>1?l:1;var p=0;"pivot"===this.parent.options.dataType&&this.parent.dotNetRef.invokeMethodAsync("UpdateScrollInfo",l,this.direction).then((function(e){o.parent.getScrollInfo(e),p=o.parent.scrollPageInfo.colStartPos;var t=Math.ceil(p/(o.parent.pageSettings.columnSize*h)),i=c*t-o.parent.scrollPageInfo.colFirstLvl*h*o.parent.gridSettings.columnWidth;o.parent.scrollPosObject.horizontalSection=i}))}},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.common=function(e,t,i){var n=this;return function(i){n.parent.isAdaptive||t.parentElement.parentElement.querySelector(".e-movablescrollbar");n.update(e,t,t.parentElement.scrollTop*n.parent.verticalScrollScale,t.scrollLeft*n.parent.horizontalScrollScale,i)}},e.prototype.onHorizondalScroll=function(e,t,i){var n,s=this;return function(i){var o=s.parent.isAdaptive?t:t.parentElement.parentElement.querySelector(".e-movablescrollbar"),r=t.scrollLeft*s.parent.horizontalScrollScale;if("wheel"!==i.type&&"touchmove"!==i.type&&"wheel"!==s.eventType&&"touchmove"!==s.eventType||(clearTimeout(n),n=setTimeout((function(){r="touchmove"===i.type?t.scrollLeft:r,s.update(e,t,t.parentElement.scrollTop*s.parent.verticalScrollScale,r,i)}),300)),s.previousValues.left!==r){s.scrollDirection=s.direction="horizondal";var a=-(r-s.parent.scrollPosObject.horizontalSection-t.scrollLeft),l=t.querySelector("."+f).style.transform.split(",").length>1?t.querySelector("."+f).style.transform.split(",")[1].trim():"0px)";t.scrollLeft<s.parent.scrollerBrowserLimit&&(sf.base.setStyleAttribute(t.querySelector("."+f),{transform:"translate("+a+"px,"+l}),sf.base.setStyleAttribute(e.querySelector("."+f),{transform:"translate("+a+"px,0px)"}));var d=s.parent.scrollPosObject.horizontalSection>r?-(s.parent.scrollPosObject.horizontalSection-r):r+e.offsetWidth-(s.parent.scrollPosObject.horizontalSection+t.querySelector("."+f).offsetWidth),h=Math.ceil(s.parent.scrollPosObject.horizontalSection/s.parent.horizontalScrollScale)<s.parent.scrollerBrowserLimit;if(s.parent.scrollPosObject.horizontalSection>r||d>1&&h){r>e.clientWidth?(s.parent.scrollPosObject.left<1&&(s.parent.scrollPosObject.left=e.clientWidth),s.parent.scrollPosObject.left=s.parent.scrollPosObject.left-50,d=s.parent.scrollPosObject.horizontalSection>r?d-s.parent.scrollPosObject.left:d+s.parent.scrollPosObject.left):d=-s.parent.scrollPosObject.horizontalSection,a=-(r-(s.parent.scrollPosObject.horizontalSection+d)-t.parentElement.parentElement.querySelector(".e-movablescrollbar").scrollLeft);var c=s.parent.gridSettings.columnWidth*s.parent.scrollPageInfo.columnCount;c>s.parent.scrollerBrowserLimit&&(s.parent.horizontalScrollScale=c/s.parent.scrollerBrowserLimit,c=s.parent.scrollerBrowserLimit),a>c&&a>r&&(a=r,d=0),sf.base.setStyleAttribute(t.querySelector("."+f),{transform:"translate("+a+"px,"+l}),sf.base.setStyleAttribute(e.querySelector("."+f),{transform:"translate("+a+"px,0px)"}),s.parent.scrollPosObject.horizontalSection=s.parent.scrollPosObject.horizontalSection+d}var p=o.scrollWidth-(o.scrollLeft+o.offsetWidth);if(p<=0){var u=t.querySelector(".e-virtualtrack");u.style.display="none";var m=t.scrollWidth-(t.scrollLeft+t.offsetWidth);u.style.display="";var g=t.scrollWidth-(t.scrollLeft+t.offsetWidth);s.parent.scrollPosObject.horizontalSection-=m>p?m:-g,a=o.scrollLeft>s.parent.scrollerBrowserLimit?Number(t.querySelector("."+f).style.transform.split(",")[0].split("px")[0].trim()):-(o.scrollLeft*s.parent.horizontalScrollScale-s.parent.scrollPosObject.horizontalSection-o.scrollLeft),sf.base.setStyleAttribute(t.querySelector("."+f),{transform:"translate("+a+"px,"+l}),sf.base.setStyleAttribute(e.querySelector("."+f),{transform:"translate("+a+"px,0px)"})}s.previousValues.left=r,s.frozenPreviousValues.left=r,s.eventType="",e.scrollLeft=t.scrollLeft}}},e.prototype.onVerticalScroll=function(e,t){var i,n=this;return function(s){var o=t.parentElement.scrollTop*n.parent.verticalScrollScale;if("wheel"===s.type||"touchmove"===s.type||"wheel"===n.eventType||"touchmove"===n.eventType||"keyup"===s.type||"keydown"===s.type){n.parent.isAdaptive||t.parentElement.parentElement.querySelector(".e-movablescrollbar");clearTimeout(i),i=setTimeout((function(){n.update(null,t,t.parentElement.scrollTop*n.parent.verticalScrollScale,t.scrollLeft*n.parent.horizontalScrollScale,s)}),300)}if(n.previousValues.top!==o){n.scrollDirection=n.direction="vertical";var r=-(o-n.parent.scrollPosObject.verticalSection-t.parentElement.scrollTop),a=t.querySelector("."+f).style.transform.split(",")[0].trim();r>n.virtualDiv.clientHeight&&(r=n.virtualDiv.clientHeight),t.parentElement.scrollTop<n.parent.scrollerBrowserLimit&&(sf.base.setStyleAttribute(e.querySelector("."+f),{transform:"translate(0px,"+r+"px)"}),sf.base.setStyleAttribute(t.querySelector("."+f),{transform:a+","+r+"px)"}));var l=n.parent.scrollPosObject.verticalSection>o?-(n.parent.scrollPosObject.verticalSection-o):o+e.parentElement.clientHeight-(n.parent.scrollPosObject.verticalSection+e.querySelector("."+f).offsetHeight),d=Math.ceil(n.parent.scrollPosObject.verticalSection/n.parent.verticalScrollScale)<n.parent.scrollerBrowserLimit;if(n.parent.scrollPosObject.verticalSection>o||l>1&&d){o>e.parentElement.clientHeight?(n.parent.scrollPosObject.top<1&&(n.parent.scrollPosObject.top=e.parentElement.clientHeight),n.parent.scrollPosObject.top=n.parent.scrollPosObject.top-50,l=n.parent.scrollPosObject.verticalSection>o?l-n.parent.scrollPosObject.top:l+n.parent.scrollPosObject.top):l=-n.parent.scrollPosObject.verticalSection;var h=n.parent.element.querySelector(".e-movablecontent").querySelector("."+f);r=-(o-(n.parent.scrollPosObject.verticalSection+l)-t.parentElement.scrollTop);var c=n.parent.gridSettings.rowHeight*n.parent.scrollPageInfo.rowCount+.1-h.clientHeight;c>n.parent.scrollerBrowserLimit&&(n.parent.verticalScrollScale=c/n.parent.scrollerBrowserLimit,c=n.parent.scrollerBrowserLimit),r>c&&r>o&&(r=o,l=0),sf.base.setStyleAttribute(e.querySelector("."+f),{transform:"translate(0px,"+r+"px)"}),sf.base.setStyleAttribute(t.querySelector("."+f),{transform:a+","+r+"px)"}),n.parent.scrollPosObject.verticalSection=n.parent.scrollPosObject.verticalSection+l}n.previousValues.top=o,n.frozenPreviousValues.top=o,n.eventType=""}}},e.prototype.updateScrollInfo=function(e,t,i){if(this.parent.options.enableVirtualization){e.querySelector(".e-movablecontent")&&!e.querySelector(".e-movablecontent").querySelector(".e-virtualtrack")&&(this.virtualDiv=sf.base.createElement("div",{className:"e-virtualtrack"}),e.querySelector(".e-movablecontent").appendChild(this.virtualDiv)),e.querySelector(".e-movableheader")&&!e.querySelector(".e-movableheader").querySelector(".e-virtualtrack")?(this.virtualHeaderDiv=sf.base.createElement("div",{className:"e-virtualtrack"}),e.querySelector(".e-movableheader").appendChild(this.virtualHeaderDiv)):this.virtualHeaderDiv=e.querySelector(".e-movableheader").querySelector(".e-virtualtrack");var n=e.querySelector(".e-movablecontent").querySelector("."+f),s=this.parent.gridSettings.rowHeight*i+.1-n.clientHeight;s>this.parent.scrollerBrowserLimit&&(this.parent.verticalScrollScale=s/this.parent.scrollerBrowserLimit,s=this.parent.scrollerBrowserLimit);var o=this.parent.gridSettings.columnWidth*t;o>this.parent.scrollerBrowserLimit&&(this.parent.horizontalScrollScale=o/this.parent.scrollerBrowserLimit,o=this.parent.scrollerBrowserLimit),sf.base.setStyleAttribute(this.virtualDiv,{height:(s>.1?s:.1)+"px",width:(o>.1?o:.1)+"px"}),sf.base.setStyleAttribute(this.virtualHeaderDiv,{height:0,width:(o>.1?o:.1)+"px"});var r=e.querySelector(".e-movablecontent"),a=e.querySelector(".e-frozencontent"),l=e.querySelector(".e-movableheader");this.parent.isAdaptive&&(r.parentElement.parentElement.querySelector(".e-movablescrollbar").children[0].style.minHeight="1px",r.parentElement.parentElement.querySelector(".e-movablescrollbar").style.minHeight="1px");var d=this.parent.isAdaptive?r:r.parentElement.parentElement.querySelector(".e-movablescrollbar"),h=r.parentElement.scrollTop>this.parent.scrollerBrowserLimit?r.querySelector("."+f).style.transform.split(",")[1].trim():-(r.parentElement.scrollTop*this.parent.verticalScrollScale-this.parent.scrollPosObject.verticalSection-r.parentElement.scrollTop)+"px)",c=d.scrollLeft>this.parent.scrollerBrowserLimit?r.querySelector("."+f).style.transform.split(",")[0].trim()+",":"translate("+-(d.scrollLeft*this.parent.horizontalScrollScale-this.parent.scrollPosObject.horizontalSection-d.scrollLeft)+"px,";sf.base.setStyleAttribute(a.querySelector("."+f),{transform:"translate(0px,"+h}),sf.base.setStyleAttribute(r.querySelector("."+f),{transform:c+h}),sf.base.setStyleAttribute(l.querySelector("."+f),{transform:c+0+"px)"}),e.querySelector(".e-movablechild").style.width=o+(r.parentElement.offsetWidth-r.parentElement.clientWidth)+"px";var p="pivot"===this.parent.options.dataType&&"column"===this.parent.options.dataSourceSettings.valueAxis?this.parent.options.dataSourceSettings.values.length:1,u=this.parent.pageSettings.columnSize*p*this.parent.options.gridSettings.columnWidth,m=d.scrollWidth-(d.scrollLeft+d.offsetWidth);if(this.parent&&u>0&&m<=u&&d.scrollLeft>0){this.virtualDiv.style.display="none";var g=r.scrollWidth-(r.scrollLeft+r.offsetWidth);this.virtualDiv.style.display="";var v=r.scrollWidth-(r.scrollLeft+r.offsetWidth);this.parent.scrollPosObject.horizontalSection-=m<=0?g>m?g:-v:v===g?g-m:g<v&&(m===v||m>g)?-(v-g):0,c=d.scrollLeft>this.parent.scrollerBrowserLimit?r.querySelector("."+f).style.transform.split(",")[0].trim()+",":"translate("+-(d.scrollLeft*this.parent.horizontalScrollScale-this.parent.scrollPosObject.horizontalSection-d.scrollLeft)+"px,",sf.base.setStyleAttribute(r.querySelector(".e-table"),{transform:c+h}),sf.base.setStyleAttribute(l.querySelector(".e-table"),{transform:c+0+"px)"})}if(sf.base.closest(e.querySelector(".e-movablechild"),".e-scrollbar")){var b=e.querySelector(".e-movablechild").style.width;sf.base.closest(e.querySelector(".e-movablechild"),".e-scrollbar").style.display=b&&Number(b.replace("px",""))>0?"flex":"none"}this.parent.internalGrid&&this.parent.internalGrid.options&&"auto"!==this.parent.internalGrid.options.height||this.parent.internalGrid.element&&"auto"!==this.parent.internalGrid.element.style.height?(a.style.height=(this.virtualDiv.offsetHeight+n.clientHeight).toString()+"px",r.style.height=(this.virtualDiv.offsetHeight+n.clientHeight).toString()+"px"):(a.style.height=e.querySelector(".e-frozencontent ."+f).toString()+"px",r.style.height=e.querySelector(".e-frozencontent ."+f).toString()+"px")}},e.prototype.destroy=function(){this.unWireEvents()},e}(),A=function(){function e(e){this.keyConfigs={escape:"escape"},this.parent=e,this.event=void 0,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex;var t=document.getElementById(this.parent.element.id+"_drillthrough");this.drillThroughKeyboardModule=new sf.base.KeyboardEvents(t,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"escape":this.processClose(e)}},e.prototype.processClose=function(e){var t=e.target;if(t&&sf.base.closest(t,"."+l+"."+d)){var i=sf.base.closest(t,"."+l+"."+d).blazor__instance,n=this;if(i&&!i.closeOnEscape){var s=i.element.getAttribute("data-fieldName");i.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type}).then((function(){if(n.parent.parentElement)for(var t=0,i=[].slice.call(n.parent.parentElement.querySelectorAll(".e-pivot-button"));t<i.length;t++){var o=i[t];if(o.getAttribute("data-uid")===s){o.focus();break}}e.preventDefault()}))}else n.parent.closeDialog(sf.base.closest(t,"."+l+"."+d),e)}},e.prototype.destroy=function(){this.drillThroughKeyboardModule&&!this.drillThroughKeyboardModule.isDestroyed&&this.drillThroughKeyboardModule.destroy()},e}(),N=function(){function t(e,t,i,n){this.scrollPageInfo={rowCount:0,columnCount:0,colFirstLvl:0,rowFirstLvl:0,colStartPos:0,rowStartPos:0},this.verticalScrollScale=1,this.horizontalScrollScale=1,this.scrollerBrowserLimit=8e6,this.scrollPosObject={vertical:0,horizontal:0,verticalSection:0,horizontalSection:0,top:0,left:0,scrollDirection:{direction:"",position:0}},window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=n,this.dataId=e,window.sfBlazor.setCompInstance(this),this.getOptions(t,i),this.initModules()}return t.prototype.getOptions=function(e,t){this.element=e,this.options=t,this.parentElement=e,this.isAdaptive=sf.base.Browser.isDevice,this.internalGrid=t.internalGrid?window.sfBlazor.getCompInstance(t.internalGrid):this.internalGrid,this.pivotFieldListModule=t.fieldListModule?window.sfBlazor.getCompInstance(t.fieldListModule):this.pivotFieldListModule,this.fieldList=t.fieldList?t.fieldList:this.fieldList,this.dataSourceSettings=t.dataSourceSettings,this.gridSettings=t.gridSettings,this.editSettings=t.editSettings,this.displayOptions=t.displayOptions,this.enableValueSorting=t.enableValueSorting,this.currentView="Both"===this.displayOptions.view?this.displayOptions.primary:this.displayOptions.view,this.groupingBarSettings=this.options.groupingBarsettings,this.pageSettings=this.options.pageSettings,this.options.scrollPageInfo&&this.getScrollInfo(this.options.scrollPageInfo)},t.prototype.initModules=function(){this.options.showGroupingBar&&(this.groupingBarModule=new v(this)),this.options.showToolbar&&(this.toolbarModule=new y(this)),this.options.allowCalculatedField&&(this.calculatedFieldModule=new b(this)),this.options.enableVirtualization&&(this.virtualScrollModule=new T(this)),this.gridSettings.allowSelection&&(this.selectionModule=new O(this)),this.keyboardModule=new x(this),this.commonActionModule=new E(this),this.contentReady(),this.unWireEvents(),this.wireEvents()},t.prototype.updateModuleProperties=function(){this.options.showGroupingBar&&(this.groupingBarModule?this.groupingBarModule.parent=this.pivotButtonModule.parent=this:this.groupingBarModule=new v(this)),this.options.showToolbar&&(this.toolbarModule?this.toolbarModule.parent=this:this.toolbarModule=new y(this)),this.options.allowCalculatedField&&(this.calculatedFieldModule?this.calculatedFieldModule.parent=this:this.calculatedFieldModule=new b(this)),this.gridSettings.allowSelection&&(this.selectionModule?this.selectionModule.parent=this:this.selectionModule=new O(this)),this.options.enableVirtualization&&(this.virtualScrollModule?this.virtualScrollModule.parent=this:this.virtualScrollModule=new T(this)),this.editSettings.allowEditing&&this.drillThroughModule&&(this.drillThroughModule.parent=this),this.keyboardModule.parent=this.commonActionModule.parent=this.commonActionModule.keyboardModule.parent=this},t.prototype.getChartHeight=function(e){var t;return this.element.querySelector(".e-pivotchart")&&this.element.querySelector(".e-chart-grouping-bar")&&(this.element.querySelector(".e-chart-grouping-bar").style.width=this.element.querySelector(".e-pivotchart").style.width,e=this.element.querySelector(".e-chart-grouping-bar").clientHeight),this.options.showToolbar&&this.options.showGroupingBar?t=(e-(this.element.querySelector(".e-pivot-toolbar")?this.element.querySelector(".e-pivot-toolbar").clientHeight:42)-(this.element.querySelector(".e-chart-grouping-bar")?this.element.querySelector(".e-chart-grouping-bar").clientHeight:76)).toString():this.options.showToolbar?t=(e-(this.element.querySelector(".e-pivot-toolbar")?this.element.querySelector(".e-pivot-toolbar").clientHeight:42)).toString():this.options.showGroupingBar&&(t=(e-(this.element.querySelector(".e-chart-grouping-bar")?this.element.querySelector(".e-chart-grouping-bar").clientHeight:76)).toString()),t},t.prototype.contentReady=function(){if(this.updateModuleProperties(),this.options.renderGrid){if(this.options.showGroupingBar&&this.groupingBarModule)this.groupingBarModule.updatePivotButtons(),this.groupingBarModule.refreshUI();else if(this.element&&this.element.querySelectorAll(".e-axis-container").length>0)for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-axis-container"));e<t.length;e++){var i=t[e];sf.base.closest(i,".e-pivotfieldlist-container")||sf.base.remove(i)}this.options.enableVirtualization&&this.virtualScrollModule&&this.virtualScrollModule.addInternalEvents(),this.gridSettings.allowSelection&&this.selectionModule&&this.selectionModule.addInternalEvents()}},t.prototype.getSelectedCellDom=function(e){return e?JSON.stringify(window.sfBlazor.getDomObject("currentCell",e)):null},t.prototype.selectedCell=function(e,t,i){return i?this.getSelectedCellDom(this.element.querySelector("."+(0===e?"e-frozenheader":"e-movableheader")+' th[index="'+t+'"][aria-colindex="'+e+'"]')):this.getSelectedCellDom(this.element.querySelector("."+(0===e?"e-frozencontent":"e-movablecontent")+' td[index="'+t+'"][aria-colindex="'+e+'"]'))},t.prototype.hyperlinkCellclick=function(e,t){if(null!=e){e.currentCell=window.sfBlazor.getElementByXpath(t);var i=e.currentCell.getAttribute("data-url")?e.currentCell.getAttribute("data-url"):e.currentCell.querySelector("a").getAttribute("data-url");window.open(i)}},t.prototype.createSheet=function(e,t,i){var n=".format"+t+i;this.createStyleSheet().insertRule(n+", "+n+" .e-cellvalue{"+e+"}",0)},t.prototype.getScrollInfo=function(e){e&&(this.scrollPageInfo.colFirstLvl=e.colFirstLvl,this.scrollPageInfo.rowFirstLvl=e.rowFirstLvl,this.scrollPageInfo.columnCount=e.columnCount,this.scrollPageInfo.rowCount=e.rowCount,this.scrollPageInfo.colStartPos=e.colStartPos,this.scrollPageInfo.rowStartPos=e.rowStartPos)},t.prototype.exportDocument=function(e,t){if(navigator.msSaveBlob){for(var i=window.atob(t),n=new Uint8Array(i.length),s=0;s<i.length;s++)n[s]=i.charCodeAt(s);var o=new Blob([n.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(o,e)}else{var r=document.createElement("a");r.download=e,r.href="data:application/octet-stream;base64,"+t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},t.prototype.createStyleSheet=function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet},t.prototype.getSelectedCells=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll("."+p+",."+u));e<t.length;e++){var i=t[e],n=Number(i.getAttribute("aria-colindex")),s=Number(i.getAttribute("index")),o={};if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(s))return o.index=s,o["aria-colindex"]=n,JSON.stringify(o)}return JSON.stringify([])},t.prototype.onContextMenuOpen=function(){if(this.options.allowGrouping&&this.lastCellClicked){var e=sf.base.closest(this.lastCellClicked,"td."+h+",th."+c);if(this.lastCellClicked=void 0,e&&!e.classList.contains("e-valuesheader")){var t=Number(e.getAttribute("aria-colindex")),i=Number(e.getAttribute("index")),n={};if(!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i))return n.index=i,n["aria-colindex"]=t,JSON.stringify(n)}return null}return null},t.prototype.mouseRclickHandler=function(e){this.lastCellClicked=e.target},t.prototype.mouseClickHandler=function(e){this.element.querySelectorAll(".e-btn-focused").length>0&&sf.base.removeClass(this.element.querySelectorAll(".e-btn-focused"),"e-btn-focused"),this.element.querySelector("."+o)&&this.element.querySelector("."+o).querySelectorAll(".e-menu-item.e-focused").length>0&&sf.base.removeClass(this.element.querySelector("."+o).querySelectorAll(".e-menu-item.e-focused"),"e-focused");var t=e.target;if(this.enableValueSorting&&"pivot"===this.options.dataType&&(t.classList.contains("e-sortfilterdiv")||t.classList.contains("e-stackedheadertext")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headertext")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headercelldiv")||t.classList.contains("e-headercell")||t.classList.contains("e-cellvalue")||t.classList.contains(c)||t.classList.contains(h)||t.classList.contains("e-pivotcell-container"))){if((s=sf.base.closest(t,"td."+h+",th."+c))&&(sf.base.closest(s,".e-movableheader")&&"column"===this.dataSourceSettings.valueAxis||sf.base.closest(s,"tr.e-row")&&"row"===this.dataSourceSettings.valueAxis&&(s.classList.contains(h)||s.classList.contains("e-stot")))){if(this.enableValueSorting){var i=Number(s.getAttribute("aria-colindex")),n=Number(s.getAttribute("index"));"column"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&(i=Number(s.getAttribute("aria-colindex"))+Number(s.getAttribute("aria-colspan"))-1),this.dotNetRef.invokeMethodAsync("MouseClickHandler",n,i)}e.preventDefault()}}else if(!this.gridSettings.allowSelection){var s;if(null!==(s=sf.base.closest(t,"td."+h+",th."+c+",td.e-rowcell"))){i=Number(s.getAttribute("aria-colindex")),n=Number(s.getAttribute("index"));t.classList.contains("e-expand")||t.classList.contains("e-collapse")||this.dotNetRef.invokeMethodAsync("CellClickedHandler",n,i,e)}}},t.prototype.getHeightAsNumber=function(){var e;return isNaN(this.options.height)?this.options.height.toString().indexOf("%")>-1?e=parseFloat(this.options.height.toString())/100*this.element.offsetHeight:this.options.height.toString().indexOf("px")>-1?e=Number(this.options.height.toString().split("px")[0]):"auto"===this.options.height&&(e=this.element.offsetHeight):e=Number(this.options.height),e<this.getminHeightAsNumber()&&(e=this.getminHeightAsNumber()),e},t.prototype.getminHeightAsNumber=function(){var e;return isNaN(this.options.minHeight)?this.options.minHeight.toString().indexOf("%")>-1?e=parseFloat(this.options.minHeight.toString())/100*this.element.offsetHeight:this.options.minHeight.toString().indexOf("px")>-1?e=Number(this.options.minHeight.toString().split("px")[0]):"auto"===this.options.minHeight&&(e=this.element.offsetHeight):e=300,e},t.prototype.calculateGridHeight=function(e,t,i){var n=this.options.height,s=this.getHeightAsNumber(),r=t*this.gridSettings.rowHeight;isNaN(s)&&(s=s>this.getminHeightAsNumber()?s:this.getminHeightAsNumber());var a=this.element.getBoundingClientRect(),l={width:a.width.toString(),height:a.height.toString(),gridHeight:n?n.toString():n};if("auto"===this.gridSettings.height&&s&&this.element.querySelector(".e-gridheader")){if(n=s-(i*this.gridSettings.rowHeight+(this.element.querySelector(".e-gridheader").offsetHeight-this.element.querySelector(".e-headercontent").offsetHeight)+(this.element.querySelector(".e-grouping-bar")?this.element.querySelector(".e-grouping-bar").offsetHeight:0)+(this.element.querySelector("."+o)?this.element.querySelector("."+o).clientHeight:0))-1,e){var d=this.internalGrid&&this.internalGrid.options&&!isNaN(this.internalGrid.options.height)?Number(this.internalGrid.options.height):this.element.querySelector(".e-movablecontent").offsetHeight,h=this.element.querySelector(".e-movablecontent ."+f).offsetWidth,c=this.element.querySelector(".e-movablecontent").offsetWidth<h;if(n>=r&&(!c||n>=d)&&!(d<r)&&!!!(c&&n-r<18))return l.gridHeight="auto",JSON.stringify(l)}else if(n>t*this.gridSettings.rowHeight)return l.gridHeight="auto",JSON.stringify(l)}else n=this.gridSettings.height;return l.gridHeight=n<this.gridSettings.rowHeight?this.gridSettings.rowHeight.toString():r<n?r.toString():n.toString(),JSON.stringify(l)},t.prototype.updateGridUI=function(e,t,i,n){if(t&&this.getOptions(e,t),this.options.showGroupingBar&&this.groupingBarModule)this.groupingBarModule.refreshUI();else{var s=e.querySelector(".e-frozenheader").querySelector(".e-columnheader");s&&s.querySelector(".e-rhandler")&&(s.style.height=s.querySelector(".e-rhandler").style.height="auto",s.style.height=s.querySelector(".e-rhandler").style.height=e.querySelector(".e-headercontent").offsetHeight+"px")}if(e.querySelector(".e-movableheader ."+f)&&"0px"===e.querySelector(".e-movableheader ."+f).style.width&&(e.querySelector(".e-movablecontent ."+f).style.width=e.querySelector(".e-movableheader ."+f).style.width=""),e.querySelector(".e-movableheader ."+f+" th.e-firstcell.e-lastcell")&&e.querySelector(".e-movableheader ."+f+" th.e-firstcell.e-lastcell").offsetWidth<=0){var o=e.querySelector(".e-movableheader ."+f+" colgroup").children,r=e.querySelector(".e-movablecontent ."+f+" colgroup").children,a=sf.base.formatUnit(this.options.gridSettings.columnWidth);o.length>1&&"auto"===o[o.length-1].style.width&&(o[o.length-1].style.width=a),r.length>1&&"auto"===r[r.length-1].style.width&&(r[r.length-1].style.width=a)}t&&this.virtualScrollModule&&this.virtualScrollModule.updateScrollInfo(e,i,n);var l=e.querySelector(".e-gridcontent .e-content");!l||l.scrollHeight>l.clientHeight||(sf.base.setStyleAttribute(l,{overflow:"hidden auto"}),e.querySelector(".e-gridheader")&&sf.base.setStyleAttribute(e.querySelector(".e-gridheader"),this.options.enableRtl?{paddingLeft:""}:{paddingRight:""}),e.querySelector(".e-headercontent")&&sf.base.setStyleAttribute(e.querySelector(".e-headercontent"),this.options.enableRtl?{borderLeftWidth:""}:{borderRightWidth:""}))},t.prototype.updateView=function(e,t){e&&(this.displayOptions=JSON.parse(t),"Both"===this.displayOptions.view&&"Table"===this.displayOptions.primary?(this.element.querySelector(".e-pivotchart").style.display="none",sf.base.select("#"+this.element.id+"_grid",this.element).style.display="",this.options.showGroupingBar&&this.element.querySelector(".e-pivotchart")&&this.element.querySelector(".e-chart-grouping-bar")&&(this.element.querySelector(".e-chart-grouping-bar").style.display="none",this.element.querySelector(".e-pivot-grouping-bar").style.display="")):"Both"===this.displayOptions.view&&"Chart"===this.displayOptions.primary&&(this.element.querySelector(".e-pivotchart").style.display="",sf.base.select("#"+this.element.id+"_grid",this.element).style.display="none",this.options.showGroupingBar&&this.element.querySelector(".e-pivot-grouping-bar")&&(this.element.querySelector(".e-pivot-grouping-bar").style.display="none",this.element.querySelector(".e-chart-grouping-bar").style.display="")))},t.prototype.updateGridSettings=function(e,t,i){e&&null!==t&&(this.gridSettings=JSON.parse(t)),i&&this.selectionModule&&this.selectionModule.clearSelection()},t.prototype.getClientWidth=function(e,t){return e&&null!==t?document.getElementById(t).clientWidth:null},t.prototype.getTableCellNode=function(e,t,i){if(e){var n=document.elementFromPoint(i,t);if(n){var s=Number(n.getAttribute("aria-colindex")),o=Number(n.getAttribute("index")),r={};if(s&&o)return r.index=o,r["aria-colindex"]=s,JSON.stringify(r)}}return null},t.prototype.updateColorPickerUI=function(t){if(t){for(var i=[].slice.call(t.querySelectorAll(".e-colorpicker-container.e-format-font-color-picker-container")),n=[].slice.call(t.querySelectorAll(".e-colorpicker-container.e-format-back-color-picker-container")),s=0,o=i;s<o.length;s++){var r=o[s];sf.base.addClass([r],["e-format-color-picker","e-format-font-color-picker"]),sf.base.addClass([r.querySelector(".e-colorpicker")],"e-format-font-color"),sf.base.addClass([r.querySelector(".e-selected-color")],e)}for(var a=0,l=n;a<l.length;a++){r=l[a];sf.base.addClass([r],"e-format-color-picker"),sf.base.addClass([r.querySelector(".e-colorpicker")],"e-format-back-color"),sf.base.addClass([r.querySelector(".e-selected-color")],e)}}},t.prototype.onWindowResize=function(){var e=this;this.isDestroyed||(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout((function(){var t=e.element.getBoundingClientRect();e.dotNetRef.invokeMethodAsync("LayoutRefresh",t.width,t.height)}),500))},t.prototype.drillthroughIntialize=function(e){e&&this.editSettings.allowEditing&&(this.drillThroughModule=new A(this))},t.prototype.closeDialog=function(e,t){return e.querySelector("."+m)?(e.querySelector("."+m).click(),void t.preventDefault()):e.querySelector(".e-cancel-btn")?(e.querySelector(".e-cancel-btn").click(),void t.preventDefault()):void 0},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler,this),sf.base.EventHandler.add(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler,this),window.addEventListener("resize",this.onWindowResize.bind(this),!0)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler),sf.base.EventHandler.remove(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler),window.removeEventListener("resize",this.onWindowResize.bind(this),!0)},t.prototype.destroy=function(e){this.unWireEvents(),this.keyboardModule.destroy(),this.commonActionModule.destroy(),this.options.showGroupingBar&&(this.groupingBarModule.destroy(),this.pivotButtonModule.destroy()),this.options.showFieldList&&this.pivotFieldListModule&&!this.pivotFieldListModule.isDestroyed&&this.pivotFieldListModule.destroy(e),this.options.enableVirtualization&&this.virtualScrollModule&&this.virtualScrollModule.destroy(),this.gridSettings.allowSelection&&this.selectionModule&&this.selectionModule.destroy(),this.editSettings.allowEditing&&this.drillThroughModule&&this.drillThroughModule.destroy(),this.isDestroyed=e},t}();return{initialize:function(e,t,i,n){sf.base.enableBlazorMode(),new N(e,t,i,n)},initializeFieldList:function(e,t,i,n){sf.base.enableBlazorMode(),new C(e,t,i,n)},contentReady:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&(n.options=t,n.getOptions(n.element,t),i||n.contentReady())},getChartHeight:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.getChartHeight(t)},onShowFieldList:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.onShowFieldList(i.element,document.getElementById(t))},removeFieldListIcon:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.removeFieldListIcon(t.element)},updateFieldListIcons:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.treeRendererModule.updateFieldListIcons(t,i)},setPivotButtonDraggable:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.pivotButtonModule&&(i.options=t,i.getOptions(i.element,t),i.pivotButtonModule.createPivotButtonDrop(),i.pivotButtonModule.setPivotButtonDrag())},isFullRowElement:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);return n&&n.element?n.commonActionModule.isFullRowElement(t,i):JSON.stringify(!1)},updateActiveNode:function(e,t,i){var n=!1,s=window.sfBlazor.getCompInstance(e);return s&&s.element&&(n=s.commonActionModule.updateActiveNode(document.getElementById(t),i)),JSON.stringify(n)},updateSelectedNodes:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.updateSelectedNodes(window.sfBlazor.getElementByXpath(t),i)},updateFieldList:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.updateFieldList(document.getElementById(t))},renderToolbar:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.toolbarModule.renderToolbar()},focusToolBar:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.toolbarModule.focusToolBar()},getButtonPosition:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);return n&&n.element?JSON.stringify(n.pivotButtonModule.getButtonPosition(window.sfBlazor.getElementByXpath(t),i)):null},selectInputRange:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.toolbarModule.selectInputRange(document.getElementById(t))},copyMdxQuery:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.toolbarModule.copyMdxQuery(document.getElementById(t))},validateInputs:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.commonActionModule.validateInputs(t)},selectedCell:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element)return s.selectedCell(t,i,n)},hyperlinkCellclick:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.hyperlinkCellclick(JSON.parse(t),JSON.parse(i))},updateEditOptions:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.calculatedFieldModule.updateEditOptions(t)},accordionClick:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element)return s.calculatedFieldModule.accordionClick(t,i,n)},getAccordionValue:function(e){var t=window.sfBlazor.getCompInstance(e);if(t&&t.element)return t.calculatedFieldModule.getAccordionValue()},updateAccordionLabel:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.calculatedFieldModule.updateAccordionLabel(t)},getNodeLocation:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element)return n.calculatedFieldModule.getNodeLocation(document.getElementById(t),i)},getIconInfo:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element)return n.calculatedFieldModule.getIconInfo(t,i)},emptyFieldName:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.calculatedFieldModule.emptyFieldName(t.element.id)},updateCalculatedFields:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.calculatedFieldModule.editCalculatedFieldInfo(t,i,n,s)},updateCalculatedFieldExpandIcons:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);return n&&n.element?n.calculatedFieldModule.updateNodeExpandIcons(document.getElementById(t),i):JSON.stringify(!1)},createFormulaDroppable:function(e,t,i,n,s,o,r,a){var l=window.sfBlazor.getCompInstance(e);l&&l.element&&l.calculatedFieldModule.createFormulaDroppable(t,i,n,s,o,r,a)},createSheet:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.createSheet(t,i,n)},updateScrollInfo:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.virtualScrollModule.updateScrollInfo(n.element,t,i)},getScrollInfo:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.getScrollInfo(t)},exportDocument:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.exportDocument(t,i)},calculateGridHeight:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);return s&&s.element?s.calculateGridHeight(t,i,n):null},onContextMenuOpen:function(e){var t=window.sfBlazor.getCompInstance(e);return t&&t.element?t.onContextMenuOpen():null},getSelectedCells:function(e){var t=window.sfBlazor.getCompInstance(e);return t&&t.element?t.getSelectedCells():null},updateGridUI:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.updateGridUI(s.element,t,i,n)},updateView:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.updateView(i.element,t)},updateGridSettings:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.updateGridSettings(n.element,t,i)},getClientWidth:function(e,t){var i=window.sfBlazor.getCompInstance(e);return i&&i.element?i.getClientWidth(i.element,t):null},getTableCellNode:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);return n&&n.element?n.getTableCellNode(n.element,t,i):null},updateColorPickerUI:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(i&&i.element)return i.updateColorPickerUI(document.getElementById(t))},drillthroughIntialize:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.drillthroughIntialize(t.element)},getElementInfo:function(e){var t=window.sfBlazor.getCompInstance(e);if(t&&t.element){var i=t.element.getBoundingClientRect(),n={};return n.width=i.width,n.height=i.height,JSON.stringify(n)}return null},getAggregateIcoPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);return i&&i.element?i.commonActionModule.getAggregateIcoPosition(t):null},destroy:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.destroy(t)}}}()},"./modules/sf-progressbar.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Progressbar=function(){"use strict";var e=function(){function e(e,t,i){window.sfBlazor=window.sfBlazor,this.resizeTo=0,this.element=t,this.dotNetRef=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.wireEvents=function(){window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this))},e.prototype.unWireEvents=function(){window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this)),this.element=null,this.dotNetRef=null},e.prototype.resize=function(){var e=this;(this.dotNetRef&&!this.cancelResize||this.lineardata&&this.lineardata.isActive||this.circularData&&this.circularData.isActive)&&(this.resizeTo&&clearTimeout(this.resizeTo),sf.base.isNullOrUndefined(this.dotNetRef)||(this.resizeTo=window.setTimeout((function(){e.dotNetRef.invokeMethodAsync("TriggerResize")}),500)))},e.prototype.getPathArc=function(e,t,i,n,s,o,r){var a=this.degreeToLocation(e,t,i,n),l=this.degreeToLocation(e,t,i,s),d="0",h=o?"0":"1";return d=o?(n>=s?n:n+360)-s<=180?"0":"1":(s>=n?s:s+360)-n<=180?"0":"1",r?"M "+e+" "+t+" L "+a.x+" "+a.y+" A "+i+" "+i+"  0  "+d+" "+h+" "+l.x+" "+l.y+" Z":"M"+a.x+" "+a.y+"A"+i+" "+i+" 0 "+d+" "+h+" "+l.x+" "+l.y},e.prototype.degreeToLocation=function(e,t,i,n){var s=(n-90)*(Math.PI/180);return{x:e+i*Math.cos(s),y:t+i*Math.sin(s)}},e.prototype.effect=function(e,t,i,n,s){return(s?i:-i)*Math.cos(e/n*(Math.PI/2))+(t+(s?-i:i))},e.prototype.activeAnimate=function(e,t,i,n){var s=1-Math.pow(1-e,3);return t+(n?-s*i:s*i)},e.prototype.getPathLine=function(e,t){var i=t.enableRtl?"Round"===t.cornerRadius?e+t.rectWidth-.45*t.thickness:e+t.rectWidth:"Round"===t.cornerRadius?e+.45*t.thickness:e,n=t.enableRtl?"Round"===t.cornerRadius&&t.progressWidth?i-t.progressWidth+.9*t.thickness:i-t.progressWidth:"Round"===t.cornerRadius&&t.progressWidth?i+t.progressWidth-.9*t.thickness:i+t.progressWidth;return"M"+i+" "+(t.rectX+t.rectHeight/2)+"L"+n+" "+(t.rectY+t.rectHeight/2)},e.prototype.circularAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathcircle"),n=0;i&&this.circularData&&(i.style.visibility="hidden",t.animate(i,{duration:this.circularData.duration,delay:this.circularData.delay,progress:function(t){if(e.cancelResize=!0,t.timeStamp>=t.delay){if(i.style.visibility="visible",e.circularData.isActive){n=e.activeAnimate(t.timeStamp/t.duration,e.circularData.startPos,e.circularData.endPos,e.circularData.enableRtl);var s=document.getElementById(e.element.id+"_CircularActiveProgress");s&&s.setAttribute("opacity",e.effect(t.timeStamp,.5,.5,t.duration,!0).toString())}else n=e.effect(t.timeStamp,e.circularData.startPos,e.circularData.endPos,t.duration,e.circularData.enableRtl);i.setAttribute("d",e.getPathArc(e.circularData.x,e.circularData.y,e.circularData.pathRadius,e.circularData.start,n%360,e.circularData.enableRtl,!0))}},end:function(){e.cancelResize=!1,i.setAttribute("d",e.getPathArc(e.circularData.x,e.circularData.y,e.circularData.pathRadius,e.circularData.start,e.circularData.progressEnd,e.circularData.enableRtl,!0)),e.circularData.isActive&&e.circularAnimation(),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},e.prototype.circularBufferAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathBuffercircle"),n=0;i&&this.circularBufferData&&(i.style.visibility="hidden",t.animate(i,{duration:this.circularBufferData.duration,delay:this.circularBufferData.delay,progress:function(t){e.cancelResize=!0,t.timeStamp>=t.delay&&(i.style.visibility="visible",n=e.effect(t.timeStamp,e.circularBufferData.startPos,e.circularBufferData.endPos,t.duration,e.circularBufferData.enableRtl),i.setAttribute("d",e.getPathArc(e.circularBufferData.x,e.circularBufferData.y,e.circularBufferData.pathRadius,e.circularBufferData.start,n%360,e.circularBufferData.enableRtl,!0)))},end:function(){e.cancelResize=!1,i.setAttribute("d",e.getPathArc(e.circularBufferData.x,e.circularBufferData.y,e.circularBufferData.pathRadius,e.circularBufferData.start,e.circularBufferData.progressEnd,e.circularBufferData.enableRtl,!0)),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},e.prototype.circularIndeterminateAnimation=function(e,t){var i=this;void 0===e&&(e=0),void 0===t&&(t=0);var n=document.getElementById(this.element.id+"_clippathcircle"),s=new sf.base.Animation({});n&&this.circularData&&(s.destroy(),s.animate(n,{duration:this.circularData.duration,delay:0,progress:function(){i.circularData&&i.circularData.enable&&i.circularData.isIndeterminate&&(n.style.visibility="visible",e+=i.circularData.enableRtl?-i.circularData.segmentValue:i.circularData.segmentValue,t+=i.circularData.enableRtl?-i.circularData.segmentValue:i.circularData.segmentValue,n.setAttribute("d",i.getPathArc(i.circularData.x,i.circularData.y,i.circularData.pathRadius,e%360,t%360,i.circularData.enableRtl,!i.circularData.enableProgressSegments)))},end:function(){i.circularData&&i.circularData.enable&&i.circularData.isIndeterminate&&i.circularIndeterminateAnimation(e,t)}}))},e.prototype.annotationAnimation=function(){var e,t,i=this,n=new sf.base.Animation({}),s=document.getElementById(this.element.id+"Annotation0").children[0];s&&s.children[0]&&"SPAN"===s.children[0].tagName&&(t=s.children[0]),t&&this.annotationData&&(e="Linear"===this.annotationData.type?document.getElementById(this.element.id+"_clippathrect"):document.getElementById(this.element.id+"_clippathcircle"),this.annotationData.isContent?t.innerHTML=this.annotationData.annotateValue+"%":e&&n.animate(e,{duration:this.annotationData.duration,delay:this.annotationData.delay,progress:function(e){i.cancelResize=!0;var n=i.effect(e.timeStamp,i.annotationData.startPos,i.annotationData.endPos,e.duration,!1),s=parseInt(((Math.round(n)-i.annotationData.start)/i.annotationData.totalAngle*100).toString(),10);t.innerHTML=s?s.toString()+"%":"0%"},end:function(){i.cancelResize=!1,t.innerHTML=i.annotationData.annotateValue+"%"}}))},e.prototype.labelAnimation=function(){var e,t=this;this.labelData&&(e="Linear"===this.labelData.type?document.getElementById(this.element.id+"_linearLabel"):document.getElementById(this.element.id+"_circularLabel"));var i=new sf.base.Animation({}),n=new sf.base.Animation({});e&&this.labelData&&!this.labelData.isStriped&&(e.style.visibility="hidden",i.animate(e,{duration:this.labelData.duration,delay:this.labelData.delay,progress:function(i){if(t.cancelResize=!0,"Linear"===t.labelData.type&&i.timeStamp>=i.delay&&""===t.labelData.labelText){e.style.visibility="visible";var n=t.effect(i.timeStamp,t.labelData.progressPos,Math.round(t.labelData.end-t.labelData.progressPos),i.duration,!1),s=parseInt((n/t.labelData.width*100).toString(),10);if(e.innerHTML=s.toString()+"%","Far"===t.labelData.labelPos||"Center"===t.labelData.labelPos){var o=t.effect(i.timeStamp,t.labelData.startPos,t.labelData.endPos-(t.labelData.enableRtl?0:t.labelData.startPos),i.duration,t.labelData.enableRtl);e.setAttribute("x",o.toString())}}else if("Circular"===t.labelData.type&&""===t.labelData.labelText){e.style.visibility="visible";n=t.effect(i.timeStamp,t.labelData.start,t.labelData.end-t.labelData.start,i.duration,!1),s=parseInt((n/t.labelData.totalAngle*100).toString(),10);e.innerHTML=s.toString()+"%"}},end:function(){t.cancelResize=!1,e&&""===t.labelData.labelText?(e.style.visibility="visible",e.innerHTML=t.labelData.text,e.setAttribute("x",t.labelData.x.toString())):n.animate(e,{progress:function(i){e.style.visibility="visible";var n=t.effect(i.timeStamp,0,1,i.duration,!1);e.setAttribute("opacity",n.toString())},end:function(){e.setAttribute("opacity","1")}})}}))},e.prototype.stripeAnimation=function(e){var t=this;void 0===e&&(e=0);var i=new sf.base.Animation({}),n=document.getElementById(this.element.id+"_LinearStriped");n&&this.stripeData&&i.animate(n,{duration:this.stripeData.duration,delay:this.stripeData.delay,progress:function(){t.stripeData.enable&&(e+=t.stripeData.enableRtl?-t.stripeData.durationValue:t.stripeData.durationValue,n.setAttribute("gradientTransform","translate("+e+") rotate(-45)"))},end:function(){t.stripeData.enable&&t.stripeAnimation(e)}})},e.prototype.linearIndeterminateAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathrect");i&&this.lineardata&&(i.style.visibility="hidden",t.animate(i,{duration:this.lineardata.duration,delay:0,progress:function(t){i.style.visibility="visible",e.lineardata.enableRtl&&e.lineardata.enableRtl&&e.lineardata.enable&&e.lineardata.isIndeterminate?e.animationProgress(i,t.timeStamp,e.lineardata.x||e.lineardata.rectX+e.lineardata.progressWidth,e.lineardata.end,t.duration,e.lineardata.enableRtl):e.lineardata.enable&&e.lineardata.isIndeterminate&&e.animationProgress(i,t.timeStamp,e.lineardata.start,e.lineardata.end,t.duration,e.lineardata.enableRtl)},end:function(){e.lineardata&&e.lineardata.enable&&e.lineardata.isIndeterminate&&(e.lineardata.enableRtl&&!e.lineardata.enableProgressSegments&&"Round4px"!==e.lineardata.cornerRadius?i.setAttribute("x",e.lineardata.x.toString()):e.lineardata.enableProgressSegments||i.setAttribute("x",e.lineardata.start.toString()),e.linearIndeterminateAnimation(),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete"))}}))},e.prototype.animationProgress=function(e,t,i,n,s,o){var r=this.effect(t,i,n,s,o);this.lineardata.enableProgressSegments?e.setAttribute("d",this.getPathLine(r,this.lineardata)):e.setAttribute("x",r.toString())},e.prototype.linearAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathrect"),n=0;i&&this.lineardata&&(i.style.visibility="hidden",t.animate(i,{duration:this.lineardata.duration,delay:this.lineardata.delay,progress:function(t){if(e.cancelResize=!0,e.lineardata.enableRtl&&"Round4px"!==e.lineardata.cornerRadius&&t.timeStamp>=t.delay)if(i.style.visibility="visible",e.lineardata.isActive){var s=document.getElementById(e.element.id+"_LinearActiveProgress");n=e.activeAnimate(t.timeStamp/t.duration,e.lineardata.x,e.lineardata.width,!0),s&&(s.setAttribute("opacity",e.effect(t.timeStamp,.5,.5,t.duration,!0).toString()),i.setAttribute("x",n.toString()))}else i.setAttribute("x",e.effect(t.timeStamp,e.lineardata.start,e.lineardata.end,t.duration,!0).toString());else if(t.timeStamp>=t.delay)if(i.style.visibility="visible",e.lineardata.isActive){s=document.getElementById(e.element.id+"_LinearActiveProgress");n=e.activeAnimate(t.timeStamp/t.duration,0,e.lineardata.width,e.lineardata.enableRtl),s&&(s.setAttribute("opacity",e.effect(t.timeStamp,.5,.5,t.duration,!0).toString()),i.setAttribute("width",n.toString()))}else i.setAttribute("width",e.effect(t.timeStamp,e.lineardata.start,e.lineardata.end,t.duration,!1).toString())},end:function(){e.cancelResize=!1,e.lineardata&&e.lineardata.enable&&e.lineardata.enableRtl&&"Round4px"!==e.lineardata.cornerRadius?e.lineardata.isActive?(i.setAttribute("x",e.lineardata.x.toString()),e.linearAnimation()):i.setAttribute("x",e.lineardata.rtlX.toString()):e.lineardata&&e.lineardata.enable&&(i.setAttribute("width",e.lineardata.width.toString()),e.lineardata.isActive&&e.linearAnimation()),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},e.prototype.linearBufferAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathBufferrect");i&&this.linearBufferdata&&(i.style.visibility="hidden",t.animate(i,{duration:this.linearBufferdata.duration,delay:this.linearBufferdata.delay,progress:function(t){e.cancelResize=!0,e.linearBufferdata.enableRtl&&"Round4px"!==e.linearBufferdata.cornerRadius&&t.timeStamp>=t.delay?t.timeStamp>=t.delay&&(i.style.visibility="visible",i.setAttribute("x",e.effect(t.timeStamp,e.linearBufferdata.start,e.linearBufferdata.end,t.duration,!0).toString())):t.timeStamp>=t.delay&&(i.style.visibility="visible",i.setAttribute("width",e.effect(t.timeStamp,e.linearBufferdata.start,e.linearBufferdata.end,t.duration,!1).toString()))},end:function(){e.cancelResize=!1,i.style.visibility="",e.lineardata&&e.linearBufferdata.enable&&e.linearBufferdata.enableRtl&&"Round4px"!==e.linearBufferdata.cornerRadius?i.setAttribute("x",e.linearBufferdata.rtlX.toString()):e.linearBufferdata&&e.linearBufferdata.enable&&i.setAttribute("width",e.linearBufferdata.width.toString()),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},e}();return{initialize:function(t,i,n,s,o){return new e(t,i,o).wireEvents(),this.getElementSize(i,n,s)},setSecondaryElementStyle:function(e){if(e){var t=document.getElementById(e.id+"SVG").getBoundingClientRect(),i=document.getElementById(e.id+"Secondary_Element"),n=e.getBoundingClientRect();i&&t&&(i.style.visibility="visible",i.style.left=Math.max(t.left-n.left,0)+"px",i.style.top=Math.max(t.top-n.top,0)+"px")}},getElementSize:function(e,t,i){var n,s;if(e){e.style.height=t,e.style.width=i;var o=e.getBoundingClientRect();n=o.width,s=o.height,e.style.width="",e.style.height=""}return{width:n,height:s}},doLinearBufferAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.linearBufferdata=t,i.linearBufferAnimation())},doLinearAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.lineardata=t,i.linearAnimation())},doLinearIndeterminate:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.lineardata=t,i.linearIndeterminateAnimation())},doStripedAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.stripeData=t,i.stripeAnimation())},doCircularAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.circularData=t,i.circularAnimation())},doCircularBufferAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.circularBufferData=t,i.circularBufferAnimation())},doCircularIndeterminate:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.circularData=t,i.circularIndeterminateAnimation(t.start,t.end))},doAnnotationAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.annotationData=t,i.annotationAnimation())},doLabelAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.labelData=t,i.labelAnimation())},update:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o)){if("Linear"===i){var r=t;r.isStriped?o.stripeData=r:o.lineardata=r}else o.circularData=t;n&&(o.labelData=t),s&&(o.annotationData=t)}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);e&&t&&t.unWireEvents()}}}()},"./modules/sf-range-navigator.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.RangeNavigator=function(){"use strict";var e=function(){function e(e,t,i,n){window.sfBlazor=window.sfBlazor,this.mouseY=0,this.mouseX=0,this.reSizeTo=0,this.isTooltipHide=!0,this.isDrag=!1,this.tooltip=[],this.id=t,this.element=i,this.dotNetRef=n,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.destroy=function(){this.unWireEvents(this.id,this.dotNetRef)},e.prototype.unWireEvents=function(e,i){this.dotNetRef=i,t.dotnetrefCollection=t.dotnetrefCollection.filter((function(t){return t.id!==e}));var n=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.rangeOnMouseDown),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchEndEvent,this.mouseEnd),sf.base.EventHandler.remove(this.element,"click",this.rangeOnMouseClick),sf.base.EventHandler.remove(this.element,n,this.mouseLeave);var s=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,s,t.resizeBound)},e.prototype.wireEvents=function(e,i){this.dotNetRef=i,t.dotnetrefCollection.push({id:e,dotnetref:i});var n=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.rangeOnMouseDown,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchEndEvent,this.mouseEnd,this),sf.base.EventHandler.add(this.element,"click",this.rangeOnMouseClick,this),sf.base.EventHandler.add(this.element,n,this.mouseLeave,this),t.resizeBound=t.rangeResize.bind(this,t.dotnetrefCollection);var s=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,s,t.resizeBound)},e.prototype.rangeOnMouseDown=function(e){var t=window.sfBlazor.getCompInstance(this.dataId);this.setMouseX(this.getPageX(e)),e.target.id.indexOf("_Thumb")>-1&&(t.isDrag=!0),this.dotNetRef.invokeMethodAsync("OnRangeMouseDown",this.getEventArgs(e))},e.prototype.mouseMove=function(e){var t=window.sfBlazor.getCompInstance(this.dataId);document.getElementById(this.id.replace("_stockChart_rangeSelector","")+"_svg")&&(this.setMouseX(this.getPageX(e)),t.isDrag&&this.sliderChangeValue&&t.changeSlider())},e.prototype.changeSlider=function(){var e,t;if(this.sliderChangeValue.isDrag&&this.mouseX>=this.sliderChangeValue.boundsX){switch(this.sliderChangeValue.currentSlider){case"Left":this.sliderChangeValue.startValue=this.getRangeValue(Math.abs(this.mouseX-this.sliderChangeValue.boundsX));break;case"Right":this.sliderChangeValue.endValue=this.getRangeValue(Math.abs(this.mouseX-this.sliderChangeValue.boundsX));break;case"Middle":e=Math.max(this.getRangeValue(Math.abs(this.sliderChangeValue.startX-(this.sliderChangeValue.previousMoveX-this.mouseX)-this.sliderChangeValue.boundsX)),this.sliderChangeValue.rangeMin),t=Math.min(this.getRangeValue(Math.abs(this.sliderChangeValue.endX-(this.sliderChangeValue.previousMoveX-this.mouseX)-this.sliderChangeValue.boundsX)),this.sliderChangeValue.rangeMax),Math.floor(Math.abs(this.getXLocation(t)-this.getXLocation(e)))===Math.floor(this.sliderChangeValue.sliderWidth)&&(this.sliderChangeValue.startValue=e,this.sliderChangeValue.endValue=t)}this.setSlider(this.sliderChangeValue.startValue,this.sliderChangeValue.endValue),this.sliderChangeValue.previousMoveX=this.mouseX}},e.prototype.setSlider=function(e,t){var i=window.sfBlazor.getCompInstance(this.dataId),n=document.getElementById(i.id+"_SelectedArea"),s=document.getElementById(i.id+"_leftUnSelectedArea"),o=document.getElementById(i.id+"_rightUnSelectedArea"),r=document.getElementById(i.id+"_LeftSlider"),a=document.getElementById(i.id+"_RightSlider");t>=e||(e=[t,t=e][0]);var l=this.sliderChangeValue.boundsX;e=t>=e?e:[t,t=e][0],e=Math.max(e,this.sliderChangeValue.rangeMin),t=Math.min(t,this.sliderChangeValue.rangeMax),this.sliderChangeValue.startX=l+this.getXLocation(e),this.sliderChangeValue.endX=l+this.getXLocation(t);var d=this.sliderChangeValue.enableRtl?this.sliderChangeValue.endX:this.sliderChangeValue.startX,h=this.sliderChangeValue.enableRtl?this.sliderChangeValue.startX:this.sliderChangeValue.endX;this.sliderChangeValue.sliderWidth=Math.abs(this.sliderChangeValue.endX-this.sliderChangeValue.startX),n.setAttribute("x",d+""),n.setAttribute("width",this.sliderChangeValue.sliderWidth+""),s.setAttribute("width",d-l+""),o.setAttribute("x",h+""),o.setAttribute("width",this.sliderChangeValue.boundsWidth-(h-l)+""),r.setAttribute("transform","translate("+(this.sliderChangeValue.startX-this.sliderChangeValue.thumpPadding)+", 0)"),a.setAttribute("transform","translate("+(this.sliderChangeValue.endX-this.sliderChangeValue.thumpPadding)+", 0)");var c=this.sliderChangeValue.enableRtl?this.sliderChangeValue.endX:this.sliderChangeValue.startX,p=this.sliderChangeValue.enableRtl?this.sliderChangeValue.startX:this.sliderChangeValue.endX,u={x:this.sliderChangeValue.isLeightWeight?0+l:l,y:this.sliderChangeValue.isLeightWeight?0:this.sliderChangeValue.boundsY,width:this.sliderChangeValue.isLeightWeight?c-l:c,height:this.sliderChangeValue.isLeightWeight?this.sliderChangeValue.thumpY:this.sliderChangeValue.boundsHeight},f={x:this.sliderChangeValue.isLeightWeight?0+p:p,y:this.sliderChangeValue.isLeightWeight?0:this.sliderChangeValue.boundsY,width:this.sliderChangeValue.boundsWidth-(h-l),height:this.sliderChangeValue.isLeightWeight?this.sliderChangeValue.thumpY:this.sliderChangeValue.boundsHeight},m={x:this.sliderChangeValue.isLeightWeight?c+0:0,y:this.sliderChangeValue.isLeightWeight?0:this.sliderChangeValue.boundsY,width:this.sliderChangeValue.isLeightWeight?Math.abs(this.sliderChangeValue.endX-this.sliderChangeValue.startX):p,height:this.sliderChangeValue.isLeightWeight?this.sliderChangeValue.thumpY:this.sliderChangeValue.boundsHeight};i.tooltip.length>0&&this.updateTooltip(u,f,m,this.sliderChangeValue.startX,this.sliderChangeValue.endX)},e.prototype.updateTooltip=function(e,i,n,s,o){var r=window.sfBlazor.getCompInstance(this.dataId),a=this.getTooltipContent(this.sliderChangeValue.endValue),l=this.sliderChangeValue.enableRtl?e:i,d=r.tooltip[0].textStyle;t.measureText(a,d.size,d.fontWeight,d.fontStyle,d.fontFamily).Width>l.width&&(l=n),r.tooltip[0].location.x=o,r.tooltip[0].areaBounds=l,r.tooltip[0].content=[a],r.tooltip[0].dataBind(),a=this.getTooltipContent(this.sliderChangeValue.startValue),l=this.sliderChangeValue.enableRtl?i:e,d=r.tooltip[1].textStyle,t.measureText(a,d.size,d.fontWeight,d.fontStyle,d.fontFamily).Width>l.width&&((l=n).x=r.sliderChangeValue.isLeightWeight?0:l.x),r.tooltip[1].location.x=s,r.tooltip[1].content=[a],r.tooltip[1].areaBounds=l,r.tooltip[1].dataBind()},e.prototype.getTooltipContent=function(e){var t=this.sliderChangeValue.format,i=null!==t.match("{value}");return"DateTime"===this.sliderChangeValue.valueType?(new sf.base.Internationalization).getDateFormat({format:t||"MM/dd/yyyy"})(new Date(e)):(new sf.base.Internationalization).getNumberFormat({format:i?"":t,useGrouping:this.sliderChangeValue.useGrouping})("Logarithmic"===this.sliderChangeValue.valueType?Math.pow(this.sliderChangeValue.logBase,e):e)},e.prototype.getRangeValue=function(e){return(this.sliderChangeValue.enableRtl?1-e/this.sliderChangeValue.boundsWidth:e/this.sliderChangeValue.boundsWidth)*this.sliderChangeValue.rangeDelta+this.sliderChangeValue.rangeMin},e.prototype.getXLocation=function(e){var t=(e-this.sliderChangeValue.rangeMin)/this.sliderChangeValue.rangeDelta;return(this.sliderChangeValue.enableRtl?1-t:t)*this.sliderChangeValue.boundsWidth},e.prototype.mouseEnd=function(e){var t=window.sfBlazor.getCompInstance(this.dataId);t.isDrag&&this.sliderChangeValue&&(this.dotNetRef.invokeMethodAsync("SetStartEndValue",this.sliderChangeValue.startValue,this.sliderChangeValue.endValue,!0,this.sliderChangeValue.enableTooltip),t.isDrag=!1),this.dotNetRef.invokeMethodAsync("OnRangeMouseEnd",this.getEventArgs(e))},e.prototype.rangeOnMouseClick=function(e){this.dotNetRef.invokeMethodAsync("OnRangeMouseClick",this.getEventArgs(e))},e.prototype.mouseLeave=function(e){var t=window.sfBlazor.getCompInstance(this.dataId);this.setMouseX(this.getPageX(e)),t.isDrag=!1,this.dotNetRef.invokeMethodAsync("OnRangeMouseLeave",this.getEventArgs(e)),this.isTooltipHide&&this.fadeOutTooltip()},e.prototype.fadeOutTooltip=function(){if(this.sliderChangeValue&&this.sliderChangeValue.isTooltipHide){window.clearInterval(this.toolTipInterval);var e=window.sfBlazor.getCompInstance(this.dataId);e.tooltip[1]&&(this.toolTipInterval=window.setTimeout((function(){e.tooltip[0].fadeOut(),e.tooltip[1].fadeOut()}),1e3))}},e.prototype.getPageX=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0].clientX:e.clientX},e.prototype.setMouseX=function(e){var t=document.getElementById(this.id.replace("_stockChart_rangeSelector","")+"_svg");if(t){var i=t.getBoundingClientRect(),n=document.getElementById(this.id).getBoundingClientRect();this.mouseX=e-n.left-Math.max(i.left-n.left,0)}},e.prototype.getEventArgs=function(e){return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0}}},e}(),t={getParentElementBoundsById:function(t,i,n){var s=document.getElementById(i);if(s){var o=new e(t,i,s,n);o.unWireEvents(i,n),o.wireEvents(i,n),s.style.width="100%",s.style.height="100%";var r=s.getBoundingClientRect();return{width:r.width||s.clientWidth||s.offsetWidth,height:r.height||s.clientHeight||s.offsetHeight,left:r.left,top:r.top,right:r.right,bottom:r.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(t,i,n,s,o,r){if(s=document.getElementById(i)){var a=new e(t,i,s,n);return a.unWireEvents(i,n),a.wireEvents(i,n),this.getElementSize(s,o,r)}return{width:0,height:0}},getElementSize:function(e,t,i){return e?(e.style.height=t,e.style.width=i,{width:e.clientWidth||e.offsetWidth,height:e.clientHeight||e.offsetHeight}):{width:0,height:0}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},charCollection:["0","1","2","3","4","5","6","7","8","9","!",'"',"#","$","%","&","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"," "],measureText:function(e,t,i,n,s){var o=document.getElementById("chartmeasuretext");return null===o&&(o=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(o))," "===e&&(e="&nbsp;"),o.innerHTML=e,o.style.position="fixed",o.style.fontSize=t,o.style.fontWeight=i,o.style.fontStyle=n,o.style.fontFamily=s,o.style.visibility="hidden",o.style.top="-100",o.style.left="0",o.style.whiteSpace="nowrap",o.style.lineHeight="normal",{Width:o.clientWidth,Height:o.clientHeight}},getCharSizeByFontKeys:function(e){for(var t={},i=this.charCollection,n=e.length,s=0;s<n;s++)for(var o=e[s].split("_"),r=o[0],a=o[1],l=o[2],d="_"+r+"_"+a+"_"+l,h=0;h<i.length;h++)t[i[h]+d]=this.measureText(i[h],"100px",r,a,l);return JSON.stringify(t)},getCharSizeByCharKey:function(e){var t=e.split("_");return this.measureText(t[0],"100px",t[2],t[3],t[4])},dotnetref:{},setValueOnSliderSelect:function(e,t,i){t=document.getElementById(t.id);var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(n.sliderChangeValue=i,n.isTooltipHide=i.isTooltipHide,n.isDrag=!0)},getElementRect:function(e){var t,i=document.getElementById(e);return i&&(t=i.getBoundingClientRect(),sf.base.remove(i)),{Left:t.left,Right:t.right,Top:t.top,Bottom:t.bottom,Width:t.width,Height:t.height}},dotnetrefCollection:[],renderTooltip:function(e,t,i,n,s,o){var r,a,l,d=window.sfBlazor.getCompInstance(o),h=[i,n],c=[e,t];s=document.getElementById(s.id);for(var p=1;p>=0;p--)a=h[p],!((r=document.getElementById(a.replace("_stockChart_rangeSelector","")+"_svg"))&&parseInt(r.getAttribute("opacity"),10)>0),l=JSON.parse(c[p]),d.tooltip[p]=new sf.svgbase.Tooltip(l),d.tooltip[p].appendTo("#"+a)},performSliderAnimation:function(e,t,i,n,s,o,r,a,l,d,h){var c=this;e=document.getElementById(e.id);var p=window.sfBlazor.getCompInstance(h);p.sliderChangeValue=d,new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:0===n?500:n,progress:function(e){var n=c.linear(e.timeStamp,0,t-s,e.duration)+s,r=c.linear(e.timeStamp,0,i-o,e.duration)+o;p.setSlider(n,r)},end:function(){p.setSlider(t,i),a?l.invokeMethodAsync("PerformSnapping",t,i,!0,r):p.dotNetRef.invokeMethodAsync("SetStartEndValue",t,i,!0,r)}})},linear:function(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t},setAttribute:function(e,t,i){var n=document.getElementById(e);n&&n.setAttribute(t,i)},getAndSetTextContent:function(e,t,i){var n=document.getElementById(e);if(n){if(t)return n.textContent;n.textContent=i}return null},resizeBound:{},resize:{},rangeResize:function(e,t){var i=this;return window.sfBlazor.getCompInstance(this.dataId).isDrag=!1,this.resize&&clearTimeout(this.resize),this.resize=setTimeout((function(){for(var n,s=e.length,o=0;o<s;o++)n=e[o].dotnetref,e[o].id.indexOf("_stockChart_")<0&&n.invokeMethodAsync("OnRangeResize",t);clearTimeout(i.resize)}),500),!1}};return t}()},"./modules/sf-richtexteditor.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.RichTextEditor=function(){"use strict";var e="initial-end",t="destroy",n="keyUp",s="keyDown",o="selection-save",r="selection-restore",a="mouseDown",l="paste-content",d="checkUndoStack",h=function(){function e(e){this.parent=e,this.renderCount()}return e.prototype.renderCount=function(){this.parent.showCharCount&&(this.addEventListener(),this.appendCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength))},e.prototype.appendCount=function(){this.countElement=sf.base.createElement("span",{className:"e-rte-character-count",styles:"display: block"}),this.parent.element.appendChild(this.countElement),this.updateCount()},e.prototype.updateCount=function(){var e="Markdown"===this.parent.editorMode?this.parent.getEditPanel().value:this.parent.getEditPanel().textContent;"Markdown"!==this.parent.editorMode&&-1!==e.indexOf("​")?this.htmlLength=e.replace(/\u200B/g,"").length:this.htmlLength=e.length;var t=-1===this.parent.maxLength?this.htmlLength:this.htmlLength+" / "+this.parent.maxLength;this.countElement.innerHTML=t},e.prototype.charCountBackground=function(e){this.countElement=this.parent.element.querySelector(".e-rte-character-count");var t=e/this.parent.maxLength*100;t<85?(this.countElement.classList.remove("e-warning"),this.countElement.classList.remove("e-error")):t>85&&t<=90?(this.countElement.classList.remove("e-error"),this.countElement.classList.add("e-warning")):t>90&&(this.countElement.classList.remove("e-warning"),this.countElement.classList.add("e-error"))},e.prototype.refresh=function(){!sf.base.isNullOrUndefined(this.parent.element)&&this.parent.showCharCount&&(this.updateCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength))},e.prototype.destroy=function(){sf.base.detach(this.countElement),this.countElement=null,this.removeEventListener()},e.prototype.toggle=function(e){this.parent.showCharCount&&(this.countElement.style.display="viewSource"===e.member?"none":"block")},e.prototype.addEventListener=function(){this.parent.observer.on(n,this.refresh,this),this.parent.observer.on("count",this.refresh,this),this.parent.observer.on("refresh-begin",this.refresh,this),this.parent.observer.on(a,this.refresh,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("sourceCode",this.toggle,this),this.parent.observer.on("updateSource",this.toggle,this)},e.prototype.removeEventListener=function(){this.parent.observer.off(n,this.refresh),this.parent.observer.off("refresh-begin",this.refresh),this.parent.observer.off("count",this.refresh),this.parent.observer.off(a,this.refresh),this.parent.observer.off(t,this.destroy),this.parent.observer.off("sourceCode",this.toggle),this.parent.observer.off("updateSource",this.toggle)},e}(),c=function(){function e(e){this.parent=e,this.renderResizable()}return e.prototype.addEventListener=function(){this.parent.observer.on(t,this.destroy,this)},e.prototype.renderResizable=function(){if(this.parent.enableResize){var e="e-icons e-resize-handle ";e+=this.parent.enableRtl?"e-south-west":"e-south-east",this.resizer=sf.base.createElement("div",{id:this.parent.id+"-resizable",className:e}),this.parent.element.classList.add("e-rte-resize"),this.parent.element.appendChild(this.resizer),this.parent.setContentHeight(),this.touchStartEvent="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart",sf.base.EventHandler.add(this.resizer,"mousedown",this.resizeStart,this),sf.base.EventHandler.add(this.resizer,this.touchStartEvent,this.resizeStart,this)}this.addEventListener()},e.prototype.resizeStart=function(e){var t=this;e.cancelable&&e.preventDefault(),this.wireResizeEvents(),this.parent.observer.notify("resizeInitialized",{});this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"editor"}).then((function(e){e.cancel&&t.unwireResizeEvents()}))},e.prototype.performResize=function(e){var t=this.parent.element.getBoundingClientRect();if(this.isMouseEvent(e)){this.parent.element.style.height=e.clientY-t.top+"px",this.parent.element.style.width=(this.parent.enableRtl?t.right-e.clientX:e.clientX-t.left)+"px";var i=this.parent.getToolbarElement();if(null!==i&&i.classList.contains("e-rte-tb-float")&&this.parent.toolbarSettings.enableFloating&&this.parent.getToolbar()&&!this.parent.inlineMode.enable){var n=this.parent.contentPanel.getBoundingClientRect().width;i.style.width=n+"px"}}else{var s="msie"!==sf.base.Browser.info.name?e.touches[0]:e;this.parent.element.style.height=s.clientY-t.top+"px",this.parent.element.style.width=(this.parent.enableRtl?t.right-s.clientX:s.clientX-t.left)+"px"}this.parent.refresh()},e.prototype.stopResize=function(e){this.parent.refresh(),this.unwireResizeEvents();this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"editor"})},e.prototype.getEventType=function(e){return e.indexOf("mouse")>-1?"mouse":"touch"},e.prototype.isMouseEvent=function(e){var t=!1;return("mouse"===this.getEventType(e.type)||!sf.base.isNullOrUndefined(e.pointerType)&&"mouse"===this.getEventType(e.pointerType))&&(t=!0),t},e.prototype.wireResizeEvents=function(){sf.base.EventHandler.add(document,"mousemove",this.performResize,this),sf.base.EventHandler.add(document,"mouseup",this.stopResize,this),this.touchMoveEvent="msie"===sf.base.Browser.info.name?"pointermove":"touchmove",this.touchEndEvent="msie"===sf.base.Browser.info.name?"pointerup":"touchend",sf.base.EventHandler.add(document,this.touchMoveEvent,this.performResize,this),sf.base.EventHandler.add(document,this.touchEndEvent,this.stopResize,this)},e.prototype.unwireResizeEvents=function(){sf.base.EventHandler.remove(document,"mousemove",this.performResize),sf.base.EventHandler.remove(document,"mouseup",this.stopResize),sf.base.EventHandler.remove(document,this.touchMoveEvent,this.performResize),sf.base.EventHandler.remove(document,this.touchEndEvent,this.stopResize)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.element.classList.remove("e-rte-resize"),sf.base.EventHandler.remove(this.resizer,"mousedown",this.resizeStart),sf.base.EventHandler.remove(this.resizer,this.touchStartEvent,this.resizeStart),this.resizer&&sf.base.detach(this.resizer),this.parent.observer.off(t,this.destroy)},e}(),p=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function u(){var e=!1;return sf.base.Browser.isDevice&&sf.base.Browser.isIos&&(e=!0),e}function f(e,t){if("BODY"===e.nodeName&&!sf.base.isNullOrUndefined(t)){var i=top.window.document.querySelector(t);sf.base.isNullOrUndefined(i)||i.contentWindow.focus()}}var m,g,v,b=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],y={bold:{command:"Style",subCommand:"Bold",value:"strong"},italic:{command:"Style",subCommand:"Italic",value:"em"},underline:{command:"Style",subCommand:"Underline",value:"span"},strikeThrough:{command:"Style",subCommand:"StrikeThrough",value:"span"},insertCode:{command:"Formats",subCommand:"Pre",value:"pre"},superscript:{command:"Effects",subCommand:"SuperScript",value:"sup"},subscript:{command:"Effects",subCommand:"SubScript",value:"sub"},uppercase:{command:"Casing",subCommand:"UpperCase"},lowercase:{command:"Casing",subCommand:"LowerCase"},fontColor:{command:"font",subCommand:"fontcolor",value:"#ff0000"},fontName:{command:"font",subCommand:"fontname",value:"Segoe UI"},fontSize:{command:"font",subCommand:"fontsize",value:"10pt"},backColor:{command:"font",subCommand:"backgroundcolor",value:"#ffff00"},justifyCenter:{command:"Alignments",subCommand:"JustifyCenter"},justifyFull:{command:"Alignments",subCommand:"JustifyFull"},justifyLeft:{command:"Alignments",subCommand:"JustifyLeft"},justifyRight:{command:"Alignments",subCommand:"JustifyRight"},undo:{command:"Actions",subCommand:"Undo"},redo:{command:"Actions",subCommand:"Redo"},createLink:{command:"Links",subCommand:"createLink"},editLink:{command:"Links",subCommand:"createLink"},createImage:{command:"Images",subCommand:"Images"},formatBlock:{command:"Formats",value:"P"},heading:{command:"Formats",value:"H1"},indent:{command:"Indents",subCommand:"Indent"},outdent:{command:"Indents",subCommand:"Outdent"},insertHTML:{command:"InsertHTML",subCommand:"InsertHTML",value:""},insertText:{command:"InsertText",subCommand:"InsertText",value:""},insertHorizontalRule:{command:"InsertHTML",subCommand:"InsertHTML",value:"<hr/>"},insertImage:{command:"Images",subCommand:"Image"},editImage:{command:"Images",subCommand:"Image"},insertTable:{command:"Table",subCommand:"CreateTable"},insertBrOnReturn:{command:"InsertHTML",subCommand:"InsertHTML",value:"<br/>"},insertOrderedList:{command:"Lists",value:"OL"},insertUnorderedList:{command:"Lists",value:"UL"},insertParagraph:{command:"Formats",value:"P"},removeFormat:{command:"Clear",subCommand:"ClearFormat"}};function w(e,t){if(t.enableHtmlSanitizer){var i=sf.base.SanitizeHtmlHelper.beforeSanitize();if(sf.base.extend(i,i,{cancel:!1,helper:null}),!sf.base.isNullOrUndefined(t.deniedSanitizeSelectors)&&t.deniedSanitizeSelectors.length>0)for(var n=function(e){for(var n=0;n<i.selectors.tags.length;n++)i.selectors.tags[n]===t.deniedSanitizeSelectors[e]&&(i.selectors.tags=i.selectors.tags.filter((function(i){return i!=t.deniedSanitizeSelectors[e]})));for(var s=function(n){(i.selectors.attributes[n].attribute||i.selectors.attributes[n].selector)===t.deniedSanitizeSelectors[e]&&(i.selectors.attributes=i.selectors.attributes.filter((function(e){return e!=i.selectors.attributes[n]})))},o=0;o<i.selectors.attributes.length;o++)s(o)},s=0;s<t.deniedSanitizeSelectors.length;s++)n(s);return i.cancel||(e=sf.base.SanitizeHtmlHelper.serializeValue(i,e)),e}return e}function C(e,t){var i=-1;return t.some((function(t,n){return!sf.base.isNullOrUndefined(t)&&"string"==typeof t.subCommand&&e===t.subCommand.toLocaleLowerCase()&&(i=n,!0)})),i}function S(e,t,i,n){for(var s,o,r=0;r<e.length;r++){if("value"===i&&e[r].value.toLocaleLowerCase()===t.toLocaleLowerCase()){s=e[r];break}if("text"===i&&e[r].text.toLocaleLowerCase()===t.toLocaleLowerCase()){s=e[r];break}if("subCommand"===i&&e[r].subCommand.toLocaleLowerCase()===t.toLocaleLowerCase()){s=e[r];break}}if(!sf.base.isNullOrUndefined(s))switch(n){case"text":o=s.text;break;case"value":o=s.value;break;case"cssClass":o=s.cssClass}return o}function E(e,t){var i;return null!==e&&""!==e?(i=t.enableHtmlEncode?t.encode(O(T(e),t)):O(e,t),t.value=i):i="DIV"===t.enterKey?t.enableHtmlEncode?"&lt;div&gt;&lt;br/&gt;&lt;/div&gt;":"<div><br/></div>":"BR"===t.enterKey?t.enableHtmlEncode?"&lt;br/&gt;":"<br/>":t.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/></p>",i}function x(e){return"DIV"===e.enterKey?"<div><br/></div>":"BR"===e.enterKey?"<br/>":"<p><br/></p>"}function O(e,t){var i=document.createElement("div"),n=document.createElement("div"),s=i.childNodes;if(i.innerHTML=e,i.setAttribute("class","tempDiv"),s.length>0){for(var o=void 0,r=void 0,a=void 0;i.firstChild;)"BR"!==t.enterKey&&("#text"===i.firstChild.nodeName&&(i.firstChild.textContent.indexOf("\n")<0||""!==i.firstChild.textContent.trim())||b.indexOf(i.firstChild.nodeName.toLocaleLowerCase())>=0)?(o?r.appendChild(i.firstChild):(a="DIV"===t.enterKey?sf.base.createElement("div"):sf.base.createElement("p"),n.appendChild(a),a.appendChild(i.firstChild)),r=a,o=!0):"#text"===i.firstChild.nodeName&&("\n"===i.firstChild.textContent||i.firstChild.textContent.indexOf("\n")>=0&&""===i.firstChild.textContent.trim())?sf.base.detach(i.firstChild):(n.appendChild(i.firstChild),o=!1);for(var l=n.querySelectorAll("img"),d=0;d<l.length;d++)l[d].classList.contains("e-rte-image")||l[d].classList.add("e-rte-image"),l[d].classList.contains("e-imginline")||l[d].classList.contains("e-imgbreak")||l[d].classList.add("e-imginline")}return n.innerHTML}function T(e){return e.replace(/&amp;/g,"&").replace(/&amp;lt;/g,"<").replace(/&lt;/g,"<").replace(/&amp;gt;/g,">").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;nbsp;/g," ").replace(/&quot;/g,"")}function A(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)}function N(e,t){var i=!1;return e.classList.contains(t)&&(i=!0),i}function k(e){var t=sf.base.createElement("template");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)}function I(e){for(var t=e.split(","),i=t[0].match(/:(.*?);/)[1],n=atob(t[1]),s=n.length,o=new Uint8Array(s);s--;)o[s]=n.charCodeAt(s);return new Blob([o],{type:i})}function M(e){return sf.base.isNullOrUndefined(e)?"":e}function L(e,t){e.dropDownModule;for(var i=e.args,n=0,s=Object.keys(e.args);n<s.length;n++)for(var o=s[n],r=0;r<e.tbItems.length;r++){var a=e.tbItems[r]&&e.tbItems[r].subCommand,l=a&&a.toLocaleLowerCase();if(a&&l===o||"UL"===a&&"unorderedlist"===o||"OL"===a&&"orderedlist"===o||"pre"===l&&"insertcode"===o)if("boolean"==typeof i[o])!0===i[o]?sf.base.addClass([e.tbElements[r]],["e-active"]):sf.base.removeClass([e.tbElements[r]],["e-active"]);else if(("string"==typeof i[o]||null===i[o])&&C(o,e.parent.toolbarSettings.items)>-1){var d=i[o]?i[o]:"",h="",c=void 0;switch(o){case"formats":if(t)break;var p=e.parent.format.items;h=S(p,d,"subCommand","text");var u=sf.base.isNullOrUndefined(e.parent.format.default)?p[0].text:e.parent.format.default;(c=e.tbElements[r].querySelector(".e-rte-dropdown-btn-text")).innerText=sf.base.isNullOrUndefined(h)?u:h,c.parentElement.style.width=e.parent.format.width;break;case"alignments":h=S(e.parent.alignments,d,"subCommand","cssClass"),c=e.tbElements[r].querySelector(".e-btn-icon.e-icons"),sf.base.removeClass([c],["e-justify-left","e-justify-center","e-justify-right","e-justify-full"]),sf.base.addClass([c],sf.base.isNullOrUndefined(h)?["e-icons","e-justify-left"]:h.split(" "));break;case"fontname":if(t)break;var f=e.parent.fontFamily.items;h=S(f,d,"value","text");var m=sf.base.isNullOrUndefined(e.parent.fontFamily.default)?f[0].text:e.parent.fontFamily.default,g=sf.base.isNullOrUndefined(h)?m:h;e.tbElements[r].title=g,(c=e.tbElements[r].querySelector(".e-rte-dropdown-btn-text")).innerText=g,c.parentElement.style.width=e.parent.fontFamily.width;break;case"fontsize":var v=e.parent.fontSize.items,b=sf.base.isNullOrUndefined(e.parent.fontSize.default)?v[1].value:e.parent.fontSize.default;h=S(v,""===d?b.replace(/\s/g,""):d,"value","text"),(c=e.tbElements[r].querySelector(".e-rte-dropdown-btn-text")).innerText=M(h),c.parentElement.style.width=e.parent.fontSize.width}}}}!function(e){e[e.Toolbar=0]="Toolbar",e[e.Content=1]="Content",e[e.Popup=2]="Popup",e[e.LinkToolbar=3]="LinkToolbar",e[e.TextToolbar=4]="TextToolbar",e[e.ImageToolbar=5]="ImageToolbar",e[e.AudioToolbar=6]="AudioToolbar",e[e.VideoToolbar=7]="VideoToolbar",e[e.InlineToolbar=8]="InlineToolbar",e[e.TableToolbar=9]="TableToolbar"}(m||(m={})),function(e){e.Expand="Expand",e.MultiRow="MultiRow",e.Scrollable="Scrollable"}(g||(g={})),function(e){e.InsertLink="InsertLink",e.InsertImage="InsertImage",e.InsertAudio="InsertAudio",e.InsertVideo="InsertVideo",e.InsertTable="InsertTable"}(v||(v={}));var B,D,P=function(){function e(e){this.isToolbar=!1,this.isTransformChild=!1,this.parent=e,this.tbElement=this.parent.getToolbarElement(),this.checkIsTransformChild(),this.addEventListener(),this.wireEvents()}return e.prototype.getToolbarHeight=function(){return this.parent.getToolbar().offsetHeight},e.prototype.getExpandTBarPopHeight=function(){var e=0;if(this.parent.toolbarSettings.type===g.Expand&&this.parent.getToolbar().classList.contains("e-extended-toolbar")){var t=sf.base.select(".e-toolbar-extended",this.parent.getToolbar());t&&this.parent.getToolbar().classList.contains("e-expand-open")||t&&t.classList.contains("e-popup-open")?(sf.base.addClass([t],["e-visible"]),e+=t.offsetHeight,sf.base.removeClass([t],["e-visible"])):sf.base.removeClass([this.parent.getToolbar()],["e-expand-open"])}return e},e.prototype.updateToolbarStatus=function(e){this.parent.getToolbarElement()&&(!this.parent.inlineMode.enable||!u()&&sf.base.Browser.isDevice)&&L({args:e,dropDownModule:null,parent:this.parent,tbElements:sf.base.selectAll(".e-toolbar-item:not(.e-rte-custom-toolbar)",this.parent.getToolbarElement()),tbItems:this.parent.toolbarSettings.items},!!this.parent.inlineMode.enable)},e.prototype.checkIsTransformChild=function(){this.isTransformChild=!1;for(var e=sf.base.selectAll('[style*="transform"]',document),t=0;t<e.length;t++)if(!sf.base.isNullOrUndefined(e[t].contains)&&e[t].contains(this.parent.element)){this.isTransformChild=!0;break}},e.prototype.toggleFloatClass=function(e){var t,i,n=!1,s=!1,o=this.parent.floatingToolbarOffset;e&&this.parent.iframeSettings.enable&&this.parent.inputElement.ownerDocument===e.target?i=e.target.body:e&&e.target!==document?i=e.target:(n=!0,i=document.body);var r=this.getToolbarHeight()+this.getExpandTBarPopHeight();if(this.isTransformChild){t=0;var a=0,l=this.parent.element.offsetHeight;if(n){var d=window.getComputedStyle(i);a=parseFloat(d.marginTop.split("px")[0])+parseFloat(d.paddingTop.split("px")[0])}var h=this.parent.element.getBoundingClientRect().top,c=sf.base.Browser.isMSPointer&&n?window.pageYOffset:i.parentElement.scrollTop,p=i.getBoundingClientRect(),u=n?p.top+c:p.top;h>u+o||h<-l||h<0&&!(h-(n?0:u)+l>r+o)?(s=!1,sf.base.removeClass([this.tbElement],["e-rte-tb-abs-float"])):h<u+o&&(t=h<0?-h+u:u-h,t=n?t-a:t,sf.base.addClass([this.tbElement],["e-rte-tb-abs-float"]),s=!0)}else{var f=this.parent.element.getBoundingClientRect();if(window.innerHeight<f.top)return;t=e&&e.target!==document?i.getBoundingClientRect().top:0,f.bottom<o+r+t||f.bottom<0||f.top>o+t?s=!1:f.top<o&&(s=!0)}s?(sf.base.addClass([this.tbElement],["e-rte-tb-float"]),sf.base.setStyleAttribute(this.tbElement,{width:this.parent.element.offsetWidth+"px",top:o+t+"px"})):(sf.base.removeClass([this.tbElement],["e-rte-tb-float"]),sf.base.setStyleAttribute(this.tbElement,{top:"0px",width:"100%"}))},e.prototype.getDOMVisibility=function(e){return!(!e.offsetParent&&0===e.offsetWidth&&0===e.offsetHeight)},e.prototype.showFixedTBar=function(){this.tbElement=this.parent.getToolbarElement(),sf.base.addClass([this.tbElement],["e-show"]),sf.base.Browser.isIos&&sf.base.addClass([this.tbElement],["e-tbar-ios-fixed"])},e.prototype.hideFixedTBar=function(){this.tbElement=this.parent.getToolbarElement(),this.isToolbar?this.isToolbar=!1:sf.base.removeClass([this.tbElement],["e-show","e-tbar-ios-fixed"])},e.prototype.dropDownBeforeOpenHandler=function(e){this.isToolbar=!0,!sf.base.isNullOrUndefined(sf.base.closest(e.element,".e-rte-toolbar"))&&sf.base.isNullOrUndefined(sf.base.closest(e.element,".e-rte-quick-toolbar"))&&this.parent.hideTableQuickToolbar()},e.prototype.addEventListener=function(){this.parent.observer.on("scroll",this.scrollHandler,this),this.parent.observer.on("refresh-begin",this.onRefresh,this),this.parent.observer.on(a,this.mouseDownHandler,this),this.parent.observer.on("focusChange",this.focusChangeHandler,this),this.parent.observer.on("toolbar-updated",this.updateToolbarStatus,this),this.parent.observer.on("beforeDropDownOpen",this.dropDownBeforeOpenHandler,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("scroll",this.scrollHandler),this.parent.observer.off("refresh-begin",this.onRefresh),this.parent.observer.off(a,this.mouseDownHandler),this.parent.observer.off("focusChange",this.focusChangeHandler),this.parent.observer.off("toolbar-updated",this.updateToolbarStatus),this.parent.observer.off("beforeDropDownOpen",this.dropDownBeforeOpenHandler)},e.prototype.wireEvents=function(){this.parent.inlineMode.enable&&u()||(this.tbElement=this.parent.getToolbarElement(),this.tbElement&&(sf.base.EventHandler.add(this.tbElement,"focusin",this.tbFocusHandler,this),sf.base.EventHandler.add(this.tbElement,"keydown",this.tbKeydownHandler,this),this.parent.inlineMode.enable||(this.keyBoardModule=new sf.base.KeyboardEvents(this.tbElement,{eventName:"keydown",keyAction:this.toolBarKeyDown.bind(this),keyConfigs:this.parent.formatter&&this.parent.formatter.keyConfig}))))},e.prototype.unWireEvents=function(){this.tbElement&&(sf.base.EventHandler.remove(this.tbElement,"focusin",this.tbFocusHandler),sf.base.EventHandler.remove(this.tbElement,"keydown",this.tbKeydownHandler))},e.prototype.onRefresh=function(){this.parent.dotNetRef.invokeMethodAsync("RefreshToolbarOverflow"),this.parent.setContentHeight("",!0)},e.prototype.tbFocusHandler=function(e){var t=document.activeElement,i=sf.base.closest(t,".e-rte-toolbar");if(t===this.parent.getToolbarElement()||i===this.parent.getToolbarElement())for(var n=this.parent.getToolbarElement().querySelectorAll(".e-expended-nav"),s=0;s<n.length;s++)sf.base.isNullOrUndefined(this.parent.getToolbarElement().querySelector(".e-insert-table-btn"))?n[s].setAttribute("tabindex","0"):n[s].setAttribute("tabindex","1")},e.prototype.tbKeydownHandler=function(e){(e.target.classList.contains("e-dropdown-btn")||e.target.getAttribute("id")===this.parent.id+"_toolbar_CreateTable")&&e.target.setAttribute("tabindex","0")},e.prototype.toolBarKeyDown=function(e){switch(e.action){case"escape":this.parent.getEditPanel().focus()}},e.prototype.scrollHandler=function(e){this.parent.inlineMode.enable||(this.tbElement=this.parent.getToolbarElement(),this.parent.toolbarSettings.enableFloating&&this.getDOMVisibility(this.tbElement)&&this.toggleFloatClass(e.args))},e.prototype.mouseDownHandler=function(){sf.base.Browser.isDevice&&this.parent.inlineMode.enable&&!u()&&this.showFixedTBar()},e.prototype.focusChangeHandler=function(){sf.base.Browser.isDevice&&this.parent.inlineMode.enable&&!u()&&(this.isToolbar=!1,this.hideFixedTBar())},e.prototype.destroy=function(){this.removeEventListener(),this.unWireEvents()},e}(),R=function(){return(R=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},H=function(){function e(e){this.parent=e,this.rteId=this.parent.element.id,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(s,this.onKeyDown,this),this.parent.observer.on("unLink",this.removeLink,this),this.parent.observer.on("insertLink",this.linkDialog,this),this.parent.observer.on("link-toolbar-action",this.onToolbarAction,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("insertCompleted",this.showLinkQuickToolbar,this)},e.prototype.removeEventListener=function(){this.parent.observer.off(t,this.destroy),this.parent.observer.off(s,this.onKeyDown),this.parent.observer.off("unLink",this.removeLink),this.parent.observer.off("insertLink",this.linkDialog),this.parent.observer.off("link-toolbar-action",this.onToolbarAction),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("insertCompleted",this.showLinkQuickToolbar),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick)},e.prototype.linkDialog=function(e,t){if("HTML"===this.parent.editorMode&&e.selectParent.length>0&&!sf.base.isNullOrUndefined(e.selectParent[0].classList)&&e.selectParent[0].classList.contains("e-rte-anchor")&&sf.base.isNullOrUndefined(t))this.editLink(e);else{this.selectionObj={selection:e.selection,selectParent:e.selectParent,args:e.args};var i={url:"",text:"",title:"",target:!0};sf.base.isNullOrUndefined(t)||(i={url:t.url,text:t.text,title:t.title,target:""!==t.target});var n="HTML"===this.parent.editorMode?e.selection.getRange(this.parent.getDocument()).toString():e.text;("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(t)&&(!sf.base.isNullOrUndefined(n)&&""!==n&&0===e.selection.range.startOffset||e.selection.range.startOffset!==e.selection.range.endOffset)||"Markdown"===e.module)&&(i.text=n),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),sf.base.isNullOrUndefined(sf.base.select(".e-rte-link-dialog",this.parent.element))?this.parent.dotNetRef.invokeMethodAsync("ShowLinkDialog",i,sf.base.isNullOrUndefined(t)?null:"Edit"):this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog"),this.quickToolObj&&(this.hideLinkQuickToolbar(),this.quickToolObj.hideInlineQTBar())}},e.prototype.insertLink=function(e){var t,i=e.url,n=e.text;"HTML"===this.parent.editorMode&&(t=e.title);var s=e.target?"_blank":null;if(""!==i){if(this.isUrl(i)?this.checkUrl(!1):(n=""===n?i:n,i=this.parent.enableAutoUrl||i.indexOf("http")>-1?i:"http://"+i),"HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))){this.parent.getEditPanel().focus(),sf.base.Browser.isIE&&this.parent.iframeSettings.enable&&this.selectionObj.selection.restore();var o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)}var r,a={url:i,text:n,title:t,target:s,selection:this.selectionObj.selection,selectParent:this.selectionObj.selectParent};if(this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog"),u()&&this.parent.iframeSettings.enable&&sf.base.select("iframe",this.parent.element).contentWindow.focus(),"HTML"===this.parent.editorMode&&this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.selectionObj.args)||"KeyK"!==this.selectionObj.args.code)r=this.selectionObj.args;else{var l=this.selectionObj.args,d={item:{command:"Links",subCommand:"CreateLink"},originalEvent:l=R({},l,{target:null})};sf.base.extend(this.selectionObj.args,d,!0),r=d}this.parent.formatter.process(this.parent,r,!sf.base.isNullOrUndefined(this.selectionObj.args)&&this.selectionObj.args.originalEvent,a),this.parent.getEditPanel().focus()}else this.checkUrl(!0)},e.prototype.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)},e.prototype.checkUrl=function(e){var t=this.parent.element.querySelector(".e-rte-link-dialog .e-rte-linkurl");e?(sf.base.addClass([t],"e-error"),t.setSelectionRange(0,t.value.length),t.focus()):sf.base.removeClass([t],"e-error")},e.prototype.cancelDialog=function(){u()?this.selectionObj.selection.restore():this.parent.getEditPanel().focus()},e.prototype.linkDialogClosed=function(){"HTML"===this.parent.editorMode?this.selectionObj.selection.restore():this.parent.formatter.editorManager.markdownSelection.restore(this.parent.getEditPanel())},e.prototype.getAnchorNode=function(e){var t=sf.base.closest(e,"a");return t||e},e.prototype.openLink=function(e){var t=this.getAnchorNode(e.selectParent[0]);(t.classList.contains("e-rte-anchor")||"A"===t.tagName)&&this.parent.formatter.process(this.parent,e.args,e.args,{url:t.href,text:t.innerText,target:""===t.target?"_self":"_blank",selectNode:e.selectNode,subCommand:e.args.item.subCommand})},e.prototype.editLink=function(e){var t=this.getAnchorNode(e.selectNode[0]),i=this.getAnchorNode(e.selectParent[0]);if((i="A"===t.nodeName?t:i).classList.contains("e-rte-anchor")||"A"===i.tagName){var n={url:i.getAttribute("href"),text:i.innerText,title:i.title,target:i.target};this.linkDialog(e,n)}},e.prototype.removeLink=function(e){0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData();var t=this.getAnchorNode(e.selectParent[0]);this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,selectParent:e.selectParent,selection:e.selection,text:t.innerText,subCommand:e.args.item.subCommand}),u()&&this.parent.iframeSettings.enable?sf.base.select("iframe",this.parent.element).contentWindow.focus():this.parent.getEditPanel().focus(),this.hideLinkQuickToolbar()},e.prototype.onToolbarAction=function(e){switch(e.args.item.subCommand){case"OpenLink":this.openLink(e);break;case"EditLink":this.editLink(e);break;case"RemoveLink":this.removeLink(e)}},e.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideLinkQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(!(2===t.which||i&&1===t.which||!i&&3===t.which)&&"HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){var n=t.target;n=this.getAnchorNode(n);var s;if(s=document.body.querySelector("#"+this.rteId+"_Link_Quick_Popup").classList.contains("e-rte-pop"),"A"===n.nodeName&&n.childNodes.length>0&&"IMG"!==n.childNodes[0].nodeName&&"IMG"!==e.args.target.nodeName){if(s)return;this.showLinkQuickToolbar({args:t,isNotify:!1,type:"Links",elements:[t.target]})}else this.hideLinkQuickToolbar()}}},e.prototype.showLinkQuickToolbar=function(e){if("enter"!==e.args.action&&"space"!==e.args.action){var t=void 0,i=void 0;if("Links"!==e.type||sf.base.isNullOrUndefined(this.parent.quickToolbarModule))return;this.quickToolObj=this.parent.quickToolbarModule;var n,s=this.parent.element.getBoundingClientRect().top,o=this.parent.element.getBoundingClientRect().left,r=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),a=this.parent.getToolbarElement(),l=a?a.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;if([].forEach.call(e.elements,(function(e,t){0===t&&(n="#text"===e.nodeName?e.parentNode:e)})),e.isNotify){var d=n.getBoundingClientRect(),h=d.top,c=d.left,p=h-s;t=this.parent.iframeSettings.enable?o+c:c,i=window.pageYOffset+(this.parent.iframeSettings.enable?s+l+h:s+p)}else{var u=void 0;u=e.args.touches?e.args.changedTouches[0]:u=e.args,t=this.parent.iframeSettings.enable?window.pageXOffset+o+u.clientX:u.pageX,i=this.parent.iframeSettings.enable?window.pageYOffset+s+l+u.clientY:u.pageY}this.quickToolObj.showLinkQTBar(t,i,r.endContainer,"Link")}},e.prototype.hideLinkQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.hideLinkQTBar()},e.prototype.showDialog=function(e,t){if(e&&this.parent.getEditPanel().focus(),"HTML"===this.parent.editorMode){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),o=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),r={args:e?{item:{command:"Links",subCommand:"CreateLink"},originalEvent:void 0}:t.args,selectNode:s,selection:n,selectParent:o};this.linkDialog(r)}else{var a=this.parent.getEditPanel();this.parent.formatter.editorManager.markdownSelection.save(a.selectionStart,a.selectionEnd),this.linkDialog({args:{item:{command:"Links",subCommand:"Link"},originalEvent:e?void 0:t.args},member:"link",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.getEditPanel()),module:"Markdown",name:"insertLink"})}},e.prototype.onKeyDown=function(e){var t=e.args;switch(t.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog");break;case"insert-link":this.showDialog(!1,e),t.preventDefault()}},e.prototype.onDocumentClick=function(e){var t=e.target,i="#"+this.rteId+"_rtelink",n=this.parent.getToolbarElement(),s="#"+this.rteId+"_toolbar_CreateLink",o=this.parent.element.querySelector(i);!sf.base.isNullOrUndefined(o)&&(!sf.base.closest(t,i)&&this.parent.toolbarSettings.enable&&n&&!n.contains(e.target)||(n&&n.contains(e.target)||this.parent.inlineMode.enable&&!sf.base.closest(t,i))&&!sf.base.closest(t,s)&&!t.querySelector(s))&&(this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog"),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),this.parent.isBlur=!0,sf.base.Browser.isIE&&A(this.parent.element,"focusout"))},e.prototype.onIframeMouseDown=function(){this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog")},e.prototype.destroy=function(){this.removeEventListener()},e}(),z=function(){function i(e){this.pageX=null,this.pageY=null,this.moveEle=null,this.rzProgress=!1,this.ensureInsideTableList=!0,this.currentColumnResize="",this.currentMarginLeft=0,this.parent=e,this.addEventListener()}return i.prototype.addEventListener=function(){this.parent.observer.on(n,this.keyUp,this),this.parent.observer.on(s,this.keyDown,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("docClick",this.docClick,this),this.parent.observer.on(e,this.afterRender,this),this.parent.observer.on("mouseUp",this.selectionTable,this),this.parent.observer.on("createTable",this.renderDlgContent,this),this.parent.observer.on("dropDownSelect",this.dropdownSelect,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("table-toolbar-action",this.onToolbarAction,this)},i.prototype.removeEventListener=function(){this.parent.observer.off(n,this.keyUp),this.parent.observer.off(s,this.keyDown),this.parent.observer.off(t,this.destroy),this.parent.observer.off("docClick",this.docClick),this.parent.observer.off(a,this.cellSelect),this.parent.observer.off(e,this.afterRender),this.parent.observer.off("mouseUp",this.selectionTable),this.parent.observer.off("createTable",this.renderDlgContent),this.parent.observer.off("dropDownSelect",this.dropdownSelect),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("tableColorPickerChanged",this.setBGColor),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("table-toolbar-action",this.onToolbarAction)},i.prototype.afterRender=function(){this.parent.observer.on(a,this.cellSelect,this),this.parent.observer.on("tableColorPickerChanged",this.setBGColor,this),this.parent.tableSettings.resize&&sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart,this),!sf.base.Browser.isDevice&&this.parent.tableSettings.resize&&sf.base.EventHandler.add(this.parent.getEditPanel(),"mouseover",this.resizeHelper,this)},i.prototype.selectionTable=function(e){var t=e.args.target;"mozilla"!==sf.base.Browser.info.name||sf.base.isNullOrUndefined(sf.base.closest(t,"table"))||"TABLE"!==sf.base.closest(t,"table").tagName||this.parent.getEditPanel().setAttribute("contenteditable","true")},i.prototype.tabSelection=function(e,t,i){var n=this.insideList(t.range);if((37!==e.keyCode&&39!==e.keyCode||3!==t.range.startContainer.nodeType)&&!n)if(e.preventDefault(),i.classList.remove("e-cell-select"),e.shiftKey||37===e.keyCode){var s=sf.base.isNullOrUndefined(i.previousSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"tr").previousSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"table").previousSibling)?i:"td"===sf.base.closest(i,"table").previousSibling.nodeName.toLowerCase()?sf.base.closest(i,"table").previousSibling:i:sf.base.closest(i,"tr").previousSibling.childNodes[sf.base.closest(i,"tr").previousSibling.childNodes.length-1]:i.previousSibling;if(i===s&&0===i.cellIndex&&sf.base.closest(i,"table").tHead){var o=sf.base.closest(i,"table");s=o.rows[0].cells[o.rows[0].cells.length-1]}37===e.keyCode&&i===s&&(s=sf.base.closest(i,"table").previousSibling),s&&(""!==s.textContent.trim()&&sf.base.closest(s,"td")?t.setSelectionNode(this.parent.getDocument(),s):t.setSelectionText(this.parent.getDocument(),s,s,0,0))}else{var r=sf.base.isNullOrUndefined(i.nextSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"tr").nextSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"table").nextSibling)?i:"td"===sf.base.closest(i,"table").nextSibling.nodeName.toLowerCase()?sf.base.closest(i,"table").nextSibling:i:sf.base.closest(i,"tr").nextSibling.childNodes[0]:i.nextSibling;i===r&&"TH"===i.nodeName&&(r=sf.base.closest(i,"table").rows[1].cells[0]),39===e.keyCode&&i===r&&(r=sf.base.closest(i,"table").nextSibling),r&&(""!==r.textContent.trim()&&sf.base.closest(r,"td")?t.setSelectionNode(this.parent.getDocument(),r):t.setSelectionText(this.parent.getDocument(),r,r,0,0)),i===r&&39!==e.keyCode&&r&&(i.classList.add("e-cell-select"),this.addRow(t,e,!0),i.classList.remove("e-cell-select"),""!==(r=r.parentElement.nextSibling?r.parentElement.nextSibling.firstChild:r.parentElement.firstChild).textContent.trim()&&sf.base.closest(r,"td")?t.setSelectionNode(this.parent.getDocument(),r):t.setSelectionText(this.parent.getDocument(),r,r,0,0))}},i.prototype.insideList=function(e){for(var t=this.parent.formatter.editorManager.domNode.blockNodes(),i=[],n=0;n<t.length;n++)"LI"===t[n].parentNode.tagName?i.push(t[n].parentNode):"LI"===t[n].tagName&&"P"!==t[n].childNodes[0].tagName&&"OL"!==t[n].childNodes[0].tagName&&"UL"!==t[n].childNodes[0].tagName&&i.push(t[n]);return i.length>1||i.length&&0===e.startOffset&&0===e.endOffset?(this.ensureInsideTableList=!0,!0):(this.ensureInsideTableList=!1,!1)},i.prototype.tableArrowNavigation=function(e,t,i){var n=t.range.startContainer;40===e.keyCode&&3===n.nodeType&&(n.nextSibling&&"BR"===n.nextSibling.nodeName||n.parentNode&&"TD"!==n.parentNode.nodeName)||38===e.keyCode&&3===n.nodeType&&(n.previousSibling&&"BR"===n.previousSibling.nodeName||n.parentNode&&"TD"!==n.parentNode.nodeName)||(e.preventDefault(),i.classList.remove("e-cell-select"),(i=40===e.keyCode?sf.base.isNullOrUndefined(sf.base.closest(i,"tr").nextSibling)?sf.base.closest(i,"table").tHead&&"TH"===i.nodeName?sf.base.closest(i,"table").rows[1].cells[i.cellIndex]:sf.base.isNullOrUndefined(sf.base.closest(i,"table").nextSibling)?i:sf.base.closest(i,"table").nextSibling:sf.base.closest(i,"tr").nextSibling.children[i.cellIndex]:sf.base.isNullOrUndefined(sf.base.closest(i,"tr").previousSibling)?sf.base.closest(i,"table").tHead&&"TH"!==i.nodeName?sf.base.closest(i,"table").tHead.rows[0].cells[i.cellIndex]:sf.base.isNullOrUndefined(sf.base.closest(i,"table").previousSibling)?i:sf.base.closest(i,"table").previousSibling:sf.base.closest(i,"tr").previousSibling.children[i.cellIndex])&&t.setSelectionText(this.parent.getDocument(),i,i,0,0))},i.prototype.cellSelect=function(e){var t=e.args.target,i=sf.base.closest(t,"td,th");t="TD"!==t.nodeName&&i&&this.parent.getEditPanel().contains(i)?i:t,sf.base.removeClass(this.parent.getEditPanel().querySelectorAll("table td, table th"),"e-cell-select"),!t||"TD"!==t.tagName&&"TH"!==t.tagName||(t.removeAttribute("class"),sf.base.addClass([t],"e-cell-select"),this.activeCell=t,this.curTable=this.curTable?this.curTable:sf.base.closest(t,"table"),sf.base.EventHandler.add(this.curTable,"mousemove",this.tableMove,this),sf.base.EventHandler.add(this.curTable,"mouseup",this.tableMouseUp,this),this.removeResizeEle(),this.helper&&this.parent.getEditPanel().contains(this.helper)&&sf.base.detach(this.helper)),"mozilla"!==sf.base.Browser.info.name||sf.base.isNullOrUndefined(sf.base.closest(t,"table"))||"TABLE"!==sf.base.closest(t,"table").tagName||this.parent.getEditPanel().setAttribute("contenteditable","false")},i.prototype.tableMove=function(e){this.parent.formatter.editorManager.observer.notify("TABLE_MOVE",{event:e,selectNode:[this.activeCell]})},i.prototype.renderDlgContent=function(e){if(this.tableNotifyArgs=e,this.parent.observer.notify(o,{}),sf.base.Browser.isDevice||this.parent.inlineMode.enable)this.insertTableDialog();else{this.hideTableQuickToolbar();var t=this.parent.getToolbarElement(),i=this.parent.element.querySelector("#"+this.parent.element.id+"_toolbar_CreateTable"),n=0;n=this.parent.getToolbar().classList.contains("e-expand-open")?i.offsetTop+i.offsetHeight+t.offsetHeight:i.offsetTop+i.offsetHeight,sf.base.isNullOrUndefined(sf.base.select(".e-rte-table-popup",this.parent.element))?this.parent.dotNetRef.invokeMethodAsync("ShowCreateTableDialog",i.offsetLeft,n):this.parent.dotNetRef.invokeMethodAsync("CloseCreateTableDialog")}},i.prototype.createTablePopupOpened=function(){for(var e=sf.base.selectAll(".e-rte-table-popup .e-rte-table-row",this.parent.element),t=0;t<e.length;t++){sf.base.EventHandler.add(e[t],"mouseleave",this.tableCellLeave,this);for(var i=sf.base.selectAll(".e-rte-tablecell",e[t]),n=0;n<i.length;n++)sf.base.EventHandler.add(i[n],"mouseup",this.tableCellClick,this),sf.base.EventHandler.add(i[n],"mousemove",this.tableCellSelect,this)}var s=this.parent.element.querySelector(".e-rte-table-popup");s&&s.focus(),sf.base.isNullOrUndefined(this.parent.getToolbarElement().querySelector(".e-expended-nav"))||this.parent.getToolbarElement().querySelector(".e-expended-nav").setAttribute("tabindex","1")},i.prototype.insertTableDialog=function(){this.createDialog()},i.prototype.createDialog=function(e,t){e&&t?this.parent.dotNetRef.invokeMethodAsync("ShowEditTableDialog",e,t):this.parent.dotNetRef.invokeMethodAsync("ShowTableDialog"),this.quickToolObj&&this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.hideInlineQTBar()},i.prototype.tableCellSelect=function(e){var t=e.target,i=this.parent.element.querySelector(".e-rte-table-popup"),n=this.parent.element.querySelector(".e-rte-table-popup .e-rte-popup-header"),s=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement),o=Array.prototype.slice.call(t.parentElement.children).indexOf(t),r=i.querySelectorAll(".e-rte-tablecell");Array.prototype.forEach.call(r,(function(e){var t=Array.prototype.slice.call(e.parentElement.parentElement.children).indexOf(e.parentElement),i=Array.prototype.slice.call(e.parentElement.children).indexOf(e);sf.base.removeClass([e],"e-active"),t<=s&&i<=o&&sf.base.addClass([e],"e-active")})),n.innerHTML=o+1+"x"+(s+1)},i.prototype.tableCellLeave=function(e){var t=this.parent.element.querySelector(".e-rte-table-popup"),i=this.parent.element.querySelector(".e-rte-table-popup .e-rte-popup-header");sf.base.removeClass(t.querySelectorAll(".e-rte-tablecell"),"e-active"),sf.base.addClass([t.querySelector(".e-rte-tablecell")],"e-active"),i.innerHTML="1x1"},i.prototype.tableCellClick=function(e){var t=e.target,i=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement)+1,n=Array.prototype.slice.call(t.parentElement.children).indexOf(t)+1;this.tableInsert(i,n,"Create",this)},i.prototype.tableInsert=function(e,t,i,n){var s=n.self?n.self:this,o=this.tableNotifyArgs.selection.range.startContainer;"P"!==o.nodeName||""!==o.textContent.trim()||o.childNodes.length>0||(o.innerHTML="<br />");var l=o.parentNode;if("HTML"===s.parent.editorMode&&(s.parent.iframeSettings.enable&&!N(l.ownerDocument.querySelector("body"),"e-lib")||!s.parent.iframeSettings.enable&&sf.base.isNullOrUndefined(sf.base.closest(l,"#"+s.parent.getPanel().id)))){s.parent.getEditPanel().focus();var d=s.parent.formatter.editorManager.nodeSelection.getRange(s.parent.getDocument());this.tableNotifyArgs.selection=s.parent.formatter.editorManager.nodeSelection.save(d,s.parent.getDocument())}var h={rows:e,columns:t,width:{minWidth:s.parent.tableSettings.minWidth,maxWidth:s.parent.tableSettings.maxWidth,width:s.parent.tableSettings.width},selection:this.tableNotifyArgs.selection};"Create"===i?this.parent.dotNetRef.invokeMethodAsync("CloseCreateTableDialog"):this.parent.dotNetRef.invokeMethodAsync("CloseTableDialog"),this.parent.observer.notify(r,{}),s.parent.formatter.process(s.parent,this.tableNotifyArgs.args,this.tableNotifyArgs.args.originalEvent,h),s.parent.getEditPanel().focus(),s.parent.observer.on(a,s.cellSelect,s)},i.prototype.customTable=function(e,t){if(e&&t){var i=sf.base.Browser.isDevice||!sf.base.isNullOrUndefined(this.tableNotifyArgs.args)&&!sf.base.isNullOrUndefined(this.tableNotifyArgs.args.originalEvent)&&"insert-table"===this.tableNotifyArgs.args.originalEvent.action||this.parent.inlineMode.enable?this.tableNotifyArgs:this;this.tableInsert(e,t,"",i)}},i.prototype.applyTableProperties=function(e){var t=sf.base.closest(this.tableNotifyArgs.selectNode[0],"table");if(t.style.width=e.width+"px",""!==e.padding.toString()){var i=t.querySelectorAll("th");this.applyCellPadding(i,e.padding);var n=t.querySelectorAll("td");this.applyCellPadding(n,e.padding)}t.cellSpacing=e.spacing.toString(),t.cellSpacing&&"0"!==t.cellSpacing?sf.base.addClass([t],"e-rte-table-border"):sf.base.removeClass([t],"e-rte-table-border"),this.parent.formatter.saveData(),this.parent.dotNetRef.invokeMethodAsync("CloseTableDialog")},i.prototype.applyCellPadding=function(e,t){for(var i=0;i<e.length;i++){var n="";if(""===e[i].style.padding){var s=e[i].getAttribute("style");n=(sf.base.isNullOrUndefined(s)?"":s)+" padding:"+t+"px;"}else e[i].style.padding=t+"px",n=e[i].getAttribute("style");e[i].setAttribute("style",n)}},i.prototype.resizeHelper=function(e){if(!this.parent.readonly){var t=e.target||e.targetTouches[0].target,i=sf.base.closest(t,"table.e-rte-table");sf.base.isNullOrUndefined(this.curTable)||sf.base.isNullOrUndefined(i)||i===this.curTable||!this.parent.getEditPanel().contains(i)||(this.removeResizeEle(),this.removeHelper(e),this.cancelResizeAction()),"TABLE"!==t.nodeName&&"TD"!==t.nodeName&&"TH"!==t.nodeName||this.rzProgress||(this.curTable=i&&this.parent.getEditPanel().contains(i)&&("TD"===t.nodeName||"TH"===t.nodeName)?i:t,this.removeResizeEle(),this.tableResizeEleCreation(this.curTable,e))}},i.prototype.tableResizeEleCreation=function(e,t){this.parent.defaultResize(t,!1);for(var i=e.rows[this.calMaxCol(e)].cells,n=[],s=0;s<e.rows.length;s++)n.push(Array.prototype.slice.call(e.rows[s].cells,0,1)[0]);var o=parseInt(getComputedStyle(e).height,10),r=parseInt(getComputedStyle(e).width,10),a=this.calcPos(e);for(s=0;i.length>=s;s++){var l=sf.base.createElement("span",{attrs:{"data-col":s.toString(),unselectable:"on",contenteditable:"false"}});l.classList.add("e-rte-table-resize","e-column-resize"),i.length===s?l.style.cssText="height: "+o+"px; width: 4px; top: "+a.top+"px; left:"+(a.left+this.calcPos(i[s-1]).left+i[s-1].offsetWidth)+"px;":l.style.cssText="height: "+o+"px; width: 4px; top: "+a.top+"px; left:"+(a.left+this.calcPos(i[s]).left)+"px;",this.parent.getEditPanel().appendChild(l)}for(s=0;n.length>s;s++){var d=sf.base.createElement("span",{attrs:{"data-row":s.toString(),unselectable:"on",contenteditable:"false"}});d.classList.add("e-rte-table-resize","e-row-resize");var h=sf.base.isNullOrUndefined(e.getAttribute("cellspacing"))&&""===e.getAttribute("cellspacing")?this.calcPos(n[s]).left:0;d.style.cssText="width: "+r+"px; height: 4px; top: "+(this.calcPos(n[s]).top+a.top+n[s].offsetHeight-2)+"px; left:"+(h+a.left)+"px;",this.parent.getEditPanel().appendChild(d)}var c=sf.base.createElement("span",{className:"e-table-box",attrs:{"data-col":i.length.toString(),unselectable:"on",contenteditable:"false"}});c.style.cssText="top: "+(a.top+o-4)+"px; left:"+(a.left+r-4)+"px;",sf.base.Browser.isDevice&&c.classList.add("e-rmob"),this.parent.getEditPanel().appendChild(c)},i.prototype.resizeStart=function(e){var t=this;if(!this.parent.readonly){sf.base.Browser.isDevice&&this.resizeHelper(e);var i=e.target;if(i.classList.contains("e-column-resize")||i.classList.contains("e-row-resize")||i.classList.contains("e-table-box")){if(e.preventDefault(),this.parent.defaultResize(e,!1),!i.classList.contains("e-table-box")){var n=this.parent.getEditPanel().querySelector(".e-table-box");sf.base.isNullOrUndefined(n)||(n.classList.add("e-hide"),this.rzProgress=!0)}if(sf.base.removeClass(this.curTable.querySelectorAll("td,th"),"e-cell-select"),this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),this.resizeBtnInit(),this.hideTableQuickToolbar(),i.classList.contains("e-column-resize")&&(this.resizeBtnStat.column=!0,parseInt(i.getAttribute("data-col"),10)===this.curTable.rows[this.calMaxCol(this.curTable)].cells.length?(this.currentColumnResize="last",this.columnEle=this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(i.getAttribute("data-col"),10)-1]):(0===parseInt(i.getAttribute("data-col"),10)?this.currentColumnResize="first":this.currentColumnResize="middle",this.columnEle=this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(i.getAttribute("data-col"),10)]),this.colIndex=this.columnEle.cellIndex,this.moveEle=e.target,this.appendHelper()),i.classList.contains("e-row-resize")&&(this.rowEle=this.curTable.rows[parseInt(i.getAttribute("data-row"),10)],this.resizeBtnStat.row=!0,this.appendHelper()),i.classList.contains("e-table-box")&&(this.resizeBtnStat.tableBox=!0),sf.base.Browser.isDevice&&this.helper&&!this.helper.classList.contains("e-reicon"))this.helper.classList.add("e-reicon"),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.removeHelper,this),sf.base.EventHandler.add(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart,this);else{this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"Table"}).then((function(e){e.cancel&&t.cancelResizeAction()}))}sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing,this),sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd,this)}}},i.prototype.calMaxCol=function(e){for(var t,i=0,n=0;n<e.rows.length;n++)i<e.rows[n].cells.length&&(t=n,i=e.rows[n].cells.length);return t},i.prototype.resizing=function(e){var t=this.getPointX(e),i=this.getPointY(e),n=this.parent.enableRtl?-(t-this.pageX):t-this.pageX,s=this.parent.enableRtl?-(i-this.pageY):i-this.pageY;this.pageX=t,this.pageY=i;var o,r=this.parent.getEditPanel().querySelector(".e-table-box"),a=parseInt(getComputedStyle(this.curTable).width,10),l=parseInt(getComputedStyle(this.curTable).height,10),d=+getComputedStyle(this.parent.getEditPanel()).paddingRight.match(/\d/g).join(""),h=this.parent.getEditPanel().offsetWidth-2*d;if(sf.base.isNullOrUndefined(this.curTable.parentElement.closest("table"))||sf.base.isNullOrUndefined(this.curTable.closest("td"))||!this.parent.getEditPanel().contains(this.curTable.closest("td")))o=h;else{var c=this.curTable.closest("td"),p=+getComputedStyle(c).paddingRight.match(/\d/g).join("");o=c.offsetWidth-(c.offsetWidth-c.clientWidth)-2*p}if(this.resizeBtnStat.column){var u=parseFloat(this.columnEle.offsetWidth.toString()),f="TH"===this.curTable.rows[0].cells[0].nodeName?1:0,m=parseFloat(this.curTable.style.width.split("%")[0]),g=parseFloat(this.curTable.rows[f].cells[this.colIndex].style.width.split("%")[0]);if("first"===this.currentColumnResize){if(n-=.75,this.removeResizeEle(),(0!==n&&5<g||n<0)&&m<=100&&this.convertPixelToPercentage(a-n,o)<=100){var v=this.findFirstLastColCells(this.curTable,!0);this.curTable.style.width=this.convertPixelToPercentage(a-n,o)>100?"100%":this.convertPixelToPercentage(a-n,o)+"%";var b=m-this.convertPixelToPercentage(a-n,o);this.currentMarginLeft=this.currentMarginLeft+b,this.curTable.style.marginLeft="calc("+("100%"===this.curTable.style.width?0:this.currentMarginLeft)+"%)";for(var y=0;y<v.length;y++)this.curTable.rows[y].cells[this.colIndex].style.width=g-b+"%"}}else if("last"===this.currentColumnResize){if(n+=.75,this.removeResizeEle(),(0!==n&&5<g||n>0)&&m<=100&&this.convertPixelToPercentage(a+n,o)<=100){var w=this.findFirstLastColCells(this.curTable,!1);this.curTable.style.width=this.convertPixelToPercentage(a+n,o)>100?"100%":this.convertPixelToPercentage(a+n,o)+"%";for(b=m-this.convertPixelToPercentage(a+n,o),y=0;y<w.length;y++)this.curTable.rows[y].cells[this.colIndex].style.width=g-b+"%"}}else{var C=this.curTable.rows[this.calMaxCol(this.curTable)].cells,S=u-n,E=parseFloat(this.columnEle.offsetWidth.toString())+parseFloat(C[this.colIndex-1].offsetWidth.toString());for(y=0;y<this.curTable.rows.length;y++)if(E-S>20&&S>20){var x=E-S,O=S;sf.base.isNullOrUndefined(this.curTable.rows[y].cells[this.colIndex-1])||(this.curTable.rows[y].cells[this.colIndex-1].style.width=this.convertPixelToPercentage(x,a)+"%"),sf.base.isNullOrUndefined(this.curTable.rows[y].cells[this.colIndex])||(this.curTable.rows[y].cells[this.colIndex].style.width=this.convertPixelToPercentage(O,a)+"%")}}this.updateHelper()}else if(this.resizeBtnStat.row){this.parent.defaultResize(e,!1);var T=parseFloat(this.rowEle.clientHeight.toString())+s;T>20&&(this.rowEle.style.height=T+"px"),this.curTable.style.height="",sf.base.isNullOrUndefined(r)||(r.style.cssText="top: "+(this.calcPos(this.curTable).top+l-4)+"px; left:"+(this.calcPos(this.curTable).left+a-4)+"px;"),this.updateHelper()}else if(this.resizeBtnStat.tableBox){sf.base.Browser.isDevice||sf.base.EventHandler.remove(this.parent.getEditPanel(),"mouseover",this.resizeHelper);var A=this.curTable.style.width.indexOf("%")>-1;this.curTable.style.width=A?this.convertPixelToPercentage(a+n,o)+"%":a+n+"px",this.curTable.style.height=l+s+"px",sf.base.isNullOrUndefined(r)||(r.classList.add("e-rbox-select"),r.style.cssText="top: "+(this.calcPos(this.curTable).top+l-4)+"px; left:"+(this.calcPos(this.curTable).left+a-4)+"px;")}},i.prototype.resizeEnd=function(e){this.resizeBtnInit();var t=this.parent.getEditPanel().querySelector(".e-table-box");sf.base.isNullOrUndefined(t)||(t.classList.remove("e-hide"),this.rzProgress=!1),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),t&&this.parent.getEditPanel().contains(t)&&(sf.base.Browser.isDevice||sf.base.EventHandler.add(this.parent.getEditPanel(),"mouseover",this.resizeHelper,this),this.removeResizeEle()),this.helper&&this.parent.getEditPanel().contains(this.helper)&&(sf.base.detach(this.helper),this.helper=null),this.pageX=null,this.pageY=null,this.moveEle=null;this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"Table"}),this.parent.formatter.saveData()},i.prototype.resizeBtnInit=function(){return this.resizeBtnStat={column:!1,row:!1,tableBox:!1}},i.prototype.removeResizeEle=function(){var e=this.parent.getEditPanel().querySelectorAll(".e-column-resize, .e-row-resize, .e-table-box");if(e.length>0)for(var t=0;t<e.length;t++)sf.base.detach(e[t])},i.prototype.appendHelper=function(){this.helper=sf.base.createElement("div",{className:"e-table-rhelper"}),sf.base.Browser.isDevice&&this.helper.classList.add("e-reicon"),this.parent.getEditPanel().appendChild(this.helper),this.setHelperHeight()},i.prototype.setHelperHeight=function(){var e=this.calcPos(this.curTable);this.resizeBtnStat.column?(this.helper.classList.add("e-column-helper"),this.helper.style.cssText="height: "+getComputedStyle(this.curTable).height+"; top: "+e.top+"px; left:"+(e.left+this.calcPos(this.columnEle).left+("last"===this.currentColumnResize?this.columnEle.offsetWidth+2:0)-1)+"px;"):(this.helper.classList.add("e-row-helper"),this.helper.style.cssText="width: "+getComputedStyle(this.curTable).width+"; top: "+(this.calcPos(this.rowEle).top+e.top+this.rowEle.offsetHeight)+"px; left:"+(this.calcPos(this.rowEle).left+e.left)+"px;")},i.prototype.updateHelper=function(){var e=this.calcPos(this.curTable);if(this.resizeBtnStat.column){var t=e.left+this.calcPos(this.columnEle).left+("last"===this.currentColumnResize?this.columnEle.offsetWidth+2:0)-1;this.helper.style.left=t+"px"}else{var i=this.calcPos(this.rowEle).top+e.top+this.rowEle.offsetHeight;this.helper.style.top=i+"px"}},i.prototype.removeHelper=function(e){!e.target.classList.contains("e-reicon")&&this.helper&&(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart),this.helper&&this.parent.getEditPanel().contains(this.helper)&&sf.base.detach(this.helper),this.pageX=null,this.helper=null)},i.prototype.findFirstLastColCells=function(e,t){for(var i=[],n=e.querySelectorAll("tr"),s=0;s<n.length;s++)if(n[s].closest("table")===e){var o=n[s].querySelectorAll("th, td");i.push(t?o[0]:o[o.length-1])}return i},i.prototype.convertPixelToPercentage=function(e,t){return e/t*100},i.prototype.cancelResizeAction=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),this.removeResizeEle()},i.prototype.calcPos=function(e){for(var t={top:0,left:0},i=e.getBoundingClientRect(),n=e.ownerDocument,s=e.offsetParent||n.documentElement,o=!1;s&&(s===n.body||s===n.documentElement)&&"static"===s.style.position;)s=s.parentNode;return"TD"===s.nodeName&&"TABLE"===e.nodeName&&(s=sf.base.closest(s,".e-rte-content"),o=!0),s&&s!==e&&1===s.nodeType&&(t=s.getBoundingClientRect()),o?(o=!1,{top:this.parent.inputElement&&this.parent.inputElement.scrollTop>0?this.parent.inputElement.scrollTop+i.top-t.top:i.top-t.top,left:this.parent.inputElement&&this.parent.inputElement.scrollLeft>0?this.parent.inputElement.scrollLeft+i.left-t.left:i.left-t.left}):{top:e.offsetTop,left:e.offsetLeft}},i.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},i.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},i.prototype.editAreaClickHandler=function(e){if(!this.parent.readonly&&sf.base.isNullOrUndefined(sf.base.closest(e.args.target,".e-img-caption"))){var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(!(2===t.which||i&&1===t.which||!i&&3===t.which)&&"HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){this.quickToolObj=this.parent.quickToolbarModule;var n=this.parent.element.getBoundingClientRect(),s=t.target,o=this.parent.getToolbarElement(),r=o?o.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0,a=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),l=sf.base.closest(s,"table");if(s&&"A"!==s.nodeName&&"IMG"!==s.nodeName&&"VIDEO"!==s.nodeName&&!s.classList.contains("e-clickelem")&&"AUDIO"!==s.nodeName&&("TD"===s.nodeName||"TH"===s.nodeName||"TABLE"===s.nodeName||l&&this.parent.getEditPanel().contains(l))&&(3!==a.startContainer.nodeType||a.collapsed)){var d=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.parent.formatter.editorManager.nodeSelection.save(d,this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument());var h=this.parent.iframeSettings.enable?window.pageXOffset+n.left+t.clientX:t.pageX,c=this.parent.iframeSettings.enable?window.pageYOffset+n.top+r+t.clientY:t.pageY;this.quickToolObj.showTableQTBar(h,c,s,"Table"),this.parent.formatter.editorManager.nodeSelection.restore()}else this.hideTableQuickToolbar()}}},i.prototype.hideTableQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.hideTableQTBar()},i.prototype.onToolbarAction=function(e){switch(e.args.item.subCommand){case"TableHeader":this.tableHeader(e.selection,e.args);break;case"TableRemove":this.removeTable(e.selection,e.args);break;case"TableEditProperties":this.editTable(e)}},i.prototype.tableHeader=function(e,t){this.parent.formatter.process(this.parent,t,t.originalEvent,{selection:e,subCommand:t.item.subCommand})},i.prototype.removeTable=function(e,t,i){var n;i&&(n={item:{command:"Table",subCommand:"TableRemove"}});var s={selection:e,subCommand:i?n.item.subCommand:t.item.subCommand};this.parent.formatter.process(this.parent,i?n:t,t.originalEvent,s),this.parent.getEditPanel().focus(),this.removeResizeEle(),this.hideTableQuickToolbar()},i.prototype.editTable=function(e){var t=e.selectParent[0];this.tableNotifyArgs.selectNode=e.selectParent;var i=sf.base.closest(t,"table").getClientRects()[0].width,n=sf.base.closest(t,"td").style.padding,s=sf.base.closest(t,"table").getAttribute("cellspacing");this.hideTableQuickToolbar(),this.createDialog({width:i,padding:parseFloat((""!==n?parseInt(n,null):0).toString()),spacing:parseFloat((""===s||sf.base.isNullOrUndefined(s)?0:parseInt(s,null)).toString())},"Edit")},i.prototype.dropdownSelect=function(e){this.parent.observer.notify(o,{});var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Table"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n={args:e,selection:this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)};switch(t.subCommand){case"InsertRowBefore":case"InsertRowAfter":this.addRow(n.selection,e);break;case"InsertColumnLeft":case"InsertColumnRight":this.addColumn(n.selection,e);break;case"DeleteColumn":case"DeleteRow":this.removeRowColumn(n.selection,e);break;case"AlignTop":case"AlignMiddle":case"AlignBottom":this.verticalAlign(n,e);break;case"Dashed":case"Alternate":case"Custom":this.tableStyles(n,t.subCommand);break;case"Merge":case"VerticalSplit":case"HorizontalSplit":this.UpdateCells(n.selection,e)}}},i.prototype.tableMouseUp=function(e){sf.base.EventHandler.remove(this.curTable,"mousemove",this.tableMove)},i.prototype.UpdateCells=function(e,t){this.parent.formatter.process(this.parent,t,t,{selection:e,subCommand:t.item.subCommand}),this.hideTableQuickToolbar()},i.prototype.addRow=function(e,t,i){var n;i&&(n={item:{command:"Table",subCommand:"InsertRowAfter"}});var s={selection:e,subCommand:i?n.item.subCommand:t.item.subCommand};this.parent.formatter.process(this.parent,i?n:t,t,s)},i.prototype.addColumn=function(e,t){this.parent.formatter.process(this.parent,t,t,{selection:e,width:this.parent.tableSettings.width,subCommand:t.item.subCommand})},i.prototype.removeRowColumn=function(e,t){this.parent.observer.notify(r,{}),this.parent.formatter.process(this.parent,t,t,{selection:e,subCommand:t.item.subCommand}),this.hideTableQuickToolbar(),this.parent.observer.notify(o,{})},i.prototype.verticalAlign=function(e,t){var i=sf.base.closest(e.selectParent[0],"td")||sf.base.closest(e.selectParent[0],"th");i&&this.parent.formatter.process(this.parent,t,t,{tableCell:i,subCommand:t.item.subCommand})},i.prototype.tableStyles=function(e,t){var i=sf.base.closest(e.selectParent[0],"table");if("Dashed"===t&&(this.parent.element.classList.contains("e-dashed-border")?this.parent.element.classList.remove("e-dashed-border"):this.parent.element.classList.add("e-dashed-border"),i.classList.contains("e-dashed-border")?i.classList.remove("e-dashed-border"):i.classList.add("e-dashed-border")),"Alternate"===t&&(this.parent.element.classList.contains("e-alternate-border")?this.parent.element.classList.remove("e-alternate-border"):this.parent.element.classList.add("e-alternate-border"),i.classList.contains("e-alternate-border")?i.classList.remove("e-alternate-border"):i.classList.add("e-alternate-border")),e.args&&e.args.item.cssClass)for(var n=e.args.item.cssClass.split(" "),s=0;s<n.length;s++)i.classList.contains(n[s])?i.classList.remove(n[s]):i.classList.add(n[s]);this.parent.formatter.saveData(),this.parent.formatter.editorManager.nodeSelection.restore(),this.hideTableQuickToolbar()},i.prototype.setBGColor=function(e){var t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()).range.startContainer;if((i=3===i.nodeType?sf.base.closest(i.parentNode,"td,th"):sf.base.closest(i,"td, th"))&&("TD"===i.nodeName||"TH"===i.nodeName)){for(var n=sf.base.closest(i,"table").querySelectorAll(".e-cell-select"),s=0;s<n.length;s++)n[s].style.backgroundColor=e.item.value;this.parent.formatter.saveData()}this.hideTableQuickToolbar()},i.prototype.closeOpenedDialog=function(){var e=this.parent.element.querySelector(".e-rte-table-popup"),t=this.parent.element.querySelector(".e-rte-edit-table");e&&this.parent.dotNetRef.invokeMethodAsync("CloseCreateTableDialog"),t&&this.parent.dotNetRef.invokeMethodAsync("CloseTableDialog")},i.prototype.showDialog=function(e,t){if(e&&this.parent.getEditPanel().focus(),"HTML"===this.parent.editorMode){var i=this.parent.getDocument(),n=this.parent.formatter.editorManager.nodeSelection.getRange(i),s=this.parent.formatter.editorManager.nodeSelection.save(n,i);this.parent.observer.notify(o,{});var r={originalEvent:e?void 0:t.args,item:{command:"Table",subCommand:"CreateTable"}};this.tableNotifyArgs={args:r,selection:s},this.insertTableDialog()}},i.prototype.keyDown=function(e){var t=e.args;switch(t.action){case"escape":break;case"insert-table":this.showDialog(!1,e),t.preventDefault()}if(!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&this.parent.getEditPanel()&&"KeyK"!==t.code){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),o=s[0!==i.endOffset&&9===t.keyCode?s.length-1:0];if(o=o&&"TD"!==o.tagName&&"TH"!==o.tagName?o.parentElement:o,(8===t.keyCode||46===t.keyCode||t.ctrlKey&&88===t.keyCode)&&(o&&"TBODY"===o.tagName?(t.preventDefault(),this.removeTable(n,t,!0)):o&&o.querySelectorAll("table").length>0&&this.removeResizeEle()),o&&"TD"!==o.tagName&&"TH"!==o.tagName){var r=sf.base.closest(o,"td");o=!sf.base.isNullOrUndefined(r)&&this.parent.inputElement.contains(r)?r:o}if(o&&("TD"===o.tagName||"TH"===o.tagName))switch(t.keyCode){case 9:case 37:case 39:this.tabSelection(t,n,o);break;case 40:case 38:this.tableArrowNavigation(t,n,o)}}},i.prototype.docClick=function(e){var t=e.args.target,i=this.parent.element.querySelector(".e-rte-table-popup"),n=this.parent.element.querySelector(".e-rte-edit-table");t&&t.classList&&(i&&!sf.base.closest(t,"#"+i.id)||n&&!sf.base.closest(t,"#"+n.id))&&!t.classList.contains("e-create-table")&&t.offsetParent&&!t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")&&(this.closeOpenedDialog(),this.parent.isBlur=!0,sf.base.Browser.isIE&&A(this.parent.element,"focusout"));var s=sf.base.closest(t,"td"),o=!(!s||!this.parent.getEditPanel().contains(s));!t||"TD"===t.tagName||"TH"===t.tagName||o||null!==sf.base.closest(t,".e-rte-quick-popup")||!t.offsetParent||t.offsetParent.classList.contains("e-quick-dropdown")||t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")||sf.base.closest(t,".e-rte-dropdown-popup")||sf.base.closest(t,".e-rte-elements")||(sf.base.removeClass(this.parent.inputElement.querySelectorAll("table td"),"e-cell-select"),sf.base.Browser.isIE||this.hideTableQuickToolbar()),!t||!t.classList||t.classList.contains("e-column-resize")||t.classList.contains("e-row-resize")||t.classList.contains("e-table-box")||this.removeResizeEle()},i.prototype.onIframeMouseDown=function(){this.closeOpenedDialog()},i.prototype.keyUp=function(e){var t=e.args;(8===t.which&&"Backspace"===t.code||46===t.which&&"Delete"===t.code)&&this.hideTableQuickToolbar()},i.prototype.destroy=function(){this.removeEventListener()},i}(),U=function(){function i(e){this.pageX=null,this.pageY=null,this.deletedImg=[],this.parent=e,this.rteId=e.element.id,this.addEventListener()}return i.prototype.addEventListener=function(){this.parent.observer.on(n,this.onKeyUp,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(l,this.imagePaste,this),this.parent.observer.on(s,this.onKeyDown,this),this.parent.observer.on("imageSize",this.imageSize,this),this.parent.observer.on("caption",this.caption,this),this.parent.observer.on("delete",this.deleteImg,this),this.parent.observer.on("imgAltText",this.insertAltText,this),this.parent.observer.on(e,this.afterRender,this),this.parent.observer.on("insertImgLink",this.insertImgLink,this),this.parent.observer.on("insertImage",this.imageDialog,this),this.parent.observer.on("resize",this.onWindowResize,this),this.parent.observer.on("dropDownSelect",this.alignmentSelect,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("image-toolbar-action",this.onToolbarAction,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("insertCompleted",this.showImageQuickToolbar,this)},i.prototype.removeEventListener=function(){this.parent.observer.off(n,this.onKeyUp),this.parent.observer.off(t,this.destroy),this.parent.observer.off(l,this.imagePaste),this.parent.observer.off(s,this.onKeyDown),this.parent.observer.off("imageSize",this.imageSize),this.parent.observer.off("caption",this.caption),this.parent.observer.off("delete",this.deleteImg),this.parent.observer.off("imgAltText",this.insertAltText),this.parent.observer.off(e,this.afterRender),this.parent.observer.off("insertImgLink",this.insertImgLink),this.parent.observer.off("insertImage",this.imageDialog),this.parent.observer.off("resize",this.onWindowResize),this.parent.observer.off("dropDownSelect",this.alignmentSelect),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("image-toolbar-action",this.onToolbarAction),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("insertCompleted",this.showImageQuickToolbar);var i=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;i.removeEventListener("drop",this.dragDrop.bind(this),!0),i.removeEventListener("dragstart",this.dragStart.bind(this),!0),i.removeEventListener("dragenter",this.dragEnter.bind(this),!0),i.removeEventListener("dragover",this.dragOver.bind(this),!0),sf.base.isNullOrUndefined(this.parent.getEditPanel())||(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.imageClick),this.parent.formatter.editorManager.observer.off(d,this.undoStack),this.parent.insertImageSettings.resize&&(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),sf.base.EventHandler.remove(this.parent.getEditPanel(),"cut",this.onCutHandler)))},i.prototype.afterRender=function(){sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.imageClick,this),this.parent.insertImageSettings.resize&&(sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart,this),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),sf.base.EventHandler.add(this.parent.getEditPanel(),"cut",this.onCutHandler,this));var e=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;e.addEventListener("drop",this.dragDrop.bind(this),!0),e.addEventListener("dragstart",this.dragStart.bind(this),!0),e.addEventListener("dragenter",this.dragOver.bind(this),!0),e.addEventListener("dragover",this.dragOver.bind(this),!0)},i.prototype.imageDialog=function(e){if(this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null),this.uploadUrl={url:""},this.selectionObj={selfImage:this,selection:e.selection,args:e.args,selectParent:e.selectParent},!sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode){var t=this.parent.iframeSettings.enable;if("HTML"===this.parent.editorMode&&(!t&&sf.base.isNullOrUndefined(sf.base.closest(e.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))||t&&sf.base.isNullOrUndefined(e.selection.range.startContainer.parentNode.ownerDocument.querySelector("body")))){this.parent.getEditPanel().focus();var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.imgUploadSave=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),this.imgUploadSelectedParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)}else this.imgUploadSave=e.selection,this.imgUploadSelectedParent=e.selectParent}var n={mode:e.selectNode&&"IMG"===e.selectNode[0].nodeName?"Edit":"Insert"};this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",n),this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.isNullOrUndefined(e.selectParent)||sf.base.removeClass([e.selectParent[0]],"e-img-focus"),this.quickToolObj.hideInlineQTBar())},i.prototype.checkImageBack=function(e){"#text"!==e.startContainer.nodeName||0!==e.startOffset||sf.base.isNullOrUndefined(e.startContainer.previousSibling)||"IMG"!==e.startContainer.previousSibling.nodeName?"#text"===e.startContainer.nodeName||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset-1])||"IMG"!==e.startContainer.childNodes[e.startOffset-1].nodeName||this.deletedImg.push(e.startContainer.childNodes[e.startOffset-1]):this.deletedImg.push(e.startContainer.previousSibling)},i.prototype.checkImageDel=function(e){"#text"!==e.startContainer.nodeName||e.startOffset!==e.startContainer.textContent.length||sf.base.isNullOrUndefined(e.startContainer.nextSibling)||"IMG"!==e.startContainer.nextSibling.nodeName?"#text"===e.startContainer.nodeName||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset])||"IMG"!==e.startContainer.childNodes[e.startOffset].nodeName||this.deletedImg.push(e.startContainer.childNodes[e.startOffset]):this.deletedImg.push(e.startContainer.nextSibling)},i.prototype.getDropRange=function(e,t){var i=this.parent.getDocument().createRange();this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),i);var n=this.parent.getDocument().elementFromPoint(e,t),s=n.childNodes.length>0?n.childNodes[0]:n,o=0;if("<br>"===this.parent.inputElement.firstChild.innerHTML)i.setStart(s,o),i.setEnd(s,o);else{var r=void 0;do{o++,i.setStart(s,o),i.setEnd(s,o+1),r=i.getBoundingClientRect()}while(r.left<e&&o<s.length-1)}return i},i.prototype.selectRange=function(e){var t;this.parent.getDocument().caretRangeFromPoint?t=this.parent.getDocument().caretRangeFromPoint(e.clientX,e.clientY):e.rangeParent?(t=this.parent.getDocument().createRange()).setStart(e.rangeParent,e.rangeOffset):t=this.getDropRange(e.clientX,e.clientY),this.parent.observer.notify("selectRange",{range:t})},i.prototype.imageDropInitialized=function(e){var t=this.imageDragArgs;if(this.parent.element.querySelector(".e-img-resize")&&sf.base.detach(this.imgResizeDiv),this.selectRange(this.imageDragArgs),!(this.dropFiles.length>1)){this.parent.observer.notify("drop",{args:t});for(var i=this.dropFiles,n=i[0].name,s=n.substring(n.lastIndexOf(".")),o=this.parent.insertImageSettings.allowedTypes,r=0;r<o.length;r++)if(s.toLocaleLowerCase()===o[r].toLowerCase())if(this.parent.insertImageSettings.saveUrl||e)this.onSelect(this.dropFiles);else{var a={text:"",file:i[0]};this.imagePaste(a)}}},i.prototype.insertDragImage=function(e,t){var i=this;e.preventDefault();var n=this.parent.element.querySelector("e-popup-open");if(this.parent.observer.notify("drop",{args:e}),n&&n.classList.add("e-hide"),t.length<=0){var s=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),o=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image");if(o&&"IMG"===o.tagName){o.nextElementSibling&&o.nextElementSibling.classList.contains("e-img-inner")?s.insertNode(o.parentElement.parentElement):s.insertNode(o),o.classList.remove("e-rte-drag-image"),o.addEventListener("load",(function(){i.parent.actionCompleteEnabled&&i.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",null)})),this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument());var r=e;this.resizeStart(r,o),this.hideImageQuickToolbar()}}},i.prototype.onSelect=function(e){var t=this,i=this,n=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),s={name:"",size:0,status:"",statusCode:"",type:"",rawFile:e[0],validationMessages:{}};this.droppedImage=sf.base.createElement("IMG"),this.droppedImage.style.opacity="0.5",this.droppedImage.classList.add("e-rte-image"),this.droppedImage.classList.add("e-imginline"),this.droppedImage.classList.add("e-resize");var o=s.rawFile,r=new FileReader;r.addEventListener("load",(function(){var e=URL.createObjectURL(I(r.result));t.droppedImage.src="Blob"===i.parent.insertImageSettings.saveFormat?e:r.result})),o&&r.readAsDataURL(o),n.insertNode(this.droppedImage),n.selectNodeContents(this.droppedImage),this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),n),this.droppedImage.addEventListener("load",(function(){t.parent.actionCompleteEnabled&&t.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",null)}))},i.prototype.removeDroppedImage=function(){sf.base.detach(this.droppedImage)},i.prototype.dropUploadSuccess=function(e,t){this.droppedImage.style.opacity="1",this.droppedImage.classList.add("e-img-focus"),this.droppedImage.src=e,this.droppedImage.alt=t,this.showImageQuickToolbar({args:this.imageDragArgs,type:"Images",isNotify:void 0,elements:this.droppedImage}),this.resizeStart(this.imageDragArgs,this.droppedImage)},i.prototype.dropUploadChange=function(e,t){t&&(this.droppedImage.src=e,this.droppedImage.style.opacity="1")},i.prototype.imagePaste=function(e){var t=this;if(0===e.text.length&&!sf.base.isNullOrUndefined(e.file)){var i=this,n=new FileReader;e.args&&e.args.preventDefault(),n.addEventListener("load",(function(s){var o={cssClass:"inline"===i.parent.insertImageSettings.display?"e-imginline":"e-imgbreak",url:"Base64"!==t.parent.insertImageSettings.saveFormat&&sf.base.isNullOrUndefined(e.callBack)?URL.createObjectURL(I(n.result)):n.result,width:{width:i.parent.insertImageSettings.width,minWidth:i.parent.insertImageSettings.minWidth,maxWidth:i.getMaxWidth()},height:{height:i.parent.insertImageSettings.height,minHeight:i.parent.insertImageSettings.minHeight,maxHeight:i.parent.insertImageSettings.maxHeight}};sf.base.isNullOrUndefined(e.callBack)?(i.parent.formatter.process(i.parent,{item:{command:"Images",subCommand:"Image"}},e.args,o),t.showPopupToolBar(e,o)):e.callBack(o)})),n.readAsDataURL(e.file)}},i.prototype.showPopupToolBar=function(e,t){var i=this,n='img[src="'+t.url+'"]',s=this.parent.inputElement.querySelector(n),o={args:e.args,type:"Images",isNotify:void 0,elements:s};s&&setTimeout((function(){i.showImageQuickToolbar(o),i.resizeStart(e.args,s)}),0)},i.prototype.undoStack=function(e){if("undo"===e.subCommand.toLowerCase()||"redo"===e.subCommand.toLowerCase())for(var t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){var i=sf.base.createElement("div"),n=k(this.parent.formatter.getUndoRedoStack()[t].text);i.appendChild(n);var s=i.querySelectorAll("img");if(i.querySelector(".e-img-resize")&&s.length>0){for(var o=0;o<s.length;o++)s[o].style.outline="";sf.base.detach(i.querySelector(".e-img-resize")),this.parent.formatter.getUndoRedoStack()[t].text=i.innerHTML}}},i.prototype.imageResize=function(e){this.resizeBtnInit(),this.imgEle=e,sf.base.addClass([this.imgEle],"e-resize"),this.imgResizeDiv=sf.base.createElement("span",{className:"e-img-resize",id:this.rteId+"_imgResize"}),this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-topLeft",styles:"cursor: nwse-resize"})),this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-topRight",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-botLeft",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-botRight",styles:"cursor: nwse-resize"})),sf.base.Browser.isDevice&&sf.base.addClass([this.imgResizeDiv],"e-mob-rte"),e.style.outline="2px solid #4a90e2",this.imgResizePos(e,this.imgResizeDiv),this.resizeImgDupPos(e),this.parent.getEditPanel().appendChild(this.imgResizeDiv),sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing,this)},i.prototype.resizeBtnInit=function(){return this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}},i.prototype.imgResizePos=function(e,t){var i=this.calcPos(e),n=i.top,s=i.left,o=e.width,r=e.height,a=sf.base.Browser.isDevice?4*parseInt(e.style.outline.slice(-3),10)+2:2*parseInt(e.style.outline.slice(-3),10)+2,l=sf.base.Browser.isDevice?0:2;t.querySelector(".e-rte-botLeft").style.left=s-a+"px",t.querySelector(".e-rte-botLeft").style.top=r-a+n+"px",t.querySelector(".e-rte-botRight").style.left=o-(a-l)+s+"px",t.querySelector(".e-rte-botRight").style.top=r-a+n+"px",t.querySelector(".e-rte-topRight").style.left=o-(a-l)+s+"px",t.querySelector(".e-rte-topRight").style.top=n-a+"px",t.querySelector(".e-rte-topLeft").style.left=s-a+"px",t.querySelector(".e-rte-topLeft").style.top=n-a+"px"},i.prototype.resizeImgDupPos=function(e){this.imgDupPos={width:""!==e.style.height?this.imgEle.style.width:e.width+"px",height:""!==e.style.height?this.imgEle.style.height:e.height+"px"}},i.prototype.calcPos=function(e){for(var t,i={top:0,left:0},n=e.ownerDocument,s=(e.offsetParent&&(e.offsetParent.classList.contains("e-img-caption")||["TD","TH","TABLE","A"].indexOf(e.offsetParent.tagName)>-1)?sf.base.closest(e,"#"+this.rteId+"_rte-edit-view"):e.offsetParent)||n.documentElement;s&&(s===n.body||s===n.documentElement)&&"static"===s.style.position;)s=s.parentNode;return s&&s!==e&&1===s.nodeType&&(i=s.getBoundingClientRect()),e.offsetParent&&e.offsetParent.classList.contains("e-img-caption")?{top:(t=e.getBoundingClientRect()).top-i.top,left:t.left-i.left}:{top:e.offsetTop,left:e.offsetLeft}},i.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},i.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},i.prototype.pixToPercent=function(e,t){return e/parseFloat(getComputedStyle(t).width)*100},i.prototype.imgDupMouseMove=function(e,t,i){parseInt(this.parent.insertImageSettings.minWidth,10)>=parseInt(e,10)||parseInt(this.getMaxWidth(),10)<=parseInt(e,10)||!this.parent.insertImageSettings.resizeByPercent&&(parseInt(this.parent.insertImageSettings.minHeight,10)>=parseInt(t,10)||parseInt(this.parent.insertImageSettings.maxHeight,10)<=parseInt(t,10))||(this.imgEle.parentElement.style.cursor="pointer",this.setAspectRatio(this.imgEle,parseInt(e,10),parseInt(t,10),i),this.resizeImgDupPos(this.imgEle),this.imgResizePos(this.imgEle,this.imgResizeDiv),this.parent.setContentHeight("",!1))},i.prototype.setAspectRatio=function(e,t,i,n){if(!sf.base.isNullOrUndefined(e.width)){var s=""!==e.style.width?parseInt(e.style.width,10):e.width,o=""!==e.style.height?parseInt(e.style.height,10):e.height;s>o?this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPercent(s/o*i,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""===e.style.width&&""!==e.style.height?e.style.height=i+"px":""!==e.style.width&&""===e.style.height?e.style.width=(s/o*i+s/o).toString()+"px":""!==e.style.width?(e.style.width=s/o*i+"px",e.style.height=i+"px"):e.setAttribute("width",(s/o*i+s/o).toString()):o>s?this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPercent(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width?(e.style.width=t+"px",e.style.height=o/s*t+"px"):e.setAttribute("width",this.resizeBtnStat.botRight?(this.getPointX(n)-e.getBoundingClientRect().left).toString():t.toString()):this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPercent(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):(e.style.width=t+"px",e.style.height=t+"px")}},i.prototype.getMaxWidth=function(){var e=this.parent.insertImageSettings.maxWidth,t=this.parent.getEditPanel(),i=window.getComputedStyle(t),n=t.offsetWidth-(14+parseFloat(i.paddingLeft.split("px")[0])+parseFloat(i.paddingRight.split("px")[0])+parseFloat(i.marginLeft.split("px")[0])+parseFloat(i.marginRight.split("px")[0]));return sf.base.isNullOrUndefined(e)?n:e},i.prototype.cancelResizeAction=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),this.imgEle&&this.imgResizeDiv&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&(sf.base.detach(this.imgResizeDiv),this.imgEle.style.outline="",this.imgResizeDiv=null,this.pageX=null,this.pageY=null)},i.prototype.removeResizeEle=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),sf.base.detach(this.parent.getEditPanel().querySelector(".e-img-resize"))},i.prototype.onWindowResize=function(){sf.base.isNullOrUndefined(this.parent)||sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-img-resize"))||this.cancelResizeAction()},i.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideImageQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(2===t.which||i&&1===t.which||!i&&3===t.which)i&&1===t.which&&!sf.base.isNullOrUndefined(t.target)&&"IMG"===t.target.tagName&&(this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),t.target));else if("HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){this.quickToolObj=this.parent.quickToolbarModule;var n,s=t.target;if(n=document.body.querySelector("#"+this.rteId+"_Image_Quick_Popup").classList.contains("e-rte-pop"),"IMG"===s.nodeName&&this.parent.quickToolbarModule){if(n)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),s),u()&&this.parent.observer.notify(o,e),sf.base.addClass([s],"e-img-focus"),this.showImageQuickToolbar({args:t,type:"Images",elements:[t.target]})}else this.hideImageQuickToolbar()}}},i.prototype.showImageQuickToolbar=function(e){var t=this,i="ImageLink";if("Images"===e.type&&!sf.base.isNullOrUndefined(this.parent.quickToolbarModule)){this.quickToolObj=this.parent.quickToolbarModule;var n=e.args,s=e.elements,o=this.parent.element.getBoundingClientRect(),r=this.parent.getToolbarElement(),a=r?r.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;[].forEach.call(e.elements,(function(e,t){0===t&&(s=e)})),s&&!sf.base.closest(s,"a")&&(i="Image"),"IMG"===s.nodeName&&sf.base.addClass([s],["e-img-focus"]);var l=this.parent.iframeSettings.enable?window.pageXOffset+o.left+n.clientX:n.pageX,d=this.parent.iframeSettings.enable?window.pageYOffset+o.top+a+n.clientY:n.pageY;this.quickToolObj&&(e.isNotify?setTimeout((function(){t.quickToolObj.showImageQTBar(l,d,s,i)}),400):this.quickToolObj.showImageQTBar(l,d,s,i))}},i.prototype.hideImageQuickToolbar=function(){sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-img-focus"))||(sf.base.removeClass([this.parent.getEditPanel().querySelector(".e-img-focus")],"e-img-focus"),this.quickToolObj&&this.quickToolObj.hideImageQTBar())},i.prototype.onToolbarAction=function(e){switch(this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.removeClass([e.selectNode[0]],"e-img-focus")),this.selectionObj=e,u()&&this.parent.observer.notify(r,{}),e.args.item.subCommand){case"Replace":this.parent.observer.notify("insertImage",e);break;case"Caption":this.parent.observer.notify("caption",e);break;case"InsertLink":this.parent.observer.notify("insertImgLink",e);break;case"AltText":this.parent.observer.notify("imgAltText",e);break;case"Remove":this.parent.observer.notify("delete",e);break;case"Dimension":this.parent.observer.notify("imageSize",e);break;case"OpenImageLink":this.openImgLink(e);break;case"EditImageLink":this.editImgLink(e);break;case"RemoveImageLink":this.removeImgLink(e)}},i.prototype.openImgLink=function(e){var t=""===e.selectParent[0].parentNode.target?"_self":"_blank";this.parent.formatter.process(this.parent,e.args,e.args,{url:e.selectParent[0].parentNode.href,target:t,selectNode:e.selectNode,subCommand:e.args.item.subCommand})},i.prototype.editImgLink=function(e){var t=e.selectParent[0].parentNode,i={url:t.href,target:t.target};this.insertImgLink(e,i)},i.prototype.removeImgLink=function(e){sf.base.Browser.isIE&&this.parent.getEditPanel().focus(),e.selection.restore();var t=!(!this.parent.getEditPanel().contains(this.captionEle)||!sf.base.select("a",this.captionEle)),i=t?[this.captionEle]:[e.selectNode[0].parentElement];this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:e.selectNode[0],selectParent:i,selection:e.selection,subCommand:e.args.item.subCommand}),this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.isNullOrUndefined(e.selectParent)||sf.base.removeClass([e.selectParent[0]],"e-img-focus")),t&&sf.base.select(".e-img-inner",this.captionEle).focus()},i.prototype.caption=function(e){var t=e.selectNode[0];if("IMG"===t.nodeName){e.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.cancelResizeAction(),sf.base.addClass([t],"e-rte-image");var i=e.args.item?e.args.item.subCommand:"Caption";if(sf.base.isNullOrUndefined(sf.base.closest(t,".e-img-caption"))){this.captionEle=sf.base.createElement("span",{className:"e-img-caption e-rte-img-caption",attrs:{contenteditable:"false",draggable:"false"}});var n=sf.base.createElement("span",{className:"e-img-wrap"}),s=sf.base.createElement("span",{className:"e-img-inner",attrs:{contenteditable:"true"}}),o=e.selectNode[0].parentElement;"A"===o.tagName&&o.setAttribute("contenteditable","true"),n.appendChild("A"===o.tagName?o:e.selectNode[0]),n.appendChild(s);var r=this.parent.localeData.imageCaption;s.innerHTML=r,this.captionEle.appendChild(n),t.classList.contains("e-imginline")&&sf.base.addClass([this.captionEle],"e-caption-inline"),t.classList.contains("e-imgbreak")&&sf.base.addClass([this.captionEle],"e-imgbreak"),t.classList.contains("e-imgleft")&&sf.base.addClass([this.captionEle],"e-imgleft"),t.classList.contains("e-imgright")&&sf.base.addClass([this.captionEle],"e-imgright"),t.classList.contains("e-imgcenter")&&sf.base.addClass([this.captionEle],"e-imgcenter"),this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:this.captionEle,selectNode:e.selectNode,subCommand:i}),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),s.childNodes[0],s.childNodes[0],0,s.childNodes[0].textContent.length)}else sf.base.detach(sf.base.closest(t,".e-img-caption")),sf.base.Browser.isIE&&(this.parent.getEditPanel().focus(),e.selection.restore()),"A"===t.parentElement.tagName?this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:t.parentElement,selectNode:e.selectNode,subCommand:i}):this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:t,selectNode:e.selectNode,subCommand:i});this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.removeClass([t],"e-img-focus"))}},i.prototype.insertImgLink=function(e,t){var i;"IMG"===e.selectNode[0].nodeName&&(i=sf.base.isNullOrUndefined(t)?{mode:"InsertLink",newWindow:!0,url:""}:{mode:"EditLink",newWindow:!!t.target,url:t.url},this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",i))},i.prototype.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)},i.prototype.insertLink=function(e,t){if("IMG"===this.selectionObj.selectNode[0].nodeName){var i=document.querySelector(".e-rte-img-dialog .e-img-link");if(""===e)return sf.base.addClass([i],"e-error"),i.setSelectionRange(0,e.length),void i.focus();if(this.isUrl(e)?sf.base.removeClass([i],"e-error"):e="http://"+e,"HTML"===this.parent.editorMode&&this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),"A"===this.selectionObj.selectNode[0].parentElement.nodeName)return this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{url:e,target:t,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand}),void this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null);this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{url:e,target:t,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand,selection:this.selectionObj.selection});var n=sf.base.closest(this.selectionObj.selectNode[0],".e-img-caption");n&&sf.base.select(".e-img-inner",n).focus(),this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)}},i.prototype.insertAltText=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.selectNode[0].getAttribute("alt"),i={mode:"AltText",altText:null===t?"":t};this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",i)}},i.prototype.insertAlt=function(e){this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{altText:e,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand}),this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)},i.prototype.deleteImg=function(e,t){if("IMG"===e.selectNode[0].nodeName){var i={src:e.selectNode[0].getAttribute("src")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.parent.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:"e-img-caption",subCommand:e.args.item.subCommand}),this.quickToolObj&&this.quickToolObj.hideImageQTBar(),this.cancelResizeAction(),sf.base.isNullOrUndefined(t)&&this.parent.imageDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("AfterImageDeleteEvent",i)}},i.prototype.imageSize=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.selectNode[0],i={mode:"Dimension",width:"auto"===t.style.width.toString()||t.style.width.toString()?t.style.width.toString():parseInt(t.getClientRects()[0].width.toString()).toString(),height:"auto"===t.style.height.toString()||t.style.height.toString()?t.style.height.toString():parseInt(t.getClientRects()[0].height.toString()).toString(),maxWidth:this.getMaxWidth()};this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",i)}},i.prototype.insertSize=function(e,t){this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{width:e,height:t,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand}),this.imgResizeDiv&&this.imgResizePos(this.selectionObj.selectNode[0],this.imgResizeDiv),this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)},i.prototype.alignmentSelect=function(e){var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Images"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),s={args:e,selectNode:n="IMG"===n[0].nodeName?n:[this.imgEle]};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),t.subCommand){case"JustifyLeft":this.alignImage(s,"JustifyLeft");break;case"JustifyCenter":this.alignImage(s,"JustifyCenter");break;case"JustifyRight":this.alignImage(s,"JustifyRight");break;case"Inline":this.inline(s);break;case"Break":this.break(s)}this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.removeClass([n[0]],"e-img-focus")),this.cancelResizeAction()}},i.prototype.alignImage=function(e,t){var i=e.args.item?e.args.item.subCommand:t;this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:i})},i.prototype.inline=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Inline";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},i.prototype.break=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Break";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},i.prototype.imageBrowseClick=function(){document.getElementById(this.rteId+"_image").querySelector(".e-rte-img-dialog .e-file-select-wrap button").click()},i.prototype.dialogOpened=function(){var e=sf.base.Browser.isDevice?document.getElementById(this.rteId+"_image").querySelector(".e-img-content"):this.parent.element.querySelector(".e-rte-img-dialog .e-img-content");if(!sf.base.isNullOrUndefined(e)){var t=document.getElementById(this.rteId+"_dropText"),i=document.getElementById(this.rteId+"_insertImage");this.buttonClickElement=sf.base.Browser.isDevice?t:i,sf.base.EventHandler.add(this.buttonClickElement,"click",this.imageBrowseClick,this),!sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode?e.querySelector("#"+this.rteId+"_insertImage").focus():e.querySelector(".e-img-url").focus()}},i.prototype.imageSelected=function(){this.inputUrl.setAttribute("disabled","true")},i.prototype.imageUploadSuccess=function(e,t){this.inputUrl=this.parent.element.querySelector(".e-rte-img-dialog .e-img-url"),sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)||(this.uploadUrl={url:e,selection:this.imgUploadSave,altText:t,selectParent:this.imgUploadSelectedParent,width:{width:this.parent.insertImageSettings.width,minWidth:this.parent.insertImageSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertImageSettings.height,minHeight:this.parent.insertImageSettings.minHeight,maxHeight:this.parent.insertImageSettings.maxHeight}},this.inputUrl.setAttribute("disabled","true"))},i.prototype.imageUploadComplete=function(e,t){if("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)){var i="Base64"===this.parent.insertImageSettings.saveFormat?e:URL.createObjectURL(I(e));this.uploadUrl={url:i,selection:this.imgUploadSave,altText:t,selectParent:this.imgUploadSelectedParent,width:{width:this.parent.insertImageSettings.width,minWidth:this.parent.insertImageSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertImageSettings.height,minHeight:this.parent.insertImageSettings.minHeight,maxHeight:this.parent.insertImageSettings.maxHeight}},this.inputUrl.setAttribute("disabled","true")}},i.prototype.imageUploadChange=function(e,t){this.modifiedUrl=e,this.isStreamUrl=t},i.prototype.removing=function(){this.inputUrl.removeAttribute("disabled"),this.uploadUrl&&(this.uploadUrl.url="")},i.prototype.dialogClosed=function(){"HTML"===this.parent.editorMode?this.selectionObj.selection.restore():this.parent.formatter.editorManager.markdownSelection.restore(this.parent.getEditPanel()),this.buttonClickElement&&sf.base.EventHandler.remove(this.buttonClickElement,"click",this.imageBrowseClick)},i.prototype.insertImageUrl=function(){sf.base.Browser.isDevice?this.inputUrl=this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_image").querySelector(".e-rte-img-dialog .e-img-url"):this.inputUrl=this.parent.element.querySelector(".e-rte-img-dialog .e-img-url");var e=this.inputUrl.value;if(this.isStreamUrl&&""!==this.modifiedUrl&&(this.uploadUrl.url=this.modifiedUrl,this.modifiedUrl=""),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.uploadUrl)||""===this.uploadUrl.url){if(""!==e){if("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))){this.parent.getEditPanel().focus();var t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t)}var i=/[\w-]+.(jpg|png|jpeg|gif)/g,n=sf.base.isNullOrUndefined(e.match(i))||"HTML"!==this.parent.editorMode?"":e.match(i)[0],s={cssClass:"inline"===this.parent.insertImageSettings.display?"e-imginline":"e-imgbreak",url:e,selection:this.selectionObj.selection,altText:n,selectParent:this.selectionObj.selectParent,width:{width:this.parent.insertImageSettings.width,minWidth:this.parent.insertImageSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertImageSettings.height,minHeight:this.parent.insertImageSettings.minHeight,maxHeight:this.parent.insertImageSettings.maxHeight}};this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,s),this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)}}else this.uploadUrl.cssClass="inline"===this.parent.insertImageSettings.display?"e-imginline":"e-imgbreak",this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,this.uploadUrl),this.parent.getEditPanel().querySelector(".e-img-resize")&&(this.imgEle.style.outline="",this.removeResizeEle())},i.prototype.showDialog=function(e,t,i,n,s){var o,r,a,l;e&&!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)?(o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.getDocument()),a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(o),l=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)):(r=i,a=n,l=s),"HTML"===this.parent.editorMode?this.imageDialog({args:{item:{command:"Images",subCommand:"Image"},originalEvent:e?void 0:t},selectNode:a,selection:r,selectParent:l}):this.imageDialog({args:{item:{command:"Images",subCommand:"Image"},originalEvent:e?void 0:t},member:"image",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.getEditPanel()),module:"Markdown",name:"insertImage"})},i.prototype.onCutHandler=function(){this.imgResizeDiv&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction()},i.prototype.onIframeMouseDown=function(e){this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null),this.onDocumentClick(e)},i.prototype.onDocumentClick=function(e){var t=e.target;"IMG"===t.nodeName&&(this.imgEle=t);var i=document.body.querySelector("#"+this.rteId+"_image.e-rte-img-dialog");!sf.base.isNullOrUndefined(i)&&(!sf.base.closest(t,"#"+this.rteId+"_image")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!sf.base.closest(t,"#"+this.rteId+"_toolbar_Image")&&!t.querySelector("#"+this.rteId+"_toolbar_Image"))&&(e.offsetX>e.target.clientWidth||e.offsetY>e.target.clientHeight||(this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog","Outside Click"),this.parent.isBlur=!0,sf.base.Browser.isIE&&A(this.parent.element,"focusout"))),"IMG"!==e.target.tagName&&this.imgResizeDiv&&!this.quickToolObj&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction(),this.parent.getEditPanel().querySelector(".e-img-resize")&&("IMG"!==t.tagName&&this.removeResizeEle(),"IMG"===t.tagName||sf.base.isNullOrUndefined(this.imgEle)?sf.base.isNullOrUndefined(this.prevSelectedImgEle)||this.prevSelectedImgEle===t||(this.prevSelectedImgEle.style.outline=""):this.imgEle.style.outline="")},i.prototype.imageClick=function(e){sf.base.Browser.isDevice&&("IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName||"IMG"===e.target.tagName?(this.parent.getEditPanel().setAttribute("contenteditable","false"),e.target.focus()):this.parent.readonly||this.parent.getEditPanel().setAttribute("contenteditable","true")),"IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName&&e.preventDefault()},i.prototype.onKeyDown=function(e){var t,i,n,s,o,r=e.args;this.deletedImg=[];if("HTML"===this.parent.editorMode&&(o=(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument())).startContainer===t.endContainer&&t.startOffset===t.endOffset),!o&&"HTML"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(r.which)<0)for(var a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),l=0;l<a.length;l++)"IMG"===a[l].nodeName&&this.deletedImg.push(a[l]);if("HTML"===this.parent.editorMode&&(8===r.which&&"Backspace"===r.code||46===r.which&&"Delete"===r.code)){var d=t.startContainer===t.endContainer&&t.startOffset===t.endOffset;8===r.which&&"Backspace"===r.code&&d?this.checkImageBack(t):46===r.which&&"Delete"===r.code&&d&&this.checkImageDel(t)}if(!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&"KeyK"!==r.code&&(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),s=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),!r.ctrlKey&&r.key&&(1===r.key.length||"enter"===r.action||37===r.keyCode||38===r.keyCode||39===r.keyCode||40===r.keyCode)&&"IMG"===s[0].tagName&&s[0].parentElement)){var h=s[0].parentElement.childNodes[0];this.parent.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),h,h,h.textContent.length,h.textContent.length),sf.base.removeClass([s[0]],"e-img-focus"),this.quickToolObj.hideImageQTBar(),sf.base.isNullOrUndefined(this.imgEle)||(this.imgEle.style.outline="")}if(!r.ctrlKey||89!==r.keyCode&&90!==r.keyCode||this.undoStack({subCommand:90===r.keyCode?"undo":"redo"}),8===r.keyCode||46===r.keyCode){if(n&&"IMG"===n[0].nodeName){r.preventDefault();var c={selectNode:n,selection:i,selectParent:s,args:{item:{command:"Images",subCommand:"Remove"},originalEvent:r}};this.deleteImg(c,r.keyCode)}this.parent.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle()}switch(r.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null);break;case"insert-image":this.showDialog(!1,r,i,n,s),r.preventDefault()}},i.prototype.onKeyUp=function(e){if(!sf.base.isNullOrUndefined(this.deletedImg)&&this.deletedImg.length>0)for(var t=0;t<this.deletedImg.length;t++){var i={src:this.deletedImg[t].getAttribute("src")};this.parent.imageDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("AfterImageDeleteEvent",i)}},i.prototype.resizeStart=function(e,t){var i=this;if(!this.parent.readonly){var n=t||e.target;if(this.prevSelectedImgEle=this.imgEle,"IMG"===n.tagName){this.parent.defaultResize(e,!1);var s=n;this.imgResizeDiv&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&sf.base.detach(this.imgResizeDiv),this.imageResize(s)}if(n.classList.contains("e-rte-imageboxmark")){if(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),e.preventDefault(),e.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.hideImageQTBar(),n.classList.contains("e-rte-topLeft")&&(this.resizeBtnStat.topLeft=!0),n.classList.contains("e-rte-topRight")&&(this.resizeBtnStat.topRight=!0),n.classList.contains("e-rte-botLeft")&&(this.resizeBtnStat.botLeft=!0),n.classList.contains("e-rte-botRight")&&(this.resizeBtnStat.botRight=!0),sf.base.Browser.isDevice&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&!this.imgResizeDiv.classList.contains("e-mob-span"))sf.base.addClass([this.imgResizeDiv],"e-mob-span");else{this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"Images"}).then((function(e){e.cancel&&i.cancelResizeAction()}))}sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd,this)}}},i.prototype.resizing=function(e){this.imgEle.offsetWidth>=this.getMaxWidth()&&(this.imgEle.style.maxHeight=this.imgEle.offsetHeight+"px");var t=this.getPointX(e),i=this.getPointY(e),n=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(t-this.pageX):t-this.pageX,s=this.resizeBtnStat.topLeft||this.resizeBtnStat.topRight?-(i-this.pageY):i-this.pageY,o=parseInt(this.imgDupPos.width,10)+n,r=parseInt(this.imgDupPos.height,10)+s;this.pageX=t,this.pageY=i,(this.resizeBtnStat.botRight||this.resizeBtnStat.botLeft||this.resizeBtnStat.topRight||this.resizeBtnStat.topLeft)&&this.imgDupMouseMove(o+"px",r+"px",e)},i.prototype.resizeEnd=function(e){this.resizeBtnInit(),this.imgEle.parentElement.style.cursor="auto",sf.base.Browser.isDevice&&sf.base.removeClass([e.target.parentElement],"e-mob-span");this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"Images"}),this.parent.formatter.editorManager.observer.on(d,this.undoStack,this),this.parent.formatter.saveData()},i.prototype.dragStart=function(e){if("IMG"!==e.target.nodeName)return!0;this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",e).then((function(t){t.cancel?e.preventDefault():(e.dataTransfer.effectAllowed="copyMove",e.target.classList.add("e-rte-drag-image"))}))},i.prototype.dragOver=function(e){if(!("edge"===sf.base.Browser.info.name&&e.dataTransfer.items[0].type.split("/")[0].indexOf("image")>-1||sf.base.Browser.isIE&&"Files"===e.dataTransfer.types[0]))return!0;e.preventDefault()},i.prototype.dragEnter=function(e){e.dataTransfer.dropEffect="copy",e.preventDefault()},i.prototype.dragDrop=function(e){var t=this;this.imageDragArgs=e,this.dropFiles=e.dataTransfer.files;var i=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image");if(!i||"IMG"!==i.tagName)return!0;e.preventDefault(),e.dataTransfer.files.length<=0&&this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",e).then((function(i){if(!i.cancel){if(sf.base.closest(e.target,"#"+t.rteId+"_toolbar")||"false"===t.parent.inputElement.contentEditable)return;if(t.parent.element.querySelector(".e-img-resize")&&sf.base.detach(t.imgResizeDiv),t.selectRange(e),t.parent.element.querySelector(".e-droparea"))return;t.insertDragImage(e,t.dropFiles)}}))},i.prototype.destroy=function(){this.prevSelectedImgEle=void 0,this.removeEventListener()},i}(),q=function(){function i(e){this.deletedAud=[],this.parent=e,this.rteId=e.element.id,this.addEventListener()}return i.prototype.addEventListener=function(){this.parent.observer.on(n,this.onKeyUp,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(s,this.onKeyDown,this),this.parent.observer.on("delete",this.deleteAud,this),this.parent.observer.on(e,this.afterRender,this),this.parent.observer.on("insertAudio",this.audioDialog,this),this.parent.observer.on("dropDownSelect",this.alignmentSelect,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("audio-toolbar-action",this.onToolbarAction,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("insertCompleted",this.showAudioQuickToolbar,this)},i.prototype.removeEventListener=function(){this.parent.observer.off(n,this.onKeyUp),this.parent.observer.off(t,this.destroy),this.parent.observer.off(s,this.onKeyDown),this.parent.observer.off("dropDownSelect",this.alignmentSelect),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("audio-toolbar-action",this.onToolbarAction),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("insertCompleted",this.showAudioQuickToolbar),sf.base.isNullOrUndefined(this.parent.getEditPanel())||(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.audioClick),this.parent.formatter.editorManager.observer.off(d,this.undoStack),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick))},i.prototype.afterRender=function(){sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.audioClick,this),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this)},i.prototype.isAudioElem=function(e){return!(!e||3===e.nodeType||"BR"===e.nodeName||!e.classList||!e.classList.contains("e-audio-wrap")&&!e.classList.contains("e-clickelem"))},i.prototype.audioDialog=function(e){if(this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null),this.uploadUrl={url:""},this.selectionObj={selfAudio:this,selection:e.selection,args:e.args,selectParent:e.selectParent},!sf.base.isNullOrUndefined(this.parent.insertAudioSettings.path)||"HTML"===this.parent.editorMode){var t=this.parent.iframeSettings.enable;if("HTML"===this.parent.editorMode&&(!t&&sf.base.isNullOrUndefined(sf.base.closest(e.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))||t&&sf.base.isNullOrUndefined(e.selection.range.startContainer.parentNode.ownerDocument.querySelector("body")))){this.parent.getEditPanel().focus();var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.audUploadSave=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),this.audUploadSelectedParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)}else this.audUploadSave=e.selection,this.audUploadSelectedParent=e.selectParent}var n={mode:e.selectNode&&this.isAudioElem(e.selectNode[0])?"Edit":"Insert"};this.parent.dotNetRef.invokeMethodAsync("ShowAudioDialog",n),this.quickToolObj&&(this.quickToolObj.hideAudioQTBar(),sf.base.isNullOrUndefined(e.selectParent)||sf.base.removeClass([e.selectParent[0]],"e-audio-focus"),this.quickToolObj.hideInlineQTBar())},i.prototype.checkAudioBack=function(e){"#text"===e.startContainer.nodeName&&0===e.startOffset&&!sf.base.isNullOrUndefined(e.startContainer.previousSibling)&&this.isAudioElem(e.startContainer.previousSibling)?this.deletedAud.push(e.startContainer.previousSibling):"#text"!==e.startContainer.nodeName&&!sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset-1])&&this.isAudioElem(e.startContainer.childNodes[e.startOffset-1])&&this.deletedAud.push(e.startContainer.childNodes[e.startOffset-1])},i.prototype.checkAudioDel=function(e){"#text"===e.startContainer.nodeName&&e.startOffset===e.startContainer.textContent.length&&!sf.base.isNullOrUndefined(e.startContainer.nextSibling)&&this.isAudioElem(e.startContainer.nextSibling)?this.deletedAud.push(e.startContainer.nextSibling):"#text"!==e.startContainer.nodeName&&!sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset])&&this.isAudioElem(e.startContainer.childNodes[e.startOffset])&&this.deletedAud.push(e.startContainer.childNodes[e.startOffset])},i.prototype.undoStack=function(e){if("undo"===e.subCommand.toLowerCase()||"redo"===e.subCommand.toLowerCase())for(var t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){var i=sf.base.createElement("div"),n=k(this.parent.formatter.getUndoRedoStack()[t].text);i.appendChild(n)}},i.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideAudioQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(2===t.which||i&&1===t.which||!i&&3===t.which)i&&1===t.which&&!sf.base.isNullOrUndefined(t.target)&&this.isAudioElem(t.target)&&(this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),t.target));else if("HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){this.quickToolObj=this.parent.quickToolbarModule;var n,s=t.target;if(n=document.body.querySelector("#"+this.rteId+"_Audio_Quick_Popup").classList.contains("e-rte-pop"),this.isAudioElem(s)&&this.parent.quickToolbarModule){if(n)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),s),u()&&this.parent.observer.notify(o,e),s.querySelector("audio").style.outline="2px solid #4a90e2",this.showAudioQuickToolbar({args:t,type:"Audios",elements:[t.target]})}else this.hideAudioQuickToolbar()}}},i.prototype.showAudioQuickToolbar=function(e){var t=this,i="AudioLink";if("Audios"===e.type&&!sf.base.isNullOrUndefined(this.parent.quickToolbarModule)){this.quickToolObj=this.parent.quickToolbarModule;var n=e.args,s=e.elements,o=this.parent.element.getBoundingClientRect(),r=this.parent.getToolbarElement(),a=r?r.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;[].forEach.call(e.elements,(function(e,t){0===t&&(s=e)})),this.isAudioElem(s)&&(sf.base.addClass([s.querySelector("audio")],["e-audio-focus"]),s.querySelector("audio").style.outline="2px solid #4a90e2"),s&&!sf.base.closest(s,"a")&&(i="Audio"),this.isAudioElem(s)&&sf.base.addClass([s],["e-audio-focus"]);var l=this.parent.iframeSettings.enable?window.pageXOffset+o.left+n.clientX:n.pageX,d=this.parent.iframeSettings.enable?window.pageYOffset+o.top+a+n.clientY:n.pageY;this.quickToolObj&&(e.isNotify?setTimeout((function(){t.quickToolObj.showAudioQTBar(l,d,s,i)}),400):this.quickToolObj.showAudioQTBar(l,d,s,i))}},i.prototype.hideAudioQuickToolbar=function(){sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-audio-focus"))||(sf.base.removeClass([this.parent.getEditPanel().querySelector(".e-audio-focus")],"e-audio-focus"),sf.base.isNullOrUndefined(this.audEle)||(this.audEle.style.outline=""),this.quickToolObj&&this.quickToolObj.hideAudioQTBar())},i.prototype.onToolbarAction=function(e){switch(this.quickToolObj&&(this.quickToolObj.hideAudioQTBar(),sf.base.removeClass([e.selectNode[0]],"e-audio-focus")),this.selectionObj=e,u()&&this.parent.observer.notify(r,{}),e.args.item.subCommand){case"AudioReplace":this.parent.observer.notify("insertAudio",e);break;case"AudioRemove":this.parent.observer.notify("delete",e)}},i.prototype.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)},i.prototype.deleteAud=function(e,t){if(this.isAudioElem(e.selectNode[0])){var i={src:e.selectNode[0].getAttribute("src")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:"e-img-caption",subCommand:e.args.item.subCommand}),this.quickToolObj&&this.quickToolObj.hideAudioQTBar(),sf.base.isNullOrUndefined(t)&&this.parent.mediaDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("MediaDeleted",i)}},i.prototype.alignmentSelect=function(e){var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Audios"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),s={args:e,selectNode:n=[this.audEle]};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),t.subCommand){case"Inline":this.inline(s);break;case"Break":this.break(s)}this.quickToolObj&&(this.quickToolObj.hideAudioQTBar(),sf.base.removeClass([n[0]],"e-audio-focus"))}},i.prototype.inline=function(e){if("AUDIO"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Inline";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},i.prototype.break=function(e){if("AUDIO"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Break";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},i.prototype.audioBrowseClick=function(){document.getElementById(this.rteId+"_audio").querySelector(".e-rte-audio-dialog .e-file-select-wrap button").click()},i.prototype.dialogOpened=function(){var e=sf.base.Browser.isDevice?document.getElementById(this.rteId+"_audio").querySelector(".e-audio-content"):this.parent.element.querySelector(".e-rte-audio-dialog .e-audio-content");if(!sf.base.isNullOrUndefined(e)){var t=document.getElementById(this.rteId+"_dropText"),i=document.getElementById(this.rteId+"_insertAudio");this.buttonClickElement=sf.base.Browser.isDevice?t:i,sf.base.EventHandler.add(this.buttonClickElement,"click",this.audioBrowseClick,this),!sf.base.isNullOrUndefined(this.parent.insertAudioSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode?e.querySelector("#"+this.rteId+"_insertAudio").focus():e.querySelector(".e-audio-url").focus()}},i.prototype.fileSelected=function(){this.inputUrl&&this.inputUrl.setAttribute("disabled","true")},i.prototype.fileUploadSuccess=function(e,t){this.inputUrl=this.parent.element.querySelector(".e-rte-audio-dialog .e-audio-url"),sf.base.isNullOrUndefined(this.parent.insertAudioSettings.path)||(this.uploadUrl={url:e,selection:this.audUploadSave,fileName:t,selectParent:this.audUploadSelectedParent},this.inputUrl&&this.inputUrl.setAttribute("disabled","true"))},i.prototype.fileUploadComplete=function(e,t){if(this.inputUrl=this.parent.element.querySelector(".e-rte-audio-dialog .e-audio-url"),"HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(this.parent.insertAudioSettings.path)){var i="Base64"===this.parent.insertAudioSettings.saveFormat?e:URL.createObjectURL(I(e));this.uploadUrl={url:i,selection:this.audUploadSave,fileName:t,selectParent:this.audUploadSelectedParent},this.inputUrl&&this.inputUrl.setAttribute("disabled","true")}},i.prototype.fileUploadChange=function(e,t){this.modifiedUrl=e,this.isStreamUrl=t},i.prototype.fileRemoving=function(){this.inputUrl.removeAttribute("disabled"),this.uploadUrl&&(this.uploadUrl.url="")},i.prototype.dialogClosed=function(){"HTML"===this.parent.editorMode?this.selectionObj.selection.restore():this.parent.formatter.editorManager.markdownSelection.restore(this.parent.getEditPanel()),this.buttonClickElement&&sf.base.EventHandler.remove(this.buttonClickElement,"click",this.audioBrowseClick)},i.prototype.insertAudioUrl=function(){sf.base.Browser.isDevice?this.inputUrl=this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_Audio").querySelector(".e-rte-audio-dialog .e-audio-url"):this.inputUrl=this.parent.element.querySelector(".e-rte-audio-dialog .e-audio-url");var e=this.inputUrl.value;if(this.isStreamUrl&&""!==this.modifiedUrl&&(this.uploadUrl.url=this.modifiedUrl,this.modifiedUrl=""),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.uploadUrl)||""===this.uploadUrl.url){if(""!==e){if("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))){this.parent.getEditPanel().focus();var t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t)}var i="HTML"===this.parent.editorMode?e.split("/")[e.split("/").length-1]:"",n={cssClass:"Inline"===this.parent.insertAudioSettings.layoutOption?"e-audio-inline":"e-audio-break",url:e,selection:this.selectionObj.selection,fileName:i,selectParent:this.selectionObj.selectParent};this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,n),this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null)}}else this.uploadUrl.cssClass="Inline"===this.parent.insertAudioSettings.layoutOption?"e-audio-inline":"e-audio-break",this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,this.uploadUrl)},i.prototype.showDialog=function(e,t,i,n,s){var o,r,a,l;e&&!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)?(o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.getDocument()),a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(o),l=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)):(r=i,a=n,l=s),"HTML"===this.parent.editorMode&&this.audioDialog({args:{item:{command:"Audios",subCommand:"Audio"},originalEvent:e?void 0:t},selectNode:a,selection:r,selectParent:l})},i.prototype.onIframeMouseDown=function(e){this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null),this.onDocumentClick(e)},i.prototype.onDocumentClick=function(e){var t=e.target;this.isAudioElem(t)&&(this.audEle=t.querySelector("audio"));var i=document.body.querySelector("#"+this.rteId+"_audio.e-rte-audio-dialog");!sf.base.isNullOrUndefined(i)&&(!sf.base.closest(t,"#"+this.rteId+"_audio")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!sf.base.closest(t,"#"+this.rteId+"_toolbar_Audio")&&!t.querySelector("#"+this.rteId+"_toolbar_Audio"))&&(e.offsetX>e.target.clientWidth||e.offsetY>e.target.clientHeight||(this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog","Outside Click"),this.parent.isBlur=!0,sf.base.Browser.isIE&&A(this.parent.element,"focusout"))),this.parent.getEditPanel().querySelector(".e-audio-focus")&&(this.isAudioElem(t)||sf.base.isNullOrUndefined(this.audEle)?sf.base.isNullOrUndefined(this.prevSelectedAudEle)||this.prevSelectedAudEle===t||(this.prevSelectedAudEle.style.outline=""):this.audEle.style.outline="")},i.prototype.audioClick=function(e){sf.base.Browser.isDevice&&(this.isAudioElem(e.target)&&"A"===e.target.parentElement.tagName||this.isAudioElem(e.target)?(this.parent.getEditPanel().setAttribute("contenteditable","false"),e.target.focus()):this.parent.readonly||this.parent.getEditPanel().setAttribute("contenteditable","true")),this.isAudioElem(e.target)&&"A"===e.target.parentElement.tagName&&e.preventDefault()},i.prototype.onKeyDown=function(e){var t,i,n,s,o,r=e.args;this.deletedAud=[];if("HTML"===this.parent.editorMode&&(o=(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument())).startContainer===t.endContainer&&t.startOffset===t.endOffset),!o&&"HTML"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(r.which)<0)for(var a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),l=0;l<a.length;l++)this.isAudioElem(a[l])&&this.deletedAud.push(a[l]);if("HTML"===this.parent.editorMode&&(8===r.which&&"Backspace"===r.code||46===r.which&&"Delete"===r.code)){var d=t.startContainer===t.endContainer&&t.startOffset===t.endOffset;8===r.which&&"Backspace"===r.code&&d?this.checkAudioBack(t):46===r.which&&"Delete"===r.code&&d&&this.checkAudioDel(t)}if(!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&"KeyK"!==r.code&&(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),s=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),!r.ctrlKey&&r.key&&(1===r.key.length||"enter"===r.action||37===r.keyCode||38===r.keyCode||39===r.keyCode||40===r.keyCode)&&this.isAudioElem(s[0])&&s[0].parentElement)){var h=s[0].parentElement.childNodes[0];this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),h,h,h.textContent.length,h.textContent.length),sf.base.removeClass([s[0]],"e-audio-focus"),this.quickToolObj.hideAudioQTBar(),sf.base.isNullOrUndefined(this.audEle)||(this.audEle.style.outline="")}if(!r.ctrlKey||89!==r.keyCode&&90!==r.keyCode||this.undoStack({subCommand:90===r.keyCode?"undo":"redo"}),(8===r.keyCode||46===r.keyCode)&&n&&this.isAudioElem(n[0])){r.preventDefault();var c={selectNode:n,selection:i,selectParent:s,args:{item:{command:"Audios",subCommand:"Remove"},originalEvent:r}};this.deleteAud(c,r.keyCode)}switch(r.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null);break;case"insert-audio":this.showDialog(!1,r,i,n,s),r.preventDefault()}},i.prototype.onKeyUp=function(e){if(!sf.base.isNullOrUndefined(this.deletedAud)&&this.deletedAud.length>0)for(var t=0;t<this.deletedAud.length;t++){var i={src:this.deletedAud[t].getAttribute("src")};this.parent.mediaDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("MediaDeleted",i)}},i.prototype.destroy=function(){this.prevSelectedAudEle=void 0,this.removeEventListener()},i}(),_=function(){function i(e){this.pageX=null,this.pageY=null,this.deletedVid=[],this.parent=e,this.rteId=e.element.id,this.addEventListener()}return i.prototype.addEventListener=function(){this.parent.observer.on(n,this.onKeyUp,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(s,this.onKeyDown,this),this.parent.observer.on("videoSize",this.videoSize,this),this.parent.observer.on("delete",this.deleteVid,this),this.parent.observer.on(e,this.afterRender,this),this.parent.observer.on("insertVideo",this.videoDialog,this),this.parent.observer.on("resize",this.onWindowResize,this),this.parent.observer.on("dropDownSelect",this.alignmentSelect,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("video-toolbar-action",this.onToolbarAction,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("insertCompleted",this.showVideoQuickToolbar,this)},i.prototype.removeEventListener=function(){this.parent.observer.off(n,this.onKeyUp),this.parent.observer.off(t,this.destroy),this.parent.observer.off(s,this.onKeyDown),this.parent.observer.off("videoSize",this.videoSize),this.parent.observer.off("delete",this.deleteVid),this.parent.observer.off(e,this.afterRender),this.parent.observer.off("insertVideo",this.videoDialog),this.parent.observer.off("resize",this.onWindowResize),this.parent.observer.off("dropDownSelect",this.alignmentSelect),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("video-toolbar-action",this.onToolbarAction),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("insertCompleted",this.showVideoQuickToolbar),sf.base.isNullOrUndefined(this.parent.getEditPanel())||(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.videoClick),this.parent.formatter.editorManager.observer.off(d,this.undoStack),this.parent.insertVideoSettings.resize&&(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),sf.base.EventHandler.remove(this.parent.getEditPanel(),"cut",this.onCutHandler)))},i.prototype.afterRender=function(){sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.videoClick,this),this.parent.insertVideoSettings.resize&&(sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart,this),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),sf.base.EventHandler.add(this.parent.getEditPanel(),"cut",this.onCutHandler,this))},i.prototype.isEmbedVidElem=function(e){return!!(e&&3!==e.nodeType&&"BR"!==e.nodeName&&e.classList&&e.classList.contains("e-video-clickelem")||"IFRAME"===e.nodeName)},i.prototype.videoDialog=function(e){if(this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null),this.uploadUrl={url:""},this.selectionObj={selfVideo:this,selection:e.selection,args:e.args,selectParent:e.selectParent},!sf.base.isNullOrUndefined(this.parent.insertVideoSettings.path)||"HTML"===this.parent.editorMode){var t=this.parent.iframeSettings.enable;if("HTML"===this.parent.editorMode&&(!t&&sf.base.isNullOrUndefined(sf.base.closest(e.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))||t&&sf.base.isNullOrUndefined(e.selection.range.startContainer.parentNode.ownerDocument.querySelector("body")))){this.parent.getEditPanel().focus();var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.vidUploadSave=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),this.vidUploadSelectedParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)}else this.vidUploadSave=e.selection,this.vidUploadSelectedParent=e.selectParent}var n={mode:e.selectNode&&this.isEmbedVidElem(e.selectNode[0])?"Edit":"Insert"};this.parent.dotNetRef.invokeMethodAsync("ShowVideoDialog",n),this.quickToolObj&&(this.quickToolObj.hideVideoQTBar(),sf.base.isNullOrUndefined(e.selectParent)||sf.base.removeClass([e.selectParent[0]],"e-video-focus"),this.quickToolObj.hideInlineQTBar())},i.prototype.checkVideoBack=function(e){"#text"!==e.startContainer.nodeName||0!==e.startOffset||sf.base.isNullOrUndefined(e.startContainer.previousSibling)||"VIDEO"!==e.startContainer.previousSibling.nodeName&&!this.isEmbedVidElem(e.startContainer.previousSibling)?"#text"!==e.startContainer.nodeName&&!sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset-1])&&this.isEmbedVidElem(e.startContainer.childNodes[e.startOffset-1])&&this.deletedVid.push(e.startContainer.childNodes[e.startOffset-1]):this.deletedVid.push(e.startContainer.previousSibling)},i.prototype.checkVideoDel=function(e){"#text"!==e.startContainer.nodeName||e.startOffset!==e.startContainer.textContent.length||sf.base.isNullOrUndefined(e.startContainer.nextSibling)||"VIDEO"!==e.startContainer.nextSibling.nodeName&&!this.isEmbedVidElem(e.startContainer.nextSibling)?"#text"===e.startContainer.nodeName||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset])||"VIDEO"!==e.startContainer.childNodes[e.startOffset].nodeName&&!this.isEmbedVidElem(e.startContainer.childNodes[e.startOffset])||this.deletedVid.push(e.startContainer.childNodes[e.startOffset]):this.deletedVid.push(e.startContainer.nextSibling)},i.prototype.getDropRange=function(e,t){var i=this.parent.getDocument().createRange();this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),i);var n=this.parent.getDocument().elementFromPoint(e,t),s=n.childNodes.length>0?n.childNodes[0]:n,o=0;if("<br>"===this.parent.inputElement.firstChild.innerHTML)i.setStart(s,o),i.setEnd(s,o);else{var r=void 0;do{o++,i.setStart(s,o),i.setEnd(s,o+1),r=i.getBoundingClientRect()}while(r.left<e&&o<s.length-1)}return i},i.prototype.undoStack=function(e){if("undo"===e.subCommand.toLowerCase()||"redo"===e.subCommand.toLowerCase())for(var t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){var i=sf.base.createElement("div"),n=k(this.parent.formatter.getUndoRedoStack()[t].text);i.appendChild(n);var s=i.querySelectorAll("video");if(i.querySelector(".e-vid-resize")&&s&&s.length>0){for(var o=0;o<s.length;o++)s[o].style.outline="";sf.base.detach(i.querySelector(".e-vid-resize")),this.parent.formatter.getUndoRedoStack()[t].text=i.innerHTML}}},i.prototype.videoResize=function(e){this.resizeBtnInit(),this.vidEle=e,sf.base.addClass([this.vidEle],"e-resize"),this.vidResizeDiv=sf.base.createElement("span",{className:"e-vid-resize",id:this.rteId+"_vidResize"}),this.vidResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-videoboxmark e-rte-topLeft",styles:"cursor: nwse-resize"})),this.vidResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-videoboxmark e-rte-topRight",styles:"cursor: nesw-resize"})),this.vidResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-videoboxmark e-rte-botLeft",styles:"cursor: nesw-resize"})),this.vidResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-videoboxmark e-rte-botRight",styles:"cursor: nwse-resize"})),sf.base.Browser.isDevice&&sf.base.addClass([this.vidResizeDiv],"e-mob-rte"),e.style.outline="2px solid #4a90e2",this.vidResizePos(e,this.vidResizeDiv),this.resizeVidDupPos(e),this.parent.getEditPanel().appendChild(this.vidResizeDiv),sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing,this)},i.prototype.resizeBtnInit=function(){return this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}},i.prototype.vidResizePos=function(e,t){var i=this.calcPos(e),n=i.top,s=i.left,o=0===e.width||sf.base.isNullOrUndefined(e.width)||"auto"===e.width?e.getBoundingClientRect().width:e.width,r=0===e.height||sf.base.isNullOrUndefined(e.height)||"auto"===e.height?e.getBoundingClientRect().height:e.height,a=sf.base.Browser.isDevice?4*parseInt(e.style.outline.slice(-3),10)+2:2*parseInt(e.style.outline.slice(-3),10)+2,l=sf.base.Browser.isDevice?0:2;t.querySelector(".e-rte-botLeft").style.left=s-a+"px",t.querySelector(".e-rte-botLeft").style.top=parseInt(r.toString(),10)-a+n+"px",t.querySelector(".e-rte-botRight").style.left=parseInt(o.toString(),10)-(a-l)+s+"px",t.querySelector(".e-rte-botRight").style.top=parseInt(r.toString(),10)-a+n+"px",t.querySelector(".e-rte-topRight").style.left=parseInt(o.toString(),10)-(a-l)+s+"px",t.querySelector(".e-rte-topRight").style.top=n-a+"px",t.querySelector(".e-rte-topLeft").style.left=s-a+"px",t.querySelector(".e-rte-topLeft").style.top=n-a+"px"},i.prototype.resizeVidDupPos=function(e){this.vidDupPos={width:""!==e.style.width?this.vidEle.style.width:0===e.width||sf.base.isNullOrUndefined(e.width)||"auto"===e.width?parseInt(getComputedStyle(e).width,10)+"px":e.width+"px",height:""!==e.style.height?this.vidEle.style.height:0===e.height||sf.base.isNullOrUndefined(e.height)||"auto"===e.height?parseInt(getComputedStyle(e).height,10)+"px":e.height+"px"}},i.prototype.calcPos=function(e){for(var t,i={top:0,left:0},n=e.ownerDocument,s=(e.offsetParent&&(e.offsetParent.classList.contains("e-video-clickelem")||["TD","TH","TABLE","A"].indexOf(e.offsetParent.tagName)>-1)?sf.base.closest(e,"#"+this.rteId+"_rte-edit-view"):e.offsetParent)||n.documentElement;s&&(s===n.body||s===n.documentElement)&&"static"===s.style.position;)s=s.parentNode;return s&&s!==e&&1===s.nodeType&&(i=s.getBoundingClientRect()),e&&1===e.nodeType&&"IFRAME"===e.tagName?{top:(t=e.getBoundingClientRect()).top-i.top,left:t.left-i.left}:{top:e.offsetTop,left:e.offsetLeft}},i.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},i.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},i.prototype.pixToPercent=function(e,t){return e/parseFloat(getComputedStyle(t).width)*100},i.prototype.vidDupMouseMove=function(e,t,i){parseInt(this.parent.insertVideoSettings.minWidth,10)>=parseInt(e,10)||parseInt(this.getMaxWidth(),10)<=parseInt(e,10)||!this.parent.insertVideoSettings.resizeByPercent&&(parseInt(this.parent.insertVideoSettings.minHeight,10)>=parseInt(t,10)||parseInt(this.parent.insertVideoSettings.maxHeight,10)<=parseInt(t,10))||(this.vidEle.parentElement.style.cursor="pointer",this.setAspectRatio(this.vidEle,parseInt(e,10),parseInt(t,10),i),this.resizeVidDupPos(this.vidEle),this.vidResizePos(this.vidEle,this.vidResizeDiv),this.parent.setContentHeight("",!1))},i.prototype.setAspectRatio=function(e,t,i,n){var s=getComputedStyle(e);if(!sf.base.isNullOrUndefined(s)){var o=""!==s.width?s.width.match(/^\d+(\.\d*)?%$/g)?parseFloat(s.width):parseInt(s.width,10):""!==e.style.width?parseInt(e.style.width,10):e.width,r=""!==s.height?parseInt(s.height,10):""!==e.style.height?parseInt(e.style.height,10):e.height;o>r?(e.style.minWidth=0===parseInt(this.parent.insertVideoSettings.minWidth.toString(),10)?"140px":sf.base.formatUnit(this.parent.insertVideoSettings.minWidth),e.style.minHeight=0===parseInt(this.parent.insertVideoSettings.minHeight.toString(),10)?"50px":sf.base.formatUnit(this.parent.insertVideoSettings.minHeight),this.parent.insertVideoSettings.resizeByPercent?(e.style.width=this.pixToPercent(parseInt(o.toString(),10)/parseInt(r.toString(),10)*i,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""===e.style.width&&""!==e.style.height||""===s.width&&""!==s.height?e.style.height=i+"px":""!==e.style.width&&""===e.style.height||""!==s.width&&""===s.height?e.style.width=(parseInt(o.toString(),10)/parseInt(r.toString(),10)*i+parseInt(o.toString(),10)/parseInt(r.toString(),10)).toString()+"px":""!==e.style.width||""!==s.width?(e.style.width=parseInt(o.toString(),10)/parseInt(r.toString(),10)*i+"px",e.style.height=i+"px"):e.setAttribute("width",(parseInt(o.toString(),10)/parseInt(r.toString(),10)*i+parseInt(o.toString(),10)/parseInt(r.toString(),10)).toString())):r>o?this.parent.insertVideoSettings.resizeByPercent?(e.style.width=this.pixToPercent(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width||""!==s.width?(e.style.width=t+"px",e.style.height=parseInt(r.toString(),10)/parseInt(o.toString(),10)*t+"px"):e.setAttribute("width",this.resizeBtnStat.botRight?(this.getPointX(n)-e.getBoundingClientRect().left).toString():t.toString()):this.parent.insertVideoSettings.resizeByPercent?(e.style.width=this.pixToPercent(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):(e.style.width=t+"px",e.style.height=t+"px")}},i.prototype.getMaxWidth=function(){var e=this.parent.insertVideoSettings.maxWidth,t=this.parent.getEditPanel(),i=window.getComputedStyle(t),n=t.offsetWidth-(14+parseFloat(i.paddingLeft.split("px")[0])+parseFloat(i.paddingRight.split("px")[0])+parseFloat(i.marginLeft.split("px")[0])+parseFloat(i.marginRight.split("px")[0]));return sf.base.isNullOrUndefined(e)?n:e},i.prototype.cancelResizeAction=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),this.vidEle&&this.vidResizeDiv&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&(sf.base.detach(this.vidResizeDiv),this.vidEle.style.outline="",this.vidResizeDiv=null,this.pageX=null,this.pageY=null)},i.prototype.removeResizeEle=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),sf.base.detach(this.parent.getEditPanel().querySelector(".e-vid-resize"))},i.prototype.onWindowResize=function(){sf.base.isNullOrUndefined(this.parent)||sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-vid-resize"))||this.cancelResizeAction()},i.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideVideoQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(2===t.which||i&&1===t.which||!i&&3===t.which)!i||1!==t.which||sf.base.isNullOrUndefined(t.target)||"VIDEO"!==t.target.tagName&&!this.isEmbedVidElem(t.target)||(this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),t.target));else if("HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){this.quickToolObj=this.parent.quickToolbarModule;var n,s=t.target;if(n=document.body.querySelector("#"+this.rteId+"_Video_Quick_Popup").classList.contains("e-rte-pop"),("VIDEO"===s.nodeName||this.isEmbedVidElem(s))&&this.parent.quickToolbarModule){if(n)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),s),u()&&this.parent.observer.notify(o,e),sf.base.addClass([this.isEmbedVidElem(s)?s.querySelector("iframe"):s],"e-video-focus"),this.showVideoQuickToolbar({args:t,type:"Videos",elements:[t.target]})}else this.hideVideoQuickToolbar()}}},i.prototype.showVideoQuickToolbar=function(e){var t=this,i="VideoLink";if("Videos"===e.type&&!sf.base.isNullOrUndefined(this.parent.quickToolbarModule)){this.quickToolObj=this.parent.quickToolbarModule;var n=e.args,s=e.elements,o=this.parent.element.getBoundingClientRect(),r=this.parent.getToolbarElement(),a=r?r.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;[].forEach.call(e.elements,(function(e,t){0===t&&(s=e)})),s&&!sf.base.closest(s,"a")&&(i="Video"),("VIDEO"===s.tagName||this.isEmbedVidElem(s))&&sf.base.addClass([this.isEmbedVidElem(s)&&"IFRAME"!==s.tagName?s.querySelector("iframe"):s],["e-video-focus"]);var l=this.parent.iframeSettings.enable?window.pageXOffset+o.left+n.clientX:n.pageX,d=this.parent.iframeSettings.enable?window.pageYOffset+o.top+a+n.clientY:n.pageY;this.quickToolObj&&(e.isNotify?setTimeout((function(){t.quickToolObj.showVideoQTBar(l,d,s,i)}),400):this.quickToolObj.showVideoQTBar(l,d,s,i))}},i.prototype.hideVideoQuickToolbar=function(){sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-video-focus"))||(sf.base.removeClass([this.parent.getEditPanel().querySelector(".e-video-focus")],"e-video-focus"),this.quickToolObj&&this.quickToolObj.hideVideoQTBar())},i.prototype.onToolbarAction=function(e){switch(this.quickToolObj&&(this.quickToolObj.hideVideoQTBar(),sf.base.removeClass([e.selectNode[0]],"e-video-focus")),this.selectionObj=e,u()&&this.parent.observer.notify(r,{}),e.args.item.subCommand){case"VideoReplace":this.parent.observer.notify("insertVideo",e);break;case"VideoRemove":this.parent.observer.notify("delete",e);break;case"VideoDimension":this.parent.observer.notify("videoSize",e)}},i.prototype.deleteVid=function(e,t){if("VIDEO"===e.selectNode[0].nodeName||this.isEmbedVidElem(e.selectNode[0])){var i={src:e.selectNode[0].getAttribute("src")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.parent.getEditPanel().querySelector(".e-vid-resize")&&this.removeResizeEle(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:"e-img-caption",subCommand:e.args.item.subCommand}),this.quickToolObj&&this.quickToolObj.hideVideoQTBar(),this.cancelResizeAction(),sf.base.isNullOrUndefined(t)&&this.parent.mediaDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("MediaDeleted",i)}},i.prototype.videoSize=function(e){if("VIDEO"===e.selectNode[0].nodeName||this.isEmbedVidElem(e.selectNode[0])){var t=e.selectNode[0],i={mode:"Dimension",width:"auto"===t.style.width.toString()||t.style.width.toString()?t.style.width.toString():parseInt(t.getClientRects()[0].width.toString()).toString(),height:"auto"===t.style.height.toString()||t.style.height.toString()?t.style.height.toString():parseInt(t.getClientRects()[0].height.toString()).toString(),maxWidth:this.getMaxWidth()};this.parent.dotNetRef.invokeMethodAsync("ShowVideoDialog",i)}},i.prototype.insertVideoSize=function(e,t){this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{width:e,height:t,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand}),this.vidResizeDiv&&this.vidResizePos(this.selectionObj.selectNode[0],this.vidResizeDiv),this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null)},i.prototype.alignmentSelect=function(e){var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Videos"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),s={args:e,selectNode:n=this.isEmbedVidElem(n[0])?n:[this.vidEle]};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),t.subCommand){case"JustifyLeft":this.alignVideo(s,"JustifyLeft");break;case"JustifyCenter":this.alignVideo(s,"JustifyCenter");break;case"JustifyRight":this.alignVideo(s,"JustifyRight");break;case"Inline":this.inline(s);break;case"Break":this.break(s)}this.quickToolObj&&(this.quickToolObj.hideVideoQTBar(),sf.base.removeClass([n[0]],"e-video-focus")),this.cancelResizeAction()}},i.prototype.alignVideo=function(e,t){var i=e.args.item?e.args.item.subCommand:t;this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:i})},i.prototype.inline=function(e){if("VIDEO"===e.selectNode[0].nodeName||this.isEmbedVidElem(e.selectNode[0])){var t=e.args.item?e.args.item.subCommand:"Inline";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},i.prototype.break=function(e){if("VIDEO"===e.selectNode[0].nodeName||this.isEmbedVidElem(e.selectNode[0])){var t=e.args.item?e.args.item.subCommand:"Break";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},i.prototype.videoBrowseClick=function(){document.getElementById(this.rteId+"_video").querySelector(".e-rte-video-dialog .e-file-select-wrap button").click()},i.prototype.dialogOpened=function(){var e=sf.base.Browser.isDevice?document.getElementById(this.rteId+"_video").querySelector(".e-video-content"):this.parent.element.querySelector(".e-rte-video-dialog .e-video-content");if(!sf.base.isNullOrUndefined(e)){var t=document.getElementById(this.rteId+"_dropText"),i=document.getElementById(this.rteId+"_insertVideo");this.buttonClickElement=sf.base.Browser.isDevice?t:i,sf.base.EventHandler.add(this.buttonClickElement,"click",this.videoBrowseClick,this),sf.base.isNullOrUndefined(this.parent.insertVideoSettings.path)&&"HTML"!==this.parent.editorMode?e.querySelector(".e-video-url").focus():e.querySelector("#"+this.rteId+"_insertVideo").focus()}},i.prototype.fileSelected=function(){this.inputUrl&&this.inputUrl.setAttribute("disabled","true"),this.embedInputUrl&&this.embedInputUrl.setAttribute("disabled","true")},i.prototype.fileUploadSuccess=function(e,t){this.inputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-video-url"),this.embedInputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-embed-video-url"),sf.base.isNullOrUndefined(this.parent.insertVideoSettings.path)||(this.uploadUrl={url:e,selection:this.vidUploadSave,fileName:t,selectParent:this.vidUploadSelectedParent,width:{width:this.parent.insertVideoSettings.width,minWidth:this.parent.insertVideoSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertVideoSettings.height,minHeight:this.parent.insertVideoSettings.minHeight,maxHeight:this.parent.insertVideoSettings.maxHeight}},this.inputUrl&&this.inputUrl.setAttribute("disabled","true"),this.embedInputUrl&&this.embedInputUrl.setAttribute("disabled","true"))},i.prototype.fileUploadComplete=function(e,t){if(this.inputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-video-url"),"HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(this.parent.insertVideoSettings.path)){var i="Base64"===this.parent.insertVideoSettings.saveFormat?e:URL.createObjectURL(I(e));this.uploadUrl={url:i,selection:this.vidUploadSave,fileName:t,selectParent:this.vidUploadSelectedParent,width:{width:this.parent.insertVideoSettings.width,minWidth:this.parent.insertVideoSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertVideoSettings.height,minHeight:this.parent.insertVideoSettings.minHeight,maxHeight:this.parent.insertVideoSettings.maxHeight}},this.inputUrl&&this.inputUrl.setAttribute("disabled","true"),this.embedInputUrl&&this.embedInputUrl.setAttribute("disabled","true")}},i.prototype.fileUploadChange=function(e,t){this.modifiedUrl=e,this.isStreamUrl=t},i.prototype.fileRemoving=function(){this.inputUrl.removeAttribute("disabled"),this.embedInputUrl.removeAttribute("disabled"),this.uploadUrl&&(this.uploadUrl.url="")},i.prototype.dialogClosed=function(){"HTML"===this.parent.editorMode&&this.selectionObj.selection.restore(),this.buttonClickElement&&sf.base.EventHandler.remove(this.buttonClickElement,"click",this.videoBrowseClick)},i.prototype.insertVideoUrl=function(){var e,t;if(sf.base.Browser.isDevice?(this.inputUrl=this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_video").querySelector(".e-rte-video-dialog .e-video-url"),this.embedInputUrl=this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_video").querySelector(".e-rte-video-dialog .e-embed-video-url")):(this.inputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-video-url"),this.embedInputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-embed-video-url")),sf.base.isNullOrUndefined(this.inputUrl)||(e=this.inputUrl.value),sf.base.isNullOrUndefined(this.embedInputUrl)||(t=this.embedInputUrl.value),this.isStreamUrl&&""!==this.modifiedUrl&&(this.uploadUrl.url=this.modifiedUrl,this.modifiedUrl=""),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.uploadUrl)||""===this.uploadUrl.url){if(!("HTML"!==this.parent.editorMode||sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(t))){if("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))){this.parent.getEditPanel().focus();var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)}var n=sf.base.isNullOrUndefined(e)?t:e.split("/")[e.split("/").length-1],s={cssClass:"Inline"===this.parent.insertVideoSettings.layoutOption?"e-video-inline":"e-video-break",url:e,selection:this.selectionObj.selection,fileName:n,isEmbedUrl:!sf.base.isNullOrUndefined(t),selectParent:this.selectionObj.selectParent,width:{width:this.parent.insertVideoSettings.width,minWidth:this.parent.insertVideoSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertVideoSettings.height,minHeight:this.parent.insertVideoSettings.minHeight,maxHeight:this.parent.insertVideoSettings.maxHeight}};this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,s),this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null)}}else this.uploadUrl.cssClass="Inline"===this.parent.insertVideoSettings.layoutOption?"e-video-inline":"e-video-break",this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null),this.uploadUrl.isEmbedUrl=!1,this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,this.uploadUrl),this.parent.getEditPanel().querySelector(".e-video-resize")&&(this.vidEle.style.outline="",this.removeResizeEle())},i.prototype.showDialog=function(e,t,i,n,s){var o,r,a,l;e&&!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)?(o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.getDocument()),a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(o),l=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)):(r=i,a=n,l=s),"HTML"===this.parent.editorMode&&this.videoDialog({args:{item:{command:"Videos",subCommand:"Video"},originalEvent:e?void 0:t},selectNode:a,selection:r,selectParent:l})},i.prototype.onCutHandler=function(){this.vidResizeDiv&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&this.cancelResizeAction()},i.prototype.onIframeMouseDown=function(e){this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null),this.onDocumentClick(e)},i.prototype.onDocumentClick=function(e){var t=e.target;("VIDEO"===t.nodeName||this.isEmbedVidElem(t))&&(this.vidEle=this.isEmbedVidElem(t)?t.querySelector("iframe"):t);var i=document.body.querySelector("#"+this.rteId+"_video.e-rte-video-dialog");!sf.base.isNullOrUndefined(i)&&(!sf.base.closest(t,"#"+this.rteId+"_video")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!sf.base.closest(t,"#"+this.rteId+"_toolbar_Video")&&!t.querySelector("#"+this.rteId+"_toolbar_Video"))&&(e.offsetX>e.target.clientWidth||e.offsetY>e.target.clientHeight||(this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog","Outside Click"),this.parent.isBlur=!0,sf.base.Browser.isIE&&A(this.parent.element,"focusout"))),!this.isEmbedVidElem(e.target)&&this.vidResizeDiv&&!this.quickToolObj&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&this.cancelResizeAction(),this.parent.getEditPanel().querySelector(".e-vid-resize")&&("VIDEO"===t.tagName||this.isEmbedVidElem(t)||this.removeResizeEle(),"VIDEO"===t.tagName||this.isEmbedVidElem(t)||sf.base.isNullOrUndefined(this.vidEle)?sf.base.isNullOrUndefined(this.prevSelectedVidEle)||this.prevSelectedVidEle===("IFRAME"===t.tagName||"VIDEO"===t.tagName?t:t.querySelector("iframe"))||(this.prevSelectedVidEle.style.outline=""):this.vidEle.style.outline="")},i.prototype.videoClick=function(e){sf.base.Browser.isDevice&&("VIDEO"===e.target.tagName||this.isEmbedVidElem(e.target)?(this.parent.getEditPanel().setAttribute("contenteditable","false"),e.target.focus()):this.parent.readonly||this.parent.getEditPanel().setAttribute("contenteditable","true")),("VIDEO"===e.target.tagName||this.isEmbedVidElem(e.target))&&e.preventDefault()},i.prototype.onKeyDown=function(e){var t,i,n,s,o,r=e.args;this.deletedVid=[];if("HTML"===this.parent.editorMode&&(o=(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument())).startContainer===t.endContainer&&t.startOffset===t.endOffset),!o&&"HTML"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(r.which)<0)for(var a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),l=0;l<a.length;l++)"VIDEO"!==a[l].nodeName&&"IFRAME"!==a[l].nodeName||this.deletedVid.push(a[l]);if("HTML"===this.parent.editorMode&&(8===r.which&&"Backspace"===r.code||46===r.which&&"Delete"===r.code)){var d=t.startContainer===t.endContainer&&t.startOffset===t.endOffset;8===r.which&&"Backspace"===r.code&&d?this.checkVideoBack(t):46===r.which&&"Delete"===r.code&&d&&this.checkVideoDel(t)}if(!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&"KeyK"!==r.code&&(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),s=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),!r.ctrlKey&&r.key&&(1===r.key.length||"enter"===r.action||37===r.keyCode||38===r.keyCode||39===r.keyCode||40===r.keyCode)&&("VIDEO"===s[0].tagName||this.isEmbedVidElem(s[0]))&&s[0].parentElement)){var h=s[0].parentElement.childNodes[0];this.parent.getEditPanel().querySelector(".e-vid-resize")&&this.removeResizeEle(),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),h,h,h.textContent.length,h.textContent.length),sf.base.removeClass([s[0]],"e-video-focus"),this.quickToolObj.hideVideoQTBar(),sf.base.isNullOrUndefined(this.vidEle)||(this.vidEle.style.outline="")}if(!r.ctrlKey||89!==r.keyCode&&90!==r.keyCode||this.undoStack({subCommand:90===r.keyCode?"undo":"redo"}),8===r.keyCode||46===r.keyCode){if(n&&("VIDEO"===n[0].nodeName||this.isEmbedVidElem(n[0]))){r.preventDefault();var c={selectNode:n,selection:i,selectParent:s,args:{item:{command:"Videos",subCommand:"Remove"},originalEvent:r}};this.deleteVid(c,r.keyCode)}this.parent.getEditPanel().querySelector(".e-vid-resize")&&this.removeResizeEle()}switch(r.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null);break;case"insert-video":this.showDialog(!1,r,i,n,s),r.preventDefault()}},i.prototype.onKeyUp=function(e){if(!sf.base.isNullOrUndefined(this.deletedVid)&&this.deletedVid.length>0)for(var t=0;t<this.deletedVid.length;t++){var i={src:this.deletedVid[t].getAttribute("src")};this.parent.mediaDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("MediaDeleted",i)}},i.prototype.resizeStart=function(e,t){var i=this;if(!this.parent.readonly){var n=t||(this.isEmbedVidElem(e.target)?e.target.querySelector("iframe"):e.target);if(this.prevSelectedVidEle=this.vidEle,"VIDEO"===n.tagName||"IFRAME"===n.tagName){this.parent.defaultResize(e,!1);var s=n;this.vidResizeDiv&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&sf.base.detach(this.vidResizeDiv),this.videoResize(s)}if(n.classList.contains("e-rte-videoboxmark")){if(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),e.preventDefault(),e.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.hideVideoQTBar(),n.classList.contains("e-rte-topLeft")&&(this.resizeBtnStat.topLeft=!0),n.classList.contains("e-rte-topRight")&&(this.resizeBtnStat.topRight=!0),n.classList.contains("e-rte-botLeft")&&(this.resizeBtnStat.botLeft=!0),n.classList.contains("e-rte-botRight")&&(this.resizeBtnStat.botRight=!0),sf.base.Browser.isDevice&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&!this.vidResizeDiv.classList.contains("e-mob-span"))sf.base.addClass([this.vidResizeDiv],"e-mob-span");else{this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"Videos"}).then((function(e){e.cancel&&i.cancelResizeAction()}))}sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd,this)}}},i.prototype.resizing=function(e){this.vidEle.offsetWidth>=this.getMaxWidth()&&(this.vidEle.style.maxHeight=this.vidEle.offsetHeight+"px");var t=this.getPointX(e),i=this.getPointY(e),n=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(t-this.pageX):t-this.pageX,s=this.resizeBtnStat.topLeft||this.resizeBtnStat.topRight?-(i-this.pageY):i-this.pageY,o=parseInt(this.vidDupPos.width,10)+n,r=parseInt(this.vidDupPos.height,10)+s;this.pageX=t,this.pageY=i,(this.resizeBtnStat.botRight||this.resizeBtnStat.botLeft||this.resizeBtnStat.topRight||this.resizeBtnStat.topLeft)&&this.vidDupMouseMove(o+"px",r+"px",e)},i.prototype.resizeEnd=function(e){this.resizeBtnInit(),this.vidEle.parentElement.style.cursor="auto",sf.base.Browser.isDevice&&sf.base.removeClass([e.target.parentElement],"e-mob-span");this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"Videos"}),this.parent.formatter.editorManager.observer.on(d,this.undoStack,this),this.parent.formatter.saveData()},i.prototype.destroy=function(){this.prevSelectedVidEle=void 0,this.removeEventListener()},i}(),F=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("xhtmlValidation",this.enableXhtmlValidation,this),this.parent.observer.on(t,this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("xhtmlValidation",this.enableXhtmlValidation),this.parent.observer.off(t,this.removeEventListener)},e.prototype.enableXhtmlValidation=function(){this.parent.enableXhtml&&(sf.base.isNullOrUndefined(this.parent.inputElement)?this.currentElement=this.parent.element:this.currentElement=this.parent.inputElement,this.clean(this.currentElement),this.AddRootElement(),this.ImageTags(),this.removeTags(),this.RemoveUnsupported(),this.currentElement.innerHTML=this.selfEncloseValidation(this.currentElement.innerHTML))},e.prototype.selfEncloseValidation=function(e){var t;e=e.replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>").replace(/ /g," ");for(var i=[],n=[],s=[/<img(.*?)>/gi,/<area(.*?)>/gi,/<base(.*?)>/gi,/<col (.*?)>/gi,/<embed(.*?)>/gi,/<input(.*?)>/gi,/<link(.*?)>/gi,/<meta(.*?)>/gi,/<param(.*?)>/gi,/<source(.*?)>/gi,/<track(.*?)>/gi,/<wbr(.*?)>/gi],o=0;o<s.length;o++){for(t=s[o].exec(e);null!==t;)i.push(t[0].toString()),t=s[o].exec(e);n=i.slice(0);for(var r=0;r<i.length;r++)-1!==i[r].indexOf("/")&&i[r].lastIndexOf("/")===i[r].length-2||(i[r]=i[r].substr(0,i[r].length-1)+" /"+i[r].substr(i[r].length-1,i[r].length));for(var a=0;a<=i.length-1;a++)e=e.replace(n[a],i[a])}return e},e.prototype.AddRootElement=function(){if(1===this.currentElement.childNodes.length&&"DIV"!==this.currentElement.firstChild.nodeName||this.currentElement.childNodes.length>1){for(var e=document.createElement("div");this.currentElement.childNodes.length>0;)e.appendChild(this.currentElement.childNodes[0]);this.currentElement.appendChild(e)}},e.prototype.clean=function(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];8===i.nodeType||"V:IMAGE"===i.nodeName?(e.removeChild(i),t--):1===i.nodeType&&this.clean(i)}return this.currentElement.innerHTML},e.prototype.ImageTags=function(){for(var e=this.currentElement.querySelectorAll("IMG"),t=e.length-1;t>=0;t--){if(!e[t].hasAttribute("alt"))e[t].setAttribute("alt","")}},e.prototype.removeTags=function(){for(var e=[["br","ul"],["br","ol"],["table","span"],["div","span"],["p","span"]],t=0;t<e.length;t++)this.RemoveElementNode(e[t][0],e[t][1])},e.prototype.RemoveElementNode=function(e,t){for(var i=this.currentElement.querySelectorAll(t),n=0;n<i.length;n++)for(var s=i[n].querySelectorAll(e),o=s.length;o>0;o--)sf.base.detach(s[o-1])},e.prototype.RemoveUnsupported=function(){for(var e=this.currentElement.querySelectorAll("u"),t=e.length-1;t>=0;t--){var i=document.createElement("span");i.style.textDecoration="underline",i.innerHTML=e[t].innerHTML,e[t].parentNode.insertBefore(i,e[t]),sf.base.detach(e[t])}var n=this.currentElement.querySelectorAll("strong");for(t=n.length-1;t>=0;t--){var s=document.createElement("b");s.innerHTML=n[t].innerHTML,n[t].parentNode.insertBefore(s,n[t]),sf.base.detach(n[t])}var o=["language","role","target","contenteditable","cellspacing","cellpadding","border","valign","colspan"];for(t=0;t<=o.length;t++)this.RemoveAttributeByName(o[t])},e.prototype.RemoveAttributeByName=function(e){if(null!==this.currentElement.firstChild&&3!==this.currentElement.firstChild.nodeType)for(var t=0;t<this.currentElement.childNodes.length;t++){var i=this.currentElement.childNodes[t];if(3!==i.nodeType&&"TABLE"!==i.nodeName&&"TBODY"!==i.nodeName&&"THEAD"!==i.nodeName&&"TH"!==i.nodeName&&"TR"!==i.nodeName&&"TD"!==i.nodeName&&(i.hasAttribute(e)&&i.removeAttribute(e),i.hasChildNodes()))for(var n=0;n<i.childNodes.length;n++){var s=i.childNodes[n];if(3!==s.nodeType&&"TABLE"!==s.nodeName&&"TBODY"!==s.nodeName&&"THEAD"!==s.nodeName&&"TH"!==s.nodeName&&"TR"!==s.nodeName&&"TD"!==s.nodeName&&s.hasAttribute(e)&&s.removeAttribute(e),s.hasChildNodes())for(var o=0;o<s.childNodes.length;o++)3!==s.childNodes[o].nodeType&&"TABLE"!==s.childNodes[o].nodeName&&"TBODY"!==s.childNodes[o].nodeName&&"THEAD"!==s.childNodes[o].nodeName&&"TH"!==s.childNodes[o].nodeName&&"TR"!==s.childNodes[o].nodeName&&"TD"!==s.childNodes[o].nodeName&&s.childNodes[o].hasAttribute(e)&&s.childNodes[o].removeAttribute(e)}}},e}(),V=function(){function e(){}return e.prototype.getFormattedNode=function(e,t,i){var n=this.getFormatParent(e,t,i);return null!==n&&n!==i?n:null},e.prototype.getFormatParent=function(e,t,i){do{e=e.parentNode}while(e&&e!==i&&!this.isFormattedNode(e,t));return e},e.prototype.isFormattedNode=function(t,i){switch(i){case"bold":return e.isBold(t);case"italic":return e.isItalic(t);case"underline":return e.isUnderline(t);case"strikethrough":return e.isStrikethrough(t);case"superscript":return e.isSuperscript(t);case"subscript":return e.isSubscript(t);case"fontcolor":return this.isFontColor(t);case"fontname":return this.isFontName(t);case"fontsize":return this.isFontSize(t);case"backgroundcolor":return this.isBackgroundColor(t);default:return!1}},e.isBold=function(e){return-1!==["strong","b"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"bold"!==e.style.fontWeight)},e.isItalic=function(e){return-1!==["em","i"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"italic"!==e.style.fontStyle)},e.isUnderline=function(e){return-1!==["u"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"underline"!==e.style.textDecoration)},e.isStrikethrough=function(e){return-1!==["del","strike"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"line-through"!==e.style.textDecoration)},e.isSuperscript=function(e){return-1!==["sup"].indexOf(e.nodeName.toLowerCase())},e.isSubscript=function(e){return-1!==["sub"].indexOf(e.nodeName.toLowerCase())},e.prototype.isFontColor=function(t){var i=t.style&&t.style.color;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isBackgroundColor=function(t){var i=t.style&&t.style.backgroundColor;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isFontSize=function(t){var i=t.style&&t.style.fontSize;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isFontName=function(t){var i=t.style&&t.style.fontFamily;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.inlineTags=["a","abbr","acronym","b","bdo","big","cite","code","dfn","em","i","kbd","label","q","samp","small","span","strong","sub","sup","tt","u","var","del"],e}(),j="INSERT-IMAGE",W=["address","article","aside","audio","blockquote","canvas","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video","body"],X=["td","th"],Y=["table","tbody","td","tfoot","th","thead","tr"],K=["area","base","br","embed","hr","img","input","param","source","track","wbr","iframe","td"],G=function(){function e(){this.startNodeName=[],this.endNodeName=[]}return e.prototype.saveInstance=function(e,t){return this.range=e.cloneRange(),this.rootNode=this.documentFromRange(e),this.body=t,this.startContainer=this.getNodeArray(e.startContainer,!0),this.endContainer=this.getNodeArray(e.endContainer,!1),this.startOffset=e.startOffset,this.endOffset=e.endOffset,this.html=this.body.innerHTML,this},e.prototype.documentFromRange=function(e){return 9===e.startContainer.nodeType?e.startContainer:e.startContainer.ownerDocument},e.prototype.getRange=function(e){var t=this.get(e),i=t&&t.rangeCount>0?t.getRangeAt(t.rangeCount-1):e.createRange();return i.startContainer!==e||i.endContainer!==e||i.startOffset||i.endOffset||(i.setStart(e.body,0),i.collapse(!0)),i},e.prototype.get=function(e){return e.defaultView.getSelection()},e.prototype.save=function(e,t){return e=e?e.cloneRange():this.getRange(t),this.saveInstance(e,t.body)},e.prototype.getIndex=function(e){var t=0;if(e=e.previousSibling||"BR"!==e.tagName?e.previousSibling:e)for(e.nodeType;e;null)t++,e.nodeType,e=e.previousSibling;return t},e.prototype.isChildNode=function(e,t){for(var i=0;i<t.childNodes.length;i++)if(e.indexOf(t.childNodes[i])>-1)return!0;return!1},e.prototype.getNode=function(e,t,i){return t!==e||3!==e.nodeType&&e.firstChild&&-1===i.indexOf(e.firstChild)&&!this.isChildNode(i,e)?-1===i.indexOf(e.firstChild)&&e.firstChild&&!this.isChildNode(i,e)?e.firstChild:e.nextSibling?e.nextSibling:e.parentNode?e.parentNode:null:null},e.prototype.getNodeCollection=function(e){var t=e.startContainer.childNodes[e.startOffset]||e.startContainer,i=e.endContainer.childNodes[e.endOffset>0?e.endOffset-1:e.endOffset]||e.endContainer;if((t===i||"BR"===t.nodeName&&t===e.endContainer.childNodes[e.endOffset])&&0===t.childNodes.length)return[t];if(e.startOffset===e.endOffset&&0!==e.startOffset&&"PRE"===e.startContainer.nodeName)return["BR"===t.nodeName||"#text"===t.nodeName?t:t.childNodes[0]];var n=[];do{-1===n.indexOf(t)&&n.push(t),t=this.getNode(t,i,n)}while(t);return n},e.prototype.getParentNodeCollection=function(e){return this.getParentNodes(this.getNodeCollection(e),e)},e.prototype.getParentNodes=function(e,t){e=e.reverse();for(var i=0;i<e.length;i++)-1!==e.indexOf(e[i].parentNode)||3===e[i].nodeType&&t.startContainer!==t.endContainer&&t.startContainer.parentNode!==t.endContainer.parentNode?(e.splice(i,1),i--):3===e[i].nodeType&&(e[i]=e[i].parentNode);return e},e.prototype.getSelectionNodeCollection=function(e){return this.getSelectionNodes(this.getNodeCollection(e))},e.prototype.getSelectionNodeCollectionBr=function(e){return this.getSelectionNodesBr(this.getNodeCollection(e))},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),i=0;i<e.length;i++)(3!==e[i].nodeType||""===e[i].textContent.trim()||1===e[i].textContent.length&&e[i].textContent.match(t))&&(e.splice(i,1),i--);return e.reverse()},e.prototype.getSelectionNodesBr=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),i=0;i<e.length;i++)"BR"!==e[i].nodeName&&(3!==e[i].nodeType||""===e[i].textContent.trim()||1===e[i].textContent.length&&e[i].textContent.match(t))&&(e.splice(i,1),i--);return e.reverse()},e.prototype.getInsertNodeCollection=function(e){return this.getInsertNodes(this.getNodeCollection(e))},e.prototype.getInsertNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)(0!==e[t].childNodes.length&&3!==e[t].nodeType||3===e[t].nodeType&&""===e[t].textContent)&&(e.splice(t,1),t--);return e.reverse()},e.prototype.getNodeArray=function(e,t,i){var n=[];for(t?this.startNodeName=[]:this.endNodeName=[];e!==(i||this.rootNode)&&!sf.base.isNullOrUndefined(e);null)t?this.startNodeName.push(e.nodeName.toLowerCase()):this.endNodeName.push(e.nodeName.toLowerCase()),n.push(this.getIndex(e)),e=e.parentNode;return n},e.prototype.setRangePoint=function(e,t,i,n){for(var s=this.rootNode,o=i.length,r=n;o--;null)s=s&&s.childNodes[i[o]];return s&&r>=0&&"html"!==s.nodeName&&(3===s.nodeType&&"&nbsp;"===s.nodeValue.replace(/\u00a0/g,"&nbsp;")&&(r=s.textContent.length),e[t?"setStart":"setEnd"](s,r)),e},e.prototype.restore=function(){var e=this.range.cloneRange();return e=this.setRangePoint(e,!0,this.startContainer,this.startOffset),e=this.setRangePoint(e,!1,this.endContainer,this.endOffset),this.selectRange(this.rootNode,e),e},e.prototype.selectRange=function(e,t){this.setRange(e,t),this.save(t,e)},e.prototype.setRange=function(e,t){var i=this.get(e);i.removeAllRanges(),i.addRange(t)},e.prototype.setSelectionText=function(e,t,i,n,s){var o=e.createRange();o.setStart(t,n),o.setEnd(i,s),this.setRange(e,o)},e.prototype.setSelectionContents=function(e,t){var i=e.createRange();i.selectNode(t),this.setRange(e,i)},e.prototype.setSelectionNode=function(e,t){var i=e.createRange();i.selectNodeContents(t),this.setRange(e,i)},e.prototype.getSelectedNodes=function(e){return this.getNodeCollection(this.getRange(e))},e.prototype.Clear=function(e){this.get(e).removeAllRanges()},e.prototype.insertParentNode=function(e,t,i){i.surroundContents(t),this.selectRange(e,i)},e.prototype.setCursorPoint=function(e,t,i){var n=e.createRange(),s=e.defaultView.getSelection();n.setStart(t,i),n.collapse(!0),s.removeAllRanges(),s.addRange(n)},e}(),Z={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},Q=function(){function e(){}return e.get=function(e,t,i,n,s,o){for(var r=JSON.parse(JSON.stringify(Z)),a=JSON.parse(JSON.stringify(Z)),l=new G,d=o?[o]:l.getNodeCollection(l.getRange(e)),h=d.length,c=!1,p=l.getRange(e),u=0;u<d.length;u++){for(;3===d[u].nodeType&&3===p.startContainer.nodeType&&d[u].parentNode&&d[u].parentNode.lastElementChild&&"BR"!==d[u].parentNode.lastElementChild.nodeName&&0===this.getImmediateBlockNode(d[u].parentNode).textContent.replace(/\u200B/g,"").length&&0===p.startContainer.textContent.replace(/\u200B/g,"").length&&0===l.get(e).toString().replace(/\u200B/g,"").length;)d[u]=d[u].parentNode.lastElementChild.firstChild,c=!0;c&&d[u]&&(l.setCursorPoint(e,d[u],d[u].textContent.length),c=!1),("BR"!==d[u].nodeName&&3!==d[u].nodeType||h>1&&3===d[u].nodeType&&""===d[u].textContent.trim())&&(d.splice(u,1),u--)}for(u=0;u<d.length;u++)r=this.getFormatParent(e,r,d[u],t,i,n,s),(0===u&&r.bold||!r.bold)&&(a.bold=r.bold),(0===u&&r.insertcode||!r.insertcode)&&(a.insertcode=r.insertcode),(0===u&&r.italic||!r.italic)&&(a.italic=r.italic),(0===u&&r.underline||!r.underline)&&(a.underline=r.underline),(0===u&&r.strikethrough||!r.strikethrough)&&(a.strikethrough=r.strikethrough),(0===u&&r.superscript||!r.superscript)&&(a.superscript=r.superscript),(0===u&&r.subscript||!r.subscript)&&(a.subscript=r.subscript),(0===u&&r.fontcolor||!r.fontcolor)&&(a.fontcolor=r.fontcolor),(0===u&&r.fontname||!r.fontname)&&(a.fontname=r.fontname),(0===u&&r.fontsize||!r.fontsize)&&(a.fontsize=r.fontsize),(0===u&&r.backgroundcolor||!r.backgroundcolor)&&(a.backgroundcolor=r.backgroundcolor),(0===u&&r.orderedlist||!r.orderedlist)&&(a.orderedlist=r.orderedlist),(0===u&&r.unorderedlist||!r.unorderedlist)&&(a.unorderedlist=r.unorderedlist),(0===u&&r.alignments||!r.alignments)&&(a.alignments=r.alignments),(0===u&&r.formats||!r.formats)&&(a.formats=r.formats),(0===u&&r.createlink||!r.createlink)&&(a.createlink=r.createlink),(0===u&&r.numberFormatList||!r.numberFormatList)&&(a.numberFormatList=r.numberFormatList),(0===u&&r.bulletFormatList||!r.bulletFormatList)&&(a.bulletFormatList=r.bulletFormatList),r=JSON.parse(JSON.stringify(Z));return a},e.getImmediateBlockNode=function(e){do{e=e.parentNode}while(e&&W.indexOf(e.nodeName.toLocaleLowerCase())<0);return e},e.getFormatParent=function(e,t,i,n,s,o,r){if(n.contains(i)||3===i.nodeType&&3!==n.nodeType&&n.contains(i.parentNode))do{t=this.isFormattedNode(e,t,i,s,o,r),i=i.parentNode}while(i&&i!==n);return t},e.isFormattedNode=function(e,t,i,n,s,o){return t.bold||(t.bold=V.isBold(i)),t.italic||(t.italic=V.isItalic(i)),t.underline||(t.underline=V.isUnderline(i)),t.strikethrough||(t.strikethrough=V.isStrikethrough(i)),t.superscript||(t.superscript=V.isSuperscript(i)),t.subscript||(t.subscript=V.isSubscript(i)),t.fontcolor||(t.fontcolor=this.isFontColor(e,i)),t.fontname||(t.fontname=this.isFontName(e,i,o)),t.fontsize||(t.fontsize=this.isFontSize(i,s)),t.backgroundcolor||(t.backgroundcolor=this.isBackgroundColor(i)),t.orderedlist||(t.orderedlist=this.isOrderedList(i)),t.unorderedlist||(t.unorderedlist=this.isUnorderedList(i)),t.alignments||(t.alignments=this.isAlignment(i)),t.formats||(t.formats=this.isFormats(i,n),"pre"===t.formats&&(t.insertcode=!0)),t.createlink||(t.createlink=this.isLink(i)),t.numberFormatList||(t.numberFormatList=this.isNumberFormatList(i)),t.bulletFormatList||(t.bulletFormatList=this.isBulletFormatList(i)),t},e.isFontColor=function(e,t){var i=t.style&&t.style.color;return null!=i&&""!==i||3===t.nodeType||(i=this.getComputedStyle(e,t,"color")),null!==i&&""!==i&&void 0!==i?i:null},e.isLink=function(e){return"a"===e.nodeName.toLocaleLowerCase()},e.isBackgroundColor=function(e){var t=e.style&&e.style.backgroundColor;return null!==t&&""!==t&&void 0!==t?t:null},e.isFontSize=function(e,t){var i=e.style&&e.style.fontSize;return null!==i&&""!==i&&void 0!==i&&(null==t||t.indexOf(i)>-1)?i:null},e.isFontName=function(e,t,i){var n=t.style&&t.style.fontFamily;null!=n&&""!==n||3===t.nodeType||(n=this.getComputedStyle(e,t,"font-family"));var s=null;return null!==n&&""!==n&&void 0!==n&&(null==i||i.filter((function(e,t){var i=new RegExp(n,"i");(e.replace(/"/g,"").replace(/ /g,"").toLowerCase()===n.replace(/"/g,"").replace(/ /g,"").toLowerCase()||e.search(i)>-1)&&(s=t)}))&&null!==s)?null!==s?i[s]:n.replace(/"/g,""):null},e.isOrderedList=function(e){return"ol"===e.nodeName.toLocaleLowerCase()},e.isUnorderedList=function(e){return"ul"===e.nodeName.toLocaleLowerCase()},e.isAlignment=function(e){var t=e.style&&e.style.textAlign;return"left"===t?"justifyleft":"center"===t?"justifycenter":"right"===t?"justifyright":"justify"===t?"justifyfull":null},e.isFormats=function(e,t){return null==t&&W.indexOf(e.nodeName.toLocaleLowerCase())>-1||null!=t&&t.indexOf(e.nodeName.toLocaleLowerCase())>-1?e.nodeName.toLocaleLowerCase():null},e.getComputedStyle=function(e,t,i){return e.defaultView.getComputedStyle(t,null).getPropertyValue(i)},e.isNumberFormatList=function(e){var t=e.style&&e.style.listStyleType;return"lower-alpha"===t?"Lower Alpha":"number"===t?"Number":"upper-alpha"===t?"Upper Alpha":"lower-roman"===t?"Lower Roman":"upper-roman"===t?"Upper Roman":"lower-greek"===t?"Lower Greek":"none"===t?"None":null},e.isBulletFormatList=function(e){var t=e.style&&e.style.listStyleType;return"circle"===t?"Circle":"square"===t?"Square":"none"===t?"None":"disc"===t?"Disc":null},e}(),J=function(){function e(e){this.parent=e,this.toolbarStatus=this.prevToolbarStatus={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("toolbar-refresh",this.onRefreshHandler,this),this.parent.observer.on(t,this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("toolbar-refresh",this.onRefreshHandler),this.parent.observer.off(t,this.removeEventListener)},e.prototype.onRefreshHandler=function(e){var t=this;if(!this.parent.readonly){var i=[],n=[],s=[];this.parent.fontSize.items.forEach((function(e){i.push(e.value)})),this.parent.fontFamily.items.forEach((function(e){n.push(e.value)})),this.parent.format.items.forEach((function(e){s.push(e.value.toLocaleLowerCase())})),this.toolbarStatus=Q.get(this.parent.getDocument(),this.parent.getEditPanel(),s,i,n,e.documentNode);var o=JSON.stringify(this.toolbarStatus);this.parent.inlineMode.enable?setTimeout((function(){document.querySelector("#"+t.parent.id+"_Inline_Quick_Popup")&&document.querySelector("#"+t.parent.id+"_Inline_Quick_Popup").classList.contains("e-rte-pop")&&(t.parent.observer.notify("toolbar-updated",t.toolbarStatus),JSON.stringify(t.prevToolbarStatus)!==o&&(t.parent.observer.notify("updateTbItemsStatus",{html:JSON.parse(o),markdown:null}),t.prevToolbarStatus=JSON.parse(o)))}),100):(this.parent.observer.notify("toolbar-updated",this.toolbarStatus),JSON.stringify(this.prevToolbarStatus)!==o&&(this.parent.observer.notify("updateTbItemsStatus",{html:JSON.parse(o),markdown:null}),this.prevToolbarStatus=JSON.parse(o)))}},e}(),$=function(){return($=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},ee=function(){function e(){}return e.prototype.process=function(e,t,i,n){var s,o=this,r=e.getDocument().getSelection(),a=r.rangeCount>0?r.getRangeAt(r.rangeCount-1):null;if("HTML"===e.editorMode&&(s=this.editorManager.nodeSelection.save(a,e.getDocument())),sf.base.isNullOrUndefined(t)||!t.item.command||"Table"===t.item.command||"Actions"===t.item.command||"Links"===t.item.command||"Images"===t.item.command||"Audios"===t.item.command||"Videos"===t.item.command||!a||e.getEditPanel().contains(this.getAncestorNode(a.commonAncestorContainer))||e.getEditPanel()===a.commonAncestorContainer||e.getPanel()===a.commonAncestorContainer){if(sf.base.isNullOrUndefined(t)){var l=i.action;if("tab"!==l&&"enter"!==l&&"space"!==l&&"escape"!==l){t={},"Markdown"===e.editorMode&&"insert-table"===l&&(n={headingText:e.localeData.headingText,colText:e.localeData.colText});var d={originalEvent:i,cancel:!1,requestType:l||i.key+"Key"};sf.base.extend(t,t,d,!0),delete t.item,t.originalEvent=$({},t.originalEvent,{target:null}),e.actionBeginEnabled&&e.dotNetRef.invokeMethodAsync("ActionBeginEvent",t).then((function(e){t.cancel&&("paste"!==l&&"cut"!==l&&"copy"!==l||i.preventDefault())}))}var h=!!sf.base.isNullOrUndefined(e.tableModule)||!!e.tableModule&&e.tableModule.ensureInsideTableList;(9===i.which&&h||9!==i.which)&&(13===i.which&&"HTML"===e.editorMode&&(n={enterAction:e.enterKey}),this.editorManager.observer.notify("keydown"===i.type?"keydown":"keyup",{event:i,callBack:this.onSuccess.bind(this,e),value:n,enterAction:e.enterKey}))}else!sf.base.isNullOrUndefined(t)&&t.item.command&&t.item.subCommand&&(t.item.command!==t.item.subCommand&&"Font"!==t.item.command||("FontName"===t.item.subCommand||"FontSize"===t.item.subCommand)&&"dropDownSelect"===t.name||("BackgroundColor"===t.item.subCommand||"FontColor"===t.item.subCommand)&&"colorPickerChanged"===t.name)&&(t.originalEvent=$({},t.originalEvent,{target:null}),sf.base.extend(t,t,{requestType:t.item.subCommand,cancel:!1},!0),e.actionBeginEnabled?e.dotNetRef.invokeMethodAsync("ActionBeginEvent",t).then((function(r){r.cancel||o.actionBeginCallBack(e,t,s,i,n)})):this.actionBeginCallBack(e,t,s,i,n));(sf.base.isNullOrUndefined(i)||i&&"copy"!==i.action)&&this.enableUndo(e)}},e.prototype.getAncestorNode=function(e){return e=3===e.nodeType?e.parentNode:e},e.prototype.onKeyHandler=function(e,t){var i=this;this.editorManager.observer.notify("keyup",{event:t,callBack:function(){e.observer.notify("content-changed",{}),i.enableUndo(e)}})},e.prototype.onSuccess=function(e,t){var i=this;e.observer.notify("content-changed",{}),t&&(sf.base.isNullOrUndefined(t.event)||"copy"!==t.event.action)&&("Paste"===t.requestType?(e.observer.notify("execCommandCallBack",t),this.enableUndo(e)):(this.enableUndo(e),e.observer.notify("execCommandCallBack",t))),t.event=$({},t.event,{target:null}),this.successArgs=$({},t),delete t.elements,delete t.range,e.actionCompleteEnabled?e.dotNetRef.invokeMethodAsync("ActionCompleteEvent",t).then((function(t){i.actionCompleteCallBack(e,t)})):this.actionCompleteCallBack(e,t),"VideosPlayPause"===t.requestType&&e.observer.notify("editAreaClick",{args:event})},e.prototype.saveData=function(e){this.editorManager.undoRedoManager.saveData(e)},e.prototype.getUndoStatus=function(){return this.editorManager.undoRedoManager.getUndoStatus()},e.prototype.getUndoRedoStack=function(){return this.editorManager.undoRedoManager.undoRedoStack},e.prototype.enableUndo=function(e){if(e.undoRedoStatus){var t=this.getUndoStatus();!e.inlineMode.enable||sf.base.Browser.isDevice&&!u()?e.toolbarModule&&e.dotNetRef.invokeMethodAsync("UpdateUndoRedoStatus",t):e.dotNetRef.invokeMethodAsync("UpdateUndoRedoStatus",t)}},e.prototype.actionBeginCallBack=function(e,t,i,n,s){0===this.getUndoRedoStack().length&&"Links"!==t.item.command&&"Images"!==t.item.command&&"Audios"!==t.item.command&&"Videos"!==t.item.command&&this.saveData(),e.isBlur=!1,e.getEditPanel().focus(),"HTML"===e.editorMode&&i.restore();var o=t.item.subCommand.toLocaleLowerCase();"paste"===o||"cut"===o||"copy"===o?e.clipboardAction(o,n):(this.editorManager.observer.notify(d,{subCommand:t.item.subCommand}),this.editorManager.execCommand(t.item.command,t.item.subCommand,n,this.onSuccess.bind(this,e),t.item.value,"Pre"===t.item.subCommand&&"dropDownSelect"===t.name?{name:t.name}:s,"# iframe",e.enterKey))},e.prototype.actionCompleteCallBack=function(e,t){if(e.setPlaceHolder(),"Images"===t.requestType||"Audios"===t.requestType||"Videos"===t.requestType||"Links"===t.requestType&&"HTML"===t.editorMode){var i=this.successArgs;if("Links"===t.requestType&&t.event&&"keydown"===t.event.type&&32===t.event.keyCode)return;e.observer.notify("insertCompleted",{args:i.event,type:t.requestType,isNotify:!0,elements:i.elements})}e.autoResize()},e}(),te={h6:"###### ",h5:"##### ",h4:"#### ",h3:"### ",h2:"## ",h1:"# ",blockquote:"> ",pre:"```\n",p:""},ie={Bold:"**",Italic:"*",StrikeThrough:"~~",InlineCode:"`",SubScript:"<sub>",SuperScript:"<sup>",UpperCase:"A-Z",LowerCase:"a-z"},ne={OL:"1. ",UL:"- "},se={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-audio":"ctrl+shift+a","insert-video":"ctrl+shift+v","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",underline:"ctrl+u",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=",indents:"ctrl+]",outdents:"ctrl+[","html-source":"ctrl+shift+h","full-screen":"ctrl+shift+f","decrease-fontsize":"ctrl+shift+<","increase-fontsize":"ctrl+shift+>","justify-center":"ctrl+e","justify-full":"ctrl+j","justify-left":"ctrl+l","justify-right":"ctrl+r","clear-format":"ctrl+shift+r","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o",space:"32",enter:"13",tab:"tab",delete:"46"},oe={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=","full-screen":"ctrl+shift+f","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o"},re={b:["strong"],strong:["b"],i:["emp","cite"],emp:["i","cite"],cite:["i","emp"]},ae=["BR","IMG"],le="e-editor-select-start",de="e-editor-select-end",he=function(){function e(e,t){this.parent=e,this.nodeSelection=new G,this.currentDocument=t}return e.prototype.contents=function(e){return e&&"IFRAME"!==e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&W.indexOf(e.tagName.toLowerCase())>=0},e.prototype.isLink=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&"a"===e.tagName.toLowerCase()},e.prototype.blockParentNode=function(e){for(;e&&e.parentNode!==this.parent&&(!e.parentNode||!this.hasClass(e.parentNode,"e-node-inner"));null)if(e=e.parentNode,this.isBlockNode(e))return e;return e},e.prototype.rawAttributes=function(e){var t={},i=e.attributes;if(i.length>0)for(var n=0;n<i.length;n++){var s=i[n];t[s.nodeName]=s.value}return t},e.prototype.attributes=function(e){if(!e)return"";for(var t="",i=this.rawAttributes(e),n=Object.keys(i).sort(),s=0;s<n.length;s++){var o=n[s],r=i[o];r.indexOf("'")<0&&r.indexOf('"')>=0?t+=" "+o+"='"+r+"'":r.indexOf('"')>=0&&r.indexOf("'")>=0?t+=" "+o+'="'+(r=r.replace(/"/g,"&quot;"))+'"':t+=" "+o+'="'+r+'"'}return t},e.prototype.clearAttributes=function(e){for(var t=e.attributes,i=t.length-1;i>=0;i--){var n=t[i];e.removeAttribute(n.nodeName)}},e.prototype.openTagString=function(e){return"<"+e.tagName.toLowerCase()+this.attributes(e)+">"},e.prototype.closeTagString=function(e){return"</"+e.tagName.toLowerCase()+">"},e.prototype.createTagString=function(e,t,i){return"<"+e.toLowerCase()+this.attributes(t)+">"+i+"</"+e.toLowerCase()+">"},e.prototype.isList=function(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0},e.prototype.isElement=function(e){return e===this.parent},e.prototype.isEditable=function(e){return(!e.getAttribute||"true"===e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0},e.prototype.hasClass=function(e,t){return e&&e.classList&&e.classList.contains(t)},e.prototype.replaceWith=function(e,t){e.parentNode.insertBefore(this.parseHTMLFragment(t),e),sf.base.detach(e)},e.prototype.parseHTMLFragment=function(e){var t=sf.base.createElement("template");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)},e.prototype.wrap=function(e,t){return e.parentNode.insertBefore(t,e),(t=e.previousSibling).appendChild(e),t},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.wrapInner=function(e,t){for(e.appendChild(t),(t=e.querySelector(".e-rte-wrap-inner")).classList.remove("e-rte-wrap-inner"),0===t.classList.length&&t.removeAttribute("class");e.firstChild!==t;)t.appendChild(e.firstChild);return t},e.prototype.unWrap=function(e){for(var t=e.parentNode,i=[];e.firstChild;)i.push(e.firstChild),t.insertBefore(e.firstChild,e);return i=i.length>0?i:[e.parentNode],t.removeChild(e),i},e.prototype.getSelectedNode=function(e,t){return e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t-1]&&e.childNodes[t-1].nodeType===Node.ELEMENT_NODE&&(e.childNodes[t-1].classList.contains(le)||e.childNodes[t-1].classList.contains(de))?e=e.childNodes[t-1]:e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t]&&(e=e.childNodes[t]),e.nodeType===Node.TEXT_NODE&&(e=e.parentNode),e},e.prototype.nodeFinds=function(e,t){for(var i=[],n=0;n<t.length;n++)e.contains(t[n])&&e!==t[n]&&i.push(t[n]);return i},e.prototype.isEditorArea=function(){var e;for(e=this.getRangePoint(0).commonAncestorContainer;e&&!this.isElement(e);null)e=e.parentNode;return!!this.isElement(e)},e.prototype.getRangePoint=function(e){var t=this.getSelection(),i=[];if(t&&t.getRangeAt&&t.rangeCount){i=[];for(var n=0;n<t.rangeCount;n++)i.push(t.getRangeAt(n))}else i=[this.currentDocument.createRange()];return void 0!==e?i[e]:i},e.prototype.getSelection=function(){return this.nodeSelection.get(this.currentDocument)},e.prototype.getPreviousNode=function(e){for(e=e.previousElementSibling;e&&"\n"===e.textContent;null)e=e.previousElementSibling;return e},e.prototype.encode=function(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},e.prototype.saveMarker=function(e,t){var i,n,s=this.parent.querySelector("."+le),o=this.parent.querySelector("."+de);if(""===s.textContent&&sf.base.isNullOrUndefined(o)&&"tab"!==t&&(1===s.childNodes.length&&"BR"===s.childNodes[0].nodeName?s.innerHTML="&#65279;&#65279;<br>":s.innerHTML="&#65279;&#65279;"),this.hasClass(s,le)&&s.classList.length>1){var r=this.createTagString("p",s,this.encode(s.textContent));this.replaceWith(s,r),(s=this.parent.querySelector("."+le)).classList.remove(le),i=s.childNodes[0]}else i=this.unWrap(s)[0];if(this.hasClass(o,de)&&o.classList.length>1){r=this.createTagString("p",o,this.encode(o.textContent));this.replaceWith(o,r),(o=this.parent.querySelector("."+de)).classList.remove(de),n=o.childNodes[0]}else n=o?this.unWrap(o)[0]:i;return e.startContainer=e.getNodeArray(i,!0),e.endContainer=e.getNodeArray(n,!1),e},e.prototype.marker=function(e,t){return'<span class="'+e+'">'+t+"</span>"},e.prototype.setMarker=function(e){var t=e.range,i=t.startContainer.childNodes,n=(i.length>1&&"TABLE"===i[0].nodeName?function(e){var t=e;do{t.childNodes.length>0&&(t=t.childNodes[0])}while(t.childNodes.length>0);return t}(i[t.startOffset+1]):i[t.startOffset>0?t.startOffset-1:t.startOffset])||t.startContainer,s=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer;if(n.nodeType===Node.ELEMENT_NODE&&s.nodeType===Node.ELEMENT_NODE&&(n.contains(s)||s.contains(n))){var o=n.contains(s)?n:s;if(o.nodeType!==Node.TEXT_NODE){for(var r=[],a=[],l=o;o.contains(l);null)r.indexOf(l)<0&&l.childNodes&&l.childNodes.length?(r.push(l),l=l.childNodes[0]):l.nextSibling?l=l.nextSibling:l.parentNode&&(l=l.parentNode,r.push(l)),a.indexOf(l)<0&&(l.nodeType===Node.TEXT_NODE||X.indexOf(l.parentNode.tagName.toLocaleLowerCase())>=0&&("BR"===l.tagName||"IMG"===l.tagName))&&a.push(l);a.length&&(n=n.contains(s)?a[0]:n,s=a[a.length-1])}}if(n!==s){if(n.nodeType!==Node.TEXT_NODE&&("BR"===n.tagName&&X.indexOf(n.parentNode.tagName.toLocaleLowerCase())>=0||"IMG"===n.tagName))this.replaceWith(n,this.marker(le,this.encode(n.textContent))),t.startContainer.querySelector("."+le).appendChild(n);else if(3!==n.nodeType&&"#text"!==n.nodeName){var d=this.marker(le,"");sf.base.append([this.parseHTMLFragment(d)],n)}else this.replaceWith(n,this.marker(le,this.encode(n.textContent)));if(s.nodeType!==Node.TEXT_NODE&&"BR"===s.tagName&&X.indexOf(s.parentNode.tagName.toLocaleLowerCase())>=0)this.replaceWith(s,this.marker(de,this.encode(s.textContent))),t.endContainer.querySelector("."+de).appendChild(s);else this.ensureSelfClosingTag(s,de,t)}else this.ensureSelfClosingTag(n,le,t)},e.prototype.ensureSelfClosingTag=function(e,t,i){var n=!1;if(3===e.nodeType)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.tagName){this.replaceWith(e,this.marker(t,this.encode(e.textContent))),i.startContainer.querySelector("."+t).appendChild(e)}else{if("IMG"===e.tagName){var s=document.createElement("p");e.parentElement.insertBefore(s,e),s.appendChild(e),e=s.children[0]}if("TABLE"===e.tagName)if(n=!0,""===e.textContent){var o=e.querySelectorAll("td");e=o[o.length-1],e=sf.base.isNullOrUndefined(e.childNodes[0])?e:e.childNodes[0]}else{for(var r=e.lastChild;3!==r.nodeType&&"#text"!==r.nodeName&&"BR"!==r.nodeName;)r=r.lastChild;e=r}for(var a=0;a<ae.length;a++)e=e.tagName!==ae[a]||n?e:e.parentNode;if(3===e.nodeType&&"#text"===e.nodeName)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.nodeName){this.replaceWith(e,this.marker(de,this.encode(e.textContent))),i.endContainer.querySelector("."+de).appendChild(e)}else{var l=this.marker(t,"");sf.base.append([this.parseHTMLFragment(l)],e)}}},e.prototype.createTempNode=function(e){var t=e.textContent;if("BR"===e.tagName){var i="<p></p>",n=e.parentNode;X.indexOf(n.tagName.toLocaleLowerCase())>=0&&(e=this.wrap(e,this.parseHTMLFragment(i)))}else if(e.nodeType!==Node.TEXT_NODE&&(e.classList.contains(le)||e.classList.contains(de))||t.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length>0||t.length&&t.indexOf("\n")<0){i="<p></p>";var s=e;e=this.wrap(e,this.parseHTMLFragment(i)),!(s.nodeType===Node.ELEMENT_NODE&&s.firstChild&&"BR"===s.firstChild.nodeName&&(s.classList.contains(le)||s.classList.contains(de)))&&e.nextElementSibling&&"BR"===e.nextElementSibling.tagName&&e.appendChild(e.nextElementSibling)}return e},e.prototype.getImageTagInSelection=function(){var e=this.getSelection();return this.isEditorArea()&&e.rangeCount?e.focusNode.querySelectorAll("img"):null},e.prototype.blockNodes=function(){var e=[],t=this.getSelection();if(this.isEditorArea()&&t.rangeCount)for(var i=this.getRangePoint(),n=0;n<i.length;n++){var s=void 0,o=i[n],r=this.getSelectedNode(o.startContainer,o.startOffset),a=this.getSelectedNode(o.endContainer,o.endOffset);if(this.isBlockNode(r)&&e.indexOf(r)<0&&e.push(r),(s=this.blockParentNode(r))&&e.indexOf(s)<0)if(X.indexOf(s.tagName.toLocaleLowerCase())>=0&&("BR"===r.tagName||r.nodeType===Node.TEXT_NODE||r.classList.contains(le)||r.classList.contains(de))){var l=r.previousSibling&&r.previousSibling.nodeType===Node.TEXT_NODE?r.previousSibling:r;r.nextSibling||r.previousSibling||"BR"!==r.tagName?e.push(this.createTempNode(l)):e.push(l)}else e.push(s);for(var d=[],h=r;h!==a&&h!==this.parent;null)d.indexOf(h)<0&&h.childNodes&&h.childNodes.length?(d.push(h),h=h.childNodes[0]):h&&8!==h.nodeType&&("BR"===h.tagName||h.nodeType===Node.TEXT_NODE&&""!==h.textContent.trim()||h.nodeType!==Node.TEXT_NODE&&(h.classList.contains(le)||h.classList.contains(de)))&&X.indexOf(h.parentNode.tagName.toLocaleLowerCase())>=0?h=this.createTempNode(h):h.nextSibling&&8!==h.nextSibling.nodeType&&("BR"===h.nextSibling.tagName||h.nextSibling.nodeType===Node.TEXT_NODE||h.nextSibling.classList.contains(le)||h.nextSibling.classList.contains(de))&&X.indexOf(h.nextSibling.parentNode.tagName.toLocaleLowerCase())>=0?h=this.createTempNode(h.nextSibling):h.nextSibling?h=h.nextSibling:h.parentNode&&(h=h.parentNode,d.push(h)),e.indexOf(h)<0&&h.nodeType===Node.ELEMENT_NODE&&X.indexOf(h.parentNode.tagName.toLocaleLowerCase())>=0&&(h.classList.contains(le)||h.classList.contains(de))&&e.push(this.createTempNode(h)),this.isBlockNode(h)&&this.ignoreTableTag(h)&&d.indexOf(h)<0&&e.indexOf(h)<0&&(h!==a||o.endOffset>0)&&e.push(h),"IMG"===h.nodeName&&"true"===h.parentElement.contentEditable&&e.push(h);(s=this.blockParentNode(a))&&this.ignoreTableTag(s)&&e.indexOf(s)<0&&!sf.base.isNullOrUndefined(s.previousElementSibling)&&"IMG"!==s.previousElementSibling.tagName&&e.push(s)}for(var c=e.length-1;c>0;c--){if((d=this.nodeFinds(e[c],e)).length){var p=e[c].querySelectorAll("ul, ol");if("LI"===e[c].tagName&&p.length>0)continue;e.splice(c,1)}}return e},e.prototype.ignoreTableTag=function(e){return!(Y.indexOf(e.tagName.toLocaleLowerCase())>=0)},e}(),ce=function(){function e(e){this.parent=e,this.domNode=this.parent.domNode,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("list-type",this.applyListsHandler,this),this.parent.observer.on("keyup-handler",this.onKeyUp,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this),this.parent.observer.on("actionBegin",this.spaceKeyAction,this)},e.prototype.testList=function(e){var t=[/^[\d]+[.]+$/,/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})[.]$/gi,/^[a-zA-Z][.]+$/],i=sf.base.isNullOrUndefined(e)?null:e.innerText.trim().split(".")[0]+".";if(!sf.base.isNullOrUndefined(i))for(var n=0;n<t.length;n++)if(t[n].test(i))return!0;return!1},e.prototype.testCurrentList=function(e){var t=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!sf.base.isNullOrUndefined(e.startContainer.textContent.slice(0,e.startOffset)))for(var i=e.startContainer.textContent.replace(/\u200B/g,"").slice(0,e.startOffset).trim(),n=0;n<t.length;n++)if(t[n].test(i)&&2===i.length)return!0;return!1},e.prototype.spaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument);var i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),n=(this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset),i.previousElementSibling),s=i.nextElementSibling,o=sf.base.isNullOrUndefined(n)?null:n.innerText.trim().substring(0,1),r=sf.base.isNullOrUndefined(s)?null:s.innerText.trim().substring(0,1),a=this.testCurrentList(t),l=this.testList(n),d=this.testList(s);l||d||"*"===o||"*"===r||(a?(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault()):"*"!==t.startContainer.textContent.replace(/\u200B/g,"").slice(0,t.startOffset).trim()&&"-"!==t.startContainer.textContent.replace(/\u200B/g,"").slice(0,t.startOffset).trim()||(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()))},e.prototype.enterList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i="LI"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement.closest("LI"),n="LI"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement.closest("LI");if(!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(n)&&i===n&&"LI"===i.tagName&&""===i.textContent.trim()&&0===i.querySelectorAll("IMG").length){if(i.innerHTML.indexOf("&nbsp;")>=0)return;65279===i.textContent.charCodeAt(0)&&(i.textContent="");var s=i.parentElement;if(sf.base.isNullOrUndefined(s.parentElement.closest("UL"))&&sf.base.isNullOrUndefined(s.parentElement.closest("OL"))){if(!sf.base.isNullOrUndefined(i.nextElementSibling)){var o=this.parent.domNode.blockParentNode(i);this.parent.nodeCutter.GetSpliceNode(t,o)}var r=void 0;"DIV"===e.enterAction?(r=sf.base.createElement("div")).innerHTML="<br>":"P"===e.enterAction?(r=sf.base.createElement("p")).innerHTML="<br>":r=sf.base.createElement("br"),this.parent.domNode.insertAfter(r,s),e.event.preventDefault(),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0),""===s.textContent?sf.base.detach(s):sf.base.detach(i)}}},e.prototype.backspaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),n=this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset);if((i="BR"===i.nodeName?i.parentElement:i)===(n="BR"===n.nodeName?n.parentElement:n)&&!sf.base.isNullOrUndefined(sf.base.closest(i,"li"))&&(""===i.textContent.trim()&&65279===i.textContent.charCodeAt(0)||1===i.textContent.length&&8203===i.textContent.charCodeAt(0))&&(i.textContent=""),i===n&&"LI"===i.tagName&&0===i.textContent.length&&sf.base.isNullOrUndefined(i.previousElementSibling)&&i.removeAttribute("style"),i===n&&""===i.textContent){if("LI"===i.parentElement.tagName&&"LI"===n.parentElement.tagName)sf.base.detach(i);else if(i.closest("ul")||i.closest("ol")){if((s=sf.base.isNullOrUndefined(i.closest("ul"))?i.closest("ol"):i.closest("ul")).firstElementChild===i&&!sf.base.isNullOrUndefined(s.children[1])&&("OL"===s.children[1].tagName||"UL"===s.children[1].tagName))if(s.tagName===s.children[1].tagName){for(;s.children[1].lastChild;)this.parent.domNode.insertAfter(s.children[1].lastChild,s.children[1]);sf.base.detach(s.children[1])}else s.parentElement.insertBefore(s.children[1],s)}}else if(!(sf.base.isNullOrUndefined(i.firstChild)||"BR"!==i.firstChild.nodeName||sf.base.isNullOrUndefined(i.childNodes[1])||"UL"!==i.childNodes[1].nodeName&&"OL"!==i.childNodes[1].nodeName)){var s;if((s=sf.base.isNullOrUndefined(i.closest("ul"))?i.closest("ol"):i.closest("ul")).tagName===i.childNodes[1].nodeName){for(;i.childNodes[1].lastChild;)this.parent.domNode.insertAfter(i.children[1].lastChild,i);sf.base.detach(i.childNodes[1])}else s.parentElement.insertBefore(i.children[1],s)}this.removeList(t,e),this.firstListBackSpace(t,e)},e.prototype.removeList=function(e,t){var i=this.parent.domNode.getSelectedNode(e.startContainer,e.startOffset),n=this.parent.domNode.getSelectedNode(e.endContainer,e.endOffset);i="BR"===i.nodeName?i.parentElement:i,n="BR"===n.nodeName?n.parentElement:n,i="LI"===i.nodeName||sf.base.isNullOrUndefined(i.closest("LI"))?i:i.closest("LI"),n="LI"===n.nodeName||sf.base.isNullOrUndefined(n.closest("LI"))?n:n.closest("LI"),(("OL"===e.commonAncestorContainer.nodeName||"UL"===e.commonAncestorContainer.nodeName||"LI"===e.commonAncestorContainer.nodeName)&&sf.base.isNullOrUndefined(n.nextElementSibling)&&n.textContent.length===e.endOffset&&sf.base.isNullOrUndefined(i.previousElementSibling)&&0===e.startOffset||-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&e.startContainer===e.endContainer&&e.startContainer===this.parent.editableElement&&0===e.startOffset&&1===e.endOffset)&&(-1!==sf.base.Browser.userAgent.indexOf("Firefox")?sf.base.detach(e.commonAncestorContainer.childNodes[0]):"LI"===e.commonAncestorContainer.nodeName?sf.base.detach(e.commonAncestorContainer.parentElement):sf.base.detach(e.commonAncestorContainer),t.event.preventDefault())},e.prototype.onKeyUp=function(){if(!sf.base.isNullOrUndefined(this.commonLIParent)&&!sf.base.isNullOrUndefined(this.commonLIParent.querySelector(".removeList"))){for(var e=this.commonLIParent.querySelector(".removeList");!sf.base.isNullOrUndefined(e.firstChild);)this.parent.domNode.insertAfter(e.firstChild,e);sf.base.detach(e)}},e.prototype.firstListBackSpace=function(e,t){var i=this.parent.domNode.getSelectedNode(e.startContainer,e.startOffset);if(sf.base.isNullOrUndefined(i.closest("OL"))?sf.base.isNullOrUndefined(i.closest("UL"))||(this.commonLIParent=i.closest("UL")):this.commonLIParent=i.closest("OL"),"LI"===i.nodeName&&0===e.startOffset&&0===e.endOffset&&sf.base.isNullOrUndefined(i.previousSibling)&&!sf.base.isNullOrUndefined(this.commonLIParent)&&sf.base.isNullOrUndefined(this.commonLIParent.previousSibling)&&sf.base.isNullOrUndefined(this.commonLIParent.parentElement.closest("OL"))&&sf.base.isNullOrUndefined(this.commonLIParent.parentElement.closest("UL"))&&sf.base.isNullOrUndefined(this.commonLIParent.parentElement.closest("LI"))){var n=sf.base.createElement("P");n.innerHTML="&#8203;",i.classList.add("removeList"),this.commonLIParent.parentElement.insertBefore(n,this.commonLIParent)}},e.prototype.keyDownHandler=function(e){if(13===e.event.which&&this.enterList(e),32===e.event.which&&this.spaceList(e),8===e.event.which&&this.backspaceList(e),46===e.event.which&&"delete"===e.event.action){var t=(r=this.parent.nodeSelection.getRange(this.parent.currentDocument)).commonAncestorContainer,i=r.startContainer,n=r.endContainer,s=3===i.nodeType?i.parentElement:i,o=3===n.nodeType?n.parentElement:n;"UL"!==t.nodeName&&"OL"!==t.nodeName||s===o||sf.base.isNullOrUndefined(sf.base.closest(s,"ul"))&&sf.base.isNullOrUndefined(sf.base.closest(s,"ol"))||sf.base.isNullOrUndefined(sf.base.closest(o,"ul"))&&sf.base.isNullOrUndefined(sf.base.closest(o,"ol"))||t.lastElementChild!==sf.base.closest(o,"li")||r.collapsed||sf.base.detach(t),this.removeList(r,e)}if(9===e.event.which){var r=this.parent.nodeSelection.getRange(this.parent.currentDocument);e.event.action&&"indent"===e.event.action||(this.saveSelection=this.parent.nodeSelection.save(r,this.parent.currentDocument));var a=void 0,l=r.startOffset,d=r.endOffset;if((s=this.parent.domNode.getSelectedNode(r.startContainer,r.startOffset))===(o=this.parent.domNode.getSelectedNode(r.endContainer,r.endOffset))&&("BR"===s.nodeName||"#text"===s.nodeName)&&X.indexOf(s.parentNode.tagName.toLocaleLowerCase())>=0)return;e.event.action&&"indent"===e.event.action||this.domNode.setMarker(this.saveSelection),a=this.domNode.blockNodes();for(var h=[],c=!0,p=0;p<a.length;p++)"LI"===a[p].parentNode.tagName?h.push(a[p].parentNode):"LI"===a[p].tagName&&"P"!==a[p].childNodes[0].tagName&&"OL"!==a[p].childNodes[0].tagName&&"UL"!==a[p].childNodes[0].tagName&&h.push(a[p]);h.length>1||h.length&&(0===l&&0===d||e.ignoreDefault)?(e.event.preventDefault(),e.event.stopPropagation(),this.currentAction=this.getAction(h[0]),e.event.shiftKey?(this.revertList(h,e),this.revertClean()):c=this.nestedList(h),c&&(this.cleanNode(),this.parent.editableElement.focus()),e.event.action&&"indent"===e.event.action||(this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore(),e.callBack&&e.callBack({requestType:this.currentAction,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes(),event:e.event}))):e.event.action&&"indent"===e.event.action||(e.event&&e.event.shiftKey&&"Tab"===e.event.key&&(e.event.action="tab"),this.saveSelection=this.domNode.saveMarker(this.saveSelection,e.event.action),this.saveSelection.restore())}else switch(e.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.spaceKeyAction=function(e){32===e.event.which&&this.spaceList(e)},e.prototype.getAction=function(e){return"OL"===e.parentNode.nodeName?"OL":"UL"},e.prototype.revertClean=function(){for(var e=this.parent.editableElement.querySelectorAll("ul, ol"),t=0;t<e.length;t++){var i=e[t].querySelectorAll("ul, ol");if(i.length>0)for(var n=0;n<i.length;n++){var s=i[n].previousSibling;s&&"LI"===s.tagName&&s.appendChild(i[n])}}},e.prototype.noPreviousElement=function(e){var t,i,n=e.querySelectorAll("ol, ul"),s=e.querySelectorAll("li"),o=this.domNode.contents(s[0])[0];if(s.length>0&&("OL"===o.nodeName||"UL"===o.nodeName)?t=s[0]:i=n[0],t)for(var r=this.domNode.contents(e)[0];r&&!this.domNode.isList(r);null){var a=r.nextSibling;sf.base.prepend([r],t),sf.base.setStyleAttribute(e,{"list-style-type":"none"}),sf.base.setStyleAttribute(t,{"list-style-type":""}),r=a}else if(i){var l=sf.base.createElement("li");sf.base.prepend([l],i);for(r=this.domNode.contents(e)[0];r&&!this.domNode.isList(r);null){a=r.nextSibling;l.appendChild(r),r=a}sf.base.prepend([i],e.parentNode),sf.base.detach(e);var d=sf.base.createElement("li",{styles:"list-style-type: none;"});sf.base.prepend([d],i.parentNode),sf.base.append([i],d)}else{d=sf.base.createElement("li",{styles:"list-style-type: none;"});sf.base.prepend([d],e.parentNode);l=sf.base.createElement(e.parentNode.tagName);sf.base.prepend([l],d),sf.base.append([e],l)}},e.prototype.nestedList=function(e){for(var t=!1,i=0;i<e.length;i++){var n=this.domNode.getPreviousNode(e[i]);if(n){t=!0;var s=void 0,o=void 0,r=e[i].querySelectorAll("ol, ul"),a=e[i].querySelectorAll("li"),l=this.domNode.contents(a[0])[0];if(a.length>0&&("OL"===l.nodeName||"UL"===l.nodeName)?o=a[0]:s=r[0],s){var d=sf.base.createElement("li");sf.base.prepend([d],s);for(var h=this.domNode.contents(e[i])[0];h&&!this.domNode.isList(h);null){var c=h.nextSibling;d.appendChild(h),h=c}sf.base.append([s],n),sf.base.detach(e[i])}else if(o){if("LI"===n.tagName){for(h=this.domNode.contents(e[i])[0];h&&!this.domNode.isList(h);null){c=h.nextSibling;sf.base.prepend([h],o),sf.base.setStyleAttribute(e[i],{"list-style-type":"none"}),sf.base.setStyleAttribute(o,{"list-style-type":""}),h=c}sf.base.append([o.parentNode],n),sf.base.detach(e[i])}}else if("LI"===n.tagName){d=sf.base.createElement(e[i].parentNode.tagName);sf.base.append([d],n),sf.base.append([e[i]],d)}else"OL"!==n.tagName&&"UL"!==n.tagName||sf.base.append([e[i]],n)}else{var p=e[i];t=!0,this.noPreviousElement(p)}}return t},e.prototype.applyListsHandler=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);if(-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&t.startContainer===t.endContainer&&t.startContainer===this.parent.editableElement){for(var i=t.startContainer.childNodes[t.startOffset>0?t.startOffset-1:t.startOffset]||t.startContainer,n=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer,s="BR"===n.lastChild.nodeName?sf.base.isNullOrUndefined(n.lastChild.previousSibling)?n:n.lastChild.previousSibling:n.lastChild;!sf.base.isNullOrUndefined(s)&&"#text"!==s.nodeName&&"IMG"!==s.nodeName&&"BR"!==s.nodeName&&"HR"!==s.nodeName;)s=s.lastChild;this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,i,s,0,s.textContent.length),t=this.parent.nodeSelection.getRange(this.parent.currentDocument)}if(t.startContainer===t.endContainer&&t.startContainer===this.parent.editableElement&&t.startOffset===t.endOffset&&0===t.startOffset&&0===this.parent.editableElement.textContent.length&&"TABLE"!==this.parent.editableElement.childNodes[0].nodeName&&"IMG"!==this.parent.editableElement.childNodes[0].nodeName){var o=t.startContainer.childNodes[0];this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,o,o,0,0),t=this.parent.nodeSelection.getRange(this.parent.currentDocument)}this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument),this.currentAction=e.subCommand,this.currentAction=e.subCommand="NumberFormatList"===this.currentAction?"OL":"BulletFormatList"===this.currentAction?"UL":this.currentAction,this.domNode.setMarker(this.saveSelection);var r=this.domNode.blockNodes();if("BR"===e.enterAction){this.setSelectionBRConfig();var a=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),l=this.parent.nodeSelection.getSelectionNodes(a),d=[];0===l.length&&l.push(r[0]);for(var h=0;h<l.length;h++){for(var c=l[h],p=void 0;!this.parent.domNode.isBlockNode(c)&&c!==this.parent.editableElement;)p=c,c=c.parentElement;this.parent.domNode.isBlockNode(c)&&c===this.parent.editableElement&&d.push(p)}for(h=0;h<d.length;h++)if(!this.parent.domNode.isBlockNode(d[h])){for(var u=c=d[h];c===this.parent.editableElement;)u=c,c=c.parentElement;var f=void 0;this.parent.domNode.isBlockNode(u.parentElement)&&u.parentElement===this.parent.editableElement?(f=sf.base.createElement("p"),u.parentElement.insertBefore(f,u),f.appendChild(u)):f=u;for(var m=f.previousSibling;!sf.base.isNullOrUndefined(m)&&"BR"!==m.nodeName&&!this.parent.domNode.isBlockNode(m);)f.firstChild.parentElement.insertBefore(m,f.firstChild),m=f.previousSibling;sf.base.isNullOrUndefined(m)||"BR"!==m.nodeName||sf.base.detach(m);for(var g=f.nextSibling;!sf.base.isNullOrUndefined(g)&&"BR"!==g.nodeName&&!this.parent.domNode.isBlockNode(g);)f.appendChild(g),g=f.nextSibling;sf.base.isNullOrUndefined(g)||"BR"!==g.nodeName||sf.base.detach(g)}this.setSelectionBRConfig(),r=this.parent.domNode.blockNodes()}for(h=0;h<r.length;h++)"TABLE"!==r[h].tagName||t.collapsed||r.splice(h,1),r.length>0&&"LI"!==r[h].tagName&&"LI"===r[h].parentNode.tagName&&(r[h]=r[h].parentNode);this.applyLists(r,this.currentAction,e.selector,e.item,e),e.callBack&&e.callBack({requestType:this.currentAction,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.setSelectionBRConfig=function(){var e=this.parent.editableElement.querySelector("."+le),t=this.parent.editableElement.querySelector("."+de);sf.base.isNullOrUndefined(t)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,e,t,0,0)},e.prototype.applyLists=function(e,t,i,n,s){if(this.isRevert(e,t,n)&&sf.base.isNullOrUndefined(n))this.revertList(e,s),this.removeEmptyListElements();else{this.checkLists(e,t,n);for(var o=0;o<e.length;o++)if(sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.listStyle)||("listImage"===n.listStyle?sf.base.setStyleAttribute(e[o],{"list-style-image":n.listImage}):(sf.base.setStyleAttribute(e[o],{"list-style-image":"none"}),sf.base.setStyleAttribute(e[o],{"list-style-type":n.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),"true"===e[o].getAttribute("contenteditable")&&1===e[o].childNodes.length&&"TABLE"===e[o].childNodes[0].nodeName){var r=document.createElement(t);r.innerHTML="<li><br/></li>",e[o].appendChild(r)}else if("LI"!==e[o].tagName&&sf.base.isNullOrUndefined(n)){var a="<"+t+">",l="</"+t+">",d="li"+("IMG"===e[o].tagName?"":this.domNode.attributes(e[o])),h="p"===e[o].tagName.toLowerCase()?e[o].innerHTML:e[o].outerHTML,c=a+this.domNode.createTagString(d,null,h)+l;this.domNode.replaceWith(e[o],c)}else if(!sf.base.isNullOrUndefined(n)&&"LI"!==e[o].tagName){a="<"+t+("IMG"===e[o].tagName?"":this.domNode.attributes(e[o]))+">",l="</"+t+">",d="li",h="p"===e[o].tagName.toLowerCase()?e[o].innerHTML:e[o].outerHTML,c=a+this.domNode.createTagString(d,null,h)+l;this.domNode.replaceWith(e[o],c)}}this.cleanNode(),this.parent.editableElement.focus(),u()&&f(this.parent.editableElement,i),this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore()},e.prototype.removeEmptyListElements=function(){for(var e=this.parent.editableElement.querySelectorAll("ol, ul"),t=0;t<e.length;t++)""===e[t].textContent.trim()&&sf.base.detach(e[t])},e.prototype.isRevert=function(e,t,i){for(var n=!0,s=0;s<e.length;s++){if("LI"!==e[s].tagName)return!1;(e[s].parentNode.tagName!==t||sf.base.isNullOrUndefined(i)&&""!==e[s].parentNode.style.listStyleType)&&(n=!1)}return n},e.prototype.checkLists=function(e,t,i){for(var n=[],s=0;s<e.length;s++){var o=e[s].parentNode;sf.base.isNullOrUndefined(i)||"LI"!==e[s].tagName||sf.base.isNullOrUndefined(i.listStyle)||("listImage"===i.listStyle?sf.base.setStyleAttribute(o,{"list-style-image":i.listImage}):(sf.base.setStyleAttribute(o,{"list-style-image":"none"}),sf.base.setStyleAttribute(o,{"list-style-type":i.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),("LI"===e[s].tagName&&o.tagName!==t&&n.indexOf(o)<0||"LI"===e[s].tagName&&o.tagName===t&&n.indexOf(o)<0&&null!==i)&&n.push(o),sf.base.isNullOrUndefined(i)&&(o.tagName===t||("UL"===o.tagName||"OL"===o.tagName)&&o.hasAttribute("style"))&&o.hasAttribute("style")&&o.removeAttribute("style")}for(var r=n.length-1;r>=0;r--){var a=n[r],l="<"+t.toLowerCase()+" "+this.domNode.attributes(a)+">"+a.innerHTML+"</"+t.toLowerCase()+">";this.domNode.replaceWith(n[r],l)}},e.prototype.cleanNode=function(){for(var e=this.parent.editableElement.querySelectorAll("ol + ol, ul + ul"),t=0;t<e.length;t++){var i=e[t];if(this.domNode.isList(i.previousElementSibling)&&this.domNode.openTagString(i)===this.domNode.openTagString(i.previousElementSibling)){for(var n=this.domNode.contents(i),s=0;s<n.length;s++)i.previousElementSibling.appendChild(n[s]);i.parentNode.removeChild(i)}}},e.prototype.findUnSelected=function(e,t){if((e=e.slice().reverse()).length>0){var i=[],n=[],s=[],o=[];s=t[t.length-1].childNodes;for(var r=0;r<s.length;r++)if("OL"===s[r].tagName||"UL"===s[r].tagName){var a=s[r].querySelectorAll("li");if(a.length>0)for(var l=0;l<a.length;l++)o.push(a[l])}for(var d=0;d<o.length;d++){for(var h=0,c=0;c<e.length;c++)o[d].contains(e[c])||(h+=1);h===e.length&&n.push(o[d])}if(n.length>0)for(var p=0;p<n.length;p++)"OL"!==this.domNode.contents(n[p])[0].nodeName&&"UL"!==this.domNode.contents(n[p])[0].nodeName&&i.push(n[p]);i.length>0&&this.nestedList(i)}},e.prototype.revertList=function(e,t){for(var i=[],n=e.length-1;n>=0;n--)for(var s=n-1;s>=0;s--)if(e[s].contains(e[n])||e[s]===e[n]){i.push(e[n]),e.splice(n,1);break}this.findUnSelected(i,e);var o=[];for(n=0;n<e.length;n++){var r=e[n];3===this.domNode.contents(r)[0].nodeType&&0===this.domNode.contents(r)[0].textContent.trim().length&&sf.base.detach(this.domNode.contents(r)[0]);var a=e[n].parentNode,l=r.getAttribute("class");if(0===i.length){var d=e[n].querySelectorAll("ul, ol")[0];if(d)if(d.querySelectorAll("li")){var h=sf.base.createElement(d.tagName);sf.base.append([h],d.parentNode);var c=sf.base.createElement("li",{styles:"list-style-type: none;"});sf.base.append([c],h),sf.base.append([d],c)}}if(r.parentNode.insertBefore(this.closeTag(a.tagName),r),"LI"===a.parentNode.tagName||"OL"===a.parentNode.tagName||"UL"===a.parentNode.tagName)r.parentNode.insertBefore(this.closeTag("LI"),r);else{if(0===r.querySelectorAll(W.join(", ")).length){var p="<p"+(sf.base.isNullOrUndefined(l)?' class="e-rte-wrap-inner"':' class="'+l+' e-rte-wrap-inner"')+this.domNode.attributes(a)+"></p>";"BR"!==t.enterAction&&this.domNode.wrapInner(r,this.domNode.parseHTMLFragment(p))}else if(3===this.domNode.contents(r)[0].nodeType){var u=this.domNode.createTagString("p",a,this.parent.domNode.encode(this.domNode.contents(r)[0].textContent));this.domNode.replaceWith(this.domNode.contents(r)[0],u)}else if(this.domNode.contents(r)[0].classList.contains(le)||this.domNode.contents(r)[0].classList.contains(de)){u=this.domNode.createTagString("p",a,this.domNode.contents(r)[0].outerHTML);this.domNode.replaceWith(this.domNode.contents(r)[0],u)}else{var f=r.firstChild;l=f.getAttribute("class"),sf.base.attributes(f,this.domNode.rawAttributes(a)),l&&f.getAttribute("class")&&sf.base.attributes(f,{class:l+" "+f.getAttribute("class")})}sf.base.append([this.openTag("LI")],r),sf.base.prepend([this.closeTag("LI")],r)}this.domNode.insertAfter(this.openTag(a.tagName),r),"LI"===a.parentNode.tagName&&(a=a.parentNode.parentNode),o.indexOf(a)<0&&o.push(a)}for(n=0;n<o.length;n++){var m=o[n],g=m.innerHTML;g=(g=g.replace(/<span class="e-rte-list-close-([a-z]*)"><\/span>/g,"</$1>")).replace(/<span class="e-rte-list-open-([a-z]*)"><\/span>/g,"<$1 "+this.domNode.attributes(m)+">"),this.domNode.replaceWith(m,this.domNode.openTagString(m)+g.trim()+this.domNode.closeTagString(m))}var v=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty");for(n=0;n<v.length;n++)sf.base.detach(v[n]);var b=this.parent.editableElement.querySelectorAll("li:empty");for(n=0;n<b.length;n++)sf.base.detach(b[n])},e.prototype.openTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-open-'+e.toLowerCase()+'"></span>')},e.prototype.closeTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-close-'+e.toLowerCase()+'"></span>')},e}(),pe=function(){function e(){}return e.WrapBefore=function(e,t,i){return t.innerText=e.textContent,i?this.AppendBefore(t,e,!0):this.AppendBefore(t,e),e.parentNode&&e.parentNode.removeChild(e),t.childNodes[0]},e.Wrap=function(e,t){return this.AppendBefore(t,e),t.appendChild(e),e},e.unwrap=function(e){for(var t=e.parentNode,i=[];e.firstChild;null)i.push(t.insertBefore(e.firstChild,e));return t.removeChild(e),i},e.AppendBefore=function(e,t,i){return t.parentNode?i?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.insertBefore(e,t):t},e}(),ue=function(){function e(){this.enterAction="P",this.position=-1,this.nodeSelection=new G}return e.prototype.GetSpliceNode=function(e,t){return t=this.SplitNode(e,t,!0),t=this.SplitNode(e,t,!1)},e.prototype.SplitNode=function(e,t,i){if(t){var n=e.cloneRange(),s=t.parentNode,o=this.nodeSelection.getIndex(t);n.collapse(i),i?n.setStartBefore(t):n.setEndAfter(t);var r,a=n.extractContents();if(i){if(t=s.childNodes[o],(a=this.spliceEmptyNode(a,!1))&&a.childNodes.length>0)if(!!(1!==a.childNodes.length||"IMG"===a.childNodes[0].nodeName||!this.isRteElm(a)||""!==a.textContent))if(t)pe.AppendBefore(a,t);else s.appendChild(a),(r=document.createElement("div")).innerHTML="&#65279;&#65279;",t=r.firstChild,s.appendChild(t)}else if(t=s.childNodes.length>1?s.childNodes[o]:s.childNodes[0],(a=this.spliceEmptyNode(a,!0))&&a.childNodes.length>0)if(!!(1!==a.childNodes.length||"IMG"===a.childNodes[0].nodeName||!this.isRteElm(a)||""!==a.textContent))if(t)pe.AppendBefore(a,t,!0);else s.appendChild(a),(r=document.createElement("div")).innerHTML="&#65279;&#65279;",s.insertBefore(r.firstChild,s.firstChild),t=s.firstChild;return t}return null},e.prototype.isRteElm=function(e){var t=!0;if(1===e.childNodes.length&&"IMG"!==e.childNodes[0].nodeName)for(var i=e.childNodes[0],n=0;!sf.base.isNullOrUndefined(i.childNodes)&&n<i.childNodes.length;n++)("IMG"===i.childNodes[n].nodeName||"SPAN"===i.childNodes[n].nodeName&&(i.childNodes[n].classList.contains("e-video-wrap")||i.childNodes[n].classList.contains("e-audio-wrap")))&&(t=!1);else t=!0;return t},e.prototype.spliceEmptyNode=function(e,t){var i;return(i=1===e.childNodes.length&&"#text"===e.childNodes[0].nodeName&&""===e.childNodes[0].textContent||""===e.textContent?-1:e.childNodes.length-1)>-1&&!t?this.spliceEmptyNode(e.childNodes[i],t):i>-1?this.spliceEmptyNode(e.childNodes[0],t):3===e.nodeType||11===e.nodeType||"IMG"===e.nodeName||e.classList.contains("e-video-wrap")||e.classList.contains("e-audio-wrap")||e.parentNode.removeChild(e),e},e.prototype.GetCursorStart=function(e,t,i){for(var n=(e=i?e:e.reverse())[0],s=0;s<e.length&&(i?e[s]<t:e[s]>=t);s++)n=e[s];return n},e.prototype.GetCursorRange=function(e,t,i){var n=e.createRange(),s=[];s.push(0);for(var o=this.TrimLineBreak(i.data),r=o.indexOf(" ",0);-1!==r;)s.indexOf(r)<0&&s.push(r),new RegExp("\\s").test(o[r-1])&&s.indexOf(r-1)<0&&s.push(r-1),new RegExp("\\s").test(o[r+1])&&s.push(r+1),r=o.indexOf(" ",r+1);if(s.push(o.length),s.indexOf(t.startOffset)>=0||s.indexOf(t.startOffset-1)>=0&&(1!==t.startOffset||1===t.startOffset&&new RegExp("\\s").test(o[0]))||s[s.length-1]-1===t.startOffset)n=t,this.position=1;else{var a=this.GetCursorStart(s,t.startOffset,!0);this.position=t.startOffset-a,n.setStart(t.startContainer,a),n.setEnd(t.startContainer,this.GetCursorStart(s,t.startOffset,!1))}return n},e.prototype.GetCursorNode=function(e,t,i){return this.GetSpliceNode(this.GetCursorRange(e,t,i),i)},e.prototype.TrimLineBreak=function(e){return e.replace(/(\r\n\t|\n|\r\t)/gm," ")},e}(),fe=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("format-type",this.applyFormats,this),this.parent.observer.on("keyup-handler",this.onKeyUp,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.getParentNode=function(e){for(;e.parentNode&&e.parentNode!==this.parent.editableElement;null)e=e.parentNode;return e},e.prototype.onKeyUp=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=t.endContainer,n=i.lastChild;if(13===e.event.which&&t.startContainer===i&&3!==i.nodeType){var s=sf.base.createElement("p");if(s.innerHTML="<br>",!sf.base.isNullOrUndefined(n)&&n&&"BR"===n.nodeName&&n.previousSibling&&"TABLE"===n.previousSibling.nodeName)i.replaceChild(s,n),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0);else{var o=this.parent.nodeSelection.getSelectionNodeCollectionBr(t)[0];!sf.base.isNullOrUndefined(o)&&"BR"===o.nodeName&&o.previousSibling&&"TABLE"===o.previousSibling.nodeName&&(i.replaceChild(s,o),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0))}}},e.prototype.onKeyDown=function(e){if(13===e.event.which){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=0===t.startContainer.textContent.length||"PRE"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement,n=0===t.endContainer.textContent.length||"PRE"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement,s=sf.base.closest(i,"pre"),o=sf.base.closest(n,"pre");if(!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(s.parentElement)&&"LI"===s.parentElement.tagName)return;if((sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(o)||!sf.base.isNullOrUndefined(s)&&sf.base.isNullOrUndefined(o))&&(e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t),t=this.parent.nodeSelection.getRange(this.parent.currentDocument),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0)),13===e.event.which&&!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(o)){e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t);var r=(t=this.parent.nodeSelection.getRange(this.parent.currentDocument)).startContainer.childNodes[t.endOffset],a=t.startContainer.childNodes[t.endOffset-1],l=t.startContainer;if(sf.base.isNullOrUndefined(r)||sf.base.isNullOrUndefined(a)||!sf.base.isNullOrUndefined(r.nextSibling)||"BR"!==r.nodeName||"BR"!==a.nodeName)if(8203===l.textContent.charCodeAt(0)&&1===l.textContent.length||0===l.textContent.length){for(;"PRE"!==l.parentElement.nodeName&&(1===l.textContent.length||0===l.textContent.length);)l=l.parentElement;!sf.base.isNullOrUndefined(l.previousSibling)&&"BR"===l.previousSibling.nodeName&&sf.base.isNullOrUndefined(l.nextSibling)?this.paraFocus(l.parentElement):this.isNotEndCursor(s,t)}else this.isNotEndCursor(s,t);else this.paraFocus(t.startContainer,e.enterAction)}}},e.prototype.removeCodeContent=function(e){var t=new RegExp(String.fromCharCode(65279),"g");if(!sf.base.isNullOrUndefined(e.endContainer.textContent.match(t))){var i=65279===e.endContainer.textContent.charCodeAt(e.endOffset-1)?e.endOffset-2:e.endOffset;e.endContainer.textContent=e.endContainer.textContent.replace(t,""),""===e.endContainer.textContent?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer.parentElement,0):this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer,i)}},e.prototype.deleteContent=function(e){e.startContainer===e.endContainer&&e.startOffset===e.endOffset||e.deleteContents()},e.prototype.paraFocus=function(e,t){var i;"DIV"===t?(i=sf.base.createElement("div")).innerHTML="<br>":"BR"===t?i=sf.base.createElement("br"):(i=sf.base.createElement("p")).innerHTML="<br>",this.parent.domNode.insertAfter(i,e),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0),sf.base.detach(e.lastChild)},e.prototype.isNotEndCursor=function(e,t){var i=new ue,n=t.startOffset===e.lastChild.textContent.length&&e.lastChild.textContent===t.startContainer.textContent;if(0===e.textContent.indexOf(t.startContainer.textContent)&&(0===t.startOffset&&0===t.endOffset||"PRE"===t.startContainer.nodeName)){this.insertMarker(e,t);var s=sf.base.createElement("br");e.childNodes[t.endOffset].parentElement.insertBefore(s,e.childNodes[t.endOffset])}else{var o=i.SplitNode(t,e,!0);this.insertMarker(e,t);var r=e.previousElementSibling;"PRE"===r.tagName&&(r.insertAdjacentHTML("beforeend","<br>"+o.innerHTML),sf.base.detach(e))}this.setCursorPosition(n,e)},e.prototype.setCursorPosition=function(e,t){var i=!1,n=this.parent.editableElement.querySelector(".tempSpan"),s=n.parentElement;if(""===n.parentNode.textContent?i=!0:this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),e)if(i)s===t?(this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),sf.base.detach(n)):this.focusSelectionParent(n,s);else{var o=sf.base.createElement("br");this.parent.domNode.insertAfter(o,n),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),sf.base.detach(n)}else i?this.focusSelectionParent(n,s):sf.base.detach(n)},e.prototype.focusSelectionParent=function(e,t){sf.base.detach(e),t.innerHTML="​",this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0)},e.prototype.insertMarker=function(e,t){var i=sf.base.createElement("span",{className:"tempSpan"});"PRE"===t.startContainer.nodeName?e.childNodes[t.endOffset].parentElement.insertBefore(i,e.childNodes[t.endOffset]):t.startContainer.parentElement.insertBefore(i,t.startContainer)},e.prototype.applyFormats=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=!1;this.parent.editableElement!==t.endContainer||sf.base.isNullOrUndefined(this.parent.editableElement.children[t.endOffset-1])||"TABLE"!==this.parent.editableElement.children[t.endOffset-1].tagName||t.collapsed||(i=!0);var n=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(n);var s=this.parent.domNode.blockNodes();if("BR"===e.enterAction){this.setSelectionBRConfig();var o=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),r=this.parent.nodeSelection.getSelectionNodes(o),a=[];0===r.length&&r.push(s[0]);for(var l=0;l<r.length;l++){for(var d=r[l],h=void 0;!this.parent.domNode.isBlockNode(d)&&d!==this.parent.editableElement;)h=d,d=d.parentElement;this.parent.domNode.isBlockNode(d)&&d===this.parent.editableElement&&a.push(h)}for(l=0;l<a.length;l++)if(!this.parent.domNode.isBlockNode(a[l])){for(var c=d=a[l];d===this.parent.editableElement;)c=d,d=d.parentElement;var p=void 0;this.parent.domNode.isBlockNode(c.parentElement)&&c.parentElement===this.parent.editableElement?(p=sf.base.createElement("div"),c.parentElement.insertBefore(p,c),p.appendChild(c)):p=c;for(var m=p.previousSibling;!sf.base.isNullOrUndefined(m)&&"BR"!==m.nodeName&&!this.parent.domNode.isBlockNode(m);)p.firstChild.parentElement.insertBefore(m,p.firstChild),m=p.previousSibling;sf.base.isNullOrUndefined(m)||"BR"!==m.nodeName||sf.base.detach(m);for(var g=p.nextSibling;!sf.base.isNullOrUndefined(g)&&"BR"!==g.nodeName&&!this.parent.domNode.isBlockNode(g);)p.appendChild(g),g=p.nextSibling;sf.base.isNullOrUndefined(g)||"BR"!==g.nodeName||sf.base.detach(g)}this.setSelectionBRConfig(),s=this.parent.domNode.blockNodes()}for(l=0;l<s.length;l++){var v=void 0,b=void 0;if("blockquote"===e.subCommand.toLowerCase()?(v=this.getParentNode(s[l]),b=this.parent.domNode.isList(v)||"TABLE"===v.tagName?v.outerHTML:v.innerHTML):b=(v=s[l]).innerHTML,!(e.subCommand.toLowerCase()===v.tagName.toLowerCase()&&("pre"!==e.subCommand.toLowerCase()||!sf.base.isNullOrUndefined(e.exeValue)&&"dropDownSelect"===e.exeValue.name)||sf.base.isNullOrUndefined(v.parentNode)||"TABLE"===v.tagName&&"pre"===e.subCommand.toLowerCase())){this.cleanFormats(v,e.subCommand);var y="pre"===e.subCommand.toLowerCase()&&"pre"===v.tagName.toLowerCase()?"p":e.subCommand,w=this.parent.domNode.createTagString(y,v,b.replace(/>\s+</g,"><"));"LI"===v.tagName?(v.innerHTML="",v.insertAdjacentHTML("beforeend",w)):this.parent.domNode.replaceWith(v,w)}}this.preFormatMerge();var C=this.parent.editableElement.querySelector("."+le),S=this.parent.editableElement.querySelector("."+de);sf.base.isNullOrUndefined(C)||sf.base.isNullOrUndefined(S)||(C=C.lastChild,S=S.lastChild),n=this.parent.domNode.saveMarker(n,null),u()&&f(this.parent.editableElement,e.selector),i?this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,C,S,0,S.textContent.length):n.restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.setSelectionBRConfig=function(){var e=this.parent.editableElement.querySelector("."+le),t=this.parent.editableElement.querySelector("."+de);sf.base.isNullOrUndefined(t)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,e,t,0,0)},e.prototype.preFormatMerge=function(){var e=this.parent.editableElement.querySelectorAll("PRE");if(!sf.base.isNullOrUndefined(e))for(var t=0;t<e.length;t++){var i=e[t].previousElementSibling;sf.base.isNullOrUndefined(i)||"PRE"!==i.tagName||(i.insertAdjacentHTML("beforeend","<br>"+e[t].innerHTML),sf.base.detach(e[t]))}},e.prototype.cleanFormats=function(e,t){var i=["display","font-size","margin-top","margin-bottom","margin-left","margin-right","font-weight"];t=t.toLowerCase();for(var n=0;n<i.length&&"p"!==t&&"blockquote"!==t&&"pre"!==t;n++)e.style.removeProperty(i[n])},e}(),me=function(){function e(){}return e.Insert=function(e,t,i,n){var s,o;"string"==typeof t?((o=document.createElement("div")).innerHTML=t,s=n?o:o.firstChild):n&&(sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.classList)||!t.classList.contains("pasteContent"))?((o=document.createElement("div")).appendChild(t),s=o):s=t;var r=new G,a=new ue,l=r.getRange(e);if(l.startContainer===i&&l.startContainer===l.endContainer&&0===l.startOffset&&l.startOffset===l.endOffset&&0===i.textContent.length&&"P"===i.children[0].tagName&&(r.setSelectionText(e,l.startContainer.children[0],l.startContainer.children[0],0,0),l=r.getRange(e)),"BR"===l.startContainer.nodeName&&0===l.startOffset&&l.startOffset===l.endOffset&&l.startContainer===l.endContainer){var d=Array.prototype.slice.call(l.startContainer.parentElement.children).indexOf(l.startContainer);r.setSelectionText(e,l.startContainer.parentElement,l.startContainer.parentElement,d+1,d+1),l=r.getRange(e)}var h=l.startOffset===l.endOffset&&0===l.startOffset&&l.startContainer===l.endContainer,c=l.collapsed,p=this.getNodeCollection(l,r,s),u="table"===s.nodeName.toLowerCase()?this.closestEle(p[0].parentNode,i):p[0];if(n||!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(s.classList)&&s.classList.contains("pasteContent"))this.pasteInsertHTML(p,s,l,r,a,e,c,u,i);else if(i!==l.startContainer&&(!c&&(u.nodeType!==Node.ELEMENT_NODE||-1===Y.indexOf(u.tagName.toLocaleLowerCase()))||"table"===s.nodeName.toLowerCase()&&u&&-1===Y.indexOf(u.tagName.toLocaleLowerCase()))){var f=a.GetSpliceNode(l,u),m=f.previousSibling,g=f.parentNode;if(1===p.length||"table"===s.nodeName.toLowerCase()&&0===f.childElementCount)r.setSelectionContents(e,f),l=r.getRange(e);else{var v=a.GetSpliceNode(l,p[p.length-1].parentElement);v=sf.base.isNullOrUndefined(v)?f:v,r.setSelectionText(e,f,v,0,3===v.nodeType?v.textContent.length:v.childNodes.length),l=r.getRange(e)}l.extractContents(),"TABLE"===t.tagName&&this.removeEmptyElements(i);for(var b=0;b<p.length;b++)if(3!==p[b].nodeType&&null!=p[b].parentNode){if("IMG"===p[b].nodeName)continue;p[b].parentNode.removeChild(p[b])}if(m)pe.AppendBefore(s,m,!0);else{for(var y=null;g!==i&&g.firstChild&&""===g.textContent.trim();){y=g,g=g.parentNode}null!==y&&(g=y),g.firstChild&&(g!==i||"TABLE"===s.nodeName&&h&&g===l.startContainer&&g===l.endContainer)?""===g.textContent.trim()&&g!==i?(pe.AppendBefore(s,g,!1),sf.base.detach(g)):pe.AppendBefore(s,g.firstChild,!1):g.appendChild(s)}"IMG"===s.nodeName?this.imageFocus(s,r,e):3!==s.nodeType?r.setSelectionText(e,s,s,0,s.childNodes.length):r.setSelectionText(e,s,s,0,s.textContent.length)}else{if(l.deleteContents(),h&&""===l.startContainer.textContent&&"BR"!==l.startContainer.nodeName&&(l.startContainer.innerHTML=""),sf.base.Browser.isIE){var w=e.createDocumentFragment();w.appendChild(s),l.insertNode(w)}else if(1===l.startContainer.nodeType&&"hr"===l.startContainer.nodeName.toLowerCase()&&"hr"===l.endContainer.nodeName.toLowerCase()){var C=l.startContainer.nextElementSibling;C&&(C.querySelector("br")&&sf.base.detach(C.querySelector("br")),C.appendChild(s))}else"BR"===l.startContainer.nodeName?l.startContainer.parentElement.insertBefore(s,l.startContainer):l.insertNode(s);3!==s.nodeType&&s.childNodes.length>0?r.setSelectionText(e,s,s,1,1):"IMG"===s.nodeName?this.imageFocus(s,r,e):3!==s.nodeType?r.setSelectionContents(e,s):r.setSelectionText(e,s,s,s.textContent.length,s.textContent.length)}},e.pasteInsertHTML=function(e,t,i,n,s,o,r,a,l){var d,h,c,p,u=i.startOffset===i.endOffset&&i.startContainer===i.endContainer;if(u&&i.startContainer===l&&""===l.textContent){var f=this.getImmediateBlockNode(e[e.length-1],l);n.setSelectionText(o,f,f,0,0),i=n.getRange(o)}l!==i.startContainer&&(!r&&(a.nodeType!==Node.ELEMENT_NODE||-1===Y.indexOf(a.tagName.toLocaleLowerCase()))||"table"===t.nodeName.toLowerCase()&&a&&-1===Y.indexOf(a.tagName.toLocaleLowerCase()))&&(p=s.GetSpliceNode(i,a),h=sf.base.isNullOrUndefined(p.previousSibling)?p.parentNode.previousSibling:p.previousSibling,1===e.length?(n.setSelectionContents(o,p),i=n.getRange(o),c=!0):(d=s.GetSpliceNode(i,e[e.length-1].parentElement),d=sf.base.isNullOrUndefined(d)?p:d,n.setSelectionText(o,p,d,0,3===d.nodeType?d.textContent.length:d.childNodes.length),i=n.getRange(o),c=!1));var m=!1;this.removingComments(t);for(var g,v=t.childNodes,b=0;b<v.length;b++)if(W.indexOf(v[b].nodeName.toLocaleLowerCase())>=0){m=!0;break}var y=document.createDocumentFragment();if(m){this.insertTempNode(i,t,e,s,l);var w=!0,C=void 0,S=void 0,E=void 0;for(this.contentsDeleted||i.deleteContents();t.firstChild;)if("#text"!==t.firstChild.nodeName||""!==t.firstChild.textContent.trim())if("#text"===t.firstChild.nodeName&&w||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0&&w){if(g=t.firstChild,sf.base.isNullOrUndefined(t.previousElementSibling)){var x=sf.base.createElement("p");t.parentElement.insertBefore(x,t)}t.previousElementSibling.appendChild(t.firstChild)}else g=t.firstChild,"#text"===t.firstChild.nodeName||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(C?(E.appendChild(t.firstChild),y.appendChild(E)):((S=sf.base.createElement("p")).appendChild(t.firstChild),y.appendChild(S)),E=S,C=!0):(y.appendChild(t.firstChild),C=!1),w=!1;else sf.base.detach(t.firstChild);t.parentNode.replaceChild(y,t)}else if(u){var O=sf.base.createElement("span",{className:"tempSpan"}),T=sf.base.closest(i.startContainer.parentElement,"a");if(3===i.startContainer.nodeType&&T&&sf.base.closest(T,"span")){var A=this.getImmediateBlockNode(i.startContainer,l);A.querySelectorAll("br").length>0&&sf.base.detach(A.querySelector("br")),sf.base.closest(T,"span").appendChild(O)}else i.insertNode(O);for(;t.firstChild;)g=t.firstChild,y.appendChild(t.firstChild);O.parentNode.replaceChild(y,O)}else{for(;t.firstChild;)g=t.firstChild,y.appendChild(t.firstChild);c?p.parentNode.replaceChild(y,p):(i.deleteContents(),sf.base.detach(d),sf.base.isNullOrUndefined(h)?l.appendChild(y):h.parentNode.appendChild(y))}"#text"===g.nodeName?this.placeCursorEnd(g,t,n,o,l):this.cursorPos(g,t,n,o,l)},e.placeCursorEnd=function(e,t,i,n,s){for(e="BR"===e.nodeName?sf.base.isNullOrUndefined(e.previousSibling)?e.parentNode:e.previousSibling:e;!sf.base.isNullOrUndefined(e)&&"#text"!==e.nodeName&&"IMG"!==e.nodeName&&"BR"!==e.nodeName&&"HR"!==e.nodeName;)e=e.lastChild;"IMG"===(e=sf.base.isNullOrUndefined(e)?t:e).nodeName?this.imageFocus(e,i,n):i.setSelectionText(n,e,e,e.textContent.length,e.textContent.length),this.removeEmptyElements(s)},e.getNodeCollection=function(e,t,i){var n=[];return e.startOffset===e.endOffset&&e.startContainer===e.endContainer&&"BR"!==e.startContainer.nodeName&&e.startContainer.childNodes.length>0&&("TD"===e.startContainer.nodeName||3!==e.startContainer.nodeType&&i.classList&&i.classList.contains("pasteContent"))?n.push(e.startContainer.childNodes[e.endOffset]):n=t.getInsertNodeCollection(e),n},e.insertTempNode=function(e,t,i,n,s){if(e.startContainer!==s||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.endOffset-1])||"TABLE"!==e.startContainer.childNodes[e.endOffset-1].nodeName)if(e.startContainer!==s||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.endOffset])||"TABLE"!==e.startContainer.childNodes[e.endOffset].nodeName)if(e.startContainer===e.endContainer&&3!==e.startContainer.nodeType&&"HR"===t.firstChild.nodeName)e.startContainer.classList.contains("e-content")||"BODY"===e.startContainer.nodeName?e.startContainer.appendChild(t):e.startContainer.parentNode.insertBefore(t,e.startContainer);else{var o=this.getImmediateBlockNode(i[i.length-1],s);if((sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(o.parentElement))&&3!==e.endContainer.nodeType&&(o=e.endContainer,e.setEnd(o,e.endContainer.textContent.length)),"BODY"===o.nodeName&&e.startContainer===e.endContainer&&1===e.startContainer.nodeType&&(o=e.startContainer),o.closest("LI")&&t&&t.firstElementChild&&("OL"===t.firstElementChild.tagName||"UL"===t.firstElementChild.tagName))for(var r=void 0;t.firstElementChild.lastElementChild&&"LI"===t.firstElementChild.lastElementChild.tagName;)(r=t.firstElementChild.lastElementChild).style.removeProperty("margin-left"),r.style.removeProperty("margin-top"),r.style.removeProperty("margin-bottom"),t.firstElementChild.insertAdjacentElement("afterend",r);if("TD"===o.nodeName||"TH"===o.nodeName||"TR"===o.nodeName){var a=sf.base.createElement("span",{className:"tempSpan"});e.insertNode(a),a.parentNode.replaceChild(t,a)}else{var l=new G,d=this.getNodeCollection(e,l,t)[this.getNodeCollection(e,l,t).length-1],h=void 0;if("BR"!==d.nodeName&&"HR"!==d.nodeName&&("#text"!==d.nodeName||sf.base.isNullOrUndefined(d.parentElement)||"LI"!==d.parentElement.nodeName)||sf.base.isNullOrUndefined(d.parentElement)||0!==d.parentElement.textContent.trim().length){if("#text"===d.nodeName&&!sf.base.isNullOrUndefined(d.parentElement)&&"LI"===d.parentElement.nodeName&&d.parentElement.textContent.trim().length>0)return h=d,"LI"!==d.parentElement.nodeName||sf.base.isNullOrUndefined(d.nextSibling)||"BR"!==d.nextSibling.nodeName||sf.base.detach(d.nextSibling),e.collapsed||e.deleteContents(),e.insertNode(t),void(this.contentsDeleted=!0);h=n.GetSpliceNode(e,o)}else h=d,"LI"!==d.parentElement.nodeName||sf.base.isNullOrUndefined(d.nextSibling)||"BR"!==d.nextSibling.nodeName||sf.base.detach(d.nextSibling);h.parentNode.replaceChild(t,h)}}else e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset]);else sf.base.isNullOrUndefined(e.startContainer.childNodes[e.endOffset-1].nextSibling)?e.startContainer.appendChild(t):e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset-1].nextSibling)},e.cursorPos=function(e,t,i,n,s){e.classList.add("lastNode"),s.innerHTML=function(e){var t=document.createElement("div");t.innerHTML=e,t.setAttribute("class","tempDiv");var i=document.createElement("div");if(t.childNodes.length>0){for(var n=void 0,s=void 0,o=void 0;t.firstChild;)"#text"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf("\n")<0||""!==t.firstChild.textContent.trim())||p.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(n?s.appendChild(t.firstChild):(o=sf.base.createElement("p"),i.appendChild(o),o.appendChild(t.firstChild)),s=o,n=!0):"#text"===t.firstChild.nodeName&&("\n"===t.firstChild.textContent||t.firstChild.textContent.indexOf("\n")>=0&&""===t.firstChild.textContent.trim())?sf.base.detach(t.firstChild):(i.appendChild(t.firstChild),n=!1);for(var r=i.querySelectorAll("table"),a=0;a<r.length;a++){"0"===r[a].getAttribute("border")&&r[a].removeAttribute("border");for(var l=r[a].querySelectorAll("td"),d=0;d<l.length;d++)"none"===l[d].style.borderLeft&&l[d].style.removeProperty("border-left"),"none"===l[d].style.borderRight&&l[d].style.removeProperty("border-right"),"none"===l[d].style.borderBottom&&l[d].style.removeProperty("border-bottom"),"none"===l[d].style.borderTop&&l[d].style.removeProperty("border-top"),"none"===l[d].style.border&&l[d].style.removeProperty("border");r[a].classList.contains("e-rte-table")||r[a].classList.add("e-rte-table")}var h=i.querySelectorAll("img");for(a=0;a<h.length;a++)h[a].classList.contains("e-rte-image")||h[a].classList.add("e-rte-image"),h[a].classList.contains("e-imginline")||h[a].classList.contains("e-imgbreak")||h[a].classList.add("e-imginline")}return i.innerHTML}(s.innerHTML),e=s.querySelector(".lastNode"),sf.base.isNullOrUndefined(e)||(this.placeCursorEnd(e,t,i,n,s),e.classList.remove("lastNode"),0===e.classList.length&&e.removeAttribute("class"))},e.imageFocus=function(e,t,i){var n=document.createTextNode(" ");e.parentNode.insertBefore(n,e.nextSibling),t.setSelectionText(i,e.nextSibling,e.nextSibling,0,0)},e.getImmediateBlockNode=function(e,t){do{e=e.parentNode}while(e&&W.indexOf(e.nodeName.toLocaleLowerCase())<0);return e},e.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t},e.findDetachEmptyElem=function(e){return sf.base.isNullOrUndefined(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"true"!==e.parentElement.contentEditable?this.findDetachEmptyElem(e.parentElement):e},e.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=0;i<t.length;i++)if(K.indexOf(t[i].tagName.toLowerCase())<0){var n=this.findDetachEmptyElem(t[i]);sf.base.isNullOrUndefined(n)||sf.base.detach(n)}},e.closestEle=function(e,t){for(var i=e;i&&1===i.nodeType;){if(i.parentNode===t||!sf.base.isNullOrUndefined(i.parentNode.tagName)&&-1!==X.indexOf(i.parentNode.tagName.toLocaleLowerCase()))return i;i=i.parentNode}return null},e.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],e.contentsDeleted=!1,e}(),ge=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-LINK",this.linkCommand,this)},e.prototype.linkCommand=function(e){switch(e.value.toString().toLocaleLowerCase()){case"createlink":case"editlink":this.createLink(e);break;case"openlink":this.openLink(e);break;case"removelink":this.removeLink(e)}},e.prototype.createLink=function(e){var t=!sf.base.isNullOrUndefined(e.item.selectParent)&&e.item.selectParent.length>0&&sf.base.closest(e.item.selectParent[0],"a");if(t=sf.base.isNullOrUndefined(t)?!sf.base.isNullOrUndefined(e.item.selectParent)&&e.item.selectParent.length>0?e.item.selectParent[0]:null:t,sf.base.isNullOrUndefined(t)||"A"!==t.tagName){var i=new G,n=i.getRange(this.parent.currentDocument);"#text"===n.endContainer.nodeName&&n.startContainer.textContent.length===n.endOffset+1&&" "===n.endContainer.textContent.charAt(n.endOffset)&&"A"===n.endContainer.nextSibling.nodeName&&(i.setSelectionText(this.parent.currentDocument,n.startContainer,n.endContainer,n.startOffset,n.endOffset+1),n=i.getRange(this.parent.currentDocument));var s=!!sf.base.isNullOrUndefined(e.item.text)||e.item.text.replace(/ /g,"").localeCompare(n.toString().replace(/\n/g," ").replace(/ /g,""))<0;if(e.event&&"keydown"===e.event.type&&(32===e.event.keyCode||13===e.event.keyCode)||"Paste"===e.item.action||n.collapsed||s){var o=this.createAchorNode(e);if(o.innerText=""===e.item.text?e.item.url:e.item.text,e.item.selection.restore(),me.Insert(this.parent.currentDocument,o,this.parent.editableElement),!e.event||"keydown"!==e.event.type||32!==e.event.keyCode&&13!==e.event.keyCode){d="Paste"===e.item.action?o.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,o.childNodes[0],o.childNodes[0],d,o.childNodes[0].textContent.length)}else{var r=e.item.selection.range.startContainer;r.textContent=this.removeText(r.textContent,e.item.text)}}else this.createLinkNode(e)}else{var a=t,l="";if(sf.base.isNullOrUndefined(e.item.url)||a.setAttribute("href",e.item.url),sf.base.isNullOrUndefined(e.item.title)||a.setAttribute("title",e.item.title),sf.base.isNullOrUndefined(e.item.text)||""===e.item.text||(l=a.innerText,a.innerText=e.item.text),sf.base.isNullOrUndefined(e.item.target)?a.removeAttribute("target"):a.setAttribute("target",e.item.target),l===e.item.text)e.item.selection.setSelectionText(this.parent.currentDocument,a,a,1,1),e.item.selection.restore();else{var d="Paste"===e.item.action?a.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,a.childNodes[0],a.childNodes[0],d,a.childNodes[0].textContent.length)}}e.callBack&&e.callBack({requestType:"Links",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.createLinkNode=function(e){for(var t,i,n=new G,s=new ue,o=n.getRange(this.parent.currentDocument),r=this.getSelectionNodes(n.getNodeCollection(o)),a=n.save(o,this.parent.currentDocument),l=[],d=[],h=[],c=[],p=[],u=0;u<r.length;u++)r[u]=s.GetSpliceNode(o,r[u]),l[u]=r[u];for(var f=0;f<l.length;f++){var m=!0;for(t=l[f];!0===m;){if("A"===t.parentNode.nodeName){var g=t.parentNode;t.parentNode.parentNode.insertBefore(g.firstChild,g),t.parentNode.removeChild(g)}this.isBlockNode(t.parentNode)||0===l.length||0===f||f===l.length-1||3===o.startContainer.nodeType?(d[f]=t,m=!1):t=t.parentNode}}f=0;for(var v=0;f<d.length;f++)if(0===f&&(p[v]=d[f]),d.length>1&&f<d.length-1){if(d[f].parentElement===d[f+1].parentElement&&d[f]===d[f+1])continue;p[v+1]=d[f+1],v++}var b=0;c[b]=this.createAchorNode(e);for(f=0;f<p.length;f++)if(0===f&&(i=p[f].cloneNode(!0),c[f].appendChild(i)),f<p.length-1)if(p[f].parentNode===p[f+1].parentNode){var y=p[f+1].cloneNode(!0);c[b].appendChild(y)}else c[b+=1]=this.createAchorNode(e),i=p[f+1].cloneNode(!0),c[b].appendChild(i);this.parent.nodeSelection.setRange(document,a.range);f=0;for(var w=0,C=0;f<=p.length;f++)0===f&&(p[f].parentNode.insertBefore(c[w],p[f].nextSibling),1===this.parent.domNode.blockNodes().length&&this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument,c[w]),h[C]=p[f],C++),f<p.length-1&&(p[f].parentNode===p[f+1].parentNode?(h[C]=p[f+1],C++):(w+=1,p[f+1].parentNode.insertBefore(c[w],p[f+1]),h[C]=p[f+1],C++));for(f=0;f<h.length;f++)h[f].parentNode&&h[f].parentNode.removeChild(h[f])},e.prototype.createAchorNode=function(e){var t=sf.base.createElement("a",{className:"e-rte-anchor",attrs:{href:e.item.url,title:sf.base.isNullOrUndefined(e.item.title)||""===e.item.title?e.item.url:e.item.title}});return sf.base.isNullOrUndefined(e.item.target)||t.setAttribute("target",e.item.target),t},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)3===e[t].nodeType&&""!==e[t].textContent.trim()||"IMG"!==e[t].nodeName&&(e.splice(t,1),t--);return e.reverse()},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&W.indexOf(e.tagName.toLowerCase())>=0},e.prototype.removeText=function(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)i[n]===t&&(i.splice(n,1),n--);return i.join(" ")+" "},e.prototype.openLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeLink=function(e){var t=this.parent.domNode.blockNodes();if(t.length<2){this.parent.domNode.setMarker(e.item.selection);for(var i=sf.base.closest(e.item.selectParent[0],"a"),n=i||e.item.selectParent[0],s=n.parentNode,o=[];n.firstChild;null)o.push(s.insertBefore(n.firstChild,n));s.removeChild(n),o&&1===o.length&&(e.item.selection.startContainer=e.item.selection.getNodeArray(o[o.length-1],!0),e.item.selection.endContainer=e.item.selection.startContainer),e.item.selection=this.parent.domNode.saveMarker(e.item.selection)}else for(var r=0;r<t.length;r++)for(var a=t[r].querySelectorAll("a"),l=0;l<a.length;l++)document.getSelection().containsNode(a[l],!0)&&(a[l].outerHTML=a[l].innerHTML);e.item.selection.restore(),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),ve=function(){function e(e){this.alignments={JustifyLeft:"left",JustifyCenter:"center",JustifyRight:"right",JustifyFull:"justify"},this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("alignment-type",this.applyAlignment,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"justify-center":this.applyAlignment({subCommand:"JustifyCenter",callBack:e.callBack}),e.event.preventDefault();break;case"justify-full":this.applyAlignment({subCommand:"JustifyFull",callBack:e.callBack}),e.event.preventDefault();break;case"justify-left":this.applyAlignment({subCommand:"JustifyLeft",callBack:e.callBack}),e.event.preventDefault();break;case"justify-right":this.applyAlignment({subCommand:"JustifyRight",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.getTableNode=function(e){var t=e.startContainer.nodeType===Node.ELEMENT_NODE?e.startContainer:e.startContainer.parentNode;return[sf.base.closest(t,"td,th")]},e.prototype.applyAlignment=function(e){var t="Table"===e.value,i=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.nodeSelection.save(i,this.parent.currentDocument);if(t)sf.base.setStyleAttribute(this.getTableNode(i)[0],{"text-align":this.alignments[e.subCommand]});else{this.parent.domNode.setMarker(n);for(var s=this.parent.domNode.blockNodes(),o=0;o<s.length;o++){var r=s[o];sf.base.setStyleAttribute(r,{"text-align":this.alignments[e.subCommand]})}var a=this.parent.domNode.getImageTagInSelection();for(o=0;o<a.length;o++){var l=[];l.push(a[o]),this.parent.imgObj.imageCommand({item:{selectNode:l},subCommand:e.subCommand,value:e.subCommand,callBack:e.callBack,selector:e.selector})}this.parent.editableElement.focus(),n=this.parent.domNode.saveMarker(n),u()&&f(this.parent.editableElement,e.selector),n.restore()}e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:t?this.getTableNode(i):this.parent.domNode.blockNodes()})},e}(),be=function(){function e(e){this.indentValue=20,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("indent-type",this.applyIndents,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"indents":this.applyIndents({subCommand:"Indent",callBack:e.callBack}),e.event.preventDefault();break;case"outdents":this.applyIndents({subCommand:"Outdent",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.applyIndents=function(e){var t=this.parent.editableElement,i=t.classList.contains("e-rtl"),n=this.parent.nodeSelection.getRange(this.parent.currentDocument),s=this.parent.nodeSelection.save(n,this.parent.currentDocument);this.parent.domNode.setMarker(s);for(var o=this.parent.domNode.blockNodes(),r=o.slice(),a=[],l=0;l<r.length;l++)"LI"!==r[l].tagName&&"LI"===r[l].parentNode.tagName?(o.splice(o.indexOf(r[l]),1),a.push(r[l].parentNode)):"LI"===r[l].tagName&&(o.splice(o.indexOf(r[l]),1),a.push(r[l]));a.length>0&&this.parent.observer.notify("keydown-handler",{event:{preventDefault:function(){},stopPropagation:function(){},shiftKey:"Indent"!==e.subCommand,which:9,action:"indent"},ignoreDefault:!0});for(l=0;l<o.length;l++){var d=o[l],h=i?d.style.marginRight:d.style.marginLeft,c=void 0;"Indent"===e.subCommand?(c=""===h?this.indentValue+"px":parseInt(h,null)+this.indentValue+"px",i?d.style.marginRight=c:d.style.marginLeft=c):(c=""===h||"0px"===h?"":parseInt(h,null)-this.indentValue+"px",i?d.style.marginRight=c:d.style.marginLeft=c)}t.focus(),u()&&f(t,e.selector),(s=this.parent.domNode.saveMarker(s)).restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e}(),ye="e-img-caption",we=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(j,this.imageCommand,this)},e.prototype.imageCommand=function(e){switch(e.value.toString().toLowerCase()){case"image":case"replace":this.createImage(e);break;case"insertlink":this.insertImageLink(e);break;case"openimagelink":this.openImageLink(e);break;case"editimagelink":this.editImageLink(e);break;case"removeimagelink":this.removeImageLink(e);break;case"remove":this.removeImage(e);break;case"alttext":this.insertAltTextImage(e);break;case"dimension":this.imageDimension(e);break;case"caption":this.imageCaption(e);break;case"justifyleft":this.imageJustifyLeft(e);break;case"justifycenter":this.imageJustifyCenter(e);break;case"justifyright":this.imageJustifyRight(e);break;case"inline":this.imageInline(e);break;case"break":this.imageBreak(e)}},e.prototype.createImage=function(e){var t=this,i=!1;if(e.item.url=sf.base.isNullOrUndefined(e.item.url)||"undefined"===e.item.url?e.item.src:e.item.url,sf.base.isNullOrUndefined(e.item.selectParent)||"IMG"!==e.item.selectParent[0].tagName){var n=sf.base.createElement("img");this.setStyle(n,e),sf.base.isNullOrUndefined(e.item.selection)||e.item.selection.restore(),sf.base.isNullOrUndefined(e.selector)||"pasteCleanupModule"!==e.selector?me.Insert(this.parent.currentDocument,n,this.parent.editableElement):e.callBack({requestType:"Images",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[n]})}else{var s=e.item.selectParent[0];this.setStyle(s,e),i=!0}if(e.callBack&&(sf.base.isNullOrUndefined(e.selector)||!sf.base.isNullOrUndefined(e.selector)&&"pasteCleanupModule"!==e.selector)){var o=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],r="Replace"===e.value||i?e.item.selectParent[0]:sf.base.Browser.isIE?o.previousSibling:o.previousElementSibling;r.addEventListener("load",(function(){"Replace"===e.value&&i||e.callBack({requestType:"Images",editorMode:"HTML",event:e.event,range:t.parent.nodeSelection.getRange(t.parent.currentDocument),elements:[r]})}))}},e.prototype.setStyle=function(e,t){sf.base.isNullOrUndefined(t.item.url)||e.setAttribute("src",t.item.url),e.setAttribute("class","e-rte-image"+(sf.base.isNullOrUndefined(t.item.cssClass)?"":" "+t.item.cssClass)),sf.base.isNullOrUndefined(t.item.altText)||e.setAttribute("alt",t.item.altText),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.width)||e.setAttribute("width",this.calculateStyleValue(t.item.width.width)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.height)||e.setAttribute("height",this.calculateStyleValue(t.item.height.height)),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.minWidth)||(e.style.minWidth=this.calculateStyleValue(t.item.width.minWidth)),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.maxWidth)||(e.style.maxWidth=this.calculateStyleValue(t.item.width.maxWidth)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.minHeight)||(e.style.minHeight=this.calculateStyleValue(t.item.height.minHeight)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.maxHeight)||(e.style.maxHeight=this.calculateStyleValue(t.item.height.maxHeight))},e.prototype.calculateStyleValue=function(e){return"string"==typeof e&&(e.indexOf("px")||e.indexOf("%")||e.indexOf("auto"))?e:e+"px"},e.prototype.insertImageLink=function(e){var t=sf.base.createElement("a",{attrs:{href:e.item.url}});e.item.selectNode[0].parentElement.classList.contains("e-img-wrap")&&(e.item.selection.restore(),t.setAttribute("contenteditable","true")),t.appendChild(e.item.selectNode[0]),sf.base.isNullOrUndefined(e.item.target)||t.setAttribute("target",e.item.target),me.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.callBack(e)},e.prototype.openImageLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeImageLink=function(e){var t=e.item.selectParent[0];if(t.classList.contains("e-img-caption")){var i=sf.base.select(".e-img-wrap",t),n=sf.base.select(".e-img-inner",t),s=n.cloneNode(!0);sf.base.detach(sf.base.select("a",t)),sf.base.detach(n),i.appendChild(e.item.insertElement),i.appendChild(s)}else sf.base.detach(t),sf.base.Browser.isIE&&e.item.selection&&e.item.selection.restore(),me.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement);this.callBack(e)},e.prototype.editImageLink=function(e){e.item.selectNode[0].parentElement.href=e.item.url,sf.base.isNullOrUndefined(e.item.target)?e.item.selectNode[0].parentElement.removeAttribute("target"):e.item.selectNode[0].parentElement.target=e.item.target,this.callBack(e)},e.prototype.removeImage=function(e){sf.base.closest(e.item.selectNode[0],"a")&&("A"!==e.item.selectNode[0].parentElement.nodeName||sf.base.isNullOrUndefined(e.item.selectNode[0].parentElement.innerText))?sf.base.detach(sf.base.closest(e.item.selectNode[0],"a")):sf.base.isNullOrUndefined(sf.base.closest(e.item.selectNode[0],"."+ye))?sf.base.detach(e.item.selectNode[0]):sf.base.detach(sf.base.closest(e.item.selectNode[0],"."+ye)),this.callBack(e)},e.prototype.insertAltTextImage=function(e){e.item.selectNode[0].setAttribute("alt",e.item.altText),this.callBack(e)},e.prototype.imageDimension=function(e){var t=e.item.selectNode[0];t.style.height="",t.style.width="","auto"!==e.item.width?t.style.width=sf.base.formatUnit(e.item.width):t.removeAttribute("width"),"auto"!==e.item.height?t.style.height=sf.base.formatUnit(e.item.height):t.removeAttribute("height"),this.callBack(e)},e.prototype.imageCaption=function(e){me.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement),this.callBack(e)},e.prototype.imageJustifyLeft=function(e){var t=e.item.selectNode[0];sf.base.isNullOrUndefined(t)||(t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-imgleft")),"A"===t.parentElement.nodeName?(sf.base.removeClass([t.parentElement],"e-imgright"),sf.base.addClass([t.parentElement],"e-imgleft"),sf.base.addClass([t],"e-imgleft")):sf.base.addClass([t],"e-imgleft"),this.callBack(e))},e.prototype.imageJustifyCenter=function(e){var t=e.item.selectNode[0];sf.base.isNullOrUndefined(t)||(t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgleft"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-imgcenter")),"A"===t.parentElement.nodeName?(sf.base.removeClass([t.parentElement],"e-imgleft"),sf.base.removeClass([t.parentElement],"e-imgright"),sf.base.addClass([t.parentElement],"e-imgcenter"),sf.base.addClass([t],"e-imgcenter")):sf.base.addClass([t],"e-imgcenter"),this.callBack(e))},e.prototype.imageJustifyRight=function(e){var t=e.item.selectNode[0];sf.base.isNullOrUndefined(t)||(t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgleft"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-imgright")),"A"===t.parentElement.nodeName?(sf.base.removeClass([t.parentElement],"e-imgleft"),sf.base.addClass([t.parentElement],"e-imgright"),sf.base.addClass([t],"e-imgright")):sf.base.addClass([t],"e-imgright"),this.callBack(e))},e.prototype.imageInline=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.addClass([t],"e-imginline"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgbreak"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgcenter"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgleft"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-caption-inline")),this.callBack(e)},e.prototype.imageBreak=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),sf.base.addClass([t],"e-imgbreak"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-caption-inline"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgcenter"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgleft"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-imgbreak")),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Ce=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-AUDIO",this.audioCommand,this)},e.prototype.audioCommand=function(e){var t,i=e.value.toString().toLowerCase();switch("inline"!==i&&"break"!==i&&"audioremove"!==i||(t=e.item.selectNode[0]),i){case"audio":case"audioreplace":this.createAudio(e);break;case"inline":t.removeAttribute("class"),t.closest(".e-audio-wrap").style.display="inline-block",sf.base.addClass([t],["e-rte-audio","e-audio-inline","e-audio-focus"]),this.callBack(e);break;case"break":t.removeAttribute("class"),t.closest(".e-audio-wrap").style.display="block",sf.base.addClass([t],["e-audio-break","e-rte-audio","e-audio-focus"]),this.callBack(e);break;case"audioremove":sf.base.detach(t),this.callBack(e)}},e.prototype.createAudio=function(e){var t,i=this,n=!1;if(!sf.base.isNullOrUndefined(e.item.selectParent)&&e.item.selectParent[0].classList&&(e.item.selectParent[0].classList.contains("e-clickelem")||e.item.selectParent[0].classList.contains("e-audio-wrap"))){var s=e.item.selectParent[0].querySelector("source");this.setStyle(s,e),n=!0}else{t=sf.base.createElement("span",{className:"e-audio-wrap",attrs:{contentEditable:"false",title:e.item.fileName}});var o=sf.base.createElement("audio",{className:"e-rte-audio e-audio-inline",attrs:{controls:""}}),r=sf.base.createElement("source"),a=sf.base.createElement("span",{className:"e-clickelem"});if(this.setStyle(r,e),o.appendChild(r),a.appendChild(o),t.appendChild(a),sf.base.isNullOrUndefined(e.item.selection)||e.item.selection.restore(),me.Insert(this.parent.currentDocument,t,this.parent.editableElement),null===t.nextElementSibling){var l=sf.base.createElement("br");t.parentNode.insertBefore(l,t.nextSibling)}}if(e.callBack&&(sf.base.isNullOrUndefined(e.selector)||!sf.base.isNullOrUndefined(e.selector)&&"pasteCleanupModule"!==e.selector)){var d=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],h="AudioReplace"===e.value||n?e.item.selectParent[0].querySelector("audio"):sf.base.Browser.isIE?d:d.querySelector("audio");h.addEventListener("loadeddata",(function(){"AudioReplace"===e.value&&n||e.callBack({requestType:"Audios",editorMode:"HTML",event:e.event,range:i.parent.nodeSelection.getRange(i.parent.currentDocument),elements:[h]})})),n&&h.load()}},e.prototype.setStyle=function(e,t){sf.base.isNullOrUndefined(t.item.url)||e.setAttribute("src",t.item.url),e.type=t.item.fileName&&t.item.fileName.split(".").length>0?"audio/"+t.item.fileName.split(".")[t.item.fileName.split(".").length-1]:t.item.url&&t.item.url.split(".").length>0?"audio/"+t.item.url.split(".")[t.item.url.split(".").length-1]:""},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Se=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-VIDEO",this.videoCommand,this)},e.prototype.videoCommand=function(e){var t,i,n,s=e.value.toString().toLowerCase();switch("video"!==s&&"videoreplace"!==s&&(i=(t=e.item.selectNode[0]).closest(".e-embed-video-wrap"),n=t.closest(".e-video-clickelem")),s){case"video":case"videoreplace":this.createVideo(e);break;case"videodimension":this.videoDimension(e);break;case"inline":t.removeAttribute("class"),i&&(i.style.display="inline-block"),n&&(t.parentElement.style.cssFloat=""),sf.base.addClass([t],["e-rte-video","e-video-inline","e-video-focus"]),this.callBack(e);break;case"break":t.removeAttribute("class"),i&&(i.style.display="block"),n&&(t.parentElement.style.cssFloat=""),sf.base.addClass([t],["e-video-break","e-rte-video","e-video-focus"]),this.callBack(e);break;case"justifyleft":t.removeAttribute("class"),i&&(i.style.display="block"),n&&(t.parentElement.style.cssFloat="left"),sf.base.addClass([t],["e-rte-video","e-video-left"]),this.callBack(e);break;case"justifycenter":t.removeAttribute("class"),i&&(i.style.display="block"),n&&(t.parentElement.style.cssFloat=""),sf.base.addClass([t],["e-rte-video","e-video-center"]),this.callBack(e);break;case"justifyright":t.removeAttribute("class"),i&&(i.style.display="block"),n&&(t.parentElement.style.cssFloat="right"),sf.base.addClass([t],["e-rte-video","e-video-right"]),this.callBack(e);break;case"videoremove":sf.base.detach(t.parentElement),this.callBack(e)}},e.prototype.createVideo=function(e){var t,i,n,s=this,o=!1;if("VideoReplace"!==e.value||sf.base.isNullOrUndefined(e.item.selectParent)||"VIDEO"!==e.item.selectParent[0].tagName)if("VideoReplace"===e.value&&!sf.base.isNullOrUndefined(e.item.selectParent)&&e.item.selectParent[0].classList&&e.item.selectParent[0].classList.contains("e-video-clickelem"))e.item.selectParent[0].innerHTML=e.item.fileName,this.setStyle(e.item.selectParent[0].firstElementChild,e,e.item.selectParent[0].firstElementChild);else{if(e.item.isEmbedUrl){t=sf.base.createElement("span",{className:"e-embed-video-wrap",attrs:{contentEditable:"false"}});var r=sf.base.createElement("span",{className:"e-video-clickelem"}),a=sf.base.createElement("template");a.innerHTML=e.item.fileName,r.appendChild(a.content),i=n=r.firstElementChild,this.setStyle(n,e,i),t.appendChild(r)}else t=sf.base.createElement("span",{className:"e-video-wrap",attrs:{contentEditable:"false",title:e.item.fileName}}),i=sf.base.createElement("video",{className:"e-rte-video e-video-inline",attrs:{controls:""}}),n=sf.base.createElement("source"),this.setStyle(n,e,i),i.appendChild(n),t.appendChild(i);if(sf.base.isNullOrUndefined(e.item.selection)||e.item.selection.restore(),me.Insert(this.parent.currentDocument,t,this.parent.editableElement),null===t.nextElementSibling){var l=sf.base.createElement("br");t.parentNode.insertBefore(l,t.nextSibling)}}else{var d=e.item.selectParent[0].querySelector("source");this.setStyle(d,e,d),o=!0}if(e.callBack&&(sf.base.isNullOrUndefined(e.selector)||!sf.base.isNullOrUndefined(e.selector)&&"pasteCleanupModule"!==e.selector)){var h=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],c="VideoReplace"===e.value||o?e.item.isEmbedUrl?e.item.selectParent[0].querySelector("iframe"):e.item.selectParent[0]:sf.base.Browser.isIE?h:e.item.isEmbedUrl?h.querySelector("iframe"):h.lastElementChild;c.addEventListener("IFRAME"!==c.tagName?"loadeddata":"load",(function(){"VideoReplace"===e.value&&o||e.callBack({requestType:"Videos",editorMode:"HTML",event:e.event,range:s.parent.nodeSelection.getRange(s.parent.currentDocument),elements:[c]})})),o&&c.load(),-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&(i.addEventListener("play",(function(t){s.editAreaVideoClick(e)})),i.addEventListener("pause",(function(t){s.editAreaVideoClick(e)})))}},e.prototype.editAreaVideoClick=function(e){e.callBack({requestType:"VideosPlayPause",editorMode:"HTML",event:e.event})},e.prototype.setStyle=function(e,t,i){""===t.item.url||sf.base.isNullOrUndefined(t.item.url)||e.setAttribute("src",t.item.url),t.item.isEmbedUrl||(e.type=t.item.fileName&&t.item.fileName.split(".").length>0?"video/"+t.item.fileName.split(".")[t.item.fileName.split(".").length-1]:t.item.url&&t.item.url.split(".").length>0?"video/"+t.item.url.split(".")[t.item.url.split(".").length-1]:""),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.width)||i.setAttribute("width",sf.base.formatUnit(t.item.width.width)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.height)||i.setAttribute("height",sf.base.formatUnit(t.item.height.height)),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.minWidth)||(i.style.minWidth=sf.base.formatUnit(t.item.width.minWidth)),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.maxWidth)||(i.style.maxWidth=sf.base.formatUnit(t.item.width.maxWidth)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.minHeight)||(i.style.minHeight=sf.base.formatUnit(t.item.height.minHeight)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.maxHeight)||(i.style.maxHeight=sf.base.formatUnit(t.item.height.maxHeight))},e.prototype.videoDimension=function(e){var t=e.item.selectNode[0].classList.contains("e-video-clickelem")?e.item.selectNode[0].querySelector("iframe"):e.item.selectNode[0];t.style.height="",t.style.width="","auto"!==e.item.width?t.style.width=sf.base.formatUnit(e.item.width):t.removeAttribute("width"),"auto"!==e.item.height?t.style.height=sf.base.formatUnit(e.item.height):t.removeAttribute("height"),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Ee=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-TABLE",this.createTable,this),this.parent.observer.on("INSERT-ROW",this.insertRow,this),this.parent.observer.on("INSERT-COLUMN",this.insertColumn,this),this.parent.observer.on("DELETE-ROW",this.deleteRow,this),this.parent.observer.on("DELETE-COLUMN",this.deleteColumn,this),this.parent.observer.on("REMOVE-TABLE",this.removeTable,this),this.parent.observer.on("TABLE-HEADER",this.tableHeader,this),this.parent.observer.on("TABLE_VERTICAL_ALIGN",this.tableVerticalAlign,this),this.parent.observer.on("TABLE_MERGE",this.cellMerge,this),this.parent.observer.on("TABLE_HORIZONTAL_SPLIT",this.HorizontalSplit,this),this.parent.observer.on("TABLE_VERTICAL_SPLIT",this.VerticalSplit,this),this.parent.observer.on("TABLE_MOVE",this.tableMove,this)},e.prototype.createTable=function(e){var t=sf.base.createElement("table",{className:"e-rte-table"}),i=sf.base.createElement("tbody");sf.base.isNullOrUndefined(e.item.width.width)||(t.style.width=this.calculateStyleValue(e.item.width.width)),sf.base.isNullOrUndefined(e.item.width.minWidth)||(t.style.minWidth=this.calculateStyleValue(e.item.width.minWidth)),sf.base.isNullOrUndefined(e.item.width.maxWidth)||(t.style.maxWidth=this.calculateStyleValue(e.item.width.maxWidth));for(var n=parseInt(e.item.width.width,10)>100?100/e.item.columns:parseInt(e.item.width.width,10)/e.item.columns,s=0;s<e.item.rows;s++){for(var o=sf.base.createElement("tr"),r=0;r<e.item.columns;r++){var a=sf.base.createElement("td");a.appendChild(sf.base.createElement("br")),a.style.width=n+"%",o.appendChild(a)}i.appendChild(o)}if(t.appendChild(i),e.item.selection.restore(),me.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.removeEmptyNode(),e.item.selection.setSelectionText(this.parent.currentDocument,t.querySelector("td"),t.querySelector("td"),0,0),null===t.nextElementSibling){var l=void 0;"DIV"===e.enterAction?(l=sf.base.createElement("div")).appendChild(sf.base.createElement("br")):"BR"===e.enterAction?l=sf.base.createElement("br"):(l=sf.base.createElement("p")).appendChild(sf.base.createElement("br")),this.insertAfter(l,t)}return t.querySelector("td").classList.add("e-cell-select"),e.callBack&&e.callBack({requestType:"Table",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[t]}),t},e.prototype.calculateStyleValue=function(e){return"string"==typeof e&&(e.indexOf("px")||e.indexOf("%")||e.indexOf("auto"))?e:e+"px"},e.prototype.removeEmptyNode=function(){for(var e=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty"),t=0;t<e.length;t++)sf.base.detach(e[t]);var i=this.parent.editableElement.querySelectorAll("li *:empty:not(img)");for(t=0;t<i.length;t++)sf.base.detach(i[t]),i.length===t+1&&(i=this.parent.editableElement.querySelectorAll("li *:empty:not(img)"),t=-1);var n=this.parent.editableElement.querySelectorAll("li:empty");for(t=0;t<n.length;t++)sf.base.detach(n[t])},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.getSelectedCellMinMaxIndex=function(e){for(var t=this.curTable.querySelectorAll(".e-cell-select"),i=0,n=e.length,s=0,o=e[0].length,r=0;i<t.length;i++){var a=this.getCorrespondingIndex(t[i],e),l=this.FindIndex(a[0],a[1],e);n=Math.min(a[0],n),s=Math.max(l[0],s),o=Math.min(a[1],o),r=Math.max(l[1],r)}return{startRow:n,endRow:s,startColumn:o,endColumn:r}},e.prototype.insertRow=function(e){var t="InsertRowBefore"!==e.item.subCommand,i=e.item.selection.range.startContainer;if("TH"!==i.nodeName&&"TD"!==i.nodeName&&(i=sf.base.closest(i.parentElement,"td,th")),"th"!==i.nodeName.toLowerCase()||"InsertRowBefore"!==e.item.subCommand){if(this.curTable=sf.base.closest(this.parent.nodeSelection.range.startContainer.parentElement,"table"),0===this.curTable.querySelectorAll(".e-cell-select").length){var n=this.curTable.rows[this.curTable.rows.length-1],s=n.cloneNode(!0);s.removeAttribute("rowspan"),this.insertAfter(s,n)}else{for(var o=this.getCorrespondingColumns(),r=this.getSelectedCellMinMaxIndex(o),a=t?r.endRow:r.startRow,l=sf.base.createElement("tr"),d=this.curTable.querySelectorAll("th.e-cell-select").length>0,h=0;h<o[a].length;h++)if(t&&a<o.length-1&&o[a][h]===o[a+1][h]||!t&&0<a&&o[a][h]===o[a-1][h])(0===h||0<h&&o[a][h]!==o[a][h-1])&&o[a][h].setAttribute("rowspan",(parseInt(o[a][h].getAttribute("rowspan"),10)+1).toString());else{var c=sf.base.createElement("td");c.appendChild(sf.base.createElement("br")),l.appendChild(c),c.setAttribute("style",o[d&&t&&o[a+1]?a+1:a][h].getAttribute("style"))}var p=void 0;p=d&&t?this.curTable.querySelector("tbody").childNodes[0]:this.curTable.rows[a],"InsertRowBefore"===e.item.subCommand||d?p.parentElement.insertBefore(l,p):this.insertAfter(l,p)}e.item.selection.setSelectionText(this.parent.currentDocument,e.item.selection.range.startContainer,e.item.selection.range.startContainer,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.insertColumn=function(e){var t=e.item.selection.range.startContainer;"TH"!==t.nodeName&&"TD"!==t.nodeName&&(t=sf.base.closest(t.parentElement,"td,th"));for(var i,n=sf.base.closest(t,"tr"),s=sf.base.closest(n,"table").rows,o=Array.prototype.slice.call(n.querySelectorAll(":scope > td, :scope > th")).indexOf(t),r=parseInt(e.item.width,10)/n.querySelectorAll(":scope > td, :scope > th").length,a=parseInt(e.item.width,10)/(n.querySelectorAll(":scope > td, :scope > th").length+1),l=sf.base.closest(n,"table"),d=sf.base.closest(n,"table").querySelectorAll("th,td"),h=0;h<d.length;h++)d[h].dataset.oldWidth=d[h].offsetWidth/l.offsetWidth*100+"%";for(h=0;h<s.length;h++){var c=(i=s[h].querySelectorAll(":scope > td, :scope > th")[o]).cloneNode(!0);c.innerHTML="",c.appendChild(sf.base.createElement("br")),c.removeAttribute("class"),c.removeAttribute("colspan"),c.removeAttribute("rowspan"),"InsertColumnLeft"===e.item.subCommand?i.parentElement.insertBefore(c,i):this.insertAfter(c,i),c.style.width=a.toFixed(4)+"%",delete c.dataset.oldWidth}for(h=0;h<d.length;h++)d[h].style.width=(Number(d[h].dataset.oldWidth.split("%")[0])*a/r).toFixed(4)+"%",delete d[h].dataset.oldWidth;e.item.selection.setSelectionText(this.parent.currentDocument,t,t,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.deleteColumn=function(e){var t=e.item.selection.range.startContainer;3===t.nodeType&&(t=sf.base.closest(t.parentElement,"td,th"));var i=sf.base.closest(t,"TH"===t.tagName?"thead":"tbody"),n=i&&Array.prototype.indexOf.call(i.childNodes,t.parentNode);if(this.curTable=sf.base.closest(t,"table"),1===sf.base.closest(t,"tr").querySelectorAll("th,td").length)e.item.selection.restore(),sf.base.detach(sf.base.closest(t.parentElement,"table"));else{for(var s=void 0,o=this.getCorrespondingColumns(),r=this.getSelectedCellMinMaxIndex(o),a=r.startColumn,l=r.endColumn,d=0;d<o.length;d++)for(var h=o[d],c=0;c<h.length;c++){var p=h[c],u=this.getCorrespondingIndex(p,o),f=parseInt(p.getAttribute("colspan"),10)||1;u[1]+(f-1)>=a&&u[1]<=l&&(f>1?p.setAttribute("colspan",(f-1).toString()):(sf.base.detach(p),s=c,sf.base.Browser.isIE&&(e.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))))}if(s>-1){var m=i.children[n],g=m&&m.children[s<=m.children.length-1?s:s-1];g&&(e.item.selection.setSelectionText(this.parent.currentDocument,g,g,0,0),g.classList.add("e-cell-select"))}}if(e.callBack){var v=this.parent.nodeSelection.getRange(this.parent.currentDocument).startContainer;if("TD"!==v.nodeName){var b=this.parent.nodeSelection.getRange(this.parent.currentDocument).startOffset,y=v.children[b];y&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,y,0)}e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.deleteRow=function(e){var t=e.item.selection.range.startContainer;3===t.nodeType&&(t=sf.base.closest(t.parentElement,"td,th"));var i,n=Array.prototype.indexOf.call(t.parentNode.childNodes,t);this.curTable=sf.base.closest(t,"table");var s,o,r=this.getCorrespondingColumns(),a=this.getSelectedCellMinMaxIndex(r);if(1===this.curTable.rows.length)e.item.selection.restore(),sf.base.detach(sf.base.closest(t.parentElement,"table"));else for(s=a.endRow;s>=a.startRow;s--){for(i=this.curTable.rows[s],o=0;o<r[s].length;o++){if((0===o||r[s][o]!==r[s][o-1])&&1<parseInt(r[s][o].getAttribute("rowspan"),10)){var l=parseInt(r[s][o].getAttribute("rowspan"),10)-1;1===l?r[s][o].removeAttribute("rowspan"):r[s][o].setAttribute("rowspan",l.toString())}if(s<r.length-1&&r[s][o]===r[s+1][o]&&(0===s||r[s][o]!==r[s-1][o])){var d=r[s][o],h=void 0;for(h=o;0<h&&r[s][h]===r[s][h-1];h--)0===h?this.curTable.rows[s+1].prepend(d):r[s+1][h-1].insertAdjacentElement("afterend",d)}}var c=i.rowIndex;this.curTable.deleteRow(c);var p=sf.base.isNullOrUndefined(this.curTable.rows[c])?this.curTable.querySelectorAll("tbody tr")[c-1]:this.curTable.querySelectorAll("tbody tr")[c],u=p&&p.querySelectorAll("td")[n];u?(e.item.selection.setSelectionText(this.parent.currentDocument,u,u,0,0),u.classList.add("e-cell-select")):(e.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))}e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.removeTable=function(e){var t=e.item.selection.range.startContainer;t=3===t.nodeType?t.parentNode:t;var i=sf.base.closest(t.parentElement,"table");i&&(e.item.selection.restore(),sf.base.detach(i)),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.tableHeader=function(e){var t=!1,i=e.item.selection.range.startContainer;i=3===i.nodeType?i.parentNode:i;var n=sf.base.closest(i.parentElement,"table");if([].slice.call(n.childNodes).forEach((function(e){"THEAD"===e.nodeName&&(t=!0)})),n&&!t){for(var s=n.querySelector("tr").childElementCount,o=0,r=0;r<s;r++)o+=parseInt(n.querySelector("tr").children[r].getAttribute("colspan"),10)||1;for(var a=n.createTHead().insertRow(0),l=0;l<o;l++){var d=sf.base.createElement("th");d.appendChild(sf.base.createElement("br")),a.appendChild(d)}}else n.deleteTHead();e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.tableVerticalAlign=function(e){"AlignTop"===e.item.subCommand?e.item.tableCell.style.verticalAlign="top":"AlignMiddle"===e.item.subCommand?e.item.tableCell.style.verticalAlign="middle":e.item.tableCell.style.verticalAlign="bottom",e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.cellMerge=function(e){sf.base.isNullOrUndefined(this.curTable)&&(this.curTable=sf.base.closest(this.parent.nodeSelection.range.startContainer.parentElement,"table"));var t=this.curTable.querySelectorAll(".e-cell-select");if(!(t.length<2)){this.mergeCellContent();var i=this.getSelectedMinMaxIndexes(this.getCorrespondingColumns()),n=t[0],s=n.parentElement.querySelectorAll(".e-cell-select");i.startColumn<i.endColumn&&n.setAttribute("colspan",(i.endColumn-i.startColumn+1).toString()),i.startRow<i.endRow&&n.setAttribute("rowspan",(i.endRow-i.startRow+1).toString());for(var o=0,r=s.length-1;r>=0;r--)o+=parseFloat(s[r].style.width);n.style.width=o+"%";for(var a=1;a<=t.length-1;a++)sf.base.detach(t[a]);for(a=0;a<this.curTable.rows.length;a++)""===this.curTable.rows[a].innerHTML&&sf.base.detach(this.curTable.rows[a]);this.updateRowSpanStyle(i.startRow,i.endRow,this.getCorrespondingColumns()),this.updateColSpanStyle(i.startColumn,i.endColumn,this.getCorrespondingColumns()),e.item.selection.setSelectionText(this.parent.currentDocument,e.item.selection.range.startContainer,e.item.selection.range.startContainer,0,0),this.parent.nodeSelection.range&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.updateColSpanStyle=function(e,t,i){var n,s,o,r,a=0,l=0,d=i;if(e<(t=Math.min(t,d[0].length-1))){for(;s<=t;s++)if(!(e<s&&d[0][s]===d[0][s-1])&&1<(a=Math.min(parseInt(d[0][s].getAttribute("colspan"),10)||1,t-e+1))&&d[0][s]===d[0][s+1])for(l=a-1,n=1;n<d.length;n++){if(d[n][s]!==d[n-1][s])for(o=s;o<s+a;o++)if(1<(r=parseInt(d[n][o].getAttribute("colspan"),10)||1)&&d[n][o]===d[n][o+1])o+=l=Math.min(l,r-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&this.updateCellAttribute(d,l,"colspan",0,d.length-1,e,t)}},e.prototype.updateRowSpanStyle=function(e,t,i){var n,s,o,r,a=0,l=0,d=i;if(e<(t=Math.min(t,d.length-1))){for(n=e;n<=t;n++)if(!(e<n&&d[n][0]===d[n-1][0])&&d[n][0]&&1<(a=Math.min(parseInt(d[n][0].getAttribute("rowspan"),10)||1,t-e+1))&&d[n][0]===d[n+1][0])for(l=a-1,s=1;s<d[0].length;s++)if(d[n][s]!==d[n][s-1]){for(o=n;o<n+a;o++)if(1<(r=parseInt(d[o][s].getAttribute("rowspan"),10)||1)&&d[o][s]===d[o+1][s])o+=l=Math.min(l,r-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&this.updateCellAttribute(d,l,"rowspan",e,t,0,d[0].length-1)}},e.prototype.updateCellAttribute=function(e,t,i,n,s,o,r){var a,l,d;for(a=n;a<=s;a++)for(l=o;l<=r;l++)n<a&&e[a][l]===e[a-1][l]||o<l&&e[a][l]===e[a][l-1]||1<(d=parseInt(e[a][l].getAttribute(i),10)||1)&&(1<d-t?e[a][l].setAttribute(i,(d-t).toString()):e[a][l].removeAttribute(i))},e.prototype.mergeCellContent=function(){for(var e=this.curTable.querySelectorAll(".e-cell-select"),t="<br>"===e[0].innerHTML?"":e[0].innerHTML,i=1;i<e.length;i++)"<br>"!==e[i].innerHTML&&(t=t?t+"<br>"+e[i].innerHTML:t+e[i].innerHTML);e[0].innerHTML=t},e.prototype.getSelectedMinMaxIndexes=function(e){var t=this.curTable.querySelectorAll(".e-cell-select");if(0<t.length){for(var i=e.length,n=0,s=e[0].length,o=0,r=0;r<t.length;r++){var a=this.getCorrespondingIndex(t[r],e),l=this.FindIndex(a[0],a[1],e);i=Math.min(a[0],i),n=Math.max(l[0],n),s=Math.min(a[1],s),o=Math.max(l[1],o)}return{startRow:i,endRow:n,startColumn:s,endColumn:o}}return null},e.prototype.HorizontalSplit=function(e){var t=e.item.selection.range.startContainer;if(this.curTable=sf.base.closest(t.parentElement,"table"),!(this.curTable.querySelectorAll(".e-cell-select").length>1)){this.activeCell=this.curTable.querySelector(".e-cell-select");var i=this.activeCell.cloneNode(!0);i.removeAttribute("class"),i.innerHTML="</br>";var n=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),s=this.getCorrespondingColumns(),o=this.activeCell.getAttribute("rowspan")?parseInt(this.activeCell.getAttribute("rowspan"),10):1;if(o>1){var r=Math.ceil(o/2);1<r?this.activeCell.setAttribute("rowspan",r.toString()):this.activeCell.removeAttribute("rowspan"),1<o-r?i.setAttribute("rowspan",(o-r).toString()):i.removeAttribute("rowspan");var a,l=void 0;for(a=n[0]+Math.ceil(o/2),l=0===n[1]?n[1]:n[1]-1;0<=l&&(s[a][l]===s[a][l-1]||0<a&&s[a][l]===s[a-1][l]);)l--;-1===l?this.curTable.rows[a].firstChild?this.curTable.rows[a].prepend(i):this.curTable.appendChild(i):s[a][l].insertAdjacentElement("afterend",i)}else{var d=sf.base.createElement("tr");d.appendChild(i);for(var h=s[n[0]],c=0;c<=h.length-1;c++)h[c]!==h[c-1]&&h[c]!==this.activeCell&&h[c].setAttribute("rowspan",((parseInt(h[c].getAttribute("rowspan"),10)?parseInt(h[c].getAttribute("rowspan"),10):1)+1).toString());this.activeCell.parentNode.insertAdjacentElement("afterend",d)}e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.VerticalSplit=function(e){var t=e.item.selection.range.startContainer;if(this.curTable=sf.base.closest(t.parentElement,"table"),!(this.curTable.querySelectorAll(".e-cell-select").length>1)){this.activeCell=this.curTable.querySelector(".e-cell-select");var i=this.curTable.rows,n=this.activeCell.cloneNode(!0);n.removeAttribute("class"),n.innerHTML="</br>";var s=parseFloat(this.activeCell.style.width)/2;if("TH"===this.activeCell.tagName&&isNaN(s)){for(var o=this.curTable.querySelector("tr").childElementCount,r=0;r<o;r++)parseInt(this.curTable.querySelector("tr").children[r].getAttribute("colspan"),10)||1;s=parseFloat((this.activeCell.offsetWidth/2/this.curTable.offsetWidth*100).toFixed(1))}var a=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),l=this.getCorrespondingColumns(),d=parseInt(this.activeCell.getAttribute("colspan"),10);if(d>1)1<Math.ceil(d/2)?this.activeCell.setAttribute("colspan",(d/2).toString()):this.activeCell.removeAttribute("colspan"),1<d-d/2?n.setAttribute("colspan",(d-d/2).toString()):n.removeAttribute("colspan");else for(r=0;r<=i.length-1;r++)if(0===r||l[r][a[1]]!==l[r-1][a[1]]){var h=l[r][a[1]];h!==this.activeCell&&h.setAttribute("colspan",((parseInt(h.getAttribute("colspan"),10)?parseInt(h.getAttribute("colspan"),10):1)+1).toString())}this.activeCell.style.width=s+"%",n.style.width=s+"%",this.activeCell.parentNode.insertBefore(n,this.activeCell.nextSibling),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.getCorrespondingColumns=function(){for(var e=[],t=this.curTable.rows,i=0;i<=t.length-1;i++)for(var n=t[i],s=0,o=0;o<=n.children.length-1;o++){for(var r=n.children[o],a=r,l=parseInt(a.getAttribute("colspan"),10)||1,d=parseInt(a.getAttribute("rowspan"),10)||1,h=i;h<i+d;h++)for(var c=s;c<s+l;c++)e[h]||(e[h]=[]),e[h][c]?s++:e[h][c]=r;s+=0}return e},e.prototype.FindIndex=function(e,t,i){var n,s;for(n=e+1,s=t+1;n<i.length;){if(i[n][t]!==i[e][t]){n--;break}n++}for(n===i.length&&n--;s<i[e].length;){if(i[e][s]!==i[e][t]){s--;break}s++}return s===i[e].length&&s--,[n,s]},e.prototype.getCorrespondingIndex=function(e,t){for(var i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++)if(t[i][n]===e)return[i,n];return[]},e.prototype.highlightCells=function(e,t,i,n,s){var o,r,a,l,d=e,h=t,c=i,p=n,u=new xe;for(o=d;o<=h;o++){for(((1<(parseInt(s[o][c].getAttribute("rowspan"),10)||1)||1<(parseInt(s[o][c].getAttribute("colspan"),10)||1))&&(l=this.FindIndex((a=this.getCorrespondingIndex(s[o][c],s))[0],a[1],s))||(1<(parseInt(s[o][p].getAttribute("rowspan"),10)||1)||1<(parseInt(s[o][p].getAttribute("colspan"),10)||1))&&(l=this.FindIndex((a=this.getCorrespondingIndex(s[o][p],s))[0],a[1],s)))&&(d=Math.min(a[0],d),h=Math.max(l[0],h),c=Math.min(a[1],c),p=Math.max(l[1],p)),r=c;r<=p;r++)((1<(parseInt(s[d][r].getAttribute("rowspan"),10)||1)||1<(parseInt(s[d][r].getAttribute("colspan"),10)||1))&&(l=this.FindIndex((a=this.getCorrespondingIndex(s[d][r],s))[0],a[1],s))||(1<(parseInt(s[h][r].getAttribute("rowspan"),10)||1)||1<(parseInt(s[h][r].getAttribute("colspan"),10)||1))&&(l=this.FindIndex((a=this.getCorrespondingIndex(s[h][r],s))[0],a[1],s)))&&(d=Math.min(a[0],d),h=Math.max(l[0],h),c=Math.min(a[1],c),p=Math.max(l[1],p));u=d===e&&h===t&&c===i&&p===n?{startRow:e,endRow:t,startColumn:i,endColumn:n}:this.highlightCells(d,h,c,p,s)}return u},e.prototype.tableMove=function(e){this.activeCell=e.selectNode[0];var t=e.event.target,i=this.activeCell.tagName,n=t.tagName;if(this.curTable=sf.base.closest(t,"table"),this.curTable.querySelectorAll(".e-cell-select").length>1&&this.parent.nodeSelection.Clear(this.parent.currentDocument),"TD"===t.tagName||"TH"===t.tagName||i===n){for(var s=Array.prototype.slice.call(this.activeCell.parentElement.parentElement.children).indexOf(this.activeCell.parentElement),o=Array.prototype.slice.call(this.activeCell.parentElement.children).indexOf(this.activeCell),r=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement),a=Array.prototype.slice.call(t.parentElement.children).indexOf(t),l=this.curTable.querySelectorAll(".e-cell-select"),d=l.length-1;d>=0;d--)this.activeCell!==l[d]&&l[d].classList.remove("e-cell-select");if(s!==r||o!==a){for(var h=this.getCorrespondingColumns(),c=this.getCorrespondingIndex(this.activeCell,h),p=this.getCorrespondingIndex(t,h),u=this.highlightCells(Math.min(c[0],p[0]),Math.max(c[0],p[0]),Math.min(c[1],p[1]),Math.max(c[1],p[1]),h),f=u.startRow;f<=u.endRow;f++)for(var m=u.startColumn;m<=u.endColumn;m++)h[f][m].classList.add("e-cell-select");this.parent.nodeSelection.range&&(this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,this.parent.nodeSelection.range.endContainer,0,0),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,0))}}},e}(),xe=function(){},Oe=function(){function e(){}return e.applyFormat=function(e,t,i,n,s,o){this.enterAction=n;if(["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase","fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1){"backgroundcolor"===t&&""===s&&(s="transparent");var r,a=new G,l=new he(i,e),d=new ue,h=new V,c=a.getRange(e),p=a.save(c,e),m=c.collapsed?a.getSelectionNodeCollection(c):a.getSelectionNodeCollectionBr(c),g=!1,v=!1,b=!1,y=["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1;if(c.collapsed){var w=h.getFormattedNode(c.startContainer,t,i),C=sf.base.isNullOrUndefined(w)?null:null===w.getAttribute("style")?w.nodeName:w.nodeName+"[style='"+w.getAttribute("style")+"']";if(m.length>0)g=!0,c=d.GetCursorRange(e,c,m[0]);else if(3===c.startContainer.nodeType&&(c.startContainer.parentElement.childElementCount>0&&c.startOffset>0&&"br"!==c.startContainer.parentElement.firstElementChild.tagName.toLowerCase()||!sf.base.isNullOrUndefined(w)&&w===c.startContainer.parentElement.closest(C)&&0!==c.startContainer.parentElement.closest(C).textContent.replace(new RegExp(String.fromCharCode(8203),"g"),"").trim().length))g=!0,c=d.GetCursorRange(e,c,c.startContainer),m.push(c.startContainer);else{var S=this.insertCursorNode(e,a,c,h,d,t,s,i);a.endContainer=a.startContainer=a.getNodeArray(S,!0);var E="BR"===S.nodeName&&S.parentNode.childNodes;sf.base.isNullOrUndefined(E)||1!==E.length||"BR"!==E[0].nodeName||0!==m.length?a.endOffset=a.startOffset=1:(a.setSelectionText(e,c.startContainer,c.endContainer,0,0),b=!0),"BR"===S.nodeName&&0===S.parentNode.textContent.length&&(b=!0)}}r=c.collapsed;for(var x=!1,O=0;O<m.length;O++){var T=h.getFormattedNode(m[O],t,i);null===T&&("subscript"===t?x=null!==(T=h.getFormattedNode(m[O],"superscript",i)):"superscript"===t&&(x=null!==(T=h.getFormattedNode(m[O],"subscript",i)))),0===O&&null===T&&(v=!0),m[O]=null===T||v&&!y?this.insertFormat(e,m,O,T,r,v,y,c,d,t,s):this.removeFormat(m,O,T,r,v,y,c,d,t,s,a,i,l),a=this.applySelection(m,a,d,O,g)}u()&&f(i,o),b||p.restore(),x&&this.applyFormat(e,t,i,n)}},e.insertCursorNode=function(e,t,i,n,s,o,r,a){var l=t.getNodeCollection(i),d=new he(a,e),h=l.length>0?l.length>1&&i.startContainer===i.endContainer?this.getCursorFormat(n,l,o,a):n.getFormattedNode(l[0],o,a):null,c=null;if(h){if(c=l[0],8203===h.firstChild.textContent.charCodeAt(0)&&3===h.firstChild.nodeType){var p=new RegExp(String.fromCharCode(8203),"g"),u=void 0;h.firstChild===c?(c.textContent=h.parentElement&&(d.isBlockNode(h.parentElement)&&h.parentElement.textContent.length<=1?h.parentElement.childElementCount>1:0===h.childElementCount)&&(h.parentElement.textContent.length>1||h.parentElement.firstChild&&1===h.parentElement.firstChild.nodeType)?c.textContent:c.textContent.replace(p,""),u=c):(h.firstChild.textContent=h.firstChild.textContent.replace(p,""),u=h.firstChild);var f=void 0;if(0===u.textContent.length)if(sf.base.isNullOrUndefined(u.previousSibling)){if(!sf.base.isNullOrUndefined(u.parentElement)&&0===u.parentElement.textContent.length){var m=document.createElement("BR");u.parentElement.appendChild(m),sf.base.detach(u),c=m,t.setCursorPoint(e,c.parentElement,0)}}else c=u.previousSibling,f=u.textContent.length-1,t.setCursorPoint(e,u,f)}["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(o)>-1?("fontcolor"===o?h.style.color=r:"fontname"===o?h.style.fontFamily=r:"fontsize"===o?h.style.fontSize=r:h.style.backgroundColor=r,c=h):pe.unwrap(h)}else l.length>1&&i.startOffset>0&&l[0].firstElementChild&&"br"===l[0].firstElementChild.tagName.toLowerCase()&&(l[0].innerHTML=""),1!==l.length||0!==i.startOffset||"BR"!==l[0].nodeName&&"BR"!==l[0].nextSibling.nodeName||sf.base.detach("#text"===l[0].nodeName?l[0].nextSibling:l[0]),c=this.getInsertNode(e,i,o,r).firstChild;return c},e.getCursorFormat=function(e,t,i,n){for(var s,o=0;o<t.length;o++)s=t[o].lastElementChild?t[o].lastElementChild:t[o];return e.getFormattedNode(s,i,n)},e.removeFormat=function(e,t,i,n,s,o,r,a,l,d,h,c,p){var u,f,m=null,g="#text"===r.startContainer.nodeName?r.startContainer.textContent.substring(r.startOffset,r.startContainer.textContent.length):r.startContainer.textContent;if(r.startContainer!==r.endContainer||0!==r.startOffset||r.endOffset!==r.startContainer.length){var v=[],b=e[t];do{v.push(h.getIndex(b)),b=b.parentNode}while(b&&b!==i);if("BR"!==e[t].nodeName&&(b=m=n&&i.textContent.length-1===r.startOffset?a.SplitNode(r,i,!0):a.GetSpliceNode(r,i)),n){for(var y=m;null!==y.firstChild&&3!==y.firstChild.nodeType;null)y=y.firstChild;y.innerHTML="&#8203;",e[t]=y.firstChild}else{for(;b&&b.childNodes.length>0&&v.length-1>=0&&b.childNodes.length>v[v.length-1];)b=b.childNodes[v[v.length-1]],v.pop();if("BR"!==e[t].nodeName)if(3!==b.nodeType||n&&""===b.nodeValue){var w=document.createElement("div");w.innerHTML="&#8203;",3!==b.nodeType?(b.insertBefore(w.firstChild,b.firstChild),e[t]=b.firstChild):(b.parentNode.insertBefore(w.firstChild,b),e[t]=b.previousSibling,b.parentNode.removeChild(b))}else e[t]=b}}if("backgroundcolor"===l&&(u=i.style.fontSize),"fontsize"===l){var C=sf.base.closest(e[t].parentElement,"span[style*=background-color]");sf.base.isNullOrUndefined(C)||(f=C.style.backgroundColor)}var S=i.getAttribute("style"),E=i.tagName,x=pe.unwrap(i);if(x[0]&&!o)for(var O=x[t]?x[t]:x[0],T=O;O&&O.parentElement&&O.parentElement!==c;O=O){var A=void 0;if(A="SPAN"===i.nodeName?O.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase()&&O.parentElement.getAttribute("style")===S:O.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase(),O.parentElement&&A&&(O.parentElement.childElementCount>1||r.startOffset>1)){if(T.parentElement&&T.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase()&&r.startOffset===r.endOffset&&1!==T.nodeType&&!sf.base.isNullOrUndefined(T.textContent)&&T.parentElement.childElementCount>1&&(r.setStart(T,0),r.setEnd(T,T.textContent.length),a.SplitNode(r,T.parentElement,!1)),"span"===O.parentElement.tagName.toLocaleLowerCase()&&"underline"===i.style.textDecoration&&"underline"!==O.parentElement.style.textDecoration){O=O.parentElement;continue}pe.unwrap(O.parentElement),O=sf.base.isNullOrUndefined(O.parentElement)||p.isBlockNode(O.parentElement)?O.parentElement:T}else O=O.parentElement}if(x.length>0&&o){for(var N=0;N<x.length;N++)(3!==x[N].nodeType||x[N].textContent&&x[N].textContent.trim().length>0)&&(x[N]=pe.Wrap(x[N],this.GetFormatNode(l,d,E,S)),x[N].textContent===g&&(0===N?r.setStartBefore(x[N]):N===x.length-1&&r.setEndAfter(x[N])));var k=e[t].parentElement;if(sf.base.isNullOrUndefined(u)||""===u||(k.style.fontSize=u),sf.base.isNullOrUndefined(f)||""===f||(k.style.backgroundColor=f),"backgroundcolor"===l&&!sf.base.isNullOrUndefined(u)&&""!==u&&k.parentElement.innerHTML===k.outerHTML){var I=k.parentElement;I.parentElement.insertBefore(k,I),sf.base.detach(I)}if("fontsize"===l||"fontcolor"===l){for(var M=e[t].parentElement,L=e[t].parentElement;!sf.base.isNullOrUndefined(L)&&"li"!==L.tagName.toLowerCase();)M=L=L.parentElement;sf.base.isNullOrUndefined(M)||"li"!==M.tagName.toLowerCase()||M.textContent.trim()!==e[t].textContent.trim()||("fontsize"===l?M.style.fontSize=d:(M.style.color=d,M.style.textDecoration="inherit"))}}return e[t]},e.insertFormat=function(e,t,i,n,s,o,r,a,l,d,h){if(s)if("uppercase"!==d&&"lowercase"!==d){c=this.getInsertNode(e,a,d,h);t[i]=c.firstChild,l.position=1}else l.position=a.startOffset;else if(null===n&&o||r){if("BR"!==t[i].nodeName&&(t[i]=l.GetSpliceNode(a,t[i]),t[i].textContent=l.TrimLineBreak(t[i].textContent)),"uppercase"===d||"lowercase"===d)t[i].textContent="uppercase"===d?t[i].textContent.toLocaleUpperCase():t[i].textContent.toLocaleLowerCase();else if(!0!==r||""!==h){var c=this.GetFormatNode(d,h);if("fontsize"===d||"fontcolor"===d){for(var p=t[i].parentElement,u=t[i].parentElement;!sf.base.isNullOrUndefined(u)&&"li"!==u.tagName.toLowerCase();)p=u=u.parentElement;if(sf.base.isNullOrUndefined(p)||"li"!==p.tagName.toLowerCase()||p.textContent.trim()!==t[i].textContent.trim()||("fontsize"===d?p.style.fontSize=h:(p.style.color=h,p.style.textDecoration="inherit")),t[i]=this.applyStyles(t,i,c),"fontsize"===d){var f=sf.base.closest(t[i].parentElement,"span[style*=background-color]");sf.base.isNullOrUndefined(f)||(t[i].parentElement.style.backgroundColor=f.style.backgroundColor)}}else t[i]=this.applyStyles(t,i,c)}}else t[i]=l.GetSpliceNode(a,t[i]);return t[i]},e.applyStyles=function(e,t,i){return"BR"===e[t].nodeName&&"BR"===this.enterAction||(e[t]=t===e.length-1||"BR"===e[t].nodeName?pe.Wrap(e[t],i):pe.WrapBefore(e[t],i,!0),e[t]=this.getChildNode(e[t],i)),e[t]},e.getInsertNode=function(e,t,i,n){var s=this.GetFormatNode(i,n);if(s.innerHTML="&#8203;",sf.base.Browser.isIE){var o=e.createDocumentFragment();o.appendChild(s),t.insertNode(o)}else t.insertNode(s);return s},e.getChildNode=function(e,t){return null==e&&(t.innerHTML="&#8203;",e=t.firstChild),e},e.applySelection=function(e,t,i,n,s){return 1!==e.length||s?1===e.length&&s?(t.startContainer=t.getNodeArray(e[n],!0),t.endContainer=t.startContainer,t.startOffset=i.position,t.endOffset=i.position):0===n?(t.startContainer=t.getNodeArray(e[n],!0),t.startOffset=0):n===e.length-1&&(t.endContainer=t.getNodeArray(e[n],!1),t.endOffset=e[n].textContent.length):(t.startContainer=t.getNodeArray(e[n],!0),t.endContainer=t.startContainer,t.startOffset=0,t.endOffset=e[n].textContent.length),t},e.GetFormatNode=function(e,t,i,n){var s;switch(e){case"bold":return document.createElement("strong");case"italic":return document.createElement("em");case"underline":return s=document.createElement("span"),this.updateStyles(s,i,n),s.style.textDecoration="underline",s;case"strikethrough":return s=document.createElement("span"),this.updateStyles(s,i,n),s.style.textDecoration="line-through",s;case"superscript":return document.createElement("sup");case"subscript":return document.createElement("sub");case"fontcolor":return s=document.createElement("span"),this.updateStyles(s,i,n),s.style.color=t,s.style.textDecoration="inherit",s;case"fontname":return s=document.createElement("span"),this.updateStyles(s,i,n),s.style.fontFamily=t,s;case"fontsize":return s=document.createElement("span"),this.updateStyles(s,i,n),s.style.fontSize=t,s;default:return s=document.createElement("span"),this.updateStyles(s,i,n),s.style.backgroundColor=t,s}},e.updateStyles=function(e,t,i){null!==i&&"SPAN"===t&&e.setAttribute("style",i)},e.enterAction="P",e}(),Te=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("selection-type",this.applySelection,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},e.prototype.keyDownHandler=function(e){e.event.ctrlKey&&["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase"].indexOf(e.event.action)>-1&&(e.event.preventDefault(),Oe.applyFormat(this.parent.currentDocument,e.event.action,this.parent.editableElement,e.enterAction),this.callBack(e,e.event.action))},e.prototype.applySelection=function(e){Oe.applyFormat(this.parent.currentDocument,e.subCommand.toLocaleLowerCase(),this.parent.editableElement,e.enterAction,e.value,e.selector),this.callBack(e,e.subCommand)},e.prototype.callBack=function(e,t){e.callBack&&e.callBack({requestType:t,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Ae=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("inserthtml-type",this.applyHtml,this)},e.prototype.applyHtml=function(e){if(me.Insert(this.parent.currentDocument,e.value,this.parent.editableElement,!0),"pasteCleanup"===e.subCommand){var t=this.parent.editableElement.querySelectorAll(".pasteContent_RTE"),i=[].slice.call(t),n=this.parent.editableElement.querySelectorAll(".pasteContent_Img"),s=[].slice.call(n);e.callBack({requestType:e.subCommand,editorMode:"HTML",elements:i,imgElem:s})}else e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Ne=function(){function e(){}return e.clear=function(e,t,i,n){this.domNode=new he(t,e),this.defaultTag="P"===i?this.defaultTag:"div";var s=new G,o=new ue,r=s.getRange(e),a=r.collapsed,l=s.getInsertNodeCollection(r),d=s.save(r,e);if(!a){var h=void 0;if(h="BR"===l[0].nodeName&&sf.base.closest(l[0],"table")?o.GetSpliceNode(r,sf.base.closest(l[0],"table")):o.GetSpliceNode(r,l[l.length>1&&"IMG"===l[0].nodeName?1:0]),1===l.length)s.setSelectionContents(e,h),r=s.getRange(e);else{for(var c=1,p=l[l.length-c];l.length<=c&&"BR"===l[l.length-c].nodeName;)c++,p=l[l.length-c];var m=o.GetSpliceNode(r,p);s.setSelectionText(e,h,m,0,3===m.nodeType?m.textContent.length:m.childNodes.length),r=s.getRange(e)}var g=s.getNodeCollection(r),v=g.slice();this.clearInlines(s.getSelectionNodes(v),v,s.getRange(e),o,t),this.reSelection(e,d,g),r=s.getRange(e);var b=(g=s.getNodeCollection(r)).slice();this.clearBlocks(e,b,t,o,s),u()&&f(t,n),this.reSelection(e,d,g)}},e.reSelection=function(e,t,i){var n=t.getInsertNodes(i);t.startContainer=t.getNodeArray(n[0],!0,e),t.startOffset=0,t.endContainer=t.getNodeArray(n[n.length-1],!1,e);var s=n[n.length-1];t.endOffset=3===s.nodeType?s.textContent.length:s.childNodes.length,t.restore()},e.clearBlocks=function(e,t,i,n,s){for(var o=[],r=0;r<t.length;r++)this.BLOCK_TAGS.indexOf(t[r].nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[r])?o.push(t[r]):this.BLOCK_TAGS.indexOf(t[r].parentNode.nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[r].parentNode)&&i!==t[r].parentNode&&o.push(t[r].parentNode);o=this.spliceParent(o,t)[0],o=this.removeParent(o),this.unWrap(e,o,n,s)},e.spliceParent=function(e,t){for(var i=0;i<e.length;i++)for(var n=e[i].childNodes.length,s=0;s<n;s++)if(t.indexOf(e[i].childNodes[s])>0&&e[i].childNodes[s].childNodes.length>0&&(t=this.spliceParent([e[i].childNodes[s]],t)[1]),t.indexOf(e[i].childNodes[s])<=-1&&""!==e[i].childNodes[s].textContent.trim()){for(var o=0;o<n;o++)t.indexOf(e[i].childNodes[o])>-1&&t.splice(t.indexOf(e[i].childNodes[o]),1);s=e[i].childNodes.length;var r=e.indexOf(e[i].parentNode),a=t.indexOf(e[i].parentNode);r>-1&&e.splice(r,1),a>-1&&t.splice(a,1);var l=t.indexOf(e[i]);l>-1&&t.splice(l,1),e.splice(i,1),i--}return[e,t]},e.removeChild=function(e,t){var i=t.childNodes.length;if(i>0)for(var n=0;n<i;n++)e.indexOf(t.childNodes[n])>-1&&(e=this.removeChild(e,t.childNodes[n])).splice(e.indexOf(t.childNodes[n]),1);return e},e.removeParent=function(e){for(var t=0;t<e.length;t++)e.indexOf(e[t].parentNode)>-1&&((e=this.removeChild(e,e[t])).splice(t,1),t--);return e},e.unWrap=function(e,t,i,n){for(var s=0;s<t.length;s++)if(this.NONVALID_TAGS.indexOf(t[s].nodeName.toLowerCase())>-1&&t[s].parentNode&&this.NONVALID_PARENT_TAGS.indexOf(t[s].parentNode.nodeName.toLowerCase())>-1&&(n.setSelectionText(e,t[s],t[s],0,t[s].childNodes.length),pe.unwrap(i.GetSpliceNode(n.getRange(e),t[s].parentNode))),"p"!==t[s].nodeName.toLocaleLowerCase()){!(this.NONVALID_PARENT_TAGS.indexOf(t[s].nodeName.toLowerCase())<0&&"p"!==t[s].parentNode.nodeName.toLocaleLowerCase())||("blockquote"===t[s].nodeName.toLocaleLowerCase()||"li"===t[s].nodeName.toLocaleLowerCase())&&this.IGNORE_PARENT_TAGS.indexOf(t[s].childNodes[0].nodeName.toLocaleLowerCase())>-1||1===t[s].childNodes.length&&"p"===t[s].childNodes[0].nodeName.toLocaleLowerCase()||pe.Wrap(t[s],e.createElement(this.defaultTag));var o=pe.unwrap(t[s]);1===o.length&&"p"===o[0].parentNode.nodeName.toLocaleLowerCase()&&(pe.Wrap(t[s],e.createElement(this.defaultTag)),pe.unwrap(t[s]));for(var r=0;r<o.length;r++)if(this.NONVALID_TAGS.indexOf(o[r].nodeName.toLowerCase())>-1)this.unWrap(e,[o[r]],i,n);else if(this.BLOCK_TAGS.indexOf(o[r].nodeName.toLocaleLowerCase())>-1&&"p"!==o[r].nodeName.toLocaleLowerCase()){var a=this.removeParent([o[r]]);this.unWrap(e,a,i,n)}else this.BLOCK_TAGS.indexOf(o[r].nodeName.toLocaleLowerCase())>-1&&o[r].parentNode.nodeName.toLocaleLowerCase()===o[r].nodeName.toLocaleLowerCase()?pe.unwrap(o[r]):this.BLOCK_TAGS.indexOf(o[r].nodeName.toLocaleLowerCase())>-1&&"p"===o[r].nodeName.toLocaleLowerCase()&&(pe.Wrap(o[r],e.createElement(this.defaultTag)),pe.unwrap(o[r]))}else pe.Wrap(t[s],e.createElement(this.defaultTag)),pe.unwrap(t[s])},e.clearInlines=function(e,t,i,n,s){for(var o=0;o<e.length;o++){for(var r=e[o],a=void 0;!this.domNode.isBlockNode(r)&&r.parentElement&&!r.parentElement.classList.contains("e-img-inner");)a=r,r=r.parentElement;a&&V.inlineTags.indexOf(a.nodeName.toLocaleLowerCase())>-1&&(n.GetSpliceNode(i,a),this.removeInlineParent(a))}},e.removeInlineParent=function(e){for(var t=pe.unwrap(e),i=0;i<t.length;i++)1===t[i].parentNode.childNodes.length&&!t[i].parentNode.classList.contains("e-img-inner")&&V.inlineTags.indexOf(t[i].parentNode.nodeName.toLocaleLowerCase())>-1?this.removeInlineParent(t[i].parentNode):V.inlineTags.indexOf(t[i].nodeName.toLocaleLowerCase())>-1&&this.removeInlineParent(t[i])},e.BLOCK_TAGS=["address","article","aside","blockquote","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","li","main","nav","noscript","ol","p","pre","section","ul"],e.NONVALID_PARENT_TAGS=["thead","tbody","ul","ol","table","tfoot","tr"],e.IGNORE_PARENT_TAGS=["ul","ol","table"],e.NONVALID_TAGS=["thead","tbody","figcaption","td","tr","th","tfoot","figcaption","li"],e.defaultTag="p",e}(),ke=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("clear-type",this.applyClear,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"clear-format":this.applyClear({subCommand:"ClearFormat",callBack:e.callBack,enterAction:e.enterAction}),e.event.preventDefault()}},e.prototype.applyClear=function(e){"ClearFormat"===e.subCommand&&(Ne.clear(this.parent.currentDocument,this.parent.editableElement,e.enterAction,e.selector),e.callBack&&e.callBack({requestType:e.subCommand,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)}))},e}(),Ie=function(){function e(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=sf.base.isNullOrUndefined(t)?30:t.undoRedoSteps,this.undoRedoTimer=sf.base.isNullOrUndefined(t)?300:t.undoRedoTimer,this.addEventListener()}return e.prototype.addEventListener=function(){var e=sf.base.debounce(this.keyUp,this.undoRedoTimer);this.parent.observer.on("keyup-handler",e,this),this.parent.observer.on("keydown-handler",this.keyDown,this),this.parent.observer.on("action",this.onAction,this),this.parent.observer.on("model_changed_plugin",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"undoRedoSteps":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=e.newProp.undoRedoTimer}}},e.prototype.removeEventListener=function(){this.parent.observer.off("keyup-handler",this.keyUp),this.parent.observer.off("keydown-handler",this.keyDown),this.parent.observer.off("action",this.onAction)},e.prototype.onAction=function(e){"Undo"===e.subCommand?this.undo(e):this.redo(e)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.keyDown=function(e){var t=e.event;switch(t.action){case"undo":t.preventDefault(),this.undo(e);break;case"redo":t.preventDefault(),this.redo(e)}},e.prototype.keyUp=function(e){17===e.event.keyCode||e.event.ctrlKey||this.saveData(e)},e.prototype.saveData=function(e){for(var t=(new G).getRange(this.parent.currentDocument),i=this.parent.editableElement===t.startContainer.parentElement?t.startContainer.parentElement:t.startContainer,n=i.childNodes.length-1;n>=0;n--)!sf.base.isNullOrUndefined(i.childNodes[n])&&"#text"===i.childNodes[n].nodeName&&0===i.childNodes[n].textContent.length&&"IMG"!==i.childNodes[n].nodeName&&"BR"!==i.childNodes[n].nodeName&&i.childNodes[n].nodeName&&sf.base.detach(i.childNodes[n]);t=(new G).getRange(this.parent.currentDocument);var s=(new G).save(t,this.parent.currentDocument),o={text:this.parent.editableElement.innerHTML,range:s};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.collapsed===t.collapsed&&this.undoRedoStack[this.undoRedoStack.length-1].range.startOffset===s.range.startOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.endOffset===s.range.endOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.startContainer===s.range.startContainer&&this.undoRedoStack[this.undoRedoStack.length-1].text.trim()===o.text.trim()||(this.undoRedoStack.push(o),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())},e.prototype.undo=function(e){if(this.steps>0){var t=this.undoRedoStack[this.steps-1].range,i=this.undoRedoStack[this.steps-1].text;this.parent.editableElement.innerHTML=i,this.parent.editableElement.focus(),u()&&f(this.parent.editableElement,e.selector),t.restore(),this.steps--,e.callBack&&e.callBack({requestType:"Undo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.redo=function(e){if(null!=this.undoRedoStack[this.steps+1]){var t=this.undoRedoStack[this.steps+1].range;this.parent.editableElement.innerHTML=this.undoRedoStack[this.steps+1].text,this.parent.editableElement.focus(),u()&&f(this.parent.editableElement,e.selector),t.restore(),this.steps++,e.callBack&&e.callBack({requestType:"Redo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.getUndoStatus=function(){var e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e},e}(),Me=function(){function e(e){this.olData=["decimal","lower-alpha","lower-roman","upper-alpha","upper-roman","lower-greek"],this.ulData=["disc","square","circle","disc","square","circle"],this.ignorableNodes=["A","APPLET","B","BLOCKQUOTE","BR","BUTTON","CENTER","CODE","COL","COLGROUP","DD","DEL","DFN","DIR","DIV","DL","DT","EM","FIELDSET","FONT","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HR","I","IMG","IFRAME","INPUT","INS","LABEL","LI","OL","OPTION","P","PARAM","PRE","Q","S","SELECT","SPAN","STRIKE","STRONG","SUB","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TITLE","TR","TT","U","UL"],this.blockNode=["div","p","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","table","tbody","td","tfoot","th","thead","tr","ul","header","article","nav","footer","section","aside","main","figure","figcaption"],this.borderStyle=["border-top","border-right","border-bottom","border-left"],this.removableElements=["o:p","style"],this.listContents=[],this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("ms_word_cleanup_plugin",this.wordCleanup,this)},e.prototype.wordCleanup=function(e){var t=sf.base.isNullOrUndefined(e.allowedStylePropertiesArray)?[]:e.allowedStylePropertiesArray,i=[],n=e.args.clipboardData.getData("text/HTML"),s=e.args.clipboardData.getData("text/rtf"),o=sf.base.createElement("p");o.setAttribute("id","MSWord-Content"),o.innerHTML=n;var r=/style='mso-width-source:/i;/class='?Mso|style='[^ ]*\bmso-/i.test(n)||/class="?Mso|style="[^ ]*\bmso-/i.test(n)||/(class="?Mso|class='?Mso|class="?Xl|class='?Xl|class=Xl|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument)/gi.test(n)||r.test(n)?(this.imageConversion(o,s),n=n.replace(/<img[^>]+>/i,""),this.addListClass(o),i=this.cleanUp(o,i),sf.base.isNullOrUndefined(i[0])||"UL"===i[0].parentElement.tagName||"OL"===i[0].parentElement.tagName||this.listConverter(i),this.styleCorrection(o,t),this.removingComments(o),this.removeUnwantedElements(o),this.removeEmptyElements(o),this.breakLineAddition(o),this.removeClassName(o),r.test(n)&&this.addTableBorderClass(o),e.callBack(o.innerHTML)):e.callBack(o.innerHTML)},e.prototype.addListClass=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)!sf.base.isNullOrUndefined(t[i].getAttribute("style"))&&t[i].getAttribute("style").replace(/ /g,"").replace("\n","").indexOf("mso-list:l")>=0&&-1===t[i].className.toLowerCase().indexOf("msolistparagraph")&&"H"!==t[i].tagName.charAt(0)&&t[i].classList.add("msolistparagraph")},e.prototype.addTableBorderClass=function(e){for(var t=e.querySelectorAll("table"),i=!1,n=0;n<t.length;n++){for(var s=0;s<this.borderStyle.length;s++)if(t[n].innerHTML.indexOf(this.borderStyle[s])>=0){i=!0;break}i&&(t[n].classList.add("e-rte-table-border"),i=!1)}},e.prototype.imageConversion=function(e,t){this.checkVShape(e);for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++)!sf.base.isNullOrUndefined(i[n].getAttribute("v:shapes"))&&i[n].getAttribute("v:shapes").indexOf("Picture")<0&&i[n].getAttribute("v:shapes").indexOf("Image")<0&&sf.base.detach(i[n]);i=e.querySelectorAll("img");var s=[],o=[],r=[],a=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(i.length>0){for(n=0;n<i.length;n++)s.push(i[n].getAttribute("src")),r.push(i[n].getAttribute("src").split("/")[i[n].getAttribute("src").split("/").length-1].split(".")[0]);var l=this.hexConversion(t);for(n=0;n<l.length;n++)o.push(this.convertToBase64(l[n]));for(n=0;n<i.length;n++)s[n].match(a)?i[n].setAttribute("src",s[n]):i[n].setAttribute("src",o[n]),i[n].setAttribute("id","msWordImg-"+r[n])}},e.prototype.checkVShape=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)switch(t[i].nodeName){case"V:SHAPETYPE":sf.base.detach(t[i]);break;case"V:SHAPE":if("V:IMAGEDATA"===t[i].firstElementChild.nodeName){var n=t[i].firstElementChild.getAttribute("src"),s=sf.base.createElement("img");s.setAttribute("src",n),t[i].parentElement.insertBefore(s,t[i]),sf.base.detach(t[i])}}},e.prototype.convertToBase64=function(e){var t=this.conHexStringToBytes(e.hex),i=this.conBytesToBase64(t);return e.type?"data:"+e.type+";base64,"+i:null},e.prototype.conBytesToBase64=function(e){for(var t="",i=e.length,n=0;n<i;n+=3){var s=e.slice(n,n+3),o=s.length,r=[];if(o<3)for(var a=o;a<3;a++)s[a]=0;r[0]=(252&s[0])>>2,r[1]=(3&s[0])<<4|s[1]>>4,r[2]=(15&s[1])<<2|(192&s[2])>>6,r[3]=63&s[2];for(a=0;a<4;a++)t+=a<=o?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r[a]):"="}return t},e.prototype.conHexStringToBytes=function(e){for(var t=[],i=e.length/2,n=0;n<i;n++)t.push(parseInt(e.substr(2*n,2),16));return t},e.prototype.hexConversion=function(e){var t,i=/\{\\pict[\s\S]+?\\bliptag\-?\d+(\\blipupi\-?\d+)?(\{\\\*\\blipuid\s?[\da-fA-F]+)?[\s\}]*?/,n=new RegExp("(?:("+i.source+"))([\\da-fA-F\\s]+)\\}","g"),s=e.match(n),o=[];if(!sf.base.isNullOrUndefined(s))for(var r=0;r<s.length;r++)if(i.test(s[r])){if(-1!==s[r].indexOf("\\pngblip"))t="image/png";else{if(-1===s[r].indexOf("\\jpegblip"))continue;t="image/jpeg"}o.push({hex:t?s[r].replace(i,"").replace(/[^\da-fA-F]/g,""):null,type:t})}return o},e.prototype.removeClassName=function(e){for(var t=e.querySelectorAll("*[class]"),i=0;i<t.length;i++)t[i].removeAttribute("class")},e.prototype.breakLineAddition=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)if(0===t[i].children.length&&"&nbsp;"===t[i].innerHTML&&"&nbsp;"===t[i].innerHTML&&!t[i].closest("li")&&!t[i].closest("td")){var n=this.findDetachElem(t[i]),s=sf.base.createElement("br");sf.base.isNullOrUndefined(n.parentElement)||(n.parentElement.insertBefore(s,n),sf.base.detach(n))}},e.prototype.findDetachElem=function(e){return!sf.base.isNullOrUndefined(e.parentElement)&&""===e.parentElement.textContent.trim()&&"TD"!==e.parentElement.tagName&&sf.base.isNullOrUndefined(e.parentElement.querySelector("img"))?this.findDetachElem(e.parentElement):e},e.prototype.removeUnwantedElements=function(e){for(var t=e.innerHTML,i=0;i<this.removableElements.length;i++){var n=new RegExp("<"+this.removableElements[i]+">","g"),s=new RegExp("</"+this.removableElements[i]+">","g");t=(t=t.replace(n,"")).replace(s,"")}e.innerHTML=t,e.querySelectorAll(":empty")},e.prototype.findDetachEmptyElem=function(e){return sf.base.isNullOrUndefined(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"MSWord-Content"!==e.parentElement.getAttribute("id")&&sf.base.isNullOrUndefined(e.parentElement.querySelector("img"))?this.findDetachEmptyElem(e.parentElement):e},e.prototype.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=0;i<t.length;i++)if(sf.base.isNullOrUndefined(t[i].closest("td"))||sf.base.isNullOrUndefined(t[i].closest("td").querySelector(".MsoNormal"))||(t[i].innerHTML="-"),"IMG"!==t[i].tagName&&"BR"!==t[i].tagName&&"IFRAME"!==t[i].tagName&&"TD"!==t[i].tagName&&"HR"!==t[i].tagName){var n=this.findDetachEmptyElem(t[i]);sf.base.isNullOrUndefined(n)||sf.base.detach(n)}},e.prototype.styleCorrection=function(e,t){var i=e.querySelectorAll("style");if(i.length>0){var n=i[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi),s=sf.base.isNullOrUndefined(n)?null:this.findStyleObject(n),o=Object.keys(s),r=o.map((function(e){return s[e]}));r=this.removeUnwantedStyle(r,t),this.filterStyles(e,t);for(var a=void 0,l=!1,d=0;d<o.length;d++){if(""===o[d].split(".")[0])a=e.getElementsByClassName(o[d].split(".")[1]),l=!0;else{if(1===o[d].split(".").length&&o[d].split(".")[0].indexOf("@")>=0)continue;a=1===o[d].split(".").length&&o[d].split(".")[0].indexOf("@")<0?e.getElementsByTagName(o[d]):e.querySelectorAll(o[d])}for(var h=0;h<a.length;h++){var c=a[h].getAttribute("style");if(sf.base.isNullOrUndefined(c)||""===c.trim())r[d]=r[d].replace(/text-indent:-(.*?)(?=;|$)/gm,""),a[h].setAttribute("style",r[d]);else{var p=r[d].split(";");if(!l)for(var u=0;u<p.length;u++)c.indexOf(p[u].split(":")[0])>=0&&(p.splice(u,1),u--);r[d]=p.join(";")+";";var f=c+r[d];a[h].setAttribute("style",f)}}l=!1}}},e.prototype.filterStyles=function(e,t){for(var i=e.querySelectorAll("*[style]"),n=0;n<i.length;n++){for(var s=i[n].getAttribute("style").split(";"),o="",r=0;r<s.length;r++)t.indexOf(s[r].split(":")[0].trim())>=0&&(o+=s[r]+";");i[n].setAttribute("style",o)}},e.prototype.removeUnwantedStyle=function(e,t){for(var i=0;i<e.length;i++){var n=e[i].split(";");e[i]="";for(var s=0;s<n.length;s++)t.indexOf(n[s].split(":")[0])>=0&&(e[i]+=n[s]+";")}return e},e.prototype.findStyleObject=function(e){for(var t={},i=0;i<e.length;i++){var n=e[i],s=n.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),o=n.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");s=s.replace(/^[\s]|[\s]$/gm,""),o=o.replace(/^[\s]|[\s]$/gm,""),s=s.replace(/\n|\r|\n\r/g,""),o=o.replace(/\n|\r|\n\r/g,"");for(var r=s.split(", "),a=0;a<r.length;a++)t[r[a]]=o}return t},e.prototype.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t},e.prototype.cleanUp=function(e,t){for(var i,n=[],s=e.querySelectorAll("*"),o=0;o<s.length;o++)-1===this.ignorableNodes.indexOf(s[o].nodeName)||3===s[o].nodeType&&""===s[o].textContent.trim()?n.push(s[o]):(s[o].className&&-1!==s[o].className.toLowerCase().indexOf("msolistparagraph")&&1!==s[o].childElementCount&&!sf.base.isNullOrUndefined(s[o].getAttribute("style"))&&s[o].getAttribute("style").indexOf("mso-list:")>=0&&(s[o].className.indexOf("MsoListParagraphCxSpFirst")>=0&&t.length>0&&null!==t[t.length-1]&&t.push(null),t.push(s[o])),!i||-1===this.blockNode.indexOf(s[o].nodeName.toLowerCase())||s[o].className&&-1!==s[o].className.toLowerCase().indexOf("msolistparagraph")&&!sf.base.isNullOrUndefined(s[o].getAttribute("style"))&&s[o].getAttribute("style").indexOf("mso-list:")>=0||t.push(null),-1!==this.blockNode.indexOf(s[o].nodeName.toLowerCase())&&(i=!!(s[o].className&&-1!==s[o].className.toLowerCase().indexOf("msolistparagraph")&&!sf.base.isNullOrUndefined(s[o].getAttribute("style"))&&s[o].getAttribute("style").indexOf("mso-list:")>=0)));return t.length&&null!==t[t.length-1]&&t.push(null),t},e.prototype.listConverter=function(e){for(var t,i,n=[],s=[],o="",r="",a=0;a<e.length;a++)if(null!==e[a]){e[a].getAttribute("style")&&-1!==e[a].getAttribute("style").indexOf("mso-outline-level")&&e[a].setAttribute("style",e[a].getAttribute("style").replace("mso-outline-level","mso-outline")),t=(o=e[a].getAttribute("style"))&&-1!==o.indexOf("level")?parseInt(o.charAt(o.indexOf("level")+5),null):1,this.listContents=[],this.getListContent(e[a]);var l=void 0,d=void 0;if(!sf.base.isNullOrUndefined(this.listContents[0])){l=this.listContents[0].trim().length>1?"ol":"ul",d=this.getlistStyleType(this.listContents[0],l);for(var h=[],c=1;c<this.listContents.length;c++)h.push(this.listContents[c]);var p=void 0;sf.base.isNullOrUndefined(e[a].className)||(p=e[a].className),sf.base.isNullOrUndefined(e[a].getAttribute("style"))||(e[a].setAttribute("style",e[a].getAttribute("style").replace("text-align:start;","")),""!==e[a].style.textAlign&&(e[a].setAttribute("style","text-align:"+e[a].style.textAlign),r=e[a].getAttribute("style"))),s.push({listType:l,content:h,nestedLevel:t,class:p,listStyle:r,listStyleTypeName:d})}}else n.push({content:this.makeConversion(s),node:e[a-1]}),s=[];for(i=e.shift();i;){for(var u=[],f=0;f<n.length;f++)if(n[f].node===i){for(var m=0;m<n[f].content.childNodes.length;m++)u.push(n[f].content.childNodes[m]);for(m=0;m<u.length;m++)i.parentElement.insertBefore(u[m],i);break}i.remove(),(i=e.shift())||(i=e.shift())}},e.prototype.getlistStyleType=function(e,t){var i;if("ol"===t)switch(e.split(".")[0]){case"A":i="upper-alpha";break;case"a":i="lower-alpha";break;case"I":i="upper-roman";break;case"i":i="lower-roman";break;case"α":i="lower-greek";break;default:i="decimal"}else switch(e.split(".")[0]){case"o":i="circle";break;case"§":i="square";break;default:i="disc"}return i},e.prototype.makeConversion=function(e){for(var t,i,n,s=sf.base.createElement("div"),o=1,r=0,a=0;a<e.length;a++){var l=sf.base.createElement("p");if(l.innerHTML=e[a].content.join(" "),1===e[a].nestedLevel&&0===r&&e[a].content)s.appendChild(t=sf.base.createElement(e[a].listType)),(i=sf.base.createElement("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyleType=e[a].listStyleTypeName;else if(e[a].nestedLevel===o)i.parentElement.tagName.toLowerCase()===e[a].listType?(i.parentElement.appendChild(i=sf.base.createElement("li")),i.appendChild(l)):((t=sf.base.createElement(e[a].listType)).style.listStyleType=e[a].listStyleTypeName,i.parentElement.parentElement.appendChild(t),(i=sf.base.createElement("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()));else if(e[a].nestedLevel>o)if(sf.base.isNullOrUndefined(i))s.appendChild(t=sf.base.createElement(e[a].listType)),(i=sf.base.createElement("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyleType=e[a].listStyleTypeName;else{for(var d=0;d<e[a].nestedLevel-o;d++)i.appendChild(t=sf.base.createElement(e[a].listType)),i=sf.base.createElement("li"),d!==e[a].nestedLevel-o-1&&e[a].nestedLevel-o>1&&(i.style.listStyleType="none"),t.appendChild(i);i.appendChild(l),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyleType=e[a].listStyleTypeName}else if(1===e[a].nestedLevel)s.lastChild.tagName.toLowerCase()===e[a].listType?t=s.lastChild:(s.appendChild(t=sf.base.createElement(e[a].listType)),t.style.listStyleType=e[a].listStyleTypeName),(i=sf.base.createElement("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString());else for(n=i;n.parentElement;)if((n=n.parentElement).attributes.getNamedItem("level")){if(parseInt(n.attributes.getNamedItem("level").textContent,null)===e[a].nestedLevel){(i=sf.base.createElement("li")).appendChild(l),n.appendChild(i);break}if(e[a].nestedLevel>parseInt(n.attributes.getNamedItem("level").textContent,null)){n.appendChild(t=sf.base.createElement(e[a].listType)),(i=sf.base.createElement("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyleType=e[a].listStyleTypeName;break}}i.setAttribute("class",e[a].class);var h=i.getAttribute("style");i.setAttribute("style",sf.base.isNullOrUndefined(h)?"":h),o=e[a].nestedLevel,r++}return s},e.prototype.getListContent=function(e){var t="",i=e.firstElementChild;if(""!==i.textContent.trim()||sf.base.isNullOrUndefined(i.firstElementChild)||"IMG"!==i.firstElementChild.nodeName){var n=["b","em"];if(i.childNodes.length>0&&(i.querySelectorAll("b").length>0||i.querySelectorAll("em").length>0))for(var s=0;s<i.childNodes.length;s++){var o=i.childNodes[s].nodeName.toLowerCase();i.childNodes[s].textContent.trim().length>1&&-1!==n.indexOf(o)?(t="<"+o+">"+i.childNodes[s].textContent+"</"+o+">",this.listContents.push(t)):1===i.childNodes[s].textContent.trim().length&&this.listContents.push(i.childNodes[s].textContent.trim())}else t=i.textContent.trim(),this.listContents.push(t)}else t=e.innerHTML.trim(),this.listContents.push(""),this.listContents.push(t);sf.base.detach(i),this.listContents.push(e.innerHTML)},e}(),Le=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("insert-text-type",this.insertText,this)},e.prototype.insertText=function(e){var t=document.createTextNode(e.value);me.Insert(this.parent.currentDocument,t,this.parent.editableElement),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Be=function(){function e(e){this.currentDocument=e.document,this.editableElement=e.editableElement,this.nodeSelection=new G,this.nodeCutter=new ue,this.domNode=new he(this.editableElement,this.currentDocument),this.observer=new sf.base.Observer(this),this.listObj=new ce(this),this.formatObj=new fe(this),this.alignmentObj=new ve(this),this.indentsObj=new be(this),this.linkObj=new ge(this),this.imgObj=new we(this),this.audioObj=new Ce(this),this.videoObj=new Se(this),this.selectionObj=new Te(this),this.inserthtmlObj=new Ae(this),this.insertTextObj=new Le(this),this.clearObj=new ke(this),this.tableObj=new Ee(this),this.undoRedoManager=new Ie(this,e.options),this.msWordPaste=new Me(this),this.wireEvents()}return e.prototype.wireEvents=function(){this.observer.on("keydown",this.editorKeyDown,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("model_changed",this.onPropertyChanged,this),this.observer.on("ms_word_cleanup",this.onWordPaste,this),this.observer.on("onBegin",this.onBegin,this)},e.prototype.onWordPaste=function(e){this.observer.notify("ms_word_cleanup_plugin",e)},e.prototype.onPropertyChanged=function(e){this.observer.notify("model_changed_plugin",e)},e.prototype.editorKeyDown=function(e){this.observer.notify("keydown-handler",e)},e.prototype.editorKeyUp=function(e){this.observer.notify("keyup-handler",e)},e.prototype.onBegin=function(e){this.observer.notify("actionBegin",e)},e.prototype.execCommand=function(e,t,i,n,s,o,r,a){switch(e.toLowerCase()){case"lists":this.observer.notify("list-type",{subCommand:t,event:i,callBack:n,selector:r,item:o,enterAction:a});break;case"formats":this.observer.notify("format-type",{subCommand:t,event:i,callBack:n,selector:r,exeValue:o,enterAction:a});break;case"alignments":this.observer.notify("alignment-type",{subCommand:t,event:i,callBack:n,selector:r,value:o});break;case"indents":this.observer.notify("indent-type",{subCommand:t,event:i,callBack:n,selector:r});break;case"links":this.observer.notify("INSERT-LINK",{command:e,value:t,item:o,event:i,callBack:n});break;case"files":this.observer.notify(j,{command:e,value:"Image",item:o,event:i,callBack:n,selector:r});break;case"images":this.observer.notify(j,{command:e,value:t,item:o,event:i,callBack:n,selector:r});break;case"audios":this.observer.notify("INSERT-AUDIO",{command:e,value:t,item:o,event:i,callBack:n,selector:r});break;case"videos":this.observer.notify("INSERT-VIDEO",{command:e,value:t,item:o,event:i,callBack:n,selector:r});break;case"table":switch(t.toString().toLocaleLowerCase()){case"createtable":this.observer.notify("INSERT-TABLE",{item:o,event:i,callBack:n,enterAction:a});break;case"insertrowbefore":case"insertrowafter":this.observer.notify("INSERT-ROW",{item:o,event:i,callBack:n});break;case"insertcolumnleft":case"insertcolumnright":this.observer.notify("INSERT-COLUMN",{item:o,event:i,callBack:n});break;case"deleterow":this.observer.notify("DELETE-ROW",{item:o,event:i,callBack:n});break;case"deletecolumn":this.observer.notify("DELETE-COLUMN",{item:o,event:i,callBack:n});break;case"tableremove":this.observer.notify("REMOVE-TABLE",{item:o,event:i,callBack:n});break;case"tableheader":this.observer.notify("TABLE-HEADER",{item:o,event:i,callBack:n});break;case"aligntop":case"alignmiddle":case"alignbottom":this.observer.notify("TABLE_VERTICAL_ALIGN",{item:o,event:i,callBack:n});break;case"merge":this.observer.notify("TABLE_MERGE",{item:o,event:i,callBack:n});break;case"horizontalsplit":this.observer.notify("TABLE_HORIZONTAL_SPLIT",{item:o,event:i,callBack:n});break;case"verticalsplit":this.observer.notify("TABLE_VERTICAL_SPLIT",{item:o,event:i,callBack:n})}break;case"font":case"style":case"effects":case"casing":this.observer.notify("selection-type",{subCommand:t,event:i,callBack:n,value:s,selector:r,enterAction:a});break;case"inserthtml":this.observer.notify("inserthtml-type",{subCommand:t,callBack:n,value:s});break;case"inserttext":this.observer.notify("insert-text-type",{subCommand:t,callBack:n,value:s});break;case"clear":this.observer.notify("clear-type",{subCommand:t,event:i,callBack:n,selector:r,enterAction:a});break;case"actions":this.observer.notify("action",{subCommand:t,event:i,callBack:n,selector:r})}},e}(),De=(B=function(e,t){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}B(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Pe=function(e){function t(t){var i=e.call(this)||this;return i.initialize(),sf.base.extend(i,i,t,!0),i.currentDocument&&i.element&&i.updateFormatter(i.element,i.currentDocument,t.options),i}return De(t,e),t.prototype.initialize=function(){this.keyConfig=se},t.prototype.updateFormatter=function(e,t,i){e&&t&&(this.editorManager=new Be({document:t,editableElement:e,options:i}))},t}(ee),Re=function(){function i(e){this.rangeCollection=[],this.isImageDelete=!1,this.parent=e,this.xhtmlValidation=new F(e),this.addEventListener()}return i.prototype.addEventListener=function(){this.nodeSelectionObj=new G,this.parent.observer.on("html-toolbar-click",this.onToolbarClick,this),this.parent.observer.on(s,this.onKeyDown,this),this.parent.observer.on(n,this.onKeyUp,this),this.parent.observer.on(e,this.render,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("selectAll",this.selectAll,this),this.parent.observer.on("selectRange",this.selectRange,this),this.parent.observer.on("getSelectedHtml",this.getSelectedHtml,this),this.parent.observer.on(o,this.onSelectionSave,this),this.parent.observer.on(r,this.onSelectionRestore,this),this.parent.observer.on("readOnlyMode",this.updateReadOnly,this),this.parent.observer.on(l,this.onPaste,this)},i.prototype.sanitizeHelper=function(e){return e=w(e,this.parent)},i.prototype.updateReadOnly=function(){this.parent.readonly?(sf.base.attributes(this.parent.getEditPanel(),{contenteditable:"false"}),sf.base.addClass([this.parent.element],"e-rte-readonly")):(sf.base.attributes(this.parent.getEditPanel(),{contenteditable:"true"}),sf.base.removeClass([this.parent.element],"e-rte-readonly"))},i.prototype.onSelectionSave=function(){var e=this.parent.getDocument(),t=this.nodeSelectionObj.getRange(e);this.saveSelection=this.nodeSelectionObj.save(t,e)},i.prototype.onSelectionRestore=function(e){this.parent.isBlur=!1,this.parent.getEditPanel().focus(),(sf.base.isNullOrUndefined(e.items)||e.items)&&this.saveSelection.restore()},i.prototype.onKeyUp=function(e){var t,i=e.args,n=this.parent.getRange(),s=new RegExp(String.fromCharCode(8203),"g");if([8,9,13,16,17,18,20,27,37,38,39,40,44,45,46,91,112,113,114,115,116,117,118,119,120,121,122,123].indexOf(i.keyCode)<0&&!i.shiftKey&&!i.ctrlKey&&!i.altKey){if(t=n.startOffset,"#text"===n.startContainer.nodeName?n.startContainer.parentElement.classList.add("currentStartMark"):n.startContainer.classList.add("currentStartMark"),8203===n.startContainer.textContent.charCodeAt(0)&&(t=0===n.startOffset?n.startOffset:n.startOffset-1,n.startContainer.textContent=n.startContainer.textContent.replace(s,""),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),n.startContainer,t)),this.parent.inputElement.innerHTML.length>this.parent.inputElement.innerHTML.replace(s,"").length){for(var o=this.parent.inputElement.firstChild;!sf.base.isNullOrUndefined(o)&&o.textContent.replace(s,"").trim().length>0;)o.innerHTML=o.innerHTML.replace(s,""),o=o.nextElementSibling;if(this.parent.inputElement.querySelector(".currentStartMark").childNodes.length>1)for(var r=this.parent.inputElement.querySelector(".currentStartMark").childNodes,a=0;a<r.length;a++)"#text"===r[a].nodeName&&0===r[a].textContent.length&&(sf.base.detach(r[a]),a--);this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),this.parent.inputElement.querySelector(".currentStartMark").childNodes[0],t)}var l=this.parent.inputElement.querySelector(".currentStartMark");sf.base.isNullOrUndefined(l)||(l.classList.remove("currentStartMark"),""===l.getAttribute("class").trim()&&l.removeAttribute("class")),!sf.base.isNullOrUndefined(n.startContainer.previousSibling)&&!sf.base.isNullOrUndefined(n.startContainer.previousSibling.parentElement)&&n.startContainer.parentElement===n.startContainer.previousSibling.parentElement&&8203===n.startContainer.previousSibling.textContent.charCodeAt(0)&&n.startContainer.previousSibling.textContent.length<=1&&(n.startContainer.previousSibling.textContent=n.startContainer.previousSibling.textContent.replace(s,"")),8203===n.endContainer.textContent.charCodeAt(n.endOffset)&&(t=n.startOffset,n.endContainer.textContent=n.endContainer.textContent.replace(s,""),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),n.startContainer,t))}},i.prototype.onKeyDown=function(e){var t,i=this,n=e.args;if("chrome"===sf.base.Browser.info.name&&(t=this.parent.getRange(),this.backSpaceCleanup(e,t),this.deleteCleanup(e,t)),9===n.keyCode&&sf.base.isNullOrUndefined(sf.base.closest(n.target,".e-rte-toolbar"))&&this.parent.enableTabKey){var s=this.nodeSelectionObj.getRange(this.parent.getDocument()),o=this.nodeSelectionObj.getParentNodeCollection(s);if("LI"!==o[0].nodeName&&!sf.base.closest(o[0],"li")&&!sf.base.closest(o[0],"table")||0!==s.startOffset)if(n.preventDefault(),n.shiftKey){if(this.rangeCollection.length>0&&4===this.rangeCollection[this.rangeCollection.length-1].startContainer.textContent.length){var r=this.rangeCollection[this.rangeCollection.length-1].startContainer;this.nodeSelectionObj.setSelectionText(this.parent.getDocument(),r,r,0,r.textContent.length),me.Insert(this.parent.getDocument(),document.createTextNode("")),this.rangeCollection.pop()}}else me.Insert(this.parent.getDocument(),"&nbsp;&nbsp;&nbsp;&nbsp;"),this.rangeCollection.push(this.nodeSelectionObj.getRange(this.parent.getDocument()))}if("space"===e.args.action){var a=this.parent.getRange(),l=a.startContainer.textContent.slice(0,a.startOffset),d=this.isOrderedList(l),h=this.isUnOrderedList(l);if(d&&!h||h&&!d){var c={callBack:null,event:e.args,name:"keydown-handler"};this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:d?"OL":"UL",cancel:!1}).then((function(e){e.cancel||(i.parent.formatter.editorManager.observer.notify("onBegin",c),i.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{editorMode:i.parent.editorMode,name:"ActionCompleteEvent",requestType:d?"OL":"UL"}))}))}}if("space"===e.args.action||"enter"===e.args.action||13===e.args.keyCode){var p=this.parent.getRange(),u="#text"===p.endContainer.nodeName?p.endContainer.parentElement:p.endContainer,f=sf.base.closest(u,"a");sf.base.isNullOrUndefined(f)&&this.spaceLink(n),"HTML"===this.parent.editorMode&&this.parent.observer.notify("enterHandler",{args:e.args})}"chrome"!==sf.base.Browser.info.name||(sf.base.isNullOrUndefined(this.rangeElement)||sf.base.isNullOrUndefined(this.oldRangeElement))&&(sf.base.isNullOrUndefined(this.deleteRangeElement)||sf.base.isNullOrUndefined(this.deleteOldRangeElement))||"TD"===t.startContainer.parentElement.tagName||"TH"===t.startContainer.parentElement.tagName||(this.rangeElement=null,this.oldRangeElement=null,this.deleteRangeElement=null,this.deleteOldRangeElement=null,this.isImageDelete||n.preventDefault(),n.preventDefault())},i.prototype.isOrderedList=function(e){e=e.replace(/\u200B/g,"");var t=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!sf.base.isNullOrUndefined(e))for(var i=0;i<t.length;i++)if(t[i].test(e))return!0;return!1},i.prototype.isUnOrderedList=function(e){e=e.replace(/\u200B/g,"");var t=[/^[*]$/,/^[-]$/];if(!sf.base.isNullOrUndefined(e))for(var i=0;i<t.length;i++)if(t[i].test(e))return!0;return!1},i.prototype.backSpaceCleanup=function(e,t){var i=!1;if("Backspace"===e.args.code&&8===e.args.keyCode&&0===t.startOffset&&0===t.endOffset&&0===this.parent.getSelection().length&&t.startContainer.textContent.length>0&&"TD"!==t.startContainer.parentElement.tagName&&"TH"!==t.startContainer.parentElement.tagName){if(this.rangeElement=this.getRootBlockNode(t.startContainer),"OL"===this.rangeElement.tagName||"UL"===this.rangeElement.tagName){var n=this.getRangeLiNode(t.startContainer);n.previousElementSibling&&n.previousElementSibling.childElementCount>0&&(this.oldRangeElement=n.previousElementSibling.lastElementChild,sf.base.isNullOrUndefined(n.lastElementChild)?this.rangeElement=n:(this.rangeElement=n.lastElementChild,i=!0))}else{if(this.rangeElement===this.parent.inputElement||"TABLE"===this.rangeElement.tagName||!sf.base.isNullOrUndefined(this.rangeElement.previousElementSibling)&&"TABLE"===this.rangeElement.previousElementSibling.tagName)return;this.oldRangeElement=this.rangeElement.previousElementSibling}if(sf.base.isNullOrUndefined(this.oldRangeElement))return;if("OL"!==this.oldRangeElement.tagName&&"UL"!==this.oldRangeElement.tagName||(this.oldRangeElement=this.oldRangeElement.lastElementChild.lastElementChild?this.oldRangeElement.lastElementChild.lastElementChild:this.oldRangeElement.lastElementChild),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),this.oldRangeElement,this.oldRangeElement.childNodes.length),this.oldRangeElement.querySelector("BR")&&sf.base.detach(this.oldRangeElement.querySelector("BR")),!sf.base.isNullOrUndefined(this.rangeElement)&&this.oldRangeElement!=this.rangeElement){for(;this.rangeElement.firstChild;)this.oldRangeElement.appendChild(this.rangeElement.childNodes[0]);i?sf.base.detach(this.rangeElement.parentElement):sf.base.detach(this.rangeElement),this.oldRangeElement.normalize()}}},i.prototype.deleteCleanup=function(e,t){var i,n,s=!1;if("Delete"===e.args.code&&46===e.args.keyCode&&0!==this.parent.getText().trim().length&&0===this.parent.getSelection().length&&"TD"!==t.startContainer.parentElement.tagName&&"TH"!==t.startContainer.parentElement.tagName){if(this.deleteRangeElement=n=this.getRootBlockNode(t.startContainer),"OL"===this.deleteRangeElement.tagName||"UL"===this.deleteRangeElement.tagName)(i=this.getRangeLiNode(t.startContainer)).nextElementSibling&&i.nextElementSibling.childElementCount>0&&!i.nextElementSibling.querySelector("BR")?sf.base.isNullOrUndefined(i.lastElementChild)?this.deleteRangeElement=i:(this.deleteRangeElement=i.lastElementChild,s=!0):this.deleteRangeElement=this.getRangeElement(i);else if(3===this.deleteRangeElement.nodeType||"TABLE"===this.deleteRangeElement.tagName||!sf.base.isNullOrUndefined(this.deleteRangeElement.nextElementSibling)&&"TABLE"===this.deleteRangeElement.nextElementSibling.tagName)return;if(this.getCaretIndex(t,this.deleteRangeElement)===this.deleteRangeElement.textContent.length){if(sf.base.isNullOrUndefined(i)?this.deleteOldRangeElement=this.deleteRangeElement.nextElementSibling:s||!sf.base.isNullOrUndefined(i.nextElementSibling)?this.deleteOldRangeElement=this.getRangeElement(i.nextElementSibling):this.deleteOldRangeElement=n.nextElementSibling,sf.base.isNullOrUndefined(this.deleteOldRangeElement))return;0===t.startOffset&&1===t.endOffset&&"IMG"===this.deleteRangeElement.childNodes[0].nodeName?(this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),this.deleteRangeElement,this.deleteRangeElement,0,1),this.isImageDelete=!0):(this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),this.deleteRangeElement,this.deleteRangeElement.childNodes.length),this.isImageDelete=!1),this.deleteRangeElement.querySelector("BR")&&sf.base.detach(this.deleteRangeElement.querySelector("BR"));var o="SPAN"!==this.deleteOldRangeElement.tagName&&"e-img-resize"===this.deleteRangeElement.className;if(!sf.base.isNullOrUndefined(this.deleteRangeElement)&&"OL"!==this.deleteOldRangeElement.tagName&&"UL"!==this.deleteOldRangeElement.tagName&&this.deleteOldRangeElement!==this.deleteRangeElement&&o&&"LI"!==this.deleteOldRangeElement.tagName&&this.deleteOldRangeElement!==this.deleteRangeElement){for(;this.deleteOldRangeElement.firstChild;)this.deleteRangeElement.appendChild(this.deleteOldRangeElement.childNodes[0]);s?sf.base.detach(this.deleteOldRangeElement.parentElement):sf.base.detach(this.deleteOldRangeElement),this.deleteRangeElement.normalize()}else this.deleteRangeElement=null,this.deleteOldRangeElement=null}else this.deleteRangeElement=null}},i.prototype.getCaretIndex=function(e,t){var i=0;if(0!==this.parent.getDocument().getSelection().rangeCount){var n=e.cloneRange();n.selectNodeContents(t),n.setEnd(e.endContainer,e.endOffset),i=n.toString().length}return i},i.prototype.getRangeElement=function(e){return e.lastElementChild?"BR"===e.lastElementChild.tagName?e.lastElementChild.previousElementSibling?e.lastElementChild.previousElementSibling:e:e.lastElementChild:e},i.prototype.getRootBlockNode=function(e){for(;e&&this.parent&&this.parent.inputElement!=e&&e.parentElement!==this.parent.inputElement;e=e)e=e.parentElement;return e},i.prototype.getRangeLiNode=function(e){for(var t=e.parentElement;t!=this.parent.inputElement&&(1!==t.nodeType||"LI"!==t.tagName);)t=t.parentElement;return t},i.prototype.onPaste=function(e){var t=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(e.text.match(t)){e.args.preventDefault();for(var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n=(this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),new RegExp(/([^\S]|^)(((https?\:\/\/)))/gi)),s=new RegExp(/([^\S]|^)(((www\.))(\S+))/gi),o=e.text.split("\n"),r="",a=0;a<o.length;a++)if(""===o[a].trim())r+=x(this.parent);else{for(var l="",d=!0,h=o[a].split(" "),c=0;c<h.length;c++)""===h[c].trim()?l+=d?"&nbsp;":" ":(d=!1,l+=h[c]+" ");r+=0===a?"<span>"+l.trim()+"</span>":"<p>"+l.trim()+"</p>"}var p=document.createElement("div");p.setAttribute("class","pasteContent"),p.style.display="inline",p.innerHTML=r;var u=p.querySelectorAll("span, p");for(a=0;a<u.length;a++){var f=u[a].innerHTML.split(" "),m="";for(c=0;c<f.length;c++)f[c].match(n)||f[c].match(s)?m+='<a className="e-rte-anchor" href="'+f[c]+'" title="'+f[c]+'">'+f[c]+" </a>":m+=f[c]+" ";u[a].innerHTML=m.trim()}e.callBack(p.innerHTML)}},i.prototype.spaceLink=function(e){var t=this.nodeSelectionObj.getRange(this.parent.getDocument()),i=this.nodeSelectionObj.getParentNodeCollection(t),n=t.startContainer.textContent.substr(0,t.endOffset),s=n.split(" "),o=s[s.length-1],r=t.startOffset-(n.length-s[s.length-1].length);o=o.slice(0,r);var a=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if("A"!==i[0].nodeName&&o.match(a)){var l=this.nodeSelectionObj.save(t,this.parent.getDocument()),d={url:o.indexOf("http")>-1?o:"http://"+o,selection:l,selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),text:o,title:"",target:"_blank"};this.parent.formatter.process(this.parent,{item:{command:"Links",subCommand:"CreateLink"}},e,d)}},i.prototype.onToolbarClick=function(e){var t,i,n,s=e.item,o=e.originalEvent.target,r=o&&sf.base.closest(o,".e-rte-quick-popup");if(r&&!r.classList.contains("e-rte-inline-popup")){if("SourceCode"!==s.subCommand&&"Preview"!==s.subCommand&&"FontColor"!==s.subCommand&&"BackgroundColor"!==s.subCommand){!u()||"Images"!==s.command&&"Audios"!==s.command&&"Videos"!==s.command||this.nodeSelectionObj.restore();var a=this.nodeSelectionObj.getRange(this.parent.getDocument());t=this.nodeSelectionObj.save(a,this.parent.getDocument()),i=this.nodeSelectionObj.getNodeCollection(a),n=this.nodeSelectionObj.getParentNodeCollection(a)}"Images"===s.command&&this.parent.observer.notify("image-toolbar-action",{member:"image",args:e,selectNode:i,selection:t,selectParent:n}),"Audios"===s.command&&this.parent.observer.notify("audio-toolbar-action",{member:"audio",args:e,selectNode:i,selection:t,selectParent:n}),"Videos"===s.command&&this.parent.observer.notify("video-toolbar-action",{member:"video",args:e,selectNode:i,selection:t,selectParent:n}),"Links"===s.command&&this.parent.observer.notify("link-toolbar-action",{member:"link",args:e,selectNode:i,selection:t,selectParent:n}),"Table"===s.command&&this.parent.observer.notify("table-toolbar-action",{member:"table",args:e,selectNode:i,selection:t,selectParent:n})}else{if("SourceCode"!==s.subCommand&&"Preview"!==s.subCommand&&"FontColor"!==s.subCommand&&"BackgroundColor"!==s.subCommand){a=this.nodeSelectionObj.getRange(this.parent.getDocument());t=this.nodeSelectionObj.save(a,this.parent.getDocument()),i=this.nodeSelectionObj.getNodeCollection(a),n=this.nodeSelectionObj.getParentNodeCollection(a)}switch(s.subCommand){case"Maximize":this.parent.observer.notify("enableFullScreen",{args:e});break;case"Minimize":this.parent.observer.notify("disableFullScreen",{args:e});break;case"CreateLink":this.parent.observer.notify("insertLink",{member:"link",args:e,selectNode:i,selection:t,selectParent:n});break;case"RemoveLink":this.parent.observer.notify("unLink",{member:"link",args:e,selectNode:i,selection:t,selectParent:n});break;case"Print":this.parent.print();break;case"Image":this.parent.observer.notify("insertImage",{member:"image",args:e,selectNode:i,selection:t,selectParent:n});break;case"Audio":this.parent.observer.notify("insertAudio",{member:"audio",args:e,selectNode:i,selection:t,selectParent:n});break;case"Video":this.parent.observer.notify("insertVideo",{member:"video",args:e,selectNode:i,selection:t,selectParent:n});break;case"CreateTable":this.parent.observer.notify("createTable",{member:"table",args:e,selection:t});break;case"SourceCode":this.parent.observer.notify("sourceCode",{member:"viewSource",args:e});break;case"Preview":this.parent.observer.notify("updateSource",{member:"updateSource",args:e});break;case"FontColor":case"BackgroundColor":break;default:this.parent.formatter.process(this.parent,e,e.originalEvent,null)}}},i.prototype.render=function(){var e=this.parent.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter=new Pe({currentDocument:this.parent.getDocument(),element:e,options:t}),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new J(this.parent)),this.parent.inlineMode.enable&&(sf.base.isNullOrUndefined(this.parent.fontFamily.default)||(e.style.fontFamily=this.parent.fontFamily.default),sf.base.isNullOrUndefined(this.parent.fontSize.default)||(e.style.fontSize=this.parent.fontSize.default)),this.parent.observer.notify("bind-on-end",{})},i.prototype.selectAll=function(){var e=function e(t,i){var n=[];for(i=i.firstChild;i;i=i.nextSibling)3===i.nodeType?n.push(i):n=n.concat(e(t,i));return n}(this.parent.getDocument(),this.parent.getEditPanel());e.length>0&&this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),e[0],e[e.length-1],0,e[e.length-1].textContent.length)},i.prototype.selectRange=function(e){this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),e.range)},i.prototype.getSelectedHtml=function(e){e.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()).toString())},i.prototype.removeEventListener=function(){this.parent.observer.off(e,this.render),this.parent.observer.off("html-toolbar-click",this.onToolbarClick),this.parent.observer.off(t,this.destroy),this.parent.observer.off(s,this.onKeyDown),this.parent.observer.off(n,this.onKeyUp),this.parent.observer.off("selectAll",this.selectAll),this.parent.observer.off("selectRange",this.selectRange),this.parent.observer.off("getSelectedHtml",this.getSelectedHtml),this.parent.observer.off(o,this.onSelectionSave),this.parent.observer.off(r,this.onSelectionRestore),this.parent.observer.off("readOnlyMode",this.updateReadOnly),this.parent.observer.off(l,this.onPaste)},i.prototype.destroy=function(){this.removeEventListener()},i}(),He=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.showFullScreen=function(e){var t=this;!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&this.parent.quickToolbarModule.hideQuickToolbars(),this.scrollableParent=sf.popups.getScrollableParent(this.parent.element),this.parent.actionBeginEnabled?this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"Maximize",cancel:!1}).then((function(e){e.cancel||t.showActionBeginCallback()})):this.showActionBeginCallback(),setTimeout((function(){t.parent.setContentHeight(),t.parent.inputElement.focus()}),100)},e.prototype.showActionBeginCallback=function(){this.toggleParentOverflow(!0),this.parent.setContentHeight(),this.invokeActionComplete("Maximize")},e.prototype.hideFullScreen=function(e){var t=this;!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&this.parent.quickToolbarModule.hideQuickToolbars();for(var i=document.querySelectorAll(".e-rte-overflow"),n=0;n<i.length;n++)sf.base.removeClass([i[n]],["e-rte-overflow"]);this.parent.actionBeginEnabled?this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"Minimize",cancel:!1}).then((function(e){e.cancel||t.hideActionBeginCallback()})):this.hideActionBeginCallback(),setTimeout((function(){t.parent.setContentHeight(),t.parent.inputElement.focus()}),100)},e.prototype.hideActionBeginCallback=function(){this.parent.setContentHeight(),this.invokeActionComplete("Minimize")},e.prototype.invokeActionComplete=function(e){this.parent.actionCompleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:e})},e.prototype.toggleParentOverflow=function(e){if(!sf.base.isNullOrUndefined(this.scrollableParent))for(var t=0;t<this.scrollableParent.length;t++)if("#document"===this.scrollableParent[t].nodeName){var i=document.querySelector("body");sf.base.addClass([i],["e-rte-overflow"])}else{i=this.scrollableParent[t];sf.base.addClass([i],["e-rte-overflow"])}},e.prototype.onKeyDown=function(e){var t=e.args;switch(t.action){case"full-screen":this.parent.dotNetRef.invokeMethodAsync("ShowFullScreenClient"),this.showFullScreen(e.args),t.preventDefault();break;case"escape":this.parent.dotNetRef.invokeMethodAsync("HideFullScreenClient"),this.hideFullScreen(e.args),t.preventDefault()}},e.prototype.addEventListener=function(){this.parent.observer.on("enableFullScreen",this.showFullScreen,this),this.parent.observer.on("disableFullScreen",this.hideFullScreen,this),this.parent.observer.on(s,this.onKeyDown,this),this.parent.observer.on(t,this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("enableFullScreen",this.showFullScreen),this.parent.observer.off("disableFullScreen",this.hideFullScreen),this.parent.observer.off(s,this.onKeyDown),this.parent.observer.off(t,this.destroy)},e.prototype.destroy=function(){this.parent.element.classList.contains("e-rte-full-screen")&&this.toggleParentOverflow(!1);for(var e=document.querySelectorAll(".e-rte-overflow"),t=0;t<e.length;t++)sf.base.removeClass([e[t]],["e-rte-overflow"]);this.removeEventListener()},e}(),ze=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("enterHandler",this.enterHandler,this),this.parent.observer.on(t,this.destroy,this)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.observer.off("enterHandler",this.enterHandler),this.parent.observer.off(t,this.destroy)},e.prototype.getRangeNode=function(){this.range=this.parent.getRange(),this.startNode="#text"===this.range.startContainer.nodeName?this.range.startContainer.parentElement:this.range.startContainer,this.endNode="#text"===this.range.endContainer.nodeName?this.range.endContainer.parentElement:this.range.endContainer},e.prototype.enterHandler=function(e){var t=this;this.getRangeNode();var i=!0;if(this.formatTags=["h1","h2","h3","h4","h5","h6","blockquote"],!sf.base.isNullOrUndefined(this.startNode.closest("TABLE"))&&!sf.base.isNullOrUndefined(this.endNode.closest("TABLE"))){i=!1;for(var n=this.startNode,s=n;!this.parent.formatter.editorManager.domNode.isBlockNode(n);)s=n,n=n.parentElement;i="TD"!==s.tagName&&"TBODY"!==s.tagName}if(13===e.args.which&&"Enter"===e.args.code&&sf.base.isNullOrUndefined(this.startNode.closest("LI"))&&sf.base.isNullOrUndefined(this.endNode.closest("LI"))&&i&&sf.base.isNullOrUndefined(this.startNode.closest("PRE"))&&sf.base.isNullOrUndefined(this.endNode.closest("PRE"))){var o={name:"actionBegin",requestType:e.args.shiftKey?"ShiftEnterAction":"EnterAction",originalEvent:e.args,cancel:!1};e.args.preventDefault(),this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",o).then((function(n){if(!n.cancel){var s=e.args.shiftKey;if(t.range.startOffset!==t.range.endOffset||t.range.startContainer!==t.range.endContainer)if(t.range.deleteContents(),"#text"===t.range.startContainer.nodeName&&0===t.range.startContainer.textContent.length&&t.range.startContainer.parentElement!==t.parent.inputElement)"BR"===t.parent.enterKey?t.range.startContainer.parentElement.innerHTML="&#8203;":t.range.startContainer.parentElement.innerHTML="<br>";else if(t.range.startContainer===t.parent.inputElement&&""===t.range.startContainer.innerHTML){t.range.startContainer.innerHTML="<br>";var o=t.range.startContainer.childNodes[t.range.startOffset];t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),o,0)}else if(t.parent.inputElement===t.range.startContainer){if("#text"===(o=t.range.startContainer.childNodes[t.range.startOffset]).nodeName&&0===o.textContent.length)t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),o,0===o.textContent.length?0:o.previousSibling.textContent.length);else if(t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),o,o.textContent.length>=0?0:1),0===o.previousSibling.textContent.length){if(sf.base.detach(o.previousSibling),!s){for(var r=sf.base.isNullOrUndefined(o.lastChild)?o:o.lastChild;!sf.base.isNullOrUndefined(r)&&"#text"!==r.nodeName&&"BR"!==r.nodeName;)r=r.lastChild;"BR"!=r.nodeName&&0===r.parentElement.textContent.length&&0===r.parentElement.innerHTML.length&&"BR"!=r.parentElement.nodeName&&r.parentElement.appendChild(sf.base.createElement("BR")),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),"BR"===r.nodeName?r:r.parentElement,r.parentElement.textContent.length>=0||"BR"===r.nodeName?0:1)}}else if(0===o.textContent.length){for(r="#text"===o.previousSibling.nodeName?o.previousSibling:o.previousSibling.lastChild;!sf.base.isNullOrUndefined(r)&&"#text"!==r.nodeName;)r=r.lastChild;t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),r,r.textContent.length),sf.base.detach(o)}else if("BR"!==t.parent.enterKey&&0!==o.previousSibling.textContent.length&&0!==o.textContent.length)return void e.args.preventDefault();t.getRangeNode()}if(t.range.startContainer===t.range.endContainer&&t.range.startOffset===t.range.endOffset&&t.range.startContainer===t.parent.inputElement&&(sf.base.isNullOrUndefined(t.range.startContainer.childNodes[t.range.startOffset])||sf.base.isNullOrUndefined(t.range.startContainer.childNodes[t.range.startOffset].previousElementSibling)||"TABLE"!==t.range.startContainer.childNodes[t.range.startOffset].previousElementSibling.nodeName||t.parent.tableModule.removeResizeEle(),1===t.parent.inputElement.childNodes.length&&"TABLE"===t.parent.inputElement.childNodes[0].nodeName||t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),t.range.startContainer.childNodes[t.range.startOffset],0),t.getRangeNode()),"P"===t.parent.enterKey&&!s||"DIV"===t.parent.enterKey&&!s||"P"===t.parent.shiftEnterKey&&s||"DIV"===t.parent.shiftEnterKey&&s){if(1===t.range.startOffset&&1===t.parent.inputElement.childNodes.length&&"TABLE"===t.parent.inputElement.childNodes[0].nodeName){(p=t.createInsertElement(s)).appendChild(sf.base.createElement("BR")),t.parent.inputElement.appendChild(p),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),p,0)}else{var a=void 0;a=i&&t.parent.formatter.editorManager.domNode.isBlockNode(t.startNode)?t.startNode:t.parent.formatter.editorManager.domNode.blockParentNode(t.startNode);var l=!1,d=!1;if(0==t.range.startOffset||0==t.range.endOffset||t.range.startContainer!==t.range.endContainer||!sf.base.isNullOrUndefined(a.childNodes[0])&&"IMG"===a.childNodes[0].nodeName)0===t.range.startOffset&&0===t.range.endOffset&&(d=!0);else{var h=t.range.startContainer.textContent.substring(0,t.range.startOffset);160!=h.charCodeAt(t.range.startOffset-1)&&0===h.trim().length&&(d=!0)}if(t.removeBRElement(a),!(-1!=sf.base.Browser.userAgent.indexOf("Firefox")&&0===t.range.startOffset&&t.range.startContainer===t.range.endContainer&&"#text"===t.range.startContainer.nodeName&&!t.parent.formatter.editorManager.domNode.isBlockNode(t.range.startContainer.previousSibling)&&t.range.startContainer.parentElement===t.range.startContainer.previousSibling.parentElement)&&(0===t.range.startOffset&&0===t.range.endOffset||d)&&(sf.base.isNullOrUndefined(t.range.startContainer.previousSibling)||"IMG"!==t.range.startContainer.previousSibling.nodeName&&"BR"!==t.range.startContainer.previousSibling.nodeName)){var c=void 0,p=void 0;"IMG"===t.range.startContainer.nodeName||"TABLE"===t.range.startContainer.nodeName?(p=t.createInsertElement(s),l=!0,c=!1):0!==a.textContent.trim().length||"IMG"===a.childNodes[0].nodeName?(t.range.startOffset===t.range.endOffset&&0!=t.range.startOffset?p=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,a,!1).cloneNode(!0):(p=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,a,!0).cloneNode(!0),l=!0),c=!1):(p=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,a,!0).cloneNode(!0),c=!0);var u=void 0;for(u=t.formatTags.indexOf(p.nodeName.toLocaleLowerCase())<0?t.createInsertElement(s):sf.base.createElement(p.nodeName);p.firstChild;)u.appendChild(p.firstChild);if(a.parentElement.insertBefore(u,a),!c){r=u;for(var f=void 0;!sf.base.isNullOrUndefined(r)&&"#text"!==r.nodeName;)f=r,r=r.lastChild;f.innerHTML="<br>",l||sf.base.detach(a)}t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),u.nextElementSibling,0)}else if(0!==a.textContent.length||!sf.base.isNullOrUndefined(a.childNodes[0])&&"IMG"===a.childNodes[0].nodeName){p=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,a,!0);if(sf.base.isNullOrUndefined(p.childNodes[0])||"#text"!==p.childNodes[0].nodeName||0!==p.childNodes[0].textContent.length||sf.base.detach(p.childNodes[0]),0===p.textContent.trim().length){var m=sf.base.createElement("br");if("A"===t.startNode.nodeName){var g=t.startNode.parentElement;t.startNode.parentElement.insertBefore(m,t.startNode),sf.base.detach(t.startNode),t.startNode=g}else"BR"!=t.startNode.nodeName&&t.startNode.appendChild(m);"\n"===p.childNodes[0].textContent&&sf.base.detach(p.childNodes[0]),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),t.startNode,0)}if(("P"===t.parent.enterKey||"DIV"===t.parent.enterKey)&&!s||("DIV"===t.parent.shiftEnterKey||"P"===t.parent.shiftEnterKey)&&s){var v=t.formatTags.indexOf(p.nodeName.toLocaleLowerCase());if(v<0||v>=0&&0===p.textContent.trim().length){for(var b=t.createInsertElement(s);p.firstChild;)b.appendChild(p.firstChild);t.parent.formatter.editorManager.domNode.insertAfter(b,p),sf.base.detach(p),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),t.parent.formatter.editorManager.domNode.isBlockNode(t.startNode)?b:t.startNode,0)}}}else if(sf.base.isNullOrUndefined(a.children[0])||"BR"===a.children[0].tagName){(u=t.createInsertElement(s)).innerHTML="<br>",t.parent.formatter.editorManager.domNode.insertAfter(u,a),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),u,0)}else{var p=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,a,!1).cloneNode(!0);t.parent.formatter.editorManager.domNode.insertAfter(p,a),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),p,p.textContent.length>=0?0:1)}}e.args.preventDefault()}if("BR"===t.parent.enterKey&&!s||"BR"===t.parent.shiftEnterKey&&s){var y=void 0;if(t.parent.formatter.editorManager.domNode.isBlockNode(t.startNode))y=t.startNode;else{for(var w=t.startNode,C=w;!t.parent.formatter.editorManager.domNode.isBlockNode(w);)C=w,w=w.parentElement;y=w===t.parent.inputElement?C:w}t.removeBRElement(y);for(var S=y.lastChild;!sf.base.isNullOrUndefined(S)&&"#text"!==S.nodeName&&"BR"!==S.nodeName;)S=S.lastChild;var E=t.range.startContainer===S?t.range.startContainer.textContent.length:y.textContent.length;if(y!==t.parent.inputElement&&t.parent.formatter.editorManager.domNode.isBlockNode(y)&&t.range.startOffset===t.range.endOffset&&t.range.startOffset===E){var x=sf.base.createElement("br");if(0===t.range.startOffset&&"TABLE"===t.range.startContainer.nodeName)t.range.startContainer.parentElement.insertBefore(x,t.range.startContainer);else if("BR"===S.nodeName&&0===y.textContent.length)t.parent.formatter.editorManager.domNode.insertAfter(x,S);else{var O=sf.base.createElement("br");t.parent.formatter.editorManager.domNode.insertAfter(x,t.range.startContainer),t.parent.formatter.editorManager.domNode.insertAfter(O,t.range.startContainer)}t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),x,0)}else if(sf.base.isNullOrUndefined(y)||y===t.parent.inputElement||"BR"===y.nodeName)t.insertBRElement();else if(0===y.textContent.trim().length||1===y.textContent.trim().length&&8203===y.textContent.charCodeAt(0)){p=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,y,!0).cloneNode(!0);t.parent.formatter.editorManager.domNode.insertAfter(p,y);var T=sf.base.createElement("br");p.parentElement.insertBefore(T,p),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),p,0)}else{p=void 0,T=sf.base.createElement("br");if(0!==t.range.startOffset||0!==t.range.endOffset||sf.base.isNullOrUndefined(y.previousSibling)||"BR"!==y.previousSibling.nodeName)t.insertBRElement();else{p=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,y,!1).cloneNode(!0),t.parent.formatter.editorManager.domNode.insertAfter(T,y),t.insertFocusContent();for(r=T.nextSibling;!sf.base.isNullOrUndefined(r)&&"#text"!==r.nodeName;)r=r.lastChild;t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),r,0)}}e.args.preventDefault()}var A={name:"actionComplete",requestType:s?"ShiftEnterAction":"EnterAction",event:e.args};t.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",A)}}))}},e.prototype.removeBRElement=function(e){-1!=sf.base.Browser.userAgent.indexOf("Firefox")&&this.range.endOffset===e.textContent.length&&"BR"===e.lastChild.nodeName&&sf.base.detach(e.lastChild)},e.prototype.insertBRElement=function(){var e=!1,t=!0;0==this.range.endContainer.textContent.length&&"BR"===this.range.startContainer.nodeName&&(t=!1);var i=sf.base.createElement("br");if("BR"===this.startNode.nodeName&&"BR"===this.endNode.nodeName&&0===this.range.startOffset&&this.range.startOffset===this.range.endOffset?(this.parent.formatter.editorManager.domNode.insertAfter(i,this.startNode),e=!0):(this.startNode!==this.parent.inputElement||sf.base.isNullOrUndefined(this.range.startContainer.previousSibling)||"BR"!==this.range.startContainer.previousSibling.nodeName||0!==this.range.startContainer.textContent.length||(e=!0),this.range.insertNode(i)),e||!sf.base.isNullOrUndefined(i.nextElementSibling)&&"BR"===i.nextElementSibling.tagName||!sf.base.isNullOrUndefined(i.nextSibling)&&i.nextSibling.textContent.length>0)this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),!sf.base.isNullOrUndefined(i.nextSibling)&&t?i.nextSibling:i,0),e=!1;else{var n=sf.base.createElement("br");this.range.insertNode(n),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),i,0)}},e.prototype.insertFocusContent=function(){0===this.range.startContainer.textContent.length&&("#text"===this.range.startContainer.nodeName?this.range.startContainer.parentElement.innerHTML="&#8203;":this.range.startContainer.innerHTML="&#8203;")},e.prototype.createInsertElement=function(e){var t;return"DIV"===this.parent.enterKey&&!e||"DIV"===this.parent.shiftEnterKey&&e?t=sf.base.createElement("div"):("P"===this.parent.enterKey&&!e||"P"===this.parent.shiftEnterKey&&e)&&(t=sf.base.createElement("p")),t},e}(),Ue={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222,"]":221,"[":219,"=":187},qe=function(){function e(t,i){var n=this;this.keyPressHandler=function(t){for(var i=t.altKey,s=t.ctrlKey,o=t.shiftKey,r=t.metaKey,a=t.which,l=0,d=Object.keys(n.keyConfigs);l<d.length;l++)for(var h=d[l],c=0,p=n.keyConfigs[h].split(",");c<p.length;c++){var u=p[c],f=e.getKeyConfigData(u.trim());i!==f.altKey||s!==f.ctrlKey&&!r||o!==f.shiftKey||a!==f.keyCode||(t.action=h)}n.keyAction&&n.keyAction(t)},this.element=t,sf.base.extend(this,this,i),this.onKeyPressHandler=this.keyPressHandler.bind(this),this.bind()}return e.prototype.destroy=function(){this.unWireEvents()},e.prototype.bind=function(){this.wireEvents()},e.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.onKeyPressHandler)},e.prototype.unWireEvents=function(){this.element.removeEventListener(this.eventName,this.onKeyPressHandler)},e.getKeyConfigData=function(t){if(t in this.configCache)return this.configCache[t];var i=t.toLowerCase().split("+"),n={altKey:-1!==i.indexOf("alt"),ctrlKey:-1!==i.indexOf("ctrl"),shiftKey:-1!==i.indexOf("shift"),keyCode:null};return i[i.length-1].length>1&&Number(i[i.length-1])?n.keyCode=Number(i[i.length-1]):n.keyCode=e.getKeyCode(i[i.length-1]),e.configCache[t]=n,n},e.getKeyCode=function(e){return Ue[e]||e.toUpperCase().charCodeAt(0)},e.configCache={},e}(),_e=function(){function i(e){this.parent=e,this.addEventListener()}return i.prototype.addEventListener=function(){this.parent.observer.on("sourceCode",this.sourceCode,this),this.parent.observer.on(e,this.onInitialEnd,this),this.parent.observer.on("updateSource",this.updateSourceCode,this),this.parent.observer.on(t,this.destroy,this)},i.prototype.onInitialEnd=function(){this.parent.formatter.editorManager.observer.on("keydown-handler",this.onKeyDown,this)},i.prototype.removeEventListener=function(){this.unWireEvent(),this.parent.observer.off("sourceCode",this.sourceCode),this.parent.observer.off("updateSource",this.updateSourceCode),this.parent.observer.off(e,this.onInitialEnd),this.parent.observer.off(t,this.destroy),this.parent.formatter.editorManager.observer.off("keydown-handler",this.onKeyDown)},i.prototype.getSourceCode=function(){return sf.base.createElement("textarea",{className:"e-rte-srctextarea",attrs:{"aria-labelledby":this.parent.element.id+"_rte-edit-view"}})},i.prototype.wireEvent=function(e){this.keyboardModule=new qe(e,{keyAction:this.previewKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}),sf.base.EventHandler.add(this.previewElement,"mousedown",this.mouseDownHandler,this)},i.prototype.unWireEvent=function(){this.keyboardModule&&this.keyboardModule.destroy(),this.previewElement&&sf.base.EventHandler.remove(this.previewElement,"mousedown",this.mouseDownHandler)},i.prototype.wireBaseKeyDown=function(){this.keyboardModule=new qe(this.parent.getEditPanel(),{keyAction:this.parent.keyDown.bind(this.parent),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"})},i.prototype.unWireBaseKeyDown=function(){this.parent.keyboardModule.destroy()},i.prototype.mouseDownHandler=function(e){this.parent.observer.notify("sourceCodeMouseDown",{args:e})},i.prototype.previewKeyDown=function(e){switch(e.action){case"html-source":this.parent.dotNetRef.invokeMethodAsync("PreviewCodeClient"),this.updateSourceCode(e),e.preventDefault();break;case"toolbar-focus":if(this.parent.toolbarSettings.enable){this.parent.getToolbar().querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus()}}},i.prototype.onKeyDown=function(e){switch(e.event.action){case"html-source":e.event.preventDefault(),this.parent.dotNetRef.invokeMethodAsync("ViewSourceClient"),this.sourceCode(e),e.callBack({requestType:"SourceCode",editorMode:"HTML",event:e.event})}},i.prototype.sourceCode=function(e){var t=this;this.parent.isBlur=!1,this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"SourceCode",cancel:!1}).then((function(e){if(!e.cancel){var i=sf.base.selectAll(".e-toolbar-item",t.parent.element);if(sf.base.isNullOrUndefined(t.previewElement)&&(t.previewElement=t.getSourceCode()),t.parent.updateValueData(),t.parent.iframeSettings.enable){var n=void 0;(n=sf.base.isNullOrUndefined(t.parent.element.querySelector("#"+t.parent.element.id+"_source-view"))?sf.base.createElement("div",{className:"e-source-content",id:t.parent.element.id+"_source-view"}):t.parent.element.querySelector("#"+t.parent.element.id+"_source-view")).appendChild(t.previewElement),t.parent.element.appendChild(n),n.style.height=t.parent.getPanel().style.height,n.style.marginTop=t.parent.getPanel().style.marginTop,t.getPanel().value=t.getTextAreaValue(t.parent.getEditPanel()),t.parent.getPanel().style.display="none",n.style.display="block",t.getPanel().style.display="block"}else t.parent.inputElement.parentElement.appendChild(t.previewElement),t.getPanel().value=t.getTextAreaValue(t.parent.getEditPanel()),t.previewElement.style.height=t.parent.inputElement.offsetHeight+"px",t.parent.inputElement.style.display="none",t.previewElement.style.display="block";if(t.parent.isBlur=!1,t.parent.getToolbar()&&sf.base.removeClass([t.parent.getToolbar()],["e-expand-open"]),sf.base.removeClass(i,["e-active"]),t.parent.setContentHeight("sourceCode",!0),t.wireEvent(t.previewElement),t.unWireBaseKeyDown(),t.previewElement.focus(),!sf.base.isNullOrUndefined(t.parent.placeholder)&&!t.parent.iframeSettings.enable)t.parent.element.querySelector(".rte-placeholder").style.display="none";t.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:"SourceCode"}).then((function(e){t.parent.invokeChangeEvent()}))}}))},i.prototype.updateSourceCode=function(e){var t=this;this.parent.isBlur=!1,this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"Preview",cancel:!1}).then((function(e){if(!e.cancel){var i=t.getPanel(),n=t.parent.serializeValue(i.value),s=void 0;if(s=null===n||""===n?"DIV"===t.parent.enterKey?"<div><br/></div>":"BR"===t.parent.enterKey?"<br/>":"<p><br/></p>":n,t.parent.iframeSettings.enable?(i.parentElement.style.display="none",i.style.display="none",t.parent.contentPanel.style.display="block",t.parent.getEditPanel().innerHTML=t.parent.enableHtmlEncode?T(s):s):(i.style.display="none",t.parent.getEditPanel().style.display="block",t.parent.getEditPanel().innerHTML=t.parent.enableHtmlEncode?T(s):s),t.parent.isBlur=!1,t.parent.getToolbar()&&sf.base.removeClass([t.parent.getToolbar()],["e-expand-open"]),t.parent.setContentHeight("preview",!0),t.wireBaseKeyDown(),t.unWireEvent(),t.parent.getEditPanel().focus(),t.parent.updateValueData(),!sf.base.isNullOrUndefined(t.parent.placeholder)&&0===t.parent.getEditPanel().innerText.length)t.parent.element.querySelector(".rte-placeholder").style.display="block";t.parent.addAudioVideoWrapper(),t.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:"Preview"}).then((function(e){t.parent.invokeChangeEvent()}))}}))},i.prototype.getTextAreaValue=function(e){var t;return t=this.parent.enableXhtml?this.parent.getXhtmlString(this.parent.value):this.parent.value,"<p><br></p>"===e.innerHTML||"<div><br></div>"===e.innerHTML||"<br>"===e.innerHTML||1===e.childNodes.length&&("P"===e.childNodes[0].tagName&&7===e.innerHTML.length||"DIV"===e.childNodes[0].tagName&&11===e.innerHTML.length)?"":t},i.prototype.getPanel=function(){return this.parent.element.querySelector(".e-rte-srctextarea")},i.prototype.getViewPanel=function(){return this.parent.iframeSettings.enable&&this.getPanel()?this.getPanel().parentElement:this.getPanel()},i.prototype.destroy=function(){this.removeEventListener()},i}(),Fe=function(){function e(e){this.parent=e}return e.prototype.quickToolbarOpen=function(){this.parent.dotNetRef.invokeMethodAsync("QuickToolbarOpenEvent",this.popupObj.element.classList.toString(),this.targetType)},e.prototype.renderPopup=function(e,t){this.targetType=t,e.popupObj=new sf.popups.Popup(e.element,{targetType:"relative",relateTo:this.parent.element,open:this.quickToolbarOpen.bind(this)}),this.popupObj=e.popupObj,e.popupObj.hide()},e}(),Ve=function(){function e(e){this.parent=e,this.isDOMElement=!1,this.popupRenderer=new Fe(e)}return e.prototype.render=function(e,t){this.element=e,this.popupRenderer.renderPopup(this,t),this.addEventListener()},e.prototype.setPosition=function(e){var t,i,n=sf.base.closest(e.target,".e-img-caption"),s=sf.base.isNullOrUndefined(n)?e.target:n,o=s.offsetTop,r=window.pageYOffset+e.parentData.top;i=o-e.editTop>e.popHeight?r+e.tBarElementHeight+(o-e.editTop)-e.popHeight-5:e.editTop+e.editHeight-(o+s.offsetHeight)>e.popHeight?r+e.tBarElementHeight+(o-e.editTop)+s.offsetHeight+5:e.y,t=s.offsetWidth>e.popWidth?s.offsetWidth/2-e.popWidth/2+e.parentData.left+s.offsetLeft:e.parentData.left+s.offsetLeft,this.popupObj.position.X=t+e.popWidth>e.parentData.right?e.parentData.right-e.popWidth:t,this.popupObj.position.Y=i>=0?i:e.y+5,this.popupObj.dataBind()},e.prototype.checkCollision=function(e,t,i){var n,s,o=e.parentData.top,r=e.windowY+o+e.tBarElementHeight,a=[];a="document"===t?sf.popups.isCollide(e.popup):sf.popups.isCollide(e.popup,e.parentElement);for(var l=0;l<a.length;l++)switch(a[l]){case"top":s="document"===t?e.windowY:window.pageYOffset+o+e.tBarElementHeight;break;case"bottom":s="document"===t?"inline"===i?e.y-e.popHeight-10:e.windowHeight-(o+e.tBarElementHeight)>e.popHeight?r-e.windowHeight>e.popHeight?r+(e.windowHeight-o)-e.popHeight:r:e.windowY+(o+e.tBarElementHeight):"IMG"!==e.target.tagName?e.parentData.bottom+window.pageYOffset-e.popHeight-10:e.parentData.bottom+window.pageYOffset-e.popHeight-5;break;case"right":n="inline"===i?window.pageXOffset+(e.windowWidth-(e.popWidth+e.bodyRightSpace+10)):e.x-e.popWidth;break;case"left":n="inline"===i?0:e.parentData.left}this.popupObj.position.X=n||this.popupObj.position.X,this.popupObj.position.Y=s||this.popupObj.position.Y,this.popupObj.dataBind()},e.prototype.showPopup=function(e,t,i,n){var s=this;this.parent.onQuickTbOpenEnabled?this.parent.dotNetRef.invokeMethodAsync("BeforeQuickToolbarOpenEvent").then((function(o){o.cancel||s.onQuickTbOpenCallback(e,t,i,n)})):this.onQuickTbOpenCallback(e,t,i,n)},e.prototype.onQuickTbOpenCallback=function(e,t,i,n){var s,o,r,a=window.getComputedStyle(document.body),l=parseFloat(a.marginRight.split("px")[0])+parseFloat(a.paddingRight.split("px")[0]),d=window.innerHeight,h=window.innerWidth,c=this.parent.element,p=!sf.base.isNullOrUndefined(this.parent.getToolbar()),f=p&&this.parent.toolbarModule.getToolbarHeight(),m=p&&this.parent.toolbarModule.getExpandTBarPopHeight(),g=p?f+m:0;(sf.base.addClass([this.element],["e-hide"]),sf.base.Browser.isDevice&&!u()&&sf.base.addClass([this.parent.getToolbar()],["e-hide"]),this.parent.iframeSettings.enable)?(s=(r=this.parent.getPanel().contentWindow).pageYOffset,o=r.innerHeight):(s=(r=sf.base.closest(i,".e-rte-content"))?r.scrollTop:0,o=r?r.offsetHeight:0);!this.parent.inlineMode.enable&&sf.base.closest(i,"table"),sf.base.append([this.element],document.body),this.popupObj.position.X=e+20,this.popupObj.position.Y=t+20,this.popupObj.dataBind(),this.popupObj.element.classList.add("e-popup-open");var v={x:e,y:t,target:i,editTop:s,editHeight:o,popup:this.popupObj.element,popHeight:this.popupObj.element.offsetHeight,popWidth:this.popupObj.element.offsetWidth,parentElement:c,bodyRightSpace:l,windowY:window.pageYOffset,windowHeight:d,windowWidth:h,parentData:c.getBoundingClientRect(),tBarElementHeight:g};("IMG"===i.tagName||"AUDIO"===i.tagName||"VIDEO"===i.tagName||"IFRAME"===i.tagName||i.classList&&(i.classList.contains("e-audio-wrap")||i.classList.contains("e-clickelem")||i.classList.contains("e-video-clickelem")))&&this.setPosition(v),this.parent.inlineMode.enable||this.checkCollision(v,"parent",""),this.checkCollision(v,"document",this.parent.inlineMode.enable?"inline":""),this.popupObj.element.classList.remove("e-popup-close"),sf.base.removeClass([this.element],["e-hide"]),this.popupObj.show({name:"ZoomIn",duration:250}),sf.base.setStyleAttribute(this.element,{maxWidth:window.outerWidth+"px"}),sf.base.addClass([this.element],["e-rte-pop"]),this.isDOMElement=!0,this.parent.dotNetRef.invokeMethodAsync("UpdateClass",this.popupObj.element.classList.toString(),n)},e.prototype.hidePopup=function(){var e=this.parent.viewSourceModule.getViewPanel();sf.base.Browser.isDevice&&!u()&&sf.base.removeClass([this.parent.getToolbar()],["e-hide"]),sf.base.isNullOrUndefined(this.parent.getToolbar())||this.parent.inlineMode.enable||sf.base.isNullOrUndefined(e)||e.style.display,this.removeEleFromDOM(),this.isDOMElement=!1},e.prototype.removeEleFromDOM=function(){this.popupObj.hide(),this.element.classList.add("e-hide"),this.element.classList.add("e-rte-quick-popup-hide"),this.isDOMElement&&(sf.base.removeClass([this.element],["e-rte-pop"]),this.popupObj.element.removeAttribute("style"),this.popupObj.destroy(),this.parent.quickTbClosedEnabled&&this.parent.dotNetRef.invokeMethodAsync("QuickToolbarCloseEvent"))},e.prototype.updateStatus=function(e){if(this.element.classList.contains("e-rte-inline-popup")){var t=sf.base.selectAll(".e-toolbar-item",this.element);if(!(t.length<=0))L({args:e,dropDownModule:null,parent:this.parent,tbElements:t,tbItems:this.parent.toolbarSettings.items},!0)}},e.prototype.addEventListener=function(){this.parent.observer.on(t,this.destroy,this),this.parent.inlineMode.enable&&this.parent.observer.on("toolbar-updated",this.updateStatus,this)},e.prototype.removeEventListener=function(){this.parent.observer.off(t,this.destroy),this.parent.inlineMode.enable&&this.parent.observer.off("toolbar-updated",this.updateStatus)},e.prototype.destroy=function(){this.popupObj&&!this.popupObj.isDestroyed&&(this.popupObj.destroy(),this.removeEleFromDOM()),this.removeEventListener()},e}(),je=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.showImageQTBar=function(e,t,i,n){if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var s=document.querySelector("#"+this.parent.element.id+"_Image_Quick_Popup");this.imageQTBar=new Ve(this.parent),this.imageQTBar.render(s,n),this.parent.dotNetRef.invokeMethodAsync("ShowImagePopup",this.imageQTBar.popupObj.element.classList.toString(),n),this.imageQTBar.showPopup(e,t,i,n)}},e.prototype.showAudioQTBar=function(e,t,i,n){if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var s=document.querySelector("#"+this.parent.element.id+"_Audio_Quick_Popup");this.audioQTBar=new Ve(this.parent),this.audioQTBar.render(s,n),this.parent.dotNetRef.invokeMethodAsync("ShowAudioQuickToolbar",this.audioQTBar.popupObj.element.classList.toString(),n),this.audioQTBar.showPopup(e,t,i,n)}},e.prototype.showVideoQTBar=function(e,t,i,n){if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var s=document.querySelector("#"+this.parent.element.id+"_Video_Quick_Popup");this.videoQTBar=new Ve(this.parent),this.videoQTBar.render(s,n),this.parent.dotNetRef.invokeMethodAsync("ShowVideoQuickToolbar",this.videoQTBar.popupObj.element.classList.toString(),n),this.videoQTBar.showPopup(e,t,i,n)}},e.prototype.hideImageQTBar=function(){this.imageQTBar&&(this.imageQTBar.hidePopup(),this.imageQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideImagePopup"))},e.prototype.hideAudioQTBar=function(){this.audioQTBar&&(this.audioQTBar.hidePopup(),this.audioQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideAudioQuickToolbar"))},e.prototype.hideVideoQTBar=function(){this.videoQTBar&&(this.videoQTBar.hidePopup(),this.videoQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideVideoQuickToolbar"))},e.prototype.showLinkQTBar=function(e,t,i,n){if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var s=document.querySelector("#"+this.parent.element.id+"_Link_Quick_Popup");this.linkQTBar=new Ve(this.parent),this.linkQTBar.render(s,n),this.parent.dotNetRef.invokeMethodAsync("ShowLinkPopup",this.linkQTBar.popupObj.element.classList.toString()),this.linkQTBar.showPopup(e,t,i,n)}},e.prototype.hideLinkQTBar=function(){this.linkQTBar&&(this.linkQTBar.hidePopup(),this.linkQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideLinkPopup"))},e.prototype.showTableQTBar=function(e,t,i,n){if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var s=document.querySelector("#"+this.parent.element.id+"_Table_Quick_Popup");this.tableQTBar=new Ve(this.parent),this.tableQTBar.render(s,n),this.parent.dotNetRef.invokeMethodAsync("ShowTablePopup",this.tableQTBar.popupObj.element.classList.toString()),this.tableQTBar.showPopup(e,t,i,n)}},e.prototype.hideTableQTBar=function(){this.tableQTBar&&(this.tableQTBar.hidePopup(),this.tableQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideTablePopup"))},e.prototype.showInlineQTBar=function(e,t,i){var n=this;if(!this.parent.readonly&&this.parent.inlineMode.enable&&this.parent.inlineMode.enable&&(!sf.base.Browser.isDevice||u())){var s=document.querySelector("#"+this.parent.element.id+"_Inline_Quick_Popup");this.inlineQTBar=new Ve(this.parent),this.inlineQTBar.render(s,"Inline"),sf.base.EventHandler.add(this.inlineQTBar.element,"mousedown",this.onMouseDown,this);var o=this.inlineQTBar.popupObj.element.classList.toString();this.parent.dotNetRef.invokeMethodAsync("ShowInlinePopup",o).then((function(){n.inlineQTBar.showPopup(e,t,i,"Inline")}))}},e.prototype.hideInlineQTBar=function(){this.inlineQTBar&&(this.inlineQTBar.hidePopup(),this.inlineQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideInlinePopup"))},e.prototype.hideQuickToolbars=function(){sf.base.isNullOrUndefined(this.linkQTBar)||this.hideLinkQTBar(),sf.base.isNullOrUndefined(this.imageQTBar)||this.hideImageQTBar(),sf.base.isNullOrUndefined(this.audioQTBar)||this.hideAudioQTBar(),sf.base.isNullOrUndefined(this.videoQTBar)||this.hideVideoQTBar(),sf.base.isNullOrUndefined(this.tableQTBar)||this.hideTableQTBar(),!this.parent.inlineMode.enable||sf.base.Browser.isDevice&&!u()||this.hideInlineQTBar()},e.prototype.scrollHandler=function(){"hide"===this.parent.quickToolbarSettings.actionOnScroll.toLocaleLowerCase()&&this.hideQuickToolbars()},e.prototype.selectionChangeHandler=function(e){var t=this;this.parent.inlineMode.onSelection&&(clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout((function(){t.onSelectionChange(e)}),1e3))},e.prototype.onSelectionChange=function(e){sf.base.isNullOrUndefined(sf.base.select(".e-rte-inline-popup.e-popup",document.body))&&(this.parent.getDocument().getSelection().isCollapsed||this.mouseUpHandler({args:e}))},e.prototype.toolbarUpdated=function(e){sf.base.isNullOrUndefined(this.linkQTBar)||this.hideLinkQTBar(),sf.base.isNullOrUndefined(this.imageQTBar)||this.hideImageQTBar(),sf.base.isNullOrUndefined(this.audioQTBar)||this.hideAudioQTBar(),sf.base.isNullOrUndefined(this.videoQTBar)||this.hideVideoQTBar(),sf.base.isNullOrUndefined(this.tableQTBar)||this.hideTableQTBar()},e.prototype.deBounce=function(e,t,i){var n=this;clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout((function(){n.showInlineQTBar(e,t,i)}),1e3)},e.prototype.onMouseDown=function(e){this.parent.isBlur=!1,this.parent.isRTE=!0},e.prototype.mouseUpHandler=function(e){if(this.parent.inlineMode.enable&&(!sf.base.Browser.isDevice||u())){var t=e.args.touches?e.args.changedTouches[0]:e.args,i=this.parent.getRange(),n=e.args.target,s=sf.base.select(".e-rte-inline-popup",document.body);if(sf.base.isNullOrUndefined(s)||s.classList.contains("e-hide")){if(u()&&e.touchData&&e.touchData.prevClientX!==e.touchData.clientX&&e.touchData.prevClientY!==e.touchData.clientY)return;this.hideInlineQTBar();var o=this.parent.element.getBoundingClientRect().left;if(this.offsetX=this.parent.iframeSettings.enable?window.pageXOffset+o+t.clientX:t.pageX,this.offsetY=function(e,t,i){return i?window.pageYOffset+t.getBoundingClientRect().top+e.clientY:e.pageY}(t,this.parent.element,this.parent.iframeSettings.enable),"TEXTAREA"===n.nodeName)this.showInlineQTBar(this.offsetX,this.offsetY,n);else{var r=sf.base.closest(n,"a");if(!("IMG"===(n=r||n).tagName||"A"===n.tagName||sf.base.closest(n,"td,th")&&i.collapsed)){if(this.parent.inlineMode.onSelection&&i.collapsed)return;this.target=n,this.showInlineQTBar(this.offsetX,this.offsetY,n)}}}}},e.prototype.keyDownHandler=function(){!this.parent.inlineMode.enable||sf.base.Browser.isDevice&&!u()||sf.base.isNullOrUndefined(sf.base.select(".e-rte-inline-popup.e-popup",document))||this.hideInlineQTBar()},e.prototype.inlineQTBarMouseDownHandler=function(){!this.parent.inlineMode.enable||sf.base.Browser.isDevice&&!u()||sf.base.isNullOrUndefined(sf.base.select(".e-rte-inline-popup.e-popup",document))||this.hideInlineQTBar()},e.prototype.keyUpHandler=function(e){if(this.parent.inlineMode.enable&&!sf.base.Browser.isDevice){if(this.parent.inlineMode.onSelection)return;var t=e.args;this.deBounce(this.offsetX,this.offsetY,t.target)}},e.prototype.onKeyDown=function(e){var t=e.args;8!==t.which&&46!==t.which||(this.imageQTBar&&!N(this.imageQTBar.element,"e-popup-close")&&this.imageQTBar.hidePopup(),this.audioQTBar&&!N(this.audioQTBar.element,"e-popup-close")&&this.audioQTBar.hidePopup(),this.videoQTBar&&!N(this.videoQTBar.element,"e-popup-close")&&this.videoQTBar.hidePopup())},e.prototype.onIframeMouseDown=function(){this.hideQuickToolbars(),this.hideInlineQTBar()},e.prototype.addEventListener=function(){this.parent.inlineMode.enable&&this.parent.inlineMode.onSelection&&u()&&sf.base.EventHandler.add(this.parent.getDocument(),"selectionchange",this.selectionChangeHandler,this),this.parent.observer.on("toolbar-updated",this.toolbarUpdated,this),this.wireInlineQTBarEvents(),this.parent.observer.on("scroll",this.scrollHandler,this),this.parent.observer.on("contentscroll",this.scrollHandler,this),this.parent.observer.on("focusChange",this.hideQuickToolbars,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(s,this.onKeyDown,this)},e.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.parent.getDocument(),"selectionchange",this.selectionChangeHandler),this.parent.observer.off("toolbar-updated",this.toolbarUpdated),this.unWireInlineQTBarEvents(),this.parent.observer.off("scroll",this.scrollHandler),this.parent.observer.off("contentscroll",this.scrollHandler),this.parent.observer.off("focusChange",this.hideQuickToolbars),this.parent.observer.off(t,this.destroy),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off(s,this.onKeyDown)},e.prototype.wireInlineQTBarEvents=function(){this.parent.observer.on("mouseUp",this.mouseUpHandler,this),this.parent.observer.on(a,this.inlineQTBarMouseDownHandler,this),this.parent.observer.on(s,this.keyDownHandler,this),this.parent.observer.on(n,this.keyUpHandler,this),this.parent.observer.on("sourceCodeMouseDown",this.mouseUpHandler,this)},e.prototype.unWireInlineQTBarEvents=function(){this.parent.observer.off("mouseUp",this.mouseUpHandler),this.parent.observer.off(a,this.inlineQTBarMouseDownHandler),this.parent.observer.off(s,this.keyDownHandler),this.parent.observer.off(n,this.keyUpHandler),this.parent.observer.off("sourceCodeMouseDown",this.mouseUpHandler)},e.prototype.destroy=function(){this.linkQTBar&&(sf.base.EventHandler.remove(this.linkQTBar.element,"mousedown",this.onMouseDown),this.linkQTBar.destroy()),this.imageQTBar&&(sf.base.EventHandler.remove(this.imageQTBar.element,"mousedown",this.onMouseDown),this.imageQTBar.destroy()),this.audioQTBar&&(sf.base.EventHandler.remove(this.audioQTBar.element,"mousedown",this.onMouseDown),this.audioQTBar.destroy()),this.videoQTBar&&(sf.base.EventHandler.remove(this.videoQTBar.element,"mousedown",this.onMouseDown),this.videoQTBar.destroy()),this.tableQTBar&&(sf.base.EventHandler.remove(this.tableQTBar.element,"mousedown",this.onMouseDown),this.tableQTBar.destroy()),this.inlineQTBar&&(sf.base.EventHandler.remove(this.inlineQTBar.element,"mousedown",this.onMouseDown),u()&&sf.base.EventHandler.remove(document,"selectionchange",this.selectionChangeHandler),this.inlineQTBar.destroy()),this.removeEventListener()},e}(),We="e-file-status",Xe="e-upload-file-list",Ye="e-file-abort-btn",Ke="e-file-reload-btn",Ge="e-file-remove-btn",Ze="e-file-delete-btn",Qe="e-upload-progress-bar",Je="e-upload-progress-wrap",$e=function(){function e(e,t,i){this.fileList=[],this.filesData=[],this.files=[],this.minFileSize=0,this.maxFileSize=3e7,this.uploadedFilesData=[],this.base64String=[],this.isForm=!1,this.allTypes=!1,this.btnTabIndex="0",this.disableKeyboardNavigation=!1,this.actionCompleteCount=0,this.flag=!0,this.selectedFiles=[],this.uploaderName="UploadFiles",this.element=t,this.parent=i,this.cssClass=e.cssClass,this.asyncSettings=e.asyncSettings,this.allowedExtensions=e.allowedExtensions,this.addEventListener(),this.render()}return e.prototype.addEventListener=function(){this.parent.observer.on("beforePasteUploadCallBack",this.beforePasteUploadCallBack,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("beforePasteUploadCallBack",this.beforePasteUploadCallBack)},e.prototype.render=function(){this.browserName=sf.base.Browser.info.name,this.uploaderName=this.element.getAttribute("name"),this.initializeUpload(),this.wireEvents(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.setCSSClass()},e.prototype.initializeUpload=function(){this.element.setAttribute("aria-label","Uploader"),this.element.setAttribute("tabindex","-1");var e=sf.base.createElement("span",{className:"e-file-select",attrs:{style:"display: none;"}});this.element.parentElement.insertBefore(e,this.element),this.dropAreaWrapper=sf.base.createElement("div",{className:"e-file-select-wrap"}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),e.appendChild(this.element),this.dropAreaWrapper.appendChild(e),this.uploadWrapper=sf.base.createElement("div",{className:"e-upload e-lib e-control-wrapper",attrs:{style:"background: white"}}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper)},e.prototype.setExtensions=function(e){""===e||sf.base.isNullOrUndefined(e)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",e)},e.prototype.setRTL=function(){this.enableRtl?sf.base.addClass([this.uploadWrapper],"e-rtl"):sf.base.removeClass([this.uploadWrapper],"e-rtl")},e.prototype.setCSSClass=function(e){var t=this.cssClass;sf.base.isNullOrUndefined(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim()),sf.base.isNullOrUndefined(this.cssClass)||""===t||sf.base.addClass([this.uploadWrapper],t.split(t.indexOf(",")>-1?",":" "));var i=e;sf.base.isNullOrUndefined(e)||(i=e.replace(/\s+/g," ").trim()),sf.base.isNullOrUndefined(e)||""===i||sf.base.removeClass([this.uploadWrapper],i.split(" "))},e.prototype.createFileList=function(e,t){if(this.createParentUL(),this.isFormUpload())this.uploadWrapper.classList.add("e-form-upload"),this.formFileList(e,this.element.files);else for(var i=0,n=e;i<n.length;i++){var s=n[i],o=sf.base.createElement("li",{className:Xe,attrs:{"data-file-name":s.name,"data-files-count":"1"}}),r=sf.base.createElement("span",{className:"e-file-container"}),a=sf.base.createElement("span",{className:"e-file-name",attrs:{title:s.name}});a.innerHTML=this.getFileNameOnly(s.name);var l=sf.base.createElement("span",{className:"e-file-type"});if(l.innerHTML="."+this.getFileType(s.name),this.enableRtl){var d=sf.base.createElement("span",{className:"e-rtl-container"});d.appendChild(l),d.appendChild(a),r.appendChild(d)}else r.appendChild(a),r.appendChild(l);var h=sf.base.createElement("span",{className:"e-file-size"});h.innerHTML=this.bytesToSize(s.size),r.appendChild(h);var c=sf.base.createElement("span",{className:We});r.appendChild(c),c.innerHTML=s.status,o.appendChild(r);var p=sf.base.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&p.classList.add("e-msie"),p.setAttribute("title","Remove"),o.appendChild(p),sf.base.EventHandler.add(p,"click",this.removeFiles,this),"2"===s.statusCode?(c.classList.add("e-upload-success"),p.classList.add(Ze),p.setAttribute("title","Delete file")):"1"!==s.statusCode&&(c.classList.remove("e-upload-success"),c.classList.add("e-validation-fails")),"1"===s.statusCode&&""!==this.asyncSettings.saveUrl&&(c.innerHTML=""),p.classList.contains(Ze)||p.classList.add(Ge),this.listParent.appendChild(o),this.fileList.push(o),this.truncateName(a);var u=this.flag;this.isPreLoadFile(s)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=u)}},e.prototype.createParentUL=function(){sf.base.isNullOrUndefined(this.listParent)&&(this.listParent=sf.base.createElement("ul",{className:"e-upload-files"}),this.uploadWrapper.appendChild(this.listParent))},e.prototype.isFormUpload=function(){var e=!1;return!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(e=!0),e},e.prototype.getFileType=function(e){var t,i=e.lastIndexOf(".");return i>=0&&(t=e.substring(i+1)),t||""},e.prototype.getFileNameOnly=function(e){var t=this.getFileType(e);return e.split("."+t)[0]},e.prototype.truncateName=function(e){var t=e;("edge"!==this.browserName&&t.offsetWidth<t.scrollWidth||t.offsetWidth+1<t.scrollWidth)&&this.getSlicedName(t)},e.prototype.getSlicedName=function(e){var t;t=e.textContent,e.dataset.tail=t.slice(t.length-10)},e.prototype.setListToFileInfo=function(e,t){for(var i=0,n=e;i<n.length;i++){n[i].list=t}},e.prototype.getFileSize=function(e){for(var t=0,i=0,n=e;i<n.length;i++){t+=n[i].size}return t},e.prototype.bytesToSize=function(e){var t=-1;if(!e)return"0.0 KB";do{e/=1024,t++}while(e>99);return t>=2&&(e*=1024,t=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][t]},e.prototype.createFormInput=function(e){var t=this.element.cloneNode(!0);t.classList.add("e-hidden-file-input");for(var i=0,n=e;i<n.length;i++){n[i].input=t}t.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector(".e-file-select").appendChild(t),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")},e.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.filesData.length===this.actionCompleteCount&&this.flag&&(this.flag=!1)},e.prototype.isPreLoadFile=function(e){for(var t=!1,i=0;i<this.files.length;i++)this.files[i].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[i].type===e.type&&(t=!0);return t},e.prototype.validatedFileSize=function(e){var t="",i="";return e<this.minFileSize?t="File size is too small":e>this.maxFileSize?i="File size is too large":(t="",i=""),{minSize:t,maxSize:i}},e.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},e.prototype.addInvalidClass=function(e){e.classList.add("e-file-invalid")},e.prototype.checkExtension=function(e){var t=e;if(!this.isBlank(this.allowedExtensions)){for(var i=[],n=0,s=this.allowedExtensions.split(",");n<s.length;n++){var o=s[n];i.push(o.trim().toLocaleLowerCase())}for(var r=0;r<e.length;r++)-1===i.indexOf(("."+e[r].type).toLocaleLowerCase())&&(e[r].status="File type is not allowed",e[r].statusCode="0")}return t},e.prototype.getFilesData=function(e){return sf.base.isNullOrUndefined(e)?this.filesData:this.getSelectedFiles(e)},e.prototype.getFilesInArray=function(e){var t=[];return e instanceof Array?t=e:t.push(e),t},e.prototype.formValidateFileInfo=function(e,t){var i=e.status,n=this.validatedFileSize(e.size);""===n.minSize&&""===n.maxSize||(this.addInvalidClass(t),i=""!==n.minSize?"File size is too small":""!==n.maxSize?"File size is too large":i);var s=this.checkExtension(this.getFilesInArray(e))[0].status;return"File type is not allowed"===s&&(this.addInvalidClass(t),i=s),i},e.prototype.clearAll=function(){if(sf.base.isNullOrUndefined(this.listParent))return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);this.clearData(),this.actionCompleteCount=0},e.prototype.clearData=function(e){sf.base.isNullOrUndefined(this.listParent)||(sf.base.detach(this.listParent),this.listParent=null),"msie"===this.browserName||e||(this.element.value=""),this.fileList=[],this.filesData=[],this.removeActionButtons()},e.prototype.removeActionButtons=function(){this.actionButtons&&(sf.base.detach(this.actionButtons),this.actionButtons=null)},e.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var e=this.uploadWrapper.querySelectorAll(".e-validation-fails").length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span.e-upload-success").length+this.uploadWrapper.querySelectorAll("span.e-upload-progress").length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},e.prototype.getSelectedFiles=function(e){for(var t=[],i=this.fileList[e],n=this.getFilesData(),s=+i.getAttribute("data-files-count"),o=0,r=0;r<e;r++)o+=+this.fileList[r].getAttribute("data-files-count");for(var a=o;a<o+s;a++)t.push(n[a]);return t},e.prototype.formFileList=function(e,t){var i=sf.base.createElement("li",{className:Xe});i.setAttribute("data-files-count",e.length+"");for(var n,s=sf.base.createElement("span",{className:"e-file-container"}),o=0,r=e;o<r.length;o++){var a=r[o],l=sf.base.createElement("span",{className:"e-file-name"});l.innerHTML=this.getFileNameOnly(a.name);var d=sf.base.createElement("span",{className:"e-file-type"});if(d.innerHTML="."+this.getFileType(a.name),this.enableRtl){var h=sf.base.createElement("span",{className:"e-rtl-container"});h.appendChild(d),h.appendChild(l),s.appendChild(h)}else s.appendChild(l),s.appendChild(d);this.truncateName(l),n=this.formValidateFileInfo(a,i)}i.appendChild(s),this.setListToFileInfo(e,i);var c=sf.base.createElement("span");if(i.classList.contains("e-file-invalid")?(c.classList.add(We),c.classList.add("e-file-invalid"),c.innerText=e.length>1?"invalidFileSelection":n):(c.classList.add(e.length>1?"e-file-information":"e-file-size"),c.innerText=e.length>1?"totalFiles: "+e.length+" , size: "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),s.appendChild(c),sf.base.isNullOrUndefined(i.querySelector(".e-icons"))){var p=sf.base.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&p.classList.add("e-msie"),p.setAttribute("title","Remove"),i.appendChild(s),i.appendChild(p),sf.base.EventHandler.add(p,"click",this.removeFiles,this),p.classList.add(Ge)}this.listParent.appendChild(i),this.fileList.push(i)},e.prototype.removeFiles=function(e){var t=e.target.parentElement,i=this.fileList.indexOf(t),n=this.fileList[i],s=this.isFormUpload(),o=s?this.getSelectedFiles(i):this.getFilesInArray(this.filesData[i]);if(!sf.base.isNullOrUndefined(o)){if(e.target.classList.contains(Ye)&&!s){if(o[0].statusCode="5",!sf.base.isNullOrUndefined(n)){var r=n.querySelector("."+Ye);sf.popups.createSpinner({target:r,width:"20px"}),sf.popups.showSpinner(r)}n.classList.contains("e-restrict-retry")||this.checkActionComplete(!0)}else sf.base.closest(e.target,".e-spinner-pane")||this.remove(o,!1,!1,!0,e);this.element.value="",this.checkActionButtonStatus()}},e.prototype.spliceFiles=function(e){for(var t=this.fileList[e],i=this.getFilesData(),n=+t.getAttribute("data-files-count"),s=0,o=0;o<e;o++)s+=+this.fileList[o].getAttribute("data-files-count");for(var r=s+n-1;r>=s;r--)i.splice(r,1)},e.prototype.remove=function(e,t,i,n,s){sf.base.isNullOrUndefined(n)&&(n=!0);var o={event:s,cancel:!1,filesData:[],customFormData:[],postRawFile:n,currentRequest:null};if(this.isFormUpload()){o.filesData=e,this.parent.observer.notify("removing",o);for(var r=!1,a=void 0,l=0,d=this.getFilesInArray(e);l<d.length;l++){var h=d[l];if(r||(a=this.fileList.indexOf(h.list)),a>-1){var c=sf.base.isNullOrUndefined(h.input)?null:h.input;c&&sf.base.detach(c),this.spliceFiles(a),sf.base.detach(this.fileList[a]),this.fileList.splice(a,1),r=!0,a=-1}}}else if(this.isForm&&(sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)||""===this.asyncSettings.removeUrl))o.filesData=this.getFilesData(),this.parent.observer.notify("removing",o),this.clearAll();else{var p=[];(e=sf.base.isNullOrUndefined(e)?this.filesData:e)instanceof Array?p=e:p.push(e),o.filesData=p;for(var u=this.asyncSettings.removeUrl,f=""!==u&&!sf.base.isNullOrUndefined(u),m=0,g=p;m<g.length;m++){var v=g[m],b=this.uploadedFilesData.indexOf(v);("2"===v.statusCode||"4"===v.statusCode||"0"===v.statusCode&&-1!==b)&&f?this.removeUploadedFile(v,o,i,t):(i||this.parent.observer.notify("removing",o),this.removeFilesData(v,t)),s&&!s.target.classList.contains(Ge)&&this.checkActionComplete(!1)}}},e.prototype.updateCustomHeader=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var n=t[i],s=Object.keys(n).map((function(e){return n[e]}));e.setRequestHeader(Object.keys(n)[0],s)},n=0;n<t.length;n++)i(n)},e.prototype.removeUploadedFile=function(e,t,i,n){var s=this,o=e,r=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);r.emitError=!1;var a=new FormData;r.beforeSend=function(n){t.currentRequest=r.httpRequest,s.currentRequestHeader&&s.updateCustomHeader(r.httpRequest,s.currentRequestHeader),s.customFormDatas&&s.updateFormData(a,s.customFormDatas),i||s.parent.observer.notify("removing",t),s.removingEventCallback(t,a,o,e)},r.onLoad=function(e){return s.removeCompleted(e,o,n),{}},r.onError=function(e){return s.removeFailed(e,o,n),{}},r.send(a)},e.prototype.getResponse=function(e){var t=e.currentTarget;return{readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials}},e.prototype.removeCompleted=function(e,t,i){var n=e&&e.currentTarget?this.getResponse(e):null,s=e.target;if(4===s.readyState&&s.status>=200&&s.status<=299){var o={e:e,response:n,operation:"Remove",file:this.updateStatus(t,"File removed successfully","2")};this.parent.observer.notify("success",o),this.removeFilesData(t,i);var r=this.uploadedFilesData.indexOf(t);this.uploadedFilesData.splice(r,1)}else this.removeFailed(e,t,i)},e.prototype.removeFailed=function(e,t,i){var n={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"Remove",file:this.updateStatus(t,"Unable to remove file","0")};if(!i){var s=this.filesData.indexOf(t),o=this.fileList[s];if(o){o.classList.remove("e-upload-success"),o.classList.add("e-upload-fails");var r=o.querySelector("."+We);r&&(r.classList.remove("e-upload-success"),r.classList.add("e-upload-fails"))}this.checkActionButtonStatus()}this.parent.observer.notify("failure",n);var a=this.getLiElement(t);if(!sf.base.isNullOrUndefined(a)&&!sf.base.isNullOrUndefined(a.querySelector("."+Ze))){var l=a.querySelector("."+Ze);sf.popups.hideSpinner(l),sf.base.detach(a.querySelector(".e-spinner-pane"))}},e.prototype.updateStatus=function(e,t,i,n){if(void 0===n&&(n=!0),""===t||sf.base.isNullOrUndefined(t)||""===i||sf.base.isNullOrUndefined(i)||(e.status=t,e.statusCode=i),n){var s=this.getLiElement(e);sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(s.querySelector("."+We))||""===t||sf.base.isNullOrUndefined(t)||(s.querySelector("."+We).textContent=t)}return e},e.prototype.removingEventCallback=function(e,t,i,n){var s=this.element.getAttribute("name"),o=this.getLiElement(n);if(!(sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(o.querySelector("."+Ze))&&sf.base.isNullOrUndefined(o.querySelector("."+Ge)))){var r;r=o.querySelector("."+Ze)?o.querySelector("."+Ze):o.querySelector("."+Ge),sf.popups.createSpinner({target:r,width:"20px"}),sf.popups.showSpinner(r)}e.postRawFile&&!sf.base.isNullOrUndefined(i.rawFile)&&""!==i.rawFile?t.append(s,i.rawFile,i.name):t.append(s,i.name),this.updateFormData(t,e.customFormData)},e.prototype.updateFormData=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var n=t[i],s=Object.keys(n).map((function(e){return n[e]}));e.append(Object.keys(n)[0],s)},n=0;n<t.length;n++)i(n)},e.prototype.getLiElement=function(e){for(var t,i=0;i<this.filesData.length;i++)(sf.base.isNullOrUndefined(this.filesData[i].id)||sf.base.isNullOrUndefined(e.id)?this.filesData[i].name===e.name:this.filesData[i].name===e.name&&this.filesData[i].id===e.id)&&(t=i);return this.fileList[t]},e.prototype.removeFilesData=function(e,t){var i;if(!t){var n=this.getLiElement(e);sf.base.isNullOrUndefined(n)||(sf.base.detach(n),i=this.fileList.indexOf(n),this.fileList.splice(i,1),this.filesData.splice(i,1),0!==this.fileList.length||sf.base.isNullOrUndefined(this.listParent)||(sf.base.detach(this.listParent),this.listParent=null,this.removeActionButtons()))}},e.prototype.upload=function(e,t){e=e||this.filesData,this.beforeUploadCustom=!sf.base.isNullOrUndefined(t)&&t,this.beforeUploadFiles=this.getFilesInArray(e);this.parent.observer.notify("beforePasteUpload",{customFormData:[],currentRequest:null,cancel:!1})},e.prototype.beforePasteUploadCallBack=function(e){e.cancel||(this.currentRequestHeader=e.currentRequest?e.currentRequest:this.currentRequestHeader,this.customFormDatas=e.customFormData&&e.customFormData.length>0?e.customFormData:this.customFormDatas,this.uploadFiles(this.beforeUploadFiles,this.beforeUploadCustom))},e.prototype.filterfileList=function(e){for(var t=[],i=0;i<e.length;i++)this.getLiElement(e[i]).classList.contains("e-upload-success")||t.push(e[i]);return t},e.prototype.uploadFiles=function(e,t){var i=[];if(""!==this.asyncSettings.saveUrl&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)){i=!t||sf.base.isNullOrUndefined(t)?this.filterfileList(e):e;for(var n=0;n<i.length;n++)this.uploadFilesRequest(i,n,t)}},e.prototype.updateCustomheader=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var n=t[i],s=Object.keys(n).map((function(e){return n[e]}));e.setRequestHeader(Object.keys(n)[0],s)},n=0;n<t.length;n++)i(n)},e.prototype.eventCancelByArgs=function(e,t,i){var n=this;if(e.cancel=!0,"5"!==t.fileData.statusCode){t.fileData.statusCode="5",t.fileData.status="File upload canceled";var s=this.getLiElement(t.fileData);if(s){sf.base.isNullOrUndefined(s.querySelector("."+We))||(s.querySelector("."+We).innerHTML="File upload canceled",s.querySelector("."+We).classList.add("e-upload-fails")),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var o=s.querySelector("."+Ge);o&&o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title","Retry"),this.pauseButton.addEventListener("click",(function(e){n.reloadcanceledFile(e,i,s)}),!1),this.checkActionButtonStatus()}}},e.prototype.reloadcanceledFile=function(e,t,i,n){t.statusCode="1",t.status="Ready to upload",n||(i.querySelector("."+We).classList.remove("e-upload-fails"),sf.base.isNullOrUndefined(i.querySelector("."+Ke))||sf.base.detach(i.querySelector("."+Ke)),this.pauseButton=null),i.classList.add("e-restrict-retry"),this.upload([t])},e.prototype.uploadFilesRequest=function(e,t,i){var n=this,s=new sf.base.Ajax(this.asyncSettings.saveUrl,"POST",!0,null);s.emitError=!1;var o={fileData:e[t],customFormData:[],cancel:!1},r=new FormData;if(s.beforeSend=function(i){o.currentRequest=s.httpRequest,o.fileData.rawFile=n.base64String[t],n.currentRequestHeader&&n.updateCustomheader(s.httpRequest,n.currentRequestHeader),n.customFormDatas&&n.updateFormData(r,n.customFormDatas),n.parent.observer.notify("uploading",o),o.cancel&&n.eventCancelByArgs(i,o,e[t]),n.updateFormData(r,o.customFormData)},"1"===e[t].statusCode){var a=this.element.getAttribute("name");r.append(a,e[t].rawFile,e[t].name),s.onLoad=function(s){return n.uploadComplete(s,e[t],i),{}},s.onUploadProgress=function(o){return n.uploadInProgress(o,e[t],i,s),{}},s.onError=function(i){return n.uploadFailed(i,e[t]),{}},s.send(r)}},e.prototype.cancelUploadingFile=function(e,t,i,n){var s=this;if("5"===e.statusCode){var o={event:t,fileData:e,cancel:!1,customFormData:[]};if(this.parent.observer.notify("canceling",o),o.cancel){if(e.statusCode="3",!sf.base.isNullOrUndefined(n)){var r=n.querySelector("."+Ye);sf.base.isNullOrUndefined(r)||(sf.popups.hideSpinner(r),sf.base.detach(n.querySelector(".e-spinner-pane")))}}else{i.emitError=!1,i.httpRequest.abort();var a=new FormData;if("5"===e.statusCode){var l=this.element.getAttribute("name");a.append(l,e.name),a.append("cancel-uploading",e.name),this.updateFormData(a,o.customFormData);var d=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);d.emitError=!1,d.onLoad=function(t){return s.removecanceledFile(t,e),{}},d.send(a)}}}},e.prototype.removecanceledFile=function(e,t){var i=this.getLiElement(t);if(!i.querySelector("."+Ke)&&!sf.base.isNullOrUndefined(i.querySelector("."+Ye))){this.updateStatus(t,"File upload canceled","5"),this.renderFailureState(e,t,i);var n=i.querySelector("."+Ge);sf.base.isNullOrUndefined(i)||(sf.popups.hideSpinner(n),sf.base.detach(i.querySelector(".e-spinner-pane")));var s={event:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"Cancel",file:t};this.parent.observer.notify("success",s)}},e.prototype.uploadInProgress=function(e,t,i,n){var s=this.getLiElement(t);if(!sf.base.isNullOrUndefined(s)||i)if(sf.base.isNullOrUndefined(s))this.cancelUploadingFile(t,e,n);else{"5"===t.statusCode&&this.cancelUploadingFile(t,e,n,s),s.querySelectorAll("."+Je).length>0||!s.querySelector("."+We)||(s.querySelector("."+We).classList.add("e-upload-progress"),this.createProgressBar(s),this.updateProgressBarClasses(s,"e-upload-progress"),s.querySelector("."+We).classList.remove("e-upload-fails")),this.updateProgressbar(e,s);var o=s.querySelector("."+Ge);sf.base.isNullOrUndefined(o)||(o.classList.add(Ye,"e-upload-progress"),o.setAttribute("title","Abort"),o.classList.remove(Ge))}},e.prototype.changeProgressValue=function(e,t){e.querySelector("."+Qe).setAttribute("style","width:"+t),e.querySelector(".e-progress-bar-text").textContent=t},e.prototype.updateProgressbar=function(e,t){if(!isNaN(Math.round(e.loaded/e.total*100))&&!sf.base.isNullOrUndefined(t.querySelector("."+Qe)))if(sf.base.isNullOrUndefined(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%");else{var i=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);0!==i&&100!==i||this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%")}},e.prototype.createProgressBar=function(e){var t=sf.base.createElement("span",{className:Je}),i=sf.base.createElement("progressbar",{className:Qe,attrs:{value:"0",max:"100"}}),n=sf.base.createElement("span",{className:"e-progress-inner-wrap"});i.setAttribute("style","width: 0%");var s=sf.base.createElement("span",{className:"e-progress-bar-text"});s.textContent="0%",n.appendChild(i),t.appendChild(n),t.appendChild(s),e.querySelector(".e-file-container").appendChild(t)},e.prototype.updateProgressBarClasses=function(e,t){var i=e.querySelector("."+Qe);sf.base.isNullOrUndefined(i)||i.classList.add(t)},e.prototype.raiseSuccessEvent=function(e,t){var i={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"upload",file:this.updateStatus(t,"File uploaded successfully","2",!1),statusText:"File uploaded successfully"},n=this.getLiElement(t);if(!sf.base.isNullOrUndefined(n)){var s=n.querySelector(".e-spinner-pane");sf.base.isNullOrUndefined(s)||(sf.popups.hideSpinner(n),sf.base.detach(s))}this.parent.observer.notify("success",i),this.updateStatus(t,i.statusText,"2"),this.uploadedFilesData.push(t),this.checkActionButtonStatus(),this.fileList.length>0&&(this.getLiElement(t).classList.contains("e-restrict-retry")?this.getLiElement(t).classList.remove("e-restrict-retry"):this.checkActionComplete(!0))},e.prototype.uploadComplete=function(e,t,i){var n=e.target;if(4===n.readyState&&n.status>=200&&n.status<=299){var s=this.getLiElement(t);if(sf.base.isNullOrUndefined(s)&&(!i||sf.base.isNullOrUndefined(i)))return;if(!sf.base.isNullOrUndefined(s)){this.updateProgressBarClasses(s,"e-upload-success"),this.removeProgressbar(s,"success");var o=s.querySelector("."+Ye);sf.base.isNullOrUndefined(o)||(o.classList.add(Ze),o.setAttribute("title","Delete file"),o.classList.remove(Ye),o.classList.remove("e-upload-progress"))}this.raiseSuccessEvent(e,t)}else this.uploadFailed(e,t)},e.prototype.uploadFailed=function(e,t){var i=this.getLiElement(t),n={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"upload",file:this.updateStatus(t,"File failed to upload","0",!1),statusText:"File failed to upload"};sf.base.isNullOrUndefined(i)||this.renderFailureState(e,t,i),this.parent.observer.notify("failure",n),this.updateStatus(t,n.statusText,"0"),this.checkActionButtonStatus(),this.checkActionComplete(!0)},e.prototype.renderFailureState=function(e,t,i){var n=this;this.updateProgressBarClasses(i,"e-upload-fails"),this.removeProgressbar(i,"failure"),sf.base.isNullOrUndefined(i.querySelector(".e-file-status"))||i.querySelector(".e-file-status").classList.add("e-upload-fails");var s=i.querySelector("."+Ye);sf.base.isNullOrUndefined(s)||(s.classList.remove(Ye,"e-upload-progress"),s.classList.add(Ge),s.setAttribute("title","Remove"),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),s.parentElement.insertBefore(this.pauseButton,s),this.pauseButton.setAttribute("title","Retry"),i.querySelector("."+Ke).addEventListener("click",(function(e){n.reloadcanceledFile(e,t,i,!1)}),!1))},e.prototype.removeProgressbar=function(e,t){var i=this;sf.base.isNullOrUndefined(e.querySelector("."+Je))||(this.progressAnimation=new sf.base.Animation({duration:1250}),this.progressAnimation.animate(e.querySelector("."+Je),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector(".e-progress-bar-text"),{name:"FadeOut"}),setTimeout((function(){i.animateProgressBar(e,t)}),750))},e.prototype.animateProgressBar=function(e,t){"success"===t?sf.base.isNullOrUndefined(e.querySelector("."+We))||(e.querySelector("."+We).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+We),{name:"FadeIn"}),e.querySelector("."+We).classList.add("e-upload-success")):sf.base.isNullOrUndefined(e.querySelector("."+We))||(e.querySelector("."+We).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+We),{name:"FadeIn"}),e.querySelector("."+We).classList.add("e-upload-fails")),e.querySelector("."+Je)&&sf.base.detach(e.querySelector("."+Je))},e.prototype.onSelectFiles=function(e){var t;if("drop"===e.type){var i=this.sortFilesList=e.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.files=i),i.length>0&&(t=this.sortFileList(i),this.renderSelectedFiles(e,t))}else t=[].slice.call(e.target.files),this.renderSelectedFiles(e,t)},e.prototype.sortFileList=function(e){for(var t=e=e||this.sortFilesList,i=[],n=0;n<t.length;n++)i.push(t[n].name);for(var s=[],o=0,r=i.sort();o<r.length;o++){var a=r[o];for(n=0;n<t.length;n++)a===t[n].name&&s.push(t[n])}return s},e.prototype.renderSelectedFiles=function(e,t,i,n){this.base64String=[];var s={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(t.length<1)return s.isCanceled=!0,void this.parent.observer.notify("selected",s);this.flag=!0;for(var o=[],r=0;r<t.length;r++){var a=i?t[r].file:t[r];this.updateInitialFileDetails(e,t,a,r,o,i,n)}s.filesData=o,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.allTypes||(o=this.checkExtension(o)),this.parent.observer.notify("selected",s),s.cancel=!0,this._internalRenderSelect(s,o)},e.prototype._internalRenderSelect=function(e,t){if(!e.cancel){if(this.currentRequestHeader=e.currentRequest,this.customFormDatas=e.customFormData,this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",e.isModified&&e.modifiedFilesData.length>0){for(var i=0;i<e.modifiedFilesData.length;i++)for(var n=0;n<t.length;n++)e.modifiedFilesData[i].id===t[n].id&&(e.modifiedFilesData[i].rawFile=t[n].rawFile);var s=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(s),this.filesData=s,this.isForm&&!this.allowUpload()||this.checkAutoUpload(s)}else this.createFileList(t,!0),this.filesData=this.filesData.concat(t),this.isForm&&!this.allowUpload()||this.checkAutoUpload(t);sf.base.isNullOrUndefined(e.progressInterval)||""===e.progressInterval||(this.progressInterval=e.progressInterval),this.filesData.length===this.actionCompleteCount&&this.flag&&(this.flag=!1)}},e.prototype.allowUpload=function(){var e=!1;return this.isForm&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(e=!0),e},e.prototype.checkAutoUpload=function(e){this.upload(e),this.removeActionButtons(),this.checkActionButtonStatus()},e.prototype.updateSortedFileList=function(e){var t=sf.base.createElement("div",{id:"clonewrapper"}),i=-1;if(this.listParent){for(var n=0;n<this.listParent.querySelectorAll("li").length;n++){var s=this.listParent.querySelectorAll("li")[n];t.appendChild(s.cloneNode(!0))}for(var o=0,r=this.listParent.querySelectorAll("li");o<r.length;o++){var a=r[o];sf.base.detach(a)}this.removeActionButtons();var l=[].slice.call(t.childNodes);sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL();for(var d=0;d<e.length;d++){for(var h=0;h<this.filesData.length;h++)this.filesData[h].name===e[d].name&&(this.listParent.appendChild(l[h]),sf.base.EventHandler.add(l[h].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(l[h]),i=d);i!==d&&this.createFileList([e[d]])}}else this.createFileList(e)},e.prototype.updateInitialFileDetails=function(e,t,i,n,s,o,r){var a={name:o?t[n].path.substring(1,t[n].path.length):r?sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):i.name,rawFile:i,size:i.size,status:"Ready to upload",type:this.getFileType(i.name),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};r&&(a.fileSource="paste"),a.status=""!==a.validationMessages.minSize?"File size is too small":""!==a.validationMessages.maxSize?"File size is too large":a.status,""===a.validationMessages.minSize&&""===a.validationMessages.maxSize||(a.statusCode="0"),s.push(a)},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"change",this.onSelectFiles,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"change",this.onSelectFiles)},e.prototype.destroy=function(){this.unWireEvents(),this.removeEventListener()},e}(),et=function(){function e(e){this.containsHtml=!1,this.isNotFromHtml=!1,this.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],this.blockNode=["div","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","td","tr","th","tbody","tfoot","thead","table","ul","header","article","nav","footer","section","aside","main","figure","figcaption"],this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.nodeSelectionObj=new G,this.parent.observer.on("success",this.success,this),this.parent.observer.on("failure",this.failure,this),this.parent.observer.on("selected",this.selected,this),this.parent.observer.on("uploading",this.uploading,this),this.parent.observer.on("pasteClean",this.pasteClean,this),this.parent.observer.on("removing",this.cancelingAndRemoving,this),this.parent.observer.on("canceling",this.cancelingAndRemoving,this),this.parent.observer.on("beforePasteUpload",this.beforeImageUpload,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("afterPasteCleanUp",this.pasteUpdatedValue,this)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.observer.off("success",this.success),this.parent.observer.off("failure",this.failure),this.parent.observer.off("selected",this.selected),this.parent.observer.off("uploading",this.uploading),this.parent.observer.off("pasteClean",this.pasteClean),this.parent.observer.off("removing",this.cancelingAndRemoving),this.parent.observer.off("canceling",this.cancelingAndRemoving),this.parent.observer.off("beforePasteUpload",this.beforeImageUpload),this.parent.observer.off(t,this.destroy),this.parent.observer.off("afterPasteCleanUp",this.pasteUpdatedValue)},e.prototype.pasteClean=function(e){var t,n=this,s={requestType:"Paste",editorMode:this.parent.editorMode,event:e},o=null;if(e.args&&!sf.base.isNullOrUndefined(e.args.clipboardData)&&(o=e.args.clipboardData.getData("text/html")),this.parent.beforePasteCleanupEnabled&&this.parent.dotNetRef.invokeMethodAsync("BeforePasteCleanUp",{value:o}),e.args&&null!==o&&"HTML"===this.parent.editorMode){if(0===o.length){var r=new RegExp(/<\/[a-z][\s\S]*>/i);o=e.args.clipboardData.getData("text/plain"),this.isNotFromHtml=""!==o,o=(o=o.replace(/</g,"&lt;")).replace(/>/g,"&gt;"),this.containsHtml=r.test(o);var a=e&&e.args.clipboardData&&e.args.clipboardData.items.length>0?null===e.args.clipboardData.items[0].getAsFile()?sf.base.isNullOrUndefined(e.args.clipboardData.items[1])?null:e.args.clipboardData.items[1].getAsFile():e.args.clipboardData.items[0].getAsFile():null;if(this.parent.observer.notify(l,{file:a,args:e.args,text:o,callBack:function(r){"object"===i(t=r)?n.parent.formatter.editorManager.execCommand("Images","Image",e.args,n.imageFormatting.bind(n,s),"pasteCleanup",t,"pasteCleanupModule"):o=t}}),!r.test(o)){var d=sf.base.createElement("div");d.innerHTML=this.splitBreakLine(o),o=d.innerHTML}}else o.length>0&&this.parent.formatter.editorManager.observer.notify("ms_word_cleanup",{args:e.args,text:e.text,allowedStylePropertiesArray:this.parent.pasteCleanupSettings.allowedStyleProps,callBack:function(e){o=e.trim()}});var h=document,c=this.nodeSelectionObj.getRange(h);this.saveSelection=this.nodeSelectionObj.save(c,h),this.pasteArgs=s,e.args.preventDefault(),this.parent.afterPasteCleanupEnabled?this.parent.dotNetRef.invokeMethodAsync("AfterPasteCleanUp",{value:o}):this.pasteUpdatedValue(o)}},e.prototype.pasteUpdatedValue=function(e){var t=this.parent.afterPasteCleanupEnabled?e.text:e;if(this.parent.pasteCleanupSettings.prompt){var i=sf.base.createElement("div");i.innerHTML=t,""===i.textContent&&sf.base.isNullOrUndefined(i.querySelector("img"))&&sf.base.isNullOrUndefined(i.querySelector("table"))||this.pasteDialog(t,this.pasteArgs)}else this.parent.pasteCleanupSettings.plainText?this.plainFormatting(t,this.pasteArgs):this.parent.pasteCleanupSettings.keepFormat?this.formatting(t,!1,this.pasteArgs):this.formatting(t,!0,this.pasteArgs)},e.prototype.splitBreakLine=function(e){for(var t=e.split("\n"),i="",n=0;n<t.length;n++){if(""===t[n].trim())i+=x(this.parent);else i+="<p>"+this.makeSpace(t[n]).trim()+"</p>"}return i},e.prototype.makeSpace=function(e){for(var t="",i=!0,n=e.split(" "),s=0;s<n.length;s++)""===n[s].trim()?t+=i?"&nbsp;":" ":(i=!1,t+=n[s]+" ");return t},e.prototype.imgUploading=function(e){var t=e.querySelectorAll(".pasteContent_Img");if(this.parent.insertImageSettings.saveUrl&&t.length>0){for(var i=[],n=[],s=[],o=0;o<t.length;o++)t[o].getAttribute("src").split(",")[0].indexOf("base64")>=0&&(i.push(t[o].getAttribute("src")),n.push(sf.base.getUniqueID("rte_image")),s.push(t[o]));var r=[];for(o=0;o<i.length;o++)r.push(this.base64ToFile(i[o],n[o]));for(o=0;o<r.length;o++)this.uploadMethod(r[o],s[o]);(sf.base.isNullOrUndefined(this.parent.insertImageSettings.saveUrl)||sf.base.isNullOrUndefined(this.parent.insertImageSettings.path))&&"Blob"===this.parent.insertImageSettings.saveFormat&&this.getBlob(t)}else"Blob"===this.parent.insertImageSettings.saveFormat&&this.getBlob(t);var a=e.querySelectorAll(".pasteContent_Img");for(o=0;o<a.length;o++)a[o].classList.remove("pasteContent_Img"),""===a[o].getAttribute("class").trim()&&t[o].removeAttribute("class")},e.prototype.getBlob=function(e){for(var t=0;t<e.length;t++)if(!sf.base.isNullOrUndefined(e[t].getAttribute("src"))&&e[t].getAttribute("src").split(",")[0].indexOf("base64")>=0){var i=URL.createObjectURL(I(e[t].getAttribute("src")));e[t].setAttribute("src",i)}},e.prototype.uploadMethod=function(e,t){var i=this;this.uploadImgElem=t;var n=document.createElement("div");document.body.appendChild(n),n.setAttribute("display","none"),this.uploadImgElem.style.opacity="0.5";var s=sf.base.createElement("div");this.parent.element.appendChild(s);var o=sf.base.createElement("input",{id:this.parent.element.id+"_upload",attrs:{type:"File",name:"UploadFiles"}}),r=this.parent.iframeSettings.enable?-50:-90;this.popupObj=new sf.popups.Popup(s,{relateTo:this.uploadImgElem,height:"85px",width:"300px",offsetY:r,content:o,viewPortElement:this.parent.element,position:{X:"center",Y:"top"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(e){i.parent.isBlur=!1,i.popupObj.destroy(),sf.base.detach(i.popupObj.element)}}),this.popupObj.element.style.display="none",sf.base.addClass([this.popupObj.element],["e-popup-open","e-rte-upload-popup"]);var a=e.size>1e6?300:100;setTimeout((function(){i.refreshPopup(t,i.popupObj)}),a),this.rawFile=void 0;var l={asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl},cssClass:"e-rte-dialog-upload",enableRtl:this.parent.enableRtl,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString()};this.uploadObj=new $e(l,this.popupObj.element.childNodes[0],this.parent);var d=[{name:e.name,rawFile:e,size:e.size,type:e.type,validationMessages:{minSize:"",maxSize:""},statusCode:"1"}];this.uploadObj.createFileList(d),this.uploadObj.filesData.push(d[0]),this.rawFile=d,this.uploadObj.upload(d),this.popupObj.element.getElementsByClassName("e-file-select-wrap")[0].style.display="none",sf.base.detach(this.popupObj.element.querySelector(".e-rte-dialog-upload .e-file-select-wrap"))},e.prototype.uploading=function(e){this.parent.inputElement.contentEditable="false"},e.prototype.success=function(e){var t=this;setTimeout((function(){t.popupClose(t.popupObj,t.uploadImgElem,e)}),900)},e.prototype.failure=function(e){var t=this;setTimeout((function(){t.uploadFailure(t.uploadImgElem,t.popupObj,e)}),900)},e.prototype.selected=function(e){this.rawFile=e.filesData},e.prototype.cancelingAndRemoving=function(e){this.parent.inputElement.contentEditable="true"," "===this.uploadImgElem.nextSibling.textContent&&sf.base.detach(this.uploadImgElem.nextSibling),sf.base.detach(this.uploadImgElem),this.popupObj.close()},e.prototype.beforeImageUpload=function(e){var t,i=this;if(this.parent.beforeUploadImageEnabled)return(t=JSON.parse(JSON.stringify(e))).filesData=this.rawFile,new Promise((function(e){i.parent.dotNetRef.invokeMethodAsync("BeforeUpload",t).then((function(t){t.cancel||(i.uploadObj.currentRequestHeader=t.currentRequest?t.currentRequest:i.uploadObj.currentRequestHeader,i.uploadObj.customFormDatas=t.customFormData&&t.customFormData.length>0?t.customFormData:i.uploadObj.customFormDatas,sf.base.isNullOrUndefined(i.parent.insertImageSettings.saveUrl)?i.popupClose(i.popupObj,i.uploadImgElem,null):i.parent.observer.notify("beforePasteUploadCallBack",t),e())}))}));sf.base.isNullOrUndefined(this.parent.insertImageSettings.saveUrl)?this.popupClose(this.popupObj,this.uploadImgElem,null):this.parent.observer.notify("beforePasteUploadCallBack",e)},e.prototype.uploadFailure=function(e,t,i){this.parent.inputElement.contentEditable="true",sf.base.detach(e),t&&t.close(),this.parent.onImageUploadFailedEnabled&&this.parent.dotNetRef.invokeMethodAsync("PasteImageUploadFailed",i),this.uploadObj.destroy(),this.uploadObj=void 0},e.prototype.popupClose=function(e,t,i){var n=this;this.parent.inputElement.contentEditable="true",!sf.base.isNullOrUndefined(this.parent.insertImageSettings.saveUrl)&&this.parent.onImageUploadSuccessEnabled?this.parent.dotNetRef.invokeMethodAsync("PasteImageUploadSuccess",i).then((function(e){n.pasteUploadSuccessCallback(t,i,e)})):this.pasteUploadSuccessCallback(t,i),e.close(),t.style.opacity="1",this.uploadObj.destroy(),this.uploadObj=void 0},e.prototype.pasteUploadSuccessCallback=function(e,t,i){if(!sf.base.isNullOrUndefined(this.parent.insertImageSettings.path))if(sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.file)||sf.base.isNullOrUndefined(i.file.name)){n=this.parent.insertImageSettings.path+t.file.name;e.src=n,e.setAttribute("alt",t.file.name)}else{var n=this.parent.insertImageSettings.path+i.file.name;e.src=n,e.setAttribute("alt",i.file.name)}},e.prototype.refreshPopup=function(e,t){(this.parent.iframeSettings.enable?this.parent.element.offsetTop+e.offsetTop:e.offsetTop)>this.parent.element.offsetTop+this.parent.element.offsetHeight?(t.relateTo=this.parent.inputElement,t.offsetY=this.parent.iframeSettings.enable?-30:-65,t.element.style.display="block"):t&&(t.refreshPosition(e),t.element.style.display="block")},e.prototype.base64ToFile=function(e,t){for(var i=e.split(","),n=i[0].match(/:(.*?);/)[1].split("/")[1],s=atob(i[1]),o=s.length,r=new Uint8Array(o);o--;)r[o]=s.charCodeAt(o);if(sf.base.Browser.isIE||navigator.appVersion.indexOf("Edge")>-1){var a=new Blob([r],{type:n});return sf.base.extend(a,{name:t+"."+(sf.base.isNullOrUndefined(n)?"":n)}),a}return new File([r],t+"."+(sf.base.isNullOrUndefined(n)?"":n),{type:n})},e.prototype.imageFormatting=function(e,t){var i=sf.base.createElement("span");i.appendChild(t.elements[0]);var n=i.innerHTML,s=document,o=this.nodeSelectionObj.getRange(s);this.saveSelection=this.nodeSelectionObj.save(o,s),this.parent.pasteCleanupSettings.prompt?this.pasteDialog(n,e):this.parent.pasteCleanupSettings.plainText?this.plainFormatting(n,e):this.parent.pasteCleanupSettings.keepFormat?this.formatting(n,!1,e):this.formatting(n,!0,e)},e.prototype.selectFormatting=function(e){""!==this.newRTEHeight&&(this.parent.element.style.height=this.preRTEHeight),"KeepFormat"===e?this.formatting(this.currentValue,!1,this.currentArgs):"CleanFormat"===e?this.formatting(this.currentValue,!0,this.currentArgs):"PlainTextFormat"===e&&this.plainFormatting(this.currentValue,this.currentArgs)},e.prototype.pasteDialog=function(e,t){this.currentValue=e,this.currentArgs=t,this.preRTEHeight=this.parent.height.toString(),this.newRTEHeight="",this.parent.element.offsetHeight<265&&(this.newRTEHeight=305..toString()),""!==this.newRTEHeight&&(this.parent.element.style.height=this.newRTEHeight+"px"),this.parent.openPasteDialog()},e.prototype.formatting=function(e,t,i){var n=this,s=sf.base.createElement("div",{className:"pasteContent",styles:"display:inline;"});this.isNotFromHtml&&this.containsHtml&&(e=this.splitBreakLine(e)),s.innerHTML=e,null!==this.parent.pasteCleanupSettings.deniedTags&&(s=this.deniedTags(s)),(t||null!==this.parent.pasteCleanupSettings.deniedAttrs)&&(s=this.deniedAttributes(s,t)),null!==this.parent.pasteCleanupSettings.allowedStyleProps&&(s=this.allowedStyle(s)),this.saveSelection.restore(),s.innerHTML=this.sanitizeHelper(s.innerHTML);for(var o=s.querySelectorAll("img"),r=0;r<o.length;r++)o[r].classList.add("pasteContent_Img"),"auto"!=this.parent.insertImageSettings.width&&o[r].setAttribute("width",this.parent.insertImageSettings.width),"0"!=this.parent.insertImageSettings.minWidth&&(o[r].style.minWidth=this.parent.insertImageSettings.minWidth.toString()),null!=this.parent.insertImageSettings.maxWidth&&(o[r].style.maxWidth=this.parent.imageModule.getMaxWidth().toString()),"auto"!=this.parent.insertImageSettings.height&&o[r].setAttribute("height",this.parent.insertImageSettings.height),"0"!=this.parent.insertImageSettings.minHeight&&(o[r].style.minHeight=this.parent.insertImageSettings.minHeight.toString()),null!=this.parent.insertImageSettings.maxHeight&&(o[r].style.maxHeight=this.parent.insertImageSettings.maxHeight.toString());this.addTempClass(s),""===s.textContent&&sf.base.isNullOrUndefined(s.querySelector("img"))&&sf.base.isNullOrUndefined(s.querySelector("table"))||(this.parent.formatter.editorManager.execCommand("inserthtml","pasteCleanup",i,(function(e){sf.base.extend(i,{elements:e.elements,imageElements:e.imgElem},!0),n.parent.formatter.onSuccess(n.parent,i)}),s),this.removeTempClass(),this.parent.observer.notify("toolbar-refresh",{}),this.imgUploading(this.parent.inputElement))},e.prototype.addTempClass=function(e){for(var t=e.children,i=0;i<t.length;i++)t[i].classList.add("pasteContent_RTE")},e.prototype.removeTempClass=function(){for(var e=this.parent.inputElement.querySelectorAll(".pasteContent_RTE"),t=0;t<e.length;t++)e[t].classList.remove("pasteContent_RTE"),""===e[t].getAttribute("class")&&e[t].removeAttribute("class")},e.prototype.sanitizeHelper=function(e){return e=w(e,this.parent)},e.prototype.plainFormatting=function(e,t){var i=this,n=sf.base.createElement("div",{className:"pasteContent",styles:"display:inline;"});if(n.innerHTML=e,this.detachInlineElements(n),this.getTextContent(n),""!==n.textContent.trim()){if(!sf.base.isNullOrUndefined(n.firstElementChild)&&"BR"!==n.firstElementChild.tagName){var s=n.firstElementChild;if(!sf.base.isNullOrUndefined(n.firstElementChild)){for(var o=sf.base.createElement("span"),r=0,a=0;r<s.childNodes.length;r++,a++)if("#text"===s.childNodes[r].nodeName)o.appendChild(s.childNodes[r]),n.insertBefore(o,n.firstElementChild),r--;else{if("#text"===s.childNodes[r].nodeName||0!==a)break;for(var l=0;l<s.childNodes[r].childNodes.length;l++)o.appendChild(s.childNodes[r].childNodes[l]),n.insertBefore(o,n.firstElementChild),l--;r--}s.hasChildNodes()||sf.base.detach(s)}}this.removeEmptyElements(n),this.saveSelection.restore(),n.innerHTML=this.sanitizeHelper(n.innerHTML),this.addTempClass(n),this.parent.formatter.editorManager.execCommand("inserthtml","pasteCleanup",t,(function(e){sf.base.extend(t,{elements:e.elements,imageElements:e.imgElem},!0),i.parent.formatter.onSuccess(i.parent,t)}),n),this.removeTempClass()}else this.saveSelection.restore(),sf.base.extend(t,{elements:[]},!0),this.parent.formatter.onSuccess(this.parent,t)},e.prototype.getTextContent=function(e){for(var t=0;t<this.blockNode.length;t++)for(var i=e.querySelectorAll(this.blockNode[t]),n=0;n<i.length;n++){for(var s=void 0,o=0,r=0,a=void 0;o<i[n].childNodes.length;o++,r++)if("DIV"===i[n].childNodes[o].nodeName||"P"===i[n].childNodes[o].nodeName||"#text"===i[n].childNodes[o].nodeName&&"&nbsp;"!==i[n].childNodes[o].nodeValue.replace(/\u00a0/g,"&nbsp;")&&""===i[n].childNodes[o].textContent.trim())s=i[n].childNodes[o].parentElement,i[n].childNodes[o].parentElement.parentElement.insertBefore(i[n].childNodes[o],i[n].childNodes[o].parentElement),o--;else{if(s=i[n].childNodes[o].parentElement,"text"===a){s.previousElementSibling.appendChild(i[n].childNodes[o])}else{var l=sf.base.createElement("div",{id:"newDiv"});l.appendChild(i[n].childNodes[o]),s.parentElement.insertBefore(l,s)}o--,a="text"}sf.base.isNullOrUndefined(s)||sf.base.detach(s)}var d=e.querySelectorAll("*");for(t=0;t<d.length;t++){var h=d[t].attributes;for(n=0;n<h.length;n++)d[t].removeAttribute(h[n].name),n--}},e.prototype.detachInlineElements=function(e){for(var t=0;t<this.inlineNode.length;t++)for(var i=e.querySelectorAll(this.inlineNode[t]),n=0;n<i.length;n++){for(var s=void 0,o=0;o<i[n].childNodes.length;o++)s=i[n].childNodes[o].parentElement,i[n].childNodes[o].parentElement.parentElement.insertBefore(i[n].childNodes[o],i[n].childNodes[o].parentElement),o--;sf.base.isNullOrUndefined(s)||sf.base.detach(s)}},e.prototype.findDetachEmptyElem=function(e){return sf.base.isNullOrUndefined(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"pasteContent"!==e.parentElement.getAttribute("class")?this.findDetachEmptyElem(e.parentElement):e},e.prototype.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=0;i<t.length;i++)if("BR"!==t[i].tagName){var n=this.findDetachEmptyElem(t[i]);sf.base.isNullOrUndefined(n)||sf.base.detach(n)}},e.prototype.tagGrouping=function(e){for(var t=e.slice(),i=Object.keys(re),n=i.map((function(e){return re[e]})),s=[],o=0;o<t.length;o++)if(t[o].split("[").length>1&&(t[o]=t[o].split("[")[0].trim()),i.indexOf(t[o])>-1)for(var r=0;r<n[i.indexOf(t[o])].length;r++)t.indexOf(n[i.indexOf(t[o])][r])<0&&s.indexOf(n[i.indexOf(t[o])][r])<0&&s.push(n[i.indexOf(t[o])][r]);return e.concat(s)},e.prototype.attributesfilter=function(e){for(var t=0;t<e.length;t++)if(e[t].split("[").length>1){for(var i=e[t].split("[")[1].split("]")[0].split(","),n=[],s=[],o=0;o<i.length;o++)i[o].indexOf("!")<0?n.push(i[o].trim()):s.push(i[o].split("!")[1].trim());var r=n.length>1?n.join("]["):n.join(),a=s.length>1?s.join("]["):s.join();if(a.length>0){var l=""!==r?e[t].split("[")[0]+"["+r+"]":e[t].split("[")[0];e[t]=l+":not(["+a+"])"}else e[t]=e[t].split("[")[0]+"["+r+"]"}return e},e.prototype.deniedTags=function(e){var t=sf.base.isNullOrUndefined(this.parent.pasteCleanupSettings.deniedTags)?[]:this.parent.pasteCleanupSettings.deniedTags.slice();t=this.attributesfilter(t),t=this.tagGrouping(t);for(var i=0;i<t.length;i++)for(var n=e.querySelectorAll(t[i]),s=n.length-1;s>=0;s--){for(var o=n[s].parentNode;n[s].firstChild;)o.insertBefore(n[s].firstChild,n[s]);o.removeChild(n[s])}return e},e.prototype.deniedAttributes=function(e,t){var i=sf.base.isNullOrUndefined(this.parent.pasteCleanupSettings.deniedAttrs)?[]:this.parent.pasteCleanupSettings.deniedAttrs.slice();t&&i.push("style");for(var n=0;n<i.length;n++)for(var s=e.querySelectorAll("["+i[n]+"]"),o=0;o<s.length;o++)s[o].removeAttribute(i[n]);return e},e.prototype.allowedStyle=function(e){var t=sf.base.isNullOrUndefined(this.parent.pasteCleanupSettings.allowedStyleProps)?[]:this.parent.pasteCleanupSettings.allowedStyleProps.slice();t.push("list-style-type","list-style");for(var i=e.querySelectorAll("[style]"),n=0;n<i.length;n++){for(var s,o=[],r=i[n].getAttribute("style").split(";"),a=0;a<r.length;a++)t.indexOf(r[a].split(":")[0].trim())>=0&&o.push(r[a]);i[n].removeAttribute("style"),(s=""===o.join(";").trim()?o.join(";"):o.join(";")+";")&&i[n].setAttribute("style",s)}return e},e}(),tt=function(){function e(){}return e.prototype.getLineNumber=function(e,t){return e.value.substr(0,t).split("\n").length},e.prototype.getSelectedText=function(e){var t=e.selectionStart,i=e.selectionEnd;return e.value.substring(t,i)},e.prototype.getAllParents=function(e){return e.split("\n")},e.prototype.getSelectedLine=function(e){return this.getAllParents(e.value)[this.getLineNumber(e,e.selectionStart)-1]},e.prototype.getLine=function(e,t){return this.getAllParents(e.value)[t]},e.prototype.getSelectedParentPoints=function(e){var t=this.getAllParents(e.value),i=this.getLineNumber(e,e.selectionStart),n=this.getLineNumber(e,e.selectionEnd),s=this.getSelectedText(e).split("\n"),o=[],r=t[i-1],a=t.slice(0,i-1).join("").length,l={};if(l.line=i-1,l.start=a+l.line,l.end=""!==r?l.start+r.length+1:l.start+r.length,l.text=r,o.push(l),s.length>1){for(var d=1;d<s.length-1;d++){var h={};h.line=o[d-1].line+1,h.start=(s[d],o[d-1].end),h.end=h.start+s[d].length+1,h.text=s[d],o.push(h)}var c={};c.line=o[o.length-1].line+1,c.start=o[o.length-1].end,c.end=c.start+t[n-1].length+1,c.text=t[n-1],o.push(c)}return o},e.prototype.setSelection=function(e,t,i){e.setSelectionRange(t,i),e.focus()},e.prototype.save=function(e,t){this.selectionStart=e,this.selectionEnd=t},e.prototype.restore=function(e){this.setSelection(e,this.selectionStart,this.selectionEnd)},e.prototype.isStartWith=function(e,t){var i=!1;e&&(i=(e.trim()===t.trim()?new RegExp("^("+this.replaceSpecialChar(t.trim())+")","gim"):new RegExp("^("+this.replaceSpecialChar(t)+")","gim")).test(e.trim()));return i},e.prototype.replaceSpecialChar=function(e){return e.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/g,"\\$&")},e.prototype.isClear=function(e,t){for(var i=0;i<e.length;i++)if(new RegExp(t,"gim").test(e[i].text))return!0;return!1},e.prototype.getSelectedInlinePoints=function(e){return{start:e.selectionStart,end:e.selectionEnd,text:this.getSelectedText(e)}},e}(),it=function(){function e(e){this.toolbarStatus=this.prevToolbarStatus={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,uppercase:!1,lowercase:!1,inlinecode:!1,unorderedlist:!1,formats:null},this.selection=new tt,this.parent=e,this.element=this.parent.getEditPanel(),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("toolbar-refresh",this.onRefreshHandler,this),this.parent.observer.on(t,this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("toolbar-refresh",this.onRefreshHandler),this.parent.observer.off(t,this.removeEventListener)},e.prototype.onRefreshHandler=function(e){var t=this.selection.getSelectedParentPoints(this.element);this.toolbarStatus={orderedlist:!e.documentNode&&this.isListsApplied(t,"OL"),unorderedlist:!e.documentNode&&this.isListsApplied(t,"UL"),formats:this.currentFormat(t,e.documentNode),bold:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("Bold"),italic:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("Italic"),inlinecode:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("InlineCode"),strikethrough:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("StrikeThrough"),subscript:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("SubScript"),superscript:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("SuperScript"),uppercase:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("UpperCase")},this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("InlineCode")&&(this.toolbarStatus.formats="pre");var i=JSON.stringify(this.toolbarStatus);this.parent.observer.notify("toolbar-updated",this.toolbarStatus),JSON.stringify(this.prevToolbarStatus)!==i&&(this.parent.observer.notify("updateTbItemsStatus",{html:null,markdown:JSON.parse(i)}),this.prevToolbarStatus=JSON.parse(i))},e.prototype.isListsApplied=function(e,t){var i=!0;if("OL"===t)for(var n=0;n<e.length;n++){var s=e[n].text.trim().split(" ",2)[0]+" ";if(!/^[\d.]+[ ]+$/.test(s)){i=!1;break}}else for(n=0;n<e.length;n++)if(!this.selection.isStartWith(e[n].text,this.parent.formatter.listSyntax[t])){i=!1;break}return i},e.prototype.currentFormat=function(e,t){for(var i="p",n=Object.keys(this.parent.formatter.formatSyntax),s="backward"===this.element.selectionDirection?e[0].text:e[e.length-1].text,o=0;!t&&o<n.length;o++){if("pre"!==n[o]&&this.selection.isStartWith(s,this.parent.formatter.formatSyntax[n[o]])){i=n[o];break}if("pre"===n[o]&&this.codeFormat()){i=n[o];break}}return i},e.prototype.codeFormat=function(){var e,t=!1,i=this.parent.inputElement,n=i.selectionStart,s=(e=n,function(t){return[t.slice(0,e),t.slice(e)]})(i.value),o=this.parent.formatter.formatSyntax.pre,r=this.getSelectedText(i);if(""!==r&&r===r.toLocaleUpperCase())return!0;if(""===r){var a=i.value.substr(s[0].length-1,1),l=s[1].substr(0,1);if(""!==a&&""!==l&&a.match(/[a-z]/i)&&a===a.toLocaleUpperCase()&&l===l.toLocaleUpperCase())return!0}return this.isCode(s[0],o)&&this.isCode(s[1],o)&&s[0].match(this.multiCharRegx(o)).length%2==1&&s[1].match(this.multiCharRegx(o)).length%2==1&&(t=!0),t},e.prototype.getSelectedText=function(e){return e.value.substring(e.selectionStart,e.selectionEnd)},e.prototype.isCode=function(e,t){return-1!==e.search("\\"+t)},e.prototype.multiCharRegx=function(e){return new RegExp("(\\"+e+")","g")},e}(),nt=function(){function e(e){sf.base.extend(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("lists-commands",this.applyListsHandler,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this),this.parent.observer.on("keyup-handler",this.keyUpHandler,this)},e.prototype.keyDownHandler=function(e){switch(e.event.which){case 9:this.tabKey(e)}switch(e.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.keyUpHandler=function(e){switch(e.event.which){case 13:this.enterKey(e)}},e.prototype.tabKey=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,n=t.selectionEnd,s=this.selection.getSelectedParentPoints(t),o=0,r=this.isNotFirstLine(t,s[0]);if(r||e.event.shiftKey){var a=this.olListType(),l=this.getListRegex();this.currentAction=this.getAction(s[0].text);for(var d=0;d<s.length;d++){var h=(e.event.shiftKey,s[d].line-1),c=this.selection.getLine(t,h);if(c&&(!e.event.shiftKey&&r||e.event.shiftKey)){var p=c.split(". "),u=e.event.shiftKey?-"\t".length:"\t".length,f=s[d].text.split("\t");if(e.event.shiftKey&&1===f.length)break;if("OL"===this.currentAction&&/^\d+$/.test(p[0].trim())&&a){e.event.preventDefault(),s[d].text=e.event.shiftKey?f.splice(1,f.length).join("\t"):"\t"+s[d].text;var m=this.getTabSpace(s[d].text),g=this.getTabSpace(c),v=s[d].text.split(". ");if(m===g)this.changeTextAreaValue(v,this.nextOrderedListValue(p[0].trim()),e,t,s,d,n);else if(g<m)this.changeTextAreaValue(v,"1. ",e,t,s,d,n);else for(;g.length>m.length;null){h-=1;var b=(c=this.selection.getLine(t,h)).trim().split(". ");if(/^\d+$/.test(b[0])&&(g=this.getTabSpace(c)).length<=m.length){this.changeTextAreaValue(v,this.nextOrderedListValue(b[0]),e,t,s,d,n);break}}}else("UL"===this.currentAction&&l.test(c.trim())||!a)&&(e.event.preventDefault(),s[d].text=e.event.shiftKey?f.splice(1,f.length).join("\t"):"\t"+s[d].text,t.value=t.value.substr(0,s[d].start)+s[d].text+"\n"+t.value.substr(s[d].end,t.value.length));if(i=0===d?i+u:i,o+=u,1!==s.length)for(var y=d;y<s.length;y++)s[y].start=0!==y?s[y].start+u:s[y].start,s[y].end=s[y].end+u}}this.restore(t,i,n+o,e)}else this.restore(t,i,n+o,e)},e.prototype.changeTextAreaValue=function(e,t,i,n,s,o,r){var a=t;e.splice(0,1);var l,d=this.selection.getAllParents(n.value).length,h="",c=this.getTabSpace(s[o].text),p=parseInt(a.split(".")[0],null),u=this.getTabSpace(s[o].text),f=!0,m=!0,g=-1,v=!0,b=0,y="";h=""!==this.selection.getLine(n,s[0].line+1)?"":h+n.value.substr(s[0].end,n.value.length);for(var w=1;w<d&&!sf.base.isNullOrUndefined(this.selection.getLine(n,s[0].line+w))&&""!==this.selection.getLine(n,s[0].line+w);w++){var C=this.selection.getLine(n,s[0].line+w),S=this.getTabSpace(C),E=C.split(". ");if(1===E.length){h+=n.value.substr(s[0].end+b,n.value.length);break}b+=C.length;var x=!1;if(l=i.event.shiftKey?c.length+1:c.length-1,S.length>u.length&&(v=!1),c.length!==S.length&&S.length<u.length?(m=!0,f=!1,x=!(!i.event.shiftKey||c.length!==S.length)&&(m=!1,!0)):v&&i.event.shiftKey&&c.length===S.length&&S.length===u.length&&(m=!1,x=!0),y=""===h?"":"\n",l===S.length&&m){var O=i.event.shiftKey?(g++,this.nextOrderedListValue(g.toString())):this.previousOrderedListValue(E[0]);E.splice(0,1),h=h+y+S+O+E.join(". ")}else if(c.length===S.length&&f||x){O=this.nextOrderedListValue(p.toString());p++,E.splice(0,1),h=h+y+S+O+E.join(". ")}else h=h+y+C,m=!1;u=this.getTabSpace(C)}s[o].text=this.getTabSpace(s[o].text)+a+e.join(". ")+"\n",n.value=n.value.substr(0,s[o].start)+s[o].text+h},e.prototype.getTabSpace=function(e){for(var t=e.split("\t"),i="",n=0;n<t.length&&""===t[n];n++)i+="\t";return i},e.prototype.isNotFirstLine=function(e,t){var i,n=t.text,s=t.line-1,o=this.selection.getLine(e,s),r=this.getListRegex(),a=!1;if(o){this.currentAction=this.getAction(o);var l=o.split(". ");i="OL"===this.currentAction?/^\d+$/.test(l[0].trim()):r.test(o.trim())}if(o&&i){var d=this.getTabSpace(n),h=this.getTabSpace(o);for(a=d===h||a;h.length>d.length;null){s-=1;l=(o=this.selection.getLine(e,s)).trim().split(". ");if(("OL"===this.currentAction?/^\d+$/.test(l[0]):r.test(o.trim()))&&(h=this.getTabSpace(o)).length<=d.length){a=!0;break}}}return a},e.prototype.getAction=function(e){var t=e.split(". ")[0],i=/^\d+$/.test(t.trim()),n=e.trim().split(new RegExp("^("+this.selection.replaceSpecialChar(this.syntax.UL).trim()+")"))[1];return i?"OL":n?"UL":"NOTLIST"},e.prototype.nextOrderedListValue=function(e){return(parseInt(e,null)+1).toString()+". "},e.prototype.previousOrderedListValue=function(e){return(parseInt(e,null)-1).toString()+". "},e.prototype.enterKey=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,n=t.selectionEnd,s=this.selection.getSelectedParentPoints(t),o=this.selection.getLine(t,s[0].line-1),r=this.olListType(),a=this.getListRegex(),l=[];sf.base.isNullOrUndefined(o)||(l=o.split(". "),this.currentAction=this.getAction(o));var d=0;if("OL"===this.currentAction&&l.length>1&&/^\d+$/.test(l[0].trim())&&r&&""!==l[1]){var h=this.getTabSpace(o);this.currentAction=this.getAction(o);var c=this.nextOrderedListValue(l[0]);s[0].text=h+c+s[0].text;for(var p=this.selection.getAllParents(t.value).length,u="\n",f=this.getTabSpace(o),m=this.getTabSpace(s[0].text),g=!0,v=1;v<p&&""!==t.value.substr(s[0].end,t.value.length);v++){var b=this.selection.getLine(t,s[0].line+v);if(sf.base.isNullOrUndefined(b))u+="";else{var y=b.split(". "),w=this.getTabSpace(b);if(w.length<m.length&&(g=!1),y.length>1&&/^\d+$/.test(y[0].trim())&&f.length===w.length&&g){var C=this.nextOrderedListValue(y[0]);y.splice(0,1),u=u+w+C+y.join(". ")+"\n"}else u=u+b+"\n",m=this.getTabSpace(b)}}t.value=t.value.substr(0,s[0].start)+f+c+this.selection.getLine(t,s[0].line)+u,i=i+c.length+h.length,d+=c.length+h.length}else if("UL"===this.currentAction&&o&&a.test(o.trim())&&""!==o.trim().replace(a,"")||"OL"===this.currentAction&&!r){h=this.getTabSpace(o),c=this.syntax[this.currentAction];s[0].text=h+c+s[0].text+(s[0].text.trim().length>0?"\n":""),t.value=t.value.substr(0,s[0].start)+s[0].text+t.value.substr(s[0].end,t.value.length),i=i+c.length+h.length,d+=c.length+h.length}this.restore(t,i,n+d,e)},e.prototype.olListType=function(){var e=this.syntax.OL.split(".,");return(1===e.length?null:parseInt(e[2].trim(),null)-parseInt(e[0].trim(),null))?1:0},e.prototype.applyListsHandler=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd),this.currentAction=e.subCommand;for(var i,n=t.selectionStart,s=t.selectionEnd,o=0,r=0,a=0,l=this.selection.getSelectedParentPoints(t),d="",h=this.olListType(),c={},p=0;p<l.length;p++)if(i=h?"OL"===this.currentAction?p+h+". ":this.syntax[this.currentAction]:"OL"===this.currentAction?this.syntax.OL:this.syntax[this.currentAction],this.selection.isStartWith(l[p].text,i))l[p].text=l[p].text.replace(i,""),t.value=t.value.substr(0,l[p].start+a)+l[p].text+"\n"+t.value.substr(l[p].end+a,t.value.length),a-=i.length,r=i.length,this.restore(t,n-r,s+a,null);else{if(""===l[p].text&&0===p&&(this.selection.save(n,s),1!==l.length))for(var u=p;u<l.length;u++)l[u].start=0!==u?1+l[u].start:l[u].start,l[u].end=1+l[u].end;var f=sf.base.isNullOrUndefined(l[p-1])?0:this.getTabSpace(l[p-1].text).length,m=this.appliedLine(l[p].text,i,c,f);if(d=m.line?d:i,l[p].text=m.line?m.line:d+l[p].text,m.space=m.space?m.space:0,t.value=t.value.substr(0,l[p].start+a)+l[p].text+"\n"+t.value.substr(l[p].end,t.value.length),n=0===p?n+d.length+m.space>0?n+d.length+m.space:0:n,o+=d.length+m.space,1!==l.length)for(u=p;u<l.length;u++)l[u].start=0!==u?d.length+l[u].start+m.space:l[u].start,l[u].end=d.length+l[u].end+m.space;this.restore(t,n,s+o,null)}this.restore(t,null,null,e)},e.prototype.appliedLine=function(e,t,i,n){var s={},o=new RegExp("^["+this.syntax.UL.trim()+"]"),r=e.split(". "),a=r[0]+". ",l=o.test(e.trim())||e.trim()===this.syntax.OL.trim()||e.trim()===this.syntax.UL.trim()||/^\d+$/.test(r[0].trim()),d=this.olListType(),h=this.getTabSpace(e).length;if("OL"===this.currentAction&&d&&(i[h.toString()]=sf.base.isNullOrUndefined(i[h.toString()])?1:i[h.toString()].valueOf()+1,t=i[h.toString()].valueOf().toString()+". ",!sf.base.isNullOrUndefined(n)&&n>h&&(i[n.toString()]=0)),l){var c=void 0,p=void 0;o.test(e.trim())?(p=this.syntax.UL,c=t,s.space=t.trim().length-this.syntax.UL.trim().length):/^\d+$/.test(r[0].trim())&&d?(p=r[0].trim()+". ",c=t,s.space=this.syntax.UL.trim().length-a.trim().length):/^\d+$/.test(r[0].trim())&&(p=r[0].trim()+". ",c=this.syntax.UL,s.space=this.syntax.UL.trim().length-a.trim().length),s.line=e.replace(p,c)}return s},e.prototype.restore=function(e,t,i,n){sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t)||this.selection.save(t,i),sf.base.isNullOrUndefined(n)||this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e.prototype.getListRegex=function(){for(var e="",t=Object.keys(this.syntax),i=0;i<t.length;i++){var n=this.selection.replaceSpecialChar(this.syntax[t[i]]);e+=""===e?"^("+n+")|^("+n.trim()+")":"|^("+n+")|^("+n.trim()+")"}return new RegExp(e)},e}(),st=function(){function e(e){sf.base.extend(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("format-type",this.applyFormats,this)},e.prototype.applyFormats=function(e){e.subCommand=e.subCommand.toLowerCase();var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=this.selection.getSelectedParentPoints(t);if(this.isAppliedFormat(i)===e.subCommand){if("pre"===e.subCommand){if(!(i.length>1))return;this.applyCodeBlock(t,e,i)}return this.cleanFormat(t),void this.restore(t,t.selectionStart,t.selectionEnd,e)}if("p"===e.subCommand)return this.cleanFormat(t),void this.restore(t,t.selectionStart,t.selectionEnd,e);("pre"===e.subCommand&&1!==i.length||"pre"!==e.subCommand)&&this.cleanFormat(t,e.subCommand);var n=t.selectionStart,s=t.selectionEnd,o=0;if(i=this.selection.getSelectedParentPoints(t),"pre"!==e.subCommand){for(var r=0;r<i.length;r++)if(""===i[r].text||this.selection.isStartWith(i[r].text,"\\"+this.syntax[e.subCommand])){if(""===i[r].text&&0===r&&(this.selection.save(n,s),0===this.selection.getSelectedText(t).length&&(i[r].text=this.syntax[e.subCommand],t.value=t.value.substr(0,i[r].start)+this.syntax[e.subCommand]+t.value.substr(i[r].end,t.value.length),n=0===r?n+this.syntax[e.subCommand].length:n,o+=this.syntax[e.subCommand].length),1!==i.length))for(a=r;a<i.length;a++)i[a].start=0!==a?1+i[a].start:i[a].start,i[a].end=1+i[a].end}else if(i[r].text=this.syntax[e.subCommand]+i[r].text,t.value=t.value.substr(0,i[r].start)+i[r].text+"\n"+t.value.substr(i[r].end,t.value.length),n=0===r?n+this.syntax[e.subCommand].length:n,o+=this.syntax[e.subCommand].length,1!==i.length)for(var a=r;a<i.length;a++)i[a].start=0!==a?this.syntax[e.subCommand].length+i[a].start:i[a].start,i[a].end=this.syntax[e.subCommand].length+i[a].end;this.restore(t,n,s+o,e)}else i.length>1?this.applyCodeBlock(t,e,i):(sf.base.extend(e,e,{subCommand:"InlineCode"},!0),this.parent.observer.notify("command-type",e))},e.prototype.clearRegex=function(){for(var e="",t=Object.keys(this.syntax),i=0;i<t.length&&"pre"!==t[i]&&"p"!==t[i];i++)e+=""===e?"^("+this.selection.replaceSpecialChar(this.syntax[t[i]].trim())+")":"|^("+this.selection.replaceSpecialChar(this.syntax[t[i]].trim())+")";return e},e.prototype.cleanFormat=function(e,t){var i=this.selection.getSelectedParentPoints(e),n=e.selectionStart,s=e.selectionEnd,o=0;if(this.selection.isClear(i,this.clearRegex())){for(var r=0;r<i.length;r++){for(var a=Object.keys(this.syntax),l=0;""!==i[r].text&&l<a.length;l++){var d=this.syntax[a[l]];if(a[l]!==t){var h=new RegExp("^("+this.selection.replaceSpecialChar(d)+")","gim");if(h.test(i[r].text)){if(i[r].text=i[r].text.replace(h,""),e.value=e.value.substr(0,i[r].start)+i[r].text+"\n"+e.value.substr(i[r].end,e.value.length),n=0===r?n-d.length>0?n-d.length:0:n,o+=d.length,1!==i.length)for(var c=0;c<i.length;c++)i[c].start=0!==c?i[c].start-d.length:i[c].start,i[c].end=i[c].end-d.length;break}}}if(""===i[r].text&&0===r&&(this.selection.save(n,s),1!==i.length))for(l=r;l<i.length;l++)i[l].start=0!==l?1+i[l].start:i[l].start,i[l].end=1+i[l].end}this.restore(e,n,s-o)}},e.prototype.applyCodeBlock=function(e,t,i){var n=t.subCommand,s=i[0].start,o=i[i.length-1].end,r=this.selection.getAllParents(e.value),a=r[i[0].line-1],l=r[i.length+1+1];if(this.selection.isStartWith(a,this.syntax.pre.split("\n")[0])||this.selection.isStartWith(l,this.syntax.pre.split("\n")[0])){var d=this.syntax[n],h=this.parent.markdownSelection.getSelectedInlinePoints(e),c=e.value.substr(0,e.selectionStart).lastIndexOf(d),p=e.value.substr(e.selectionEnd,e.selectionEnd).indexOf(d);p+=h.end;var u=this.replaceAt(e.value.substr(0,h.start),d,"",c,h.start),f=this.replaceAt(e.value.substr(h.end,e.value.length),d,"",0,p);e.value=u+h.text+f,s=this.selection.selectionStart-d.length,o=this.selection.selectionEnd-d.length}else{var m=e.value.substring(s,o).split("\n"),g=""===m[m.length-1]?"":"\n";e.value=e.value.substr(0,s)+this.syntax[n]+e.value.substring(s,o)+g+this.syntax[n]+e.value.substr(o,e.value.length),s=this.selection.selectionStart+this.syntax[n].length,o=this.selection.selectionEnd+this.syntax[n].length-1}this.restore(e,s,o,t)},e.prototype.replaceAt=function(e,t,i,n,s){return e.slice(0,n)+e.slice(n,s).replace(t,i)+e.slice(s)},e.prototype.restore=function(e,t,i,n){this.selection.save(t,i),this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:n.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e.prototype.isAppliedFormat=function(e,t){for(var i="p",n=(Object.keys(this.syntax),Object.keys(this.syntax)),s="backward"===this.parent.element.selectionDirection?e[0].text:e[e.length-1].text,o=0;!t&&o<n.length;o++){if("pre"!==n[o]&&this.selection.isStartWith(s,this.syntax[n[o]])){i=n[o];break}if("pre"===n[o]){var r=this.selection.getAllParents(this.parent.element.value),a=r[e[0].line-1],l=r[e.length+1];if(this.selection.isStartWith(a,this.syntax[n[o]].split("\n")[0])&&this.selection.isStartWith(l,this.syntax[n[o]].split("\n")[0])){i=n[o];break}}}return i},e}(),ot=function(){function e(e){sf.base.extend(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("command-type",this.applyCommands,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},e.prototype.keyDownHandler=function(e){switch(e.event.action){case"bold":this.applyCommands({subCommand:"Bold",callBack:e.callBack}),e.event.preventDefault();break;case"italic":this.applyCommands({subCommand:"Italic",callBack:e.callBack}),e.event.preventDefault();break;case"strikethrough":this.applyCommands({subCommand:"StrikeThrough",callBack:e.callBack}),e.event.preventDefault();break;case"uppercase":this.applyCommands({subCommand:"UpperCase",callBack:e.callBack}),e.event.preventDefault();break;case"lowercase":this.applyCommands({subCommand:"LowerCase",callBack:e.callBack}),e.event.preventDefault();break;case"superscript":this.applyCommands({subCommand:"SuperScript",callBack:e.callBack}),e.event.preventDefault();break;case"subscript":this.applyCommands({subCommand:"SubScript",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.isBold=function(e,t){return-1!==e.search("\\"+t+"\\"+t)},e.prototype.isItalic=function(e,t){return-1!==e.search("\\"+t)},e.prototype.isMatch=function(e,t){var i=[""];switch(t){case this.syntax.Italic:case this.syntax.InlineCode:case this.syntax.StrikeThrough:i=e.match(this.singleCharRegx(t))}return i},e.prototype.multiCharRegx=function(e){return new RegExp("(\\"+e+"\\"+e+")","g")},e.prototype.singleCharRegx=function(e){return new RegExp("(\\"+e+")","g")},e.prototype.isAppliedCommand=function(e){var t,i=!1,n=this.parent.element,s=n.selectionStart,o=(t=s,function(e){return[e.slice(0,t),e.slice(t)]})(n.value),r=this.syntax.Bold.substr(0,1),a=this.syntax.Italic,l=this.parent.markdownSelection.getSelectedText(n);if(""!==l&&l===l.toLocaleUpperCase()&&"UpperCase"===e)return!0;if(""===l){var d=n.value.substr(o[0].length-1,1),h=o[1].substr(0,1);if(""!==d&&""!==h&&d.match(/[a-z]/i)&&d===d.toLocaleUpperCase()&&h===h.toLocaleUpperCase()&&"UpperCase"===e)return!0}return this.isBold(o[0],r)||this.isItalic(o[0],a)||this.isBold(o[1],r)||this.isItalic(o[1],a)||(sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.StrikeThrough))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.StrikeThrough))||this.isMatch(o[0],this.syntax.StrikeThrough).length%2!=1||this.isMatch(o[1],this.syntax.StrikeThrough).length%2!=1||"StrikeThrough"!==e||(i=!0),sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.InlineCode))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.InlineCode))||this.isMatch(o[0],this.syntax.InlineCode).length%2!=1||this.isMatch(o[1],this.syntax.InlineCode).length%2!=1||"InlineCode"!==e||(i=!0),sf.base.isNullOrUndefined(o[0].match(/\<sub>/g))||sf.base.isNullOrUndefined(o[1].match(/\<\/sub>/g))||o[0].match(/\<sub>/g).length%2!=1||o[1].match(/\<\/sub>/g).length%2!=1||"SubScript"!==e||(i=!0),sf.base.isNullOrUndefined(o[0].match(/\<sup>/g))||sf.base.isNullOrUndefined(o[1].match(/\<\/sup>/g))||o[0].match(/\<sup>/g).length%2!=1||o[1].match(/\<\/sup>/g).length%2!=1||"SuperScript"!==e||(i=!0)),this.isBold(o[0],r)&&this.isBold(o[1],r)&&o[0].match(this.multiCharRegx(r)).length%2==1&&o[1].match(this.multiCharRegx(r)).length%2==1&&"Bold"===e&&(i=!0),o[0]=this.isBold(o[0],r)?o[0].replace(this.multiCharRegx(r),"$%@"):o[0],o[1]=this.isBold(o[1],r)?o[1].replace(this.multiCharRegx(r),"$%@"):o[1],sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.Italic))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.Italic))||this.isMatch(o[0],this.syntax.Italic).length%2!=1||this.isMatch(o[1],this.syntax.Italic).length%2!=1||"Italic"!==e||(i=!0),sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.StrikeThrough))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.StrikeThrough))||this.isMatch(o[0],this.syntax.StrikeThrough).length%2!=1||this.isMatch(o[1],this.syntax.StrikeThrough).length%2!=1||"StrikeThrough"!==e||(i=!0),sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.InlineCode))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.InlineCode))||this.isMatch(o[0],this.syntax.InlineCode).length%2!=1||this.isMatch(o[1],this.syntax.InlineCode).length%2!=1||"InlineCode"!==e||(i=!0),sf.base.isNullOrUndefined(o[0].match(/\<sub>/g))||sf.base.isNullOrUndefined(o[1].match(/\<\/sub>/g))||o[0].match(/\<sub>/g).length%2!=1||o[1].match(/\<\/sub>/g).length%2!=1||"SubScript"!==e||(i=!0),sf.base.isNullOrUndefined(o[0].match(/\<sup>/g))||sf.base.isNullOrUndefined(o[1].match(/\<\/sup>/g))||o[0].match(/\<sup>/g).length%2!=1||o[1].match(/\<\/sup>/g).length%2!=1||"SuperScript"!==e||(i=!0),i},e.prototype.applyCommands=function(e){this.currentAction=e.subCommand;var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,n=t.selectionEnd,s=0,o=this.parent.markdownSelection.getSelectedInlinePoints(t);if(this.isAppliedCommand(e.subCommand)&&""!==o.text){var r=this.syntax[e.subCommand],a="SubScript"===e.subCommand?"</sub>":"SuperScript"===e.subCommand?"</sup>":this.syntax[e.subCommand],l="UpperCase"===e.subCommand||"LowerCase"===e.subCommand?0:r.length,d=t.value.substr(0,o.start).lastIndexOf(r),h=t.value.substr(o.end,t.value.length).indexOf(a);h+=o.end;var c=this.replaceAt(t.value.substr(0,o.start),r,"",d,o.start),p=this.replaceAt(t.value.substr(o.end,t.value.length),a,"",0,h);return t.value=c+o.text+p,void this.restore(t,i-l,n-l,e)}if(""===o.text||this.isApplied(o,e.subCommand))"UpperCase"!==e.subCommand&&"LowerCase"!==e.subCommand?("SubScript"===e.subCommand||"SuperScript"===e.subCommand?(o.text=this.textReplace(o.text,e.subCommand),o.text=this.syntax[e.subCommand]+o.text+"</"+this.syntax[e.subCommand].substring(1,5)):(o.text=this.textReplace(o.text,e.subCommand),o.text=this.syntax[e.subCommand]+o.text+this.syntax[e.subCommand]),t.value=t.value.substr(0,o.start)+o.text+t.value.substr(o.end,t.value.length),s=this.syntax[e.subCommand].length,o.start===o.end?this.restore(t,i+s,n+s,e):this.restore(t,i+s,n-s,e)):this.restore(t,i,n,e);else{s="UpperCase"===e.subCommand||"LowerCase"===e.subCommand?0:this.syntax[e.subCommand].length;var u=t.value.substr(o.start-this.syntax[e.subCommand].length,this.syntax[e.subCommand].length),f=void 0;if(u===e.subCommand||o.start-this.syntax[e.subCommand].length===t.value.indexOf(this.syntax[e.subCommand])&&(o.end===t.value.lastIndexOf(this.syntax[e.subCommand])||o.end===t.value.lastIndexOf("</"+this.syntax[e.subCommand].substring(1,5)))){f="SubScript"===e.subCommand||"SuperScript"===e.subCommand?t.value.substr(o.end,this.syntax[e.subCommand].length+1):t.value.substr(o.end,this.syntax[e.subCommand].length);c=this.replaceAt(t.value.substr(0,o.start),u,"",o.start-this.syntax[e.subCommand].length,o.start),p=this.replaceAt(t.value.substr(o.end,t.value.length),f,"",0,f.length);t.value=c+o.text+p,this.restore(t,i-s,n-s,e)}else"SubScript"===e.subCommand||"SuperScript"===e.subCommand?o.text=this.syntax[e.subCommand]+o.text+"</"+this.syntax[e.subCommand].substring(1,5):"UpperCase"===e.subCommand||"LowerCase"===e.subCommand?o.text="UpperCase"===e.subCommand?o.text.toUpperCase():o.text.toLowerCase():o.text=this.syntax[e.subCommand]+o.text+this.syntax[e.subCommand],t.value=t.value.substr(0,o.start)+o.text+t.value.substr(o.end,t.value.length),this.restore(t,i+s,n+s,e)}this.parent.undoRedoManager.saveData()},e.prototype.replaceAt=function(e,t,i,n,s){return e.slice(0,n)+e.slice(n,s).replace(t,i)+e.slice(s)},e.prototype.restore=function(e,t,i,n){this.selection.save(t,i),this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e.prototype.textReplace=function(e,t){var i=this.singleCharRegx(this.syntax[t]);switch(t){case"Bold":i=this.multiCharRegx(this.syntax[t].substr(0,1)),e=e.replace(i,"");break;case"Italic":if(this.isBold(e,this.syntax[t].substr(0,1))){var n=this.multiCharRegx(this.syntax[t].substr(0,1)),s=e;s=s.replace(n,"$%@").replace(i,"");var o=new RegExp("\\$%@","g");e=s.replace(o,this.syntax[t].substr(0,1)+this.syntax[t].substr(0,1))}else e=e.replace(i,"");break;case"StrikeThrough":case"InlineCode":e=e.replace(i,"");break;case"SubScript":e=e.replace(/<sub>/g,"").replace(/<\/sub>/g,"");break;case"SuperScript":e=e.replace(/<sup>/g,"").replace(/<\/sup>/g,"")}return e},e.prototype.isApplied=function(e,t){var i=this.singleCharRegx(this.syntax[t]);switch(t){case"SubScript":case"SuperScript":return(i=this.singleCharRegx(this.syntax[t])).test(e.text);case"Bold":case"StrikeThrough":return(i=this.multiCharRegx(this.syntax[t].substr(0,1))).test(e.text);case"UpperCase":case"LowerCase":return(i=new RegExp("^["+this.syntax[t]+"]*$","g")).test(e.text);case"Italic":var n=void 0,s=this.multiCharRegx(this.syntax[t].substr(0,1));if(s.test(e.text)){var o=e.text;o=o.replace(s,"$%#"),n=i.test(o)}else n=i.test(e.text);return n;case"InlineCode":return i.test(e.text)}},e}(),rt=function(){function e(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=sf.base.isNullOrUndefined(t)?30:t.undoRedoSteps,this.undoRedoTimer=sf.base.isNullOrUndefined(t)?300:t.undoRedoTimer,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){var e=sf.base.debounce(this.keyUp,this.undoRedoTimer);this.parent.observer.on("keyup-handler",e,this),this.parent.observer.on("keydown-handler",this.keyDown,this),this.parent.observer.on("action",this.onAction,this),this.parent.observer.on("model_changed_plugin",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"undoRedoSteps":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=e.newProp.undoRedoTimer}}},e.prototype.removeEventListener=function(){var e=sf.base.debounce(this.keyUp,300);this.parent.observer.off("keyup-handler",e),this.parent.observer.off("keydown-handler",this.keyDown),this.parent.observer.off("action",this.onAction),this.parent.observer.off("model_changed_plugin",this.onPropertyChanged)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onAction=function(e){"Undo"===e.subCommand?this.undo(e):this.redo(e)},e.prototype.keyDown=function(e){var t=e.event;switch(t.action){case"undo":t.preventDefault(),this.undo(e);break;case"redo":t.preventDefault(),this.redo(e)}},e.prototype.keyUp=function(e){17===e.event.keyCode||e.event.ctrlKey||this.saveData(e)},e.prototype.saveData=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,n=t.selectionEnd,s={text:this.parent.element.value,start:i,end:n};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].start===i&&this.undoRedoStack[this.undoRedoStack.length-1].end===n||(this.undoRedoStack.push(s),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())},e.prototype.undo=function(e){if(this.steps>0){this.currentAction="Undo";var t=this.undoRedoStack[this.steps-1].start,i=this.undoRedoStack[this.steps-1].end,n=this.undoRedoStack[this.steps-1].text;this.parent.element.value=n,this.parent.element.focus(),this.steps--,this.restore(this.parent.element,t,i,e)}},e.prototype.redo=function(e){if(null!=this.undoRedoStack[this.steps+1]){this.currentAction="Redo";var t=this.undoRedoStack[this.steps+1].start,i=this.undoRedoStack[this.steps+1].end;this.parent.element.value=this.undoRedoStack[this.steps+1].text,this.parent.element.focus(),this.steps++,this.restore(this.parent.element,t,i,e)}},e.prototype.restore=function(e,t,i,n){this.selection.save(t,i),this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e.prototype.getUndoStatus=function(){var e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e},e}(),at=function(){function e(e){this.parent=e,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("link-commands",this.createLink,this)},e.prototype.createLink=function(e){var t=this.parent.element;t.focus();var i=t.selectionStart,n=t.selectionEnd,s="Image"===e.subCommand?this.selection.getSelectedText(t):e.item.text,o="Image"===e.subCommand?i+2:i+1,r="Image"===e.subCommand?n+2:n+1;s="Image"===e.subCommand?"!["+s+"]("+e.item.url+")":"["+s+"]("+e.item.url+")",t.value=t.value.substr(0,i)+s+t.value.substr(n,t.value.length),this.parent.markdownSelection.setSelection(t,o,r),this.restore(t,o,r,e)},e.prototype.restore=function(e,t,i,n){this.selection.save(t,i),this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:n.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e}(),lt=function(){function e(e){sf.base.extend(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("insert-table",this.createTable,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("insert-table",this.createTable),this.parent.observer.off("keydown-handler",this.onKeyDown)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onKeyDown=function(e){"insert-table"===e.event.action&&(e.item=e.value,this.createTable(e))},e.prototype.createTable=function(e){this.element=this.parent.element;var t=this.element.selectionStart,i=this.element.selectionEnd,n=this.element.value;this.locale=e,this.selection.save(t,i),this.restore(this.element.selectionStart,this.element.selectionEnd,null),this.insertTable(t,i,n,e)},e.prototype.getTable=function(){var e="";return e+=this.textNonEmpty(),e+=this.tableHeader(this.locale),e+=this.tableCell(this.locale)},e.prototype.tableHeader=function(e){for(var t="",i=1;i<=2;i++){t+="|";for(var n=1;n<=2;n++)t+=1===i?e.item.headingText+" "+n+"|":"---------|";t+=this.insertLine()}return t},e.prototype.tableCell=function(e){for(var t="",i=1;i<=2;i++){t+="|";for(var n=1;n<=2;n++)t+=e.item.colText+" "+this.convertToLetters(i)+n+"|";t+=this.insertLine()}return t+=this.insertLine()},e.prototype.insertLine=function(){var e=document.createElement("div");return e.innerHTML="\n",e.textContent},e.prototype.insertTable=function(e,t,i,n){var s=this.selection.getSelectedParentPoints(this.element),o=s[s.length-1].text.split(" ",2),r=this.getFormatTag();o.length<2?(this.element.value=this.updateValue(this.getTable()),this.makeSelection(i,e,t)):this.ensureFormatApply(s[s.length-1].text)?this.checkValid(e,t,this.getTable(),i,n,o,s,r):(this.element.value=this.updateValue(this.getTable()),this.makeSelection(i,e,t)),this.restore(this.element.selectionStart,this.element.selectionEnd,n)},e.prototype.makeSelection=function(e,t,i){i=t+(e.length>0?12:10),t+=e.length>0?3:1,this.selection.setSelection(this.element,t,i)},e.prototype.getFormatTag=function(){for(var e=Object.keys(this.syntaxTag.Formats),t=Object.keys(this.syntaxTag.List),i=[],n=0;n<e.length;n++)i.push(this.syntaxTag.Formats[e[n]]);for(var s=0;s<t.length;s++)i.push(this.syntaxTag.List[t[s]]);return i},e.prototype.ensureFormatApply=function(e){for(var t=this.getFormatTag(),i=e.trim().split(" ",2)[0]+" ",n=0;n<t.length;n++)if(i===t[n]||/^[\d.]+[ ]+$/.test(i))return!0;return!1},e.prototype.ensureStartValid=function(e,t){for(var i=t[0].text.split(" ",2),n=e+1;n<=e+i[0].length+1;n++)if(this.element.selectionStart===n||this.element.selectionEnd===n)return!1;return!0},e.prototype.ensureEndValid=function(e,t){for(var i=e+1;i<=e+t+1;i++)if(this.element.selectionEnd===i)return!1;return!0},e.prototype.updateValueWithFormat=function(e,t){var i=this.element.value.substring(this.element.selectionEnd,this.element.value.length);return t+=i.replace(i,e[0]+" "+i),this.element.value.substr(0,this.element.selectionStart)+t},e.prototype.updateValue=function(e){return this.element.value.substr(0,this.element.selectionStart)+e+this.element.value.substr(this.element.selectionEnd,this.element.value.length)},e.prototype.checkValid=function(e,t,i,n,s,o,r,a){this.ensureStartValid(r[0].start,r)&&this.ensureEndValid(r[r.length-1].start,o[0].length)&&(e===r[0].start?e!==t&&t!==r[r.length-1].end-1?this.element.value=this.updateValueWithFormat(o,i):this.element.value=this.updateValue(i):t===r[r.length-1].end-1?this.element.value=this.updateValue(i):this.element.value=this.updateValueWithFormat(o,i),this.makeSelection(n,e,t))},e.prototype.convertToLetters=function(e){var t="A".charCodeAt(0),i="";do{e-=1,i=String.fromCharCode(t+e%26)+i,e=e/26>>0}while(e>0);return i},e.prototype.textNonEmpty=function(){var e="";return(this.isCursorBased()||this.isSelectionBased())&&this.element.value.length>0&&(e+=this.insertLine(),e+=this.insertLine()),e},e.prototype.isCursorBased=function(){return this.element.selectionStart===this.element.selectionEnd},e.prototype.isSelectionBased=function(){return this.element.selectionStart!==this.element.selectionEnd},e.prototype.restore=function(e,t,i){this.selection.save(e,t),this.selection.restore(this.element),i&&i.callBack&&i.callBack({requestType:i.subCommand,selectedText:this.selection.getSelectedText(this.element),editorMode:"Markdown",event:i.event})},e}(),dt=function(){function e(e){this.parent=e,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("clear-commands",this.clear,this)},e.prototype.replaceRegex=function(e){return e.replace(/\*/gi,"\\*").replace(/\&/gi,"\\&").replace(/\-/gi,"\\-").replace(/\^/gi,"\\^").replace(/\$/gi,"\\$").replace(/\./gi,"\\.").replace(/\|/gi,"\\|").replace(/\?/gi,"\\?").replace(/\+/gi,"\\+").replace(/\-/gi,"\\-").replace(/\&/gi,"\\&")},e.prototype.clearSelectionTags=function(e){for(var t=this.parent.selectionTags,i=Object.keys(t),n=0;n<i.length;n++){var s=i[n];if(t.hasOwnProperty(s)&&""!==t[s]){var o=this.replaceRegex(t[s]),r=void 0,a=t[s].length,l="<sup>"===t[s]||"<sub>"===t[s]?t[s].length+1:t[s].length;r="<sup>"===t[s]?new RegExp("<sup>(.*?)</sup>","ig"):"<sub>"===t[s]?new RegExp("<sub>(.*?)</sub>","ig"):new RegExp(o+"(.*?)"+o,"ig");for(var d=e.match(r),h=0;d&&h<d.length&&""!==d[h];h++)e=e.replace(d[h],d[h].substr(a,d[h].length-l-a))}}return e},e.prototype.clearFormatTags=function(e){var t=e.split("\n");return this.clearFormatLines(t)},e.prototype.clearFormatLines=function(e){for(var t=[this.parent.formatTags,this.parent.listTags],i="",n=0;n<e.length;n++){for(var s=0;s<t.length;s++)for(var o=t[s],r=Object.keys(o),a=0;a<r.length;a++){var l=r[a];o.hasOwnProperty(l)&&""!==o[l]&&0===e[n].indexOf(o[l])&&(e[n]=e[n].replace(o[l],""),e[n]=this.clearFormatLines([e[n]]))}i=i+e[n]+(n!==e.length-1?"\n":"")}return i},e.prototype.clear=function(e){var t=this.parent.element;t.focus();var i=t.selectionStart,n=t.selectionEnd,s=this.selection.getSelectedText(t);s=this.clearSelectionTags(s),s=this.clearFormatTags(s),t.value=t.value.substr(0,i)+s+t.value.substr(n,t.value.length),this.parent.markdownSelection.setSelection(t,i,i+s.length),this.restore(t,i,i+s.length,e)},e.prototype.restore=function(e,t,i,n){this.selection.save(t,i),this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:n.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e}(),ht=function(){function e(e){this.parent=e,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("insert-text",this.InsertTextExec,this)},e.prototype.InsertTextExec=function(e){var t=this.parent.element;t.focus();var i=t.selectionStart,n=t.selectionEnd,s=e.value.text,o=i+s.length,r=n+s.length;t.value=t.value.substr(0,i)+s+t.value.substr(n,t.value.length),this.parent.markdownSelection.setSelection(t,o,r),this.restore(t,o,r,e)},e.prototype.restore=function(e,t,i,n){this.selection.save(t,i),this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:n.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e}(),ct=function(){function e(e){this.initialize(),sf.base.extend(this,this,e,!0),this.observer=new sf.base.Observer(this),this.markdownSelection=new tt,this.listObj=new nt({parent:this,syntax:this.listTags}),this.formatObj=new st({parent:this,syntax:this.formatTags}),this.undoRedoManager=new rt(this,e.options),this.mdSelectionFormats=new ot({parent:this,syntax:this.selectionTags}),this.linkObj=new at(this),this.tableObj=new lt({parent:this,syntaxTag:{Formats:this.formatTags,List:this.listTags}}),this.clearObj=new dt(this),this.insertTextObj=new ht(this),this.wireEvents()}return e.prototype.initialize=function(){this.formatTags=te,this.listTags=ne,this.selectionTags=ie},e.prototype.wireEvents=function(){this.observer.on("keydown",this.editorKeyDown,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("model_changed",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){this.observer.notify("model_changed_plugin",e)},e.prototype.editorKeyDown=function(e){this.observer.notify("keydown-handler",e)},e.prototype.editorKeyUp=function(e){this.observer.notify("keyup-handler",e)},e.prototype.execCommand=function(e,t,i,n,s,o){switch(e.toLocaleLowerCase()){case"lists":this.observer.notify("lists-commands",{subCommand:t,event:i,callBack:n});break;case"formats":this.observer.notify("format-type",{subCommand:t,event:i,callBack:n});break;case"actions":this.observer.notify("action",{subCommand:t,event:i,callBack:n});break;case"style":case"effects":case"casing":this.observer.notify("command-type",{subCommand:t,event:i,callBack:n});break;case"links":case"images":this.observer.notify("link-commands",{subCommand:t,event:i,callBack:n,item:o});break;case"table":switch(t.toString().toLocaleLowerCase()){case"createtable":this.observer.notify("insert-table",{subCommand:t,item:o,event:i,callBack:n})}break;case"clear":this.observer.notify("clear-commands",{subCommand:t,event:i,callBack:n});break;case"inserttext":this.observer.notify("insert-text",{subCommand:t,event:i,callBack:n,value:{text:o}})}},e}(),pt=(D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ut=function(e){function t(t){var i=e.call(this)||this;return i.initialize(),sf.base.extend(i,i,t,!0),t&&i.element&&i.updateFormatter(i.element,document,t.options),i}return pt(t,e),t.prototype.initialize=function(){this.keyConfig=oe,this.formatSyntax=te,this.listSyntax=ne,this.selectionSyntax=ie},t.prototype.updateFormatter=function(e,t,i){e&&(this.editorManager=new ct({element:e,formatTags:this.formatSyntax,listTags:this.listSyntax,selectionTags:this.selectionSyntax,options:i}))},t}(ee),ft=function(){function i(e){this.parent=e,this.addEventListener()}return i.prototype.addEventListener=function(){this.saveSelection=new tt,this.parent.observer.on(e,this.render,this),this.parent.observer.on("markdown-toolbar-click",this.onToolbarClick,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("selectAll",this.selectAll,this),this.parent.observer.on("getSelectedHtml",this.getSelectedHtml,this),this.parent.observer.on(o,this.onSelectionSave,this),this.parent.observer.on(r,this.onSelectionRestore,this),this.parent.observer.on("readOnlyMode",this.updateReadOnly,this)},i.prototype.updateReadOnly=function(){this.parent.readonly?(this.parent.getEditPanel().setAttribute("readonly","readonly"),sf.base.addClass([this.parent.element],"e-rte-readonly")):(this.parent.getEditPanel().removeAttribute("readonly"),sf.base.removeClass([this.parent.element],"e-rte-readonly"))},i.prototype.onSelectionSave=function(){var e=this.parent.getEditPanel();this.saveSelection.save(e.selectionStart,e.selectionEnd)},i.prototype.onSelectionRestore=function(e){this.parent.getEditPanel().focus();var t=this.parent.getEditPanel();this.saveSelection.restore(t)},i.prototype.onToolbarClick=function(e){var t,i,n,s=e.item,o=this.parent.getEditPanel();switch(o.focus(),i=o.selectionStart,n=o.selectionEnd,t=o.value.substring(i,n),s.subCommand){case"Maximize":this.parent.observer.notify("enableFullScreen",{args:e});break;case"Minimize":this.parent.observer.notify("disableFullScreen",{args:e});break;case"CreateLink":this.parent.observer.notify("insertLink",{member:"link",args:e,text:t,module:"Markdown"});break;case"Image":this.parent.observer.notify("insertImage",{member:"image",args:e,text:t,module:"Markdown"});break;case"CreateTable":var r={headingText:this.parent.localeData.headingText,colText:this.parent.localeData.colText};this.parent.formatter.process(this.parent,e,e.originalEvent,r);break;default:this.parent.formatter.process(this.parent,e,e.originalEvent,null)}},i.prototype.removeEventListener=function(){this.parent.observer.off(e,this.render),this.parent.observer.off(t,this.destroy),this.parent.observer.off("markdown-toolbar-click",this.onToolbarClick),this.parent.observer.off("selectAll",this.selectAll),this.parent.observer.off("getSelectedHtml",this.getSelectedHtml),this.parent.observer.off(o,this.onSelectionSave),this.parent.observer.off(r,this.onSelectionRestore),this.parent.observer.off("readOnlyMode",this.updateReadOnly)},i.prototype.render=function(){var e=this.parent.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};sf.base.isNullOrUndefined(this.parent.adapter)?this.parent.formatter=new ut({element:e,options:t}):this.parent.formatter=new ut(sf.base.extend({},this.parent.adapter,{element:e,options:t})),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new it(this.parent)),this.parent.observer.notify("bind-on-end",{})},i.prototype.selectAll=function(){this.parent.formatter.editorManager.markdownSelection.setSelection(this.parent.getEditPanel(),0,this.parent.getEditPanel().value.length)},i.prototype.getSelectedHtml=function(e){e.callBack(this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.getEditPanel()))},i.prototype.destroy=function(){this.removeEventListener()},i}(),mt=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("execCommandCallBack",this.commandCallBack,this),this.parent.observer.on(t,this.removeEventListener,this)},e.prototype.commandCallBack=function(e){"Undo"!==e.requestType&&"Redo"!==e.requestType&&this.parent.formatter.saveData(),this.parent.observer.notify("toolbar-refresh",{args:e}),this.parent.observer.notify("count",{})},e.prototype.removeEventListener=function(){this.parent.observer.off("execCommandCallBack",this.commandCallBack),this.parent.observer.off(t,this.removeEventListener)},e}(),gt=function(){return(gt=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},vt=function(){function t(e){this.undoRedoSteps=30,this.undoRedoTimer=300,this.floatingToolbarOffset=0,this.enableHtmlEncode=!1,this.defaultResetValue=null,this.isInitial=!0,this.blurEnabled=!1,this.focusEnabled=!1,this.undoRedoStatus=!1,this.createdEnabled=!1,this.isIframeRteElement=!0,this.actionBeginEnabled=!1,this.imageDeleteEnabled=!1,this.mediaDeleteEnabled=!1,this.onResizeStopEnabled=!1,this.quickTbClosedEnabled=!1,this.quickTbOpenedEnabled=!1,this.onQuickTbOpenEnabled=!1,this.onResizeStartEnabled=!1,this.actionCompleteEnabled=!1,this.beforeUploadImageEnabled=!1,this.onImageUploadFailedEnabled=!1,this.onImageUploadSuccessEnabled=!1,this.beforeUploadMediaEnabled=!1,this.onMediaUploadFailedEnabled=!1,this.onMediaUploadSuccessEnabled=!1,this.beforePasteCleanupEnabled=!1,this.afterPasteCleanupEnabled=!1,this.clickPoints={clientX:0,clientY:0},this.inlineCloseItems=["CreateLink","Image","CreateTable","Maximize","Minimize"],window.sfBlazor=window.sfBlazor,this.updateContext(e),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this),this.observer=new sf.base.Observer(this),this.dotNetRef.invokeMethodAsync("UpdateDeviceData",{isDevice:sf.base.Browser.isDevice,isIDevice:sf.base.Browser.isDevice&&sf.base.Browser.isIos}),this.initModules(),this.initialize()}return t.prototype.updateContext=function(e){sf.base.extend(this,this,e)},t.prototype.initModules=function(){this.id=this.element.id,this.updateContentElements(),"HTML"===this.editorMode?(this.htmlEditorModule=new Re(this),this.pasteCleanupModule=new et(this)):this.markdownEditorModule=new ft(this),this.toolbarSettings.enable&&(this.isUndoRedoStatus(),this.toolbarModule=new P(this)),this.fullScreenModule=new He(this),this.enterKeyModule=new ze(this),this.viewSourceModule=new _e(this),this.showCharCount&&(this.countModule=new h(this)),this.enableResize&&(this.resizeModule=new c(this)),this.linkModule=new H(this),this.imageModule=new U(this),this.audioModule=new q(this),this.videoModule=new _(this),this.tableModule=new z(this),this.quickToolbarSettings.enable&&(this.quickToolbarModule=new je(this))},t.prototype.initialize=function(){this.onBlurHandler=this.blurHandler.bind(this),this.onFocusHandler=this.focusHandler.bind(this),this.onResizeHandler=this.resizeHandler.bind(this,!1);new mt(this);this.inputElement=this.getEditPanel(),this.valueContainer=this.element.querySelector("textarea"),this.readonly&&this.setReadOnly(!0),this.setContentHeight(),this.iframeSettings&&this.iframeSettings.enable&&this.setIframeSettings(),(sf.base.isNullOrUndefined(this.value)||""===this.value)&&(this.value=this.element.querySelector(".e-rte-value-wrapper").innerHTML.replace(/<!--!-->/gi,"").trim()),this.setPanelValue(this.value),this.observer.notify(e,{}),this.enableXhtml&&(this.value=this.getXhtml()),null!==this.value&&(this.defaultResetValue=this.value),this.wireEvents(),this.addAudioVideoWrapper(),this.createdEnabled&&this.dotNetRef.invokeMethodAsync("CreatedEvent")},t.prototype.addAudioVideoWrapper=function(){for(var e,t=this,i=this.element.querySelectorAll("audio"),n=0;n<i.length;n++)if(i[n].classList.contains("e-rte-audio")||(i[n].classList.add("e-rte-audio"),i[n].classList.add("e-audio-inline")),!i[n].parentElement.classList.contains("e-clickelem")&&!i[n].parentElement.classList.contains("e-audio-wrap")){var s=sf.base.createElement("span",{className:"e-audio-wrap"});s.contentEditable="false";var o=sf.base.createElement("span",{className:"e-clickelem"});s.appendChild(o),i[n].parentNode.insertBefore(s,i[n].nextSibling),o.appendChild(i[n]),null===s.nextElementSibling&&(e=sf.base.createElement("br"),s.parentNode.insertBefore(e,s.nextSibling))}var r=this.element.querySelectorAll("video");for(n=0;n<r.length;n++){if(r[n].classList.contains("e-rte-video")||(r[n].classList.add("e-rte-video"),r[n].classList.add("e-video-inline")),!r[n].parentElement.classList.contains("e-clickelem")&&!r[n].parentElement.classList.contains("e-video-wrap")){var l=sf.base.createElement("span",{className:"e-video-wrap"});l.contentEditable="false",r[n].parentNode.insertBefore(l,r[n].nextSibling),l.appendChild(r[n]),null===l.nextElementSibling&&(e=sf.base.createElement("br"),l.parentNode.insertBefore(e,l.nextSibling))}-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&(r[n].addEventListener("play",(function(e){t.observer.notify(a,{args:e}),t.observer.notify("editAreaClick",{args:e})})),r[n].addEventListener("pause",(function(e){t.observer.notify(a,{args:e}),t.observer.notify("editAreaClick",{args:e})})))}},t.prototype.isUndoRedoStatus=function(){for(var e=0;e<this.toolbarSettings.items.length;e++)if(!sf.base.isNullOrUndefined(this.toolbarSettings.items[e])&&("Undo"===this.toolbarSettings.items[e].subCommand||"Redo"===this.toolbarSettings.items[e].subCommand)){this.undoRedoStatus=!0;break}},t.prototype.setPanelValue=function(e,t){e=this.serializeValue(e),"HTML"===this.editorMode&&this.enableXhtml&&(this.inputElement.innerHTML=e,this.observer.notify("xhtmlValidation",{}),e=this.inputElement.innerHTML),"HTML"!==this.editorMode||t||(this.value=E(sf.base.isNullOrUndefined(e)?"":e,this)),this.updatePanelValue(),this.value!==this.cloneValue&&(this.enableXhtml&&(this.valueContainer.value=this.getXhtmlString(this.valueContainer.value)),A(this.valueContainer,"change"),this.isInitial?this.isInitial=!1:this.dotNetRef.invokeMethodAsync("UpdateValue",this.value),this.cloneValue=this.value),this.setPlaceHolder()},t.prototype.updateContentElements=function(){"HTML"===this.editorMode&&this.iframeSettings&&this.iframeSettings.enable?(this.contentPanel=this.element.querySelector("iframe"),this.updateIframeHtmlContents()):this.contentPanel=this.element.querySelector(".e-rte-content")},t.prototype.updateIframeHtmlContents=function(){var e='\n<!DOCTYPE html> \n    <html>\n         <head>\n            <meta charset=\'utf-8\' /> \n            <style>\n                @charset "UTF-8";\n                body {\n                    font-family: "Roboto", sans-serif;\n                    font-size: 14px;\n                }\n                html, body{height: 100%;margin: 0;}\n                body.e-cursor{cursor:default}\n                span.e-selected-node\t{background-color: #939393;color: white;}\n                span.e-selected-node.e-highlight {background-color: #1d9dd8;}\n                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}\n                .e-rte-image, .e-rte-audio, .e-rte-video  {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}\n                .e-img-caption.e-caption-inline {display: inline-block;float: none;margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));position: relativetext-align: center;vertical-align: bottom;}\n                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;margin: auto;opacity: .9;text-align: center;width: 100%;}\n                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}\n                .e-imgleft, .e-video-left  {float: left;margin: 0 auto;margin-right: 5px;text-align: left;}\n                .e-imgright, .e-video-right {float: right;margin: 0 auto;margin-left: 5px;text-align: right;}\n                .e-imgcenter, .e-video-center {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}\n                .e-imginline, .e-audio-inline, .e-video-inline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));vertical-align: bottom;}\n                .e-imgbreak, .e-audio-break, .e-video-break {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-rte-image.e-img-focus:not(.e-resize), .e-rte-audio.e-audio-focus:not(.e-resize), .e-rte-video.e-video-focus:not(.e-resize) {border: solid 2px #4a90e2;}\n                img.e-img-focus::selection, .e-audio-focus::selection, .e-video-focus::selection { background: transparent;color: transparent;}\n                span.e-rte-imageboxmark {  width: 10px; height: 10px; position: absolute; display: block; background: #4a90e2; border: 1px solid #fff; z-index: 1000;}\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-mob-rte span.e-rte-imageboxmark { background: #fff; border: 1px solid #4a90e2; border-radius: 15px; height: 20px; width: 20px; }\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-rte-content .e-content img.e-resize { z-index: 1000; }\n                .e-img-caption .e-img-inner { outline: 0; }\n                .e-img-caption a:focus-visible { outline: none; }\n                .e-rte-img-caption.e-imgcenter { display: block; margin-left: auto; margin-right: auto; }\n                .e-rte-img-caption.e-imgright { display: block; margin-left: auto; margin-right: 0; }\n                .e-rte-img-caption.e-imgleft { display: block; margin-left: 0; margin-right: auto; }\n                .e-img-caption .e-rte-image.e-imgright {float: none; margin-left: auto; margin-right: 0;}\n                .e-img-caption .e-rte-image.e-imgleft { float: none; margin: 0;}\n                .e-rte-img-caption.e-imgleft .e-img-inner {text-align: left;}\n                .e-rte-img-caption.e-imgright .e-img-inner {text-align: right;}\n                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}\n                p{margin: 0 0 10px;margin-bottom: 10px;}\n                li{margin-bottom: 10px;}\n                h1{font-size: 2.17em;font-weight: 400;line-height: 1;margin: 10px 0;}\n                h2{font-size: 1.74em;font-weight: 400;margin: 10px 0;}\n                h3{font-size: 1.31em;font-weight: 400;margin: 10px 0;}\n                h4{font-size: 16px;font-weight: 400;line-height: 1.5;margin: 0;}\n                h5{font-size: 00.8em;font-weight: 400;margin: 0;}\n                h6{font-size: 00.65em;font-weight: 400;margin: 0;}\n                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}\n                .e-rtl blockquote {padding-left: 0;padding-right: 5px;border-left: 0;border-right: 2px solid #5c5c5c;}\n                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}\n                strong, b{font-weight: 700;}\n                a{text-decoration: none;user-select: auto;}\n                a:hover{text-decoration: underline;};\n                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}\n                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}\n                ul:last-child{margin-bottom: 0;}\n                .e-rte-table { border-collapse: collapse; empty-cells: show;}\n                .e-rte-table td, .e-rte-table th {border: 1px solid #BDBDBD; height: 20px; vertical-align: middle;padding: 2px 5px; min-width: 20px;}\n                .e-rte-table.e-rte-table-border { border: 1px solid #BDBDBD; border-collapse: separate; }\n                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}\n                table th {background-color: #E0E0E0;}\n                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} \n                table .e-cell-select {border: 1px double #4a90e2;}\n                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }\n                span.e-table-box.e-hide { display: none; }\n                span.e-table-box.e-rmob {height: 14px;width: 14px;}\n                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat; bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }\n                .e-row-resize { cursor: row-resize; height: 1px;}\n                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}\n                .e-table-rhelper.e-column-helper { width: 1px; }\n                .e-table-rhelper.e-row-helper {height: 1px;}\n                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid; border-top: 6px solid transparent; content: \'\'; display: block; height: 0; position: absolute; right: 4px; top: 4px; width: 20px; }\n                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid; border-top: 6px solid transparent; content: \'\'; display: block; height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }\n                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }\n                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }\n                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }\n                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }\n                .e-table-rhelper { background-color: #4a90e2;}\n                .e-rtl { direction: rtl; }\n            </style>\n        </head><body spellcheck="false" autocorrect="off" contenteditable="true"></body></html>',t=this.contentPanel;t.srcdoc=e,t.contentDocument.body.id=this.id+"_rte-edit-view",t.contentDocument.body.setAttribute("aria-owns",this.id),t.contentDocument.open(),e=this.setThemeColor(e,{color:"#333"}),t.contentDocument.write(e),t.contentDocument.close(),this.enableRtl&&t.contentDocument.body.setAttribute("class","e-rtl")},t.prototype.setThemeColor=function(e,t){return e.replace(t.color,getComputedStyle(this.element,".e-richtexteditor").getPropertyValue("color"))},t.prototype.refresh=function(e){void 0===e&&(e={requestType:"refresh"}),this.observer.notify(e.requestType+"-begin",e)},t.prototype.openPasteDialog=function(){this.dotNetRef.invokeMethodAsync("PasteDialog")},t.prototype.setContentHeight=function(e,t){var i="",n=0,s="",o="string"==typeof this.height&&this.height.indexOf("%")>-1,r=this.element.querySelector(".e-rte-content .e-rte-srctextarea"),a=sf.base.isNullOrUndefined(r)||"block"!==r.parentElement.style.display?this.getPanel():r.parentElement,l=this.element.offsetHeight;0!==l||"auto"===this.height||this.getToolbar()||(l=parseInt(this.height,10),o&&(s=this.height));var d=this.getToolbar()?this.toolbarModule.getToolbarHeight():0,h=this.element.querySelector(".e-resize-handle"),c=this.enableResize?sf.base.isNullOrUndefined(h)?0:h.offsetHeight+8:0,p=this.getToolbar()&&this.getToolbar().classList.contains("e-expand-open")?this.toolbarModule.getExpandTBarPopHeight():0;if("Expand"===this.toolbarSettings.type&&t&&"preview"!==e?(i="auto"!==this.height||0!==c||this.element.classList.contains("e-rte-full-screen")?l-(d+p+c)+"px":"auto",n=this.toolbarSettings.enableFloating?0:p):i="auto"!==this.height||this.element.classList.contains("e-rte-full-screen")||this.isResizeInitialized?o&&s?s:(this.element.classList.contains("e-rte-full-screen")?window.innerHeight:l)-(d+p+c)+"px":"auto","windowResize"!==e&&sf.base.setStyleAttribute(a,{height:i,marginTop:n+"px"}),this.iframeSettings.enable&&"sourceCode"===e){var u=sf.base.select(".e-rte-content",this.element);sf.base.setStyleAttribute(u,{height:i,marginTop:n+"px"})}if(this.toolbarSettings.enableFloating&&this.getToolbar()&&!this.inlineMode.enable){var f=(!sf.base.isNullOrUndefined(this.element.querySelector(".e-rte-toolbar .e-hor-nav.e-nav-active"))?d+p:d)+"px";sf.base.setStyleAttribute(this.getToolbar().parentElement,{height:f})}0===c&&this.autoResize()},t.prototype.getXhtml=function(){var e=this.value;return this.enableXhtml&&(e=this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e)),e},t.prototype.getXhtmlString=function(e){return this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e)},t.prototype.getPanel=function(){return this.contentPanel},t.prototype.saveSelection=function(){this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument())},t.prototype.restoreSelection=function(){this.formatter.editorManager.nodeSelection.restore()},t.prototype.getEditPanel=function(){return this.iframeSettings&&this.iframeSettings.enable?sf.base.isNullOrUndefined(this.contentPanel.contentDocument)?this.inputElement:this.contentPanel.contentDocument.body:this.element.querySelector(".e-rte-content .e-content")},t.prototype.getText=function(){return this.getEditPanel().innerText},t.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},t.prototype.getRange=function(){return this.formatter.editorManager.nodeSelection.getRange(this.getDocument())},t.prototype.updateValueContainer=function(e){this.enableXhtml&&!sf.base.isNullOrUndefined(e)&&(e=this.getXhtmlString(e)),this.valueContainer.value=e,this.value!==this.cloneValue&&A(this.valueContainer,"change")},t.prototype.getInputInnerHtml=function(){return this.inputElement.innerHTML.replace(/<!--!-->/gi,"")},t.prototype.refreshUI=function(){this.refresh()},t.prototype.getUpdatedValue=function(){var e;sf.base.isNullOrUndefined(this.tableModule)||this.tableModule.removeResizeEle();var t=this.element.querySelector(".e-rte-srctextarea");if("HTML"===this.editorMode){var i=this.getInputInnerHtml();e=i===x(this)?null:this.enableHtmlEncode?this.encode(T(i)):i,t&&"block"===t.style.display&&(e=t.value)}else e=""===this.inputElement.value?null:this.inputElement.value;return e},t.prototype.updateEnable=function(){this.enabled?(sf.base.removeClass([this.element],"e-disabled"),this.element.setAttribute("aria-disabled","false"),sf.base.isNullOrUndefined(this.htmlAttributes.tabindex)?this.inputElement.setAttribute("tabindex","0"):this.inputElement.setAttribute("tabindex",this.htmlAttributes.tabindex)):(this.getToolbar()&&(sf.base.removeClass(this.getToolbar().querySelectorAll(".e-active"),"e-active"),sf.base.removeClass([this.getToolbar()],["e-rte-tb-float","e-rte-tb-abs-float"])),sf.base.addClass([this.element],"e-disabled"),this.element.tabIndex=-1,this.element.setAttribute("aria-disabled","true"),this.inputElement.setAttribute("tabindex","-1"))},t.prototype.setEnable=function(){this.updateEnable(),this.enabled?this.wireEvents():this.unWireEvents()},t.prototype.executeCommand=function(e,t,i){if(t=this.htmlPurifier(e,t),"HTML"===this.editorMode){var n=this.getRange();this.iframeSettings.enable&&this.formatter.editorManager.nodeSelection.Clear(this.element.ownerDocument),(!(!this.iframeSettings.enable||n.startContainer!==this.inputElement)||!this.inputElement.contains(n.startContainer))&&this.focusIn()}var s=y[e];i&&i.undo&&i.undo&&0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),this.formatter.editorManager.execCommand(s.command,s.subCommand?s.subCommand:t||s.value,null,null,t||s.value,t||s.value),i&&i.undo&&(this.formatter.saveData(),this.formatter.enableUndo(this)),this.setPlaceHolder(),this.observer.notify("content-changed",{}),this.value=this.inputElement.innerHTML,this.dotNetRef.invokeMethodAsync("UpdateValue",this.value)},t.prototype.htmlPurifier=function(e,t){if("HTML"===this.editorMode)switch(e){case"insertTable":sf.base.isNullOrUndefined(t.width)&&(t.width={minWidth:this.tableSettings.minWidth,maxWidth:this.tableSettings.maxWidth,width:this.tableSettings.width}),t.selection=this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument());break;case"insertImage":var i=sf.base.createElement("img",{attrs:{src:t.url}}).outerHTML,n=""!==i&&sf.base.createElement("div",{innerHTML:i}).firstElementChild.getAttribute("src")||null;n=sf.base.isNullOrUndefined(n)?"":n,t.url=n,sf.base.isNullOrUndefined(t.width)&&(t.width={minWidth:this.insertImageSettings.minWidth,maxWidth:this.insertImageSettings.maxWidth,width:this.insertImageSettings.width}),sf.base.isNullOrUndefined(t.height)&&(t.height={minHeight:this.insertImageSettings.minHeight,maxHeight:this.insertImageSettings.maxHeight,height:this.insertImageSettings.height}),t.selection=this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument());break;case"createLink":var s=sf.base.createElement("a",{attrs:{href:t.url}}).outerHTML,o=""!==s&&sf.base.createElement("div",{innerHTML:s}).firstElementChild.getAttribute("href")||null;o=sf.base.isNullOrUndefined(o)?"":o,t.url=o,t.selection=this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument())}return t},t.prototype.serializeValue=function(e){return"HTML"!==this.editorMode||sf.base.isNullOrUndefined(e)||(this.enableHtmlEncode?(e=this.htmlEditorModule.sanitizeHelper(T(e)),e=this.encode(e)):e=this.htmlEditorModule.sanitizeHelper(e)),e},t.prototype.selectAll=function(){this.observer.notify("selectAll",{})},t.prototype.selectRange=function(e){this.observer.notify("selectRange",{range:e})},t.prototype.showFullScreen=function(){this.fullScreenModule.showFullScreen()},t.prototype.sanitizeHtml=function(e){return this.serializeValue(e)},t.prototype.clipboardAction=function(e,t){switch(e.toLowerCase()){case"cut":this.onCut(),this.formatter.onSuccess(this,{requestType:"Cut",editorMode:this.editorMode,event:t});break;case"copy":this.onCopy(),this.formatter.onSuccess(this,{requestType:"Copy",editorMode:this.editorMode,event:t});break;case"paste":this.onPaste(t)}},t.prototype.getContent=function(){return this.iframeSettings.enable?this.inputElement:this.getPanel()},t.prototype.getSelectedHtml=function(){var e=sf.base.createElement("div"),t=this.getDocument().getSelection();if(t.rangeCount>0){var i=t.getRangeAt(0).cloneContents();e.appendChild(i)}return e.innerHTML},t.prototype.getSelection=function(){var e="";return this.observer.notify("getSelectedHtml",{callBack:function(t){e=t}}),e},t.prototype.showInlineToolbar=function(){if(this.inlineMode.enable){var e=this.getRange();sf.base.isNullOrUndefined(sf.base.closest(e.startContainer.parentNode,".e-content"))&&(this.inputElement.focus(),e=this.getRange());var t="#text"===e.endContainer.nodeName?e.endContainer.parentElement:e.endContainer,i=e.getClientRects()[0].left,n=e.getClientRects()[0].top;this.quickToolbarModule.showInlineQTBar(i,n,t)}},t.prototype.hideInlineToolbar=function(){this.quickToolbarModule.hideInlineQTBar()},t.prototype.updateValueData=function(){if(this.enableHtmlEncode)this.setPanelValue(this.encode(T(this.inputElement.innerHTML)));else{var e=/<[a-z][\s\S]*>/i.test(this.inputElement.innerHTML)?this.inputElement.innerHTML:T(this.inputElement.innerHTML);this.setPanelValue(e)}},t.prototype.removeSheets=function(e){var t;for(t=0;t<e.length;t++)sf.base.detach(e[t])},t.prototype.updateReadOnly=function(){this.observer.notify("readOnlyMode",{editPanel:this.inputElement,mode:this.readonly})},t.prototype.setReadOnly=function(e){this.updateReadOnly(),e||(this.readonly&&this.enabled?this.unBindEvents():this.enabled&&this.bindEvents())},t.prototype.setIframeSettings=function(){if(this.iframeSettings.resources){var e=this.iframeSettings.resources.styles,t=this.iframeSettings.resources.scripts;this.iframeSettings.resources.styles.length>0&&this.InjectSheet(!1,e),this.iframeSettings.resources.scripts.length>0&&this.InjectSheet(!0,t)}this.iframeSettings.attributes&&function(e,t,i,n){var s;if(s=i?t.getDocument().querySelector("body"):t.element,Object.keys(e).length)for(var o=0,r=Object.keys(e);o<r.length;o++){var a=r[o];if("class"===a)s.classList.add(e[a]);else if("disabled"===a&&"disabled"===e[a])t.enabled=!1,t.setEnable();else if("readonly"===a&&"readonly"===e[a])t.readonly=!0,t.setReadOnly(n);else if("style"===a)s.setAttribute("style",e[a]);else if("tabindex"===a)t.inputElement.setAttribute("tabindex",e[a]);else if("placeholder"===a)t.placeholder=e[a],t.setPlaceHolder();else{["name","required"].indexOf(a)>-1?t.valueContainer.setAttribute(a,e[a]):s.setAttribute(a,e[a])}}}(this.iframeSettings.attributes,this,!0,!1),this.iframeSettings.enable&&this.enableRtl?this.inputElement.setAttribute("class","e-rtl"):this.iframeSettings.enable&&!this.enableRtl&&this.inputElement.hasAttribute("class")&&this.inputElement.classList.contains("e-rtl")&&this.inputElement.classList.remove("e-rtl")},t.prototype.InjectSheet=function(e,t){try{if(t&&t.length>0)for(var i=this.getDocument().querySelector("head"),n=0;n<t.length;n++)if(e){var s=this.createScriptElement();s.src=t[n],i.appendChild(s)}else{var o=this.createStyleElement();o.href=t[n],i.appendChild(o)}}catch(e){return}},t.prototype.createScriptElement=function(){var e=sf.base.createElement("script",{className:"rte-iframe-script-sheet"});return e.type="text/javascript",e},t.prototype.createStyleElement=function(){var e=sf.base.createElement("link",{className:"rte-iframe-style-sheet"});return e.rel="stylesheet",e},t.prototype.updateResizeFlag=function(){this.isResizeInitialized=!0},t.prototype.getHtml=function(){return this.serializeValue(this.getEditPanel().innerHTML)},t.prototype.showSourceCode=function(){this.readonly||this.observer.notify("sourceCode",{})},t.prototype.getCharCount=function(){var e="Markdown"===this.editorMode?this.getEditPanel().value.trim():this.getEditPanel().textContent.trim();return"Markdown"!==this.editorMode&&-1!==e.indexOf("​")?e.replace(/\u200B/g,"").length:e.length},t.prototype.focusOut=function(){this.enabled&&(this.inputElement.blur(),this.blurHandler({}))},t.prototype.getToolbar=function(){return this.toolbarSettings.enable?this.element.querySelector("#"+this.id+"_toolbar"):null},t.prototype.getToolbarElement=function(){return this.toolbarSettings.enable?this.element.querySelector("#"+this.id+"_toolbar"):null},t.prototype.updateIntervalValue=function(){clearTimeout(this.idleInterval),this.idleInterval=setTimeout(this.updateValueOnIdle.bind(this),0)},t.prototype.updateValueOnIdle=function(){(sf.base.isNullOrUndefined(this.tableModule)||sf.base.isNullOrUndefined(this.inputElement.querySelector(".e-table-box.e-rbox-select")))&&(this.value=this.getUpdatedValue(),this.updateValueContainer(this.value),this.invokeChangeEvent())},t.prototype.invokeChangeEvent=function(){this.enableXhtml&&!sf.base.isNullOrUndefined(this.value)&&(this.value=this.getXhtml()),this.value!==this.cloneValue&&(this.enablePersistence&&window.localStorage.setItem(this.id,this.value),this.dotNetRef.invokeMethodAsync("ChangeEvent"),this.cloneValue=this.value)},t.prototype.preventImgResize=function(e){"img"===e.target.nodeName.toLocaleLowerCase()&&e.preventDefault()},t.prototype.defaultResize=function(e,t){if("msie"===sf.base.Browser.info.name)t?this.getEditPanel().removeEventListener("mscontrolselect",this.preventImgResize):this.getEditPanel().addEventListener("mscontrolselect",this.preventImgResize);else if("mozilla"===sf.base.Browser.info.name){var i=t?"true":"false";this.getDocument().execCommand("enableObjectResizing",t,i),this.getDocument().execCommand("enableInlineTableEditing",t,i)}},t.prototype.encode=function(e){var t=document.createElement("div");return t.innerText=e.trim(),t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},t.prototype.print=function(){var e,t=this;this.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"print",cancel:!1}).then((function(i){if(e=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth),"msie"===sf.base.Browser.info.name&&e.resizeTo(screen.availWidth,screen.availHeight),e=sf.base.print(t.inputElement,e),!i.cancel){t.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:"print"})}}))},t.prototype.autoResize=function(){var e=this;if("auto"===this.height){if("Markdown"===this.editorMode)setTimeout((function(){e.setAutoHeight(e.inputElement)}),0);else if(this.iframeSettings.enable){var t=this.element.querySelector("#"+this.element.id+"_rte-view");setTimeout((function(){e.setAutoHeight(t)}),100),this.inputElement.style.overflow="hidden"}}else this.inputElement.style.overflow=null},t.prototype.setAutoHeight=function(e){sf.base.isNullOrUndefined(e)||(e.style.height="",e.style.height=this.inputElement.scrollHeight+"px",e.style.overflow="hidden")},t.prototype.restrict=function(e){if(this.maxLength>=0){for(var t="Markdown"===this.editorMode?this.getText():e.currentTarget.textContent,i=[8,16,17,37,38,39,40,46,65],n=void 0,s=0;s<=i.length-1;s++)if(e.which===i[s]){if(e.ctrlKey&&65===e.which)return;if(65!==e.which)return void(n=i[s])}t.length>=this.maxLength&&-1!==this.maxLength&&e.which!==n&&e.preventDefault()}},t.prototype.setPlaceHolder=function(){this.inputElement&&this.placeholder&&!0!==this.iframeSettings.enable&&("Markdown"!==this.editorMode?(this.placeHolderContainer||(this.placeHolderContainer=this.element.querySelector(".e-rte-placeholder")),this.placeHolderContainer.innerHTML=this.placeholder,!(0===this.inputElement.textContent.length&&this.inputElement.childNodes.length<2)||sf.base.isNullOrUndefined(this.inputElement.firstChild)||"BR"!==this.inputElement.firstChild.nodeName&&("P"!==this.inputElement.firstChild.nodeName&&"DIV"!==this.inputElement.firstChild.nodeName||sf.base.isNullOrUndefined(this.inputElement.firstChild.firstChild)||"BR"!==this.inputElement.firstChild.firstChild.nodeName)?this.placeHolderContainer.style.display="none":this.placeHolderContainer.style.display="block"):this.inputElement.setAttribute("placeholder",this.placeholder))},t.prototype.updatePanelValue=function(){var e=this.value;e=this.enableHtmlEncode&&this.value?T(e):e;var t=this.element.querySelector(".e-rte-srctextarea");e?(t&&"block"===t.style.display&&(t.value=this.value),this.valueContainer&&(this.valueContainer.value=this.enableHtmlEncode?this.value:e),"HTML"===this.editorMode&&this.inputElement&&this.inputElement.innerHTML.replace("&amp;","&").trim()!==e.trim()?this.inputElement.innerHTML=e:"Markdown"===this.editorMode&&this.inputElement&&this.inputElement.value.trim()!==e.trim()&&(this.inputElement.value=e)):(t&&"block"===t.style.display&&(t.value=""),"HTML"===this.editorMode?this.inputElement.innerHTML=x(this):this.inputElement.value="",this.valueContainer&&(this.valueContainer.value="")),this.showCharCount&&this.countModule&&this.countModule.refresh()},t.prototype.contentChanged=function(){this.autoSaveOnIdle&&(sf.base.isNullOrUndefined(this.saveInterval)||(clearTimeout(this.timeInterval),this.timeInterval=setTimeout(this.updateIntervalValue.bind(this),this.saveInterval)))},t.prototype.notifyMouseUp=function(e){var t=e.touches?e.changedTouches[0]:e;this.observer.notify("mouseUp",{member:"mouseUp",args:e,touchData:{prevClientX:this.clickPoints.clientX,prevClientY:this.clickPoints.clientY,clientX:t.clientX,clientY:t.clientY}}),this.inputElement&&("HTML"===this.editorMode&&0!==this.inputElement.textContent.length||"Markdown"===this.editorMode&&0!==this.inputElement.value.length)&&this.observer.notify("toolbar-refresh",{args:e}),this.triggerEditArea(e)},t.prototype.triggerEditArea=function(e){if(sf.base.Browser.isDevice&&sf.base.Browser.isIos){var t=e.touches?e.changedTouches[0]:e;this.clickPoints.clientX===t.clientX&&this.clickPoints.clientY===t.clientY&&this.observer.notify("editAreaClick",{member:"editAreaClick",args:e})}else this.observer.notify("editAreaClick",{member:"editAreaClick",args:e})},t.prototype.updateStatus=function(e){if(!sf.base.isNullOrUndefined(e.html)||!sf.base.isNullOrUndefined(e.markdown)){var t=this.formatter.editorManager.undoRedoManager.getUndoStatus();this.dotNetRef.invokeMethodAsync("UpdatedToolbarStatusEvent",{undo:t.undo,redo:t.redo,html:e.html,markdown:e.markdown})}},t.prototype.onListDropDownButtonClick=function(e){sf.base.isNullOrUndefined(e)||(e.item.subCommand="BulletFormatList"===e.item.subCommand?"UL":"OL",this.inlineCloseItems.indexOf(e.item.subCommand)>-1&&this.quickToolbarModule.hideInlineQTBar(),"HTML"===this.editorMode&&this.observer.notify("html-toolbar-click",e))},t.prototype.toolbarItemClick=function(e,t,i){var n;sf.base.isNullOrUndefined(e)||(n="Root"!==i||this.inlineMode.enable?sf.base.select("#"+t,document.body):sf.base.select("#"+t,this.element),e.originalEvent=gt({},e.originalEvent,{target:n}),this.inlineCloseItems.indexOf(e.item.subCommand)>-1&&this.quickToolbarModule.hideInlineQTBar(),"HTML"===this.editorMode?this.observer.notify("html-toolbar-click",e):this.observer.notify("markdown-toolbar-click",e))},t.prototype.toolbarClick=function(e){var t=sf.base.select("#"+e+" .e-hor-nav",this.element);t&&"Expand"===this.toolbarSettings.type&&!sf.base.isNullOrUndefined(t)?t.classList.contains("e-nav-active")?(sf.base.addClass([this.getToolbar()],["e-expand-open"]),this.setContentHeight("toolbar",!0)):(sf.base.removeClass([this.getToolbar()],["e-expand-open"]),this.setContentHeight("toolbar",!1)):sf.base.Browser.isDevice||this.inlineMode.enable,sf.base.isNullOrUndefined(t)&&"Expand"===this.toolbarSettings.type&&sf.base.removeClass([this.getToolbar()],["e-expand-open"])},t.prototype.hideTableQuickToolbar=function(){this.quickToolbarModule.hideTableQTBar()},t.prototype.dropDownBeforeOpen=function(e){this.observer.notify(o,e),this.observer.notify("beforeDropDownOpen",e)},t.prototype.dropDownAfterOpen=function(e){if("Merge cells"===e.element.querySelector("li").innerHTML){var t=e.element.querySelectorAll("li");1===this.inputElement.querySelectorAll(".e-cell-select").length?(sf.base.addClass([t[0]],"e-disabled"),sf.base.removeClass([t[1],t[2]],"e-disabled")):this.inputElement.querySelectorAll(".e-cell-select").length>1&&(sf.base.removeClass([t[0]],"e-disabled"),sf.base.addClass([t[1],t[2]],"e-disabled"))}},t.prototype.dropDownClose=function(e){this.observer.notify(r,e)},t.prototype.dropDownSelect=function(e){if(e.name="dropDownSelect",!document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))||!e.item||"Images"!==e.item.command&&"Audios"!==e.item.command&&"Videos"!==e.item.command&&"Display"!==e.item.command&&"Table"!==e.item.command){this.observer.notify(r,{});if("Lists"===e.item.command){var t={listStyle:e.item.value,listImage:e.item.listImage,type:e.item.subCommand};this.formatter.process(this,e,e.originalEvent,t)}else this.formatter.process(this,e,e.originalEvent,null);this.observer.notify(o,{})}this.observer.notify("dropDownSelect",e)},t.prototype.colorDropDownBeforeOpen=function(){this.observer.notify(o,{})},t.prototype.colorIconSelected=function(e,t,i){this.observer.notify(o,{}),this.observer.notify(r,{}),e.value=sf.base.isNullOrUndefined(t)?e.value:t;var n=this.formatter.editorManager.nodeSelection.getRange(this.getDocument()),s=n.startContainer.parentNode;("TD"===n.startContainer.nodeName||"TH"===n.startContainer.nodeName||sf.base.closest(n.startContainer.parentNode,"td,th")||this.iframeSettings.enable&&!N(s.ownerDocument.querySelector("body"),"e-lib"))&&n.collapsed&&"BackgroundColor"===e.subCommand&&"quick"===i?this.observer.notify("tableColorPickerChanged",{item:e,name:"colorPickerChanged"}):(this.observer.notify(r,{}),this.formatter.process(this,{item:e,name:"colorPickerChanged"},void 0,null),this.observer.notify(o,{}))},t.prototype.colorChanged=function(e,t,i){this.observer.notify(r,{}),e.value=sf.base.isNullOrUndefined(t)?e.value:t;var n=this.formatter.editorManager.nodeSelection.getRange(this.getDocument());("TD"===n.startContainer.nodeName||"TH"===n.startContainer.nodeName||sf.base.closest(n.startContainer.parentNode,"td,th"))&&n.collapsed&&"BackgroundColor"===e.subCommand&&"quick"===i?this.observer.notify("tableColorPickerChanged",{item:e,name:"colorPickerChanged"}):(this.observer.notify(r,{}),this.formatter.process(this,{item:e,name:"colorPickerChanged"},void 0,null),this.observer.notify(o,{}))},t.prototype.cancelLinkDialog=function(){this.isBlur=!1,this.linkModule.cancelDialog()},t.prototype.cancelImageDialog=function(){this.isBlur=!1},t.prototype.cancelAudioDialog=function(){this.isBlur=!1},t.prototype.cancelVideoDialog=function(){this.isBlur=!1},t.prototype.linkDialogClosed=function(){this.isBlur=!1,this.linkModule.linkDialogClosed()},t.prototype.dialogClosed=function(e){this.isBlur=!1,"restore"===e&&this.observer.notify(r,{})},t.prototype.insertLink=function(e){this.linkModule.insertLink(e)},t.prototype.imageRemoving=function(){this.imageModule.removing()},t.prototype.uploadSuccess=function(e,t){this.imageModule.imageUploadSuccess(e,t)},t.prototype.imageSelected=function(){this.imageModule.imageSelected()},t.prototype.imageUploadComplete=function(e,t){this.imageModule.imageUploadComplete(e,t)},t.prototype.imageUploadChange=function(e,t){this.imageModule.imageUploadChange(e,t)},t.prototype.audioRemoving=function(){this.audioModule.fileRemoving()},t.prototype.audioUploadSuccess=function(e,t){this.audioModule.fileUploadSuccess(e,t)},t.prototype.audioSelected=function(){this.audioModule.fileSelected()},t.prototype.audioUploadComplete=function(e,t){this.audioModule.fileUploadComplete(e,t)},t.prototype.audioUploadChange=function(e,t){this.audioModule.fileUploadChange(e,t)},t.prototype.videoRemoving=function(){this.videoModule.fileRemoving()},t.prototype.videoUploadSuccess=function(e,t){this.videoModule.fileUploadSuccess(e,t)},t.prototype.videoSelected=function(){this.videoModule.fileSelected()},t.prototype.videoUploadComplete=function(e,t){this.videoModule.fileUploadComplete(e,t)},t.prototype.videoUploadChange=function(e,t){this.videoModule.fileUploadChange(e,t)},t.prototype.dropUploadChange=function(e,t){this.imageModule.dropUploadChange(e,t)},t.prototype.insertImage=function(){this.imageModule.insertImageUrl()},t.prototype.imageDialogOpened=function(){this.imageModule.dialogOpened()},t.prototype.imageDialogClosed=function(){this.isBlur=!1,this.imageModule.dialogClosed()},t.prototype.insertAudio=function(){this.audioModule.insertAudioUrl()},t.prototype.audioDialogOpened=function(){this.audioModule.dialogOpened()},t.prototype.audioDialogClosed=function(){this.isBlur=!1,this.audioModule.dialogClosed()},t.prototype.insertVideo=function(){this.videoModule.insertVideoUrl()},t.prototype.videoDialogOpened=function(){this.videoModule.dialogOpened()},t.prototype.videoDialogClosed=function(){this.isBlur=!1,this.videoModule.dialogClosed()},t.prototype.insertTable=function(e,t){this.tableModule.customTable(e,t)},t.prototype.applyTableProperties=function(e){this.tableModule.applyTableProperties(e)},t.prototype.createTablePopupOpened=function(){this.tableModule.createTablePopupOpened()},t.prototype.pasteContent=function(e){this.pasteCleanupModule.selectFormatting(e)},t.prototype.updatePasteContent=function(e){this.observer.notify("afterPasteCleanUp",{text:e})},t.prototype.imageDropInitialized=function(e){this.imageModule.imageDropInitialized(e)},t.prototype.preventEditable=function(){this.inputElement.contentEditable="false"},t.prototype.enableEditable=function(){this.inputElement.contentEditable="true"},t.prototype.removeDroppedImage=function(){this.imageModule.removeDroppedImage()},t.prototype.dropUploadSuccess=function(e,t){this.imageModule.dropUploadSuccess(e,t)},t.prototype.focusIn=function(){this.enabled&&(this.inputElement.focus(),this.focusHandler({}))},t.prototype.insertAlt=function(e){this.imageModule.insertAlt(e)},t.prototype.insertSize=function(e,t){this.imageModule.insertSize(e,t)},t.prototype.insertVideoSize=function(e,t){this.videoModule.insertVideoSize(e,t)},t.prototype.insertImageLink=function(e,t){this.imageModule.insertLink(e,t)},t.prototype.showLinkDialog=function(){this.linkModule.showDialog(!0)},t.prototype.showImageDialog=function(){this.imageModule.showDialog(!0)},t.prototype.showAudioDialog=function(){this.audioModule.showDialog(!0)},t.prototype.showVideoDialog=function(){this.videoModule.showDialog(!0)},t.prototype.showTableDialog=function(){this.tableModule.showDialog(!0)},t.prototype.destroy=function(){this.unWireEvents()},t.prototype.wireEvents=function(){this.element.addEventListener("focusin",this.onFocusHandler,!0),this.element.addEventListener("focusout",this.onBlurHandler,!0),this.observer.on("content-changed",this.contentChanged,this),this.observer.on("model-changed",this.refresh,this),this.wireResizeEvents(),this.observer.on("updateTbItemsStatus",this.updateStatus,this),this.readonly&&this.enabled||this.bindEvents()},t.prototype.wireResizeEvents=function(){this.enableResize&&this.observer.on("resizeInitialized",this.updateResizeFlag,this)},t.prototype.bindEvents=function(){this.keyboardModule=new qe(this.inputElement,{keyAction:this.keyDown.bind(this),keyConfigs:gt({},this.formatter.keyConfig,this.keyConfig),eventName:"keydown"});var e=sf.base.closest(this.valueContainer,"form");e&&sf.base.EventHandler.add(e,"reset",this.resetHandler,this),sf.base.EventHandler.add(this.inputElement,"keyup",this.keyUp,this),sf.base.EventHandler.add(this.inputElement,"paste",this.onPaste,this),sf.base.EventHandler.add(this.inputElement,sf.base.Browser.touchEndEvent,sf.base.debounce(this.mouseUp,30),this),sf.base.EventHandler.add(this.inputElement,sf.base.Browser.touchStartEvent,this.mouseDownHandler,this),this.wireContextEvent(),this.formatter.editorManager.observer.on("keydown-handler",this.editorKeyDown,this),this.element.ownerDocument.defaultView.addEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(sf.base.EventHandler.add(this.inputElement,"focusin",this.focusHandler,this),sf.base.EventHandler.add(this.inputElement,"focusout",this.blurHandler,this),sf.base.EventHandler.add(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler,this),sf.base.EventHandler.add(this.inputElement.ownerDocument,sf.base.Browser.touchStartEvent,this.onIframeMouseDown,this)),this.wireScrollElementsEvents()},t.prototype.wireContextEvent=function(){this.quickToolbarSettings.showOnRightClick&&(sf.base.EventHandler.add(this.inputElement,"contextmenu",this.contextHandler,this),sf.base.Browser.isDevice&&(this.touchModule=new sf.base.Touch(this.inputElement,{tapHold:this.touchHandler.bind(this),tapHoldThreshold:500})))},t.prototype.wireScrollElementsEvents=function(){this.scrollParentElements=sf.popups.getScrollableParent(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var i=t[e];sf.base.EventHandler.add(i,"scroll",this.scrollHandler,this)}this.iframeSettings.enable||sf.base.EventHandler.add(this.getPanel(),"scroll",this.contentScrollHandler,this)},t.prototype.unWireEvents=function(){this.element.removeEventListener("focusin",this.onFocusHandler,!0),this.element.removeEventListener("focusout",this.onBlurHandler,!0),this.observer.off("content-changed",this.contentChanged),this.unWireResizeEvents(),this.observer.off("updateTbItemsStatus",this.updateStatus),this.unBindEvents()},t.prototype.unWireResizeEvents=function(){this.observer.off("resizeInitialized",this.updateResizeFlag)},t.prototype.unBindEvents=function(){this.keyboardModule&&this.keyboardModule.destroy();var e=sf.base.closest(this.valueContainer,"form");e&&sf.base.EventHandler.remove(e,"reset",this.resetHandler),sf.base.EventHandler.remove(this.inputElement,"keyup",this.keyUp),sf.base.EventHandler.remove(this.inputElement,"paste",this.onPaste),sf.base.EventHandler.remove(this.inputElement,sf.base.Browser.touchEndEvent,sf.base.debounce(this.mouseUp,30)),sf.base.EventHandler.remove(this.inputElement,sf.base.Browser.touchStartEvent,this.mouseDownHandler),this.unWireContextEvent(),this.formatter&&this.formatter.editorManager.observer.off("keydown-handler",this.editorKeyDown),this.element.ownerDocument.defaultView.removeEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(sf.base.EventHandler.remove(this.inputElement,"focusin",this.focusHandler),sf.base.EventHandler.remove(this.inputElement,"focusout",this.blurHandler),sf.base.EventHandler.remove(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler),sf.base.EventHandler.remove(this.inputElement.ownerDocument,sf.base.Browser.touchStartEvent,this.onIframeMouseDown)),this.unWireScrollElementsEvents()},t.prototype.unWireContextEvent=function(){sf.base.EventHandler.remove(this.inputElement,"contextmenu",this.contextHandler),sf.base.Browser.isDevice&&this.touchModule&&this.touchModule.destroy()},t.prototype.unWireScrollElementsEvents=function(){this.scrollParentElements=sf.popups.getScrollableParent(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var i=t[e];sf.base.EventHandler.remove(i,"scroll",this.scrollHandler)}this.iframeSettings.enable||sf.base.EventHandler.remove(this.getPanel(),"scroll",this.contentScrollHandler)},t.prototype.focusHandler=function(e){if(!this.isRTE||this.isFocusOut){this.isRTE=!this.isFocusOut,this.isFocusOut=!1,sf.base.addClass([this.element],["e-focused"]),"HTML"===this.editorMode?this.cloneValue=this.inputElement.innerHTML===x(this)?null:this.enableHtmlEncode?this.encode(T(this.inputElement.innerHTML)):this.inputElement.innerHTML:this.cloneValue=""===this.inputElement.value?null:this.inputElement.value;var t=document.activeElement;if((t===this.element||t===this.getToolbarElement()||t===this.getEditPanel()||this.iframeSettings.enable&&t===this.getPanel()&&e.target&&!e.target.classList.contains("e-img-inner")&&e.target&&e.target.parentElement&&!e.target.parentElement.classList.contains("e-img-wrap")||sf.base.closest(t,".e-rte-toolbar")===this.getToolbarElement())&&(this.getEditPanel().focus(),!sf.base.isNullOrUndefined(this.getToolbarElement()))){this.getToolbarElement().setAttribute("tabindex","-1");for(var i=this.getToolbarElement().querySelectorAll('[tabindex="0"]'),n=0;n<i.length;n++)i[n].setAttribute("tabindex","-1")}this.defaultResize(e,!1);var s={isInteracted:0!==Object.keys(e).length};this.focusEnabled&&this.dotNetRef.invokeMethodAsync("FocusEvent",s),!sf.base.isNullOrUndefined(this.saveInterval)&&this.saveInterval>0&&!this.autoSaveOnIdle&&(this.timeInterval=setInterval(this.updateValueOnIdle.bind(this),this.saveInterval)),sf.base.EventHandler.add(document,"mousedown",this.onDocumentClick,this)}if(!sf.base.isNullOrUndefined(this.getToolbarElement())){var o=this.getToolbarElement().querySelectorAll("input,select,button,a,[tabindex]");for(n=0;n<o.length;n++)o[n].classList.contains("e-rte-dropdown-btn")||o[n].classList.contains("e-insert-table-btn")||o[n].hasAttribute("tabindex")&&"-1"===o[n].getAttribute("tabindex")||o[n].setAttribute("tabindex","-1")}},t.prototype.blurHandler=function(e){var t=e.relatedTarget;if(t){var i=sf.base.closest(t,".e-richtexteditor");i&&i===this.element?(this.isBlur=!1,t===this.getToolbarElement()&&t.setAttribute("tabindex","-1")):sf.base.closest(t,'[aria-owns="'+this.element.id+'"]')||!sf.base.isNullOrUndefined(sf.base.closest(t,".e-rte-elements"))?this.isBlur=!1:(this.isBlur=!0,t=null)}else this.isIframeRteElement||(this.isBlur=!0,this.isIframeRteElement=!0);if(this.isBlur&&sf.base.isNullOrUndefined(t)){sf.base.removeClass([this.element],["e-focused"]),this.observer.notify("focusChange",{}),this.value=this.getUpdatedValue(),this.updateValueContainer(this.value),this.observer.notify("toolbar-refresh",{args:e,documentNode:document}),this.invokeChangeEvent(),this.isFocusOut=!0,this.isBlur=!1,this.enableXhtml&&(this.valueContainer.value=this.getXhtmlString(this.valueContainer.value)),A(this.valueContainer,"focusout"),this.defaultResize(e,!0);var n={isInteracted:0!==Object.keys(e).length};this.blurEnabled&&this.dotNetRef.invokeMethodAsync("BlurEvent",n),sf.base.isNullOrUndefined(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick)}else this.isRTE=!0},t.prototype.resizeHandler=function(e){var t=!1;if(document.body.contains(this.element)){if(this.toolbarSettings.enable&&!this.inlineMode.enable){e||this.dotNetRef.invokeMethodAsync("RefreshToolbarOverflow");var i=this.element.querySelector(".e-rte-toolbar");t=i&&i.classList.contains("e-expand-open")}this.setContentHeight("windowResize",t),this.observer.notify("resize",null)}},t.prototype.touchHandler=function(e){this.notifyMouseUp(e.originalEvent),this.triggerEditArea(e.originalEvent)},t.prototype.resetHandler=function(){var e=this.valueContainer.defaultValue.trim().replace(/<!--!-->/gi,"");this.value=""===e?null:this.defaultResetValue,this.setPanelValue(this.value,!0)},t.prototype.contextHandler=function(e){var t=sf.base.closest(e.target,"a, table, img");!1!==this.inlineMode.onSelection&&(sf.base.isNullOrUndefined(t)||!this.inputElement.contains(t)||"IMG"!==t.tagName&&"TABLE"!==t.tagName&&"A"!==t.tagName)||e.preventDefault()},t.prototype.scrollHandler=function(e){this.observer.notify("scroll",{args:e})},t.prototype.contentScrollHandler=function(e){this.observer.notify("contentscroll",{args:e})},t.prototype.mouseUp=function(e){if(this.quickToolbarSettings.showOnRightClick&&sf.base.Browser.isDevice){var t=e.target,i=sf.base.closest(t,"table");if(t&&"A"===t.nodeName||"IMG"===t.nodeName||"TD"===t.nodeName||"TH"===t.nodeName||"TABLE"===t.nodeName||i&&this.getEditPanel().contains(i))return}this.notifyMouseUp(e)},t.prototype.mouseDownHandler=function(e){var t=e.touches?e.changedTouches[0]:e;sf.base.addClass([this.element],["e-focused"]),this.defaultResize(e,!1),this.observer.notify(a,{args:e}),this.clickPoints={clientX:t.clientX,clientY:t.clientY}},t.prototype.onIframeMouseDown=function(e){this.isBlur=!1,this.observer.notify("iframe-click",e)},t.prototype.cleanList=function(e){var t=this.getRange(),i=t.startContainer,n=t.endContainer,s=t.startOffset,o=i===n,r="#text"===t.endContainer.nodeName?t.endContainer.parentElement:t.endContainer,a=sf.base.closest(r,"LI");if(!sf.base.isNullOrUndefined(a)&&r.textContent.length===t.endOffset&&!t.collapsed&&sf.base.isNullOrUndefined(r.nextElementSibling)){a.textContent=a.textContent.trim(),a.textContent.length-1;for(var l=a;"#text"!==l.nodeName;)l=l.lastChild;this.formatter.editorManager.nodeSelection.setSelectionText(this.getDocument(),o?l:i,l,s,l.textContent.length)}},t.prototype.keyDown=function(e){if(this.observer.notify(s,{member:"keydown",args:e}),this.restrict(e),"HTML"===this.editorMode&&this.cleanList(e),this.iframeSettings.enable&&!this.enableTabKey&&9===e.which&&"Tab"===e.code&&"BODY"===e.target.nodeName&&(this.isIframeRteElement=!1),"HTML"===this.editorMode&&(8===e.which&&"Backspace"===e.code||46===e.which&&"Delete"===e.code)){var t=this.getRange(),i="#text"===t.startContainer.nodeName?t.startContainer.parentElement:t.startContainer;if(sf.base.closest(i,"pre")&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset-1)||46===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset)){var n=new RegExp(String.fromCharCode(8203),"g"),o=8===e.which?t.startOffset-1:t.startOffset;t.startContainer.textContent=t.startContainer.textContent.replace(n,""),this.formatter.editorManager.nodeSelection.setCursorPoint(this.getDocument(),t.startContainer,o)}else if("Backspace"===e.code&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(0)&&t.collapsed){var r=t.startContainer.parentElement,a=void 0,l=void 0;for(l=0;l<r.childNodes.length;l++)r.childNodes[l]===t.startContainer&&(a=l);var d=!0,h=[];for(l=a;l>=0;l--)3===r.childNodes[l].nodeType&&8203===r.childNodes[l].textContent.charCodeAt(0)&&d?h.push(l):d=!1;if(h.length>0)for(l=h.length-1;l>0;l--)r.childNodes[h[l]].textContent="";this.formatter.editorManager.nodeSelection.setCursorPoint(this.getDocument(),t.startContainer,t.startOffset)}}if(0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),"insert-link"!==e.action&&(e.action&&"paste"!==e.action&&"space"!==e.action||9===e.which||"Backspace"===e.code&&8===e.which))switch(this.formatter.process(this,null,e),e.action){case"toolbar-focus":if(this.toolbarSettings.enable){this.getToolbar().querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus()}break;case"escape":this.getEditPanel().focus()}sf.base.isNullOrUndefined(this.placeholder)||(sf.base.isNullOrUndefined(this.placeHolderContainer)||1===this.inputElement.textContent.length?this.setPlaceHolder():this.placeHolderContainer.style.display="none"),this.autoResize()},t.prototype.editorKeyDown=function(e){switch(e.event.action){case"copy":this.onCopy();break;case"cut":this.onCut()}!e.callBack||"copy"!==e.event.action&&"cut"!==e.event.action&&"delete"!==e.event.action||e.callBack({requestType:e.event.action,editorMode:"HTML",event:e.event})},t.prototype.keyUp=function(e){if("HTML"===this.editorMode){switch(e.which){case 46:case 8:var t=this.getEditPanel().childNodes;if(0===t.length||1===t.length&&("BR"===t[0].tagName||("P"===t[0].tagName||"DIV"===t[0].tagName)&&(0===t[0].childNodes.length||""===t[0].textContent))){var i=this.getEditPanel();i.innerHTML=x(this),this.formatter.editorManager.nodeSelection.setCursorPoint(this.getDocument(),i.childNodes[0],0)}}var s=this.getRange();if(-1!=sf.base.Browser.userAgent.indexOf("Firefox")&&"#text"===s.startContainer.nodeName&&s.startContainer.parentElement===this.inputElement&&"BR"!==this.enterKey){var o=this.getRange(),r=sf.base.createElement(this.enterKey);o.startContainer.parentElement.insertBefore(r,o.startContainer),r.appendChild(o.startContainer),this.formatter.editorManager.nodeSelection.setSelectionText(this.getDocument(),r.childNodes[0],r.childNodes[0],r.childNodes[0].textContent.length,r.childNodes[0].textContent.length)}}this.observer.notify(n,{member:"keyup",args:e}),"KeyX"!==e.code||88!==e.which||88!==e.keyCode||!e.ctrlKey||""!==this.inputElement.innerHTML&&"<br>"!==this.inputElement.innerHTML||(this.inputElement.innerHTML=E(x(this),this));var a=32===e.which||13===e.which||8===e.which||46===e.which;("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||a||"Markdown"===this.editorMode&&("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||a)&&!this.inlineMode.enable)&&this.formatter.onKeyHandler(this,e),(this.inputElement&&0!==this.inputElement.textContent.length||this.element.querySelectorAll(".e-toolbar-item.e-active").length>0)&&this.observer.notify("toolbar-refresh",{args:e}),sf.base.isNullOrUndefined(this.placeholder)||"Enter"===e.key&&13===e.keyCode||"<p><br></p>"!==this.inputElement.innerHTML&&"<div><br></div>"!==this.inputElement.innerHTML&&"<br>"!==this.inputElement.innerHTML||this.setPlaceHolder()},t.prototype.onCut=function(){this.getDocument().execCommand("cut",!1,null)},t.prototype.onCopy=function(){this.getDocument().execCommand("copy",!1,null)},t.prototype.onPaste=function(e){if(sf.base.isNullOrUndefined(sf.base.select(".e-rte-img-dialog",this.element))){var t=this.getText().length-this.getSelection().length+(sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.clipboardData)?0:e.clipboardData.getData("text/plain").length);if("Markdown"===this.editorMode){var i={requestType:"Paste",editorMode:this.editorMode,event:e};return this.formatter.onSuccess(this,i),void(-1===this.maxLength||t<this.maxLength||e.preventDefault())}"true"===this.inputElement.contentEditable&&(-1===this.maxLength||t<this.maxLength)?this.observer.notify("pasteClean",{args:e}):e.preventDefault()}},t.prototype.onDocumentClick=function(e){var t=e.target,i=sf.base.closest(t,".e-richtexteditor");this.element.contains(e.target)||document===e.target||i===this.element||sf.base.closest(t,'[aria-owns="'+this.element.id+'"]')||(this.isBlur=!0,this.isRTE=!1),this.observer.notify("docClick",{args:e})},t.prototype.propertyChangeHandler=function(e){for(var t={},i=0,n=Object.keys(e);i<n.length;i++){t[a=n[i]]=this[a]}var s=this.value;this.updateContext(e);for(var o=0,r=Object.keys(e);o<r.length;o++){var a;switch(a=r[o]){case"enableXhtml":case"enableHtmlSanitizer":case"value":case"enterKey":if("value"===a&&s===this.value)break;"enterKey"!==a||"<p><br/></p>"!==this.value&&"<div><br/></div>"!==this.value&&"<br/>"!==this.value&&"<p><br></p>"!==this.value&&"<div><br></div>"!==this.value&&"<br>"!==this.value||(this.value=x(this)),this.setPanelValue(this.value),this.enableXhtml&&(this.value=this.getXhtml()),this.addAudioVideoWrapper();break;case"height":this.setContentHeight(),this.autoResize();break;case"width":this.resizeHandler(!0);break;case"readonly":this.setReadOnly(!1);break;case"enabled":this.setEnable();break;case"placeholder":this.placeholder=this.placeholder,this.setPlaceHolder();break;case"enableResize":e[a]&&sf.base.isNullOrUndefined(this.resizeModule)?(this.resizeModule=new c(this),this.wireResizeEvents()):this.resizeModule&&(this.resizeModule.destroy(),this.unWireResizeEvents(),this.setContentHeight(),this.resizeModule=null);break;case"showCharCount":this.showCharCount?sf.base.isNullOrUndefined(this.countModule)&&(this.countModule=new h(this)):!1===this.showCharCount&&this.countModule&&(this.countModule.destroy(),this.countModule=null);break;case"maxLength":this.showCharCount&&this.countModule&&this.countModule.refresh();break;case"enableHtmlEncode":this.updateValueData(),this.updatePanelValue(),this.setPlaceHolder(),this.showCharCount&&this.countModule.refresh();break;case"undoRedoSteps":case"undoRedoTimer":this.formatter.editorManager.observer.notify("model_changed",{newProp:e});break;case"adapter":var l=this.getEditPanel(),d={undoRedoSteps:this.undoRedoSteps,undoRedoTimer:this.undoRedoTimer};"Markdown"===this.editorMode&&(this.formatter=new ut(sf.base.extend({},this.adapter,{element:l,options:d})));break;case"iframeSettings":var p=t[a];if(p.resources){var u=this.getDocument().querySelector("head"),f=void 0;p.resources.scripts&&(f=u.querySelectorAll(".rte-iframe-script-sheet"),this.removeSheets(f)),p.resources.styles&&(f=u.querySelectorAll(".rte-iframe-style-sheet"),this.removeSheets(f))}this.setIframeSettings();break;case"quickToolbarSettings":this.quickToolbarSettings.enable?(sf.base.isNullOrUndefined(this.quickToolbarModule)&&(this.quickToolbarModule=new je(this)),this.quickToolbarSettings.showOnRightClick?this.wireContextEvent():this.unWireContextEvent()):(this.quickToolbarModule.destroy(),this.quickToolbarModule=null);break;case"toggleToolbar":e[a]?sf.base.isNullOrUndefined(this.toolbarModule)&&(this.isUndoRedoStatus(),this.toolbarModule=new P(this)):(this.toolbarModule.destroy(),this.toolbarModule=null)}}},t}();return{initialize:function(e){e.dataId&&new vt(e)},updateProperties:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].updateContext(e)},setPanelValue:function(e,t){e&&window.sfBlazor.instances[e].setPanelValue(t)},toolbarItemClick:function(e,t,i,n){e&&window.sfBlazor.instances[e].toolbarItemClick(t,i,n)},toolbarClick:function(e,t){e&&window.sfBlazor.instances[e].toolbarClick(t)},listDropDownButtonClick:function(e,t){e&&window.sfBlazor.instances[e].onListDropDownButtonClick(t)},dropDownBeforeOpen:function(e,t){e&&window.sfBlazor.instances[e].dropDownBeforeOpen(t)},dropDownAfterOpen:function(e,t){e&&window.sfBlazor.instances[e].dropDownAfterOpen(t)},dropDownClose:function(e,t){e&&window.sfBlazor.instances[e].dropDownClose(t)},dropDownButtonItemSelect:function(e,t){e&&window.sfBlazor.instances[e].dropDownSelect(t)},colorDropDownBeforeOpen:function(e){e&&window.sfBlazor.instances[e].colorDropDownBeforeOpen()},colorIconSelected:function(e,t,i,n){e&&window.sfBlazor.instances[e].colorIconSelected(t,i,n)},colorPickerChanged:function(e,t,i,n){e&&window.sfBlazor.instances[e].colorChanged(t,i,n)},cancelLinkDialog:function(e){e&&window.sfBlazor.instances[e].cancelLinkDialog()},cancelImageDialog:function(e){e&&window.sfBlazor.instances[e].cancelImageDialog()},linkDialogClosed:function(e){e&&window.sfBlazor.instances[e].linkDialogClosed()},dialogClosed:function(e,t){e&&window.sfBlazor.instances[e].dialogClosed(t)},insertLink:function(e,t){e&&window.sfBlazor.instances[e].insertLink(t)},imageRemoving:function(e){e&&window.sfBlazor.instances[e].imageRemoving()},audioRemoving:function(e){e&&window.sfBlazor.instances[e].audioRemoving()},videoRemoving:function(e){e&&window.sfBlazor.instances[e].videoRemoving()},uploadSuccess:function(e,t,i){e&&window.sfBlazor.instances[e].uploadSuccess(t,i)},audioUploadSuccess:function(e,t,i){e&&window.sfBlazor.instances[e].audioUploadSuccess(t,i)},videoUploadSuccess:function(e,t,i){e&&window.sfBlazor.instances[e].videoUploadSuccess(t,i)},imageSelected:function(e){e&&window.sfBlazor.instances[e].imageSelected()},audioSelected:function(e){e&&window.sfBlazor.instances[e].audioSelected()},videoSelected:function(e){e&&window.sfBlazor.instances[e].videoSelected()},imageUploadComplete:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].imageUploadComplete(e.base64Str,e.altText)},audioUploadComplete:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].audioUploadComplete(e.base64Str,e.fileName)},videoUploadComplete:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].videoUploadComplete(e.base64Str,e.fileName)},imageUploadChange:function(e,t,i){e&&window.sfBlazor.instances[e].imageUploadChange(t,i)},audioUploadChange:function(e,t,i){e&&window.sfBlazor.instances[e].audioUploadChange(t,i)},videoUploadChange:function(e,t,i){e&&window.sfBlazor.instances[e].videoUploadChange(t,i)},dropUploadChange:function(e,t,i){e&&window.sfBlazor.instances[e].dropUploadChange(t,i)},insertImage:function(e){e&&window.sfBlazor.instances[e].insertImage()},insertAudio:function(e){e&&window.sfBlazor.instances[e].insertAudio()},insertVideo:function(e){e&&window.sfBlazor.instances[e].insertVideo()},imageDialogOpened:function(e){e&&window.sfBlazor.instances[e].imageDialogOpened()},imageDialogClosed:function(e){e&&window.sfBlazor.instances[e].imageDialogClosed()},audioDialogOpened:function(e){e&&window.sfBlazor.instances[e].audioDialogOpened()},audioDialogClosed:function(e){e&&window.sfBlazor.instances[e].audioDialogClosed()},videoDialogOpened:function(e){e&&window.sfBlazor.instances[e].videoDialogOpened()},videoDialogClosed:function(e){e&&window.sfBlazor.instances[e].videoDialogClosed()},propertyChangeHandler:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].propertyChangeHandler(e)},insertTable:function(e,t,i){e&&window.sfBlazor.instances[e].insertTable(t,i)},applyTableProperties:function(e,t){e&&window.sfBlazor.instances[e].applyTableProperties(t)},createTablePopupOpened:function(e){e&&window.sfBlazor.instances[e].createTablePopupOpened()},pasteContent:function(e,t){e&&window.sfBlazor.instances[e].pasteContent(t)},updatePasteContent:function(e,t){e&&window.sfBlazor.instances[e].updatePasteContent(t)},imageDropInitialized:function(e,t){e&&window.sfBlazor.instances[e].imageDropInitialized(t)},preventEditable:function(e){e&&window.sfBlazor.instances[e].preventEditable()},enableEditable:function(e){e&&window.sfBlazor.instances[e].enableEditable()},removeDroppedImage:function(e){e&&window.sfBlazor.instances[e].removeDroppedImage()},dropUploadSuccess:function(e,t,i){e&&window.sfBlazor.instances[e].dropUploadSuccess(t,i)},executeCommand:function(e,t,i,n){e&&window.sfBlazor.instances[e].executeCommand(t,i,n)},getCharCount:function(e){return e&&window.sfBlazor.instances[e].getCharCount()},focusIn:function(e){return e&&window.sfBlazor.instances[e].focusIn()},focusOut:function(e){return e&&window.sfBlazor.instances[e].focusOut()},getContent:function(e){return e&&window.sfBlazor.instances[e].getContent()},getHtml:function(e){return e&&window.sfBlazor.instances[e].getHtml()},getSelectedHtml:function(e){return e&&window.sfBlazor.instances[e].getSelectedHtml()},getSelection:function(e){return e&&window.sfBlazor.instances[e].getSelection()},getText:function(e){return e&&window.sfBlazor.instances[e].getText()},print:function(e){return e&&window.sfBlazor.instances[e].print()},refreshUI:function(e){return e&&window.sfBlazor.instances[e].refreshUI()},sanitizeHtml:function(e,t){return e&&window.sfBlazor.instances[e].sanitizeHtml(t)},selectAll:function(e){return e&&window.sfBlazor.instances[e].selectAll()},selectRange:function(e,t){return e&&window.sfBlazor.instances[e].selectRange(t)},showFullScreen:function(e){return e&&window.sfBlazor.instances[e].showFullScreen()},showSourceCode:function(e){return e&&window.sfBlazor.instances[e].showSourceCode()},insertAlt:function(e,t){return e&&window.sfBlazor.instances[e].insertAlt(t)},insertSize:function(e,t,i){return e&&window.sfBlazor.instances[e].insertSize(t,i)},insertVideoSize:function(e,t,i){return e&&window.sfBlazor.instances[e].insertVideoSize(t,i)},insertImageLink:function(e,t,i){return e&&window.sfBlazor.instances[e].insertImageLink(t,i)},updateContentHeight:function(e){return e&&window.sfBlazor.instances[e].setContentHeight()},saveSelection:function(e){e&&window.sfBlazor.instances[e].saveSelection()},restoreSelection:function(e){e&&window.sfBlazor.instances[e].restoreSelection()},getXhtml:function(e){return e&&window.sfBlazor.instances[e].getXhtml()},showLinkDialog:function(e){e&&window.sfBlazor.instances[e].showLinkDialog()},showImageDialog:function(e){e&&window.sfBlazor.instances[e].showImageDialog()},showAudioDialog:function(e){e&&window.sfBlazor.instances[e].showAudioDialog()},showVideoDialog:function(e){e&&window.sfBlazor.instances[e].showVideoDialog()},showTableDialog:function(e){e&&window.sfBlazor.instances[e].showTableDialog()},showInlineToolbar:function(e){e&&window.sfBlazor.instances[e].showInlineToolbar()},hideInlineToolbar:function(e){e&&window.sfBlazor.instances[e].hideInlineToolbar()},destroy:function(e){e&&window.sfBlazor.instances[e].destroy()}}}()},"./modules/sf-schedule.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Schedule=function(){"use strict";var e="e-popup-open",t="e-appointment-border";function i(e,t){var i,n=sf.base.createElement("div",{className:t}).cloneNode();return n.style.visibility="hidden",n.style.position="absolute",e.appendChild(n),i=n.offsetHeight,sf.base.remove(n),i}function n(e){var t=getComputedStyle(e);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m42:0}function s(e){var t=getComputedStyle(e);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m41:0}function o(e,t){var i=new Date(e.getTime());return t=(t-i.getDay()-7)%7,new Date(i.setDate(i.getDate()+t))}function r(e){return new Date(e.getFullYear(),e.getMonth())}function a(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function l(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function d(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTimezoneOffset(),i=e.getTimezoneOffset()-t;return e.getTime()-new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime()-60*i*1e3}function h(e,t){return e=new Date(""+e),new Date(e.setDate(e.getDate()+t))}function c(e,t){var i,n=(e=new Date(""+e)).getDate();return e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(n,(i=e,new Date(i.getFullYear(),i.getMonth()+1,0).getDate()))),e}function p(e,t,i){var n=new Date(e.getTime());n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds());var s=new Date(e.getTime());return 0===i.getHours()?s=h(s,1):(s.setHours(i.getHours()),s.setMinutes(i.getMinutes()),s.setSeconds(i.getSeconds())),{startHour:n,endHour:s}}var u=null;function f(){if(null!==u)return u;var e,t=sf.base.createElement("div");t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t);var i=devicePixelRatio?"1.10"===devicePixelRatio.toFixed(2)||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0;return e=t.offsetWidth-t.clientWidth-i|0,document.body.removeChild(t),u=e}function m(e){var t=e.getFullYear(),i=e.getMonth(),n=e.getDate(),s=e.getHours(),o=e.getMinutes(),r=e.getSeconds(),a=e.getMilliseconds();return Date.UTC(t,i,n,s,o,r,a)}function g(e){var t=getComputedStyle(e);return e.offsetHeight+(parseInt(t.marginTop,10)||0)+(parseInt(t.marginBottom,10)||0)}function v(e){return new Date(+e-6e4*e.getTimezoneOffset())}function b(e){var t=new Date(+e+6e4*e.getTimezoneOffset());return new Date(t.getTime()+6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))}function y(e,t){var i=e.getTimezoneOffset();try{var n=new Date(e.toLocaleString("en-US",{timeZone:t}));return isNaN(n.getTime())?0:(e.getTime()-n.getTime())/6e4+i}catch(e){return 0}}var w,C,S,E,x,O,T,A,N,k,I,M=function(){function e(e){this.parent=e}return e.prototype.onDataReady=function(e){},e.prototype.getScrollXIndent=function(e){return e.offsetHeight-e.clientHeight>0?f():0},e.prototype.scrollTopPanel=function(e){this.getDatesHeaderElement().firstElementChild.scrollLeft=e.scrollLeft},e.prototype.scrollHeaderLabels=function(e){for(var t=this.element.querySelector(".e-date-header-wrap table"),i=t.offsetWidth/t.querySelectorAll("colgroup col").length,n=function(t,n){for(var s,o=0,r=0,a=n?-e.scrollLeft:e.scrollLeft,l=0,d=t;l<d.length;l++){var h=d[l];if((r+=parseInt(h.getAttribute("colSpan"),10))>Math.floor(a/i)){s=h;break}o+=h.offsetWidth}sf.base.isNullOrUndefined(s)||(s.children[0].style[n?"right":"left"]=a-o+"px")},s=0,o=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"];s<o.length;s++){var r=o[s],a=[].slice.call(this.element.querySelectorAll(r));if(a.length>0){for(var l=0,d=a;l<d.length;l++){d[l].children[0].style[this.parent.options.enableRtl?"right":"left"]=""}n(a,this.parent.options.enableRtl)}}},e.prototype.getHeaderBarHeight=function(e){void 0===e&&(e=!1);var t=2,i=this.parent.element.querySelector(".e-schedule-toolbar");if(i&&(t+=g(i)),this.parent.uiStateValues.isGroupAdaptive||e){var n=this.parent.element.querySelector(".e-schedule-resource-toolbar");n&&(t+=n.offsetHeight)}return t},e.prototype.getDatesHeaderElement=function(){return this.element.querySelector(".e-date-header-container")},e.prototype.highlightCurrentTime=function(){},e.prototype.getStartHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.getEndHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.isCurrentDate=function(e){return e.setHours(0,0,0,0)===this.parent.getCurrentTime().setHours(0,0,0,0)},e.prototype.isCurrentMonth=function(e){return e.getFullYear()===this.parent.getCurrentTime().getFullYear()&&e.getMonth()===this.parent.getCurrentTime().getMonth()},e.prototype.isWorkDay=function(e,t){return void 0===t&&(t=this.parent.activeViewOptions.workDays),t.indexOf(e.getDay())>=0},e.prototype.isWorkHour=function(e,t,i,n){return!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&(t.setMilliseconds(0),i.setMilliseconds(0),!(d(e)<d(t)||d(e)>=d(i)||!this.isWorkDay(e,n)))},e.prototype.getRenderDates=function(e){var t=[];if("Week"===this.parent.options.currentView||"TimelineWeek"===this.parent.options.currentView)for(var i=o(l(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),n=0,s=7*this.parent.activeViewOptions.interval;n<s;n++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=h(i,1);else if("WorkWeek"===this.parent.options.currentView||"TimelineWorkWeek"===this.parent.options.currentView){i=o(l(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),n=0;for(var r=7*this.parent.activeViewOptions.interval;n<r;n++)this.isWorkDay(i,e)&&t.push(i),i=h(i,1)}else{i=l(this.parent.options.selectedDate);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=h(i,1)}while(this.parent.activeViewOptions.interval!==t.length)}return e||(this.renderDates=t),t},e.prototype.getColElements=function(){return[].slice.call(this.element.querySelectorAll(".e-content-wrap col, .e-date-header-wrap col"))},e.prototype.setColWidth=function(e){if(this.parent.isTimelineView()){var t=this.getColElements(),i=this.element.querySelector(".e-content-table tbody"),n=Math.ceil(i.offsetWidth/(t.length/2));if(t.forEach((function(e){return sf.base.setStyleAttribute(e,{width:sf.base.formatUnit(n)})})),e.offsetHeight!==e.clientHeight){var s=this.parent.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");sf.base.isNullOrUndefined(s)||sf.base.setStyleAttribute(s,{height:sf.base.formatUnit(e.clientHeight)})}[].slice.call(this.element.querySelectorAll(".e-header-cells")).forEach((function(e){var t=parseInt(e.getAttribute("colspan"),10);sf.base.setStyleAttribute(e,{width:sf.base.formatUnit(n*t)})}))}},e.prototype.resetColWidth=function(){for(var e=0,t=this.getColElements();e<t.length;e++){t[e].style.width=""}},e.prototype.getContentAreaElement=function(){return this.element.querySelector(".e-content-wrap")},e.prototype.scrollToDate=function(e){if(-1!==["Month","TimelineMonth"].indexOf(this.parent.options.currentView)&&!sf.base.isNullOrUndefined(e)){var t=this.getContentAreaElement(),i=this.parent.getMsFromDate(new Date(l(new Date(+e)).getTime())),n=t.querySelector('.e-work-cells[data-date="'+i+'"]');"Month"===this.parent.options.currentView&&n&&(t.scrollTop=n.offsetTop),"TimelineMonth"===this.parent.options.currentView&&n&&(this.parent.options.enableRtl?t.scrollLeft=-(this.parent.getContentTable().offsetWidth-n.offsetLeft-n.offsetWidth):t.scrollLeft=n.offsetLeft)}},e.prototype.getPanel=function(){return this.element},e.prototype.retainScrollPosition=function(){if(this.parent.options.enablePersistence){var e=this.element.querySelector(".e-content-wrap");if(!sf.base.isNullOrUndefined(e)){var t=JSON.parse(window.localStorage.getItem(this.parent.element.id));if(!sf.base.isNullOrUndefined(t)){var i=t.top,n=t.left;sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(n)||(e.scrollTop=i,e.scrollLeft=n)}}}},e.prototype.removeVirtualMask=function(){var e=this.parent.element.querySelector(".e-table-wrap");this.parent.activeViewOptions.enableVirtualMask&&e&&e.classList.contains("e-virtual-mask")&&sf.base.removeClass([e],"e-virtual-mask")},e}(),L=function(){function e(e){this.allDayLevel=0,this.moreIndicatorTop=0,this.parent=e,this.slotCount=e.activeViewOptions.timeScale.slotCount,this.interval=e.activeViewOptions.timeScale.interval,this.element=this.parent.activeView.getPanel()}return e.prototype.renderAppointments=function(){var e=this.element.querySelector(".e-all-day-appointment-section");e&&(sf.base.EventHandler.remove(e,"click",this.rowExpandCollapse),sf.base.EventHandler.add(e,"click",this.rowExpandCollapse,this));var t=this.parent.element.querySelector(".e-work-cells");if(t){for(var i=this.parent.element.querySelector(".e-content-wrap"),n=[].slice.call(i.querySelectorAll(".e-appointment")),s=[].slice.call(i.querySelectorAll(".e-block-appointment")),o=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),r=n.concat(s),a=0;a<o.length;a++)o[a].style.removeProperty("display"),o[a].style.removeProperty("visibility");var l=0,d=0,h=t.offsetParent;h&&(l=h.offsetHeight/h.querySelector("tbody").childElementCount,d=h.offsetWidth/h.querySelector("tbody tr").childElementCount);for(a=0;a<r.length;a++){var c="none"!==(S=r[a]).style.display;S.style.removeProperty("display"),S.style.removeProperty("visibility"),sf.base.removeClass([S],"e-event-action"),S.blur();var p=this.getColumn(S),u=this.getAppWidth(this.getColumnCounts(S)),f=this.getTopStartDuration(S),m=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount*6e4,g=f/m*l;S.style.top=g+"px",S.style.left=this.getEventLeft(u,p),S.style.width=S.classList.contains("e-block-appointment")?"100%":u,S.style.height=(f+this.getDuration(S))/m*l-g+"px",c||this.parent.eventBase.wireAppointmentEvents(S)}var v=this.parent.element.querySelector(".e-all-day-row").offsetTop,b=o.length>0?o[0].offsetHeight:0,y=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment-wrapper"));this.setAllDayRowHeight(0);for(var w=0;w<y.length;w++){var C=y[w].children;for(a=0;a<C.length;a++){var S,E=0;if((S=C[a]).blur(),S.classList.contains("e-row-count-wrapper"))this.moreIndicatorTop=v+4*b,this.parent.uiStateValues.expand||(S.style.top=this.moreIndicatorTop+"px",E=4*b+4,this.setAllDayRowHeight(E));else{this.parent.uiStateValues.expand&&sf.base.removeClass([S],"e-appointment-hide");var x=this.getRowCount(S),O=this.getTotalLength(S);this.allDayLevel=this.allDayLevel<x?x:this.allDayLevel,S.style.top=v+x*b+"px",S.style.width=d*O-15+"px",E=4+(!this.parent.uiStateValues.expand&&this.allDayLevel>3?4*b:(this.allDayLevel+1)*b),this.parent.eventBase.wireAppointmentEvents(S),this.setAllDayRowHeight(E)}}}var T=[].slice.call(this.element.querySelectorAll(".e-more-indicator"));e&&(T.length>0?sf.base.removeClass([e],"e-disable"):sf.base.addClass([e],"e-disable"));for(a=0;a<T.length;a++)sf.base.EventHandler.clearEvents(T[a]),sf.base.EventHandler.add(T[a],"click",this.rowExpandCollapse,this);this.parent.setDimensions()}},e.prototype.getAppWidth=function(e){var t=(("Day"===this.parent.options.currentView?97:94)-e)/e;return(t<0?0:t)+"%"},e.prototype.getEventLeft=function(e,t){var i=(parseFloat(e)+1)*t;return(i>99?99:i)+"%"},e.prototype.setAllDayRowHeight=function(e){for(var t=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells")),i=0;i<t.length;i++)t[i].style.height=e/12+"em";var n=this.parent.element.querySelector(".e-date-header-wrap");"auto"!==this.parent.options.height&&this.parent.options.enableAllDayScroll||sf.base.addClass([n],"e-all-day-auto");var s=this.parent.element.querySelector(".e-all-day-row");s.style.height="",this.parent.uiStateValues.expand&&"auto"!==this.parent.options.height&&this.parent.options.enableAllDayScroll?(s.style.height=e/12+"em",this.parent.eventBase.allDayExpandScroll(n)):(n.scrollTop=0,sf.base.removeClass([n],"e-all-day-scroll"))},e.prototype.getRowCount=function(e){return parseInt(e.getAttribute("data-row-index"),10)},e.prototype.getTotalLength=function(e){return parseInt(e.getAttribute("data-total-length"),10)},e.prototype.getDuration=function(e){return parseInt(e.getAttribute("data-duration"),10)},e.prototype.getTopStartDuration=function(e){return parseInt(e.getAttribute("data-top-start-duration"),10)},e.prototype.getColumnCounts=function(e){return parseInt(e.getAttribute("data-columns-count"),10)},e.prototype.getColumn=function(e){return parseInt(e.getAttribute("data-columns"),10)},e.prototype.rowExpandCollapse=function(){var e=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand=e.classList.contains("e-appointment-expand");var t,i=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),n=i.length>0?i[0].offsetHeight:0;this.parent.uiStateValues.expand?(e.setAttribute("title","Collapse-all-day-section"),e.setAttribute("aria-label","Collapse section"),t=(this.allDayLevel+1)*n+4):(e.setAttribute("title","Expand-all-day-section"),e.setAttribute("aria-label","Expand section"),t=4*n+4),this.setAllDayRowHeight(t),this.addOrRemoveClass(),this.parent.setDimensions()},e.prototype.addOrRemoveClass=function(){var e=this;[].slice.call(this.parent.element.querySelectorAll(".e-more-event")).filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(sf.base.addClass([t],"e-appointment-hide"),t.setAttribute("tabindex","-1")):(sf.base.removeClass([t],"e-appointment-hide"),t.setAttribute("tabindex","0"))}));var t=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand?(sf.base.removeClass([t],"e-appointment-expand"),sf.base.addClass([t],"e-appointment-collapse")):(sf.base.removeClass([t],"e-appointment-collapse"),sf.base.addClass([t],"e-appointment-expand")),this.allDayLevel>2?sf.base.removeClass([t],"e-disable"):sf.base.addClass([t],"e-disable"),[].slice.call(this.element.querySelectorAll(".e-row-count-wrapper")).filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(sf.base.removeClass([t],"e-disable"),t.style.top=e.moreIndicatorTop+"px"):sf.base.addClass([t],"e-disable")}))},e.prototype.initializeValues=function(){this.cellHeight=parseFloat(this.parent.element.querySelector(".e-content-wrap tbody tr").getBoundingClientRect().height.toFixed(2))},e.prototype.getHeight=function(e,t){var i=(t.getTime()-e.getTime())/6e4*(this.cellHeight*this.slotCount)/this.interval;return i=i<=0?this.cellHeight:i},e.prototype.renderNormalEvents=function(e,t,i,n){var s,o=e,r=o.startTime,a=o.endTime,l=this.getHeight(r,a);s=this.getTopValue(r,t);var d=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(d,{width:this.getEventWidth(),height:l+"px",top:s+"px"});var h=this.parent.activeViewOptions.group.byDate?t+i:n;[].slice.call(this.parent.element.querySelectorAll(".e-appointment-wrapper"))[h].appendChild(d)},e.prototype.getEventWidth=function(){var e="Day"===this.parent.options.currentView?97:94;return(e<0?0:e)+"%"},e.prototype.getTopValue=function(e,t){var i=l(this.parent.activeView.renderDates[t]);(new Date).setHours(0,0,0,0);var n=this.parent.eventBase.getStEdHours(i,this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()).startHour;return(60*(e.getHours()-n.getHours())+(e.getMinutes()-n.getMinutes()))*this.cellHeight*this.slotCount/this.interval},e.prototype.renderAllDayEvents=function(e,t,i,n){var s,o=e,r=this.parent.element.querySelector(".e-all-day-cells:first-child").offsetTop,a=1;o.Index=0,this.allDayLevel=this.allDayLevel<0?0:this.allDayLevel,s=100-("Day"===this.parent.options.currentView?4:7);var l=this.parent.activeViewOptions.group.byDate?t+i:n,d=this.parent.element.querySelector(".e-all-day-appointment-wrapper:nth-child("+(l+1)+")"),h=this.parent.inlineModule.createInlineAppointmentElement();d.appendChild(h),a+=r+1,sf.base.setStyleAttribute(h,{width:s+"%",top:sf.base.formatUnit(a)}),sf.base.addClass([h],"e-all-day-appointment")},e}(),B=function(){function i(e){this.slots=[],this.isDoubleTapped=!1,this.parent=e}return i.prototype.getSelectedEventElements=function(e){if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(e);else if(this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")===e.getAttribute("data-guid")})).length<=0)for(var t='div[data-guid="'+e.getAttribute("data-guid")+'"]',i=0,n=[].slice.call(this.parent.element.querySelectorAll(t));i<n.length;i++){var s=n[i];this.parent.selectedElements.push(s)}else{var o=this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")!==e.getAttribute("data-guid")}));this.parent.selectedElements=o}return e&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements),this.parent.selectedElements},i.prototype.getSelectedEvents=function(){var e=[],i=[];return[].slice.call(this.parent.element.querySelectorAll("."+t)).filter((function(t){0===e.filter((function(e){return e===t.getAttribute("data-guid")})).length&&e.push(t.getAttribute("data-guid")),i.push(t)})),{element:i.length>1?i:i[0],guid:e}},i.prototype.removeSelectedAppointmentClass=function(){for(var e=this.getSelectedAppointments(),i=0,n=e;i<n.length;i++){n[i].setAttribute("aria-pressed","false")}sf.base.removeClass(e,t),"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||sf.base.removeClass(e,"e-active-appointment-agenda")},i.prototype.addSelectedAppointments=function(e){for(var i=0,n=e;i<n.length;i++){n[i].setAttribute("aria-pressed","true")}"MonthAgenda"!==this.parent.options.currentView&&this.parent.removeSelectedClass(),sf.base.addClass(e,t)},i.prototype.getSelectedAppointments=function(){return[].slice.call(this.parent.element.querySelectorAll("."+t+",.e-appointment:focus"))},i.prototype.focusElement=function(){var e=document.querySelector("#"+this.parent.element.id+"_dialog_wrapper");if(!e||!e.classList.contains("e-popup-open")){var t=this.parent.getSelectedElements();if(t.length>0){if(this.parent.keyboardInteractionModule){var i=!sf.base.isNullOrUndefined(this.parent.activeCellsData)&&this.parent.activeCellsData.element||t[t.length-1];this.parent.keyboardInteractionModule.selectCells(i instanceof Array,i)}}else{var n=this.getSelectedAppointments();n.length>0&&n[n.length-1].focus()}}},i.prototype.splitEvent=function(e,t){var i=l(new Date(e.startTime+"")).getTime(),n=l(new Date(e.endTime+"")).getTime();if(d(e.endTime)<=0){var s=h(l(new Date(e.endTime+"")),-1).getTime();n=i>s?i:s}var o=i,r=n,a=[];if(i!==n){i<t[0].getTime()&&(i=t[0].getTime()),n>t[t.length-1].getTime()&&(n=t[t.length-1].getTime());for(var c=i,p=0;p<this.slots.length;p++){var u=this.slots[p];if("WorkWeek"===this.parent.options.currentView||"TimelineWorkWeek"===this.parent.options.currentView||this.parent.activeViewOptions.group.byDate||this.parent.activeViewOptions.showWeekend){for(var f=[],m=0,g=u;m<g.length;m++){var v=g[m];f.push(new Date(v))}var b=this.getRenderedDates(f);if(!sf.base.isNullOrUndefined(b)&&b.length>0){u=[];for(var y=0,w=b;y<w.length;y++){var C=w[y];u.push(C.getTime())}}}var S=u[0];if((c=c<=S&&n>=S?S:c)>n||S>n)break;if(!this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.showWeekend&&"WorkWeek"!==this.parent.options.currentView&&"TimelineWorkWeek"!==this.parent.options.currentView){var E=u.indexOf(c);if(-1!==E){var x=u.indexOf(n),O=-1!==x,T=(x=O?x:u.length-1)-E+1,A=u[E]!==o,N=u[x]!==r;if(a.push(this.cloneEventObject(e,u[E],u[x],T,A,N)),O)break}}else if(this.dateInRange(c,u[0],u[u.length-1])){for(var k=[],I=0;I<u.length;I++)this.dateInRange(u[I],o,r)&&k.push(u[I]);if(k.length>0)if(this.parent.activeViewOptions.group.byDate)for(var M=0,L=k;M<L.length;M++){var B=L[M];a.push(this.cloneEventObject(e,B,B,1,B!==o,B!==r))}else{A=k[0]!==o,N=k[k.length-1]!==r;a.push(this.cloneEventObject(e,k[0],k[k.length-1],k.length,A,N))}}}}else a.push(this.cloneEventObject(e,i,n,1,!1,!1));return a},i.prototype.dateInRange=function(e,t,i){return t<=e&&e<=i},i.prototype.cloneEventObject=function(e,t,i,n,s,o){var r=sf.base.extend({},e,null,!0),a={count:n,isLeft:s,isRight:o};return a.startTime=e.startTime,a.endTime=e.endTime,r.data=a,r.startTime=new Date(t),r.endTime=new Date(i),r},i.prototype.getRenderedDates=function(e){var t,i=0,n=e.length;if(e[0]<this.parent.options.minDate&&e[e.length-1]>this.parent.options.maxDate){for(var s=0;s<e.length;s++)e[s].getTime()===this.parent.options.minDate.getTime()&&(i=s),e[s].getTime()===this.parent.options.maxDate.getTime()&&(n=s);t=e.filter((function(t){return t>=e[i]&&t<=e[n]}))}return t},i.prototype.isValidEvent=function(e,t,i,n){var s=i.getTime()>n.startHour.getTime()&&t.getTime()<n.endHour.getTime(),o=n.startHour.getTime()<=t.getTime()&&e.startTime.getTime()>=n.startHour.getTime()&&e.endTime.getTime()<n.endHour.getTime()&&t.getTime()===i.getTime();return s||o},i.prototype.getStEdHours=function(e,t,i){var n=new Date(e.getTime());n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds());var s=new Date(e.getTime());return 0===i.getHours()?s.setDate(s.getDate()+1):(s.setHours(i.getHours()),s.setMinutes(i.getMinutes()),s.setSeconds(i.getSeconds())),{startHour:n,endHour:s}},i.prototype.appointmentBorderRemove=function(t){var i=t.target;sf.base.closest(i,".e-appointment")?"MonthAgenda"!==this.parent.options.currentView&&this.parent.removeSelectedClass():sf.base.closest(i,"."+e)||this.removeSelectedAppointmentClass()},i.prototype.wireAppointmentEvents=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),!this.parent.isPrintSchedule&&!e.classList.contains("e-block-appointment")){var n="true"===e.getAttribute("aria-disabled");sf.base.EventHandler.remove(e,"click",this.eventClick),sf.base.EventHandler.remove(e,"dblclick",this.eventDoubleClick),sf.base.EventHandler.remove(e,"touchstart",this.eventTouchClick),("TimelineYear"!==this.parent.options.currentView||i)&&(sf.base.EventHandler.add(e,"click",this.eventClick,this),this.parent.isAdaptive||sf.base.EventHandler.add(e,"touchstart",this.eventTouchClick,this),this.parent.isAdaptive||this.parent.activeViewOptions.readonly||n||sf.base.EventHandler.add(e,"dblclick",this.eventDoubleClick,this)),this.parent.activeViewOptions.readonly||n||t||(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(e),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.wireDragEvent(e))}},i.prototype.eventTouchClick=function(e){var t=this;setTimeout((function(){return t.isDoubleTapped=!1}),250),e.preventDefault(),this.isDoubleTapped?this.eventDoubleClick(e):this.isDoubleTapped||(this.isDoubleTapped=!0,this.eventClick(e))},i.prototype.eventClick=function(e){var i=e.target;if(!(i.classList.contains("e-drag-clone")||i.classList.contains("e-resize-clone")||e.detail>1||i.classList.contains("e-block-appointment")||i.classList.contains("e-inline-subject"))){if(this.parent.isAdaptive&&this.parent.isTapHold){this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll("."+t));var n=sf.base.closest(e.target,".e-appointment"),s=this.getSelectedEventElements(n);if(s.length>0){var o=1===s.length?s[0].querySelector(".e-subject").innerHTML:"("+s.length+")&nbsp;selected item(s)";this.parent.quickPopup.element.querySelector(".e-subject").innerHTML=o,s.length>1?sf.base.addClass([this.parent.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden"):sf.base.removeClass([this.parent.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden")}else this.parent.selectedElements=[],this.parent.onQuickPopupClose()}if(e.ctrlKey&&1===e.which&&this.parent.keyboardInteractionModule){this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll("."+t));var r=sf.base.closest(e.target,".e-appointment");this.getSelectedEventElements(r);var a=this.activeEventData(e,!1);this.parent.dotNetRef.invokeMethodAsync("TriggerEventClick",a,this.getMouseEvent(e),!0,!1)}else{this.removeSelectedAppointmentClass();a=this.activeEventData(e,!0);this.parent.dotNetRef.invokeMethodAsync("TriggerEventClick",a,this.getMouseEvent(e),!1,!1)}}},i.prototype.eventDoubleClick=function(e){if("touchstart"===e.type&&this.activeEventData(e,!0),!this.parent.activeEventData.element.classList.contains("e-inline-appointment")&&!this.parent.activeEventData.element.querySelector(".e-inline-subject")){var t=this.activeEventData(e,!1);this.parent.dotNetRef.invokeMethodAsync("TriggerEventDoubleClick",t,this.getMouseEvent(e))}},i.prototype.getMouseEvent=function(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type}},i.prototype.activeEventData=function(e,t){var i=sf.base.closest(e.target,".e-appointment"),n=i.getAttribute("data-guid");return t&&(i.parentElement.classList.contains(".e-more-appointment-wrapper")&&this.parent.morePopup&&this.parent.morePopup.element?this.addSelectedAppointments([].slice.call(this.parent.morePopup.element.querySelectorAll('div[data-guid="'+n+'"]'))):this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('.e-table-container div[data-guid="'+n+'"]'))),i.focus()),this.parent.activeEventData={element:i,guid:[n]},n},i.prototype.allDayExpandScroll=function(e){var t=0;[].slice.call(this.parent.element.querySelectorAll(".e-header-row")).forEach((function(e){[].slice.call(e.children).forEach((function(e){e.style.top=t+"px"})),t+=e.offsetHeight})),t=e.offsetHeight-t,this.parent.element.querySelector(".e-all-day-cells").style.height=t/12+"em",this.parent.uiStateValues.expand?sf.base.addClass([e],"e-all-day-scroll"):sf.base.removeClass([e],"e-all-day-scroll")},i}(),D=(w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),P=function(e){function t(t){var i=e.call(this,t)||this;i.renderedEvents=[],i.allDayLevel=0,i.moreIndicatorHeight=19,i.monthHeaderHeight=0,i.maxHeight=i.parent.options.enableMaxHeight&&!i.parent.options.enableIndicator&&!i.parent.options.rowAutoHeight;var n=i.parent.options.enableMaxHeight&&i.parent.options.enableIndicator&&!i.parent.options.rowAutoHeight;return i.maxOrIndicator=i.maxHeight||n,i.moreIndicatorHeight=i.parent.options.rowAutoHeight&&i.parent.options.ignoreWhitespace?0:i.moreIndicatorHeight,i.eventTop="Month"===i.parent.options.currentView?7:0,i}return D(t,e),t.prototype.renderAppointments=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-appointment, .e-more-indicator, .e-block-appointment, .e-block-indicator")),t=this.parent.element.querySelector(".e-work-cells");if(t){var n=this.parent.element.querySelector(".e-content-wrap");if(this.parent.options.rowAutoHeight&&(this.parent.uiStateValues.top=n.scrollTop,this.parent.uiStateValues.left=n.scrollLeft),this.removeHeightProperty("e-content-table"),this.monthHeaderHeight=0,"Month"===this.parent.options.currentView){if(this.parent.options.rowAutoHeight&&0===this.parent.activeViewOptions.group.resources.length){var s=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child")),o=this.parent.element.querySelector(".e-content-table").clientHeight/s.length;s.forEach((function(e){sf.base.setStyleAttribute(e,{height:o+"px"})}))}this.monthHeaderHeight=t.firstElementChild.offsetHeight}var r=t.offsetParent;r&&(this.cellHeight=r.offsetHeight/r.querySelector("tbody").childElementCount,this.cellWidth=r.offsetWidth/r.querySelector("tbody tr").childElementCount);var a=i(this.parent.element.querySelector(".e-current-panel"),"e-appointment");this.dateRender=this.parent.activeView.renderDates;for(var l=[],d=[],h=[],c=0;c<e.length;c++){var p=e[c];sf.base.removeClass([p],"e-event-action");var u="none"!==p.style.display;this.removedPositionedStyles(p),p.blur();var f=this.getStartTime(p),m=this.getOverLapCount(p),g=this.getDataCount(p)*this.cellWidth;g=p.classList.contains("e-block-appointment")?g:g-5;var v=0,b=0,y=this.getGroupIndex(p),w=this.getCellTd(y,f);if(w){var C=sf.base.closest(w,"tr"),S=this.monthHeaderHeight+(m+1)*a+this.moreIndicatorHeight+this.eventTop,E=C.firstElementChild,x=C.sectionRowIndex;sf.base.isNullOrUndefined(d[x])&&(d[x]=w.getBoundingClientRect().height,l[x]=w.offsetTop),this.parent.options.rowAutoHeight&&this.updateCellHeight(E,S,x,d);var O=l[x],T=this.monthHeaderHeight+(p.classList.contains("e-block-appointment")?O:O+m*a)+this.eventTop,A=d[x],N=w.cellIndex;sf.base.isNullOrUndefined(h[N])&&(h[N]=w.offsetLeft),this.parent.options.enableRtl?b=w.parentElement.offsetWidth-h[N]-this.cellWidth:v=h[N],p.classList.contains("e-more-indicator")?this.updateMoreIndicator(p,b,v,O):p.classList.contains("e-block-indicator")?this.updateBlockIndicator(p,b,v,w,O):(sf.base.setStyleAttribute(p,{width:g+"px",left:v+"px",right:b+"px",top:T+"px"}),this.maxOrIndicator&&this.setMaxEventHeight(p,w,A),p.classList.contains("e-block-appointment")&&sf.base.setStyleAttribute(p,{height:A-(T-O)+"px"}),p.classList.contains("e-appointment")&&!u&&this.parent.eventBase.wireAppointmentEvents(p))}}this.updateRowHeight(a)}},t.prototype.removedPositionedStyles=function(e){e.style.removeProperty("width"),e.style.removeProperty("height"),e.style.removeProperty("left"),e.style.removeProperty("right"),e.style.removeProperty("top"),e.style.removeProperty("display"),e.style.removeProperty("visibility")},t.prototype.updateMoreIndicator=function(e,t,i,n){var s=this.cellHeight-this.moreIndicatorHeight;sf.base.setStyleAttribute(e,{top:n+s+"px",width:this.cellWidth-2+"px",left:i+"px",right:t+"px"})},t.prototype.updateBlockIndicator=function(e,t,i,n,s){this.parent.options.enableRtl?e.style.right=t+this.cellWidth-24+"px":e.style.left=i+this.cellWidth-24+"px";var o=n.firstElementChild;o&&(e.style.marginTop=o.offsetTop+2+"px"),e.style.top=s+"px",e.style.position="absolute"},t.prototype.setMaxEventHeight=function(e,t,i){var n=i-("Month"===this.parent.options.currentView?g(t.querySelector(".e-date-header")):0)-(this.maxHeight?2:this.moreIndicatorHeight);sf.base.setStyleAttribute(e,{height:n+"px","align-items":"center"})},t.prototype.getCellTd=function(e,t){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+e.toString()+'"][data-date="'+t.getTime()+'"]'):this.parent.element.querySelector('.e-content-wrap tbody td[data-date="'+t.getTime()+'"]')},t.prototype.getGroupIndex=function(e){var t=parseInt(e.getAttribute("data-group-index"),10);return t||0},t.prototype.getOverLapCount=function(e){return parseInt(e.getAttribute("data-index"),10)},t.prototype.getStartTime=function(e){return new Date(parseInt(e.getAttribute("data-start"),10))},t.prototype.getEndTime=function(e){return new Date(parseInt(e.getAttribute("data-end"),10))},t.prototype.getDataCount=function(e){return parseInt(e.getAttribute("data-total-length"),10)},t.prototype.updateRowHeight=function(e){if(this.parent.options.rowAutoHeight){this.updateBlockElements(),this.updateNormalEventElements(e),this.updateBlockIndicatorEle();var t={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};if(this.parent.onScrollUiUpdate(t),"Month"===this.parent.options.currentView&&this.parent.element.querySelector(".e-week-number-wrapper")){var i=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child"));[].slice.call(this.parent.element.querySelectorAll(".e-week-number")).forEach((function(e,t){sf.base.setStyleAttribute(e,{height:i[t].style.height})})),this.parent.element.querySelector(".e-week-number-wrapper").scrollTop=this.parent.element.querySelector(".e-content-wrap").scrollTop}}},t.prototype.updateBlockIndicatorEle=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-indicator"));e<t.length;e++){var i=t[e],n=this.getStartTime(i),s=this.getGroupIndex(i),o=this.getCellTd(s,n),r=0,a=0;this.parent.options.enableRtl?a=o.parentElement.offsetWidth-o.offsetLeft-this.cellWidth:r=o.offsetLeft,this.updateBlockIndicator(i,a,r,o,o.offsetTop)}},t.prototype.updateBlockElements=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment"));e<t.length;e++){var i=t[e],n=this.getStartTime(i),s=this.getGroupIndex(i),o=this.getCellTd(s,n),r=o.offsetHeight-this.monthHeaderHeight-this.eventTop,a=o.offsetWidth,l=Math.round(i.offsetWidth/a);l*=a;var d=0,h=0;this.parent.options.enableRtl?h=o.parentElement.offsetWidth-o.offsetLeft-this.cellWidth:d=o.offsetLeft;var c=o.offsetTop+this.monthHeaderHeight+this.eventTop;sf.base.setStyleAttribute(i,{width:l+"px",left:d+"px",right:h+"px",height:r+"px",top:c+"px"})}},t.prototype.updateNormalEventElements=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));t<i.length;t++){var n=i[t],s=this.getStartTime(n),o=this.getGroupIndex(n),r=this.getCellTd(o,s),a=this.getOverLapCount(n),l=0,d=0;this.parent.options.enableRtl?d=r.parentElement.offsetWidth-r.offsetLeft-this.cellWidth:l=r.offsetLeft;var h=this.monthHeaderHeight+r.offsetTop+a*e+this.eventTop;sf.base.setStyleAttribute(n,{left:l+"px",right:d+"px",top:h+"px"})}},t.prototype.updateCellHeight=function(e,t,i,n){t>n[i]&&(n[i]=t,sf.base.setStyleAttribute(e,{height:t+"px"}))},t.prototype.getSlotDates=function(e){this.slots=[];for(var t=this.dateRender.map((function(e){return+e})),i=this.parent.activeViewOptions.showWeekend?7:e.length;t.length>0;)this.slots.push(t.splice(0,i))},t.prototype.renderEvents=function(e,t,i){var n=e.startTime,s=this.parent.getIndexOfDate(this.dateRender,l(n)),o=e.data.count*this.cellWidth-5,r=this.workCells[s],a=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(a,{width:o+"px"}),this.renderEventElement(a,r)},t.prototype.renderEventElement=function(e,t){var i=sf.base.createElement("div",{className:"e-appointment-wrapper"});i.appendChild(e),t.appendChild(i)},t.prototype.removeHeightProperty=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll("."+e+" tbody tr"));t<i.length;t++){i[t].firstElementChild.style.height=""}},t}(B),R=(C=function(e,t){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),H=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!0,i.baseCssClass="e-vertical-view",i}return R(t,e),t.prototype.onDataReady=function(){(this.removeVirtualMask(),this.parent.activeViewOptions.timeScale.enable)?new L(this.parent).renderAppointments():new P(this.parent).renderAppointments()},t.prototype.onContentScroll=function(e){this.parent.removeNewEventElement();var t=e.target;this.parent.onVirtualScroll(),this.scrollLeftPanel(t),this.scrollTopPanel(t),this.parent.isAdaptive||(this.parent.uiStateValues.top=t.scrollTop),this.parent.uiStateValues.left=t.scrollLeft,sf.base.isNullOrUndefined(this.parent.quickPopup)||this.parent.quickPopup.hide(),this.parent.setPersistence()},t.prototype.onAdaptiveMove=function(e){this.parent.uiStateValues.action&&e.cancelable&&e.preventDefault()},t.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();sf.base.isNullOrUndefined(t)||(t.scrollTop=e.scrollTop)},t.prototype.onScrollUiUpdate=function(e){var t=this.parent.element.querySelector(".e-date-header-wrap"),i=this.getHeaderBarHeight(),n=this.getLeftPanelElement(),s=this.getContentAreaElement(),o=this.getDatesHeaderElement(),r=this.parent.element.offsetHeight-i-o.offsetHeight;this.setColWidth(s),this.setContentHeight(s,n,r);var a=f();o.firstElementChild.style[e.cssProperties.rtlBorder]="",o.style[e.cssProperties.rtlPadding]="";var l=!this.parent.options.enableAllDayScroll||!(s.offsetWidth-s.clientWidth<=t.offsetWidth-t.clientWidth&&t.classList.contains("e-all-day-scroll"));s.offsetWidth-s.clientWidth>0&&l?(o.firstElementChild.style[e.cssProperties.border]=a>0?"1px":"0px",o.style[e.cssProperties.padding]=a>0?a-1+"px":"0px"):(o.firstElementChild.style[e.cssProperties.border]="",o.style[e.cssProperties.padding]=""),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(n&&(n.scrollTop=this.parent.uiStateValues.top),s.scrollTop=this.parent.uiStateValues.top,s.scrollLeft=this.parent.uiStateValues.left)),this.highlightCurrentTime();var d=this.parent.element.querySelector(".e-table-wrap table");d&&!d.classList.contains("e-outer-table")&&sf.base.addClass([d],"e-outer-table"),this.retainScrollPosition()},t.prototype.setContentHeight=function(e,t,i){sf.base.isNullOrUndefined(t)||(t.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(i-this.getScrollXIndent(e))),e.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(i)},t.prototype.scrollToWorkHour=function(){if(this.parent.options.workHours.highlight){var e=this.element.querySelector(".e-work-hours");e&&(this.getContentAreaElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}},t.prototype.scrollToHour=function(e,t){var i=this.parent.getStartEndTime(e);if(!sf.base.isNullOrUndefined(t)){var n=this.parent.getMsFromDate(new Date(l(new Date(+t)).getTime())),s=this.element.querySelector('.e-header-cells[data-date="'+n+'"]');if(s)if(this.parent.options.enableRtl){var o=this.element.querySelector(".e-content-table");this.getContentAreaElement().scrollLeft=-(o.offsetWidth-s.offsetLeft-s.offsetWidth)}else this.getContentAreaElement().scrollLeft=s.offsetLeft}sf.base.isNullOrUndefined(i)||(this.getContentAreaElement().scrollTop=this.getTopFromDateTime(i))},t.prototype.scrollToDate=function(e){this.scrollToHour(null,e)},t.prototype.isWorkHourRange=function(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()},t.prototype.highlightCurrentTime=function(){var e=this,t=[].slice.call(this.element.querySelectorAll(".e-current-day"));t.length>0&&sf.base.removeClass(t,"e-current-day");for(var i='.e-date-header[data-date="'+v(l(new Date(this.parent.getCurrentTime()))).getTime().toString()+'"]',n=0,s=t=[].slice.call(this.element.querySelectorAll(i));n<s.length;n++){var o=s[n];sf.base.addClass([o],"e-current-day")}if(this.parent.activeViewOptions.timeScale.enable&&!(this.parent.isTimelineView()&&this.parent.activeViewOptions.headerRows&&this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option))if(this.parent.options.showTimeIndicator&&this.isWorkHourRange(this.parent.getCurrentTime())){var r=this.getCurrentTimeIndicatorIndex(),a=this.getLeftPanelElement();if(sf.base.isNullOrUndefined(a)||sf.base.removeClass(a.querySelectorAll(".e-hide-childs"),"e-hide-childs"),r.length>0)[].slice.call(this.element.querySelectorAll(".e-work-cells")).length>0&&this.changeCurrentTimePosition(),sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)&&(this.currentTimeIndicatorTimer=window.setInterval((function(){e.changeCurrentTimePosition()}),6e4));else this.clearCurrentTimeIndicatorTimer()}else this.clearCurrentTimeIndicatorTimer()},t.prototype.getCurrentTimeIndicatorIndex=function(){for(var e=[],t=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),i=v(l(new Date(this.parent.getCurrentTime()))).getTime().toString(),n=0,s=t.length;n<s;n++)t[n].getAttribute("data-date")===i&&e.push(n);return e},t.prototype.clearCurrentTimeIndicatorTimer=function(){if(!sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)){window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements();var e=this.parent.element.querySelector(".e-table-wrap table");e&&this.parent.options.enableRtl&&this.parent.isTimelineView()&&sf.base.removeClass([e],"e-outer-table")}},t.prototype.removeCurrentTimeIndicatorElements=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time"));e<t.length;e++){var i=t[e];sf.base.remove(i)}},t.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.parent.getContentTable().rows[0],i=this.getTopFromDateTime(this.parent.getCurrentTime()),n=sf.base.formatUnit(i),s=Math.floor(i/t.cells[0].offsetHeight);if(!sf.base.isNullOrUndefined(s)&&!isNaN(s)){for(var o=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),r=0,a=e[0];r<a;r++)o[r].appendChild(sf.base.createElement("div",{className:"e-previous-timeline",styles:"top:"+n}));for(var l=0,d=e;l<d.length;l++){o[d[l]].appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:"top:"+n}))}var h=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time",styles:"top:"+n}),c=this.getLeftPanelElement();if(!sf.base.isNullOrUndefined(c)){var p=[].slice.call(c.querySelectorAll("tr"));s<=p.length&&(sf.base.removeClass(c.querySelectorAll(".e-hide-childs"),"e-hide-childs"),sf.base.addClass([p[s].lastElementChild],"e-hide-childs"),sf.base.prepend([h],c),h.style.top=sf.base.formatUnit(h.offsetTop-h.offsetHeight/2))}}}},t.prototype.getTopFromDateTime=function(e){var t=this.getStartHour();return(60*(e.getHours()-t.getHours())+(e.getMinutes()-t.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellHeight=function(){return this.element.querySelector(".e-work-cells").offsetHeight},t.prototype.renderLayout=function(){this.element=this.parent.element.querySelector(".e-table-wrap");for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));e<t.length;e++){var i=t[e];sf.base.EventHandler.clearEvents(i),this.wireMouseEvents(i)}for(var n=0,s=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-all-day-cells"));n<s.length;n++){i=s[n];sf.base.EventHandler.clearEvents(i),this.wireCellEvents(i)}this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var o=this.element.querySelector(".e-content-wrap"),r=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(r),this.wireCellEvents(r),sf.base.EventHandler.clearEvents(o),sf.base.EventHandler.add(o,"scroll",this.onContentScroll,this),sf.base.EventHandler.add(o,sf.base.Browser.touchMoveEvent,this.onAdaptiveMove,this),this.parent.setDimensions()},t.prototype.wireCellEvents=function(e){this.parent.isPrintSchedule||(sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(e))},t.prototype.wireMouseEvents=function(e){this.parent.isPrintSchedule||(sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction))},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-time-cells-wrap")},t.prototype.getEndDateFromStartDate=function(e){var t=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,i=new Date(e.getTime());return i.setMilliseconds(i.getMilliseconds()+t),i},t.prototype.destroy=function(){if(this.clearCurrentTimeIndicatorTimer(),this.element){var e=this.getContentAreaElement();e&&sf.base.EventHandler.remove(e,"scroll",this.onContentScroll),this.element=null}},t}(M),z=(S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),U=function(e){function t(t,i){var n=e.call(this,t)||this;n.startHour=n.parent.activeView.getStartHour(),n.endHour=n.parent.activeView.getEndHour(),n.slotCount=n.parent.activeViewOptions.timeScale.slotCount,n.interval=n.parent.activeViewOptions.timeScale.interval,n.day=0,n.rowIndex=0,n.renderType=i;var s=[].slice.call(n.parent.element.querySelectorAll(".e-content-table tbody tr"));return n.dayLength=0===s.length?0:s[0].children.length,n.content=n.parent.element.querySelector(".e-content-table"),n}return z(t,e),t.prototype.getSlotDates=function(){this.slots=[],this.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows[this.parent.activeViewOptions.headerRows.length-1].option?(this.renderType="day",this.cellWidth=Math.ceil(this.content.getBoundingClientRect().width)/this.dateRender.length,this.slotsPerDay=1):this.slotsPerDay=this.dayLength/this.dateRender.length},t.prototype.renderAppointments=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-appointment, .e-more-indicator, .e-block-appointment, .e-block-indicator")),t=this.parent.element.querySelector(".e-work-cells");if(t){var n=this.parent.element.querySelector(".e-content-wrap");if(this.parent.options.rowAutoHeight&&(this.parent.uiStateValues.top=n.scrollTop,this.parent.uiStateValues.left=n.scrollLeft),this.removeHeightProperty("e-content-table"),this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){this.removeHeightProperty("e-resource-column-table");var s=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),o=t.getBoundingClientRect().height;s.forEach((function(e){e.style.height=o+"px"}))}var r=t.offsetParent;r&&(this.cellHeight=r.offsetHeight/r.querySelector("tbody").childElementCount,this.cellWidth=r.offsetWidth/r.querySelector("tbody tr").childElementCount);var a=i(this.parent.element.querySelector(".e-current-panel"),"e-appointment");this.dateRender=this.parent.activeView.renderDates,this.getSlotDates();for(var d=[],h=0;h<e.length;h++){var c=e[h];sf.base.removeClass([c],"e-event-action"),c.blur();var p="none"!==c.style.display;this.removedPositionedStyles(c);var u=b(this.getStartTime(c)),f=b(this.getEndTime(c));if(this.day=this.parent.getIndexOfDate(this.dateRender,l(new Date(u.getTime()))),this.day>=0){var m=this.getOverLapCount(c),g=this.getDataCount(c),v="true"===this.isAllDayData(c),y=this.getEventWidth(u,f,v,g);y="day"===this.renderType?y-2:y;var w=0,C=0,S=this.getPosition(u,f,!c.classList.contains("e-more-indicator")&&v,this.day);y=y<=0?this.cellWidth:y;var E=this.getGroupIndex(c),x=c.classList.contains("e-block-appointment")?0:(this.maxHeight?0:2)+m*(a+2);this.parent.options.enableRtl?C=S:w=S;var O=(m+1)*(a+2)+this.moreIndicatorHeight;if(c.classList.contains("e-more-indicator")){var T=this.cellHeight-this.moreIndicatorHeight;c.style.top=0+T+"px",c.style.width=this.cellWidth+"px",c.style.left=Math.floor(w/this.cellWidth)*this.cellWidth+"px",c.style.right=Math.floor(C/this.cellWidth)*this.cellWidth+"px"}else if(c.classList.contains("e-block-indicator"))S=Math.floor(S/this.cellWidth)*this.cellWidth+this.cellWidth-22,this.parent.options.enableRtl?c.style.right=S+"px":c.style.left=S+"px",c.style.top=0+this.cellHeight-18+"px";else if(sf.base.setStyleAttribute(c,{width:y+"px",left:w+"px",right:C+"px",top:x+"px"}),this.maxOrIndicator&&this.setMaxEventHeight(c),c.classList.contains("e-block-appointment")&&sf.base.setStyleAttribute(c,{height:this.cellHeight-1+"px"}),c.classList.contains("e-appointment")&&!p&&this.parent.eventBase.wireAppointmentEvents(c),this.parent.options.rowAutoHeight){var A=this.getFirstChild(E);sf.base.isNullOrUndefined(d[E])&&(d[E]=Math.ceil(A.getBoundingClientRect().height),c.parentElement.style.height=d[E]+"px"),this.updateCellHeight(A,O,E,d)}}}this.updateRowHeight()}},t.prototype.updateRowHeight=function(){if(this.parent.options.rowAutoHeight){this.updateBlockElements();var e=sf.base.isNullOrUndefined(this.parent.activeViewOptions.group.resources)||0===this.parent.activeViewOptions.group.resources.length,t={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:e,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateVirtualScrollHeight(),this.parent.onScrollUiUpdate(t)}},t.prototype.updateBlockElements=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment"));e<t.length;e++){var i=t[e],n=parseInt(i.getAttribute("data-group-index"),10),s=this.getFirstChild(n),o=s.offsetWidth;i.style.height=s.offsetHeight+"px";var r=Math.round(i.offsetWidth/o);i.style.width=o*r+"px"}for(var a=0,l=[].slice.call(this.parent.element.querySelectorAll(".e-block-indicator"));a<l.length;a++){i=l[a],n=parseInt(i.getAttribute("data-group-index"),10);i.style.top=this.getFirstChild(n).offsetHeight-18+"px"}},t.prototype.setMaxEventHeight=function(e){sf.base.setStyleAttribute(e,{height:this.cellHeight-(this.maxHeight?0:2)-(this.maxHeight?0:this.moreIndicatorHeight)+"px"})},t.prototype.getFirstChild=function(e){var t="";return this.parent.activeViewOptions.group.resources.length>0&&(t='[data-group-index="'+e.toString()+'"]'),this.parent.element.querySelector(".e-content-table tbody td"+t)},t.prototype.updateCellHeight=function(e,t,i,n){if(t>n[i]){if(n[i]=t,sf.base.setStyleAttribute(e,{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){var s=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+i+'"]'),o=this.parent.element.querySelector('.e-appointment-container[data-group-index="'+i+'"]');s&&sf.base.setStyleAttribute(s,{height:t+"px"}),o&&sf.base.setStyleAttribute(o,{height:t+"px"})}var r=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");r&&sf.base.setStyleAttribute(r,{height:t+"px"})}},t.prototype.isAllDayData=function(e){return e.getAttribute("data-all-day")},t.prototype.getEventWidth=function(e,t,i,n){return"day"===this.renderType||i?n*this.slotsPerDay*this.cellWidth:this.isSameDay(e,t)?this.getSameDayEventsWidth(e,t):this.getSpannedEventsWidth(e,t,n)},t.prototype.getSameDayEventsWidth=function(e,t){return(t.getTime()-e.getTime())/6e4*(this.cellWidth*this.slotCount)/this.interval},t.prototype.getSpannedEventsWidth=function(e,t,i){var n,s=i*this.slotsPerDay*this.cellWidth,o=p(l(new Date(e.getTime())),this.startHour,this.endHour),r=this.getSameDayEventsWidth(o.startHour,e);if(-1===this.parent.getIndexOfDate(this.dateRender,l(new Date(t.getTime()))))n=0;else{var a=p(l(new Date(t.getTime())),this.startHour,this.endHour);n=this.getSameDayEventsWidth(t,a.endHour),n=this.slotsPerDay*this.cellWidth===n?0:n}var d=r+n;return s>d?s-d:s-r},t.prototype.isSameDay=function(e,t){return this.parent.getIndexOfDate(this.dateRender,l(new Date(e.getTime())))===this.parent.getIndexOfDate(this.dateRender,l(new Date(t.getTime())))},t.prototype.getAppointmentLeft=function(e,t,i){var n=this.isSameDay(t,e.startHour)?(m(t)-m(e.startHour))/(6e4*this.interval)*this.slotCount:0;return 0===i?n:Math.round((m(e.endHour)-m(e.startHour))/6e4/this.interval*this.slotCount)*i+n},t.prototype.getPosition=function(e,t,i,n){if("day"===this.renderType||i)return n*this.slotsPerDay*this.cellWidth;var s=p(l(new Date(this.dateRender[n].getTime())),this.startHour,this.endHour);return(s.endHour.getTime()<=t.getTime()&&s.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(s,s.startHour,n):s.endHour.getTime()<=t.getTime()?this.getAppointmentLeft(s,e,n):s.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(s,s.startHour,n):this.getAppointmentLeft(s,e,n))*this.cellWidth},t.prototype.getRowTop=function(e,t){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?t?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+e.toString()+'"]').offsetTop:this.cellHeight*e:0},t.prototype.renderEvents=function(e,t,i){var n=e.data,s=e.startTime,o=e.endTime;this.dateRender=this.parent.activeView.renderDates,this.day=this.parent.getIndexOfDate(this.dateRender,l(new Date(s.getTime()))),this.rowIndex=t;var r=this.getCellTd(),a=this.eventHeight,d=n.count,h=this.getEventWidth(s,o,e.isAllDay,d);h="day"===this.renderType?h-2:h;var c=this.getPosition(s,o,e.isAllDay,this.day);h=h<=0?this.cellWidth:h;var p=2+(a+2),u=this.parent.options.enableRtl?0:c,f=this.parent.options.enableRtl?c:0,m=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(m,{width:h+"px",left:u+"px",right:f+"px",top:p+"px"}),this.renderEventElement(m,r)},t.prototype.getCellTd=function(){var e=this.parent.uiStateValues.isGroupAdaptive?0:this.rowIndex;return this.eventContainers[e]},t}(P),q=(E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),_=function(e){function t(t){var i=e.call(this,t)||this;return i.baseCssClass="e-timeline-view",i}return q(t,e),t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.scrollToWorkHour=function(){var e=this.parent.getStartEndTime(this.parent.options.workHours.start),t=this.isWorkDay(this.parent.options.selectedDate)&&this.parent.options.workHours.highlight&&!sf.base.isNullOrUndefined(e)?new Date(+this.parent.options.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0):new Date(+this.parent.options.selectedDate).setHours(0,0,0,0),i=this.getScrollableElement(t);sf.base.isNullOrUndefined(i)&&(e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour),t=new Date(+this.parent.options.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0),i=this.getScrollableElement(t)),i&&(this.getContentAreaElement().scrollLeft=this.parent.options.enableRtl?-(this.parent.getContentTable().offsetWidth-i.offsetLeft-i.offsetWidth):i.offsetLeft)},t.prototype.getScrollableElement=function(e){var t='[data-date="'+this.parent.getMsFromDate(new Date(e))+'"]';return this.element.querySelector(t)},t.prototype.scrollToHour=function(e,t){var i,n,s;if(t&&(n=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(t)))>=0&&(i=t,!sf.base.isNullOrUndefined(e))){var o=e.split(":");2===o.length&&(i=new Date(t.setHours(parseInt(o[0],10),parseInt(o[1],10),0)))}(i=sf.base.isNullOrUndefined(t)?this.parent.getStartEndTime(e):i,sf.base.isNullOrUndefined(i))||(s=sf.base.isNullOrUndefined(e)||!this.parent.activeViewOptions.timeScale.enable?n*this.getWorkCellWidth():sf.base.isNullOrUndefined(t)?this.getLeftFromDateTime(null,i):this.getLeftFromDateTime([n],i),this.getContentAreaElement().scrollLeft=this.parent.options.enableRtl?-s:s)},t.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.getLeftFromDateTime(e,this.parent.getCurrentTime()),i=this.element.querySelector(".e-content-table").offsetHeight,n=this.element.querySelector(".e-date-header-wrap");if(this.element.querySelector(".e-content-wrap").appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:(this.parent.options.enableRtl?"right":"left")+":"+sf.base.formatUnit(t)+"; height:"+sf.base.formatUnit(i)})),this.parent.virtualScrollModule){var s=this.parent.element.querySelector(".e-current-timeline"),o=this.parent.element.querySelector(".e-content-wrap table");sf.base.setStyleAttribute(s,{transform:o.style.transform})}var r=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time"});n.appendChild(r),r.style[this.parent.options.enableRtl?"right":"left"]=sf.base.formatUnit(t-r.offsetWidth/2)}},t.prototype.getLeftFromDateTime=function(e,t){var i=this.getStartHour(),n=this.getEndHour(),s=0,o=60*(t.getHours()-i.getHours())+(t.getMinutes()-i.getMinutes());if(!sf.base.isNullOrUndefined(e)){var r=0===n.getHours()?24:n.getHours();0!==e[0]&&(s=e[0]*(60*(r-i.getHours()))+(n.getMinutes()-i.getMinutes())),o=s+o}return o*this.getWorkCellWidth()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellWidth=function(){return this.element.querySelector(".e-work-cells").getBoundingClientRect().width},t.prototype.getCurrentTimeIndicatorIndex=function(){var e=[],t=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(this.parent.getCurrentTime()));return t>=0&&e.push(t),e},t.prototype.renderEvents=function(){},t.prototype.onDataReady=function(){(this.removeVirtualMask(),this.parent.activeViewOptions.timeScale.enable)?new U(this.parent,"hour").renderAppointments():new U(this.parent,"day").renderAppointments()},t}(H),F=(x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),V=function(e){function t(t){var i=e.call(this,t)||this;return i.dayNameFormat="wide",i.isInverseTableSelect=!1,i.allDayLevel=0,i}return F(t,e),t.prototype.onDataReady=function(e){if("MonthAgenda"!==this.parent.options.currentView){var t=new P(this.parent);this.removeVirtualMask(),t.renderAppointments()}else this.parent.eventBase.removeSelectedAppointmentClass()},t.prototype.onContentScroll=function(e){this.parent.removeNewEventElement(),this.parent.onVirtualScroll(),this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target),this.parent.setPersistence()},t.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-week-number-wrapper")},t.prototype.onScrollUiUpdate=function(e){var t=this.getHeaderBarHeight(),i=this.getDatesHeaderElement(),n=this.getContentAreaElement(),s=this.parent.element.offsetHeight-t-i.offsetHeight,o=this.getLeftPanelElement();"auto"!==this.parent.options.height?this.setContentHeight(n,o,s):(n.style.height="auto",o&&(o.style.height="auto"));var r=f();if(i.firstElementChild.style[e.cssProperties.rtlBorder]="",i.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=r>0?"1px":"0px",i.style[e.cssProperties.padding]=r>0?r-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]=""),this.setColWidth(n),e.scrollPosition)o&&(o.scrollTop=e.scrollPosition.top),n.scrollTop=e.scrollPosition.top,n.scrollLeft=e.scrollPosition.left;else{var a=this.element.querySelector('.e-header-cells[data-date="'+this.parent.getMsFromDate(this.parent.options.selectedDate)+'"]');sf.base.isNullOrUndefined(a)?n.scrollLeft=0:n.scrollLeft=this.parent.options.enableRtl?-(this.parent.getContentTable().offsetWidth-a.offsetLeft-a.offsetWidth):a.offsetLeft,e.isPreventScrollUpdate||(n.scrollTop=this.parent.uiStateValues.top)}this.retainScrollPosition()},t.prototype.setContentHeight=function(e,t,i){e.style.height="auto","Month"===this.parent.options.currentView&&(e.style.height=sf.base.formatUnit(i)),t&&("MonthAgenda"===this.parent.options.currentView&&(i=this.element.querySelector(".e-content-table").offsetHeight),t.style.height="auto",t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(e)))},t.prototype.renderLayout=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-current-day"));e.length>0&&sf.base.removeClass(e,"e-current-day");var t=v(l(new Date(this.parent.getCurrentTime()))),i='.e-work-cells[data-date="'+t.getTime().toString()+'"]';if("Month"===this.parent.options.currentView||"MonthAgenda"===this.parent.options.currentView){(e=[].slice.call(this.parent.element.querySelectorAll(".e-current-date"))).length>0&&sf.base.removeClass(e,"e-current-date");var n=[].slice.call(this.parent.element.querySelectorAll(i)),s=[].slice.call(this.parent.element.querySelectorAll(".e-header-cells")),o=null!=this.parent.activeViewOptions&&this.parent.activeViewOptions.group.byDate&&"Month"===this.parent.options.currentView,r=void 0;o&&(r=parseInt(s[0].getAttribute("colspan"),10));for(var a=0,d=n;a<d.length;a++){var h=d[a],c=h.cellIndex,p=s[c=o?Math.floor(c/r):c];sf.base.addClass([h],"e-current-date"),p&&sf.base.addClass([p],"e-current-day")}}if("TimelineMonth"===this.parent.options.currentView){n=this.parent.element.querySelector('.e-header-cells[data-date="'+t.getTime().toString()+'"]');sf.base.isNullOrUndefined(n)||sf.base.addClass([n],"e-current-day")}this.element=this.parent.element.querySelector(".e-table-wrap");for(var u=0,f=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));u<f.length;u++){var m=f[u];sf.base.EventHandler.clearEvents(m),this.wireCellEvents(m)}var g=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(g),this.wireCellEvents(g),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var b=this.element.querySelector(".e-content-wrap");sf.base.EventHandler.clearEvents(b),sf.base.EventHandler.add(b,"scroll",this.onContentScroll,this),this.renderAppointmentContainer(),this.parent.setDimensions(),this.parent.uiStateValues.isCustomMonth&&(this.parent.uiStateValues.isCustomMonth=!1)},t.prototype.wireCellEvents=function(e){this.parent.isPrintSchedule||(sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction))},t.prototype.renderAppointmentContainer=function(){},t.prototype.getMonthStart=function(e){var t=o(this.parent.uiStateValues.isCustomMonth&&"Month"===this.parent.options.currentView&&!sf.base.isNullOrUndefined(this.parent.activeViewOptions.displayDate)?new Date(this.parent.activeViewOptions.displayDate):!this.parent.uiStateValues.isCustomMonth&&this.isCustomMonth()?e:r(e),this.parent.activeViewOptions.firstDayOfWeek);return new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.prototype.getMonthEnd=function(e){return this.isCustomMonth()?h(this.getMonthStart(e),7*(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:6)-1):h(o(a(c(e,this.parent.activeViewOptions.interval-1)),this.parent.activeViewOptions.firstDayOfWeek),6)},t.prototype.getRenderDates=function(e){var t=[],i=l(this.parent.options.selectedDate),n=this.getMonthStart(i),s=this.getMonthEnd(i);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(n,e))&&t.push(n),n=h(n,1)}while(n.getTime()<=s.getTime());return e||(this.renderDates=t),t},t.prototype.isCustomMonth=function(){return"Month"===this.parent.options.currentView&&(!sf.base.isNullOrUndefined(this.parent.activeViewOptions.displayDate)||this.parent.activeViewOptions.numberOfWeeks>0)},t.prototype.getEndDateFromStartDate=function(e){return h(new Date(e.getTime()),1)},t.prototype.destroy=function(){this.parent.isDestroyed||(this.element=null)},t}(M),j=(O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),W=function(e){function t(t){return e.call(this,t)||this}return j(t,e),t.prototype.renderAppointmentContainer=function(){"auto"!==this.getContentAreaElement().style.height&&this.setEventWrapperHeight()},t.prototype.setEventWrapperHeight=function(){var e=this.getHeaderBarHeight(!0),t=this.getContentAreaElement().firstElementChild,i=this.element.querySelector(".e-date-header-wrap"),n=this.parent.element.offsetHeight-e-i.offsetHeight-t.offsetHeight,s=this.element.querySelector(".e-wrapper-container"),o=this.element.querySelector(".e-appointment-wrap");"auto"!==this.parent.options.height&&(s.style.height=o.style.height=sf.base.formatUnit(n))},t}(V),X=(T=function(e,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Y=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!0,i}return X(t,e),t.prototype.onDataReady=function(e){var t=new U(this.parent,"day");this.removeVirtualMask(),t.renderAppointments()},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.setContentHeight=function(e,t,i){t&&(t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(e))),e.style.height=sf.base.formatUnit(i)},t.prototype.getMonthStart=function(e){var t=r(l(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.prototype.getMonthEnd=function(e){var t=r(l(e));return a(c(new Date(+t),this.parent.activeViewOptions.interval-1))},t}(V),K=(A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),G=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!1,i}return K(t,e),t.prototype.renderLayout=function(){if(this.element=this.parent.element.querySelector(".e-table-wrap"),"TimelineYear"===this.parent.options.currentView){var e="Horizontal"===this.parent.activeViewOptions.orientation,t=this.parent.activeViewOptions.group.resources.length>0;this.isInverseTableSelect=!(e&&!t);for(var i=0,n=[].slice.call(this.element.querySelectorAll(".e-work-cells:not(.e-other-month)"));i<n.length;i++){var s=n[i];sf.base.EventHandler.clearEvents(s),this.wireEvents(s,"cell")}this.parent.virtualScrollModule&&!e&&this.parent.virtualScrollModule.setTranslateValue()}this.wireEvents(this.element.querySelector(".e-content-wrap"),"scroll"),this.parent.setDimensions()},t.prototype.onContentScroll=function(e){var t=e.target;this.parent.onVirtualScroll(),sf.base.isNullOrUndefined(this.element)&&(this.element=t);var i=this.getDatesHeaderElement();i&&(i.firstElementChild.scrollLeft=t.scrollLeft);var n=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");n&&(n.scrollTop=t.scrollTop),this.parent.setPersistence()},t.prototype.onScrollUiUpdate=function(e){var t=this.parent.element.offsetHeight-this.getHeaderBarHeight(),i=this.element.querySelector(".e-date-header-container");i&&(t-=i.offsetHeight);var n=this.element.querySelector(".e-content-wrap"),s=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap"),o="auto"===this.parent.options.height;if(n&&(n.style.height=o?"auto":sf.base.formatUnit(t)),s&&(s.style.height=o?"auto":sf.base.formatUnit(t-this.getScrollXIndent(n))),!this.parent.isAdaptive&&i){var r=f();n.offsetWidth-n.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=r>0?"1px":"0px",i.style[e.cssProperties.padding]=r>0?r-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]="")}this.resetColWidth(),this.setColWidth(this.getContentAreaElement()),this.retainScrollPosition()},t.prototype.onDataReady=function(){if(this.removeVirtualMask(),"TimelineYear"===this.parent.options.currentView){var e=this.parent.options.rowAutoHeight&&this.parent.options.ignoreWhitespace?0:19;this.element=this.parent.element.querySelector(".e-table-wrap"),this.removeCellHeight();var t=this.element.querySelector(".e-work-cells:not(.e-other-month)"),n=0,s=0,o=t.offsetParent;o&&(n=o.offsetHeight/o.querySelector("tbody").childElementCount,s=o.offsetWidth/o.querySelector("tbody tr").childElementCount);var r=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),a=[].slice.call(o.querySelectorAll("tbody tr"));r.forEach((function(e,t){e.classList.contains("e-hidden")?e.removeAttribute("style"):e.style.height=a[t].getBoundingClientRect().height+"px"}));for(var l=t.querySelector(".e-date-header"),d=sf.base.isNullOrUndefined(l)?0:g(l),h=i(this.element.querySelector(".e-event-table"),"e-appointment"),c=void 0,p=void 0,u=[],f=void 0,m=this.element.querySelectorAll(".e-appointment, .e-more-indicator"),v=0;v<m.length;v++){var b=m[v];sf.base.removeClass([b],"e-event-action");var y="none"!==b.style.display;b.style.removeProperty("display"),b.blur();var w=void 0,C=void 0,S=void 0,E=void 0;if(w=null!=this.parent.activeViewOptions.group.resources&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.element.querySelector('.e-work-cells[data-date="'+b.getAttribute("data-date")+'"][data-group-index="'+b.getAttribute("data-group-index")+'"]'):this.element.querySelector('.e-work-cells[data-date="'+b.getAttribute("data-date")+'"]'),this.parent.options.enableRtl?p=w.cellIndex*s:c=w.cellIndex*s,!sf.base.isNullOrUndefined(w)){if(b.classList.contains("e-appointment")){var x=parseInt(b.getAttribute("data-index"),10);C=d+h*x+2,this.parent.options.rowAutoHeight||(S=this.parent.options.enableMaxHeight&&!this.parent.options.enableIndicator?n-d-2:this.parent.options.enableMaxHeight&&this.parent.options.enableIndicator?n-d-e:h),E=s-2,y||this.parent.eventBase.wireAppointmentEvents(b);var O=(x+1)*h+(0!==e?e:2)+d;if(this.parent.options.rowAutoHeight&&n<O){var T=w.parentNode,A=T.sectionRowIndex;sf.base.isNullOrUndefined(u[A])&&(u[A]=Math.ceil(T.getBoundingClientRect().height),b.parentElement.style.height=u[A]+"px"),this.updateCellHeight(w,O,A,u)}}else sf.base.isNullOrUndefined(f)&&(f=b.getBoundingClientRect().height),C=n-f,E=s-2;b.style.width=E+"px",b.style.height=S+"px",b.style.right=p+"px",b.style.left=c+"px",b.style.top=C+"px"}}this.updateRowHeight()}},t.prototype.updateRowHeight=function(){if(this.parent.options.rowAutoHeight){var e={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateVirtualScrollHeight(),this.parent.onScrollUiUpdate(e)}},t.prototype.updateCellHeight=function(e,t,i,n){if(t>n[i]){n[i]=t,sf.base.setStyleAttribute(e.parentElement.querySelector("td"),{height:t+"px"});var s=[].slice.call(this.parent.element.querySelectorAll(".e-event-table .e-event-container"));if(sf.base.setStyleAttribute(s[i],{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){var o=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+e.getAttribute("data-group-index")+'"]');o&&sf.base.setStyleAttribute(o,{height:t+"px"})}var r=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");r&&sf.base.setStyleAttribute(r,{height:t+"px"})}},t.prototype.removeCellHeight=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-month-header-wrapper tbody tr,.e-resource-column-table tbody tr,.e-content-table tbody tr"));e<t.length;e++){t[e].firstElementChild.style.height=""}},t.prototype.getStartDate=function(){return new Date(this.parent.options.selectedDate.getFullYear(),this.parent.activeViewOptions.firstMonthOfYear-1,1)},t.prototype.getEndDate=function(){return h(c(this.getStartDate(),this.parent.activeViewOptions.monthsCount),-1)},t.prototype.getEndDateFromStartDate=function(e){var t=new Date(e.getTime());return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(t=a(t)),h(new Date(t.getTime()),1)},t.prototype.wireEvents=function(e,t){this.parent.isPrintSchedule||("cell"===t?"TimelineYear"===this.parent.options.currentView&&(sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)):sf.base.EventHandler.add(e,"scroll",this.onContentScroll,this))},t.prototype.scrollToDate=function(e){var t=this.parent.getMsFromDate(new Date(l(new Date(+e)).getTime()));if("TimelineYear"===this.parent.options.currentView){if(null!==this.parent.activeViewOptions.group.resources&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var i=r(new Date(+e));t=+this.parent.getMsFromDate(new Date(l(new Date(+i)).getTime()))}if(o=this.element.querySelector('[data-date="'+t+'"]')){var n=this.getContentAreaElement();if(this.parent.options.enableRtl){var s=this.element.querySelector(".e-content-table");n.scrollLeft=-(s.offsetWidth-o.offsetLeft-o.offsetWidth)}else n.scrollLeft=o.offsetLeft;n.scrollTop=o.offsetTop}}else{var o;(o=this.element.querySelector('.e-work-cells:not(.e-other-month)[data-date="'+t+'"]'))&&(o=sf.base.closest(o,".e-month-calendar"),this.getContentAreaElement().scrollTop=o.offsetTop)}},t.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.element=null)},t}(M),Z=(N=function(e,t){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Q=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-agenda-view",i.isInverseTableSelect=!1,i.translateY=0,i.itemCount=0,i.elementHeight=70,i.bufferCount=3,i.renderedCount=10,i}return Z(t,e),t.prototype.renderLayout=function(){this.element=this.parent.element.querySelector(".e-table-wrap"),this.parent.isPrintSchedule||this.wireEvents(),this.parent.setDimensions()},t.prototype.onDataReady=function(e,t,i){if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.options.enablePersistence)this.retainScrollPosition();else if(this.parent.activeViewOptions.allowVirtualScrolling){var n=this.element.querySelector(".e-virtual-track");n||(n=sf.base.createElement("div",{className:"e-virtual-track"}));var s=this.element.querySelector(".e-content-wrap");n.style.height=t*this.elementHeight-s.offsetHeight+"px",s.appendChild(n),i&&(s.scrollTop=this.translateY=0,this.setTranslate(s)),this.itemCount=t}},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling,this)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling)},t.prototype.agendaScrolling=function(){if(sf.base.isNullOrUndefined(this.parent.quickPopup)||this.parent.quickPopup.hide(),this.parent.activeViewOptions.allowVirtualScrolling){var e=this.element.querySelector(".e-content-wrap"),t=this.element.querySelector(".e-agenda-item");this.elementHeight=t?t.offsetHeight:this.elementHeight;var i=void 0;e.scrollTop-this.translateY<0?(i=~~(e.scrollTop/this.elementHeight),this.translateY=e.scrollTop,this.setTranslate(e),this.beforeInvoke(i)):e.scrollTop-this.translateY>this.elementHeight*this.bufferCount&&(i=(i=~~(e.scrollTop/this.elementHeight))>this.itemCount?this.itemCount-this.renderedCount:i,this.translateY=e.scrollTop,this.translateY>this.itemCount*this.elementHeight-this.renderedCount*this.elementHeight&&(this.translateY=this.itemCount*this.elementHeight-this.renderedCount*this.elementHeight),this.setTranslate(e),this.beforeInvoke(i))}this.parent.setPersistence()},t.prototype.beforeInvoke=function(e){var t=this;window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout((function(){t.triggerScrolling(e)}),100)},t.prototype.triggerScrolling=function(e){this.parent.dotNetRef.invokeMethodAsync("AgendaScroll",e)},t.prototype.setTranslate=function(e){sf.base.setStyleAttribute(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"})},t.prototype.getEndDateFromStartDate=function(e){return l(h(e,1))},t.prototype.onScrollUiUpdate=function(){var e=this.getHeaderBarHeight(),t=this.element.querySelector(".e-content-wrap");"auto"!==this.parent.options.height?t.style.height=sf.base.formatUnit(this.parent.element.offsetHeight-e):t.style.height="auto"},t.prototype.scrollToDate=function(e){var t=this.parent.getMsFromDate(new Date(l(new Date(+e)).getTime())),i=this.element.querySelector('.e-agenda-cells[data-date="'+t+'"]');i&&(this.getContentAreaElement().scrollTop=i.offsetTop)},t.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.unWireEvents(),this.element=null)},t}(M),J=function(){function e(e){this.parent=e}return e.prototype.cellMouseDown=function(e){this.isPreventAction(e)||this.parent.onCellMouseDown(e)},e.prototype.cellClick=function(e){if(sf.base.isNullOrUndefined(this.parent.morePopup)||this.parent.morePopup.hide(),!(this.isPreventAction(e)||sf.base.closest(e.target,".e-disable-dates")||e.detail>1)){var t=sf.base.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!(sf.base.isNullOrUndefined(t)||t.classList.contains("e-header-cells")&&"Month"===this.parent.options.currentView)){if(!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-new-event")))return(o=sf.base.extend({},this.parent.activeCellsData,null,!0)).startTime=v(o.startTime),o.endTime=v(o.endTime),void this.parent.dotNetRef.invokeMethodAsync("OnOpenEditor",o,"Add");var i=sf.base.closest(e.target,".e-navigate"),n=this.parent.getNavigateView(),s=this.parent.options.currentView===n;if(sf.base.isNullOrUndefined(i)||s){if(this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.options.currentView)return;if(this.parent.isAdaptive&&(e.target.classList.contains("e-more-indicator")||sf.base.closest(e.target,".e-more-indicator")))return;var o;if((t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells"))&&e.shiftKey&&1===e.which&&this.parent.keyboardInteractionModule)return void this.parent.keyboardInteractionModule.onMouseSelection(e);this.parent.activeCellsData=this.parent.getCellDetails(t),this.parent.currentCell=t,(o=sf.base.extend({},this.parent.activeCellsData,{cancel:!1,mouseEventArgs:this.parent.eventBase.getMouseEvent(e),name:"cellClick"},!0)).startTime=v(o.startTime),o.endTime=v(o.endTime),this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",o)}else{var r=this.parent.getDateFromElement(t);if(!sf.base.isNullOrUndefined(r)&&!this.parent.isAdaptive){var a=new Date(this.parent.getMsFromDate(r));sf.base.isNullOrUndefined(this.parent.morePopup)||this.parent.morePopup.hide(),this.parent.dotNetRef.invokeMethodAsync("OnViewNavigate",a,this.parent.getNavigateView())}}}}},e.prototype.cellDblClick=function(e){if(!(this.parent.activeViewOptions.readonly||this.isPreventAction(e)||sf.base.closest(e.target,".e-disable-dates"))){var t=sf.base.extend({},this.parent.activeCellsData,{cancel:!1,mouseEventArgs:this.parent.eventBase.getMouseEvent(e),name:"OnCellDoubleClick"},!0);t.startTime=v(t.startTime),t.endTime=v(t.endTime),this.parent.dotNetRef.invokeMethodAsync("OnOpenEditor",t,"Add")}},e.prototype.isPreventAction=function(e){if(sf.base.closest(e.target,".e-navigate"))return!1;if(sf.base.closest(e.target,".e-appointment-wrapper")&&!sf.base.closest(e.target,".e-more-indicator"))return!0;var t=sf.base.closest(e.target,".e-appointment,.e-resource-group-cells");return!sf.base.isNullOrUndefined(t)||(t=sf.base.closest(e.target,".e-header-cells"),!(!this.parent.isTimelineView()||sf.base.isNullOrUndefined(t)))},e}(),$=function(){function i(e){this.selectedCells=[],this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",altSeven:"alt+7",altEight:"alt+8",altNine:"alt+9",altT:"alt+t",enter:"enter",escape:"escape",delete:"delete",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab",fTwelve:"f12"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return i.prototype.keyActionHandler=function(e){switch(e.action){case"downArrow":case"shiftDownArrow":this.processDown(e,e.shiftKey);break;case"altT":this.parent.options.selectedDate.getTime()!==(new Date).setHours(0,0,0,0)&&this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Today");break;case"upArrow":case"shiftUpArrow":this.processUp(e,e.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(e,e.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(e,e.shiftKey);break;case"ctrlLeftArrow":this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Previous");break;case"ctrlRightArrow":this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Next");break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":case"altSeven":case"altEight":case"altNine":this.processViewNavigation(e);break;case"enter":this.processEnter(e);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(e,e.shiftKey);break;case"delete":this.processDelete();break;case"escape":this.processEscape();break;case"fTwelve":this.parent.options.allowInline&&this.parent.inlineModule&&(e.preventDefault(),this.processFTwelve(e))}},i.prototype.processFTwelve=function(e){var t=e.target;(t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells"))&&(this.parent.activeCellsData=this.getSelectedElements(t),this.parent.inlineModule.cellEdit()),t.classList.contains("e-appointment")&&t.click()},i.prototype.onCellMouseDown=function(e){if(!e.shiftKey&&(this.initialTarget=this.getClosestCell(e),!this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.options.currentView&&this.initialTarget&&(e.target.classList.contains("e-work-cells")&&3!==e.which&&(this.parent.removeSelectedClass(),sf.base.EventHandler.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),sf.base.EventHandler.add(this.parent.getContentTable(),"mouseup",this.onMoveup,this)),e.target.classList.contains("e-all-day-cells")&&3!==e.which))){this.parent.removeSelectedClass();var t=this.parent.getAllDayRow();sf.base.EventHandler.add(t,"mousemove",this.onMouseSelection,this),sf.base.EventHandler.add(t,"mouseup",this.onMoveup,this)}},i.prototype.onMouseSelection=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));sf.base.addClass(t,"e-allow-select");var i=this.parent.boundaryValidation(e.pageY,e.pageX);if(i.bottom||i.top||i.left||i.right){var n=this.parent.element.querySelector(".e-content-wrap"),s=n.offsetHeight<=n.scrollHeight&&n.scrollTop>=0&&n.scrollTop+n.offsetHeight<=n.scrollHeight,o=n.offsetWidth<=n.scrollWidth&&n.scrollLeft>=0&&n.scrollLeft+n.offsetWidth<=n.scrollWidth;s&&(i.top||i.bottom)&&(n.scrollTop+=i.top?-e.target.offsetHeight:e.target.offsetHeight),o&&(i.left||i.right)&&(n.scrollLeft+=i.left?-e.target.offsetWidth:e.target.offsetWidth)}var r=this.getClosestCell(e);r&&this.selectCells(!0,r)},i.prototype.getClosestCell=function(e){return sf.base.closest(e.target,".e-work-cells,.e-all-day-cells")},i.prototype.onMoveup=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));if(sf.base.removeClass(t,"e-allow-select"),e.target.classList.contains("e-work-cells")&&(sf.base.EventHandler.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(this.parent.getContentTable(),"mouseup",this.onMoveup)),e.target.classList.contains("e-all-day-cells")){var i=this.parent.getAllDayRow();sf.base.EventHandler.remove(i,"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(i,"mouseup",this.onMoveup)}if(!this.isPreventAction(e)){var n=sf.base.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(("TimelineYear"!==this.parent.options.currentView||!n.classList.contains("e-other-month"))&&(this.parent.activeCellsData=this.getSelectedElements(n),this.parent.options.quickInfoOnSelectionEnd&&this.parent.element.querySelectorAll(".e-selected-cell").length>1)){this.parent.currentCell=n;var s=sf.base.extend(this.parent.activeCellsData,{cancel:!1,mouseEventArgs:e,name:"cellClick"},!0);s.startTime=v(s.startTime),s.endTime=v(s.endTime),this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",s)}}},i.prototype.processEnter=function(e){if(!(this.parent.activeViewOptions.readonly||this.isPreventAction(e)||"TimelineYear"===this.parent.options.currentView&&e.target.classList.contains("e-other-month"))){var t=e.target;if(sf.base.closest(t,".e-quick-popup-wrapper"))t.classList.contains("e-event-details")||t.classList.contains("e-event-create")||t.classList.contains("e-event-edit")||t.classList.contains("e-event-delete")||t.classList.contains("e-close")?(t.click(),e.preventDefault()):t.classList.contains("e-subject")&&(this.parent.element.querySelector(".e-event-create").click(),e.preventDefault());else if(t.classList.contains("e-resource-cells")&&t.classList.contains("e-parent-node")){var i=t.querySelector(".e-resource-tree-icon");i&&i.click()}else if(t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells")){this.parent.activeCellsData=this.getSelectedElements(t),this.parent.currentCell=t;var n=sf.base.extend(this.parent.activeCellsData,{cancel:!1,mouseEventArgs:e});this.parent.options.allowInline?this.parent.inlineModule.cellEdit():(n.startTime=v(n.startTime),n.endTime=v(n.endTime),"Year"===this.parent.options.currentView?t.click():this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",n))}else if(t.classList.contains("e-inline-subject"))this.parent.inlineCrudActions(t);else if(t.classList.contains("e-appointment")||t.classList.contains("e-more-event-close")||t.classList.contains("e-all-day-appointment-section")||t.classList.contains("e-more-indicator"))t.click();else if(t.classList.contains("e-header-date")){var s=this.parent.getDateFromElement(t);return this.parent.dotNetRef.invokeMethodAsync("OnViewNavigate",new Date(this.parent.getMsFromDate(s)),this.parent.getNavigateView()),void this.processEscape()}}},i.prototype.getSelectedElements=function(e){var t;if(this.selectedCells.length>1&&e.classList.contains("e-selected-cell")){var i=this.parent.getCellDetails(this.selectedCells[0]),n=this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);i.endTime=n.endTime,i.element=e,t=i}else t=this.parent.getCellDetails(e);return t},i.prototype.getCells=function(e,t,i){var n=this.parent.getContentTable(),s="TimelineYear"===this.parent.options.currentView,o=s&&!e?".e-work-cells:not(.e-other-month)":"td",r=[].slice.call(n.querySelectorAll(o)),a=n.rows.length,l=n.rows[0].cells.length;if(t.classList.contains("e-all-day-cells")){var d=this.parent.getAllDayRow();r=[].slice.call(d.cells),a=1,l=d.cells.length}var h=r.indexOf(t),c=r.indexOf(i),p=[];if(e){for(var u=0;u<l;u++)for(var f=0;f<a;f++){var m=r[l*f+u];s&&m.classList.contains("e-other-month")||p.push(m)}h=p.indexOf(t),c=p.indexOf(i)}if(h>c){var g=h;h=c,c=g}return(e?p:r).slice(h,c+1)},i.prototype.focusFirstCell=function(){if("Agenda"===this.parent.options.currentView){var e=this.parent.getContentTable().querySelector(".e-agenda-cells");return e.setAttribute("tabindex","0"),void e.focus()}if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.isTimelineView()&&"TimelineYear"!==this.parent.options.currentView){var t=this.parent.element.querySelector(".e-content-table tr:not(.e-hidden) .e-work-cells:not(.e-resource-group-cells)");this.selectCells(!1,t)}else if(this.parent.options.currentView.indexOf("Year")>-1){var i=".e-work-cells:not(.e-other-month):not(.e-resource-group-cells)";i+="TimelineYear"===this.parent.options.currentView&&"Vertical"===this.parent.activeViewOptions.orientation?'[data-date="'+v(this.parent.activeView.getStartDate()).getTime()+'"]':"",this.selectCells(!1,this.parent.element.querySelector(i))}else this.selectCells(!1,this.parent.getWorkCellElements()[0])},i.prototype.isInverseTableSelect=function(){return this.parent.activeView.isInverseTableSelect},i.prototype.selectCells=function(e,t){this.parent.removeSelectedClass();var i=t instanceof Array?t.slice(-1)[0]:t;if(e){var n=void 0;if(!this.parent.options.allowMultiRowSelection)if("TimelineYear"===this.parent.options.currentView&&"Horizontal"===this.parent.activeViewOptions.orientation||"Month"===this.parent.options.currentView)i="TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0?this.initialTarget:this.initialTarget.parentElement.children[i.cellIndex];else["Day","Week","WorkWeek","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth","TimelineYear"].indexOf(this.parent.options.currentView)>-1&&(i=i.parentElement.children[this.initialTarget.cellIndex]);var s=this.getCells(this.isInverseTableSelect(),this.initialTarget,i);if(this.parent.activeViewOptions.group.resources.length>0){n=this.initialTarget.getAttribute("data-group-index");for(var o=[],r=0,a=s;r<a.length;r++){(p=a[r]).getAttribute("data-group-index")===n&&o.push(p)}s=o}if(this.parent.options.allowMultiCellSelection||(s=[this.initialTarget]),this.selectedCells=s,s.length>2&&!i.classList.contains("e-all-day-cells")){var l=this.getAllDayCells(s);if(this.parent.activeViewOptions.group.resources.length>0){for(var d=[],h=0,c=l;h<c.length;h++){var p;(p=c[h]).getAttribute("data-group-index")===n&&d.push(p)}l=d}s=s.concat(l)}i.getAttribute("data-group-index")!==n&&this.parent.activeViewOptions.group.resources.length>0&&(i=this.selectedCells[this.selectedCells.length-1]),this.parent.addSelectedClass(s,i)}else this.initialTarget=i,this.selectedCells=[i],this.parent.addSelectedClass([i],i)},i.prototype.selectAppointment=function(e,t){var i=this.getAppointmentElements();if(!(i.length<0)){var n;if(this.parent.eventBase.removeSelectedAppointmentClass(),t.classList.contains("e-appointment")){var s=i.indexOf(t);n=i[e?s-1:s+1]}else n=e?i[i.length-1]:i[0];n&&(this.parent.eventBase.addSelectedAppointments([n]),n.focus(),sf.base.addClass([n],"e-active-appointment-agenda"))}},i.prototype.selectAppointmentElementFromWorkCell=function(e,t){this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.removeSelectedClass()},i.prototype.getAllDayCells=function(e){var t=this.parent.getAllDayRow();if(!t)return[];var i=e[0],n=e[e.length-1],s=this.parent.getCellDetails(i);return this.parent.getCellDetails(n).endTime.getTime()-s.startTime.getTime()>=864e5?[].slice.call(t.cells).slice(i.cellIndex,n.cellIndex+1):[]},i.prototype.getAppointmentElements=function(){return[].slice.call(this.parent.element.querySelectorAll(".e-appointment"))},i.prototype.getAppointmentElementsByGuid=function(e){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+e+'"]'))},i.prototype.getUniqueAppointmentElements=function(){var e=this.getAppointmentElements(),t=[];return e.map((function(e){return e.getAttribute("data-guid")})).filter((function(i,n,s){s.indexOf(i)===n&&t.push(e[n])})),t},i.prototype.getWorkCellFromAppointmentElement=function(e){return null},i.prototype.processViewNavigation=function(e){var t=parseInt(e.key,10)-1,i=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-toolbar .e-toolbar-item.e-views"));t<i.length&&i[t].click()},i.prototype.cancelUpDownAction=function(e){var t=e&&"Vertical"===this.parent.activeViewOptions.orientation,i=this.parent.activeViewOptions.group.resources.length>0;return!!(t&&i||e&&this.initialTarget.classList.contains("e-other-month"))||!((!this.parent.isTimelineView()||e)&&"MonthAgenda"!==this.parent.options.currentView)},i.prototype.processUp=function(t,i){var n="TimelineYear"===this.parent.options.currentView;if(!(i&&this.cancelUpDownAction(n)||this.preventYearNavigation())){var s=t.target,o=this.parent.getSelectedElements(),r=this.parent.eventBase.getSelectedAppointments(),a=this.parent.element.querySelector(".e-more-popup-wrapper"),l=this.getQuickPopupElement();if(o.length>0&&!t.target.classList.contains("e-work-cells")&&(s=o[o.length-1]),r.length>0&&!a.classList.contains(e)&&!l.classList.contains(e)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.options.currentView)&&(s=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),s)if(s.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+e)){var d=this.parent.getTableRows(),h=d.indexOf(s.parentElement),c=void 0;if(n&&i&&0===this.parent.activeViewOptions.group.resources.length&&(c=this.isInverseTableSelect()?this.getVerticalUpDownCell(d,s,h,!0):this.getHorizontalUpDownCell(d,s,h,!0)),(h>0||c)&&h<d.length){if(c=c||d[h-1].cells[s.cellIndex],"Year"===this.parent.options.currentView&&c.classList.contains("e-other-month")){if(!(v(this.parent.activeView.getStartDate()).getTime()<+c.getAttribute("data-date")))return;c=this.getYearUpDownCell(d,h-1,s.cellIndex,!0)}this.selectCells(i,c)}}else"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||this.selectAppointment(!0,s)}},i.prototype.processDown=function(t,i){var n="TimelineYear"===this.parent.options.currentView;if(!(i&&this.cancelUpDownAction(n)||this.preventYearNavigation())){var s=t.target,o=this.parent.getSelectedElements(),r=this.parent.eventBase.getSelectedAppointments(),a=this.parent.element.querySelector(".e-more-popup-wrapper"),l=this.getQuickPopupElement();o.length>0&&!t.target.classList.contains("e-work-cells")&&(s=o[o.length-1]),r.length>0&&!a.classList.contains(e)&&!l.classList.contains(e)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.options.currentView)&&(s=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());var d=this.parent.getTableRows();if(s)if(s.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+e)){var h=d.indexOf(s.parentElement),c=void 0;if(n&&i&&0===this.parent.activeViewOptions.group.resources.length&&(c=this.isInverseTableSelect()?this.getVerticalUpDownCell(d,s,h,!1):this.getHorizontalUpDownCell(d,s,h,!1)),h>=0&&(h<d.length-1||c)){if(c=c||d[h+1].cells[s.cellIndex],"Year"===this.parent.options.currentView&&c.classList.contains("e-other-month")){if(!(v(this.parent.activeView.getEndDate()).getTime()>+c.getAttribute("data-date")))return;c=this.getYearUpDownCell(d,h+1,s.cellIndex,!1)}this.selectCells(i,c)}}else"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||this.selectAppointment(!1,s)}},i.prototype.getYearUpDownCell=function(e,t,i,n){for(;e[t]&&e[t].cells[i].classList.contains("e-other-month");)t+=n?-1:1;return e[t].cells[i]},i.prototype.getHorizontalUpDownCell=function(e,t,i,n){var s=e[i+(n?-1:1)],o=s?s.cells[t.cellIndex]:t;if(o.classList.contains("e-other-month")){var r=s.querySelector(".e-work-cells:not(.e-other-month)"),l='[data-date="'+v(a(new Date(+r.getAttribute("data-date")))).getTime()+'"]';o=o.cellIndex<r.cellIndex?r:s.querySelector(l)}return o},i.prototype.getVerticalUpDownCell=function(e,t,i,n){var s=n&&i>0||!n&&i<e.length-1?e[i+(n?-1:1)].cells[t.cellIndex]:void 0;if(!s||s.classList.contains("e-other-month")){if(e[i].cells[t.cellIndex-(n?1:-1)]){var o=+t.getAttribute("data-date")-(n?864e5:-864e5);return this.parent.getContentTable().querySelector('.e-work-cells[data-date="'+o+'"]')}s=t}return s},i.prototype.processLeftRight=function(e){var t="Year"===this.parent.options.currentView?e.closest("tbody"):this.parent.getContentTable(),i=e.parentNode.sectionRowIndex;return{element:t,rowIndex:i,columnIndex:e.cellIndex,maxIndex:t.rows[i].cells.length}},i.prototype.getQuickPopupElement=function(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector(".e-quick-popup-wrapper")},i.prototype.isCancelLeftRightAction=function(t,i,n){var s="MonthAgenda"===this.parent.options.currentView||n&&this.initialTarget.classList.contains("e-other-month");if("Agenda"===this.parent.options.currentView||i&&s||this.preventYearNavigation())return!0;if(this.isPreventAction(t)&&i)return!0;var o=this.parent.element.querySelector(".e-more-popup-wrapper"),r=this.getQuickPopupElement();return!(!o.classList.contains(e)&&!r.classList.contains(e))},i.prototype.processRight=function(e,t){var i="TimelineYear"===this.parent.options.currentView;if(!this.isCancelLeftRightAction(e,t,i)){var n,s=this.parent.getSelectedElements(),o=this.parent.eventBase.getSelectedAppointments(),r=e.target;if(s.length>0&&!r.classList.contains("e-work-cells")&&!r.classList.contains("e-all-day-cells")&&(r=s[s.length-1]),!(o.length>0)||(r=this.getWorkCellFromAppointmentElement(o[o.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),r))if(r.classList.contains("e-work-cells")&&e.target.classList.contains("e-work-cells")){var l=this.processLeftRight(r),d=new Date(+r.getAttribute("data-date")),h="Year"===this.parent.options.currentView&&d.getTime()===v(a(d)).getTime();if(l.columnIndex>=0&&l.columnIndex<l.maxIndex-1&&!h)n=this.calculateNextPrevDate(r,l.element.rows[l.rowIndex].cells[r.cellIndex+1],"right"),i&&t&&n.classList.contains("e-other-month")&&(n=this.getTimelineYearTargetCell(l,r,!0)),sf.base.isNullOrUndefined(n)||this.selectCells(t,n);else if(l.columnIndex===l.maxIndex-1||h)if(!this.isInverseTableSelect()&&l.rowIndex<l.element.rows.length-1&&!h){n=this.calculateNextPrevDate(r,l.element.rows[l.rowIndex+1].cells[0],"right");var c=i&&t&&n.classList.contains("e-other-month");n=c?this.getHorizontalLeftRightCell(l,r,!0):n,sf.base.isNullOrUndefined(n)||this.selectCells(t,n)}else if(!t&&h&&d.getTime()!==v(this.parent.activeView.getEndDate()).getTime())return void this.selectCells(t,this.parent.element.querySelector(':not(.e-other-month)[data-date="'+(d.getTime()+864e5)+'"]'))}else if(r.classList.contains("e-all-day-cells")){var p=r.cellIndex,u=this.parent.getAllDayRow(),f=u.cells.length;p>=0&&p<f-1&&this.selectCells(t,u.cells[p+1])}}},i.prototype.processLeft=function(e,t){var i="TimelineYear"===this.parent.options.currentView;if(!this.isCancelLeftRightAction(e,t,i)){var n,s=e.target,o=this.parent.getSelectedElements();o.length>0&&!s.classList.contains("e-work-cells")&&!s.classList.contains("e-all-day-cells")&&(s=o[o.length-1]);var a=this.parent.eventBase.getSelectedAppointments();if(!(a.length>0)||(s=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),s))if(e.target.classList.contains("e-work-cells")&&s.classList.contains("e-work-cells")){var l=this.processLeftRight(s),d=new Date(+s.getAttribute("data-date")),h="Year"===this.parent.options.currentView&&d.getTime()===v(r(d)).getTime();if(l.columnIndex>0&&l.columnIndex<l.maxIndex&&!h)n=this.calculateNextPrevDate(s,l.element.rows[l.rowIndex].cells[s.cellIndex-1],"left"),i&&t&&n.classList.contains("e-other-month")&&(n=this.getTimelineYearTargetCell(l,s,!1)),sf.base.isNullOrUndefined(n)||this.selectCells(t,n);else if(0===l.columnIndex||h)if(!this.isInverseTableSelect()&&l.rowIndex>0){n=this.calculateNextPrevDate(s,l.element.rows[l.rowIndex-1].cells[l.maxIndex-1],"left");var c=i&&t&&n.classList.contains("e-other-month");n=c?this.getHorizontalLeftRightCell(l,s,!1):n,sf.base.isNullOrUndefined(n)||this.selectCells(t,n)}else if(!t&&h&&d.getTime()!==v(this.parent.activeView.getStartDate()).getTime())return void this.selectCells(t,this.parent.element.querySelector('[data-date="'+(d.getTime()-864e5)+'"]'))}else if(s.classList.contains("e-all-day-cells")){var p=s.cellIndex,u=this.parent.getAllDayRow(),f=u.cells.length;p>0&&p<f&&this.selectCells(t,u.cells[p-1])}}},i.prototype.preventYearNavigation=function(){return"Year"===this.parent.options.currentView&&this.initialTarget.classList.contains("e-other-month")},i.prototype.getTimelineYearTargetCell=function(e,t,i){return this.isInverseTableSelect()?this.getVerticalLeftRightCell(t,i):this.getHorizontalLeftRightCell(e,t,i)},i.prototype.getHorizontalLeftRightCell=function(e,t,i){var n=e.element.rows[t.parentNode.sectionRowIndex+(i?1:-1)];if(n){var s=i?".e-work-cells:not(.e-other-month)":'[data-date="'+(+t.getAttribute("data-date")-864e5)+'"]';return n.querySelector(s)}return t},i.prototype.getVerticalLeftRightCell=function(e,t){var i=new Date(+e.getAttribute("data-date")),n=v(new Date(i.getFullYear(),i.getMonth()+(t?1:-1),1)),s=this.parent.getContentTable(),o=s.querySelector('[data-date="'+n.getTime()+'"]');return o.parentNode.sectionRowIndex>e.parentNode.sectionRowIndex?o:s.querySelector('[data-date="'+v(a(n)).getTime()+'"]')},i.prototype.calculateNextPrevDate=function(e,t,i){var n=this.initialTarget.getAttribute("data-group-index");if(this.parent.activeViewOptions.group.resources.length>0&&"Month"===this.parent.options.currentView&&e&&t&&t.getAttribute("data-group-index")!==n){var s=this.parent.getDateFromElement(e),o="right"===i?new Date(s.setDate(s.getDate()+1)):new Date(s.setDate(s.getDate()-1));t=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+this.parent.getMsFromDate(o).toString()+'"][data-group-index="'+n+'"]'))[0]}return t},i.prototype.getFocusableElements=function(e){return[].slice.call(e.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'))},i.prototype.processTabOnPopup=function(e,t){var i=this,n=this.getFocusableElements(t),s=(n=n.filter((function(e){var t=i.parent.element.querySelector(".e-popup-footer");return t&&t.offsetParent?!(e.classList.contains("e-edit")||e.classList.contains("e-delete")):!(e.classList.contains("e-event-edit")||e.classList.contains("e-event-delete"))})))[0],o=n[n.length-1];sf.base.isNullOrUndefined(o)||document.activeElement!==o||e.shiftKey||(e.preventDefault(),s.focus()),!sf.base.isNullOrUndefined(s)&&document.activeElement===s&&e.shiftKey&&(e.preventDefault(),o.focus())},i.prototype.processTab=function(t,i){var n=t.target;if(n.classList.contains("e-inline-subject")&&this.parent.inlineEdit&&(n=n.closest(".e-appointment"),this.parent.inlineCrudActions(t.target)),"TimelineYear"===this.parent.options.currentView&&n.classList.contains("e-other-month"))n.classList.contains("e-selected-cell")&&this.parent.removeSelectedClass();else{var s=sf.base.closest(n,".e-quick-popup-wrapper,.e-more-popup-wrapper");if(s&&s.classList.contains(e))return s.classList.contains("e-more-popup-wrapper")&&this.parent.eventBase.removeSelectedAppointmentClass(),void this.processTabOnPopup(t,s);if(n.classList.contains("e-resource-cells")&&this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0){var o=parseInt(n.getAttribute("data-group-index"),10),r='.e-appointment[data-group-index="'+(i?o-1:o)+'"]',a=[].slice.call(this.parent.element.querySelectorAll(r));if(a.length>0){this.parent.eventBase.removeSelectedAppointmentClass();var l=i?a.slice(-1)[0]:a[0];this.parent.eventBase.addSelectedAppointments([l]),l.focus(),t.preventDefault()}else if(o===parseInt(this.parent.element.querySelector(".e-resource-column-wrap").getAttribute("data-rendered-index"),10))this.parent.element.focus(),t.preventDefault();else if(this.parent.virtualScrollModule){var d=this.parent.element.querySelector(".e-virtual-track"),h=Math.round(d.offsetHeight/parseInt(this.parent.element.querySelector(".e-resource-column-wrap").getAttribute("data-expanded-index"),10));this.parent.element.querySelector(".e-content-wrap").scrollTop=(i?o-1:o+1)*h,this.parent.virtualScrollModule.virtualScrolling()}else this.setScrollPosition(o)}else if(n.classList.contains("e-schedule"))this.parent.eventBase.removeSelectedAppointmentClass();else if(n.classList.contains("e-appointment")){var c=[].slice.call(this.parent.element.querySelectorAll(".e-appointment")),p=this.parent.eventBase.getSelectedAppointments(),u="TimelineYear"===this.parent.options.currentView;if((this.parent.isTimelineView()&&!u||u&&"Vertical"===this.parent.activeViewOptions.orientation)&&this.parent.activeViewOptions.group.resources.length>0){o=parseInt(n.getAttribute("data-group-index"),10);c=[].slice.call(this.parent.element.querySelectorAll('.e-appointment[data-group-index="'+o+'"]'));var f='.e-resource-cells[data-group-index="'+(i?o:o+1)+'"]',m=this.parent.element.querySelector(f);if(m&&(i&&n.getAttribute("data-guid")===c[0].getAttribute("data-guid")||!i&&n.getAttribute("data-guid")===c.slice(-1)[0].getAttribute("data-guid")))return this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.virtualScrollModule?m.focus({preventScroll:!0}):m.focus(),this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&sf.base.isNullOrUndefined(this.parent.virtualScrollModule)&&this.setScrollPosition(o),void t.preventDefault()}if(p.length>0&&(n=p[p.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!i&&n.getAttribute("data-guid")===c[c.length-1].getAttribute("data-guid")||i&&n.getAttribute("data-guid")===c[0].getAttribute("data-guid"))return;"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||(this.selectAppointment(i,n),t.preventDefault())}else{var g=this.parent.getSelectedElements();if(g.length>0&&!n.classList.contains("e-appointment"))return n=g[g.length-1],this.selectAppointmentElementFromWorkCell(i,n),void t.preventDefault();n&&!n.classList.contains("e-resource-cells")&&this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&this.processTabOnResourceCells(n,i)}}},i.prototype.processDelete=function(){var e=document.activeElement;if("MonthAgenda"===this.parent.options.currentView){var i=this.parent.eventBase.getSelectedEvents().element;i&&(e=i&&sf.base.isNullOrUndefined(i.length)?i:i[0])}if(e&&e.classList.contains("e-appointment")){if(sf.base.addClass([e],t),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.activeViewOptions.readonly||e.classList.contains("e-read-only"))return;this.parent.dotNetRef.invokeMethodAsync("ProcessDelete",this.parent.activeEventData.guid)}},i.prototype.processEscape=function(){this.parent.onClosePopup(),this.parent.onMoreEventPopupClose(),this.parent.headerPopup&&this.parent.headerPopup.hide(),this.parent.inlineModule&&this.parent.inlineModule.removeInlineAppointmentElement()},i.prototype.isPreventAction=function(e){var t=sf.base.closest(e.target,".e-resource-group-cells");return!(!this.parent.isTimelineView()||sf.base.isNullOrUndefined(t))},i.prototype.processTabOnResourceCells=function(e,t){var i=[].slice.call(this.parent.element.querySelectorAll('[tabIndex="0"]')),n=i.indexOf(e),s=t?i[n-1]:i[n+1];if(s&&s.classList.contains("e-resource-cells")){var o=parseInt(s.getAttribute("data-group-index"),10);if(this.parent.virtualScrollModule){var r=this.parent.element.querySelector(".e-resource-column-wrap");[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells")).forEach((function(e){e.getBoundingClientRect().top<r.getBoundingClientRect().top&&e.setAttribute("tabindex","-1")}))}else this.setScrollPosition(o)}},i.prototype.setScrollPosition=function(e){var t=this.parent.element.querySelector('.e-work-cells[data-group-index="'+e+'"]');t&&(this.parent.element.querySelector(".e-content-wrap").scrollTop=t.offsetTop)},i.prototype.destroy=function(){this.keyboardModule.destroy()},i}(),ee=function(){function e(e){this.daysVariation=0,this.parent=e,this.actionObj={X:0,Y:0,groupIndex:0,cellWidth:0,cellHeight:0,slotInterval:0,interval:0,actionIndex:0,cloneElement:[],originalElement:[],action:null,isAllDay:null,excludeSelectors:null,index:0,navigationInterval:null,scrollInterval:null},this.scrollArgs={element:null,width:0,height:0},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1}}return e.prototype.calculateIntervalTime=function(e){var t=new Date(+e);return t.setMinutes(Math.floor(t.getMinutes()/this.actionObj.interval)*this.actionObj.interval),t},e.prototype.getContentAreaDimension=function(){var e=this.parent.element.querySelector(".e-content-wrap"),t=[].slice.call(e.querySelector("tr").children);!this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(t=this.getResourceElements(t));var i=t[0].getBoundingClientRect(),n=t.slice(-1)[0].getBoundingClientRect();return{bottom:e.scrollHeight-5,left:this.parent.options.enableRtl?n.left:i.left,right:this.parent.options.enableRtl?i.right:n.right,top:0}},e.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},e.prototype.getIndex=function(e){var t=[].slice.call(this.parent.getContentTable().querySelector("tr").children),i={minIndex:0,maxIndex:t.length-1};if("resize"===this.actionObj.action&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&!this.parent.isTimelineView()){var n=this.getResourceElements(t);i.minIndex=n[0].cellIndex,i.maxIndex=n.slice(-1)[0].cellIndex}return e<i.minIndex&&(e=i.minIndex),e>i.maxIndex&&(e=i.maxIndex),e},e.prototype.updateTimePosition=function(e,t){for(var i=0,n=0,s=this.actionObj.cloneElement;n<s.length;n++){var o=s[n].querySelector(".e-time");if(o){var r=this.actionObj.start,a=this.actionObj.end;t&&t.length>0&&i<t.length&&(r=t[i].startTime,a=t[i].endTime),o.innerHTML=this.parent.getTimeString(r)+" - "+this.parent.getTimeString(a)}i++}if(this.parent.activeViewOptions.timeScale.enable&&this.parent.isAdaptive&&"Month"!==this.parent.options.currentView&&"TimelineMonth"!==this.parent.options.currentView){var l=this.parent.element.querySelector(".e-clone-time-indicator");if(!l){l=sf.base.createElement("div",{className:"e-clone-time-indicator"});var d=this.parent.isTimelineView()?"e-date-header-wrap":"e-time-cells-wrap";this.parent.element.querySelector("."+d).appendChild(l)}l.innerHTML=this.parent.getTimeString(e);var h=0;if(this.parent.isTimelineView())if(this.parent.options.enableRtl){var c=parseInt(this.actionObj.clone.style.right,10);h="drag"===this.actionObj.action||this.resizeEdges.left?c+this.actionObj.clone.offsetWidth:c,l.style.right=sf.base.formatUnit(h)}else{var p=parseInt(this.actionObj.clone.style.left,10);h="drag"===this.actionObj.action||this.resizeEdges.left?p:p+this.actionObj.clone.offsetWidth,l.style.left=sf.base.formatUnit(h)}else h="drag"===this.actionObj.action||this.resizeEdges.top?this.actionObj.clone.offsetTop:this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight,l.style.top=sf.base.formatUnit(h)}},e.prototype.getResourceElements=function(e){var t=this;return e.filter((function(e){return parseInt(e.getAttribute("data-group-index"),10)===t.actionObj.groupIndex}))},e.prototype.getOriginalElement=function(e){var t,i=e.getAttribute("data-guid");if(e.offsetParent&&e.offsetParent.classList.contains("e-more-event-popup")||this.parent.isTimelineView())t=[].slice.call(this.parent.element.querySelectorAll('[data-guid="'+i+'"]'));else{var n=sf.base.closest(e,"tr");t=[].slice.call(n.querySelectorAll('[data-guid="'+i+'"]'))}return t},e.prototype.createCloneElement=function(e){var t=sf.base.createElement("div",{innerHTML:e.outerHTML}).children[0],i=["e-schedule-event-clone"];return i.push("drag"===this.actionObj.action?"e-drag-clone":"e-resize-clone"),"Month"!==this.parent.options.currentView&&"TimelineMonth"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)||i.push("e-month-event"),sf.base.addClass([t],i),sf.base.addClass([e],"e-event-action"),sf.base.isNullOrUndefined(e.parentElement)||e.parentElement.appendChild(t),t.style.width=sf.base.formatUnit(t.offsetWidth-2),this.parent.options.eventDragArea&&"drag"===this.actionObj.action&&document.querySelector(this.parent.options.eventDragArea).appendChild(t),sf.base.setStyleAttribute(t,{border:"0px"}),""!==e.style.backgroundColor&&sf.base.setStyleAttribute(t,{backgroundColor:e.style.backgroundColor}),t},e.prototype.removeCloneElementClasses=function(){var e=this.actionObj.originalElement;"Month"!==this.parent.options.currentView&&"TimelineYear"!==this.parent.options.currentView&&"Day"!==this.parent.options.currentView&&"Week"!==this.parent.options.currentView&&"WorkWeek"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)||(e=[].slice.call(this.parent.element.querySelectorAll(".e-event-action,."+t))),sf.base.removeClass(e,["e-event-action",t])},e.prototype.removeCloneElement=function(){this.actionObj.originalElement=[];for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));e<t.length;e++){var i=t[e];sf.base.remove(i)}for(var n=0,s=this.actionObj.cloneElement;n<s.length;n++){var o=s[n];sf.base.isNullOrUndefined(o.parentNode)||sf.base.remove(o)}this.actionObj.cloneElement=[];var r=this.parent.element.querySelector(".e-clone-time-indicator");r&&sf.base.remove(r)},e.prototype.getCursorElement=function(e){var t=this.getPageCoordinates(e);return document.elementFromPoint(t.clientX,t.clientY)},e.prototype.autoScroll=function(){var e=this.parent.element.querySelector(".e-content-wrap"),t=e.offsetHeight<=e.scrollHeight,i=e.offsetWidth<=e.scrollWidth,n=t&&e.scrollTop>=0&&e.scrollTop+e.offsetHeight<=e.scrollHeight,s=i&&e.scrollLeft>=0&&e.scrollLeft+e.offsetWidth<=e.scrollWidth;n&&(this.scrollEdges.top||this.scrollEdges.bottom)&&(e.scrollTop+=this.scrollEdges.top?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollHeight!==e.offsetHeight+e.scrollTop&&e.scrollTop>0&&(this.actionObj.Y+=this.scrollEdges.top?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy)),s&&(this.scrollEdges.left||this.scrollEdges.right)&&(e.scrollLeft+=this.scrollEdges.left?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollWidth!==e.offsetWidth+e.scrollLeft&&e.scrollLeft>0&&(this.actionObj.X+=this.scrollEdges.left?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy))},e.prototype.autoScrollValidation=function(){if(!this.actionObj.scroll.enable)return!1;var e=this.parent.boundaryValidation(this.actionObj.pageY,this.actionObj.pageX);return this.scrollEdges=e,e.bottom||e.top||e.left||e.right},e.prototype.actionClass=function(e){"addClass"===e?sf.base.addClass([this.parent.element],"e-event-action"):sf.base.removeClass([this.parent.element],"e-event-action")},e.prototype.updateScrollPosition=function(){var e=this;this.actionObj.scroll.enable&&sf.base.isNullOrUndefined(this.actionObj.scrollInterval)&&(this.actionObj.scrollInterval=window.setInterval((function(){if(e.autoScrollValidation()&&!e.actionObj.clone.classList.contains("e-all-day-appointment")){if(e.parent.isTimelineView()&&e.parent.activeViewOptions.group.resources.length>0&&e.actionObj.groupIndex<0)return;e.autoScroll(),e.actionObj.action}}),this.actionObj.scroll.timeDelay))},e.prototype.updateOriginalElement=function(e){var t='[data-id="'+e.getAttribute("data-id")+'"]';this.parent.activeViewOptions.group.resources.length>0&&(t=t.concat('[data-group-index = "'+e.getAttribute("data-group-index")+'"]'));var i=[].slice.call(this.parent.element.querySelectorAll(t));sf.base.addClass(i,"e-event-action");var n=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));sf.base.removeClass(n,"e-event-action")},e.prototype.getUpdatedEvent=function(e,t,i){var n=JSON.parse(JSON.stringify(i));return n.startTime=e,n.endTime=t,n},e.prototype.dynamicYearlyEventsRendering=function(e,t,i){void 0===t&&(t=!1);var n=v(l(e.startTime)).getTime(),s='.e-work-cells[data-date="'+n+'"]';this.parent.activeViewOptions.group.resources.length>0&&(s='.e-work-cells[data-date="'+n+'"][data-group-index="'+this.actionObj.groupIndex+'"]');var o=this.parent.element.querySelector(s);if(!sf.base.isNullOrUndefined(o)){var r=this.actionObj.cellWidth-7;t&&(this.resizeEdges.left||this.resizeEdges.right)&&(r=this.actionObj.cellWidth*e.count);var a=this.createAppointmentElement(this.actionObj.groupIndex,i),d=o.querySelector(".e-date-header"),h=d?g(d):0;if(sf.base.setStyleAttribute(a,{overflow:"hidden",padding:"3px",position:"absolute",width:r+"px",top:h+"px"}),t){var c=this.actionObj.cellHeight*e.count-h-7;(this.resizeEdges.right||this.resizeEdges.left)&&(c=parseInt(this.actionObj.clone.style.height,10)),sf.base.setStyleAttribute(a,{height:c+"px"})}var p=o.parentElement.sectionRowIndex,u=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container"))[p];this.renderCloneElement(u,a,o,i)}},e.prototype.dynamicEventsRendering=function(e,t){var i=this.parent.activeView.renderDates.slice(0),n=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells")),s=this.parent.activeViewOptions.workDays;if(this.parent.activeViewOptions.group.resources.length>0){var o='.e-work-cells[data-group-index="'+this.actionObj.groupIndex+'"]',r=(n=[].slice.call(this.parent.element.querySelectorAll(o)))[0].querySelectorAll('[data-group-index="'+this.actionObj.groupIndex+'"]').length,a=0;n.length>0&&(i=[]);for(var d=0,h=n;d<h.length;d++){var c=h[d];i.push(this.parent.getDateFromElement(c)),a<r&&(s.push(i[a].getDay()),a++)}}if(this.monthEvent.dateRender=i,this.monthEvent.getSlotDates(s),this.resizeEdges.left||this.resizeEdges.right)for(var p=0,u=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));p<u.length;p++){var f=u[p];sf.base.remove(f)}for(var m=0,v=this.monthEvent.splitEvent(e,i);m<v.length;m++){var b=v[m],y=n[this.parent.getIndexOfDate(i,l(b.startTime))];if(!sf.base.isNullOrUndefined(y)){var w=b.data.count*this.actionObj.cellWidth-7,C=this.createAppointmentElement(this.actionObj.groupIndex,t),S=y.querySelector(".e-date-header"),E=S?y.offsetTop+g(S):y.offsetTop,x=parseInt(y.getAttribute("data-group-index")),O=isNaN(x)?".e-appointment-container":'.e-appointment-container[data-group-index="'+x+'"]';sf.base.setStyleAttribute(C,{width:w+"px",top:E+"px"});var T=this.parent.element.querySelector(O);this.renderCloneElement(T,C,y,t)}}},e.prototype.renderCloneElement=function(e,t,i,n){if(e){t.setAttribute("drag","true"),sf.base.addClass([t],"e-schedule-event-clone");var s=n||this.actionObj.clone;""!==s.style.backgroundColor&&sf.base.setStyleAttribute(t,{backgroundColor:s.style.backgroundColor}),sf.base.addClass([t],[].slice.call(s.classList)),t.classList.remove("e-event-action");var o=0,r=0;this.parent.options.enableRtl?r=i.parentElement.offsetWidth-i.offsetLeft-i.offsetWidth:o=i.offsetLeft,sf.base.setStyleAttribute(t,{left:o+"px",right:r+"px",border:"0px","pointer-events":"none"});var a=e.querySelector(".e-appointment-wrapper");a||(a=sf.base.createElement("div",{className:"e-appointment-wrapper"}),e.appendChild(a)),a.appendChild(t),this.actionObj.cloneElement.push(a)}},e.prototype.getReadonlyAttribute=function(e){return e.getAttribute("aria-disabled")},e.prototype.createAppointmentElement=function(e,t){var i=sf.base.isNullOrUndefined(this.cloneEventDetail)?"":this.cloneEventDetail.outerHTML;t&&(i=(t.querySelector(".e-appointment-details")||t.querySelector(".e-subject")).outerHTML);var n=sf.base.createElement("div",{className:"e-appointment",innerHTML:i});return this.parent.activeViewOptions.group.resources.length>0&&n.setAttribute("data-group-index",e.toString()),n},e.prototype.destroy=function(){this.parent.isDestroyed||(this.actionObj={},this.scrollArgs={},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1})},e}(),te=(k=function(e,t){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}k(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype.wireResizeEvent=function(e){for(var t=0,i=[].slice.call(e.querySelectorAll(".e-event-resize"));t<i.length;t++){var n=i[t];sf.base.EventHandler.clearEvents(n),sf.base.EventHandler.add(n,sf.base.Browser.touchStartEvent,this.resizeStart,this)}},t.prototype.resizeHelper=function(){if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit)for(var e=0,t=this.actionObj.originalElement.length;e<t;e++){var i=this.createCloneElement(this.actionObj.originalElement[e]);this.actionObj.cloneElement[e]=i,this.actionObj.element===this.actionObj.originalElement[e]&&(this.actionObj.clone=i)}else this.actionObj.clone=this.createCloneElement(this.actionObj.element),this.actionObj.cloneElement=[this.actionObj.clone],this.actionObj.originalElement=[this.actionObj.element]},t.prototype.resizeStart=function(e){var t=this;this.actionObj.action="resize",this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var i=sf.base.closest(e.target,".e-event-resize");this.actionObj.element=sf.base.closest(i,".e-appointment");var n=this.actionObj.element.getAttribute("data-guid"),s={cancel:!1,interval:Math.round(this.actionObj.interval),scroll:{enable:!0,scrollBy:30,timeDelay:100}};this.parent.dotNetRef.invokeMethodAsync("OnResizeStart",s,n).then((function(n){var s=n.resizeEventArgs;Math.round(t.actionObj.interval)===s.interval&&(s.interval=t.actionObj.interval),t.actionObj.event=sf.base.extend({},n,null,!0),delete t.actionObj.event.resizeEventArgs,t.actionObj.event.startTime=new Date(t.actionObj.event.startTime),t.actionObj.event.endTime=new Date(t.actionObj.event.endTime);var o=sf.base.extend({},t.actionObj.event,null,!0);if(!s.cancel){t.actionClass("addClass"),t.parent.uiStateValues.action=!0,t.resizeEdges={left:i.classList.contains("e-left-handler"),right:i.classList.contains("e-right-handler"),top:i.classList.contains("e-top-handler"),bottom:i.classList.contains("e-bottom-handler")},t.actionObj.groupIndex=t.parent.uiStateValues.isGroupAdaptive?t.parent.uiStateValues.groupIndex:0;var r=t.parent.element.querySelector(".e-work-cells").getBoundingClientRect();t.actionObj.cellWidth=r.width,t.actionObj.cellHeight=r.height;var a=t.parent.activeViewOptions.headerRows.map((function(e){return e.option}));if(t.parent.isTimelineView()&&a.length>0&&["Date","Hour"].indexOf(a.slice(-1)[0])<0){for(var l=t.parent.getContentTable().querySelector("tr"),d=0,h=0,c=[].slice.call(l.children);h<c.length;h++){var p=c[h];d+=parseInt(p.getAttribute("colspan"),10)}var u=l.getBoundingClientRect();t.actionObj.cellWidth=u.width/d,t.actionObj.cellHeight=u.height}var f=t.getPageCoordinates(e);t.actionObj.X=f.pageX,t.actionObj.Y=f.pageY,t.actionObj.groupIndex=parseInt(t.actionObj.element.getAttribute("data-group-index")||"0",10),t.actionObj.interval=s.interval,t.actionObj.scroll=s.scroll,t.actionObj.start=o.startTime,t.actionObj.end=o.endTime,t.actionObj.originalElement=t.getOriginalElement(t.actionObj.element),"Month"!==t.parent.options.currentView&&"TimelineYear"!==t.parent.options.currentView&&(t.parent.isTimelineView()||t.parent.activeViewOptions.timeScale.enable)||(t.daysVariation=-1,t.cloneEventDetail=t.actionObj.element.querySelector(".e-appointment-details"),"TimelineYear"!==t.parent.options.currentView&&(t.monthEvent=new P(t.parent)));var m=t.parent.element.querySelector(".e-content-wrap");t.scrollArgs={element:m,width:m.scrollWidth,height:m.scrollHeight},sf.base.EventHandler.add(document,sf.base.Browser.touchMoveEvent,t.resizing,t),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,t.resizeStop,t)}}))},t.prototype.resizing=function(e){if(0===this.parent.element.querySelectorAll(".e-resize-clone").length&&this.resizeHelper(),sf.base.isNullOrUndefined(e.target)||!e.target.classList.contains("e-disable-dates")){var t=this.getPageCoordinates(e);if("Month"===this.parent.options.currentView||"TimelineYear"===this.parent.options.currentView){var i=document.documentElement,n=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),s=(window.pageYOffset||i.scrollTop)-(i.clientTop||0);this.actionObj.pageX=t.pageX-n,this.actionObj.pageY=t.pageY-s}else this.actionObj.pageX=t.pageX,this.actionObj.pageY=t.pageY;this.updateScrollPosition(),this.updateResizingDirection(e)}},t.prototype.updateResizingDirection=function(e){if("Month"!==this.parent.options.currentView&&"TimelineYear"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)){var t=this.resizeValidation(e);if(this.resizeEdges.left){if(t)for(var i=this.getLeftRightStyles(e,!0),n=0,s=this.actionObj.cloneElement;n<s.length;n++){var o=s[n];sf.base.setStyleAttribute(o,i),sf.base.addClass([o],"e-left-handler")}this.horizontalResizing(!this.parent.options.enableRtl)}if(this.resizeEdges.right){if(t)for(var r=this.getLeftRightStyles(e,!1),a=0,l=this.actionObj.cloneElement;a<l.length;a++){o=l[a];sf.base.setStyleAttribute(o,r),sf.base.addClass([o],"e-right-handler")}this.horizontalResizing(this.parent.options.enableRtl)}if(this.resizeEdges.top){if(t)for(var d=this.getTopBottomStyles(e,!0),h=0,c=this.actionObj.cloneElement;h<c.length;h++){o=c[h];sf.base.setStyleAttribute(o,d),sf.base.addClass([o],"e-top-handler")}this.verticalResizing(!0)}if(this.resizeEdges.bottom){if(t)for(var p=this.getTopBottomStyles(e,!1),u=0,f=this.actionObj.cloneElement;u<f.length;u++){o=f[u];sf.base.setStyleAttribute(o,p),sf.base.addClass([o],"e-bottom-handler")}this.verticalResizing(!1)}}else this.monthResizing()},t.prototype.monthResizing=function(){this.removeCloneElement();var e=document.elementFromPoint(this.actionObj.pageX,this.actionObj.pageY);if(!sf.base.isNullOrUndefined(e)){var t=this.parent.getDateFromElement(e),i=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(e.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,n=this.actionObj.event.startTime,s=this.actionObj.event.endTime;if(!this.parent.options.enableRtl&&this.resizeEdges.left||this.parent.options.enableRtl&&this.resizeEdges.right||this.resizeEdges.top?n=t:(!this.parent.options.enableRtl&&this.resizeEdges.right||this.parent.options.enableRtl&&this.resizeEdges.left||this.resizeEdges.bottom)&&(s=h(t,1)),i&&n<s){this.actionObj.start=n,this.actionObj.end=s;var o=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);"TimelineYear"===this.parent.options.currentView?this.yearEventsRendering(o):this.dynamicEventsRendering(o),this.updateOriginalElement(this.actionObj.clone)}else if("TimelineYear"===this.parent.options.currentView)for(var r=0,a=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));r<a.length;r++){var l=a[r];this.actionObj.cloneElement.push(l)}}},t.prototype.yearEventsRendering=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));t<i.length;t++){var n=i[t];sf.base.remove(n)}var s=new Date(e.endTime),o=0;0===this.parent.activeViewOptions.group.resources.length&&(o=this.getMonthDiff(e.startTime,h(s,-1)));for(var r=0;r<=o;r++){var a=void 0;0===this.parent.activeViewOptions.group.resources.length?a=this.getEventCount(e,this.actionObj.start.getMonth()+r):(a=sf.base.extend({},e,null,!0),s=this.resizeEdges.left||this.resizeEdges.right?h(s,-1):s,a.count=this.getMonthDiff(e.startTime,s)+(this.resizeEdges.top?0:1)),this.dynamicYearlyEventsRendering(a,!0)}},t.prototype.getMonthDiff=function(e,t){var i;return i=12*(t.getFullYear()-e.getFullYear()),i-=e.getMonth(),(i+=t.getMonth())<=0?0:i},t.prototype.getEventCount=function(e,t){var i=new Date(this.parent.options.selectedDate.getFullYear(),t,1),n=h(new Date(this.parent.options.selectedDate.getFullYear(),t+1,0),1),s=sf.base.extend({},e,null,!0),o=s.startTime,r=s.endTime,a=1;return o.getTime()<i.getTime()&&(s.startTime=i),r.getTime()>n.getTime()&&(s.endTime=n),0===this.parent.activeViewOptions.group.resources.length&&(a=Math.ceil((s.endTime.getTime()-s.startTime.getTime())/864e5)),s.count=a,s},t.prototype.resizeStop=function(){sf.base.EventHandler.remove(document,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeStop),clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.removeCloneElementClasses(),this.removeCloneElement(),this.actionClass("removeClass"),this.parent.uiStateValues.action=!1;var e=this.actionObj.element.getAttribute("data-guid"),t=v(this.actionObj.start),i=v(this.actionObj.end);this.parent.dotNetRef.invokeMethodAsync("OnResizeStop",t,i,e)},t.prototype.verticalResizing=function(e){var t=this.actionObj.clone.offsetTop;e||(t+=this.actionObj.clone.offsetHeight);var i=t/this.actionObj.cellHeight*this.actionObj.slotInterval,n=this.actionObj.clone.offsetParent;if(!sf.base.isNullOrUndefined(n)){var s=l(this.parent.getDateFromElement(n));s.setHours(this.parent.activeView.getStartHour().getHours()),s.setMinutes(i+this.parent.activeView.getStartHour().getMinutes()),e?this.actionObj.start=this.calculateIntervalTime(s):this.actionObj.end=this.calculateIntervalTime(s),this.updateTimePosition(s)}},t.prototype.horizontalResizing=function(e){var t,i=this.actionObj.event.startTime,n=this.actionObj.event.endTime;if(this.parent.isTimelineView()){var s=this.parent.getContentTable().querySelector("tr"),o=this.parent.options.currentView;if(this.parent.activeViewOptions.headerRows.length>0){var r=this.parent.activeViewOptions.headerRows.map((function(e){return e.option}));o=r.slice(-1)[0],"TimelineMonth"===this.parent.options.currentView&&"Hour"===o&&(o=r.slice(-2)[0]||"Month")}t=e?i:n;var a=0,l=[].slice.call(s.children),d=!1,c=this.actionObj.cellWidth/(this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount),p=parseFloat(this.parent.options.enableRtl?this.actionObj.clone.style.right:this.actionObj.clone.style.left);if(p=Math.round(p/c)*c,-1!==["Year","Month","Week","Date"].indexOf(o)){for(var u=0,f=0,m=l;f<m.length;f++){var g=m[f];u+=parseInt(g.getAttribute("colspan"),10)}var v=this.parent.options.enableRtl?parseInt(this.actionObj.clone.style.right,10):parseInt(this.actionObj.clone.style.left,10);e||(v+=this.actionObj.clone.getBoundingClientRect().width-this.actionObj.cellWidth),a=Math.floor(v/Math.floor(s.getBoundingClientRect().width/u)),d=(a=e?a:"TimelineMonth"===this.parent.options.currentView?a+1:a)===l.length,a=a<0?0:a>=u?u-1:a}else{var b=this.actionObj.cellWidth;if(a=e?Math.floor(p/this.actionObj.cellWidth):Math.ceil((p+(this.actionObj.clone.getBoundingClientRect().width-b))/this.actionObj.cellWidth),this.parent.options.enableRtl){var y=0;("TimelineMonth"===o||!this.parent.activeViewOptions.timeScale.enable&&"TimelineMonth"!==this.parent.options.currentView)&&(y=this.actionObj.cellWidth);var w=Math.floor(p/this.actionObj.cellWidth)*this.actionObj.cellWidth+(e?0:this.actionObj.clone.getBoundingClientRect().width-y);a=Math.floor(w/this.actionObj.cellWidth)}d=a===l.length,a=this.getIndex(a)}var C=void 0;if(C=-1!==["Year","Month","Week","Date"].indexOf(o)?new Date(this.parent.activeView.renderDates[a].getTime()):this.parent.getDateFromElement(s.children[a]),-1===["TimelineMonth","Year","Month","Week","Date"].indexOf(o)&&this.parent.activeViewOptions.timeScale.enable){e||(p+=this.actionObj.clone.getBoundingClientRect().width);var S=Math.ceil(this.actionObj.slotInterval/this.actionObj.cellWidth*(p-Math.floor(p/this.actionObj.cellWidth)*this.actionObj.cellWidth));S=d||!e&&0===S?this.actionObj.slotInterval:S,(t=new Date(C.getTime())).setMinutes(t.getMinutes()+S),this.updateTimePosition(t)}else t=new Date(C.setHours(t.getHours(),t.getMinutes(),t.getSeconds()))}else{var E=sf.base.closest(this.actionObj.clone,"td").cellIndex,x=Math.ceil((e?this.actionObj.element.getBoundingClientRect().width:0)/this.actionObj.cellWidth)*this.actionObj.cellWidth,O=(u=Math.ceil((this.actionObj.clone.getBoundingClientRect().width-x)/this.actionObj.cellWidth),s=sf.base.closest(this.actionObj.clone,"tr"),e?E-u:E+u-1);O=this.parent.virtualScrollModule&&this.parent.virtualScrollModule.isHorizontalScroll&&this.parent.activeViewOptions.timeScale.enable?O:this.getIndex(O),t=this.parent.getDateFromElement(s.children[O]),e?t.setHours(i.getHours(),i.getMinutes(),i.getSeconds()):t.setHours(n.getHours(),n.getMinutes(),n.getSeconds())}if(e)this.actionObj.event.endTime.getTime()-t.getTime()<=0&&(t=new Date(this.actionObj.event.startTime.getTime())),this.actionObj.start=this.parent.activeViewOptions.timeScale.enable?this.calculateIntervalTime(t):t;else{var T=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.options.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable||0!==t.getHours()||0!==t.getMinutes()?t:h(t,1);this.actionObj.end=this.parent.activeViewOptions.timeScale.enable&&"Month"!==this.parent.options.currentView?this.calculateIntervalTime(T):T}},t.prototype.getTopBottomStyles=function(e,t){var i=this.parent.element.querySelector(".e-content-wrap"),n=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,s=t?this.actionObj.element.offsetHeight+(this.actionObj.Y-this.actionObj.pageY):this.actionObj.element.offsetHeight+(this.actionObj.pageY-this.actionObj.Y),o=t?this.actionObj.element.offsetTop-(this.actionObj.Y-this.actionObj.pageY):this.actionObj.clone.offsetTop;return s=o<0||this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight>this.scrollArgs.height?this.actionObj.clone.offsetHeight:s,o=o<0?0:o,s=(o=Math.floor(o/n)*n)+s>=i.scrollHeight?i.scrollHeight-o:Math.ceil(s/n)*n,{height:sf.base.formatUnit(s<this.actionObj.cellHeight?this.actionObj.cellHeight:s),top:sf.base.formatUnit(s<this.actionObj.cellHeight&&t?this.actionObj.clone.offsetTop:o),left:"0px",right:"0px",width:"100%"}},t.prototype.getLeftRightStyles=function(e,t){var i={},n=this.parent.isTimelineView(),s=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.options.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable,o=this.actionObj.cellWidth/this.actionObj.slotInterval*this.actionObj.interval,r=t?this.actionObj.X-this.actionObj.pageX:this.actionObj.pageX-this.actionObj.X,a=n?this.actionObj.element.getBoundingClientRect().width/this.actionObj.cellWidth*this.actionObj.cellWidth:"Month"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable?this.actionObj.element.getBoundingClientRect().width:Math.ceil(this.actionObj.element.getBoundingClientRect().width/this.actionObj.cellWidth)*this.actionObj.cellWidth,l=a+Math.ceil(r/this.actionObj.cellWidth)*this.actionObj.cellWidth,d=this.parent.options.enableRtl?parseInt(this.actionObj.element.style.right,10):this.actionObj.clone.offsetLeft;s&&(l=a+Math.ceil(r/o)*o,l=Math.round((d+l)/o)*o-d,this.actionObj.event.isAllDay=!1);var h=!t&&l+this.actionObj.clone.offsetLeft>this.scrollArgs.width?this.actionObj.clone.getBoundingClientRect().width:l<this.actionObj.cellWidth?this.actionObj.cellWidth:l;if(this.parent.options.enableRtl){var c=n?parseInt(this.actionObj.element.style.right,10):-(l-this.actionObj.cellWidth);c=n?c:t||c>0?0:c,n&&!t&&(c=(c=Math.ceil((this.actionObj.element.offsetLeft+(this.actionObj.element.getBoundingClientRect().width+(this.actionObj.pageX-this.actionObj.X)))/o)*o)<0?Math.abs(c):-c),c=c>=this.scrollArgs.width?this.scrollArgs.width-this.actionObj.cellWidth:c,i.right=sf.base.formatUnit(c),h=h+c>this.scrollArgs.width?this.actionObj.clone.getBoundingClientRect().width:h}else{var p=t?this.actionObj.element.offsetLeft-(this.actionObj.X-this.actionObj.pageX):this.parent.options.enableRtl?this.actionObj.element.offsetLeft:0;n&&(p=t?p:parseInt(this.actionObj.clone.style.left,10),p=this.parent.options.enableRtl?t?p:this.actionObj.pageX<this.actionObj.X-this.actionObj.clone.getBoundingClientRect().width?parseInt(this.actionObj.clone.style.right,10):p:t&&this.actionObj.pageX>this.actionObj.X+this.actionObj.clone.getBoundingClientRect().width&&this.actionObj.clone.getBoundingClientRect().width===this.actionObj.cellWidth?parseInt(this.actionObj.clone.style.left,10):p);var u=p;(p=n?s?t?Math.floor(p/o)*o:p:Math.floor(p/this.actionObj.cellWidth)*this.actionObj.cellWidth:Math.ceil(Math.abs(p)/this.actionObj.cellWidth)*this.actionObj.cellWidth)<0&&(p=0,h=this.actionObj.clone.getBoundingClientRect().width);var f=Math.ceil(this.actionObj.clone.getBoundingClientRect().width/this.actionObj.cellWidth)*this.actionObj.cellWidth;t&&(i.left=sf.base.formatUnit(n?p:t?u<0?-p:Math.ceil((a-f)/this.actionObj.cellWidth)*this.actionObj.cellWidth:p))}return i.width=sf.base.formatUnit(h),i},t.prototype.resizeValidation=function(e){var t=this.getPageCoordinates(e),i=this.getContentAreaDimension(),n=!1;return this.resizeEdges.left&&(n=t.pageX-this.actionObj.cellWidth>=i.left),this.resizeEdges.right&&(n=t.pageX+this.actionObj.cellWidth<=i.right),this.resizeEdges.top&&(n=this.actionObj.clone.offsetTop>=i.top),this.resizeEdges.bottom&&(n=this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight<=this.scrollArgs.height),n},t}(ee),ne=(I=function(e,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=0,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.widthPerMinute=0,t.heightPerMinute=0,t.minDiff=0,t.isStepDragging=!1,t.isMorePopupOpened=!1,t.isAllDayDrag=!1,t.isMultiSelect=!1,t.multiData=[],t.updatedData=[],t.swagData=[],t.startTime=0,t.isAllDayTarget=!1,t.targetTd=null,t.cloneElements=[],t}return ne(t,e),t.prototype.wireDragEvent=function(e){e.ej2_instances&&[].slice.call(e.ej2_instances).forEach((function(e){return e.destroy()}));var t=new sf.base.Draggable(e,{abort:".e-event-resize",clone:!0,isDragScroll:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!!this.parent.options.eventDragArea,cursorAt:this.parent.options.eventDragArea?{left:-20,top:-20}:{left:0,top:0},dragArea:this.parent.options.eventDragArea?document.querySelector(this.parent.options.eventDragArea):this.parent.element.querySelector(".e-content-table"),distance:5,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this),queryPositionInfo:this.dragPosition.bind(this)});t.enableTapHold&&sf.base.Browser.isDevice&&sf.base.Browser.isTouch||sf.base.EventHandler.remove(e,"touchstart",t.initialize)},t.prototype.dragHelper=function(e){var t=this;this.setDragActionDefaultValues(),this.actionObj.element=e.element,this.actionObj.action="drag";var i=[];return!this.parent.options.allowMultiDrag||sf.base.isNullOrUndefined(this.parent.selectedElements)||0===this.parent.selectedElements.length||this.parent.selectedElements.length>0&&-1===this.parent.selectedElements.indexOf(this.actionObj.element)?i=[e.element]:(i=this.parent.selectedElements,this.isMultiSelect=!0),i.forEach((function(e){var i=t.createCloneElement(e);e.getAttribute("data-guid")===t.actionObj.element.getAttribute("data-guid")&&(t.actionObj.clone=i,t.parent.options.eventDragArea||"Month"===t.parent.options.currentView||!t.parent.activeViewOptions.timeScale.enable||t.parent.isTimelineView()||t.actionObj.element.classList.contains("e-all-day-appointment")||sf.base.setStyleAttribute(t.actionObj.clone,{cursor:"move",left:"0%",right:"0%",width:"100%"}),t.actionObj.clone.style.top=sf.base.formatUnit(t.actionObj.element.offsetTop)),t.actionObj.cloneElement.push(i),t.cloneElements.push(i),t.actionObj.originalElement.push(e)})),this.actionObj.clone},t.prototype.dragPosition=function(e){if(this.parent.options.eventDragArea)return{left:e.left,top:e.top};var t,i=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,n=sf.base.formatUnit(0);if((this.parent.isTimelineView()||"Month"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable)&&(n=sf.base.formatUnit(this.actionObj.clone.offsetLeft)),"Month"===this.parent.options.currentView||this.parent.isTimelineView()||!this.parent.activeViewOptions.timeScale.enable||!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup"))t=sf.base.formatUnit(this.actionObj.clone.offsetTop);else if(this.actionObj.clone.classList.contains("e-all-day-appointment"))t=sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop),sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(Math.ceil(this.actionObj.clone.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth),right:this.parent.options.enableRtl&&sf.base.formatUnit(0)});else{this.actionObj.element.classList.contains("e-all-day-appointment")&&!this.actionObj.clone.classList.contains("e-all-day-appointment")&&sf.base.setStyleAttribute(this.actionObj.clone,{height:sf.base.formatUnit(this.actionObj.cellHeight),width:sf.base.formatUnit(this.actionObj.cellWidth-1),pointerEvents:"none"});var s=parseInt(e.top,10);s=s<0?0:s,t=sf.base.formatUnit(Math.ceil(s/i)*i);var o=this.parent.element.querySelector(".e-content-wrap").scrollHeight,r=parseInt(t,10)+this.actionObj.clone.offsetHeight;r>o&&(t=parseInt(t,10)-(r-o)+"px")}return{left:n,top:t}},t.prototype.setDragActionDefaultValues=function(){this.actionObj.action="drag",this.actionObj.isAllDay=null,this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var e=this.parent.element.querySelector(".e-work-cells");this.actionObj.cellWidth=e.offsetWidth,this.actionObj.cellHeight=e.offsetHeight},t.prototype.dragStart=function(e){var t=this,i=[],n=this.actionObj.element.getAttribute("data-guid");this.isMultiSelect&&this.parent.selectedElements.forEach((function(e){var t=e.getAttribute("data-guid");-1===i.indexOf(t)&&i.push(t)}));var s={cancel:!1,excludeSelectors:null,interval:Math.round(this.actionObj.interval),navigation:{enable:!1,timeDelay:2e3},scroll:{enable:!0,scrollBy:30,timeDelay:100},left:e.event.clientX,top:e.event.clientY};this.parent.uiStateValues.action=!0,this.parent.dotNetRef.invokeMethodAsync("OnDragStart",s,n,i).then((function(i){var n=i.dragEventArgs;Math.round(t.actionObj.interval)===n.interval&&(n.interval=t.actionObj.interval),t.actionObj.isAllDay=i.isAllDay,t.actionObj.event=sf.base.extend({},i,null,!0),delete t.actionObj.event.dragEventArgs,t.actionObj.event.startTime=new Date(t.actionObj.event.startTime),t.actionObj.event.endTime=new Date(t.actionObj.event.endTime);var s=sf.base.extend({},t.actionObj.event,null,!0);if(n.cancel||!sf.base.isNullOrUndefined(t.actionObj.element)&&sf.base.isNullOrUndefined(t.actionObj.element.parentElement)){var o=t.actionObj.element.ej2_instances[0];return sf.base.isNullOrUndefined(o)||o.intDestroy(e.event),t.actionObj.action="",t.removeCloneElementClasses(),t.removeCloneElement(),void(t.parent.uiStateValues.action=!1)}e.bindEvents(e.dragElement),t.actionClass("addClass"),t.isMultiSelect&&!sf.base.isNullOrUndefined(i.selectedData)&&(delete t.actionObj.event.selectedData,delete s.selectedData,t.startTime=s.startTime.getTime(),t.getSelectedData(i.selectedData)),t.parent.uiStateValues.action=!0,t.actionObj.start=s.startTime,t.actionObj.end=s.endTime,t.actionObj.groupIndex=parseInt(t.actionObj.element.getAttribute("data-group-index")||"0",10),t.actionObj.interval=n.interval,t.actionObj.navigation=n.navigation,t.actionObj.scroll=n.scroll,t.actionObj.excludeSelectors=n.excludeSelectors;var r=t.parent.element.querySelector(".e-content-wrap");if(t.scrollArgs={element:r,width:r.scrollWidth,height:r.scrollHeight},t.widthPerMinute=t.actionObj.cellWidth/t.actionObj.slotInterval*t.actionObj.interval,t.heightPerMinute=t.actionObj.cellHeight/t.actionObj.slotInterval*t.actionObj.interval,t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=-1,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.minDiff=0,t.isMorePopupOpened=!1,t.daysVariation=-1,t.isAllDayTarget=t.actionObj.clone.classList.contains("e-all-day-appointment"),t.parent.isTimelineView()||!t.parent.activeViewOptions.timeScale.enable){!sf.base.isNullOrUndefined(t.actionObj.clone.offsetParent)&&t.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")&&(t.isMorePopupOpened=!0);var a=t.parent.activeViewOptions.headerRows;t.isHeaderRows=a.length>0&&"Hour"!==a[a.length-1].option&&"Date"!==a[a.length-1].option,t.isTimelineDayProcess=!t.parent.activeViewOptions.timeScale.enable||t.isHeaderRows||"TimelineMonth"===t.parent.options.currentView||a.length>0&&"Date"===a[a.length-1].option,t.isStepDragging=!t.isTimelineDayProcess&&t.actionObj.slotInterval!==t.actionObj.interval,t.isTimelineDayProcess?t.timelineEventModule=new U(t.parent,"day"):t.timelineEventModule=new U(t.parent,"hour")}if("Month"===t.parent.options.currentView||"TimelineYear"===t.parent.options.currentView||!t.parent.isTimelineView()&&!t.parent.activeViewOptions.timeScale.enable){t.startTime=l(new Date(t.startTime)).getTime(),t.updateOriginalElement(t.actionObj.clone);var d=t.actionObj.clone.querySelector(".e-appointment-details");t.cloneEventDetail=d||t.actionObj.clone.querySelector(".e-subject"),t.monthEvent=new P(t.parent)}"Day"!==t.parent.options.currentView&&"Week"!==t.parent.options.currentView&&"WorkWeek"!==t.parent.options.currentView||(t.verticalEvent=new L(t.parent),t.splitEvent(t.actionObj.event).forEach((function(e){var i='.e-day-wrapper[data-date="'+v(l(e.startTime)).getTime()+'"]';t.parent.activeViewOptions.group.resources.length>0&&(i=i.concat('[data-group-index = "'+t.actionObj.groupIndex+'"]'));var n=t.parent.element.querySelector(i);if(n){var s=n.querySelector('[data-guid="'+t.actionObj.clone.getAttribute("data-guid")+'"]');s&&sf.base.addClass([s],"e-event-action")}})))}))},t.prototype.getSelectedData=function(e){var t=this;e.forEach((function(e){e.startTime=new Date(e.startTime),e.endTime=new Date(e.endTime),t.multiData.push(e)}))},t.prototype.drag=function(e){if(this.parent.onQuickPopupClose(this.isMultiSelect),sf.base.isNullOrUndefined(e.target)||!e.target.classList.contains("e-disable-dates")){var t=sf.base.extend({},this.actionObj.event,null,!0),i=this.getPageCoordinates(e);if(this.actionObj.Y=this.actionObj.pageY=i.pageY,this.actionObj.X=this.actionObj.pageX=i.pageX,this.actionObj.target=e.target,this.widthUptoCursorPoint=0===this.widthUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().left-this.actionObj.X)/this.widthPerMinute)*this.widthPerMinute:this.widthUptoCursorPoint,this.widthUptoCursorPoint=this.isMorePopupOpened?this.actionObj.cellWidth:this.widthUptoCursorPoint,this.heightUptoCursorPoint=0===this.heightUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().top-this.actionObj.Y)/this.heightPerMinute)*this.heightPerMinute:this.heightUptoCursorPoint,this.isAllDayDrag=this.parent.activeViewOptions.timeScale.enable?this.actionObj.clone.classList.contains("e-all-day-appointment"):this.actionObj.event.isAllDay,this.isStepDragging&&0===this.minDiff&&this.calculateMinutesDiff(t),("Month"===this.parent.options.currentView||this.isAllDayDrag)&&this.daysVariation<0){var n=this.parent.getDateFromElement(this.actionObj.target);if(sf.base.isNullOrUndefined(n))this.daysVariation=0;else{var s=l(n),o=l(t.startTime);this.daysVariation=(s.getTime()-o.getTime())/864e5}}else this.daysVariation=0;if(this.parent.options.eventDragArea){var r=i.target;this.actionObj.clone.style.top=sf.base.formatUnit(r.offsetTop),this.actionObj.clone.style.left=sf.base.formatUnit(r.offsetLeft),sf.base.closest(r,".e-schedule")?"Week"!==this.parent.options.currentView&&"WorkWeek"!==this.parent.options.currentView&&"Day"!==this.parent.options.currentView&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.element.offsetWidth)):(this.actionObj.clone.style.height="",this.actionObj.clone.style.width="")}this.updateScrollPosition(),this.updateNavigatingPosition(e),this.updateDraggingDateTime(e);var a={data:t,event:e,element:this.actionObj.element,startTime:this.actionObj.start,endTime:this.actionObj.end};this.parent.activeViewOptions.group.resources.length>0&&(a.groupIndex=this.actionObj.groupIndex)}},t.prototype.calculateMinutesDiff=function(e){this.parent.options.enableRtl?this.minDiff=(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint)/this.widthPerMinute*this.actionObj.interval:this.minDiff=this.widthUptoCursorPoint/this.widthPerMinute*this.actionObj.interval;var t=e.startTime,i=p(this.parent.activeView.renderDates[0],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour());i.startHour.getTime()>t.getTime()&&(this.minDiff=this.minDiff+(i.startHour.getTime()-t.getTime())/6e4)},t.prototype.dragStop=function(e){if(this.removeCloneElementClasses(),this.removeCloneElement(),clearInterval(this.actionObj.navigationInterval),this.actionObj.navigationInterval=null,clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.actionClass("removeClass"),this.parent.uiStateValues.action=!1,this.actionObj.action=null,!this.isAllowDrop(e)){var t=this.actionObj.element.getAttribute("data-guid"),i=v(this.actionObj.start),n=v(this.actionObj.end),s=[];this.updatedData.length>0&&this.updatedData.forEach((function(e){s.push({startTime:v(e.startTime),endTime:v(e.endTime),isAllDay:e.isAllDay,guid:e.guid})}));var o=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(this.actionObj.element.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,r=this.parent.activeViewOptions.group.resources.length>0?this.actionObj.groupIndex:-1,a=[];if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit)if(-1===(a=this.getOriginalElement(this.actionObj.element).map((function(e){return parseInt(e.getAttribute("data-group-index"),10)}))).indexOf(this.actionObj.groupIndex)){var l=parseInt(this.actionObj.clone.getAttribute("data-group-index"),10);(a=a.filter((function(e){return e!==l}))).push(this.actionObj.groupIndex)}else a=[];var d={cancel:!1,left:e.event.clientX,top:e.event.clientY,startTime:i,endTime:n,groupIndex:r};this.parent.dotNetRef.invokeMethodAsync("OnDragStop",d,t,o,this.actionObj.isAllDay,a,s),this.updatedData=[],this.multiData=[],this.isMultiSelect=!1,this.parent.selectedElements=[],this.cloneElements=[]}},t.prototype.updateNavigatingPosition=function(e){var t=this;if(this.actionObj.navigation.enable){var i=this.parent.getCurrentTime();sf.base.isNullOrUndefined(this.actionObj.navigationInterval)&&(this.actionObj.navigationInterval=window.setInterval((function(){if(i){var n=t.parent.getCurrentTime().getSeconds(),s=i.getSeconds()+t.actionObj.navigation.timeDelay/1e3;(s=s>=60?s-60:s)===n&&(i=t.parent.getCurrentTime(),t.viewNavigation(),t.updateDraggingDateTime(e))}}),this.actionObj.navigation.timeDelay))}},t.prototype.updateDraggingDateTime=function(e){!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")?this.morePopupEventDragging(e):this.parent.isTimelineView()&&"TimelineYear"!==this.parent.options.currentView?(this.timelineEventModule.dateRender=this.parent.activeView.renderDates,this.timelineEventModule.cellWidth=this.actionObj.cellWidth,this.timelineEventModule.getSlotDates(),this.actionObj.cellWidth=this.isHeaderRows?this.timelineEventModule.cellWidth:this.actionObj.cellWidth,this.calculateTimelineTime(e)):"Month"===this.parent.options.currentView||"TimelineYear"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable?this.calculateVerticalDate(e):this.calculateVerticalTime(e)},t.prototype.navigationWrapper=function(){if(this.parent.isTimelineView()){var e=void 0,t=(e=this.parent.activeViewOptions.group.resources.length>0?this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(this.actionObj.index):this.parent.element.querySelector(".e-appointment-container")).querySelector(".e-appointment-wrapper");t||(t=sf.base.createElement("div",{className:"e-appointment-wrapper"}),e.appendChild(t)),t.appendChild(this.actionObj.clone)}else if("Month"!==this.parent.options.currentView&&this.parent.activeViewOptions.timeScale.enable){var i=this.actionObj.clone.classList.contains("e-all-day-appointment")?".e-all-day-appointment-wrapper":".e-appointment-wrapper";if(this.parent.element.querySelectorAll(i).item(this.actionObj.index).appendChild(this.actionObj.clone),".e-all-day-appointment-wrapper"===i){var n=this.getAllDayEventHeight(),s=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child"));if(s[0].offsetHeight<n)for(var o=0,r=s;o<r.length;o++){r[o].style.height=(n+2)/12+"em"}this.actionObj.clone.style.height=sf.base.formatUnit(n)}this.actionObj.height=parseInt(this.actionObj.clone.style.height,10)}else{var a=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"));this.actionObj.index=this.parent.activeView.renderDates.length<this.actionObj.index?this.parent.activeView.renderDates.length-1:this.actionObj.index;var l=a[this.actionObj.index].querySelector(".e-appointment-wrapper");l||(l=sf.base.createElement("div",{className:"e-appointment-wrapper"}),a[this.actionObj.index].appendChild(l)),l.appendChild(this.actionObj.clone)}},t.prototype.viewNavigation=function(){var e,t=this.parent.element.querySelector(".e-content-wrap");t&&(!this.scrollEdges.top&&!this.scrollEdges.bottom||sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper"))&&(0===t.scrollLeft&&Math.round(this.actionObj.X)<=Math.round(t.getBoundingClientRect().left+this.actionObj.cellWidth+window.pageXOffset)?e=this.parent.options.enableRtl?"Next":"Previous":Math.round(t.scrollLeft)+t.clientWidth===t.scrollWidth&&Math.round(this.actionObj.X)>=Math.round(t.getBoundingClientRect().right-this.actionObj.cellWidth+window.pageXOffset)&&(e=this.parent.options.enableRtl?"Previous":"Next"),e&&this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate",e))},t.prototype.morePopupEventDragging=function(e){if(!(sf.base.isNullOrUndefined(e.target)||e.target&&sf.base.isNullOrUndefined(sf.base.closest(e.target,"td")))){var t=sf.base.extend({},this.actionObj.event,null,!0),i=t.endTime.getTime()-t.startTime.getTime(),n=sf.base.closest(e.target,"td"),s=this.parent.getDateFromElement(n),o=new Date(s.getTime());o.setMilliseconds(i),this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(n.getAttribute("data-group-index"),10)),this.actionObj.start=new Date(s.getTime()),this.actionObj.end=new Date(o.getTime()),this.actionObj.clone.style.top=sf.base.formatUnit(n.offsetParent.offsetTop),this.actionObj.clone.style.left=sf.base.formatUnit(n.offsetLeft),this.actionObj.clone.style.width=sf.base.formatUnit(n.offsetWidth);var r,a=n;if("TimelineYear"!==this.parent.options.currentView&&this.parent.isTimelineView()){var l=sf.base.closest(n,"tr").rowIndex;a=this.parent.element.querySelectorAll(".e-appointment-container").item(l)}(r=a.querySelector(".e-appointment-wrapper"))||(r=sf.base.createElement("div",{className:"e-appointment-wrapper"}),a.appendChild(r)),this.appendCloneElement(r)}},t.prototype.calculateVerticalTime=function(e){var t=this;if(!(sf.base.isNullOrUndefined(this.actionObj.target)||this.actionObj.target&&sf.base.isNullOrUndefined(sf.base.closest(this.actionObj.target,"tr"))||!sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")&&!sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells"))){this.parent.activeViewOptions.timeScale.enable&&this.swapDragging(e);var i=this.parent.element.querySelector(".e-content-wrap"),n=sf.base.extend({},this.actionObj.event,null,!0),s=n.startTime,o=n.endTime.getTime()-s.getTime(),r=Math.floor(parseInt(this.actionObj.clone.style.top,10)/this.actionObj.cellHeight)*this.actionObj.cellHeight;r=r<0?0:r,(this.scrollEdges.top||this.scrollEdges.bottom)&&(r=this.scrollEdges.top?i.scrollTop-this.heightUptoCursorPoint+this.actionObj.cellHeight:i.scrollTop+i.offsetHeight-this.actionObj.clone.offsetHeight+(this.actionObj.clone.offsetHeight-this.heightUptoCursorPoint),r=Math.round(r/this.actionObj.cellHeight)*this.actionObj.cellHeight,this.actionObj.clone.style.top=sf.base.formatUnit(r));var a,d,c=r/this.actionObj.cellHeight,p=this.actionObj.cellHeight/this.actionObj.slotInterval,u=parseInt(this.actionObj.clone.style.top,10)-r,f=sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells");if(this.isAllDayDrag||this.parent.virtualScrollModule&&this.parent.virtualScrollModule.isHorizontalScroll&&f)a=this.parent.element.querySelector(".e-all-day-row");else a=[].slice.call(this.parent.getContentTable().querySelectorAll("tr"))[c];(sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")||f)&&(d=sf.base.closest(this.actionObj.target,"td").cellIndex);var m=sf.base.isNullOrUndefined(d)?sf.base.closest(this.actionObj.clone,"td").cellIndex:d;if(this.actionObj.index=m,!sf.base.isNullOrUndefined(a)){var g,v,b=a.children[m];this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(b.getAttribute("data-group-index"),10)),this.parent.activeViewOptions.timeScale.enable&&!this.isAllDayDrag?(this.appendCloneElement(this.getEventWrapper(m)),(g=this.parent.getDateFromElement(b)).setMinutes(g.getMinutes()+u/p),v=new Date(g.getTime()),this.actionObj.element.classList.contains("e-all-day-appointment")?v.setMinutes(v.getMinutes()+this.actionObj.slotInterval):v.setMilliseconds(o)):((g=this.parent.getDateFromElement(b)).setDate(g.getDate()-this.daysVariation),g.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),(v=new Date(g.getTime())).setMilliseconds(o),!this.actionObj.element.classList.contains("e-all-day-appointment")&&this.actionObj.clone.classList.contains("e-all-day-appointment")&&(v=h(l(v),1)),this.updateAllDayEvents(g,v,this.parent.activeViewOptions.group.byDate?m:void 0)),this.actionObj.start=new Date(+g),this.actionObj.end=new Date(+v);for(var y=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event),w=0,C=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));w<C.length;w++){var S=C[w];sf.base.remove(S)}if(this.multiData.length>0){if(this.isAllDayTarget&&this.isAllDayDrag&&!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&!this.actionObj.isAllDay){var E=new Date(parseInt(sf.base.closest(this.actionObj.target,"td").getAttribute("data-date"),10)),x=new Date(+E+6e4*E.getTimezoneOffset()).getTime();this.multiData.forEach((function(e){if(t.swagData.push(sf.base.extend({},e,null,!0)),e.isAllDay){e.startTime=new Date(e.startTime.getTime()+(x-t.startTime));var i=new Date(e.startTime),n=new Date(i.setMinutes(i.getMinutes()+t.actionObj.slotInterval));e.endTime=n,e.isAllDay=!1}})),this.startTime=x}if(this.isAllDayTarget&&this.isAllDayDrag&&!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&this.actionObj.isAllDay&&this.swagData.length>0){this.multiData=this.swagData,this.swagData=[];var O=sf.base.extend({},this.actionObj.event,null,!0);this.startTime=O.startTime.getTime()}for(var T=y.startTime.getTime()-this.startTime,A=0;A<this.multiData.length;A++){this.updatedData[A]=this.updateMultipleData(this.multiData[A],T);var N=this.getDayIndex(this.updatedData[A]);if(N>=0){S=this.getEventWrapper(N,this.updatedData[A].isAllDay);this.appendCloneElement(S,this.actionObj.cloneElement[A]),this.updateEventHeight(this.updatedData[A],A,N)}else sf.base.isNullOrUndefined(this.actionObj.cloneElement[A].parentNode)||sf.base.remove(this.actionObj.cloneElement[A])}}else this.updateEventHeight(y);this.updateTimePosition(this.actionObj.start,this.updatedData)}}},t.prototype.updateMultipleData=function(e,t){var i=sf.base.extend({},e,null,!0);!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&this.parent.activeViewOptions.timeScale.enable&&(this.isAllDayTarget&&i.isAllDay||!this.isAllDayTarget&&!i.isAllDay)&&(i.isAllDay=this.actionObj.isAllDay);var n=i.endTime.getTime()-i.startTime.getTime();if(i.isAllDay){var s=Math.ceil(t/864e5),o=Math.ceil(n/864e5),r=new Date(i.startTime);i.startTime=l(new Date(r.setDate(r.getDate()+s))),i.endTime=h(i.startTime,o)}else i.startTime=new Date(i.startTime.getTime()+t),i.endTime=new Date(i.startTime.getTime()+n);return i},t.prototype.getDayIndex=function(e){var t=sf.base.extend({},e,null,!0),i=this.parent.getMsFromDate(t.startTime),n="";return n="."+(this.parent.activeViewOptions.timeScale.enable&&t.isAllDay?"e-all-day-appointment-wrapper":"e-work-cells")+'[data-date="'+i+'"]',this.parent.activeViewOptions.group.resources.length>0&&(n=n+'[data-group-index="'+this.actionObj.groupIndex+'"]'),this.targetTd=this.parent.element.querySelector(n),sf.base.isNullOrUndefined(this.targetTd)?-1:this.targetTd.cellIndex},t.prototype.splitEvent=function(e){var t=[],i=e.startTime,n=e.endTime;if(l(new Date(i.getTime()))<l(new Date(n.getTime()))){var s=this.parent.activeView.getStartHour(),o=this.parent.activeView.getEndHour(),r=p(l(i),s,o),a=p(l(n),s,o),d=sf.base.extend({},e,null,!0);d.endTime=r.endHour,t.push(d);var h=sf.base.extend({},e,null,!0);h.startTime=a.startHour,t.push(h)}else t.push(e);return t},t.prototype.updateEventHeight=function(e,t,i){this.verticalEvent.initializeValues();for(var n=l(sf.base.extend({},e,null,!0).startTime),s=-1,o=this.parent.getIndexOfDate(this.parent.activeView.renderDates,n),r=this.splitEvent(e),a=(e.endTime.getTime()-e.startTime.getTime())/864e5>=1,d=e.isAllDay||a||r.length>2?[e]:r,h=0;h<d.length;h++){if(h>0){var c='.e-day-wrapper[data-date="'+v(l(d[h].startTime)).getTime()+'"]';this.parent.activeViewOptions.group.resources.length>0&&(c=c.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var p=this.parent.element.querySelector(c);p?(o+=1,s=p.cellIndex):o=-1}if(o>=0){var u=d[h],f=u.startTime,m=u.endTime,g=0,b=this.verticalEvent.getHeight(f,m);if(g=this.verticalEvent.getTopValue(f,o),sf.base.isNullOrUndefined(t))0===h?(this.actionObj.clone.style.top=sf.base.formatUnit(g),this.actionObj.clone.style.height=sf.base.formatUnit(b)):this.renderSpannedEvents(u,s,g,b);else{var y=this.actionObj.cellWidth;if(e.isAllDay){g=this.parent.element.querySelector(".e-all-day-row").offsetTop,b=this.getAllDayEventHeight();var w=e.endTime.getTime()-e.startTime.getTime(),C=Math.ceil(w/864e5);C>=0&&(y=C*this.actionObj.cellWidth)}this.actionObj.cloneElement[t]&&(0===h?(this.actionObj.cloneElement[t].style.top=sf.base.formatUnit(g),this.actionObj.cloneElement[t].style.height=sf.base.formatUnit(b),this.actionObj.cloneElement[t].style.width=sf.base.formatUnit(y),this.actionObj.cloneElement[t].style.left=sf.base.formatUnit(0)):this.renderSpannedEvents(u,s,g,b))}}}},t.prototype.renderSpannedEvents=function(e,t,i,n){if(e.startTime.getTime()!==e.endTime.getTime()){var s=this.createAppointmentElement(this.actionObj.groupIndex);sf.base.addClass([s],["e-schedule-event-clone","e-dynamic-clone"]),sf.base.setStyleAttribute(s,{width:"100%",height:n+"px",top:i+"px",border:"0px"});var o=this.actionObj.clone;""!==o.style.backgroundColor&&sf.base.setStyleAttribute(s,{backgroundColor:o.style.backgroundColor}),[].slice.call(this.parent.element.querySelectorAll(".e-appointment-wrapper"))[t].appendChild(s)}},t.prototype.isSpannedEvent=function(e,t){var i=p(t,this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()),n=sf.base.extend({},e,null,!0);return n.isSpanned={isBottom:!1,isTop:!1},e.startTime.getTime()<i.startHour.getTime()&&(n.startTime=i.startHour,n.isSpanned.isTop=!0),e.endTime.getTime()>i.endHour.getTime()&&(n.endTime=i.endHour,n.isSpanned.isBottom=!0),n},t.prototype.updateAllDayEvents=function(e,t,i){this.parent.eventBase.slots=[];var n=this.getUpdatedEvent(e,t,this.actionObj.event),s=this.parent.activeView.renderDates;this.parent.eventBase.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.parent.activeViewOptions.group.resources.length>0&&(this.parent.eventBase.slots=[],this.parent.eventBase.slots.push(s.map((function(e){return+e}))));var o=this.parent.eventBase.splitEvent(n,s),r='.e-all-day-cells[data-date="'+this.parent.getMsFromDate(o[0].startTime)+'"]';this.parent.activeViewOptions.group.resources.length>0&&(r=r.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var a=[].slice.call(this.parent.element.querySelectorAll(r));if(a.length>0||!sf.base.isNullOrUndefined(i)){var l=sf.base.isNullOrUndefined(i)?a[0].cellIndex:i;this.appendCloneElement(this.getEventWrapper(l)),this.actionObj.clone.style.width=sf.base.formatUnit(o[0].data.count*this.actionObj.cellWidth)}},t.prototype.swapDragging=function(e){var t=sf.base.closest(this.actionObj.target,"td").cellIndex;if(sf.base.closest(this.actionObj.target,".e-date-header-wrap")&&!sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper")){sf.base.addClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!0;var i=this.getAllDayEventHeight(),n=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child"));if(n[0].offsetHeight<i)for(var s=0,o=n;s<o.length;s++){o[s].style.height=(i+2)/12+"em"}sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(this.actionObj.cellWidth),height:sf.base.formatUnit(i),top:sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop)})}if(sf.base.closest(this.actionObj.target,".e-work-cells")&&!sf.base.closest(this.actionObj.clone,".e-day-wrapper")){sf.base.removeClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!1;var r=0===this.actionObj.element.offsetHeight?this.actionObj.height:this.actionObj.element.offsetHeight;sf.base.setStyleAttribute(this.actionObj.clone,{left:sf.base.formatUnit(0),height:sf.base.formatUnit(r),width:sf.base.formatUnit(this.actionObj.cellWidth)})}},t.prototype.calculateVerticalDate=function(e){var t=this;if(!(sf.base.isNullOrUndefined(e.target)||e.target&&sf.base.isNullOrUndefined(sf.base.closest(e.target,"tr"))||e.target&&"DIV"===e.target.tagName)){this.removeCloneElement();var i=sf.base.extend({},this.actionObj.event,null,!0),n=i.endTime.getTime()-i.startTime.getTime(),s=sf.base.closest(this.actionObj.target,"td");if(!sf.base.isNullOrUndefined(s)){var o=s.parentElement;if(this.actionObj.index=o.rowIndex*o.children.length+s.cellIndex,s=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"))[this.actionObj.index],sf.base.isNullOrUndefined(s))return;var r=this.parent.getDateFromElement(s);if(!sf.base.isNullOrUndefined(r)){this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(s.getAttribute("data-group-index"),10));var a=new Date(r.setDate(r.getDate()-this.daysVariation)),d=new Date(a.getTime()),h=new Date(d.getTime()),c=i.startTime.getTime()-l(i.startTime).getTime();d=new Date(d.getTime()+c),h=new Date(d.getTime()+n),this.actionObj.start=new Date(d.getTime()),this.actionObj.end=new Date(h.getTime())}}for(var p=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event),u=0,f=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));u<f.length;u++){var m=f[u];sf.base.remove(m)}if(this.multiData&&this.multiData.length>0){var g=l(new Date(p.startTime));c=g.getTime()-this.startTime;"TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0&&(c=12*(g.getFullYear()-new Date(this.startTime).getFullYear()),c-=new Date(this.startTime).getMonth(),c+=g.getMonth());for(var v=function(e){b.updatedData[e]=b.updateMultipleVerticalDate(b.multiData[e],c);var i=b.cloneElements.find((function(i){return i.getAttribute("data-guid")===t.updatedData[e].guid}));"TimelineYear"===b.parent.options.currentView?b.dynamicYearlyEventsRendering(b.updatedData[e],!1,i):b.dynamicEventsRendering(b.updatedData[e],i)},b=this,y=0;y<this.multiData.length;y++)v(y)}else"TimelineYear"===this.parent.options.currentView?this.dynamicYearlyEventsRendering(p):this.dynamicEventsRendering(p)}},t.prototype.updateMultipleVerticalDate=function(e,t){var i=sf.base.extend({},e,null,!0),n=i.endTime.getTime()-i.startTime.getTime(),s=new Date(i.startTime);if("TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0)i.startTime=new Date(s.setMonth(s.getMonth()+t));else{var o=Math.ceil(t/864e5);i.startTime=new Date(s.setDate(s.getDate()+o))}return i.endTime=new Date(i.startTime.getTime()+n),i},t.prototype.calculateTimelineTime=function(e){var t,i=sf.base.extend({},this.actionObj.event,null,!0),n=i.endTime.getTime()-i.startTime.getTime(),s=this.parent.options.enableRtl?Math.abs(this.actionObj.clone.offsetLeft)-this.actionObj.clone.offsetWidth:parseInt(this.actionObj.clone.style.left,10);s=Math.floor(s/this.actionObj.cellWidth)*this.actionObj.cellWidth,this.parent.options.enableRtl&&(t=Math.abs(parseInt(this.actionObj.clone.style.right,10)),this.actionObj.clone.style.right=sf.base.formatUnit(t)),s=this.getOffsetValue(s,t);var o=this.getColumnIndex(s),r=Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().left)/this.actionObj.cellWidth);this.parent.options.enableRtl&&(r=Math.abs(Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().right)/this.actionObj.cellWidth))-1),this.cursorPointIndex<0&&this.cursorIndex(e,i,s,r);var a=this.parent.getContentTable().querySelector("tr"),d=this.getCursorCurrentIndex(o,r,a);d=d<0?0:d;var h=this.isHeaderRows?new Date(this.timelineEventModule.dateRender[d].getTime()):this.parent.getDateFromElement(a.children[d]);if(this.isStepDragging){var c=this.getWidthDiff(a,d);if(0!==c){var p=Math.round(c/this.widthPerMinute);h.setMinutes(h.getMinutes()+p*this.actionObj.interval),h.setMinutes(h.getMinutes()-this.minDiff)}else h=this.actionObj.start}else h.setMinutes(h.getMinutes()-this.cursorPointIndex*(this.isTimelineDayProcess?1440:this.actionObj.slotInterval));if(h=this.calculateIntervalTime(h),this.isTimelineDayProcess){var u=i.startTime;h.setHours(u.getHours(),u.getMinutes(),u.getSeconds())}if(this.parent.options.eventDragArea){var f=this.parent.getDateFromElement(e.target);sf.base.isNullOrUndefined(f)||(h=f)}var m=new Date(h.getTime());m.setMilliseconds(n);var g=[this.getUpdatedEvent(h,m,this.actionObj.event)];if(this.multiData.length>0){for(var v=g[0].startTime.getTime()-this.startTime,b=0;b<this.multiData.length;b++)this.updatedData[b]=this.updateMultipleData(this.multiData[b],v);g=this.updatedData}for(var y=0;y<g.length;y++){var w=this.timelineEventModule.splitEvent(g[y],this.timelineEventModule.dateRender);if(0===w.length)return;var C=w[0].data,S=this.getStartTime(w[0],C),E=this.getEndTime(w[0],C),x=this.timelineEventModule.getEventWidth(S,E,i.isAllDay,C.count),O=this.parent.getIndexOfDate(this.timelineEventModule.dateRender,l(new Date(S.getTime())));O=O<0?0:O;var T=this.timelineEventModule.getPosition(S,E,i.isAllDay,O),A=this.multiData.length>0?this.actionObj.cloneElement[y]:this.actionObj.clone;if("TimelineMonth"===this.parent.options.currentView||!this.parent.activeViewOptions.timeScale.enable){S=l(S);var N='.e-work-cells[data-date="'+this.parent.getMsFromDate(S)+'"]',k=this.parent.element.querySelector(N);sf.base.isNullOrUndefined(k)&&(x=0)}this.parent.options.enableRtl?A.style.right=sf.base.formatUnit(T):A.style.left=sf.base.formatUnit(T),this.isMorePopupOpened||(A.style.width=sf.base.formatUnit(x)),this.parent.activeViewOptions.group.resources.length>0&&this.calculateResourceGroupingPosition(e,A),this.actionObj.start=new Date(h.getTime()),this.actionObj.end=new Date(m.getTime()),this.updateTimePosition(this.actionObj.start,this.updatedData)}},t.prototype.getStartTime=function(e,t){var i=e.startTime,n=p(i,this.timelineEventModule.startHour,this.timelineEventModule.endHour);return i=n.startHour.getTime()>=t.startTime?n.startHour:n.endHour.getTime()<=t.startTime?this.getNextDay(n.startHour,t):t.startTime,t.trimStartTime=e.isAllDay?n.startHour:t.startTime,i},t.prototype.getNextDay=function(e,t){for(var i,n=1;n<=this.timelineEventModule.dateRender.length;n++)if(i=h(e,n),-1!==this.parent.getIndexOfDate(this.timelineEventModule.dateRender,l(new Date(e.getTime()))))return t.count=t.count-1,i;return i},t.prototype.getEndTime=function(e,t){var i=e.endTime,n=p(i,this.timelineEventModule.startHour,this.timelineEventModule.endHour);return"TimelineMonth"===this.parent.options.currentView||!this.parent.activeViewOptions.timeScale.enable||this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option?i=t.endTime:(i=t.endTime,n.endHour.getTime()<=t.endTime&&(i=n.endHour),n.startHour.getTime()>=t.endTime.getTime()&&!e.isAllDay&&(i=this.getPreviousDay(n.startHour,n.endHour,t))),t.trimEndTime=e.isAllDay?n.endHour:t.endTime,i},t.prototype.getPreviousDay=function(e,t,i){for(var n=1;n<=this.timelineEventModule.dateRender.length;n++){var s=h(t,-n);if(-1!==this.parent.getIndexOfDate(this.timelineEventModule.dateRender,l(new Date(e.getTime())))){(s=l(new Date(s.getTime()))).setHours(t.getHours(),t.getMinutes(),t.getSeconds());var o=i.count,r=i.endTime;return i.count=0!==r.getHours()||0!==r.getMinutes()?o-1:o,s}}return i.endTime},t.prototype.getOffsetValue=function(e,t){if(this.scrollEdges.left||this.scrollEdges.right){var i=this.parent.element.querySelector(".e-content-wrap");this.parent.options.enableRtl?(t=i.offsetWidth-i.scrollLeft,this.scrollEdges.right?t=t-i.offsetWidth+this.actionObj.clone.offsetWidth-(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint):(t+=this.widthUptoCursorPoint)-this.widthUptoCursorPoint>=i.scrollWidth&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint+this.actionObj.cellWidth),t=i.scrollLeft-i.scrollWidth),this.actionObj.clone.style.left=sf.base.formatUnit(t)):(this.scrollEdges.left?(e=i.scrollLeft-this.widthUptoCursorPoint+this.actionObj.cellWidth,i.scrollLeft+i.offsetWidth>=i.offsetWidth?i.scrollLeft=i.scrollLeft-1:0===this.actionObj.clone.offsetLeft&&(e=i.scrollLeft)):e=i.scrollLeft+i.offsetWidth-this.actionObj.clone.offsetWidth+(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint),e=e<0?0:e,this.actionObj.clone.style.left=sf.base.formatUnit(e))}return e},t.prototype.getWidthDiff=function(e,t){var i=this.scrollArgs.element.getBoundingClientRect();if(i.left<=this.actionObj.pageX&&i.right>=this.actionObj.pageX){var n=e.children[t].offsetLeft,s=this.actionObj.pageX-i.left;return this.parent.options.enableRtl?n+this.actionObj.cellWidth-(this.scrollArgs.element.scrollLeft+s):this.scrollArgs.element.scrollLeft+s-n}return 0},t.prototype.getColumnIndex=function(e){var t=Math.floor(e/this.actionObj.cellWidth);return this.isHeaderRows?t:this.getIndex(t)},t.prototype.getCursorCurrentIndex=function(e,t,i){var n=e+t;if(this.isHeaderRows){var s=Math.floor(i.offsetWidth/this.actionObj.cellWidth);return n>s-1?s-1:n}return n>i.children.length-1?i.children.length-1:n},t.prototype.cursorIndex=function(e,t,i,n){var s=sf.base.closest(e.target,".e-work-cells");if(sf.base.isNullOrUndefined(s)||this.isMorePopupOpened)this.cursorPointIndex=0;else{var o=this.parent.getDateFromElement(s);if(this.isHeaderRows){var r=Math.floor(i/this.actionObj.cellWidth);o=new Date(this.timelineEventModule.dateRender[r+n].getTime())}var a=o.getTime()-new Date(t.startTime).getTime();if(this.isTimelineDayProcess)this.cursorPointIndex=Math.abs(Math.ceil(a/864e5));else{var l=Math.floor(a/6e4/(this.actionObj.slotInterval/this.actionObj.cellWidth));this.cursorPointIndex=Math.floor(l/this.actionObj.cellWidth),this.cursorPointIndex=this.cursorPointIndex<0?0:this.cursorPointIndex}}},t.prototype.calculateResourceGroupingPosition=function(e,t){var i=this.parent.element.querySelector(".e-content-wrap"),s=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap .e-content-table tr:not(.e-hidden)")),o=n(i.querySelector("table"));o=sf.base.isNullOrUndefined(o)?0:o;var r=this.parent.options.rowAutoHeight?~~(i.querySelector("table").offsetHeight/s.length):this.actionObj.cellHeight,a=Math.floor(Math.floor(this.actionObj.Y+(i.scrollTop-o-window.scrollY)-i.getBoundingClientRect().top)/r);a=a<0?0:a>s.length-1?s.length-1:a,this.actionObj.index=a;var l=sf.base.closest(e.target,"td");this.actionObj.groupIndex=l&&!isNaN(parseInt(l.getAttribute("data-group-index"),10))?parseInt(l.getAttribute("data-group-index"),10):this.actionObj.groupIndex;var d=this.parent.virtualScrollModule?a:this.actionObj.groupIndex,h=this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(d),c=h.querySelector(".e-appointment-wrapper");c||(c=sf.base.createElement("div",{className:"e-appointment-wrapper"}),h.appendChild(c)),this.appendCloneElement(c,t);var p=0;if(this.parent.options.rowAutoHeight){var u=this.getCursorElement(e);u&&(p=u.offsetParent.classList.contains("e-appointment")?u.offsetParent.offsetTop:p)}t.style.top=sf.base.formatUnit(p)},t.prototype.appendCloneElement=function(e,t){void 0===t&&(t=null),t=sf.base.isNullOrUndefined(t)?this.actionObj.clone:t,this.parent.options.eventDragArea?document.querySelector(this.parent.options.eventDragArea).appendChild(t):e.appendChild(t)},t.prototype.getEventWrapper=function(e,t){var i;if(sf.base.isNullOrUndefined(t)&&(t=this.actionObj.clone.classList.contains("e-all-day-appointment")),this.parent.activeViewOptions.timeScale.enable){var n=t?".e-all-day-appointment-wrapper":".e-appointment-wrapper";i=this.parent.element.querySelectorAll(n).item(e)}else{var s=this.parent.element.querySelectorAll(".e-work-cells").item(e);(i=s.querySelector(".e-appointment-wrapper"))||(i=sf.base.createElement("div",{className:"e-appointment-wrapper"}),s.appendChild(i))}return i},t.prototype.getAllDayEventHeight=function(){var e=sf.base.createElement("div",{className:"e-appointment"});this.parent.element.querySelector(".e-all-day-appointment-wrapper").appendChild(e);var t=e.offsetHeight;return sf.base.remove(e),t},t.prototype.isAllowDrop=function(e){if(!this.actionObj.excludeSelectors)return!1;for(var t=!1,i=0,n=this.actionObj.excludeSelectors.split(",");i<n.length;i++){var s=n[i];if(e.target.classList.contains(s)){t=!0;break}}return t},t}(ee),oe=function(){function e(e){this.translateY=0,this.itemSize=60,this.bufferCount=3,this.renderedLength=0,this.averageRowHeight=0,this.startIndex=0,this.isResourceCell=!1,this.previousTop=0,this.isInitialized=!0,this.parent=e}return e.prototype.getRenderedCount=function(){var e=this.parent.element.querySelector(".e-content-table");return this.renderedLength=e.querySelector("tbody").children.length,this.renderedLength},e.prototype.triggerScrolling=function(){this.parent.dotNetRef.invokeMethodAsync("OnContentUpdate",this.startIndex)},e.prototype.setTranslateValue=function(){this.setItemSize();var e=this.parent.element.querySelector(".e-content-table");if(this.isHorizontalScroll){var t=this.parent.element.querySelector(".e-virtual-track");if(t){var i=this.parent.element.querySelector(".e-date-header-wrap tbody tr");t.style.width=i.offsetWidth+"px"}e.classList.contains("e-virtual-relative")&&sf.base.removeClass([e],"e-virtual-relative"),sf.base.setStyleAttribute(e,{transform:"translateX("+this.translateY+"px)"});var n=this.parent.element.querySelector(".e-event-table");n&&sf.base.setStyleAttribute(n,{transform:"translateX("+this.translateY+"px)"})}else{var s=this.parent.element.querySelector(".e-resource-column-wrap"),o=this.parent.element.querySelector(".e-content-wrap"),r=this.parent.element.querySelector(".e-event-table"),a=this.parent.element.querySelector(".e-current-timeline");this.setVirtualTrackHeight(s),e.classList.contains("e-virtual-relative")&&sf.base.removeClass([e],"e-virtual-relative"),this.setTranslate(s,o,r,a),o.scrollTop=s.scrollTop}},e.prototype.setVirtualTrackHeight=function(e){var t=this.parent.element.querySelector(".e-virtual-track");if(t){var i=parseInt(e.getAttribute("data-expanded-count"),10);t.style.height=i*this.itemSize+"px"}},e.prototype.updateVirtualScrollHeight=function(){var e=this.parent.element.querySelector(".e-virtual-track"),t=this.parent.element.querySelector(".e-resource-column-wrap"),i=parseInt(t.getAttribute("data-rendered-index"),10),n=parseInt(t.getAttribute("data-expanded-index"),10),s=parseInt(t.getAttribute("data-expanded-count"),10);if(i!==n){var o=this.parent.element.querySelector(".e-content-table");this.renderedLength=o.querySelector("tbody").children.length,e.style.height=o.offsetHeight+(s-this.renderedLength)*o.offsetHeight/this.renderedLength+"px"}else e.style.height="";this.averageRowHeight=e.offsetHeight/s},e.prototype.updateVirtualTrackHeight=function(e){var t=this.parent.element.querySelector(".e-resource-column-wrap"),i=parseInt(t.getAttribute("data-rendered-index"),10),n=parseInt(t.getAttribute("data-expanded-index"),10),s=this.getRenderedCount()+(n-i),o=parseInt(t.getAttribute("data-expanded-count"),10);s=s>o?o:s,e.style.height=s*this.itemSize+"px"},e.prototype.setItemSize=function(){if(this.isHorizontalScroll){var e=this.parent.element.querySelector(".e-work-cells");this.itemSize=e.getBoundingClientRect().width||this.itemSize}else this.itemSize=i(this.parent.activeView.element,"e-work-cells")||this.itemSize},e.prototype.beforeInvoke=function(e,t,i,n){var s=this;if(window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout((function(){s.triggerScrolling()}),250),this.isHorizontalScroll)return this.setTranslateX(),this.updateContent(),void(this.previousTop=t.scrollLeft);this.updateContent(),document.activeElement&&document.activeElement.classList.contains("e-resource-cells")&&(this.isResourceCell=!0,this.focusedEle=document.activeElement,this.parent.element.focus()),this.setTranslate(e,t,i,n),this.previousTop=t.scrollTop},e.prototype.setTranslateX=function(){var e,t=this.parent.element.querySelector(".e-content-table"),i=t.querySelector("tbody tr").children.length;if(this.parent.activeViewOptions.group.byDate)e=this.parent.element.querySelector(".e-date-header-wrap tbody tr");else{var n=[].slice.call(this.parent.element.querySelectorAll(".e-date-header-wrap .e-resource-cells"));e=n[n.length-1].parentElement}for(var o=e.childElementCount,r=0,a={startIndex:void 0,endIndex:void 0},l=0;l<o;l++){if(r+=parseInt(e.children[l].getAttribute("colspan"),10),this.startIndex<r&&sf.base.isNullOrUndefined(a.startIndex)&&(a.startIndex=r-parseInt(e.children[l].getAttribute("colspan"),10),l===o-1)){a.endIndex=r;break}if(this.startIndex+this.renderedLength<r&&sf.base.isNullOrUndefined(a.endIndex)){a.endIndex=r;break}}var d=Math.abs(s(t));if(i+a.startIndex!==a.endIndex||a.startIndex!==d/this.itemSize){var h=a.startIndex*this.itemSize;if(this.isContentUpdate=!0,d!==h){this.translateY=this.parent.options.enableRtl?-h:h;var c=this.parent.element.querySelector(".e-event-table");c&&sf.base.setStyleAttribute(c,{transform:"translateX("+this.translateY+"px)"}),sf.base.setStyleAttribute(t,{transform:"translateX("+this.translateY+"px)"})}}},e.prototype.virtualScrolling=function(){this.parent.quickPopup&&this.parent.quickPopup.hide(),this.parent.morePopup&&this.parent.morePopup.hide();var e=this.parent.element.querySelector(".e-content-wrap");if(this.isHorizontalScroll){this.isContentUpdate=!1;var t=this.itemSize*this.bufferCount;Math.abs(e.scrollLeft)-Math.abs(this.translateY)<=0?(this.leftScroll(e),this.previousTop!==e.scrollLeft&&this.beforeInvoke(null,e,null,null)):Math.abs(e.scrollLeft)-Math.abs(this.translateY)>t&&(this.rightScroll(e),this.previousTop!==e.scrollLeft&&this.beforeInvoke(null,e,null,null))}else{var i=this.parent.element.querySelector(".e-resource-column-wrap"),n=this.parent.element.querySelector(".e-event-table"),s=this.parent.element.querySelector(".e-current-timeline"),o=this.parent.element.querySelector(".e-content-table");this.renderedLength=i.querySelector("tbody").children.length;var r=parseInt(i.querySelector("tbody td").getAttribute("data-group-index"),10),a=this.parent.options.rowAutoHeight?o.offsetHeight-e.offsetHeight:this.bufferCount*this.itemSize;sf.base.addClass([e],"e-transition"),this.setItemSize(),e.scrollTop-this.translateY<=0&&!this.isInitialized?(this.upScroll(e,r),this.previousTop!==e.scrollTop&&(this.isDownScroll=!1,this.beforeInvoke(i,e,n,s))):e.scrollTop-this.translateY>a&&(this.downScroll(e),this.previousTop!==e.scrollTop&&(this.isDownScroll=!0,this.beforeInvoke(i,e,n,s))),this.isInitialized=!1}},e.prototype.upScroll=function(e,t){var i=~~(e.scrollTop/this.itemSize);if(this.parent.options.rowAutoHeight&&(i=i>t?t-this.bufferCount:i),i=i>0?i:0,0===t)this.translateY=e.scrollTop;else{var n=this.parent.options.rowAutoHeight?this.averageRowHeight:this.itemSize;this.translateY=e.scrollTop-this.bufferCount*n>0?e.scrollTop-this.bufferCount*n:0}this.startIndex=i},e.prototype.downScroll=function(e){var t=this.parent.element.querySelector(".e-resource-column-wrap");if(t.getAttribute("data-rendered-index")===t.getAttribute("data-expanded-index"))return null;var i=this.parent.options.rowAutoHeight?this.averageRowHeight:this.itemSize,n=~~(e.scrollTop/i),s=n+this.renderedLength,o=parseInt(t.getAttribute("data-expanded-count"),10);s=s>o?n+(o-n):s,this.translateY=e.scrollTop,this.translateY>o*i-this.renderedLength*i&&(this.translateY=o*i-this.renderedLength*i),this.startIndex=s-this.renderedLength},e.prototype.leftScroll=function(e){var t=~~(Math.abs(e.scrollLeft)/this.itemSize);t=t>0?t:0,this.translateY=t*this.itemSize,this.parent.options.enableRtl&&(this.translateY=-this.translateY),this.startIndex=t},e.prototype.rightScroll=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-date-header-wrap tbody tr"));t=[].slice.call(t[t.length-1].children);var i=~~(Math.abs(e.scrollLeft)/this.itemSize)+this.renderedLength;i=i>t.length-1?t.length-1:i,this.startIndex=i-this.renderedLength,this.translateY=this.startIndex*this.itemSize,this.parent.options.enableRtl&&(this.translateY=-this.translateY)},e.prototype.setTranslate=function(e,t,i,n){sf.base.setStyleAttribute(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),sf.base.setStyleAttribute(t.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),sf.base.setStyleAttribute(i,{transform:"translateY("+this.translateY+"px)"}),sf.base.isNullOrUndefined(n)||sf.base.setStyleAttribute(n,{transform:"translateY("+this.translateY+"px)"})},e.prototype.setTabIndex=function(){var e,t=this.parent.element.querySelector(".e-resource-column-wrap"),i=[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells"));if(i&&t){var n=t.getBoundingClientRect().top;i.forEach((function(e){e.getBoundingClientRect().top>=n?e.setAttribute("tabindex","0"):e.setAttribute("tabindex","-1")}))}this.focusedEle&&(e=this.parent.element.querySelector('.e-resource-cells[tabindex="0"][data-group-index="'+this.focusedEle.getAttribute("data-group-index")+'"]')),e||(e=this.parent.element.querySelector('.e-resource-cells[tabindex="0"]')),this.isResourceCell&&e&&(e.focus(),this.isResourceCell=!1)},e.prototype.hideAppointments=function(){[].slice.call(this.parent.element.querySelectorAll(".e-appointment:not(.e-schedule-event-clone),.e-more-indicator")).forEach((function(e){e.style.visibility="hidden"}))},e.prototype.updateContent=function(){if(this.parent.activeViewOptions.enableVirtualMask){if(!this.isContentUpdate&&this.isHorizontalScroll)return;this.hideAppointments();var e=this.parent.element.querySelector(".e-table-wrap");e&&!e.classList.contains("e-virtual-mask")&&sf.base.addClass([e],"e-virtual-mask")}else if(this.isHorizontalScroll||"TimelineYear"===this.parent.options.currentView)this.isHorizontalScroll&&this.isContentUpdate&&this.hideAppointments();else{var t=[].slice.call(this.parent.element.querySelector(".e-event-table").children);if(t.length<=0)return;var i=parseInt(t[0].getAttribute("data-group-index"),10),n=parseInt(t[t.length-1].getAttribute("data-group-index"),10);if(this.isDownScroll&&!(i<=this.startIndex&&this.startIndex<=n)||!this.isDownScroll&&this.startIndex+this.renderedLength<=i&&this.startIndex+this.renderedLength<=n)for(var s=0;s<t.length;s++){[].slice.call(t[s].children).forEach((function(e){e.style.visibility="hidden"}))}}},e.prototype.getResourceCount=function(){var e=this.isHorizontalScroll?this.parent.element.clientWidth:this.parent.element.clientHeight;return this.renderedLength=Math.ceil(e/this.itemSize)+this.bufferCount,this.renderedLength},e}(),re=function(){function n(e){this.parent=e}return n.prototype.inlineEdit=function(i,n,s,o,r){if(void 0===s&&(s=null),"Cell"===i){var a=this.parent.element.querySelector(".e-more-popup-wrapper");a&&a.classList.contains(e)&&this.parent.morePopup.hide(),this.removeInlineAppointmentElement(),this.eventWrapColor=r,this.cellEdit()}else{if(n)return;var l=this.parent.element.querySelector('.e-appointment[data-guid="'+s+'"]');this.parent.element.querySelector(".e-more-popup-wrapper")&&this.parent.element.querySelector(".e-more-popup-wrapper").classList.contains("e-popup-open")&&(l=this.parent.element.querySelector('.e-more-popup-wrapper .e-appointment[data-guid="'+s+'"]')),this.parent.element.querySelector(".e-inline-subject")!==l.querySelector(".e-inline-subject")&&this.removeInlineAppointmentElement(),this.eventEdit(l),o&&(this.parent.eventBase.removeSelectedAppointmentClass(),sf.base.addClass([l],t))}},n.prototype.cellEdit=function(){var e=this.generateEventData(),t=this.parent.activeCellsData.element.cellIndex,i=this.getEventDaysCount(e);i>1&&(i=Math.round(i),t-=--i);var n=new Date(""+e.startTime).getTime(),s=new Date(""+e.endTime).getTime(),o=e.groupIndex||0;if("Day"===this.parent.options.currentView||"Week"===this.parent.options.currentView||"WorkWeek"===this.parent.options.currentView){var r=e.startTime.getDay();this.createVerticalViewInline(e,r,o,t)}else"Month"===this.parent.options.currentView?this.createMonthViewInline(e,o,n,s):this.createTimelineViewInline(e,n,s,o);var a=this.parent.element.querySelector(".e-inline-subject");a&&a.focus()},n.prototype.createInlineAppointmentElement=function(){var e=sf.base.createElement("div",{className:"e-appointment e-inline-appointment"}),t=sf.base.createElement("div",{className:"e-appointment-details"});e.appendChild(t);var i=sf.base.createElement("input",{className:"e-inline-subject"});return t.appendChild(i),""!==this.eventWrapColor&&sf.base.setStyleAttribute(e,{backgroundColor:this.eventWrapColor}),e},n.prototype.removeInlineAppointmentElement=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-inline-appointment"));e.length>0&&e.forEach((function(e){return sf.base.remove(e)}));var t=this.parent.element.querySelector(".e-inline-subject");if(t){var i=sf.base.closest(t,".e-appointment");sf.base.removeClass([i.querySelector(".e-subject")],"e-disable"),sf.base.remove(t)}},n.prototype.createVerticalViewInline=function(e,t,i,n){var s=this.getEventDaysCount(e),o=new L(this.parent);o.initializeValues();if(s>=1){o.allDayElement=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells"));var r=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),a=0;r.length>0&&(a=Math.floor(this.parent.element.querySelector(".e-all-day-row").getBoundingClientRect().height/r[0].offsetHeight)-1),o.allDayLevel=a,o.renderAllDayEvents(e,0,i,n)}else o.renderNormalEvents(e,0,i,n)},n.prototype.createMonthViewInline=function(e,t,n,s){var o=this.getEventDaysCount(e),r=this.parent.eventBase.cloneEventObject(e,n,s,o,!1,!1),a=new P(this.parent);a.dateRender=this.parent.activeView.renderDates;var l=this.parent.activeView.renderDates,d=this.parent.activeViewOptions.workDays;this.parent.activeCellsData.groupIndex>=0?a.workCells=[].slice.call(this.parent.element.querySelectorAll('.e-work-cells[data-group-index="'+t+'"]')):a.workCells=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells")),a.cellWidth=a.workCells[0].offsetWidth,a.cellHeight=a.workCells[0].offsetHeight,a.eventHeight=i(this.parent.element,"e-appointment"),a.getSlotDates(d);for(var h=a.getRenderedDates(l),c=0,p=a.splitEvent(r,h||l);c<p.length;c++){var u=p[c];a.renderEvents(u,t)}this.parent.element.querySelector(".e-inline-subject").focus()},n.prototype.createTimelineViewInline=function(e,t,n,s){var o=this.getEventDaysCount(e),r=this.parent.eventBase.cloneEventObject(e,t,n,o,!1,!1),a=new U(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day");a.dateRender=this.parent.activeView.renderDates,a.eventContainers=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),this.parent.activeCellsData.groupIndex>=0?a.workCells=[].slice.call(this.parent.element.querySelectorAll('.e-work-cells[data-group-index="'+s+'"]')):a.workCells=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"));var l=this.parent.element.querySelector(".e-work-cells");a.inlineValue=this.parent.options.allowInline,a.cellWidth=l.offsetWidth,a.cellHeight=l.offsetHeight;var d=0===this.parent.element.querySelectorAll(".e-content-table tbody tr").length?0:this.parent.element.querySelectorAll(".e-content-table tbody tr")[0].children.length;a.slotsPerDay=d/a.dateRender.length,a.eventHeight=i(a.parent.element,"e-appointment"),a.renderEvents(r,s)},n.prototype.getEventDaysCount=function(e){var t=e.startTime,i=e.endTime;return Math.abs(i.getTime()-t.getTime())/864e5},n.prototype.generateEventData=function(e){var t=this.parent.element.querySelector(".e-inline-subject"),i=t?t.value:e?e.innerHTML:"",n={};return n.subject=i,n.startTime=this.parent.activeCellsData.startTime,n.endTime=this.parent.activeCellsData.endTime,n.isAllDay=this.parent.activeCellsData.isAllDay,this.parent.activeCellsData.groupIndex>=0&&(n.groupIndex=this.parent.activeCellsData.groupIndex),n},n.prototype.eventEdit=function(e){var t,i=this.parent.element.querySelector(".e-inline-subject");if(i)t=i.value;else{var n=e.querySelector(".e-subject"),s=e.querySelector(".e-time");if(t=n.innerText,i=sf.base.createElement("input",{className:"e-inline-subject",attrs:{value:t}}),sf.base.addClass([n],"e-disable"),sf.base.closest(e,".e-more-popup-wrapper"))e.insertBefore(i,n);else if(["Agenda","MonthAgenda"].indexOf(this.parent.options.currentView)>-1){var o=e.querySelector(".e-subject-wrap");o.insertBefore(i,o.firstChild)}else{var r=["TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"].indexOf(this.parent.options.currentView)>-1?".e-inner-wrap":".e-appointment-details";e.querySelector(r).insertBefore(i,s)}i.focus()}i.setSelectionRange(t.length,t.length)},n}(),ae=function(){function i(e,t,i,n,s,o){window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=s,this.options=i,this.activeViewOptions=n,this.dataId=e,window.sfBlazor.setCompInstance(this),this.isAdaptive=sf.base.Browser.isDevice,this.isPrintSchedule=!sf.base.isNullOrUndefined(o),this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:i.isGroupAdaptive,isIgnoreOccurrence:!1,groupIndex:0,action:!1,isBlock:!1,isCustomMonth:!0},this.isAdaptive&&!this.element.classList.contains("e-device")&&sf.base.addClass([this.element],"e-device"),this.render()}return i.prototype.render=function(e){if(void 0===e&&(e=!1),this.setHeight(),this.workCellAction=new J(this),this.initializeLayout(this.options.currentView),this.eventBase=new B(this),this.isPrintSchedule||(this.options.allowKeyboardInteraction&&!this.keyboardInteractionModule?this.keyboardInteractionModule=new $(this):!this.options.allowKeyboardInteraction&&this.keyboardInteractionModule&&this.keyboardInteractionModule.destroy(),this.options.allowDragAndDrop&&(this.dragAndDropModule=new se(this)),this.options.allowResizing&&(this.resizeModule=new ie(this))),this.options.allowInline&&(this.inlineModule=new re(this)),this.isPrintSchedule||e||this.wireEvents(),this.virtualScrollModule){var t=this.virtualScrollModule.getResourceCount();this.dotNetRef.invokeMethodAsync("SetRenderedCount",t)}},i.prototype.initializeLayout=function(e){switch(this.activeView&&this.activeView.destroy(),e){case"Day":case"Week":case"WorkWeek":this.activeView=new H(this);break;case"TimelineDay":case"TimelineWorkWeek":case"TimelineWeek":this.activeView=new _(this);break;case"Month":this.activeView=new V(this);break;case"MonthAgenda":this.activeView=new W(this);break;case"TimelineMonth":this.activeView=new Y(this);break;case"Year":case"TimelineYear":this.activeView=new G(this);break;case"Agenda":this.activeView=new Q(this)}this.activeView&&(this.virtualScrollModule&&(this.virtualScrollModule=null),(-1===["Agenda","Year"].indexOf(this.options.currentView)||"TimelineYear"===this.options.currentView&&"Vertical"===this.activeViewOptions.orientation)&&this.activeViewOptions.allowVirtualScrolling&&this.activeViewOptions.group.resources.length>0&&!this.uiStateValues.isGroupAdaptive&&(this.virtualScrollModule=new oe(this),this.isTimelineView()?this.uiStateValues.top=0:(this.virtualScrollModule.isHorizontalScroll=!0,this.uiStateValues.left=0)),this.globalize=new sf.base.Internationalization(this.options.locale),this.activeView.getRenderDates(),this.activeView.renderLayout())},i.prototype.scrollContentReady=function(e){if(this.virtualScrollModule){if(e){this.virtualScrollModule.updateVirtualTrackHeight(this.element.querySelector(".e-virtual-track"));var t=this.element.querySelector(".e-current-timeline");sf.base.isNullOrUndefined(t)||(t.style.height=this.element.querySelector(".e-content-table").offsetHeight+"px");var i={cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0};return void this.onScrollUiUpdate(i)}this.virtualScrollModule.setTranslateValue(),this.virtualScrollModule.setTabIndex()}},i.prototype.scrollToResource=function(e,t){var i=this.element.querySelector(".e-content-wrap");if(this.options.currentView.indexOf("Timeline")<0||"TimelineYear"===this.options.currentView&&"Horizontal"===this.activeViewOptions.orientation){t=this.activeViewOptions.group.byDate?t+1:t;var n=this.element.querySelectorAll(".e-date-header-wrap tbody tr")[t];i.scrollLeft=n.children[e].offsetLeft}else if(this.virtualScrollModule&&"TimelineYear"!==this.options.currentView){var s=this.element.querySelector(".e-virtual-track"),o=this.element.querySelector(".e-resource-column-wrap"),r=Math.round(s.offsetHeight/parseInt(o.getAttribute("data-expanded-count"),10));if(i.scrollTop=e*r-(this.virtualScrollModule.bufferCount-1)*r,this.virtualScrollModule.virtualScrolling(),this.options.rowAutoHeight)(a=this.element.querySelector('.e-work-cells[data-group-index="'+e+'"]'))&&!a.parentElement.classList.contains("e-hidden")&&(i.scrollTop=i.scrollTop<a.offsetTop?a.offsetTop:i.scrollTop+a.offsetTop);else i.scrollTop=e*r}else{var a;(a=this.element.querySelector('.e-work-cells[data-group-index="'+e+'"]'))&&!a.parentElement.classList.contains("e-hidden")&&(i.scrollTop=a.offsetTop)}},i.prototype.dataReady=function(e,t){this.activeView&&([].slice.call(this.element.querySelectorAll(".e-schedule-event-clone")).forEach((function(e){sf.base.remove(e)})),this.activeView.onDataReady({},e,t))},i.prototype.isTimelineView=function(){return-1!==this.options.currentView.indexOf("Timeline")},i.prototype.isAllDayCell=function(e){return!(!(["Month","TimelineMonth","TimelineYear","MonthAgenda"].indexOf(this.options.currentView)>-1||e.classList.contains("e-all-day-cells")||e.classList.contains("e-header-cells"))&&this.activeViewOptions.timeScale.enable)||!!(this.isTimelineView()&&this.activeViewOptions.headerRows.length>0&&"Hour"!==this.activeViewOptions.headerRows.slice(-1)[0].option)},i.prototype.getDateFromElement=function(e){var t=e.getAttribute("data-date");if(!sf.base.isNullOrUndefined(t)){var i=parseInt(t,10),n=new Date(i),s=new Date(+n+6e4*n.getTimezoneOffset());return new Date(s.getTime()+6e4*(s.getTimezoneOffset()-n.getTimezoneOffset()))}},i.prototype.getMsFromDate=function(e){return new Date(+e-6e4*e.getTimezoneOffset()).getTime()},i.prototype.getTimeString=function(e){return this.globalize.formatDate(e,{format:this.options.timeFormat,type:"time"})},i.prototype.getDateTime=function(e){return e instanceof Date?new Date(e.getTime()):new Date(e)},i.prototype.getStartEndTime=function(e){if(!sf.base.isNullOrUndefined(e)&&""!==e){var t=this.resetTime(this.getCurrentTime()),i=e.split(":");return 2===i.length&&t.setHours(parseInt(i[0],10),parseInt(i[1],10),0),t}return null},i.prototype.resetTime=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},i.prototype.getCurrentTime=function(){if(this.options.timezone){var e=(new Date).getTimezoneOffset();return function(e,t,i){"string"==typeof t&&(t=y(e,t)),"string"==typeof i&&(i=y(e,i));var n=e.getTimezoneOffset(),s=(e=new Date(e.getTime()+6e4*(t-i))).getTimezoneOffset();return new Date(e.getTime()+6e4*(s-n))}(new Date,e,this.options.timezone)}return new Date},i.prototype.boundaryValidation=function(e,t){var i={left:!1,right:!1,top:!1,bottom:!1},n=this.element.querySelector(".e-content-wrap").getBoundingClientRect();return e<n.top+30+window.pageYOffset&&e>n.top+window.pageYOffset&&(i.top=!0),e>n.bottom-30+window.pageYOffset&&e<n.bottom+window.pageYOffset&&(i.bottom=!0),t<n.left+30+window.pageXOffset&&t>n.left+window.pageXOffset&&(i.left=!0),t>n.right-30+window.pageXOffset&&t<n.right+window.pageXOffset&&(i.right=!0),i},i.prototype.onCellMouseDown=function(e){this.keyboardInteractionModule&&this.keyboardInteractionModule.onCellMouseDown(e)},i.prototype.getNavigateView=function(){return this.isTimelineView()?"TimelineMonth"===this.options.currentView||"TimelineYear"===this.options.currentView?"TimelineDay":"Agenda":"Day"},i.prototype.addSelectedClass=function(e,t){for(var i=0,n=e;i<n.length;i++){n[i].setAttribute("aria-selected","true")}sf.base.addClass(e,"e-selected-cell"),t&&(t.setAttribute("tabindex","0"),t.focus())},i.prototype.removeSelectedClass=function(){for(var e=this.getSelectedElements(),t=0,i=e;t<i.length;t++){var n=i[t];n.setAttribute("aria-selected","false"),n.removeAttribute("tabindex")}sf.base.removeClass(e,"e-selected-cell")},i.prototype.setWorkHours=function(e,t,i,n){var s;s=this.getWorkHourCells(e,t,i,n),sf.base.addClass(s,"e-work-hours")},i.prototype.resetWorkHours=function(e,t,i,n){if(void 0===e&&(e=this.activeView.renderDates),e&&t&&i){var s=this.getWorkHourCells(e,t,i,n);sf.base.removeClass(s,"e-work-hours")}else{var o=[].slice.call(this.element.querySelectorAll(".e-work-hours"));sf.base.removeClass(o,"e-work-hours")}},i.prototype.getWorkHourCells=function(e,t,i,n){if(["Agenda","MonthAgenda","Month","TimelineMonth"].indexOf(this.options.currentView)>-1)return[];var s=this.getStartEndTime(t),o=this.getStartEndTime(i),r=this.getContentTable();if(sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(o)||!r)return[];s.setMilliseconds(0),o.setMilliseconds(0);var a=this.activeView.getStartHour();s<a&&(s=a);var l=this.activeView.getEndHour();o>l&&(o=l);for(var d=6e4*this.activeViewOptions.timeScale.interval/this.activeViewOptions.timeScale.slotCount,h=Math.round((s.getTime()-a.getTime())/d),c=Math.ceil((o.getTime()-a.getTime())/d),p=h,u=c,f=[],m=0,g=e;m<g.length;m++){var v=g[m];v=this.getDateTime(v),this.resetTime(v);var b=this.activeView.renderDates,y=this.getIndexOfDate(b,v);if(y>=0){if(this.isTimelineView()){var w=Math.round((l.getTime()-a.getTime())/d);h=p+y*w,c=u+y*w}for(var C=h;C<c;C++)if(this.isTimelineView()){var S=sf.base.isNullOrUndefined(n)?0:n;f.push(r.rows[S].cells[C])}else if(sf.base.isNullOrUndefined(n))f.push(r.rows[C].cells[y]);else{var E=[].slice.call(r.rows[C].querySelectorAll('.e-work-cells[data-group-index="'+n+'"]'));f.push(E[y])}}}return f},i.prototype.getCellDetails=function(e){var t=e instanceof Array?e:[e],i=sf.base.getElement(t[0]),n=sf.base.getElement(t.slice(-1)[0]),s=this.getDateFromElement(i),o=this.getDateFromElement(n);if(!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(o)){var r=this.isTimelineView()&&!sf.base.isNullOrUndefined(n.getAttribute("colSpan"))&&this.activeViewOptions.headerRows.length>0,a=r?parseInt(n.getAttribute("colSpan"),10):1,l={startTime:s,endTime:o=!this.activeViewOptions.timeScale.enable||r||n.classList.contains("e-all-day-cells")||n.classList.contains("e-header-cells")?h(new Date(o.getTime()),a):this.activeView.getEndDateFromStartDate(o),isAllDay:this.isAllDayCell(i),element:i},d=i.getAttribute("data-group-index");return sf.base.isNullOrUndefined(d)||(l.groupIndex=parseInt(d,10)),l}},i.prototype.getSelectedElements=function(){return[].slice.call(this.element.querySelectorAll(".e-selected-cell"))},i.prototype.selectCell=function(e){this.removeSelectedClass(),this.addSelectedClass([e],e)},i.prototype.getAllDayRow=function(){return this.element.querySelector(".e-all-day-row")},i.prototype.getTableRows=function(){return[].slice.call(this.element.querySelectorAll(".e-content-table tbody tr:not(.e-hidden)"))},i.prototype.getWorkCellElements=function(){return[].slice.call(this.element.querySelectorAll(".e-work-cells"))},i.prototype.getContentTable=function(){return this.element.querySelector(".e-content-table tbody")},i.prototype.getIndexOfDate=function(e,t){return e.map(Number).indexOf(+t)},i.prototype.setHeight=function(){this.element.style.height=sf.base.formatUnit(this.options.height)},i.prototype.setDimensions=function(){this.setHeight();var e={cssProperties:this.getCssProperties()};this.onScrollUiUpdate(e)},i.prototype.getCssProperties=function(){return{border:this.options.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.options.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.options.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.options.enableRtl?"paddingRight":"paddingLeft"}},i.prototype.onScrollUiUpdate=function(e){this.activeView&&this.activeView.onScrollUiUpdate(e)},i.prototype.onVirtualScroll=function(){this.virtualScrollModule&&this.virtualScrollModule.virtualScrolling()},i.prototype.removeNewEventElement=function(){var e=this.element.querySelector(".e-new-event");sf.base.isNullOrUndefined(e)||sf.base.remove(e)},i.prototype.closeSidebar=function(e){var t=this.element.querySelector(".e-sidebar");!sf.base.closest(e.target,".e-icon-menu,.e-sidebar")&&t&&t.classList.contains("e-open")&&this.element.querySelector(".e-icon-menu").click()},i.prototype.closeHeaderPopup=function(e){var t=sf.base.closest(e.target,".e-date-range,.e-header-popup,.e-day,.e-selected"),i=this.element.querySelector(".e-header-popup");sf.base.isNullOrUndefined(t)&&i&&this.headerPopup&&this.headerPopup.hide()},i.prototype.closeQuickPopup=function(e){var t=".e-quick-popup-wrapper,.e-header-cells,.e-all-day-cells,.e-work-cells,.e-appointment,.e-popup",i=sf.base.closest(e.target,t),n=this.element.querySelector(".e-quick-popup-wrapper");sf.base.isNullOrUndefined(i)&&(n&&n.childElementCount>0&&this.quickPopup&&this.quickPopup.hide(),sf.base.closest(e.target,".e-appointment,.e-header-cells")&&this.removeNewEventElement(),!sf.base.closest(e.target,t)&&this.quickPopup&&(this.quickPopup.hide(),this.removeNewEventElement()))},i.prototype.beforeOpenEditor=function(){this.onClosePopup(),this.removeNewEventElement()},i.prototype.createCalendarPopup=function(){var t=this.element.querySelector(".e-header-popup");t&&!this.headerPopup&&(this.headerPopup=new sf.popups.Popup(t,{actionOnScroll:"hide",targetType:"relative",relateTo:this.isAdaptive?this.element.querySelector(".e-schedule-toolbar"):this.element.querySelector(".e-date-range"),position:{X:"left",Y:"bottom"},enableRtl:this.options.enableRtl}),this.headerPopup.isStringTemplate=!0),this.headerPopup&&(this.headerPopup.element.classList.contains(e)?this.headerPopup.hide():this.headerPopup.show())},i.prototype.ctrlKeySelect=function(e){if(!this.isAdaptive){this.selectedElements=[],this.selectedElements=[].slice.call(this.element.querySelectorAll("."+t));var i=this.element.querySelector('.e-appointment[data-guid="'+e+'"]');this.eventBase.getSelectedEventElements(i)}},i.prototype.createQuickPopup=function(e,t,i){if(this.isAdaptive&&sf.base.isNullOrUndefined(e)&&!i){var n=this.element.querySelector(".e-new-event");return sf.base.isNullOrUndefined(n)&&(n=sf.base.createElement("div",{className:"e-new-event",innerHTML:'<div class="e-title">New Event</div>'})),void this.currentCell.appendChild(n)}var s,o=this.element.querySelector(".e-quick-popup-wrapper");sf.base.isNullOrUndefined(e)||(s=!0,this.currentCell=this.element.querySelector('.e-appointment[data-guid="'+e+'"]'),this.element.querySelectorAll('.e-appointment[data-guid="'+e+'"]').length>1&&this.activeEventData&&!sf.base.isNullOrUndefined(this.activeEventData.element)&&this.activeEventData.element.getAttribute("data-guid")===e&&(this.currentCell=this.activeEventData.element),this.activeEventData={element:this.currentCell,guid:[e]}),sf.base.isNullOrUndefined(this.currentCell)&&(this.currentCell=this.element.querySelector(".e-table-container")),!(this.currentCell.classList.contains("e-work-cells")||this.currentCell.classList.contains("e-all-day-cells"))||0!==this.getSelectedElements().length&&"TimelineYear"!==this.options.currentView||this.selectCell(this.currentCell),i||(o&&!this.quickPopup&&(this.quickPopup=new sf.popups.Popup(o,{targetType:this.isAdaptive?"container":"relative",enableRtl:this.options.enableRtl,relateTo:this.currentCell,open:this.quickPopupOpen.bind(this),hideAnimation:this.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.isAdaptive?{X:"fit",Y:"fit"}:this.options.enableRtl?{X:"flip",Y:"fit"}:{X:"none",Y:"fit"},position:this.isAdaptive||this.options.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.isAdaptive?document.body:this.element,zIndex:this.isAdaptive?1004:3}),this.quickPopup.isStringTemplate=!0),this.quickPopup&&(this.isAdaptive&&sf.base.addClass([this.quickPopup.element],"e-device"),this.quickPopup.relateTo=this.currentCell,s&&this.applyEventColor(),this.adjustPopupPosition()),t&&(this.eventBase.removeSelectedAppointmentClass(),this.eventBase.addSelectedAppointments([].slice.call(this.element.querySelectorAll('div[data-guid="'+e+'"]'))),this.activeEventData.element.focus()))},i.prototype.applyEventColor=function(){var e="";e="Agenda"===this.options.currentView||"MonthAgenda"===this.options.currentView?this.options.enableRtl?"border-right-color":"border-left-color":"background-color";var t=this.activeEventData.element.style[e];if(""!==t){var i=this.quickPopup.element.querySelector(".e-popup-header"),n=this.quickPopup.element.querySelector(".e-popup-footer");"block"===getComputedStyle(n).display&&(i=this.quickPopup.element.querySelector(".e-subject"))&&(i.style.borderLeftColor=t,t="rgba("+t.match(/\d+/g).slice(0,3).join()+",0.3)"),i&&(i.style.backgroundColor=t)}},i.prototype.inlineEdit=function(e,t,i,n,s){void 0===i&&(i=null),this.inlineModule.inlineEdit(e,t,i,n,s)},i.prototype.inlineCrudActions=function(e){if(sf.base.closest(e,".e-inline-appointment")){var t=this.inlineModule.generateEventData(e);t.startTime=v(t.startTime),t.endTime=v(t.endTime),this.dotNetRef.invokeMethodAsync("AddInlineAppointment",t,t.groupIndex)}else{var i=e.value;this.dotNetRef.invokeMethodAsync("SaveInlineAppointment",i)}this.inlineModule.removeInlineAppointmentElement()},i.prototype.quickPopupOpen=function(){if(this.isAdaptive)this.quickPopup.element.style.top="0px";else if(this.quickPopup.element.querySelector(".e-cell-popup")){var e=this.quickPopup.element.querySelector(".e-subject");e&&e.focus()}else{var t=this.quickPopup.element.querySelector(".e-event-edit"),i=this.quickPopup.element.querySelector(".e-edit");if(t&&t.hasAttribute("disabled")||i&&i.hasAttribute("disabled")){var n=this.quickPopup.element.querySelector(".e-event-delete"),s=this.quickPopup.element.querySelector(".e-delete");if(n&&n.hasAttribute("disabled")||s&&s.hasAttribute("disabled")){var o=this.quickPopup.element.querySelector(".e-close");o&&o.focus()}else n&&n.focus(),s&&s.focus()}else t&&t.focus(),i&&i.focus()}},i.prototype.adjustPopupPosition=function(){var e=this.quickPopup.element.style.display;if(this.quickPopup.element.style.display="block",this.isAdaptive)this.quickPopup.element.removeAttribute("style"),this.quickPopup.element.style.display="block",this.quickPopup.element.style.height=sf.base.formatUnit(this.isTapHold?65:window.innerHeight);else{var t=this.virtualScrollModule&&this.virtualScrollModule.isHorizontalScroll&&!sf.base.isNullOrUndefined(sf.base.closest(this.currentCell,".e-content-wrap")),i=this.element.querySelector(".e-content-wrap table");this.quickPopup.offsetX=t&&!this.options.enableRtl?s(i)+10:10,this.quickPopup.collision={X:this.options.enableRtl?"flip":"none",Y:"fit"},this.quickPopup.position={X:this.options.enableRtl?"left":"right",Y:"top"},this.quickPopup.dataBind(),this.quickPopup.refreshPosition(null,!0);var o=sf.popups.isCollide(this.quickPopup.element,this.element);if(o.indexOf(this.options.enableRtl?"left":"right")>-1)this.quickPopup.offsetX=-this.currentCell.offsetWidth-10-this.quickPopup.element.offsetWidth,t&&!this.options.enableRtl&&(this.quickPopup.offsetX=s(i)+this.quickPopup.offsetX),this.quickPopup.dataBind(),this.quickPopup.refreshPosition(null,!0),sf.popups.isCollide(this.quickPopup.element,this.element).indexOf("left")>-1&&(this.quickPopup.position={X:"center",Y:"center"},this.quickPopup.collision={X:"fit",Y:"fit"},this.quickPopup.offsetX=-this.quickPopup.element.offsetWidth/2,this.quickPopup.dataBind());if(this.virtualScrollModule&&!this.virtualScrollModule.isHorizontalScroll&&(o.indexOf("top")>-1||o.indexOf("bottom")>-1)){var r=n(i);this.quickPopup.offsetY=r,this.quickPopup.dataBind()}}this.quickPopup.element.style.display=e,this.quickPopup.dataBind(),this.quickPopup.show()},i.prototype.onQuickPopupClose=function(e){void 0===e&&(e=!1),this.isTapHold=!1,this.quickPopup&&this.quickPopup.hide(),e||this.eventBase.focusElement()},i.prototype.onClosePopup=function(){this.quickPopup&&this.quickPopup.hide(),this.eventBase.focusElement()},i.prototype.createMoreEventPopup=function(e,t){var i=this.element.querySelector(".e-more-popup-wrapper");if(i&&!this.morePopup&&(this.morePopup=new sf.popups.Popup(i,{targetType:this.isAdaptive?"container":"relative",enableRtl:this.options.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},open:this.morePopupOpen.bind(this),collision:this.isAdaptive?{X:"fit",Y:"fit"}:this.options.enableRtl?{X:"flip",Y:"fit"}:{X:"flip",Y:"flip"},viewPortElement:this.isAdaptive?document.body:this.element,zIndex:this.isAdaptive?1002:2}),this.morePopup.isStringTemplate=!0),this.morePopup){if("Year"===this.options.currentView){var n=this.element.querySelector(':not(.e-other-month)[data-date="'+t+'"]');n&&(this.activeCellsData=this.getCellDetails(n))}for(var s=this.morePopup.element.querySelectorAll(".e-appointment"),o=0;o<s.length;o++){var r=s[o];this.eventBase.wireAppointmentEvents(r,"Year"===this.options.currentView,!0)}var a=this.element.querySelector("."+e+'[data-date="'+t+'"]');"Year"===this.options.currentView?a=-1!==e.indexOf("e-other-month")?sf.base.closest(a,".e-other-month"):this.element.querySelector(':not(.e-other-month)[data-date="'+t+'"]'):this.activeCellsData=this.getCellDetails(a),this.morePopup&&this.isAdaptive&&sf.base.addClass([this.morePopup.element],"e-device"),this.morePopup.relateTo=a,this.morePopup.show()}},i.prototype.morePopupOpen=function(){var e=this.morePopup.element.querySelector(".e-header-date");e&&e.focus()},i.prototype.onMoreEventPopupClose=function(){if(this.morePopup&&this.morePopup.element.classList.contains(e)){if(this.activeCellsData&&this.activeCellsData.element)if("Year"===this.options.currentView)this.selectCell(this.activeCellsData.element);else{var t=void 0,i=parseInt(this.activeCellsData.element.getAttribute("data-date"),10),n=parseInt(this.activeCellsData.element.getAttribute("data-group-index"),10);(t=isNaN(n)?this.element.querySelector('.e-more-indicator[data-start="'+i+'"]'):this.element.querySelector('.e-more-indicator[data-start="'+i+'"][data-group-index="'+n+'"]'))&&t.focus()}this.onQuickPopupClose(),this.morePopup.hide()}},i.prototype.getTooltipPosition=function(e,t){var i;i=t?this.element.querySelector(".e-quick-popup-wrapper"):document.querySelector("#"+this.element.id+"_dialog_wrapper .e-dlg-content");var n=(t?i.querySelector("#QuickInfo"+e):i.querySelector("#"+e)).getBoundingClientRect(),s=i.getBoundingClientRect(),o={};o[e]="top:"+(n.bottom-s.top+i.scrollTop+9)+"px;left:"+(n.left-s.left+i.scrollLeft+n.width/2)+"px;",this.dotNetRef.invokeMethodAsync("ErrorPositioning",o,t)},i.prototype.scrollTo=function(e,t){t=sf.base.isNullOrUndefined(t)?t:this.getDateTime(t),this.activeView.scrollToDate&&sf.base.isNullOrUndefined(e)&&t?this.activeView.scrollToDate(t):this.activeView.scrollToHour&&this.activeView.scrollToHour(e,t)},i.prototype.print=function(){var e=this.element.cloneNode(!0);e.id=this.element.id+"_print",document.body.appendChild(e);var t=this.getScrollableElement(this.element),i=t.scrollTop,n=t.scrollLeft;this.printScheduler(e,n,i,!0)},i.prototype.printScheduler=function(e,t,i,n){for(var s=this,o="",r=0,a=[].slice.call(document.querySelectorAll("base, link, style"));r<a.length;r++){o+=a[r].outerHTML}var l=sf.base.createElement("div");e.style.width=e.offsetWidth+"px";var d=n?550:window.outerHeight,h=n?100*Math.round(parseInt(e.style.width,10)/100):window.outerWidth;l.appendChild(e);var c=window.open("","print","height="+d+",width="+h+",tabbar=no");c.document.write("<!DOCTYPE html> <html><head>"+o+"</head><body>"+l.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),c.document.close(),c.focus(),setTimeout((function(){var e=s.getScrollableElement(c.document.body);e.scrollLeft=t,e.scrollTop=i;var n=c.document.querySelector(".e-date-header-wrap");n&&(n.scrollLeft=e.scrollLeft);var o=c.document.querySelector(".e-time-cells-wrap");o&&(o.scrollTop=i),c.print(),c.close()}),2e3)},i.prototype.getScrollableElement=function(e){var t="MonthAgenda"===this.options.currentView?".e-appointment-wrap":".e-content-wrap";return e.querySelector(t)},i.prototype.allDayRowScrollUpdate=function(){var e=this.element.querySelector(".e-date-header-wrap"),t=this.element.querySelector(".e-all-day-row");if(!sf.base.isNullOrUndefined(t)){if("auto"!==this.options.height&&this.options.enableAllDayScroll)e.classList.contains("e-all-day-auto")&&sf.base.removeClass([e],"e-all-day-auto"),this.eventBase.allDayExpandScroll(e);else if(sf.base.addClass([e],"e-all-day-auto"),e.classList.contains("e-all-day-scroll")&&sf.base.removeClass([e],"e-all-day-scroll"),this.uiStateValues.expand){var i=[].slice.call(this.element.querySelectorAll(".e-all-day-cells"));i[0].style.height=t.style.height?t.style.height:i[1].style.height}if(this.uiStateValues.expand){var n={cssProperties:this.getCssProperties()};this.onScrollUiUpdate(n)}else t.style.height=""}},i.prototype.wireEvents=function(){this.wireTouchEvents(),sf.base.EventHandler.add(window,"resize",this.onScheduleResize,this),sf.base.EventHandler.add(window,"orientationchange",this.onScheduleResize,this),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.onDocumentClick,this)},i.prototype.unwireEvents=function(){this.unwireTouchEvents(),sf.base.EventHandler.remove(window,"resize",this.onScheduleResize),sf.base.EventHandler.remove(window,"orientationchange",this.onScheduleResize),sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.onDocumentClick)},i.prototype.wireTouchEvents=function(){var e=this.element.querySelector(".e-table-container");e&&sf.base.isNullOrUndefined(this.touchObj)&&(this.touchObj=new sf.base.Touch(e,{tapHold:this.tapHoldHandler.bind(this)}))},i.prototype.unwireTouchEvents=function(){this.touchObj&&this.touchObj.destroy()},i.prototype.tapHoldHandler=function(e){var i=sf.base.closest(e.originalEvent.target,".e-appointment");if(!sf.base.isNullOrUndefined(i)&&this.isAdaptive){var n=i.getAttribute("data-guid");return this.isTapHold=!0,this.selectedElements=[].slice.call(this.element.querySelectorAll("."+t)),this.eventBase.getSelectedEventElements(i),void this.dotNetRef.invokeMethodAsync("OnTapHold",n,this.isTapHold)}},i.prototype.onScheduleResize=function(){this.quickPopup&&this.quickPopup.hide(),this.morePopup&&this.morePopup.hide(),this.activeView.resetColWidth(),this.onScrollUiUpdate({cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0}),this.dataReady()},i.prototype.onDocumentClick=function(t){var i=t.target;if(this.options.allowInline){var n=this.element.querySelector(".e-inline-subject");!i.classList.contains("e-inline-subject")&&n&&""!==n.value?this.inlineCrudActions(n):i.classList.contains("e-inline-subject")||this.inlineModule.removeInlineAppointmentElement()}this.closeHeaderPopup(t),this.closeSidebar(t),this.closeQuickPopup(t),this.eventBase&&this.eventBase.appointmentBorderRemove(t),!this.morePopup||sf.base.closest(i,".e-more-popup-wrapper")||i.classList.contains("e-more-indicator")||sf.base.closest(i,"."+e)||sf.base.closest(i,".e-work-cells")||this.morePopup.hide()},i.prototype.setPersistence=function(){if(this.options.enablePersistence){var e={selectedDate:this.options.selectedDate,currentView:this.options.currentView,viewIndex:this.options.viewIndex},t=this.element.querySelector(".e-content-wrap");sf.base.isNullOrUndefined(t)||(e.top=t.scrollTop,e.left=t.scrollLeft),window.localStorage.setItem(this.element.id,JSON.stringify(e))}},i.prototype.destroy=function(){this.isDestroyed=!0,this.setPersistence(),this.unwireEvents(),this.headerPopup&&this.headerPopup.destroy(),this.quickPopup&&this.quickPopup.destroy(),this.morePopup&&this.morePopup.destroy(),this.keyboardInteractionModule&&this.keyboardInteractionModule.destroy(),this.activeView&&(this.activeView.destroy(),this.activeView=null)},i}();return{initialize:function(e,t,i,n,s){t&&e&&(i.selectedDate=new Date(i.selectedDate),i.minDate=new Date(i.minDate),i.maxDate=new Date(i.maxDate),sf.base.isNullOrUndefined(n.group.resources)&&(n.group.resources=[]),new ae(e,t,i,n,s).dataReady(),t.querySelector(".e-content-placeholder")&&(t.querySelector(".e-content-placeholder").style.display="none"),s.invokeMethodAsync("TriggerCreatedEvent"))},updateLayout:function(e,t,i){t.selectedDate=new Date(t.selectedDate),t.minDate=new Date(t.minDate),t.maxDate=new Date(t.maxDate),sf.base.isNullOrUndefined(i.group.resources)&&(i.group.resources=[]);var n=window.sfBlazor.getCompInstance(e);n&&n.element&&(n.isTimelineView()&&n.options.selectedDate!==t.selectedDate&&(n.uiStateValues.isInitial=!0),n.options=t,n.activeViewOptions=i,n.uiStateValues.isGroupAdaptive=t.isGroupAdaptive,n.render(!0),n.setPersistence(),n.allDayRowScrollUpdate())},printWithOptions:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){var s=Object.assign({},n.options),o=Object.assign({},n.activeViewOptions);s.selectedDate=new Date(s.selectedDate),s.minDate=new Date(s.minDate),s.maxDate=new Date(s.maxDate);var r=n.element.cloneNode(!0);r.id=r.id+"_print";var a=n.getScrollableElement(n.element),l=a.scrollTop,d=a.scrollLeft;document.body.appendChild(r),s.height=i.height,s.width=i.width,new ae(null,r,s,o,t,!0),"MonthAgenda"!==s.currentView&&n.dataReady(void 0,void 0),n.printScheduler(r,d,l),n.destroy()}},loadCldr:function(e){sf.base.loadCldr(JSON.parse(e))},createCalendarPopup:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.createCalendarPopup()},exportSave:function(e,t){if(navigator.msSaveBlob){for(var i=window.atob(t),n=new Uint8Array(i.length),s=0;s<i.length;s++)n[s]=i.charCodeAt(s);var o=new Blob([n.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(o,e)}else{var r=document.createElement("a");r.download=e,r.href="data:application/octet-stream;base64,"+t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},exportToICS:function(e,t){var i=new Blob([e],{type:"data:text/calendar;charset=utf8"});if(t=(t||"Calendar")+".ics",navigator.msSaveBlob)navigator.msSaveBlob(i,t);else{var n=document.createElementNS("http://www.w3.org/1999/xhtml","a");n.download=t,n.href=URL.createObjectURL(i);var s=document.createEvent("MouseEvent");s.initEvent("click",!0,!0),n.dispatchEvent(s),setTimeout((function(){URL.revokeObjectURL(n.href),n.href=void 0}))}},scrollTo:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.scrollTo(t,i)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.destroy()},validation:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.getTooltipPosition(t,i)},addSelectedEventClass:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.eventBase&&i.eventBase.addSelectedAppointments([].slice.call(i.element.querySelectorAll('div[data-guid="'+t+'"]')))},addSelectedClass:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.currentCell&&t.selectCell(t.currentCell)},createQuickPopup:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.createQuickPopup(t,i,n)},adjustPopupPosition:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.adjustPopupPosition()},closeQuickInfoPopup:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.onQuickPopupClose()},createMoreEventPopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.createMoreEventPopup(t,i)},moreEventPopupClose:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.onMoreEventPopupClose()},dataReady:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&(s.uiStateValues.isGroupAdaptive=t,s.dataReady(i,n))},beforeOpenEditor:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.beforeOpenEditor()},scrollContentReady:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.scrollContentReady(t)},scrollToResource:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.scrollToResource(t,i)},printSchedule:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.print()},inlineEdit:function(e,t,i,n,s,o){void 0===n&&(n=null);var r=window.sfBlazor.getCompInstance(e);r&&r.element&&r.inlineEdit(t,i,n,s,o)},setWorkHours:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.setWorkHours(t,i,n,s)},resetWorkHours:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.resetWorkHours(t,i,n,s)},getSelectedDetails:function(e,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){if(i){var s=[];return(o=[].slice.call(n.element.querySelectorAll("."+t))).forEach((function(e){s.push(e.getAttribute("data-guid"))})),JSON.stringify(s)}var o=n.getSelectedElements(),r=n.getCellDetails(o);return r.startTime=v(r.startTime),r.endTime=v(r.endTime),JSON.stringify(r)}return null},ctrlKeySelect:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.ctrlKeySelect(t)},getTargetDetails:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element){var o=document.elementFromPoint(t,i),r=void 0;if(o&&"event"===n){if(r=sf.base.closest(o,".e-appointment"))return JSON.stringify(r.getAttribute("data-guid"))}else if(o&&"cell"===n){if(r=sf.base.closest(o,".e-header-cells,.e-all-day-cells,.e-work-cells")){var a=s.getCellDetails(r);return a.startTime=v(a.startTime),a.endTime=v(a.endTime),JSON.stringify(a)}}else if(o&&"resource"===n)return r=sf.base.closest(o,".e-resource-cells"),JSON.stringify(r.getAttribute("data-group-index"));return null}return null},getRowIndex:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){var s=document.elementFromPoint(t,i),o=void 0;return s?(o=sf.base.closest(s,".e-resource-cells"),JSON.stringify(o.parentNode.sectionRowIndex.toString())):null}return null},getElementInfo:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){var s=document.elementFromPoint(t,i);if(!s)return null;var o={elementType:""},r=sf.base.closest(s,".e-appointment");if(r)return o.elementType="event",o.guid=r.getAttribute("data-guid"),JSON.stringify(o);var a=sf.base.closest(s,".e-header-cells,.e-all-day-cells,.e-work-cells");if(a){a.classList.contains("e-work-cells")?o.elementType="workCell":a.classList.contains("e-all-day-cells")?o.elementType="allDayCell":a.classList.contains("e-header-cells")&&(o.elementType="headerCell");var l=n.getCellDetails(a);return o.startTime=v(l.startTime),o.endTime=v(l.endTime),o.isAllDay=l.isAllDay,"workCell"===o.elementType&&(o.groupIndex=parseInt(a.getAttribute("data-group-index"),10)),JSON.stringify(o)}var d=sf.base.closest(s,".e-resource-cells,.e-resource-column");if(d){o.elementType="resource";var h=!0;return h=("TimelineYear"!==n.options.currentView||!d.closest(".e-horizontal"))&&h,n.isTimelineView()&&h?(o.groupIndex=parseInt(d.getAttribute("data-group-index"),10),JSON.stringify(o)):(o.rowIndex=d.parentNode.sectionRowIndex,o.colIndex=d.cellIndex,JSON.stringify(o))}var c=sf.base.closest(s,".e-time-slots");if(c){var p=-1,u=void 0;n.isTimelineView()?(p=c.cellIndex,u=n.element.querySelectorAll(".e-content-wrap tbody td:nth-child("+(p+1)+") .e-work-cells")[0]):(p=c.parentElement.rowIndex,u=n.element.querySelectorAll(".e-content-wrap tbody tr:nth-child("+(p+1)+") .e-work-cells")[0]);l=n.getCellDetails(u);return o.startTime=v(l.startTime),o.endTime=v(l.endTime),o.elementType="majorSlot",c.classList.contains("e-time-cells")&&(o.elementType="minorSlot"),JSON.stringify(o)}}return null},updateEventProps:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enableIndicator=t.enableIndicator,i.options.enableMaxHeight=t.enableMaxHeight,i.options.ignoreWhitespace=t.ignoreWhitespace)}}}()},"./modules/sf-sidebar.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Sidebar=function(){"use strict";var e="Left",t=function(){function t(e,t,i){this.enableGestures=!0,this.isOpen=!1,this.closeOnDocumentClick=!1,this.isPositionChange=!1,this.dockSize="auto",this.width="auto",this.isSwipChange=!1,this.element=e,this.element.blazor__instance=this,this.dotnetRef=t,this.resetProperty(i)}return t.prototype.initialize=function(){this.setTarget(),this.addClass(),this.setType(),this.setCloseOnDocumentClick(),this.setMediaQuery(),sf.base.Browser.isDevice&&(this.windowWidth=window.innerWidth),this.wireEvents()},t.prototype.addClass=function(){var e=document.querySelector(".e-main-content");sf.base.isNullOrUndefined(e||this.targetElement)||sf.base.addClass([e||this.targetElement],["e-content-animation"])},t.prototype.setTarget=function(){this.targetElement=this.element.nextElementSibling,"string"==typeof this.target&&(this.target=document.querySelector(this.target)),this.target&&(this.target.insertBefore(this.element,this.target.children[0]),sf.base.addClass([this.element],"e-sidebar-absolute"),sf.base.addClass([this.target],"e-sidebar-context"),this.targetElement=this.getTargetElement())},t.prototype.getTargetElement=function(){for(var e=this.element.nextElementSibling;!sf.base.isNullOrUndefined(e)&&e.classList.contains("e-sidebar");)e=e.nextElementSibling;return e},t.prototype.hide=function(){var t=this,i=document.querySelector(".e-main-content")||this.targetElement;!this.enableDock&&i&&(i.style.transform="translateX(0px)",i.style[this.position===e?"marginLeft":"marginRight"]="0px"),this.destroyBackDrop(),this.isOpen=!1,this.enableDock&&setTimeout((function(){return t.sidebarTimeout()}),50),sf.base.EventHandler.add(this.element,"transitionend",this.transitionEnd,this)},t.prototype.show=function(e){var t=this;e&&setTimeout((function(){return t.setType()}),50),this.isOpen=!0,sf.base.EventHandler.add(this.element,"transitionend",this.transitionEnd,this)},t.prototype.transitionEnd=function(t){if(this.enableDock&&!this.isOpen){var i=this.position===e?"-100":"100",n=this.position===e?this.setDimension(this.dockSize):"-"+this.setDimension(this.dockSize),s="z-index: "+this.element.style.zIndex+"; width: "+this.element.style.width+";"+" transform: translateX("+i+"%) translateX("+n+")";this.element.setAttribute("style",s)}this.dotnetRef.invokeMethodAsync("SetDock"),sf.base.isNullOrUndefined(t)||this.dotnetRef.invokeMethodAsync("TriggerChange",this.isOpen,t),sf.base.EventHandler.remove(this.element,"transitionend",this.transitionEnd)},t.prototype.createBackDrop=function(e){(this.resetProperty(e),this.showBackdrop&&this.isOpen)&&(this.modal=sf.base.createElement("div"),this.modal.className="e-sidebar-overlay",this.modal.style.display="block",this.target?(document.querySelector(".e-main-content")||this.targetElement).appendChild(this.modal):document.body.appendChild(this.modal))},t.prototype.destroyBackDrop=function(){this.showBackdrop&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},t.prototype.enableGestureHandler=function(t){!this.isOpen&&(this.position===e&&"Right"===t.swipeDirection&&t.startX<=20&&t.distanceX>=50&&t.velocity>=.5||"Right"===this.position&&t.swipeDirection===e&&window.innerWidth-t.startX<=20&&t.distanceX>=50&&t.velocity>=.5)?(this.eventArgs={left:this.getXYValue(event,"X"),top:this.getXYValue(event,"Y")},this.dotnetRef.invokeMethodAsync("TriggerShow",this.eventArgs),this.show(),this.isSwipChange=!0):(this.isOpen&&this.position===e&&t.swipeDirection===e||"Right"===this.position&&"Right"===t.swipeDirection)&&(this.eventArgs={left:this.getXYValue(event,"X"),top:this.getXYValue(event,"Y")},this.dotnetRef.invokeMethodAsync("TriggerHide",this.eventArgs),this.hide(),this.isSwipChange=!1)},t.prototype.resize=function(){this.setMediaQuery(),sf.base.Browser.isDevice&&(this.windowWidth=window.innerWidth)},t.prototype.setEnableGestures=function(e){this.resetProperty(e),this.enableGestures?(this.mainContentElement=new sf.base.Touch(document.body,{swipe:this.enableGestureHandler.bind(this)}),this.sidebarElement=new sf.base.Touch(this.element,{swipe:this.enableGestureHandler.bind(this)})):this.mainContentElement&&this.sidebarElement&&(this.mainContentElement.destroy(),this.sidebarElement.destroy())},t.prototype.wireEvents=function(){this.setEnableGestures(),window.addEventListener("resize",this.resize.bind(this))},t.prototype.unWireEvents=function(){window.removeEventListener("resize",this.resize.bind(this)),sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentclickHandler),this.mainContentElement&&this.mainContentElement.destroy(),this.sidebarElement&&this.sidebarElement.destroy()},t.prototype.documentclickHandler=function(e){sf.base.closest(e.target,".e-control.e-sidebar")||(this.eventArgs={left:this.getXYValue(event,"X"),top:this.getXYValue(event,"Y")},this.dotnetRef.invokeMethodAsync("TriggerHide",this.eventArgs))},t.prototype.setCloseOnDocumentClick=function(e){this.resetProperty(e),this.closeOnDocumentClick?sf.base.EventHandler.add(document,"mousedown touchstart",this.documentclickHandler,this):sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentclickHandler)},t.prototype.setMediaQuery=function(){this.mediaQuery&&this.windowWidth!==window.innerWidth&&(window.matchMedia(this.mediaQuery).matches?this.dotnetRef.invokeMethodAsync("TriggerShow",null):this.isOpen&&this.dotnetRef.invokeMethodAsync("TriggerHide",null))},t.prototype.setDimension=function(e){return e="number"==typeof e?sf.base.formatUnit(e):"string"==typeof e?e.match(/px|%|em/)?e:sf.base.formatUnit(e):"100%"},t.prototype.sidebarTimeout=function(){var e=document.querySelector(".e-main-content")||this.targetElement,t=this.isOpen?this.setDimension(this.width):this.setDimension(this.dockSize),i=this.setDimension(this.element.getBoundingClientRect().width);e&&(this.isOpen?this.positionStyles(this.width,e,i,t):this.element.classList.contains("e-close")&&this.positionStyles(this.dockSize,e,i,t))},t.prototype.positionStyles=function(t,i,n,s){this.position===e?i.style.marginLeft="auto"===t?n:s:i.style.marginRight="auto"===t?n:s},t.prototype.siblingStyle=function(t,i){t.style[this.position===e?"marginLeft":"marginRight"]=i},t.prototype.resetProperty=function(e){sf.base.isNullOrUndefined(e)||(this.type=e.Type,this.isOpen=e.IsOpen,this.isPositionChange=this.position!==e.Position,this.position=e.Position,this.enableDock=e.EnableDock,this.showBackdrop=e.ShowBackdrop,this.target=e.Target,this.enableGestures=e.EnableGestures,this.closeOnDocumentClick=e.CloseOnDocumentClick,this.mediaQuery=e.MediaQuery,this.dockSize=e.DockSize,this.width=e.Width)},t.prototype.getXYValue=function(e,t){var i,n=e.changedTouches;if(!(i="X"===t?n?n[0].clientX:e.clientX:n?n[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var s=e.target.getBoundingClientRect();i=s?"X"===t?s.left:s.top:null}return Math.ceil(i)},t.prototype.setType=function(t){this.resetProperty(t);var i="auto"!==this.width&&this.enableDock?this.setDimension(this.width):this.element.getBoundingClientRect().width;i=this.enableDock&&!this.isOpen?this.dockSize:this.enableDock||this.isOpen?i:0;var n=document.querySelector(".e-main-content")||this.targetElement;if(n){this.isPositionChange&&(n.style[this.position===e?"marginRight":"marginLeft"]="0px"),n.style.transform="translateX(0px)",sf.base.Browser.isDevice||"Auto"===this.type||(n.style[this.position===e?"marginLeft":"marginRight"]="0px"),this.isPositionChange=!1;var s="string"==typeof i?i:i+"px",o=this.position===e?i:-i,r=n&&(this.enableDock||this.isOpen||this.isSwipChange);switch(this.type){case"Push":r&&this.siblingStyle(n,s);break;case"Slide":r&&(n.style.transform="translateX("+o+"px)",this.siblingStyle(n,s));break;case"Over":this.enableDock&&this.element.classList.contains("e-close")&&this.siblingStyle(n,s);break;case"Auto":sf.base.Browser.isDevice?(this.enableDock||this.isOpen||this.isSwipChange)&&this.siblingStyle(n,s):this.enableDock||this.isOpen||this.isSwipChange?this.siblingStyle(n,s):this.enableDock||this.isOpen||this.siblingStyle(n,s),this.isSwipChange=!1}}},t.prototype.destroy=function(){this.destroyBackDrop(),this.element.style.width=this.element.style.zIndex=this.element.style.transform="",this.windowWidth=null,this.mediaQuery=null;var e=document.querySelector(".e-main-content")||this.targetElement;sf.base.isNullOrUndefined(e)||(e.style.margin=e.style.transform=""),this.unWireEvents()},t}();return{initialize:function(e,i,n){return new t(e,i,n),this.isValid(e)&&(e.blazor__instance.initialize(),sf.base.removeClass([e],"e-hidden")),!(sf.base.Browser.isDevice||!sf.base.isNullOrUndefined(n.MediaQuery)&&!window.matchMedia(n.MediaQuery).matches)||!(!sf.base.Browser.isDevice||!n.IsOpen)},setType:function(e,t){this.isValid(e)&&e.blazor__instance.setType(t)},hide:function(e,t){this.isValid(e)&&(e.blazor__instance.setType(t),e.blazor__instance.hide())},show:function(e,t,i){this.isValid(e)&&(e.blazor__instance.setType(t),e.blazor__instance.createBackDrop(t),e.blazor__instance.show(i))},onPropertyChange:function(e,t){this.isValid(e)&&(void 0!==t.CloseOnDocumentClick&&e.blazor__instance.setCloseOnDocumentClick(t),void 0!==t.ShowBackdrop&&e.blazor__instance.createBackDrop(t))},destroy:function(e){this.isValid(e)&&e&&e.blazor__instance.destroy()},isValid:function(e){return!(!e||!e.blazor__instance)}}}()},"./modules/sf-signature.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Signature=function(){"use strict";var e,t,i=(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minDistance=5,t.previous=0,t.interval=30,t.timeout=null,t.isSignatureEmpty=!0,t.backgroundLoaded=null,t.clearArray=[],t.isBlazor=!1,t.isResponsive=!1,t.imageEditorPointsColl=[],t}return i(t,e),t.prototype.initialize=function(e,t){this.element=e,this.canvasContext=this.element.getContext("2d"),this.canvasContext.canvas.tabIndex=0,t&&(this.dotnetRef=t,this.isBlazor=!0,this.signatureValue&&this.loadPersistedSignature()),this.setHTMLProperties(),sf.base.isNullOrUndefined(this.signatureValue)&&this.updateSnapCollection(!0),this.wireEvents(),this.isBlazor||this.trigger("created",null)},t.prototype.wireEvents=function(){!sf.base.isNullOrUndefined(this.pointColl)||this.isReadOnly||this.disabled?this.pointColl&&(sf.base.EventHandler.add(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler,this),sf.base.EventHandler.add(document,"mouseup",this.mouseUpHandler,this)):(sf.base.EventHandler.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this),sf.base.EventHandler.add(this.canvasContext.canvas,"keydown",this.keyboardHandler,this),window.addEventListener("resize",this.resizeHandler.bind(this)))},t.prototype.unwireEvents=function(e){"mouseup"===e||"touchend"===e?(sf.base.EventHandler.remove(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler),sf.base.EventHandler.remove(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler),sf.base.EventHandler.remove(document,"mouseup",this.mouseUpHandler)):(sf.base.EventHandler.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler),sf.base.EventHandler.remove(this.canvasContext.canvas,"keydown",this.keyboardHandler),window.removeEventListener("resize",this.resizeHandler))},t.prototype.setHTMLProperties=function(){150===this.element.height&&300===this.element.width&&(this.element.height=this.element.offsetHeight,this.element.width=this.element.offsetWidth,this.isResponsive=!0),this.canvasContext.scale(1,1),this.canvasContext.fillStyle=this.strokeColor,this.backgroundImage?(this.canvasContext.canvas.style.backgroundImage="url("+this.backgroundImage+")",this.canvasContext.canvas.style.backgroundRepeat="no-repeat"):this.backgroundColor&&(this.canvasContext.canvas.style.backgroundColor=this.backgroundColor)},t.prototype.mouseDownHandler=function(e,t,i,n){1!==e.buttons&&2!==e.buttons&&"touchstart"!==e.type||("touchstart"===e.type&&(e.preventDefault(),e.stopPropagation()),t&&(this.canvasContext=t.getContext("2d"),this.scale=n,this.panStart=i),this.beginStroke(e),this.wireEvents())},t.prototype.mouseMoveHandler=function(e){1!==e.buttons&&2!==e.buttons&&"touchmove"!==e.type||("touchmove"===e.type&&(e.preventDefault(),e.stopPropagation()),this.interval?this.updateStrokeWithThrottle(e):this.updateStroke(e))},t.prototype.mouseUpHandler=function(e){"touchstart"===e.type&&(e.preventDefault(),e.stopPropagation()),this.endDraw(),this.updateSnapCollection(),this.unwireEvents(e.type),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","mouseUp"):this.trigger("change",{actionName:"strokeUpdate"}),this.signatureValue=this.snapColl[this.incStep]},t.prototype.keyboardHandler=function(e){var t=this,i={fileName:"Signature",type:"Png",cancel:!1};switch(e.key){case"Delete":this.clear();break;case e.ctrlKey&&"s":this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","beforeSave"):this.trigger("beforeSave",i,(function(e){i.cancel||t.save(e.type,e.fileName)})),e.preventDefault(),e.stopImmediatePropagation();break;case e.ctrlKey&&"z":this.undo();break;case e.ctrlKey&&"y":this.redo()}},t.prototype.resizeHandler=function(){var e=this;this.isResponsive&&(this.canvasContext.canvas.width=this.element.offsetWidth,this.canvasContext.canvas.height=this.element.offsetHeight,this.canvasContext.scale(1,1));var t=new Image;t.src=this.snapColl[this.incStep],t.onload=function(){e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height)}},t.prototype.beginStroke=function(e){this.refresh(),this.updateStroke(e)},t.prototype.updateStroke=function(e){var t=this.createPoint(e);this.addPoint(t)},t.prototype.updateStrokeWithThrottle=function(e){var t=Date.now(),i=this.interval-(t-this.previous);this.storedArgs=e,i<=0||i>this.interval?(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.previous=t,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)):this.timeout||(this.timeout=window.setTimeout(this.delay.bind(this),i))},t.prototype.delay=function(){this.previous=Date.now(),this.timeout=null,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)},t.prototype.createPoint=function(e){var t=this.canvasContext.canvas.getBoundingClientRect();return"mousedown"===e.type||"mousemove"===e.type?void 0===this.canvasRatio?this.point(e.clientX-t.left,e.clientY-t.top,(new Date).getTime()):1===this.scale?this.point((e.clientX-t.left)*this.canvasRatio.width/this.scale,(e.clientY-t.top)*this.canvasRatio.height/this.scale,(new Date).getTime()):this.point((e.clientX-t.left+this.panStart.startX/this.canvasRatio.width*this.scale)/this.scale*this.canvasRatio.width,(e.clientY-t.top+this.panStart.startY/this.canvasRatio.height*this.scale)/this.scale*this.canvasRatio.height,(new Date).getTime()):void 0===this.canvasRatio?this.point(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top,(new Date).getTime()):1===this.scale?this.point((e.touches[0].clientX-t.left)*this.canvasRatio.width/this.scale,(e.touches[0].clientY-t.top)*this.canvasRatio.height/this.scale,(new Date).getTime()):this.point(e.touches[0].clientX-t.left+this.panStart.startX/(this.canvasRatio.width*this.scale),e.touches[0].clientY-t.top+this.panStart.startY/(this.canvasRatio.height*this.scale),(new Date).getTime())},t.prototype.point=function(e,t,i){return this.pointX=e,this.pointY=t,this.time=i||(new Date).getTime(),{x:this.pointX,y:this.pointY,time:this.time}},t.prototype.addPoint=function(e){var t,i,n=this.pointColl,s=n.length>0&&n[n.length-1],o=!!s&&this.distanceTo(s)<=this.minDistance;s&&s&&o||(n.push(e),this.imageEditorPointsColl.push(e),n.length>2&&(3===n.length&&n.unshift(n[0]),t=this.calculateCurveControlPoints(n[0],n[1],n[2]).controlPoint2,i=this.calculateCurveControlPoints(n[1],n[2],n[3]).controlPoint1,this.startPoint=n[1],this.controlPoint1=t,this.controlPoint2=i,this.endPoint=n[2],this.startDraw(),n.shift()))},t.prototype.startDraw=function(){var e;e=this.pointVelocityCalc(this.startPoint),e=this.velocity*e+(1-this.velocity)*this.lastVelocity;var t=Math.max(this.maxStrokeWidth/(e+1),this.minStrokeWidth);this.curveDraw(this.lastWidth,t),this.lastVelocity=e,this.lastWidth=t},t.prototype.endDraw=function(){var e=this.pointColl.length>2,t=this.pointColl[0];!e&&t&&this.strokeDraw(t)},t.prototype.curveDraw=function(e,t){var i,n,s,o,r,a,l,d,h,c,p=this.canvasContext,u=t-e,f=this.bezierLengthCalc(),m=2*Math.ceil(f);for(p.beginPath(),n=0;n<m;n++)r=(o=(s=n/m)*s)*s,h=(d=(l=(a=1-s)*a)*a)*this.startPoint.x,h+=3*l*s*this.controlPoint1.x,h+=3*a*o*this.controlPoint2.x,h+=r*this.endPoint.x,c=d*this.startPoint.y,c+=3*l*s*this.controlPoint1.y,c+=3*a*o*this.controlPoint2.y,c+=r*this.endPoint.y,i=Math.min(e+r*u,this.maxStrokeWidth),this.arcDraw(h,c,i);p.closePath(),p.fill(),this.isSignatureEmpty=!1},t.prototype.strokeDraw=function(e){var t=this.canvasContext,i=(this.minStrokeWidth+this.maxStrokeWidth)/2;t.beginPath(),this.arcDraw(e.x,e.y,i),t.closePath(),t.fill(),this.isSignatureEmpty=!1},t.prototype.arcDraw=function(e,t,i){var n=this.canvasContext;n.moveTo(e,t),n.arc(e,t,i,0,2*Math.PI,!1)},t.prototype.calculateCurveControlPoints=function(e,t,i){var n=e.x-t.x,s=e.y-t.y,o=t.x-i.x,r=t.y-i.y,a=(e.x+t.x)/2,l=(e.y+t.y)/2,d=(t.x+i.x)/2,h=(t.y+i.y)/2,c=Math.sqrt(n*n+s*s),p=Math.sqrt(o*o+r*r),u=p/(c+p),f=d+(a-d)*u,m=h+(l-h)*u,g=t.x-f,v=t.y-m;return{controlPoint1:this.point(a+g,l+v,0),controlPoint2:this.point(d+g,h+v,0)}},t.prototype.bezierLengthCalc=function(){var e,t,i,n,s,o,r,a,l=0;for(e=0;e<=10;e++)t=e/10,i=this.bezierPointCalc(t,this.startPoint.x,this.controlPoint1.x,this.controlPoint2.x,this.endPoint.x),n=this.bezierPointCalc(t,this.startPoint.y,this.controlPoint1.y,this.controlPoint2.y,this.endPoint.y),e>0&&(r=i-s,a=n-o,l+=Math.sqrt(r*r+a*a)),s=i,o=n;return l},t.prototype.bezierPointCalc=function(e,t,i,n,s){return t*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*n*(1-e)*e*e+s*e*e*e},t.prototype.pointVelocityCalc=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0},t.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.pointX-e.x,2)+Math.pow(this.pointY-e.y,2))},t.prototype.isRead=function(e){e?sf.base.EventHandler.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler):this.disabled||sf.base.EventHandler.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this)},t.prototype.enableOrDisable=function(e){this.disabled=e,e?(this.reDraw("0.5"),this.isRead(!0)):(this.reDraw("1"),this.isRead(!1))},t.prototype.reDraw=function(e){var t=this.canvasContext.getImageData(0,0,this.element.width,this.element.height);this.canvasContext.clearRect(0,0,this.element.width,this.element.height),this.element.style.opacity=e,this.canvasContext.putImageData(t,0,0)},t.prototype.updateSnapCollection=function(e){if(sf.base.isNullOrUndefined(this.incStep)?(this.incStep=-1,this.incStep++,this.snapColl=[],this.clearArray=[]):this.incStep++,this.incStep<this.snapColl.length&&(this.snapColl.length=this.incStep),this.incStep>0){var t=this.createElement("canvas",{className:"e-"+this.getModuleName()+"-wrapper"}),i=t.getContext("2d");t.width=this.canvasContext.canvas.width,t.height=this.canvasContext.canvas.height,i.drawImage(this.canvasContext.canvas,0,0,t.width,t.height),this.snapColl.push(t.toDataURL())}else this.snapColl.push(this.canvasContext.canvas.toDataURL());e&&this.clearArray.push(this.incStep)},t.prototype.setBackgroundImage=function(e){var t=this,i=new Image;i.crossOrigin="anonymous",i.src=e,i.onload=function(){t.canvasContext.globalCompositeOperation="source-over",t.canvasContext.drawImage(i,0,0,t.element.width,t.element.height),t.updateSnapCollection(),t.saveBackground(!0)},this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height)},t.prototype.setBackgroundColor=function(e){var t,i,n=this.canvasContext;for(n.strokeStyle=e,t=1;t<=n.canvas.width;t++)for(i=1;i<=n.canvas.height;i++)n.strokeRect(0,0,t,i);this.updateSnapCollection()},t.prototype.loadPersistedSignature=function(){if(!sf.base.isNullOrUndefined(this.signatureValue)){var e=this,t=new Image;t.src=this.signatureValue,t.onload=function(){e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0),e.updateSnapCollection()},this.isSignatureEmpty=!1}},t.prototype.getBlob=function(e){for(var t=e.split(","),i=t[0].match(/:(.*?);/)[1],n=atob(t[1]),s=n.length,o=new Uint8Array(s);s--;)o[s]=n.charCodeAt(s);return new Blob([o],{type:i})},t.prototype.download=function(e,t){var i=URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.target="_parent",n.download=t,(document.body||document.documentElement).appendChild(n),n.click(),n.parentNode.removeChild(n)},t.prototype.refresh=function(){this.pointColl=[],this.lastVelocity=0,this.lastWidth=(this.minStrokeWidth+this.maxStrokeWidth)/2},t.prototype.clear=function(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.refresh(),this.updateSnapCollection(!0),this.isSignatureEmpty=!0,this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Clear"):this.trigger("change",{actionName:"clear"})},t.prototype.undo=function(){var e=this;if(this.incStep>0){this.incStep--;var t=new Image;t.src=this.snapColl[this.incStep],t.onload=function(){e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Undo"):this.trigger("change",{actionName:"undo"})},t.prototype.redo=function(){var e=this;if(this.incStep<this.snapColl.length-1){this.incStep++;var t=new Image;t.src=this.snapColl[this.incStep],t.onload=function(){e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Redo"):this.trigger("change",{actionName:"redo"})},t.prototype.isClear=function(){if(this.clearArray){for(var e=!1,t=0;t<this.clearArray.length;t++)this.clearArray[t]===this.incStep&&(this.isSignatureEmpty=!0,e=!0);e||(this.isSignatureEmpty=!1)}},t.prototype.isEmpty=function(){return this.isSignatureEmpty},t.prototype.canUndo=function(){return this.incStep>0},t.prototype.canRedo=function(){return this.incStep<this.snapColl.length-1},t.prototype.draw=function(e,t,i){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),t=t||"Arial",i=i||30,this.canvasContext.font=i+"px "+t,this.canvasContext.textAlign="center",this.canvasContext.textBaseline="middle",this.canvasContext.fillText(e,this.element.width/2,this.element.height/2),this.updateSnapCollection(),this.isSignatureEmpty=!1},t.prototype.load=function(e,t,i){i=i||this.element.height,t=t||this.element.width,this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);var n=this,s=new Image;s.src=e,"data"!==e.slice(0,4)&&(s.crossOrigin="anonymous"),s.onload=function(){Promise.all([createImageBitmap(s,0,0,t,i)]).then((function(s){var o=document.createElement("canvas");o.width=t,o.height=i,o.getContext("2d").drawImage(s[0],0,0),"data"!==e.slice(0,4)&&(n.canvasContext.globalCompositeOperation="source-over"),n.canvasContext.drawImage(o,0,0,t,i,0,0,n.element.width,n.element.height),n.updateSnapCollection()}))},this.isSignatureEmpty=!1},t.prototype.saveBackground=function(e){var t;if(t=e&&this.backgroundImage?this.snapColl[this.incStep-1]:this.snapColl[this.incStep],e||(this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.backgroundImage?this.setBackgroundImage(this.backgroundImage):this.backgroundColor&&(this.setBackgroundColor(this.backgroundColor),e=!0)),e){var i=this,n=new Image;n.crossOrigin="anonymous",n.src=t,n.onload=function(){i.backgroundLoaded=!0,i.canvasContext.globalCompositeOperation="source-over",i.canvasContext.drawImage(n,0,0,i.element.width,i.element.height),i.save(i.fileType,i.fileName)}}},t.prototype.save=function(e,t){if(this.saveWithBackground&&null==this.backgroundLoaded&&(this.backgroundImage||this.backgroundColor))this.backgroundLoaded=!1,this.fileType=e,this.fileName=t,this.saveBackground(!1);else if("Svg"===e)t=t||"Signature",this.toSVG(t);else if("Jpeg"===e)if(t=t||"Signature",!this.saveWithBackground||this.saveWithBackground&&!this.backgroundImage&&!this.backgroundColor)this.toJPEG(t);else{var i=this.canvasContext.canvas.toDataURL("image/jpeg");this.download(this.getBlob(i),t+".jpeg")}else{t=t||"Signature";i=this.canvasContext.canvas.toDataURL("image/png");this.download(this.getBlob(i),t+".png")}this.saveWithBackground&&this.backgroundLoaded&&this.resetSnap()},t.prototype.resetSnap=function(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);var e=this,t=new Image;t.src=this.snapColl[this.incStep-1],t.onload=function(){e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height),e.updateSnapCollection()},this.backgroundLoaded=null,this.snapColl.pop(),this.incStep--,this.snapColl.pop(),this.incStep--},t.prototype.toJPEG=function(e){var t=this,i=this.snapColl[this.incStep];this.setBackgroundColor("#ffffff");var n=this,s=new Image;s.crossOrigin="anonymous",s.src=i,s.onload=function(){n.canvasContext.globalCompositeOperation="source-over",n.canvasContext.drawImage(s,0,0,n.element.width,n.element.height);var i=n.canvasContext.canvas.toDataURL("image/jpeg");n.download(n.getBlob(i),e+".jpeg"),n.canvasContext.clearRect(0,0,n.canvasContext.canvas.width,n.canvasContext.canvas.height),t.resizeHandler()},this.snapColl.pop(),this.incStep--},t.prototype.toSVG=function(e){var t=this.canvasContext.canvas.toDataURL(),i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width",this.canvasContext.canvas.width.toString()),i.setAttribute("height",this.canvasContext.canvas.height.toString());var n=document.createElementNS("http://www.w3.org/2000/svg","image");n.setAttributeNS(null,"height",this.canvasContext.canvas.height.toString()),n.setAttributeNS(null,"width",this.canvasContext.canvas.width.toString()),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),i.appendChild(n);var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+this.canvasContext.canvas.width+'" height="'+this.canvasContext.canvas.height+'">',o=i.innerHTML,r="data:image/svg+xml;base64,"+btoa(s+o+"</svg>");return null==e?r:(this.download(this.getBlob(r),e+".svg"),null)},t.prototype.saveAsBlob=function(){return this.getBlob(this.canvasContext.canvas.toDataURL("image/png"))},t.prototype.getSignature=function(e){if("Jpeg"===e){for(var t=this.canvasContext.getImageData(0,0,this.element.width,this.element.height),i=t.data,n=0;n<i.length;n+=4)i[n+3]<255&&(i[n]=255-i[n],i[n+1]=255-i[n+1],i[n+2]=255-i[n+2],i[n+3]=255-i[n+3]);this.canvasContext.putImageData(t,0,0);var s=this.canvasContext.canvas.toDataURL("image/jpeg");return this.resizeHandler(),s}return"Svg"===e?this.toSVG(null):this.canvasContext.canvas.toDataURL("image/png")},t.prototype.getModuleName=function(){return"signature"},t.prototype.getPersistData=function(){return this.signatureValue=this.snapColl[this.incStep],this.addOnPersist(["signatureValue"])},t.prototype.destroy=function(){"image-editor"!==this.getModuleName()&&(this.unwireEvents(null),sf.base.removeClass([this.element],"e-"+this.getModuleName()),this.element.removeAttribute("tabindex"),this.pointColl=null),e.prototype.destroy.call(this)},t.prototype.propertyChanged=function(e,t){var i=this.canvasContext;switch(e){case"backgroundColor":i.canvas.style.backgroundColor=t,this.backgroundColor=t;break;case"backgroundImage":i.canvas.style.backgroundImage="url("+t+")",this.backgroundImage=t;break;case"strokeColor":i.fillStyle=t,this.strokeColor=t;break;case"saveWithBackground":this.saveWithBackground=t;break;case"maxStrokeWidth":this.maxStrokeWidth=t;break;case"minStrokeWidth":this.minStrokeWidth=t;break;case"velocity":this.velocity=t;break;case"isReadOnly":this.isRead(t);break;case"disabled":this.enableOrDisable(t)}},t}(sf.base.Component),s=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),o=function(){function e(e,t,i,n){this.dataId=e,this.element=t,window.sfBlazor.setCompInstance(this),this.dotnetRef=n,this.signatureBase=new r,this.signatureBase.backgroundColor=i.backgroundColor,this.signatureBase.backgroundImage=i.backgroundImage,this.signatureBase.strokeColor=i.strokeColor||"#000000",this.signatureBase.isReadOnly=i.isReadOnly,this.signatureBase.disabled=i.disabled,this.signatureBase.saveWithBackground=i.saveWithBackground,this.signatureBase.signatureValue=i.signatureValue,this.signatureBase.minStrokeWidth=i.minStrokeWidth||.5,this.signatureBase.maxStrokeWidth=i.maxStrokeWidth||2,this.signatureBase.velocity=i.velocity||.7}return e.prototype.saveAsBlob=function(e){var t=e.getContext("2d").canvas.toDataURL().split(",");return atob(t[1]).length},e}(),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.onPropertyChanged=function(){},t.prototype.preRender=function(){},t.prototype.render=function(){},t}(n);return{initialize:function(e,t,i,n){sf.base.isNullOrUndefined(t)||(new o(e,t,i,n),window.sfBlazor.getCompInstance(e).signatureBase.initialize(t,n))},clear:function(e){window.sfBlazor.getCompInstance(e).signatureBase.clear()},undo:function(e){window.sfBlazor.getCompInstance(e).signatureBase.undo()},redo:function(e){window.sfBlazor.getCompInstance(e).signatureBase.redo()},save:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);switch(t){case 0:n.signatureBase.save("Png",i);break;case 1:n.signatureBase.save("Jpeg",i);break;case 2:n.signatureBase.save("Svg",i)}},draw:function(e,t,i,n){window.sfBlazor.getCompInstance(e).signatureBase.draw(t,i,n)},load:function(e,t,i,n){window.sfBlazor.getCompInstance(e).signatureBase.load(t,i,n)},getSignature:function(e,t){var i=window.sfBlazor.getCompInstance(e);switch(t){case 0:return i.signatureBase.getSignature("Png");case 1:return i.signatureBase.getSignature("Jpeg");case 2:return i.signatureBase.getSignature("Svg")}return null},saveAsBlob:function(e,t){return window.sfBlazor.getCompInstance(e).saveAsBlob(t)},onPropertyChanged:function(e,t,i){window.sfBlazor.getCompInstance(e).signatureBase.propertyChanged(t,i)},isEmpty:function(e){return window.sfBlazor.getCompInstance(e).signatureBase.isEmpty()},canUndo:function(e){return window.sfBlazor.getCompInstance(e).signatureBase.canUndo()},canRedo:function(e){return window.sfBlazor.getCompInstance(e).signatureBase.canRedo()},destroy:function(e){window.sfBlazor.getCompInstance(e).signatureBase.destroy()}}}()},"./modules/sf-slider.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Slider=function(){"use strict";var e="e-handle-focused",t="e-handle-active",i="Horizontal",n=function(){function n(e,t,i){this.activeHandle=1,this.initialRendering=!0,this.isClicked=!1,this.isSliderMove=!1,this.isDragRange=!1,this.isTabPressed=!1,this.isKeyPressed=!1,this.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)",scaleTransform:"transform .4s cubic-bezier(.25, .8, .25, 1)"},this.element=e,this.element.blazor__instance=this,this.dotNetRef=t,this.options=i,this.initialRendering=!0,null===this.options.Value&&(this.options.Value="Range"!==this.options.Type?this.options.Min:[this.options.Min,this.options.Max]),this.options.CustomValues&&(this.options.Min=0,this.options.Max=i.CustomValues.length-1)}return n.prototype.initialize=function(){return this.sliderContainer=this.element.parentElement,this.sliderTrack=this.element.querySelector(".e-slider-track"),this.hiddenInput=this.element.parentElement.querySelector(".e-slider-input"),this.setElementWidth(this.options.Width),0===this.element.getBoundingClientRect().height&&"Vertical"===this.options.Orientation&&(this.element.style.height=this.element.parentElement.getBoundingClientRect().height+"px"),this.setHandler(),this.setZindex(),sf.base.isNullOrUndefined(this.options.Limits)||this.setLimitBarPosition(),this.isMaterial="material"===this.getTheme(this.sliderContainer),sf.base.isNullOrUndefined(this.materialHandle)&&this.isMaterial&&null!==this.options.Tooltip&&"Range"!==this.options.Type&&(this.materialHandle=document.createElement("div"),this.materialHandle.className="e-handle e-material-handle",this.element.appendChild(this.materialHandle)),this.setValue(!1),this.updateColorRangeBarPos(),this.initialRendering&&this.options.Enabled&&!this.options.ReadOnly&&this.wireEvents(),this.getTheme(this.sliderContainer)},n.prototype.rangeBarMousedown=function(e){var t,i;if("mousedown"===e.type&&e.preventDefault(),this.changedEventValue=this.options.Value,"Range"===this.options.Type&&e.target===this.rangeBar){var n=void 0,s=void 0;"mousedown"===e.type?(n=(t=[e.clientX,e.clientY])[0],s=t[1]):"touchstart"===e.type&&(n=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],s=i[1]),"Horizontal"===this.options.Orientation?(this.firstPartRemain=n-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-n):(this.firstPartRemain=s-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-s),this.minDiff=this.handleVal2-this.handleVal1;var o=this.element.querySelector(".e-tab-handle");o&&o.classList.remove("e-tab-handle"),sf.base.EventHandler.add(document,"mousemove touchmove",this.dragRangeBarMove,this),sf.base.EventHandler.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},n.prototype.dragRangeBarUp=function(e){this.triggerChangeEvent(this.changedEventValue,e,!0),sf.base.EventHandler.remove(document,"mousemove touchmove",this.dragRangeBarMove),sf.base.EventHandler.remove(document,"mouseup touchend",this.dragRangeBarUp),this.isDragRange=!0},n.prototype.triggerChangeEvent=function(e,t,i){if(null!==this.options.Events){var n="touchend"===t.type||t.currentTarget===document;this.options.Events.onChange.hasDelegate&&n&&!this.options.IsImmediateValue&&this.isValueChange(e)&&this.invokeEvent(e,!1),(n||i)&&this.options.Events.valueChange.hasDelegate&&this.isValueChange(e)&&(this.invokeEvent(e,!0),this.changedEventValue=this.options.Value)}},n.prototype.invokeEvent=function(e,t){this.dotNetRef.invokeMethodAsync("TriggerEvent",{PreviousValue:e,Value:this.options.Value,isValueChanged:t})},n.prototype.handleValueAdjust=function(e,t,i){1===i?(this.handleVal1=t,this.handleVal2=this.handleVal1+this.minDiff):2===i&&(this.handleVal2=t,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},n.prototype.getLimitValueAndPosition=function(e,t,i,n){return sf.base.isNullOrUndefined(t)&&(t=this.options.Min,sf.base.isNullOrUndefined(e)&&n&&(e=t)),sf.base.isNullOrUndefined(i)&&(i=this.options.Max,sf.base.isNullOrUndefined(e)&&n&&(e=i)),e<t&&(e=t),e>i&&(e=i),[e,this.checkHandlePosition(e)]},n.prototype.dragRangeBarMove=function(e){var t,i,n,s,o;"touchmove"!==e.type&&e.preventDefault(),this.isDragRange=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none","mousemove"===e.type?(s=(t=[e.clientX,e.clientY])[0],o=t[1]):(s=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],o=i[1]),"mousemove"===e.type?n={x:e.clientX,y:e.clientY}:"touchmove"!==e.type&&"touchstart"!==e.type||(n={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY});var r=this.options.Limits;if(sf.base.isNullOrUndefined(r)||(!r.enabled||!r.startHandleFixed)&&(!r.enabled||!r.endHandleFixed)){if(n=this.options.EnableRtl?{x:s+this.secondPartRemain,y:o+this.secondPartRemain}:{x:s-this.firstPartRemain,y:o+this.secondPartRemain},this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1),n=this.options.EnableRtl?{x:s-this.firstPartRemain,y:o-this.firstPartRemain}:{x:s+this.secondPartRemain,y:o-this.firstPartRemain},this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2),!sf.base.isNullOrUndefined(this.options.Limits)&&this.options.Limits.enabled){var a=this.getLimitValueAndPosition(this.handleVal1,r.minStart,r.minEnd);this.handleVal1=a[0],this.handlePos1=a[1],this.handleVal1===r.minEnd&&this.handleValueAdjust(this.handleVal1,r.minEnd,1),this.handleVal1===r.minStart&&this.handleValueAdjust(this.handleVal1,r.minStart,1),a=this.getLimitValueAndPosition(this.handleVal2,r.maxStart,r.maxEnd),this.handleVal2=a[0],this.handlePos2=a[1],this.handleVal2===r.maxStart&&this.handleValueAdjust(this.handleVal2,r.maxStart,2),this.handleVal2===r.maxEnd&&this.handleValueAdjust(this.handleVal2,r.maxEnd,2)}this.handleVal2===this.options.Max&&this.handleValueAdjust(this.handleVal2,this.options.Max,2),this.handleVal1===this.options.Min&&this.handleValueAdjust(this.handleVal1,this.options.Min,1)}var l=this.options.IsImmediateValue?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal;this.setHandlePosition(e),this.updateValue(),"Default"!==this.options.Type&&(this.rangeBar.style.transition=this.transition.rangeBar,this.setRangeBarPosition()),null!==this.options.Events&&this.options.Events.onChange.hasDelegate&&this.isValueChange(l)&&this.options.IsImmediateValue&&this.invokeEvent(l,!1)},n.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDown,this),sf.base.EventHandler.add(this.element,"keyup",this.keyUp,this),sf.base.EventHandler.add(this.element,"focusout",this.focusOut,this),"Range"===this.options.Type&&sf.base.EventHandler.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),this.onResize=this.reposition.bind(this),window.addEventListener("resize",this.onResize),this.wireFirstHandleEventArgs(),"Range"===this.options.Type&&this.wireSecondHandleEventArgs()},n.prototype.wireFirstHandleEventArgs=function(){sf.base.EventHandler.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),sf.base.EventHandler.add(this.firstHandle,"mouseup touchend",this.sliderBarUp,this)},n.prototype.wireSecondHandleEventArgs=function(){sf.base.EventHandler.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),sf.base.EventHandler.add(this.secondHandle,"mouseup touchend",this.sliderBarUp,this)},n.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.clickHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDown),sf.base.EventHandler.remove(this.element,"keyup",this.keyUp),sf.base.EventHandler.remove(this.element,"focusout",this.focusOut),"Range"===this.options.Type&&sf.base.EventHandler.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),window.removeEventListener("resize",this.onResize),this.unWireFirstHandleEventArgs(),"Range"===this.options.Type&&this.unWireSecondHandleEventArgs()},n.prototype.unWireFirstHandleEventArgs=function(){sf.base.EventHandler.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),sf.base.EventHandler.remove(this.firstHandle,"mouseup touchend",this.sliderBarUp)},n.prototype.unWireSecondHandleEventArgs=function(){sf.base.EventHandler.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),sf.base.EventHandler.remove(this.secondHandle,"mouseup touchend",this.sliderBarUp)},n.prototype.isValueChange=function(e){return"Range"===this.options.Type?e[0]!==this.options.Value[0]||e[1]!==this.options.Value[1]:e!==this.options.Value},n.prototype.focusOut=function(){null!==this.options.Tooltip&&this.options.Tooltip.isVisible&&("Range"===this.options.Type||sf.base.isNullOrUndefined(this.materialHandle)||(this.materialHandle.style.transform="scale(1)"),this.dotNetRef.invokeMethodAsync("CloseTooltip")),this.isTabPressed&&this.handleFocusOut()},n.prototype.reposition=function(){this.initialRendering=!1,this.initialize()},n.prototype.handleValueUpdate=function(){return"Range"===this.options.Type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},n.prototype.keyDown=function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:e.preventDefault(),e.stopImmediatePropagation(),this.buttonClick(e)}},n.prototype.buttonClick=function(e){var t,n=this.options.Value,s=this.options.EnableRtl&&this.options.Orientation===i,o=this.handleValueUpdate();this.options.Limits&&(1===this.activeHandle&&this.options.Limits.startHandleFixed||2===this.activeHandle&&this.options.Limits.endHandleFixed)||(40===e.keyCode||37===e.keyCode||e.currentTarget.classList.contains("e-first-button")?t=s?this.add(o,parseFloat(this.options.Step.toString()),!0):this.add(o,parseFloat(this.options.Step.toString()),!1):38===e.keyCode||39===e.keyCode||e.currentTarget.classList.contains("e-second-button")?t=s?this.add(o,parseFloat(this.options.Step.toString()),!1):this.add(o,parseFloat(this.options.Step.toString()),!0):33===e.keyCode||e.currentTarget.classList.contains("e-first-button")?t=s?this.add(o,parseFloat(this.options.Ticks.largeStep.toString()),!1):this.add(o,parseFloat(this.options.Ticks.largeStep.toString()),!0):34===e.keyCode||e.currentTarget.classList.contains("e-second-button")?t=s?this.add(o,parseFloat(this.options.Ticks.largeStep.toString()),!0):this.add(o,parseFloat(this.options.Ticks.largeStep.toString()),!1):36===e.keyCode?t=parseFloat(this.options.Min.toString()):35===e.keyCode&&(t=parseFloat(this.options.Max.toString())),this.options.Value="Range"!==this.options.Type?t:1===this.activeHandle?[t,this.options.Value[1]]:[this.options.Value[0],t],"Range"===this.options.Type&&(this.options.Value[0]>this.options.Value[1]&&1===this.activeHandle?this.options.Value[0]=this.options.Value[1]:this.options.Value[1]<this.options.Value[0]&&(this.options.Value[1]=this.options.Value[0])),"keydown"===e.type&&"Default"!==this.options.Type&&(this.isKeyPressed=!0),this.setValue(),this.invokeEvent(n,!1),this.isKeyPressed=!1)},n.prototype.handleFocusOut=function(){if(this.firstHandle.classList.contains(e)&&this.firstHandle.classList.remove(e),this.firstHandle.classList.contains(t)&&this.firstHandle.classList.remove(t),this.firstHandle.classList.contains("e-tab-handle")&&this.firstHandle.classList.remove("e-tab-handle"),"Range"===this.options.Type&&(this.secondHandle.classList.contains(e)&&this.secondHandle.classList.remove(e),this.secondHandle.classList.contains(t)&&this.secondHandle.classList.remove(t),this.secondHandle.classList.contains("e-tab-handle")&&this.secondHandle.classList.remove("e-tab-handle")),this.isTabPressed){this.isTabPressed=!1;var i=sf.base.select(".e-tab-handle",this.element);i&&sf.base.removeClass([i],"e-tab-handle")}},n.prototype.keyUp=function(i){var n=i.target;if(9===i.keyCode&&n.classList.contains("e-handle")){if(this.isTabPressed=!0,!n.classList.contains("e-tab-handle")){var s=sf.base.select(".e-tab-handle",this.element);if(s&&sf.base.removeClass([s],"e-tab-handle"),sf.base.addClass([n],"e-tab-handle"),"Range"===this.options.Type){var o=n.previousElementSibling;o&&o.classList?this.activeHandle=o.classList.contains("e-handle")?2:1:this.activeHandle=1}}this.changedEventValue=this.previousHandleVal,n===this.firstHandle?sf.base.addClass([this.firstHandle],[e,t,"e-tab-handle"]):sf.base.addClass([this.secondHandle],[e,t,"e-tab-handle"])}},n.prototype.handleFocus=function(i){this.element.focus(),this.getHandlePosition(i),this.changedEventValue=this.previousHandleVal,this.sliderBarClick(),i.currentTarget===this.firstHandle?(this.firstHandle.classList.add(e),this.firstHandle.classList.add(t),this.firstHandle.classList.add("e-tab-handle")):(this.secondHandle.classList.add(e),this.secondHandle.classList.add(t),this.secondHandle.classList.add("e-tab-handle")),sf.base.EventHandler.add(document,"mousemove touchmove",this.sliderBarMove,this),sf.base.EventHandler.add(document,"mouseup touchend",this.sliderBarUp,this)},n.prototype.sliderBarMove=function(e){if("touchmove"===e.type&&e.target.parentElement===this.element||"mousemove"===e.type){"touchmove"!==e.type&&e.preventDefault(),this.isSliderMove=!0;var t=void 0;"mousemove"===e.type?t={x:e.clientX,y:e.clientY}:"touchmove"!==e.type&&"touchstart"!==e.type||(t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}),this.handlePos=this.xyToPosition(t),this.handleVal=this.positionToValue(this.handlePos),this.handlePos=this.checkHandlePosition(this.handleVal),this.firstHandle.style.transition=this.transition.scaleTransform,"Range"===this.options.Type&&(this.secondHandle.style.transition=this.transition.scaleTransform),this.rangeBar&&(this.rangeBar.style.transition="none"),"Range"===this.options.Type?-1===this.previousHandleVal.indexOf(this.handleVal)&&(1===this.activeHandle&&this.handleVal<=this.handleVal2||2===this.activeHandle&&this.handleVal>=this.handleVal1)&&(null!=this.options.Events&&this.options.Events.onChange.hasDelegate&&this.options.IsImmediateValue?this.callChangeEvent(!1):this.sliderBarClick()):this.previousHandleVal!==this.handleVal&&(null!==this.options.Events&&this.options.Events.onChange.hasDelegate&&this.options.IsImmediateValue?this.callChangeEvent(!1):this.sliderBarClick())}},n.prototype.callChangeEvent=function(e){var t=this.options.IsImmediateValue?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal;this.sliderBarClick(),this.isValueChange(t)&&this.invokeEvent(t,e)},n.prototype.updateHandleAttributes=function(e,t){"aria-valuenow"===e?"Range"===this.options.Type?(this.firstHandle.setAttribute(e,"["+t[0]+","+t[1]+"]"),this.secondHandle.setAttribute(e,"["+t[0]+","+t[1]+"]")):this.firstHandle.setAttribute(e,t[0]):(this.firstHandle.setAttribute(e,t[0]),"Range"===this.options.Type&&this.secondHandle.setAttribute(e,t[0]))},n.prototype.getTheme=function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")},n.prototype.setZindex=function(){sf.base.isNullOrUndefined(this.options.Ticks)||"None"===this.options.Ticks.placement||(this.element.getElementsByTagName("ul")[0].style.zIndex="-1",this.element.style.zIndex="8"),"material"!==this.getTheme(this.sliderContainer)||sf.base.isNullOrUndefined(this.options.Ticks)||"Both"!==this.options.Ticks.placement||(this.element.style.zIndex="8"),this.firstHandle.style.zIndex="9","Range"===this.options.Type&&(this.secondHandle.style.zIndex="10")},n.prototype.sliderBarUp=function(e){this.handleFocusOut(),sf.base.EventHandler.remove(document,"mousemove touchmove",this.sliderBarMove),sf.base.EventHandler.remove(document,"mouseup touchend",this.sliderBarUp),this.isSliderMove=!1,this.transitionNode(),this.triggerChangeEvent(this.changedEventValue,e,!1)},n.prototype.transitionNode=function(){this.firstHandle.style.transition="none","Range"===this.options.Type&&(this.secondHandle.style.transition="none"),this.rangeBar&&(this.rangeBar.style.transition="none")},n.prototype.clickHandler=function(e){if(this.isDragRange)this.isDragRange=!1;else{e.preventDefault();var t=this.changedEventValue;this.getHandlePosition(e),null!=this.options.Events&&this.options.Events.onChange.hasDelegate||null!=this.options.Events&&this.options.Events.valueChange.hasDelegate?(this.isClicked=!0,this.sliderBarClick(),this.options.Events.onChange.hasDelegate&&this.callChangeEvent(!1),t=this.isSliderMove?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal,this.triggerChangeEvent(t,e,!0)):this.sliderBarClick(),this.isClicked&&(this.previousHandleVal=this.options.Value),this.changedEventValue=this.previousHandleVal,this.isClicked=!1}},n.prototype.updateNewHandleValue=function(e,t,i){return(i[0]||i[1])&&(e<i[0]?(e=i[0],t=this.checkHandlePosition(e)):e>i[1]&&(e=i[1],t=this.checkHandlePosition(e))),[e,t]},n.prototype.sliderBarClick=function(){if("Range"!==this.options.Type||1===this.activeHandle&&this.handleVal1<=this.handleVal2||2===this.activeHandle&&this.handleVal1<=this.handleVal2){if(this.firstHandle.style.transition=this.transition.handle,"Range"===this.options.Type&&(this.secondHandle.style.transition=this.transition.handle),this.rangeBar&&(this.rangeBar.style.transition=this.transition.rangeBar),this.options.Limits){var e=void 0;if(1!==this.activeHandle||this.options.Limits.startHandleFixed){if(2===this.activeHandle&&!this.options.Limits.endHandleFixed){e=[this.options.Limits.maxStart,this.options.Limits.maxEnd];t=this.updateNewHandleValue(this.handleVal,this.handlePos,e);this.updateHandleValue(this.secondHandle,t[0],t[1])}}else{e=[this.options.Limits.minStart,this.options.Limits.minEnd];var t=this.updateNewHandleValue(this.handleVal,this.handlePos,e);this.updateHandleValue(this.firstHandle,t[0],t[1],!0),this.isMaterial&&!sf.base.isNullOrUndefined(this.materialHandle)&&"Range"!==this.options.Type&&this.updateHandleValue(this.materialHandle,t[0],t[1],1===this.activeHandle)}}else{var i=1===this.activeHandle?this.firstHandle:this.secondHandle;this.updateHandleValue(i,this.handleVal,this.handlePos,1===this.activeHandle),this.isMaterial&&!sf.base.isNullOrUndefined(this.materialHandle)&&"Range"!==this.options.Type&&this.updateHandleValue(this.materialHandle,this.handleVal,this.handlePos,1===this.activeHandle)}"Default"!==this.options.Type&&this.setRangeBarPosition(),this.updateValue()}},n.prototype.updateHandleValue=function(e,t,i,n){void 0===n&&(n=!1),this.applyHandlePosition(e,i),n?(this.handleVal1=t,this.handlePos1=i):(this.handleVal2=t,this.handlePos2=i),this.updateAriaValue()},n.prototype.updateAriaValue=function(){"Range"!==this.options.Type?this.options.CustomValues?this.updateHandleAttributes("aria-valuenow",[this.options.CustomValues[this.handleVal1].toString()]):this.updateHandleAttributes("aria-valuenow",[this.handleVal1.toString()]):this.options.CustomValues?this.updateHandleAttributes("aria-valuenow",[this.options.CustomValues[this.handleVal1].toString(),this.options.CustomValues[this.handleVal2].toString()]):this.updateHandleAttributes("aria-valuenow",[this.handleVal1.toString(),this.handleVal2.toString()])},n.prototype.positionToValue=function(e){var t,n=parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min));return t=this.options.Orientation===i?e/this.element.getBoundingClientRect().width*n:e/this.element.getBoundingClientRect().height*n,this.add(t,parseFloat(this.options.Min.toString()),!0)},n.prototype.add=function(e,t,i){var n=Math.pow(10,3);return i?(Math.round(e*n)+Math.round(t*n))/n:(Math.round(e*n)-Math.round(t*n))/n},n.prototype.setElementWidth=function(e){sf.base.isNullOrUndefined(e)||("number"==typeof e?this.sliderContainer.style.width=sf.base.formatUnit(e):"string"==typeof e&&(this.sliderContainer.style.width=e.match(/px|%|em/)?e:sf.base.formatUnit(e)))},n.prototype.xyToPosition=function(e){var t=this.element.getBoundingClientRect();if(this.options.Min===this.options.Max)return 100;if(this.options.Orientation===i){var n=e.x-t.left,s=this.element.offsetWidth/100;this.posvalue=n/s}else{var o=e.y-t.top;s=this.element.offsetHeight/100;this.posvalue=100-o/s}var r=this.stepValueCalculation(this.posvalue);return r<0?r=0:r>100&&(r=100),this.options.EnableRtl&&this.options.Orientation===i&&(r=100-r),this.options.Orientation===i?t.width*(r/100):t.height*(r/100)},n.prototype.stepValueCalculation=function(e){0===this.options.Step&&(this.options.Step=1);var t=parseFloat(sf.base.formatUnit(this.options.Step))/((parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min)))/100),i=e%Math.abs(t);return 0!==i&&(t/2>i?e-=i:e+=Math.abs(t)-i),e},n.prototype.setLimitBarPosition=function(){var e,t,n;if(this.limitBar1=this.element.querySelector(".e-limits"),this.limitBar2=this.element.querySelector(".e-limit-second"),null!==this.options.Limits.minStart||null!==this.options.Limits.minEnd){this.options.Orientation===i?(this.options.EnableRtl?this.limitBar1.style.left=this.checkHandlePosition(this.options.Max-this.options.Limits.minEnd)+"px":this.limitBar1.style.left=this.checkHandlePosition(this.options.Limits.minStart)+"px",n="width"):(this.limitBar1.style.bottom=this.checkHandlePosition(this.options.Limits.minStart)+"px",n="height");var s=this.options.Limits.minEnd=null!=this.options.Limits.minEnd?this.options.Limits.minEnd:this.options.Max;sf.base.setStyleAttribute(this.limitBar1,((e={})[n]=this.checkHandlePosition(s)-this.checkHandlePosition(this.options.Limits.minStart)+"px",e))}if("Range"===this.options.Type&&(null!==this.options.Limits.maxStart||null!==this.options.Limits.maxEnd)){this.options.Orientation===i?this.limitBar2.style.left=this.checkHandlePosition(this.options.Limits.maxStart)+"px":this.limitBar2.style.bottom=this.checkHandlePosition(this.options.Limits.maxStart)+"px";var o=this.options.Limits.maxEnd=null!=this.options.Limits.maxEnd?this.options.Limits.maxEnd:this.options.Max;sf.base.setStyleAttribute(this.limitBar2,((t={})[n]=this.checkHandlePosition(o)-this.checkHandlePosition(this.options.Limits.maxStart)+"px",t))}},n.prototype.setHandler=function(){this.options.Min>this.options.Max&&(this.options.Min=this.options.Max),this.createFirstHandle(),this.createSecondHandle()},n.prototype.createSecondHandle=function(){this.secondHandle=this.element.querySelector(".e-handle-second")},n.prototype.createFirstHandle=function(){this.firstHandle=this.element.querySelector(".e-handle-first")},n.prototype.setValue=function(e){void 0===e&&(e=!0);var t="Range"!==this.options.Type?this.options.Value:this.options.Value[0];if(this.handleVal1=sf.base.isNullOrUndefined(this.options.Value)?this.checkHandleValue(parseFloat(this.options.Min.toString())):this.checkHandleValue(parseFloat(t.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),null!=this.options.Limits){var i=this.updateNewHandleValue(this.handleVal1,this.handlePos1,[this.options.Limits.minStart,this.options.Limits.minEnd]);this.handleVal1=i[0],this.handlePos1=i[1]}if("Range"===this.options.Type&&(this.handleVal2=sf.base.isNullOrUndefined(this.options.Value)?this.checkHandleValue(parseFloat(this.options.Max.toString())):this.checkHandleValue(parseFloat(this.options.Value[1].toString())),this.handlePos2=this.checkHandlePosition(this.handleVal2),null!=this.options.Limits)){i=this.updateNewHandleValue(this.handleVal2,this.handlePos2,[this.options.Limits.maxStart,this.options.Limits.maxEnd]);this.handleVal2=i[0],this.handlePos2=i[1]}this.setHandlePosition(null),"Default"!==this.options.Type&&this.setRangeBarPosition(),null!==this.options.Ticks&&"None"!==this.options.Ticks.placement&&this.setTickValuePosition(),this.updateValue(e)},n.prototype.updateColorRangeBarPos=function(){if(null!=this.options.ColorRange)for(var e=this.sliderTrack.children,t=0;t<this.options.ColorRange.length;t++)this.options.Orientation===i?(this.options.EnableRtl||(e[t].style.left=this.options.EnableRtl?this.checkHandlePosition(this.options.Max-this.options.ColorRange[t].end)+"px":this.checkHandlePosition(this.options.ColorRange[t].start)+"px"),e[t].style.width=this.checkHandlePosition(this.options.ColorRange[t].end)-this.checkHandlePosition(this.options.ColorRange[t].start)+"px"):(e[t].style.bottom=this.checkHandlePosition(this.options.ColorRange[t].start)+"px",e[t].style.height=this.checkHandlePosition(this.options.ColorRange[t].end)-this.checkHandlePosition(this.options.ColorRange[t].start)+"px"),e[t].style.removeProperty("display")},n.prototype.setTickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var e,t,n=this.firstChild.getBoundingClientRect(),s=this.options.Ticks.smallStep,o=Math.abs(parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min)))/s;this.firstChild.children.length>0&&(e=this.firstChild.children[0].getBoundingClientRect());var r,a=[this.element.querySelectorAll(".e-tick.e-large .e-tick-value")];r="Both"===this.options.Ticks.placement?[].slice.call(a[0],2):[].slice.call(a[0],1);for(var l=this.options.Orientation!==i?2*n.height:2*n.width,d=0;d<this.firstChild.children.length;d++)this.options.Orientation===i?this.options.EnableRtl?this.firstChild.children[d].style.left=(l-this.firstChild.children[d].getBoundingClientRect().width)/2+"px":this.firstChild.children[d].style.left=-e.width/2+"px":this.firstChild.children[d].style.top=-e.width/2+"px";for(d=0;d<r.length;d++)t=r[d].getBoundingClientRect(),this.options.Orientation===i?(sf.base.setStyleAttribute(r[d],{left:(l-t.width)/2+"px"}),this.options.EnableRtl&&r[d].parentElement.classList.contains("e-last-tick")&&sf.base.setStyleAttribute(r[d],{left:-t.width/2+"px"})):sf.base.setStyleAttribute(r[d],{top:(l-t.height)/2+"px"});0===o&&this.firstChild.classList.remove("e-last-tick"),null!=this.firstChild&&(this.options.Orientation===i?this.firstChild.children[0].style.left:e.height),null!=r[0]&&(this.options.Orientation===i?r[0].style.left:t.height),null!=this.firstChild&&null!=r[0]&&(this.options.Orientation===i?(this.firstChild.children[0].style.left,r[0].style.left):(e.height,t.height)),this.element.querySelector("ul").style.removeProperty("visibility")},n.prototype.setRangeBarPosition=function(){this.rangeBar=this.element.querySelector(".e-range"),this.options.Orientation===i?"MinRange"===this.options.Type?(this.options.EnableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",sf.base.setStyleAttribute(this.rangeBar,{width:sf.base.isNullOrUndefined(this.handlePos1)?0:this.handlePos1+"px"})):(this.options.EnableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",sf.base.setStyleAttribute(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):"MinRange"===this.options.Type?(this.rangeBar.style.bottom="0px",sf.base.setStyleAttribute(this.rangeBar,{height:sf.base.isNullOrUndefined(this.handlePos1)?0:this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.handlePos1+"px",sf.base.setStyleAttribute(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))},n.prototype.setHandlePosition=function(e){this.updateHandleAttributes("aria-valuemin",[this.options.Min.toString()]),this.updateHandleAttributes("aria-valuemax",[this.options.Max.toString()]);var t=[this.handlePos1,this.handlePos2];this.updateHandlePosition(this.firstHandle,t[0]),this.isMaterial&&"Range"!==this.options.Type&&!sf.base.isNullOrUndefined(this.materialHandle)&&this.updateHandlePosition(this.materialHandle,t[0]),"Range"===this.options.Type&&this.updateHandlePosition(this.secondHandle,t[1]),this.updateAriaValue()},n.prototype.getHandlePosition=function(e){var t;if("mousedown"!==e.type&&"mouseup"!==e.type||e.preventDefault(),"mousedown"===e.type||"mouseup"===e.type||"click"===e.type?t={x:e.clientX,y:e.clientY}:"touchend"!==e.type&&"touchstart"!==e.type||(t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}),this.handlePos=this.xyToPosition(t),this.handleVal=this.positionToValue(this.handlePos),this.handleVal2<this.handleVal)this.activeHandle=2;else if(this.handleVal1>this.handleVal)this.activeHandle=1;else{var i=this.handleVal>this.handleVal1?this.handleVal-this.handleVal1:this.handleVal1-this.handleVal,n=this.handleVal>this.handleVal2?this.handleVal-this.handleVal2:this.handleVal2-this.handleVal;this.activeHandle=i>n?2:1}},n.prototype.updateHandlePosition=function(e,t){this.applyHandlePosition(e,t),e.style.removeProperty("visibility")},n.prototype.applyHandlePosition=function(e,t){this.options.Orientation===i?this.options.EnableRtl?e.style.right=t+"px":e.style.left=t+"px":e.style.bottom=t+"px",this.isKeyPressed?this.isClicked&&(e.style.transition="none"):e.style.transition=this.transition.handle},n.prototype.checkHandleValue=function(e){if(this.options.Min>this.options.Max&&(this.options.Min=this.options.Max),this.options.Min===this.options.Max)return parseFloat(sf.base.formatUnit(this.options.Max));var t=this.handleStartEnd();return e<t.start?e=t.start:e>t.end&&(e=t.end),e},n.prototype.checkHandlePosition=function(e){var t,n=this.element.getBoundingClientRect();return e=100*(e-parseFloat(sf.base.formatUnit(this.options.Min)))/(parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min))),t=this.options.Orientation===i?n.width*(e/100):n.height*(e/100),parseFloat(sf.base.formatUnit(this.options.Max))===parseFloat(sf.base.formatUnit(this.options.Min))&&(t=this.options.Orientation===i?n.width:n.height),t},n.prototype.handleStartEnd=function(){return this.options.Min>this.options.Max?{start:this.options.Max,end:this.options.Min}:{start:this.options.Min,end:this.options.Max}},n.prototype.updateValue=function(e){var t=this;void 0===e&&(e=!0),"Range"===this.options.Type?this.options.Value=[this.handleVal1,this.handleVal2]:this.options.Value=this.handleVal1,this.isClicked||(this.previousHandleVal=this.options.Value),e&&(null!==this.options.Tooltip?setTimeout((function(){t.dotNetRef.invokeMethodAsync("UpdateValue",t.options.Value,t.activeHandle)}),300):(this.isMaterial&&null!==this.options.Tooltip&&!sf.base.isNullOrUndefined(this.materialHandle)&&"Range"!==this.options.Type&&(this.materialHandle.style.transform="scale(0)"),this.dotNetRef.invokeMethodAsync("UpdateValue",this.options.Value,this.activeHandle)))},n.prototype.updateLimitData=function(e){this.options.Limits=e,this.setLimitBarPosition(),this.setValue()},n.prototype.updateTicksData=function(e){this.options.Ticks=e,this.setTickValuePosition()},n.prototype.updateSliderValue=function(e){var t=this.options.Value;this.options.Value=e,this.setValue(),this.invokeEvent(t,!1)},n.prototype.updateStepValue=function(e){this.options.Step=e},n.prototype.destroy=function(){this.element.style.display="none",this.unWireEvents(),this.element=null},n.prototype.updateTooltipPosition=function(e){var t=document.getElementById(e);!sf.base.isNullOrUndefined(t)&&"Range"!==this.options.Type&&sf.base.isNullOrUndefined(this.options.Tooltip.format)&&(t.style.transform="Before"===this.options.Tooltip.placement?"rotate(45deg)":"rotate(225deg)")},n.prototype.propertyChanges=function(e){void 0!==e.Enabled&&(this.options.Enabled=e.Enabled),void 0!==e.ShowButtons&&(this.setValue(!1),this.updateColorRangeBarPos()),void 0!==e.ReadOnly&&(this.options.ReadOnly=e.ReadOnly),void 0!==e.Value&&(this.options.Value=e.Value,this.setValue()),void 0!==e.Max&&(this.options.Max=e.Max),void 0!==e.Step&&(this.options.Step=e.Step),void 0!==e.Min&&(this.options.Min=e.Min),void 0!==e.IsImmediateValue&&(this.options.IsImmediateValue=e.IsImmediateValue),this.options.Enabled&&!this.options.ReadOnly?(this.unWireEvents(),this.wireEvents()):this.unWireEvents()},n}();return{initialize:function(e,t,i){return e&&new n(e,t,i),e&&e.blazor__instance?e.blazor__instance.initialize():null},updateLimitData:function(e,t){e&&e.blazor__instance&&e.blazor__instance.updateLimitData(t)},updateTicksData:function(e,t){e&&e.blazor__instance&&e.blazor__instance.updateTicksData(t)},updateSliderValue:function(e,t){e&&e.blazor__instance&&e.blazor__instance.updateSliderValue(t)},updateSTepValue:function(e,t){e&&e.blazor__instance&&e.blazor__instance.updateStepValue(t)},updatedProperties:function(e,t){e&&e.blazor__instance&&e.blazor__instance.propertyChanges(t)},destroy:function(e){e&&e.blazor__instance&&e.blazor__instance.destroy()},reposition:function(e){e&&e.blazor__instance&&e.blazor__instance.reposition()},updateTooltipPosition:function(e,t){e&&e.blazor__instance&&e.blazor__instance.updateTooltipPosition(t)}}}()},"./modules/sf-smith-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.SmithChart=function(){"use strict";var e=function(){function e(e,t,i,n){window.sfBlazor=window.sfBlazor,this.mouseY=0,this.mouseX=0,this.resizeTo=0,this.id=t,this.element=i,this.dotNetRef=n,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.unWireEvents=function(){var e=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove),sf.base.EventHandler.remove(this.element,"click",this.chartOnMouseClick),sf.base.EventHandler.remove(this.element,e,this.mouseLeave),window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.rangeResize.bind(this)),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDown);var t=sf.base.getInstance(this.element,this.keyActionHandler);t&&t.destroy(),this.element=null,this.dotNetRef=null},e.prototype.wireEvents=function(){var e=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove,this),sf.base.EventHandler.add(this.element,"click",this.chartOnMouseClick,this),sf.base.EventHandler.add(this.element,e,this.mouseLeave,this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.rangeResize.bind(this)),new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{enter:"enter"},eventName:"keydown"}),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDown.bind(this),this)},e.prototype.mouseDown=function(e){e.preventDefault()},e.prototype.keyActionHandler=function(e){"enter"===e.action&&this.chartOnMouseClickProcess(e)},e.prototype.mouseMove=function(e){document.getElementById(this.id+"_svg")&&this.setMouseXY(e),this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnSmithChartMouseMove",this.getEventArgs(e))},e.prototype.chartOnMouseClick=function(e){this.chartOnMouseClickProcess(e)},e.prototype.chartOnMouseClickProcess=function(e){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnSmithChartMouseClick",this.getEventArgs(e))},e.prototype.mouseLeave=function(e){this.setMouseXY(e),this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnSmithChartMouseLeave",this.getEventArgs(e))},e.prototype.rangeResize=function(e){var t=this;this.dotNetRef&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout((function(){t.dotNetRef.invokeMethodAsync("OnSmithChartResize",e)}),500))},e.prototype.setMouseXY=function(e){var t,i,n;"touchmove"===e.type?(t=(n=e).changedTouches[0].clientX,i=n.changedTouches[0].clientY):(t=e.clientX,i=e.clientY);var s=document.getElementById(this.id+"_svg").getBoundingClientRect(),o=document.getElementById(this.id).getBoundingClientRect();this.mouseY=i-o.top-Math.max(s.top-o.top,0),this.mouseX=t-o.left-Math.max(s.left-o.left,0)},e.prototype.getEventArgs=function(e){return{type:e.type,clientX:e.clientX?e.clientX:0,clientY:e.clientY?e.clientY:0,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType?e.pointerType:e.action?e.action:"",target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0}}},e}();return{id:"",mouseY:0,mouseX:0,initialize:function(t,i,n,s,o,r){return r?(new e(t,i,r,n).wireEvents(),this.getElementBoundsById(r,s,o)):{width:0,height:0}},getElementBoundsById:function(e,t,i){return e?(e.style.height=t,e.style.width=i,{width:e.clientWidth||e.offsetWidth,height:e.clientHeight||e.offsetHeight}):{width:0,height:0}},charCollection:["0","1","2","3","4","5","6","7","8","9","!",'"',"#","$","%","&","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"," "],measureText:function(e,t,i,n,s){var o=document.getElementById("chartmeasuretext");return null===o&&(o=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(o))," "===e&&(e="&nbsp;"),o.innerHTML=e,o.style.position="fixed",o.style.fontSize="100px",o.style.fontWeight=i,o.style.fontStyle=n,o.style.fontFamily=s,o.style.visibility="hidden",o.style.top="-100",o.style.left="0",o.style.whiteSpace="nowrap",o.style.lineHeight="normal",{Width:o.clientWidth,Height:o.clientHeight}},getCharSizeByFontKeys:function(e){for(var t={},i=this.charCollection,n=i.length,s=e.length,o=0;o<s;o++)for(var r=e[o].split("_"),a=r[0],l=r[1],d=r[2],h="_"+a+"_"+l+"_"+d,c=0;c<n;c++)t[i[c]+h]=this.measureText(i[c],"",a,l,d);return JSON.stringify(t)},getCharSizeByCharKey:function(e){var t=e.split("_"),i=t[0],n=t[1],s=t[2],o=t[3],r=t[4];return this.measureText(i,n,s,o,r)},resizeTo:{},linear:function(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t},reverselinear:function(e,t,i,n){return-t*Math.sin(e/n*(Math.PI/2))+i+t},doLinearAnimation:function(e,t,i){var n=this,s=document.getElementById(e);if(s){var o=new sf.base.Animation({}),r=+s.getAttribute("x"),a=+s.getAttribute("width");o.animate(s,{duration:t,delay:0,progress:function(e){e.timeStamp>=e.delay&&(s.setAttribute("visibility","visible"),i?s.setAttribute("width",n.linear(e.timeStamp-e.delay,0,a,e.duration).toString()):s.setAttribute("x",n.reverselinear(e.timeStamp-e.delay,a,0,e.duration).toString()))},end:function(){i?s.setAttribute("width",a.toString()):s.setAttribute("x",r.toString())}})}return null==s},getTemplateSize:function(e){var t=document.getElementById(e);return t?{width:t.offsetWidth,height:t.offsetHeight}:null},fadeOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.tooltip)||t.tooltip.fadeOut()},tooltip:{},renderTooltip:function(e,t,i){var n=document.getElementById(t+"_svg"),s=!(n&&parseInt(n.getAttribute("opacity"),10)>0),o=JSON.parse(e),r=window.sfBlazor.getCompInstance(i);s?(r.tooltip=new sf.svgbase.Tooltip(o),r.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(r.tooltip)||(r.tooltip.location=new sf.svgbase.TooltipLocation(o.location.x,o.location.y),r.tooltip.content=o.content,r.tooltip.header=o.header,r.tooltip.palette=o.palette,r.tooltip.shapes=o.shapes,r.tooltip.data=o.data,r.tooltip.template=o.template,r.tooltip.textStyle.color=o.textStyle.color||r.tooltip.textStyle.color,r.tooltip.textStyle.fontFamily=o.textStyle.fontFamily||r.tooltip.textStyle.fontFamily,r.tooltip.textStyle.fontStyle=o.textStyle.fontStyle||r.tooltip.textStyle.fontStyle,r.tooltip.textStyle.fontWeight=o.textStyle.fontWeight||r.tooltip.textStyle.fontWeight,r.tooltip.textStyle.opacity=o.textStyle.opacity||r.tooltip.textStyle.opacity,r.tooltip.textStyle.size=o.textStyle.size||r.tooltip.textStyle.size,r.tooltip.dataBind())},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);e&&t&&t.unWireEvents()}}}()},"./modules/sf-sparkline.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Sparkline=function(){"use strict";var e=function(){function e(e,t,i){this.resizeTo=0,window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=i,e=e,window.sfBlazor.setCompInstance(this)}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mousemove.bind(this),this),sf.base.EventHandler.add(this.element,sf.base.Browser.isPointer?"pointerleave":"mouseleave",this.mouseleave.bind(this),this),sf.base.EventHandler.add(this.element,"click",this.click,this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this))},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mousemove),sf.base.EventHandler.remove(this.element,"click",this.click),sf.base.EventHandler.remove(this.element,sf.base.Browser.isPointer?"pointerleave":"mouseleave",this.mouseleave),window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this)),this.element=null,this.dotNetRef=null},e.prototype.resize=function(){var e=this;this.dotNetRef&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout((function(){e.dotNetRef.invokeMethodAsync("OnResize")}),500))},e.prototype.mouseleave=function(){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnMouseLeave")},e.prototype.click=function(){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnClick")},e.prototype.mousemove=function(e){var t,i,n,s=this.element.getBoundingClientRect(),o=document.getElementById(this.element.id+"_svg");o&&(t=o.getBoundingClientRect());var r=document.getElementById(this.element.id+"_Secondary_Element");if(r&&(r.style.left=Math.max((t?t.left:0)-(s?s.left:0),0)+"px",r.style.top=Math.max((t?t.top:0)-(s?s.top:0),0)+"px"),e.type.indexOf("touch")>-1){var a=e;a.changedTouches?(n=a.changedTouches[0].clientX,i=a.changedTouches[0].clientY):(i=e.clientY,n=e.clientX)}else i=e.clientY,n=e.clientX;this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnMouseMove",n,i,s?s.top:0,s?s.left:0,t?t.top:0,t?t.left:0,e.target?e.target.id:"",sf.base.Browser.isIE)},e}();return{initialize:function(t,i,n,s,o){if(i)return new e(t,i,n).wireEvents(),this.getElementSize(i,s,o)},getElementSize:function(e,t,i){if(e){e.style.height=t,e.style.width=i;var n=e.parentElement?e.parentElement.clientWidth||0:100,s=e.parentElement?e.parentElement.clientHeight||0:50;return{width:e.clientWidth||e.offsetWidth,height:e.clientHeight||e.offsetHeight,parentWidth:n,parentHeight:s,isDevice:sf.base.Browser.isDevice,windowWidth:window.innerWidth,windowHeight:window.innerHeight}}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);e&&t&&t.unWireEvents()}}}()},"./modules/sf-speeddial.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.SpeedDial=function(){"use strict";var e="e-speeddial-fixed",t="e-speeddial-hidden",i="e-speeddial-li",n=function(){function n(e){this.sfBlazor=window.sfBlazor,this.updateContext(e),this.sfBlazor.setCompInstance(this),this.initialize()}return n.prototype.updateContext=function(e){sf.base.extend(this,this,e)},n.prototype.initialize=function(){this.isControl=!1,this.checkTarget(),this.setClientProps(!0),this.bindEvent()},n.prototype.checkTarget=function(){this.targetEle=null,sf.base.isNullOrUndefined(this.target)||"string"!=typeof this.target||(this.targetEle=document.querySelector(this.target)),this.isFixed=sf.base.isNullOrUndefined(this.targetEle),this.isFixed?(this.popupEle.classList.add(e),this.overlayEle&&this.overlayEle.classList.add(e)):(this.popupEle.classList.remove(e),this.targetEle.appendChild(this.popupEle),this.overlayEle&&(this.overlayEle.classList.remove(e),this.targetEle.appendChild(this.overlayEle)))},n.prototype.bindEvent=function(){sf.base.EventHandler.add(window,"resize",this.resizeHandler,this),sf.base.EventHandler.add(document.body,"click",this.documentClickhandler,this),sf.base.EventHandler.add(this.popupEle,"click",this.speeddialClickHandler,this),sf.base.EventHandler.add(this.element,"click",this.speeddialClickHandler,this),sf.base.EventHandler.add(this.popupEle,"mouseleave",this.popupMouseLeaveHandle,this),this.isHover&&this.bindHoverEvents()},n.prototype.unBindEvent=function(){sf.base.EventHandler.remove(window,"resize",this.resizeHandler),sf.base.EventHandler.remove(document.body,"click",this.documentClickhandler),sf.base.EventHandler.remove(this.popupEle,"click",this.speeddialClickHandler),sf.base.EventHandler.remove(this.element,"click",this.speeddialClickHandler),sf.base.EventHandler.remove(this.popupEle,"mouseleave",this.popupMouseLeaveHandle),this.isHover&&this.unBindHoverEvents()},n.prototype.bindHoverEvents=function(){sf.base.EventHandler.add(this.element,"mouseover",this.mouseOverHandle,this),sf.base.EventHandler.add(this.element,"mouseleave",this.mouseLeaveHandle,this)},n.prototype.unBindHoverEvents=function(){sf.base.EventHandler.remove(this.element,"mouseover",this.mouseOverHandle),sf.base.EventHandler.remove(this.element,"mouseleave",this.mouseLeaveHandle)},n.prototype.speeddialClickHandler=function(){this.isControl=!0},n.prototype.documentClickhandler=function(){this.isControl?this.isControl=!1:this.popupEle.classList.contains(t)||this.callShowHidePopup(!1)},n.prototype.popupMouseLeaveHandle=function(e){var t=e.relatedTarget;!this.isHover||t.classList.contains("e-speeddial")||sf.base.closest(t,".e-speeddial")||this.callShowHidePopup(!1)},n.prototype.mouseOverHandle=function(){this.callShowHidePopup(!0)},n.prototype.mouseLeaveHandle=function(e){var t=e.relatedTarget;t.classList.contains("e-speeddial-popup")||sf.base.closest(t,".e-speeddial-popup")||this.callShowHidePopup(!1)},n.prototype.callShowHidePopup=function(e){this.dotNetRef.invokeMethodAsync(e?"ShowAsync":"HideAsync")},n.prototype.resizeHandler=function(){this.getOffset(),(this.isMiddle||this.isCenter)&&this.dotNetRef.invokeMethodAsync("UpdatePosition",this.yOffset,this.xOffset)},n.prototype.setClientProps=function(e){this.getOffset();var t={yOffset:this.yOffset,xOffset:this.xOffset};e&&(t.isFixed=this.isFixed?"Fixed":"Absolute"),"Radial"!==this.mode||this.isTemplate||(t.liHeight=this.liHeight,t.liWidth=this.liWidth),this.clientProps=JSON.stringify(t)},n.prototype.getOffset=function(){if("Radial"===this.mode||this.isTemplate){if(this.yOffset=this.xOffset="",!this.isTemplate){var e=this.popupEle.querySelector(".e-speeddial-li");this.liHeight=e.offsetHeight+"px",this.liWidth=e.offsetWidth+"px",this.popupEle.style.setProperty("--speeddialRadialMinHeight",this.liHeight),this.popupEle.style.setProperty("--speeddialRadialMinWidth",this.liWidth)}this.isMiddle&&(this.yOffset=((this.targetEle?this.targetEle.clientHeight:window.innerHeight)-this.popupEle.offsetHeight)/2+"px",this.popupEle.style.setProperty("--speeddialVertDist",this.yOffset)),this.isCenter&&(this.xOffset=((this.targetEle?this.targetEle.clientWidth:window.innerWidth)-this.popupEle.offsetWidth)/2+"px",this.popupEle.style.setProperty("--speeddialHorzDist",this.xOffset))}else this.isTop?this.yOffset=this.element.offsetTop+(this.isVertical?this.element.offsetHeight:0)+"px":(this.yOffset=this.isFixed?window.innerHeight:this.targetEle.clientHeight,this.yOffset=this.yOffset-this.element.offsetTop-(this.isVertical?0:this.element.offsetHeight)+"px"),this.popupEle.style.setProperty("--speeddialVertDist",this.yOffset),this.isLeft?this.xOffset=this.element.offsetLeft+(this.isVertical?0:this.element.offsetWidth)+"px":(this.xOffset=this.isFixed?window.innerWidth:this.targetEle.clientWidth,this.xOffset=this.xOffset-this.element.offsetLeft-(this.isVertical?this.element.offsetWidth:0)+"px"),this.popupEle.style.setProperty("--speeddialHorzDist",this.xOffset)},n.prototype.animateClose=function(e){var n=this;this.updateContext(e);var s={name:this.animation.effect+"Out",timingFunction:"easeOut"},o=this.isTemplate?[this.popupEle.firstElementChild]:sf.base.selectAll("."+i,this.popupEle);o&&0!==o.length||this.dotNetRef.invokeMethodAsync("OnAnimationCompleted",!1);var r=this.animation.duration/(o.length+1);s.duration=2*r;!function e(i){if(s.delay=i===o.length-1?n.animation.delay:0,s.begin=function(){},s.end=function(){o[i].classList.add(t),0===i&&(n.popupEle.classList.add(t),n.dotNetRef.invokeMethodAsync("OnAnimationCompleted",!1))},new sf.base.Animation(s).animate(o[i]),0!==i){var a=i-1;setTimeout((function(){e(a)}),r)}}(o.length-1)},n.prototype.animateOpen=function(e){var n=this;this.updateContext(e);var s={name:this.animation.effect+"In",timingFunction:"easeIn"},o=this.isTemplate?[this.popupEle.firstElementChild]:sf.base.selectAll("."+i,this.popupEle);o&&0!==o.length||this.dotNetRef.invokeMethodAsync("OnAnimationCompleted",!0);var r=this.animation.duration/(o.length+1);s.duration=2*r;!function e(i){if(s.delay=0===i?n.animation.delay:0,s.begin=function(){0===i&&n.popupEle.classList.remove(t),o[i].classList.remove(t)},s.end=function(){i===o.length-1&&(n.isTemplate&&n.popupEle.focus(),n.dotNetRef.invokeMethodAsync("OnAnimationCompleted",!0))},new sf.base.Animation(s).animate(o[i]),i!==o.length-1){var a=i+1;setTimeout((function(){e(a)}),r)}}(0)},n.prototype.validateTarget=function(e){this.updateContext(e),this.checkTarget(),this.setClientProps(!0)},n.prototype.setPosition=function(e){this.updateContext(e),this.setClientProps(!1)},n.prototype.updateOnHover=function(e){this.updateContext(e),this.isHover?this.bindHoverEvents():this.unBindHoverEvents()},n.prototype.destroy=function(){this.unBindEvent()},n}();return{initialize:function(e){return e.dataId?new n(e).clientProps:{}},validateTarget:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);return t.validateTarget(e),t.clientProps}return{}},setPosition:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);return t.setPosition(e),t.clientProps}return{}},updateOnHover:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).updateOnHover(e)},animateClose:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).animateClose(e)},animateOpen:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).animateOpen(e)},destroy:function(e){e&&window.sfBlazor.getCompInstance(e).destroy()},focusElement:function(e){e.focus()}}}()},"./modules/sf-spinner.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Spinner=function(){"use strict";var e=function(){function e(e){this.element=e,this.element.blazor__instance=this}return e.prototype.initialize=function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")},e}();return{initialize:function(t){return sf.base.isNullOrUndefined(t)?null:(new e(t),sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.blazor__instance)?null:t.blazor__instance.initialize(t))}}}()},"./modules/sf-splitter.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Splitter=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},t="e-split-bar",n="e-static-pane",s="e-resize-handler",o="e-arrow-left",r="e-arrow-up",a="e-arrow-down",l="e-icon-hidden",d="msie",h="Horizontal",c="px",p=function(){function p(e){this.allPanes=[],this.allBars=[],this.previousCoordinates={},this.currentCoordinates={},this.updatePrePaneInPercentage=!1,this.updateNextPaneInPercentage=!1,this.panesDimensions=[],this.border=0,this.isToggleInvoke=!1,this.createdEnabled=!1,this.resizingEnabled=!1,this.expandedEnabled=!1,this.onExpandEnabled=!1,this.collapsedEnabled=!1,this.onCollapseEnabled=!1,this.onResizeStopEnabled=!1,this.onResizeStartEnabled=!1,this.iconsDelay=300,this.collapseFlag=!1,this.expandFlag=!0,this.expandingFlag=!0,this.enablePersistence=!1,window.sfBlazor=window.sfBlazor,this.updateContext(e),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this)}return p.prototype.updateContext=function(e){sf.base.extend(this,this,e)},p.prototype.initialize=function(){this.id=this.element.id,this.addSeparator(),this.collapseFlag=!0,this.isCollapsed(),this.collapseFlag=!1,this.updateClass(),sf.base.EventHandler.add(document,"touchstart click",this.onDocumentClick,this),document.body.contains(this.element)&&this.createdEnabled&&this.dotNetRef.invokeMethodAsync("CreatedEvent",null),sf.base.EventHandler.add(this.element,"keydown",this.onMove,this),window.addEventListener("resize",this.reportWindowSize.bind(this),!0),sf.base.Browser.isDevice&&sf.base.addClass([this.element],"e-splitter-touch"),this.enableReversePanes&&this.setReversePane()},p.prototype.setReversePane=function(){this.allPanes=this.allPanes.reverse(),this.allBars=this.allBars.reverse(),sf.base.addClass([this.allBars[this.allBars.length-1]],"e-last-bar"),sf.base.removeClass([this.allBars[0]],"e-last-bar")},p.prototype.onDocumentClick=function(e){e.target.classList.contains(t)||sf.base.isNullOrUndefined(this.currentSeparator)||sf.base.removeClass([this.currentSeparator],["e-split-bar-hover","e-split-bar-active"])},p.prototype.updateClass=function(){if(sf.base.Browser.info.name===d){sf.base.addClass([this.element],"e-ie");for(var e=this.element.querySelectorAll(".e-splitter ."+s),t=0;t<e.length;t++){var i=sf.base.isNullOrUndefined(this.separatorSize)?1:this.separatorSize;sf.base.setStyleAttribute(e[t],{"padding-left":i/2+c,"padding-right":i/2+c})}}},p.prototype.reportWindowSize=function(){for(var e=this,t=this.allPanes.length,i=0;i<t;i++){if(sf.base.isNullOrUndefined(this.paneSettings[i].size)&&this.allPanes[i].classList.remove(n),t-1===i)this.element.querySelectorAll("."+n).length===t&&sf.base.removeClass([this.allPanes[i]],n)}setTimeout((function(){e.updateSplitterSize(!0)}),200)},p.prototype.onMove=function(e){if(this.allPanes.length>1&&this.element.children.length>1){this.getPaneDetails(),this.getPaneDimensions(!1);var i=this.getSeparatorIndex(this.currentSeparator),n=this.previousPane.classList.contains("e-collapsed"),s=this.previousPane.classList.contains("e-expanded"),o=this.nextPane.classList.contains("e-collapsed");(this.orientation!==h&&38===e.keyCode||this.orientation===h&&39===e.keyCode||this.orientation===h&&37===e.keyCode||this.orientation!==h&&40===e.keyCode)&&(!s&&!o&&!n||s&&!o)&&document.activeElement.classList.contains(t)&&this.paneSettings[i].resizable&&this.paneSettings[i+1].resizable?(e.preventDefault(),this.checkPaneSize(e),this.resizingEnabled&&this.dotNetRef.invokeMethodAsync("ResizingEvent",{event:this.getKeyBoardEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),paneSize:[this.prePaneDimenson,this.nextPaneDimension]})):13===e.keyCode&&this.paneSettings[i].collapsible&&document.activeElement.classList.contains(t)&&this.currentSeparator.classList.contains("e-split-bar-active")&&(this.previousPane.classList.contains("e-collapsed")?(this.expand(i),sf.base.addClass([this.currentSeparator],"e-split-bar-active")):(this.collapse(i),sf.base.addClass([this.currentSeparator],"e-split-bar-active")))}},p.prototype.addSeparator=function(){var e,i=this;this.allBars=[],this.allPanes=[];for(var n=0;n<this.element.children.length;n++)this.element.children[n].classList.contains("e-pane")&&this.allPanes.push(this.element.children[n]),this.element.children[n].classList.contains(t)&&this.allBars.push(this.element.children[n]);for(var o=this.allPanes.length,r=0;r<o;r++)if(r<o-1){if(e=this.allBars[r],this.updateIconClass(),sf.base.isNullOrUndefined(e)||(this.currentSeparator=e,this.addMouseActions(e),sf.base.EventHandler.add(this.currentSeparator,"touchstart click",this.clickHandler,this),e.addEventListener("focus",(function(){document.activeElement.classList.contains(t)&&(i.currentSeparator=document.activeElement,sf.base.addClass([i.currentSeparator],"e-split-bar-active"))})),e.addEventListener("blur",(function(){sf.base.removeClass([i.currentSeparator],"e-split-bar-active")}))),!sf.base.isNullOrUndefined(e))if(this.isResizable()){sf.base.EventHandler.add(e,"mousedown",this.onMouseDown,this);var a=sf.base.Browser.info.name===d?"pointerdown":"touchstart";sf.base.EventHandler.add(e,a,this.onMouseDown,this),this.updateResizablePanes(r)}else sf.base.addClass([sf.base.select("."+s,e)],"e-hide-handler")}else e&&sf.base.addClass([e],"e-last-bar"),o>1&&this.updateResizablePanes(r)},p.prototype.updateSeparator=function(){for(var e=0;e<this.allBars.length;e++){var t=this.allBars[e];sf.base.EventHandler.remove(t,"touchstart click",this.clickHandler),sf.base.EventHandler.remove(t,"mousedown",this.onMouseDown);var i=sf.base.Browser.info.name===d?"pointerdown":"touchstart";sf.base.EventHandler.remove(t,i,this.onMouseDown)}this.addSeparator()},p.prototype.updateResizablePanes=function(e){this.getPaneDetails(),this.isResizable(),sf.base.addClass([this.allPanes[e]],"e-resizable")},p.prototype.getPaneDetails=function(){var e=null,t=null;this.order=parseInt(this.currentSeparator.style.order,10),this.allPanes.length>1&&(e=this.getPrevPane(this.order),t=this.getNextPane(this.order)),e&&t&&(this.previousPane=e,this.nextPane=t,this.prevPaneIndex=this.getPreviousPaneIndex(),this.nextPaneIndex=this.getNextPaneIndex())},p.prototype.getOrderIndex=function(e,t){for(var i,n="pane"===t?this.allPanes:this.allBars,s=0;s<n.length;s++)parseInt(n[s].style.order)===e&&(i=s);return i},p.prototype.getPrevPane=function(e){return this.getOrderPane(e-1)},p.prototype.getNextPane=function(e){return this.getOrderPane(e+1)},p.prototype.getOrderPane=function(e){for(var t,i=0;i<this.element.children.length;i++)parseInt(this.element.children[i].style.order)===e&&(t=this.element.children[i]);return t},p.prototype.getPreviousPaneIndex=function(){var e=parseInt(this.currentSeparator.style.order,10)-1;return this.getOrderIndex(e,"pane")},p.prototype.getNextPaneIndex=function(){var e=parseInt(this.currentSeparator.style.order,10)+1;return this.getOrderIndex(e,"pane")},p.prototype.onMouseDown=function(e){e.preventDefault();var t=e.target;if(this.splitterDetails(e),!t.classList.contains("e-navigate-arrow")){this.updateCurrentSeparator(t),sf.base.addClass([this.currentSeparator],"e-split-bar-active"),this.updateCursorPosition(e,"previous"),this.getPaneDetails();for(var i=this.element.querySelectorAll("iframe"),n=0;n<i.length;n++)i[n].style.pointerEvents="none";this.onResizeStartEnabled?this.dotNetRef.invokeMethodAsync("ResizeStartEvent",{event:this.getMouseEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),cancel:!1}):this.resizeEvent(e)}},p.prototype.getMouseEvtArgs=function(e){return{button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,detail:e.detail,screenX:e.screenX,screenY:e.screenY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,type:e.type}},p.prototype.getKeyBoardEvtArgs=function(e){return{key:e.key,code:e.code,location:e.location,repeat:e.repeat,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,type:e.type}},p.prototype.getDomObject=function(e,t){return null!=t?window.sfBlazor.getDomObject(e,t):null},p.prototype.resizeEvent=function(e){this.wireResizeEvents(),this.checkPaneSize(e)},p.prototype.checkPaneSize=function(e){var t,i,n=sf.base.isNullOrUndefined(this.separatorSize)?1:this.separatorSize;if(t=this.orientation===h?this.previousPane.offsetWidth:this.previousPane.offsetHeight,i=this.orientation===h?this.nextPane.offsetWidth:this.nextPane.offsetHeight,this.previousPane.style.flexBasis.indexOf("%")>0||this.nextPane.style.flexBasis.indexOf("%")>0){var s=this.updatePaneFlexBasis(this.previousPane),o=this.updatePaneFlexBasis(this.nextPane);this.totalPercent=s+o,this.totalWidth=this.convertPercentageToPixel(this.totalPercent+"%"),"keydown"!==e.type||sf.base.isNullOrUndefined(e.keyCode)||((39===e.keyCode||40===e.keyCode)&&i>0&&this.getMinInPixel(this.paneSettings[this.nextPaneIndex].min)<this.convertPercentageToPixel(o-1+"%")?(this.previousPane.style.flexBasis=s+1+"%",this.nextPane.style.flexBasis=o-1+"%"):(37===e.keyCode||38===e.keyCode)&&t>0&&this.getMinInPixel(this.paneSettings[this.prevPaneIndex].min)<this.convertPercentageToPixel(s-1+"%")&&(this.previousPane.style.flexBasis=s-1+"%",this.nextPane.style.flexBasis=o+1+"%"))}else this.totalWidth=this.orientation===h?this.previousPane.offsetWidth+this.nextPane.offsetWidth:this.previousPane.offsetHeight+this.nextPane.offsetHeight,"keydown"!==e.type||sf.base.isNullOrUndefined(e.keyCode)||((39===e.keyCode||40===e.keyCode)&&i>0&&this.getMinInPixel(this.paneSettings[this.nextPaneIndex].min)<i+n?(this.addStaticPaneClass(),this.previousPane.style.flexBasis=t+n+c,this.nextPane.style.flexBasis=i<n?"0px":i-n+c):(37===e.keyCode||38===e.keyCode)&&t>0&&this.getMinInPixel(this.paneSettings[this.prevPaneIndex].min)<t-n&&(this.addStaticPaneClass(),this.previousPane.style.flexBasis=t<n?"0px":t-n+c,this.nextPane.style.flexBasis=i+n+c))},p.prototype.getMinInPixel=function(e){if(sf.base.isNullOrUndefined(e))return 0;var t=this.convertPixelToNumber(e.toString());return e.indexOf("%")>0&&(t=this.convertPercentageToPixel(e)),this.convertPixelToNumber(t.toString())},p.prototype.addStaticPaneClass=function(){this.previousPane.classList.contains(n)||""===this.previousPane.style.flexBasis||sf.base.addClass([this.previousPane],n),this.nextPane.classList.contains(n)||""===this.nextPane.style.flexBasis||sf.base.addClass([this.nextPane],n)},p.prototype.convertPercentageToPixel=function(e,t){var i,n=e.toString();if(n.indexOf("%")>-1){i=parseFloat(n.slice(0,n.indexOf("%")));var s=void 0;s=sf.base.isNullOrUndefined(t)?this.orientation===h?this.element.offsetWidth:this.element.offsetHeight:this.panesDimensions[this.allPanes.indexOf(t)],i=Math.ceil(s*(i/100))}else i=parseInt(n,10);return i},p.prototype.updatePaneFlexBasis=function(e){var t;if(e.style.flexBasis.indexOf("%")>0)t=parseFloat(e.style.flexBasis.slice(0,e.style.flexBasis.indexOf("%")));else if(""!==e.style.flexBasis)t=this.convertPixelToPercentage(this.convertPixelToNumber(e.style.flexBasis));else{var i=this.orientation===h?e.offsetWidth:e.offsetHeight;t=this.convertPixelToPercentage(i)}return t},p.prototype.convertPixelToPercentage=function(e){return e/(this.orientation===h?this.element.offsetWidth:this.element.offsetHeight)*100},p.prototype.convertPixelToNumber=function(e){return(e=e.toString()).indexOf("p")>-1?parseFloat(e.slice(0,e.indexOf("p"))):parseFloat(e)},p.prototype.updateCurrentSeparator=function(e){this.currentSeparator=e.classList.contains(t)?e:e.parentElement},p.prototype.wireResizeEvents=function(){sf.base.EventHandler.add(document,"mousemove",this.onMouseMove,this),sf.base.EventHandler.add(document,"mouseup",this.onMouseUp,this);var e=sf.base.Browser.info.name===d?"pointermove":"touchmove",t=sf.base.Browser.info.name===d?"pointerup":"touchend";sf.base.EventHandler.add(document,e,this.onMouseMove,this),sf.base.EventHandler.add(document,t,this.onMouseUp,this)},p.prototype.unwireResizeEvents=function(){var e=sf.base.Browser.info.name===d?"pointermove":"touchmove",t=sf.base.Browser.info.name===d?"pointerup":"touchend";sf.base.EventHandler.remove(document,"mousemove",this.onMouseMove),sf.base.EventHandler.remove(document,"mouseup",this.onMouseUp),sf.base.EventHandler.remove(document,e,this.onMouseMove),sf.base.EventHandler.remove(document,t,this.onMouseUp),window.removeEventListener("resize",this.reportWindowSize.bind(this))},p.prototype.onMouseMove=function(e){if(this.isCursorMoved(e)){this.getPaneDetails(),this.getPaneDimensions(!1),this.resizingEnabled&&this.dotNetRef.invokeMethodAsync("ResizingEvent",{event:this.getMouseEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),paneSize:[this.prePaneDimenson,this.nextPaneDimension]});var t,s=this.validateDraggedPosition(this.getSeparatorPosition(e),this.prePaneDimenson,this.nextPaneDimension);if(this.getBorder(),t=this.orientation===h?this.element.getBoundingClientRect().left+s-this.currentSeparator.getBoundingClientRect().left+this.border:this.element.getBoundingClientRect().top+s-this.currentSeparator.getBoundingClientRect().top+this.border,this.nextPaneHeightWidth="string"===i(this.nextPaneHeightWidth)&&this.nextPaneHeightWidth.indexOf("p")>-1?this.convertPixelToNumber(this.nextPaneHeightWidth):parseInt(this.nextPaneHeightWidth,10),this.previousPaneHeightWidth="string"===i(this.previousPaneHeightWidth)&&this.previousPaneHeightWidth.indexOf("p")>-1?this.convertPixelToNumber(this.previousPaneHeightWidth):parseInt(this.previousPaneHeightWidth,10),this.prevPaneCurrentWidth=t+this.convertPixelToNumber(this.previousPaneHeightWidth),this.nextPaneCurrentWidth=this.nextPaneHeightWidth-t,this.validateMinMaxValues(),this.nextPaneCurrentWidth<0&&(this.nextPaneCurrentWidth=0),this.prevPaneCurrentWidth<0&&(this.prevPaneCurrentWidth=0),this.nextPaneCurrentWidth+this.prevPaneCurrentWidth>this.totalWidth&&(this.nextPaneCurrentWidth<this.prevPaneCurrentWidth?this.prevPaneCurrentWidth=this.prevPaneCurrentWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth-this.totalWidth):this.nextPaneCurrentWidth=this.nextPaneCurrentWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth-this.totalWidth)),this.nextPaneCurrentWidth+this.prevPaneCurrentWidth<this.totalWidth){var o=this.totalWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth);this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+o}if(this.calculateCurrentDimensions(),this.addStaticPaneClass(),""==this.previousPane.style.flexBasis&&""==this.nextPane.style.flexBasis){var r=this.allPanes.length%this.allBars.length;this.prevPaneIndex==r?(this.nextPane.style.flexBasis=this.nextPaneCurrentWidth,sf.base.addClass([this.nextPane],n)):this.nextPaneIndex==r?(this.previousPane.style.flexBasis=this.prevPaneCurrentWidth,sf.base.addClass([this.previousPane],n)):(this.nextPane.style.flexBasis=this.nextPaneCurrentWidth,sf.base.addClass([this.nextPane],n))}else""!==this.previousPane.style.flexBasis&&(this.previousPane.style.flexBasis=this.prevPaneCurrentWidth),""!==this.nextPane.style.flexBasis&&(this.nextPane.style.flexBasis=this.nextPaneCurrentWidth);this.allPanes.length>2||this.updateSplitterSize()}},p.prototype.updateSplitterSize=function(e){for(var t=0,i=[],n=0,s=this.element.children,o=0;o<s.length;o++)t+=this.orientation===h?s[o].offsetWidth:s[o].offsetHeight;for(var r=0;r<this.allBars.length;r++){var a=getComputedStyle(this.allBars[r]);t+=this.orientation===h?parseInt(a.marginLeft,10)+parseInt(a.marginLeft,10):parseInt(a.marginTop,10)+parseInt(a.marginBottom,10)}var l=this.orientation===h?this.element.offsetWidth-(2*this.border+t):this.element.offsetHeight-(2*this.border+t);for(o=0;o<this.allPanes.length;o++)this.paneSettings[o].size||""===this.allPanes[o].innerText||(i[n]=o,n++);var d=l/i.length;for(r=0;r<i.length;r++)this.allPanes[i[r]].style.flexBasis=this.orientation===h?this.allPanes[i[r]].offsetWidth+d+c:this.allPanes[i[r]].offsetHeight+d+c;if(2===this.allPanes.length&&e){var p=this.allPanes.length,u=void 0,f=void 0,m=void 0,g=void 0;for(o=0;o<p;o++)if(!sf.base.isNullOrUndefined(this.paneSettings[o].min)&&(f=this.convertPixelToNumber(this.paneSettings[o].min.toString()),this.paneSettings[o].min.indexOf("%")>0&&(f=this.convertPercentageToPixel(this.paneSettings[o].min)),u=this.convertPixelToNumber(f.toString()),(this.orientation===h?this.allPanes[o].offsetWidth:this.allPanes[o].offsetHeight)<u)){0===o?(m=this.allPanes[o],g=this.allPanes[o+1]):(m=this.allPanes[o],g=this.allPanes[o-1]);var v=u-(this.orientation===h?this.allPanes[o].offsetWidth:this.allPanes[o].offsetHeight),b=m.style.flexBasis.indexOf("%")>-1,y=this.orientation===h?m.offsetWidth:m.offsetHeight;m.style.flexBasis=b?this.convertPixelToPercentage(y+v)+"%":y+v+"px";var w=this.orientation===h?g.offsetWidth:g.offsetHeight;g.style.flexBasis=g.style.flexBasis.indexOf("%")>-1?this.convertPixelToPercentage(w-v)+"%":w-v+"px"}}},p.prototype.calcDragPosition=function(e,t){var i;return(i=(i=(this.orientation===h?this.currentCoordinates.x-e:this.currentCoordinates.y-e)/t)>1?1:i<0?0:i)*t},p.prototype.getSeparatorPosition=function(e){this.updateCursorPosition(e,"current");var t=this.orientation===h?this.element.getBoundingClientRect().left+window.scrollX:this.element.getBoundingClientRect().top+window.scrollY,i=this.orientation===h?this.element.offsetWidth:this.element.offsetHeight;return this.calcDragPosition(t,i)},p.prototype.getBorder=function(){var e=this.orientation===h?(this.element.offsetWidth-this.element.clientWidth)/2:(this.element.offsetHeight-this.element.clientHeight)/2;this.border="chrome"!==sf.base.Browser.info.name?0:e},p.prototype.validateMinMaxValues=function(){this.prevPaneCurrentWidth=this.validateMinRange(this.prevPaneIndex,this.prevPaneCurrentWidth,this.previousPane),this.nextPaneCurrentWidth=this.validateMinRange(this.nextPaneIndex,this.nextPaneCurrentWidth,this.nextPane),this.prevPaneCurrentWidth=this.validateMaxRange(this.prevPaneIndex,this.prevPaneCurrentWidth,this.previousPane),this.nextPaneCurrentWidth=this.validateMaxRange(this.nextPaneIndex,this.nextPaneCurrentWidth,this.nextPane)},p.prototype.validateMinRange=function(e,t,i){var n,s,o=null,r=0;return sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].min)||(o=this.paneSettings[e].min.toString()),sf.base.isNullOrUndefined(o)||(o.indexOf("%")>0&&(o=this.convertPercentageToPixel(o).toString()),t<(n=this.convertPixelToNumber(o))&&(r=t-n<=0?0:t-n,this.totalWidth=this.totalWidth-r,this.totalPercent=this.convertPixelToPercentage(this.totalWidth),s=n)),sf.base.isNullOrUndefined(s)?t:s},p.prototype.validateMaxRange=function(e,t,i){var n,s,o=null;return sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].max)||(o=this.paneSettings[e].max.toString()),sf.base.isNullOrUndefined(o)||(o.indexOf("%")>0&&(o=this.convertPercentageToPixel(o).toString()),t>(n=this.convertPixelToNumber(o))&&(this.totalWidth=this.totalWidth-(t-n),this.totalPercent=this.convertPixelToPercentage(this.totalWidth),s=n)),sf.base.isNullOrUndefined(s)?t:s},p.prototype.calculateCurrentDimensions=function(){this.updatePrePaneInPercentage||this.updateNextPaneInPercentage?(this.prevPaneCurrentWidth=Math.round(Number(Math.round(10*this.convertPixelToPercentage(this.prevPaneCurrentWidth))/10)),this.nextPaneCurrentWidth=Math.round(Number(Math.round(10*this.convertPixelToPercentage(this.nextPaneCurrentWidth))/10)),0===this.prevPaneCurrentWidth&&(this.nextPaneCurrentWidth=this.totalPercent),0===this.nextPaneCurrentWidth&&(this.prevPaneCurrentWidth=this.totalPercent),this.prevPaneCurrentWidth+this.nextPaneCurrentWidth!==this.totalPercent?this.equatePaneWidths():(this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+"%"),this.prevPaneCurrentWidth=this.updatePrePaneInPercentage?this.prevPaneCurrentWidth:this.convertPercentageToPixel(this.prevPaneCurrentWidth)+"px",this.nextPaneCurrentWidth=this.updateNextPaneInPercentage?this.nextPaneCurrentWidth:this.convertPercentageToPixel(this.nextPaneCurrentWidth)+"px",this.updatePrePaneInPercentage=!1,this.updateNextPaneInPercentage=!1):(this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+"px",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+"px")},p.prototype.equatePaneWidths=function(){var e;this.prevPaneCurrentWidth+this.nextPaneCurrentWidth>this.totalPercent&&(e=this.prevPaneCurrentWidth+this.nextPaneCurrentWidth-this.totalPercent,this.prevPaneCurrentWidth=this.prevPaneCurrentWidth-e/2+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth-e/2+"%"),this.prevPaneCurrentWidth+this.nextPaneCurrentWidth<this.totalPercent&&(e=this.totalPercent-(this.prevPaneCurrentWidth+this.nextPaneCurrentWidth),this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+e/2+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+e/2+"%")},p.prototype.validateDraggedPosition=function(e,t,i){var n=this.orientation===h?this.currentSeparator.offsetLeft:this.currentSeparator.offsetTop,s=n-t,o=i+n,r=this.getMinMax(this.prevPaneIndex,"min"),a=this.getMinMax(this.nextPaneIndex,"min"),l=this.getMinMax(this.prevPaneIndex,"max"),d=this.getMinMax(this.nextPaneIndex,"max"),c=e;return e>o-a?c=o-a:e<s+r&&(c=s+r),sf.base.isNullOrUndefined(l)?sf.base.isNullOrUndefined(d)||e<o-d&&(c=o-d):e>s+l&&(c=s+l),c},p.prototype.getMinMax=function(e,t){var i="min"===t?0:null,n=null;return"min"===t?sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].min)||(n=this.paneSettings[e].min):sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].max)||(n=this.paneSettings[e].max),this.paneSettings.length>0&&!sf.base.isNullOrUndefined(this.paneSettings[e])&&!sf.base.isNullOrUndefined(n)?(n.indexOf("%")>0&&(n=this.convertPercentageToPixel(n).toString()),this.convertPixelToNumber(n)):i},p.prototype.isValidSize=function(e){var t;return!sf.base.isNullOrUndefined(this.paneSettings[e])&&!sf.base.isNullOrUndefined(this.paneSettings[e].size)&&this.paneSettings[e].size.indexOf("%")>-1&&(t=!0),t},p.prototype.getPaneDimensions=function(e){this.previousPaneHeightWidth=""===this.previousPane.style.flexBasis||e?this.getPaneHeight(this.previousPane):this.previousPane.style.flexBasis,this.nextPaneHeightWidth=""===this.nextPane.style.flexBasis||e?this.getPaneHeight(this.nextPane):this.nextPane.style.flexBasis,this.isValidSize(this.prevPaneIndex)&&(this.previousPaneHeightWidth=this.convertPercentageToPixel(this.previousPaneHeightWidth).toString(),this.updatePrePaneInPercentage=!0),this.isValidSize(this.nextPaneIndex)&&(this.nextPaneHeightWidth=this.convertPercentageToPixel(this.nextPaneHeightWidth).toString(),this.updateNextPaneInPercentage=!0),this.prePaneDimenson=this.convertPixelToNumber(this.previousPaneHeightWidth.toString()),this.nextPaneDimension=this.convertPixelToNumber(this.nextPaneHeightWidth.toString())},p.prototype.getPaneHeight=function(e){return this.orientation===h?e.offsetWidth.toString():e.offsetHeight.toString()},p.prototype.isCursorMoved=function(e){return"mouse"===this.getEventType(e.type)||!sf.base.isNullOrUndefined(e.pointerType)&&"mouse"===this.getEventType(e.pointerType)?this.checkCoordinates(e.pageX,e.pageY):sf.base.Browser.info.name!==d?this.checkCoordinates(e.touches[0].pageX,e.touches[0].pageY):this.checkCoordinates(e.pageX,e.pageY)},p.prototype.checkCoordinates=function(e,t){var i=!0;return e!==this.previousCoordinates.x&&t!==this.previousCoordinates.y||(i=!1),i},p.prototype.onMouseUp=function(e){sf.base.removeClass([this.currentSeparator],"e-split-bar-active"),this.unwireResizeEvents();for(var t=0;t<this.element.querySelectorAll("iframe").length;t++)this.element.querySelectorAll("iframe")[t].style.pointerEvents="auto";this.getPaneDimensions(!1),this.updatePersistData(),this.onResizeStopEnabled&&this.dotNetRef.invokeMethodAsync("SplitterResizeInfo",{event:this.getMouseEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),paneSize:[this.prePaneDimenson,this.nextPaneDimension],resizingPaneSizes:[this.previousPane.style.flexBasis,this.nextPane.style.flexBasis]})},p.prototype.isMouseEvent=function(e){var t;return("mouse"===this.getEventType(e.type)||!sf.base.isNullOrUndefined(e.pointerType)&&"mouse"===this.getEventType(e.pointerType))&&(t=!0),t},p.prototype.getEventType=function(e){return e.indexOf("mouse")>-1?"mouse":"touch"},p.prototype.updateCursorPosition=function(e,t){if(this.isMouseEvent(e))this.changeCoordinates({x:e.pageX,y:e.pageY},t);else{var i=sf.base.Browser.info.name!==d?e.touches[0]:e;this.changeCoordinates({x:i.pageX,y:i.pageY},t)}},p.prototype.changeCoordinates=function(e,t){"previous"===t?this.previousCoordinates=e:this.currentCoordinates=e},p.prototype.isResizable=function(){var e,t=this.getNextPaneIndex(),i=this.getPreviousPaneIndex();return(!sf.base.isNullOrUndefined(this.paneSettings[i])&&this.paneSettings[i].resizable&&!sf.base.isNullOrUndefined(this.paneSettings[t])&&this.paneSettings[t].resizable||sf.base.isNullOrUndefined(this.paneSettings[t]))&&(e=!0),e},p.prototype.clickHandler=function(e){if(e.detail<=1){if(!e.target.classList.contains("e-navigate-arrow")){var i=sf.base.selectAll(".e-splitter > ."+t+".e-split-bar-hover");i.length>0&&sf.base.removeClass(i,"e-split-bar-hover"),sf.base.addClass([e.target],"e-split-bar-hover")}this.updateIconClass();var n=e.target;(n.classList.contains(o)||n.classList.contains(r))&&this.collapseAction(e),(n.classList.contains("e-arrow-right")||n.classList.contains(a))&&this.expandAction(e);for(var s=0,l=this.element.children,d=0;d<l.length;d++)s+=this.orientation===h?l[d].offsetWidth:l[d].offsetHeight;s>this.element.offsetWidth&&this.updateSplitterSize()}},p.prototype.collapseAction=function(e){if(this.splitterDetails(e),this.collapseFlag)this.collapsePane(e);else{var t={cancel:!1,event:e,index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]};this.onCollapseEnabled?this.dotNetRef.invokeMethodAsync("OnCollapseEvent",-1,t):sf.base.isNullOrUndefined(e)?this.collapseMethodEvent(-1,t):this.onCollapseEvent(t)}},p.prototype.onCollapseEvent=function(e){var t=this.orientation===h?o:r,i={target:this.allBars[e.index[0]].querySelector("."+t)};this.collapsePane(i),this.collapsedEnabled&&(this.getPaneDimensions(!0),this.dotNetRef.invokeMethodAsync("CollapsedEvent",{event:this.getMouseEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],paneSize:[this.prePaneDimenson,this.nextPaneDimension]}))},p.prototype.collapsePane=function(e){var t=this.element.querySelectorAll(".e-collapsed").length,i=this.nextPane.nextElementSibling,s=this.previousPane.classList.contains(n)&&!this.previousPane.classList.contains("e-collapsed")&&!this.nextPane.classList.contains("e-collapsed")&&i.classList.contains("e-pane")&&!i.classList.contains(n)&&!i.classList.contains("e-collapsed")&&!(t===this.allPanes.length-2)||this.nextPane.classList.contains("e-collapsed")&&!this.previousPane.classList.contains(n)&&this.nextPane.classList.contains(n),o=["e-collapsed","e-pane-hidden"];this.nextPane.classList.contains("e-collapsed")?(sf.base.removeClass([this.previousPane],"e-expanded"),sf.base.removeClass([this.nextPane],o),this.collapseFlag||this.updatePaneSettings(this.nextPaneIndex,!1)):(sf.base.removeClass([this.previousPane],"e-expanded"),sf.base.removeClass([this.nextPane],o),sf.base.addClass([this.nextPane],"e-expanded"),sf.base.addClass([this.previousPane],o),this.collapseFlag||this.updatePaneSettings(this.prevPaneIndex,!0)),this.updateIconsOnCollapse(e),this.previousPane.setAttribute("aria-expanded","false"),this.nextPane.setAttribute("aria-expanded","true"),this.updateFlexGrow(this.checkStaticPanes()),s&&(sf.base.removeClass([this.nextPane],"e-expanded"),this.nextPane.style.flexGrow="")},p.prototype.updateIconsOnCollapse=function(e){this.splitterProperty(),this.previousPane.classList.contains("e-collapsed")&&!this.nextPane.classList.contains("e-collapsed")?(sf.base.addClass([e.target],l),this.paneSettings[this.prevPaneIndex].collapsible&&sf.base.removeClass([sf.base.select("."+this.arrow,this.currentSeparator)],l),this.resizableModel(this.currentBarIndex,!1),!this.previousPane.classList.contains("e-collapsed")||this.nextPane.classList.contains("e-collapsed")||this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.prevBar,this.rightArrow),this.previousPane.previousElementSibling&&!this.previousPane.previousElementSibling.classList.contains("e-collapsed")&&(this.previousPane.classList.contains("e-collapsed")&&this.paneSettings[this.prevPaneIndex].collapsible?this.showTargetBarIcon(this.prevBar,this.leftArrow):this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.prevBar,this.leftArrow)),sf.base.isNullOrUndefined(this.prevBar)||(this.resizableModel(this.currentBarIndex-1,!1),this.hideTargetBarIcon(this.prevBar,this.arrow)),this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)):this.splitInstance.prevPaneCollapsed||this.splitInstance.nextPaneExpanded||(this.paneSettings[this.currentBarIndex].resizable&&this.resizableModel(this.currentBarIndex,!0),!this.splitInstance.nextPaneNextEle.classList.contains("e-collapsed")&&this.paneSettings[this.currentBarIndex+1].resizable&&this.resizableModel(this.currentBarIndex+1,!0),this.paneSettings[this.currentBarIndex].collapsible||sf.base.addClass([e.target],l),this.previousPane&&0===this.prevPaneIndex&&this.paneSettings[this.prevPaneIndex].collapsible&&this.showTargetBarIcon(this.currentSeparator,this.leftArrow),this.nextPane&&this.nextPaneIndex===this.allPanes.length-1&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.allBars[this.nextPaneIndex-1],this.rightArrow),!this.previousPane.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.currentSeparator,this.rightArrow),sf.base.isNullOrUndefined(this.nextBar)||(this.nextPane.nextElementSibling&&this.nextPane.nextElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex+1].collapsible||!this.nextPane.nextElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex].collapsible?this.showTargetBarIcon(this.nextBar,this.leftArrow):!this.paneSettings[this.splitInstance.nextPaneIndex+1].collapsible&&this.paneSettings[this.currentBarIndex]&&this.hideTargetBarIcon(this.nextBar,this.arrow)),this.nextPaneIndex===this.allPanes.length-1||!this.nextPane.nextElementSibling||this.nextPane.classList.contains("e-collapsed")||this.nextPane.nextElementSibling.classList.contains("e-collapsed")||this.paneSettings[this.nextPaneIndex+1].collapsible||this.hideTargetBarIcon(this.nextBar,this.rightArrow))},p.prototype.expandAction=function(e){if(this.expandingFlag){this.splitterDetails(e);var t=[this.getPreviousPaneIndex(),this.getNextPaneIndex()];this.expandFlag?this.onExpandEnabled?this.dotNetRef.invokeMethodAsync("OnExpandEvent",{cancel:!1,index:t,event:this.getMouseEvtArgs(e)}):this.onExpandEvent({event:e,index:t}):this.expandPane(e)}},p.prototype.onExpandEvent=function(e){var t=this.orientation===h?"e-arrow-right":a,i={target:this.allBars[e.index[0]].querySelector("."+t)};this.expandPane(i),this.expandedEnabled&&(this.getPaneDimensions(!0),this.dotNetRef.invokeMethodAsync("ExpandedEvent",{event:this.getMouseEvtArgs(e.event),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],paneSize:[this.prePaneDimenson,this.nextPaneDimension]}))},p.prototype.getSeparatorIndex=function(e){var t=this.orientation===h?"e-split-bar-horizontal":"e-split-bar-vertical";this.allBars.length<1&&(this.allBars=sf.base.selectAll("."+t,this.element));var i=[].slice.call(this.allBars);return(i=this.enableReversePanes?i.reverse():i).indexOf(e)},p.prototype.updateBars=function(e){this.prevBar=this.allBars[e-1],this.nextBar=this.allBars[e+1]},p.prototype.splitterDetails=function(e){this.element.classList.contains("e-splitter-horizontal")?(this.orientation=h,this.arrow=e.target.classList.contains(o)?"e-arrow-right":o):(this.orientation="Vertical",this.arrow=e.target.classList.contains(r)?a:r),this.updateCurrentSeparator(e.target),this.currentBarIndex=this.getOrderIndex(parseInt(this.currentSeparator.style.order),"splitbar"),this.updateBars(this.currentBarIndex),this.getPaneDetails()},p.prototype.currentIndex=function(e){this.currentBarIndex=this.getOrderIndex(parseInt(e.parentElement.style.order),"splitbar")},p.prototype.expandPane=function(e){var t=this.element.querySelectorAll(".e-collapsed").length,i=!this.previousPane.classList.contains("e-collapsed")&&this.previousPane.classList.contains(n)&&!this.nextPane.classList.contains("e-collapsed")&&!this.nextPane.classList.contains("e-expanded")&&this.nextPane.nextElementSibling.classList.contains("e-pane")&&!this.nextPane.nextElementSibling.classList.contains(n)&&!(t===this.allPanes.length-2),s=["e-collapsed","e-pane-hidden"];this.previousPane.classList.contains("e-collapsed")?(sf.base.removeClass([this.previousPane],s),sf.base.removeClass([this.nextPane],"e-expanded"),this.expandFlag&&this.updatePaneSettings(this.prevPaneIndex,!1)):(sf.base.removeClass([this.nextPane],"e-expanded"),sf.base.removeClass([this.previousPane],s),sf.base.addClass([this.previousPane],"e-expanded"),sf.base.addClass([this.nextPane],s),this.expandFlag&&this.updatePaneSettings(this.nextPaneIndex,!0)),this.updateIconsOnExpand(e),this.previousPane.setAttribute("aria-expanded","true"),this.nextPane.setAttribute("aria-expanded","false"),this.updateFlexGrow(this.checkStaticPanes()),i&&(sf.base.removeClass([this.previousPane],"e-expanded"),this.previousPane.style.flexGrow=""),this.expandingFlag=!0},p.prototype.checkStaticPanes=function(){for(var e=!0,t=0;t<this.allPanes.length;t++)!this.allPanes[t].classList.contains("e-collapsed")&&e&&(e=!!this.allPanes[t].classList.contains(n));return e},p.prototype.splitterProperty=function(){this.splitInstance={currentBarIndex:this.currentBarIndex,nextPaneCollapsible:this.nextPane.classList.contains("e-collapsible"),prevPaneCollapsible:this.previousPane.classList.contains("e-collapsible"),prevPaneExpanded:this.previousPane.classList.contains("e-expanded"),nextPaneExpanded:this.nextPane.classList.contains("e-expanded"),nextPaneCollapsed:this.nextPane.classList.contains("e-collapsed"),prevPaneCollapsed:this.previousPane.classList.contains("e-collapsed"),nextPaneIndex:this.getNextPaneIndex(),prevPaneIndex:this.getPreviousPaneIndex(),nextPaneNextEle:this.nextPane.nextElementSibling,prevPanePreEle:this.previousPane.previousElementSibling}},p.prototype.updateIconsOnExpand=function(e){this.splitterProperty(),sf.base.addClass([e.target],l),this.splitInstance.prevPaneExpanded||this.splitInstance.nextPaneCollapsed?this.splitInstance.prevPaneExpanded&&this.splitInstance.nextPaneCollapsed&&(this.resizableModel(this.currentBarIndex,!1),this.resizableModel(this.currentBarIndex+1,!1),this.paneSettings[this.nextPaneIndex].collapsible&&sf.base.removeClass([sf.base.select("."+this.arrow,this.currentSeparator)],l),sf.base.isNullOrUndefined(this.nextBar)||this.hideTargetBarIcon(this.nextBar,this.arrow),this.nextPane&&this.nextPaneIndex===this.allPanes.length-1&&!this.paneSettings[this.nextPaneIndex].collapsible&&this.splitInstance.nextPaneCollapsed&&this.hideTargetBarIcon(this.currentSeparator,this.arrow),this.nextPaneIndex!==this.allPanes.length-1&&this.nextPane.nextElementSibling&&this.nextPane.classList.contains("e-collapsed")&&!this.nextPane.nextElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.nextBar,this.rightArrow)):(this.paneSettings[this.prevPaneIndex].collapsible&&sf.base.removeClass([sf.base.select("."+this.arrow,this.currentSeparator)],l),this.paneSettings[this.nextPaneIndex].collapsible&&sf.base.removeClass([e.target],l),this.paneSettings[this.currentBarIndex].resizable&&this.resizableModel(this.currentBarIndex,!0),sf.base.isNullOrUndefined(this.prevBar)||this.splitInstance.prevPanePreEle.classList.contains("e-collapsed")?(this.previousPane.previousElementSibling&&this.paneSettings[this.prevPaneIndex].collapsible&&this.previousPane.previousElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.prevPaneIndex-1].collapsible&&this.showTargetBarIcon(this.prevBar,this.rightArrow),this.paneSettings[this.currentBarIndex+1].collapsible||this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)):(this.paneSettings[this.currentBarIndex-1].resizable&&this.resizableModel(this.currentBarIndex-1,!0),this.paneSettings[this.prevPaneIndex].collapsible&&this.showTargetBarIcon(this.prevBar,this.rightArrow),this.paneSettings[this.currentBarIndex-1].collapsible||this.hideTargetBarIcon(this.prevBar,this.arrow),this.paneSettings[this.currentBarIndex].collapsible&&!this.paneSettings[this.currentBarIndex+1].collapsible&&this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)))},p.prototype.showResizer=function(e){!sf.base.isNullOrUndefined(this.previousPane)&&this.previousPane.classList.contains("e-resizable")&&!sf.base.isNullOrUndefined(this.nextPane)&&this.nextPane.classList.contains("e-resizable")&&sf.base.removeClass([sf.base.select("."+s,e)],"e-hide-handler")},p.prototype.resizableModel=function(e,t){var i,n=e;i=e===this.allBars.length?e-1:e,sf.base.EventHandler.remove(this.allBars[i],"mousedown",this.onMouseDown),t?(sf.base.EventHandler.add(this.allBars[i],"mousedown",this.onMouseDown,this),this.isResizable()&&(this.showResizer(this.allBars[i]),sf.base.removeClass([sf.base.select("."+s,this.allBars[i])],"e-hide-handler"),sf.base.addClass([this.allBars[i]],"e-resizable-split-bar"),e===this.allBars.length?sf.base.addClass([this.allPanes[e]],"e-resizable"):sf.base.addClass([this.allPanes[i]],"e-resizable"),this.updateResizablePanes(n))):(this.updateResizablePanes(n),sf.base.addClass([sf.base.select("."+s,this.allBars[i])],"e-hide-handler"),sf.base.removeClass([this.allBars[i]],"e-resizable-split-bar"),e===this.allBars.length?sf.base.removeClass([this.allPanes[e]],"e-resizable"):sf.base.removeClass([this.allPanes[i]],"e-resizable"))},p.prototype.hideTargetBarIcon=function(e,t){sf.base.addClass([sf.base.select("."+t,e)],l)},p.prototype.showTargetBarIcon=function(e,t){sf.base.removeClass([sf.base.select("."+t,e)],l)},p.prototype.updateFlexGrow=function(e){for(var t=this.allPanes,i=0;i<t.length;i++)t[i].style.flexGrow=t[i].classList.contains("e-expanded")?"1":t[i].classList.contains("e-collapsed")?"0":"",e&&!this.nextPane.classList.contains("e-collapsed")&&(this.nextPane.style.flexGrow="1")},p.prototype.updatePaneSettings=function(e,t){this.isToggleInvoke||(this.paneSettings[e].collapsed=t,this.updatePersistData(),this.dotNetRef.invokeMethodAsync("UpdateCollapsed",e,t))},p.prototype.addMouseActions=function(e){var t,i,n=this;e.addEventListener("mouseenter",(function(){t=setTimeout((function(){sf.base.addClass([e],["e-split-bar-hover"])}),n.iconsDelay)})),e.addEventListener("mouseleave",(function(){clearTimeout(t),sf.base.removeClass([e],["e-split-bar-hover"])})),e.addEventListener("mouseout",(function(){clearTimeout(i)})),e.addEventListener("mouseover",(function(){i=setTimeout((function(){sf.base.addClass([e],["e-split-bar-hover"])}),n.iconsDelay)}))},p.prototype.updateIconClass=function(){this.orientation===h?(this.leftArrow=o,this.rightArrow="e-arrow-right"):(this.leftArrow=r,this.rightArrow=a)},p.prototype.isCollapsed=function(e){if(!(!sf.base.isNullOrUndefined(e)&&this.paneSettings[e].collapsed&&this.allPanes.length>0&&!sf.base.isNullOrUndefined(this.allPanes[e])&&this.allPanes[e].classList.contains("e-collapsed"))){if(this.expandFlag=!1,sf.base.isNullOrUndefined(e)){for(var t=0;t<this.allPanes.length;t++)!sf.base.isNullOrUndefined(this.paneSettings[t])&&this.paneSettings[t].collapsed&&this.updateIsCollapsed(t,this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(t=this.allPanes.length-1;t>=0;t--)if(!sf.base.isNullOrUndefined(this.paneSettings[t])&&this.paneSettings[t].collapsed&&!this.allPanes[t].classList.contains("e-collapsed")){var i=this.orientation===h?"e-arrow-right":a;if(0!==t)this.collapseArrow(t-1,i).click();if(!this.nextPane.classList.contains("e-collapsed"))this.collapseArrow(t-1,i).click()}}else{this.collapseFlag=!0;var n=e===this.allBars.length,s=n?e-1:e,o={target:!n&&this.allPanes[e+1].classList.contains("e-collapsed")&&0!==e?this.collapseArrow(s-1,this.targetArrows().lastBarArrow):n?this.collapseArrow(s,this.targetArrows().lastBarArrow):this.collapseArrow(s,this.targetArrows().collapseArrow)};this.splitterDetails(o);var r={cancel:!1,index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]};this.onCollapseEnabled?this.dotNetRef.invokeMethodAsync("OnCollapseEvent",e,r):this.collapseMethodEvent(e,r)}this.expandFlag=!0}},p.prototype.collapseMethodEvent=function(e,t){this.expandFlag=!1;var i=[];i[0]=e;for(var n=1,s=0;s<this.allPanes.length;s++)this.allPanes[s].classList.contains("e-collapsed")&&(i[n]=s,n++);i=i.sort(),this.updateIsCollapsed(e,this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(s=0;s<i.length;s++)this.allPanes[i[s]].classList.contains("e-collapsed")||this.updateIsCollapsed(i[s],this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(s=i.length;s>0;s--)if(!this.allPanes[i[s-1]].classList.contains("e-collapsed")){var o=this.targetArrows();this.updateIsCollapsed(i[s-1],o.collapseArrow,o.lastBarArrow)}this.collapsedEnabled&&this.dotNetRef.invokeMethodAsync("CollapsedEvent",{event:this.getMouseEvtArgs(t),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]}),this.collapseFlag=!1,this.expandFlag=!0},p.prototype.toggle=function(e,t){this.isToggleInvoke=!0;for(var i=0;i<this.paneSettings.length;i++)e.indexOf(i)>-1&&this.paneSettings[i].collapsed&&(this.collapsedOnchange(i),this.paneSettings[i].collapsed=!1);for(i=0;i<this.paneSettings.length;i++)t.indexOf(i)>-1&&!this.paneSettings[i].collapsed&&(this.isCollapsed(i),this.paneSettings[i].collapsed=!0);this.isToggleInvoke=!1,this.updatePersistData(),this.dotNetRef.invokeMethodAsync("UpdateSettings",this.paneSettings)},p.prototype.expand=function(e){this.collapsedOnchange(e),this.updatePaneSettings(e,!1)},p.prototype.collapse=function(e){this.isCollapsed(e),this.updatePaneSettings(e,!0)},p.prototype.collapsedOnchange=function(e){sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].collapsed)||!this.allPanes[e].classList.contains("e-collapsed")||this.updateIsCollapsed(e,this.targetArrows().lastBarArrow,this.targetArrows().collapseArrow)},p.prototype.collapsibleModelUpdate=function(e){var t,i,n;n=e===this.allBars.length?e-1:e,t=this.orientation===h?this.checkArrow(n,o):this.checkArrow(n,r),i=this.orientation===h?this.checkArrow(n,"e-arrow-right"):this.checkArrow(n,a),this.paneCollapsible(this.allPanes[e],e),this.updateCollapseIcons(n,i,t)},p.prototype.updateCollapseIcons=function(e,t,i){sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].collapsible)||(this.paneSettings[e].collapsible?sf.base.removeClass([i],[l]):sf.base.addClass([i],[l]),sf.base.isNullOrUndefined(this.paneSettings[e+1])||(this.paneSettings[e+1].collapsible?sf.base.removeClass([t],[l]):sf.base.addClass([t],[l])))},p.prototype.checkArrow=function(e,t){return this.allBars[e].querySelector(".e-navigate-arrow."+t)},p.prototype.paneCollapsible=function(e,t){this.paneSettings[t].collapsible?sf.base.addClass([e],"e-collapsible"):sf.base.removeClass([e],"e-collapsible")},p.prototype.propertyChanged=function(t,i){var s=e({},this.paneSettings);if(sf.base.extend(this,this,t),this.updateClass(),i)for(var o=0;o<=Object.keys(i).length;o++){var r=parseInt(Object.keys(i)[o],10);if(Object(i)[r])for(var a=0;a<Object(i)[r].length;a++)switch(Object(i)[r][a]){case"Visible":case"Resizable":this.resizableModel(r,this.paneSettings[r].resizable);break;case"Collapsible":this.collapsibleModelUpdate(r);break;case"Collapsed":s[r].collapsed!==t.paneSettings[r].collapsed&&(this.paneSettings[r].collapsed?this.isCollapsed(r):this.collapsedOnchange(r));break;case"Size":for(var l=0;l<this.allPanes.length;l++)s[l].size!==t.paneSettings[l].size?null==s[l].size?(t.paneSettings[l].size=null,this.allPanes[l].style.flexBasis=null,this.allPanes[l].classList.remove(n)):(this.paneSettings[l].size=t.paneSettings[l].size,this.allPanes[l].style.flexBasis=t.paneSettings[l].size):this.allPanes[l].classList.contains(n)||(this.allPanes[l].style.flexBasis=null)}}},p.prototype.targetArrows=function(){return this.splitterProperty(),{collapseArrow:this.orientation===h?o:r,lastBarArrow:"Vertical"===this.orientation?a:"e-arrow-right"}},p.prototype.collapseArrow=function(e,t){return sf.base.selectAll("."+t,this.allBars[e])[0]},p.prototype.updateIsCollapsed=function(e,t,i){if(!sf.base.isNullOrUndefined(e)){var n=e===this.allBars.length,s=n?e-1:e;(!n&&this.allPanes[e+1].classList.contains("e-collapsed")&&0!==e?this.collapseArrow(s-1,i):n?this.collapseArrow(s,i):this.collapseArrow(s,t)).click()}},p.prototype.updatePersistData=function(){for(var e=[],t=this.element.querySelectorAll(".e-pane"),i=0;i<this.paneSettings.length;i++)e.push(JSON.parse(JSON.stringify(this.paneSettings[i]))),delete e[i].collapsible,delete e[i].content,delete e[i].cssClass,delete e[i].resizable,e[i].size=t[i].style.flexBasis;this.enablePersistence&&window.localStorage.setItem(this.id,JSON.stringify(e))},p.prototype.destroy=function(){for(sf.base.EventHandler.remove(document,"touchstart click",this.onDocumentClick),this.updatePersistData();this.element.attributes.length>0;)this.element.removeAttribute(this.element.attributes[0].name);for(var e=this.element.children,t=e.length-1;t>=0;t--)sf.base.detach(e[t])},p}();return{initialize:function(e){if(e.dataId&&(new p(e),window.sfBlazor.instances[e.dataId].initialize()),e.enablePersistence)for(var t=e.element.querySelectorAll(".e-pane"),i=0;i<t.length;i++)t[i].style.flexBasis=e.paneSettings[i].size},collapse:function(e,t){e&&window.sfBlazor.instances[e].collapse(t)},expand:function(e,t){e&&window.sfBlazor.instances[e].expand(t)},toggle:function(e,t,i){e&&window.sfBlazor.instances[e].toggle(t,i)},resizeEvent:function(e,t){e&&window.sfBlazor.instances[e].resizeEvent(t)},onCollapseEvent:function(e,t){e&&window.sfBlazor.instances[e].onCollapseEvent(t)},collapseMethodEvent:function(e,t,i){e&&window.sfBlazor.instances[e].collapseMethodEvent(i,t)},onExpandEvent:function(e,t){e&&window.sfBlazor.instances[e].onExpandEvent(t)},destroy:function(e){e&&window.sfBlazor.instances[e].destroy()},setReversePane:function(e){e&&window.sfBlazor.instances[e].setReversePane()},updateSeparator:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].updateSeparator()},propertyChanged:function(e,t){e.dataId&&window.sfBlazor.instances[e.dataId].propertyChanged(e,t)}}}()},"./modules/sf-stock-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.StockChart=function(){"use strict";var e=function(){function e(e,t,i,n){window.sfBlazor=window.sfBlazor,this.mouseY=0,this.mouseX=0,this.eventInterval=80,this.mouseMoveRef=null,this.mouseMoveThreshold=null,this.mouseLeaveRef=null,this.documentKeyHandler=function(e){e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&this.element.focus()},this.id=t,this.element=i,this.dotnetref=n,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.render=function(){this.unWireEvents(this.id,this.dotnetref),this.wireEvents(this.id,this.dotnetref)},e.prototype.destroy=function(){this.unWireEvents(this.id,this.dotnetref)},e.prototype.unWireEvents=function(e,i){var n=document.getElementById(e);if(n){this.dotnetref=i,t.dotnetrefCollection=t.dotnetrefCollection.filter((function(t){return t.id!==e}));var s=sf.base.Browser.isPointer?"pointerleave":"mouseleave";n.removeEventListener("mousemove",this.mouseMoveRef),n.removeEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.remove(n,s,this.mouseLeaveRef),sf.base.EventHandler.remove(document.body,"keydown",this.documentKeyHandler);var o=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,o,t.resizeBound)}},e.prototype.wireEvents=function(e,i){var n=document.getElementById(e);if(n){this.dotnetref=i,t.dotnetrefCollection.push({id:e,dotnetref:i});var s=sf.base.Browser.isPointer?"pointerleave":"mouseleave";this.mouseMoveRef=this.mouseMove.bind(this,i,e),this.mouseLeaveRef=this.mouseLeave.bind(this,i,e),n.addEventListener("mousemove",this.mouseMoveRef),n.addEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.add(n,s,this.mouseLeaveRef),sf.base.EventHandler.add(document.body,"keydown",this.documentKeyHandler),t.resizeBound=t.chartResize.bind(this,t.dotnetrefCollection);var o=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,o,t.resizeBound)}},e.prototype.getEventArgs=function(e,t){var i=e.changedTouches?e.changedTouches[0].clientX:e.clientX,n=e.changedTouches?e.changedTouches[0].clientY:e.clientY;this.setMouseXY(i,n,t);var s=e.touches,o=[];if(e.type.indexOf("touch")>-1)for(var r=0,a=s.length;r<a;r++)o.push({pageX:s[r].clientX,pageY:s[r].clientY,pointerId:e.pointerId||0});return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0},touches:o,pointerId:e.pointerId}},e.prototype.setMouseXY=function(e,t,i){var n=document.getElementById(i.replace("_stockChart_chart","")+"_svg").getBoundingClientRect(),s=document.getElementById(i).getBoundingClientRect();this.mouseY=t-s.top-Math.max(n.top-s.top,0),this.mouseX=e-s.left-Math.max(n.left-s.left,0)},e.prototype.mouseMove=function(e,t,i){if(null==this.mouseMoveThreshold||(new Date).getTime()-this.mouseMoveThreshold>this.eventInterval){this.mouseMoveThreshold=(new Date).getTime();var n=void 0,s=void 0,o=void 0;"touchmove"===i.type?(this.isTouch=!0,n=(o=i).changedTouches[0].clientX,s=o.changedTouches[0].clientY,i.preventDefault()):(this.isTouch="touch"===i.pointerType||"2"===i.pointerType||this.isTouch,n=i.clientX,s=i.clientY),this.dotnetref=e,document.getElementById(t.replace("_stockChart_chart","")+"_svg")&&(this.setMouseXY(n,s,t),e.invokeMethodAsync("OnStockChartMouseMove",this.getEventArgs(i,t)))}return!1},e.prototype.mouseLeave=function(e,t,i){return this.dotnetref=e,e.invokeMethodAsync("OnStockChartMouseLeave",this.getEventArgs(i,t)),!1},e}(),t={initialize:function(t,i,n){new e(t,i.id,i,n).render()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},eventInterval:80,dotnetref:{},dotnetrefCollection:[],renderTooltip:function(e,t,i,n){var s=document.getElementById(t+"_svg"),o=!(s&&parseInt(s.getAttribute("opacity"),10)>0),r=JSON.parse(e),a=window.sfBlazor.getCompInstance(n);o&&!sf.base.isNullOrUndefined(a)?(a.tooltip=new sf.svgbase.Tooltip(r),a.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(a.tooltip)||(a.tooltip.location=new sf.svgbase.TooltipLocation(r.location.x,r.location.y),a.tooltip.content=r.content,a.tooltip.header=r.header,a.tooltip.offset=r.offset,a.tooltip.palette=r.palette,a.tooltip.shapes=r.shapes,a.tooltip.data=r.data,a.tooltip.template=r.template,a.tooltip.textStyle.color=r.textStyle.color||a.tooltip.textStyle.color,a.tooltip.textStyle.fontFamily=r.textStyle.fontFamily||a.tooltip.textStyle.fontFamily,a.tooltip.textStyle.fontStyle=r.textStyle.fontStyle||a.tooltip.textStyle.fontStyle,a.tooltip.textStyle.fontWeight=r.textStyle.fontWeight||a.tooltip.textStyle.fontWeight,a.tooltip.textStyle.opacity=r.textStyle.opacity||a.tooltip.textStyle.opacity,a.tooltip.textStyle.size=r.textStyle.size||a.tooltip.textStyle.size,a.tooltip.isNegative=r.isNegative,a.tooltip.clipBounds=new sf.svgbase.TooltipLocation(r.clipBounds.x,r.clipBounds.y),a.tooltip.arrowPadding=r.arrowPadding,a.tooltip.dataBind())},fadeOut:function(e){var t=window.sfBlazor.getCompInstance(e);if(!(sf.base.isNullOrUndefined(t)||!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.tooltip))){var i=document.getElementById(t.tooltip.element.id+"_svg");i&&"0"===i.getAttribute("opacity")||t.tooltip.fadeOut()}},getParentElementBoundsById:function(e){var t=document.getElementById(e);if(t&&t.parentElement){var i=t.parentElement.style.width;t.parentElement.style.width="100%";var n=t.parentElement.getBoundingClientRect(),s=window.getComputedStyle(t.parentElement),o=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),r={width:Math.max(0,n.width-o),height:t.clientHeight||t.offsetHeight,left:n.left,top:n.top,right:n.right,bottom:n.bottom};return t.parentElement.style.width=i,r}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return{width:t.clientWidth||t.offsetWidth,height:t.clientHeight||t.offsetHeight,left:i.left,top:i.top,right:i.right,bottom:i.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getBrowserDeviceInfo:function(){return{browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer,isDevice:sf.base.Browser.isDevice,isTouch:sf.base.Browser.isTouch,isIos:sf.base.Browser.isIos||sf.base.Browser.isIos7}},setAttribute:function(e,t,i){var n=document.getElementById(e);n&&n.setAttribute(t,i)},createTooltip:function(e,t,i,n,s){var o=document.getElementById(e),r="top:"+i.toString()+"px;left:"+n.toString()+"px;color:black !important; background:#FFFFFF !important; position:absolute;border:1px solid #707070;font-size:"+s+";border-radius:2px; z-index:1";o?(o.setAttribute("innerHTML","&nbsp;"+t+"&nbsp;"),o.setAttribute("styles",r)):(o=sf.base.createElement("div",{id:e,innerHTML:"&nbsp;"+t+"&nbsp;",styles:r}),document.body.appendChild(o))},removeElement:function(e){var t=this.getElement(e);t&&sf.base.remove(t)},resizeBound:{},resize:{},chartResize:function(e,t){var i=this;return this.resize&&clearTimeout(this.resize),this.resize=setTimeout((function(){for(var n=e.length,s=0;s<n;s++)e[s].dotnetref.invokeMethodAsync("OnStockChartResize",t);clearTimeout(i.resize)}),500),!1}};return t}()},"./modules/sf-svg-export.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return e};var e={},t=Object.prototype,s=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function d(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,i){return e[t]=i}}function h(e,t,i,n){var s=t&&t.prototype instanceof u?t:u,o=Object.create(s.prototype),r=new O(n||[]);return o._invoke=function(e,t,i){var n="suspendedStart";return function(s,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===s)throw o;return A()}for(i.method=s,i.arg=o;;){var r=i.delegate;if(r){var a=S(r,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=c(e,t,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}(e,i,r),o}function c(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=h;var p={};function u(){}function f(){}function m(){}var g={};d(g,r,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(T([])));b&&b!==t&&s.call(b,r)&&(g=b);var y=m.prototype=u.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){var n;this._invoke=function(o,r){function a(){return new t((function(n,a){!function n(o,r,a,l){var d=c(e[o],e,r);if("throw"!==d.type){var h=d.arg,p=h.value;return p&&"object"==i(p)&&s.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(p).then((function(e){h.value=e,a(h)}),(function(e){return n("throw",e,a,l)}))}l(d.arg)}(o,r,n,a)}))}return n=n?n.then(a,a):a()}}function S(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=c(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var s=n.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function t(){for(;++i<e.length;)if(s.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=m,d(y,"constructor",m),d(m,"constructor",f),f.displayName=d(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,d(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},w(C.prototype),d(C.prototype,a,(function(){return this})),e.AsyncIterator=C,e.async=function(t,i,n,s,o){void 0===o&&(o=Promise);var r=new C(h(t,i,n,s),o);return e.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},w(y),d(y,l,"Generator"),d(y,r,(function(){return this})),d(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=T,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,n){return r.type="throw",r.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],r=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var a=s.call(o,"catchLoc"),l=s.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),x(i),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var s=n.arg;x(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:T(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),p}},e}function s(e,t,i,n,s,o,r){try{var a=e[o](r),l=a.value}catch(e){return void i(e)}a.done?t(l):Promise.resolve(l).then(n,s)}function o(e){return function(){var t=this,i=arguments;return new Promise((function(n,o){var r=e.apply(t,i);function a(e){s(r,n,o,a,l,"next",e)}function l(e){s(r,n,o,a,l,"throw",e)}a(void 0)}))}}var r,a,l;window.sfExport={exportToImage:(l=o(n().mark((function e(t,i,s,r){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.sfExport.imageExport(t,i,s,r);case 2:if(!((a=e.sent)instanceof Promise)){e.next=8;break}return e.next=6,a.then(function(){var e=o(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:e.next=9;break;case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))),function(e,t,i,n){return l.apply(this,arguments)}),validateExport:(a=o(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Promise)){e.next=3;break}return e.next=3,t.then(function(){var e=o(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),imageExport:(r=o(n().mark((function e(t,i,s,o){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=document.getElementById(s),a='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+r.outerHTML+"</svg>",l=window.URL.createObjectURL(new Blob("SVG"===t?[a]:[(new XMLSerializer).serializeToString(r)],{type:"image/svg+xml"}));if("SVG"===t)o&&window.sfExport.triggerDownload(t,i,l),e(null);else{var d=document.createElement("canvas");d.height=r.clientHeight,d.width=r.clientWidth;var h=d.getContext("2d"),c=new Image;c.onload=function(){if(h.drawImage(c,0,0),window.URL.revokeObjectURL(l),o)window.sfExport.triggerDownload(t,i,d.toDataURL("image/png").replace("image/png","image/octet-stream")),e(null);else{var n="JPEG"===t?d.toDataURL("image/jpeg"):"PNG"===t?d.toDataURL("image/png"):"";e(n)}},c.src=l}})));case 1:case"end":return e.stop()}}),e)}))),function(e,t,i,n){return r.apply(this,arguments)}),triggerDownload:function(e,t,i){var n=document.createElement("a");n.download=t+"."+e.toLocaleLowerCase(),n.href=i,n.click()},downloadPdf:function(e,t){for(var i=atob(e),n=[],s=0;s<i.length;s+=512){for(var o=i.slice(s,s+512),r=new Array(o.length),a=0;a<o.length;a++)r[a]=o.charCodeAt(a);var l=new Uint8Array(r);n.push(l)}var d=new Blob(n,{type:"application/pdf"}),h=(URL||webkitURL).createObjectURL(d);sfExport.triggerDownload("PDF",t,h)},print:function(e){var t,i;i="string"==typeof e?document.getElementById(e):e,(t=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no")).moveTo(0,0),t.resizeTo(screen.availWidth,screen.availHeight);var n=document.createElement("div");n.appendChild(i.cloneNode(!0));var s=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),o=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style")),r="";if(o.length)for(var a=0,l=o.length;a<l;a++)s.push(o[a]);var d=0;for(l=s.length;d<l;d++)r+=s[d].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+r+"</head><body>"+n.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var h=setInterval((function(){t.ready&&(t.print(),t.close(),clearInterval(h))}),500)}}},"./modules/sf-tab.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Tab=function(){"use strict";var e="e-tab-header",t="e-tab-wrap",i="e-toolbar-items",n="e-toolbar-item",s="e-toolbar-popup",o=function(){function o(e,t,i,n){this.show={},this.hide={},this.draggableItems=[{}],this.resizeContext=this.refreshActElePosition.bind(this),window.sfBlazor=window.sfBlazor,this.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space",delete:"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"},this.element=t,this.dotNetRef=n,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return o.prototype.render=function(){var e=sf.base.closest(this.element,".e-content");this.prevIndex=0,this.isNested=!1,this.isPopup=!1,this.initRender=!0,this.isSwipeed=!1,sf.base.isNullOrUndefined(e)||(e.parentElement.classList.add("e-nested"),this.isNested=!0);var t=sf.base.Browser.info.name,i="msie"===t?"e-ie":"edge"===t?"e-edge":"safari"===t?"e-safari":"";sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.options.width),height:sf.base.formatUnit(this.options.height)}),sf.base.attributes(this.element,{"aria-disabled":"false","aria-activedescendant":""}),this.setCssClass(this.element,i,!0),this.updatePopAnimationConfig(),this.tabId=this.element.id.length>0?"-"+this.element.id:sf.base.getRandomId(),this.wireEvents(),this.initRender=!1},o.prototype.serverItemsChanged=function(){if(this.enableAnimation=!1,this.setActive(this.options.selectedItem),"Dynamic"!==this.options.loadOn&&!sf.base.isNullOrUndefined(this.cntEle)){var e=[].slice.call(this.cntEle.children),t="e-content"+this.tabId+"_"+this.options.selectedItem;e.forEach((function(e){e.classList.contains("e-active")&&e.id!==t&&e.classList.remove("e-active"),e.id===t&&e.classList.add("e-active")})),this.prevIndex=this.options.selectedItem,this.triggerAnimation("e-item"+this.tabId+"_"+this.options.selectedItem,!1)}"Disable"!==sf.base.animationMode&&(this.enableAnimation=!0)},o.prototype.headerReady=function(){if(this.initRender=!0,this.hdrEle=this.getTabHeader(),this.setOrientation(this.options.headerPlacement,this.hdrEle),this.tbItems=sf.base.select("."+e+" ."+i,this.element),sf.base.isNullOrUndefined(this.tbItems)||sf.base.rippleEffect(this.tbItems,{selector:".e-tab-wrap"}),sf.base.selectAll("."+n,this.element).length>0){this.bdrLine=sf.base.select(".e-indicator.e-ignore",this.element);var t=sf.base.select("."+this.scrCntClass,this.tbItems);sf.base.isNullOrUndefined(t)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstElementChild):t.insertBefore(this.bdrLine,t.firstElementChild),this.select(this.options.selectedItem)}if(this.cntEle=sf.base.select(".e-tab > .e-content",this.element),sf.base.isNullOrUndefined(this.cntEle)||(this.touchModule=new sf.base.Touch(this.cntEle,{swipe:this.swipeHandler.bind(this)}),"auto"===this.options.height||this.isVertical()||(this.cntEle.style.height="calc(100% - "+this.hdrEle.offsetHeight+"px)")),"Demand"===this.options.loadOn){var s=this.setActiveContent();this.triggerAnimation(s,!1)}this.initRender=!1},o.prototype.setActiveContent=function(){var e="e-item"+this.tabId+"_"+this.options.selectedItem,t=this.getTrgContent(this.cntEle,this.extIndex(e));return sf.base.isNullOrUndefined(t)||t.classList.add("e-active"),e},o.prototype.removeActiveClass=function(){var e=this.getTabHeader();if(e){var t=sf.base.selectAll("."+n+".e-active",e);sf.base.removeClass(t,"e-active")}},o.prototype.checkPopupOverflow=function(e){this.tbPop=sf.base.select(".e-toolbar-pop",this.element);var t=sf.base.select(".e-hor-nav",this.element),n=sf.base.select("."+i,this.element),o=n.lastChild;return(!this.isVertical()&&(this.options.enableRtl&&t.offsetLeft+t.offsetWidth>n.offsetLeft||!this.options.enableRtl&&t.offsetLeft<n.offsetWidth)||this.isVertical()&&t.offsetTop<o.offsetTop+o.offsetHeight)&&(e.classList.add(s),this.tbPop.insertBefore(e,sf.base.selectAll("."+s,this.tbPop)[0])),!0},o.prototype.popupHandler=function(e){var o=e.querySelector(".e-ripple-element");sf.base.isNullOrUndefined(o)||(o.outerHTML="",e.querySelector("."+t).classList.remove("e-ripple")),this.tbItem=sf.base.selectAll("."+i+" ."+n,this.hdrEle);var r=this.tbItem[this.tbItem.length-1];if(0!==this.tbItem.length){if(e.classList.remove(s),e.removeAttribute("style"),this.tbItems.appendChild(e),this.checkPopupOverflow(r)){var a=this.tbItems.lastChild.previousElementSibling;this.checkPopupOverflow(a)}this.isPopup=!0}return sf.base.selectAll("."+n,this.tbItems).length-1},o.prototype.previousContentAnimation=function(e,t){return this.isPopup||e<=t?"SlideLeftIn"===this.options.animation.previous.effect?{name:"SlideLeftOut",duration:this.options.animation.previous.duration,timingFunction:this.options.animation.previous.easing}:null:"SlideRightIn"===this.options.animation.next.effect?{name:"SlideRightOut",duration:this.options.animation.next.duration,timingFunction:this.options.animation.next.easing}:null},o.prototype.triggerPreviousAnimation=function(e,t){var i=this.previousContentAnimation(t,this.options.selectedItem);sf.base.isNullOrUndefined(i)?e.classList.remove("e-active"):(i.begin=function(){sf.base.setStyleAttribute(e,{position:"absolute"}),sf.base.addClass([e],["e-progress","e-view"])},i.end=function(){e.style.display="none",sf.base.removeClass([e],["e-active","e-progress","e-view"]),sf.base.setStyleAttribute(e,{display:"",position:""}),0===e.childNodes.length&&sf.base.detach(e)},new sf.base.Animation(i).animate(e))},o.prototype.triggerAnimation=function(e,t){var i,n,s=this,o=this.prevIndex;if("Dynamic"!==this.options.loadOn){[].slice.call(this.element.querySelector(".e-content").children).forEach((function(e){e.id===s.prevActiveEle&&(i=e)}));var r=this.tbItem[o];if(n=this.getTrgContent(this.cntEle,this.extIndex(e)),sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(r)){var a=this.extIndex(r.id);i=this.getTrgContent(this.cntEle,a)}}else n=this.cntEle.firstElementChild;if(sf.base.isNullOrUndefined(n)||(this.prevActiveEle=n.id),this.initRender||!1===t||this.options.animation==={}||sf.base.isNullOrUndefined(this.options.animation))i&&i!==n&&i.classList.remove("e-active");else{var l,d=sf.base.select(".e-content",this.element);if(this.prevIndex>this.options.selectedItem&&!this.isPopup){var h="None"===this.options.animation.previous.effect&&"Enable"===sf.base.animationMode?"SlideLeftIn":this.options.animation.previous.effect;l={name:"None"===h?"":"SlideLeftIn"!==h?h:"SlideLeftIn",duration:this.options.animation.previous.duration,timingFunction:this.options.animation.previous.easing}}else if(this.isPopup||this.prevIndex<this.options.selectedItem||this.prevIndex===this.options.selectedItem){var c="None"===this.options.animation.next.effect&&"Enable"===sf.base.animationMode?"SlideRightIn":this.options.animation.next.effect;l={name:"None"===c?"":"SlideRightIn"!==c?c:"SlideRightIn",duration:this.options.animation.next.duration,timingFunction:this.options.animation.next.easing}}l.progress=function(){d.classList.add("e-progress"),s.setActiveBorder()},l.end=function(){d.classList.remove("e-progress"),n.classList.add("e-active")},this.initRender||sf.base.isNullOrUndefined(i)||this.triggerPreviousAnimation(i,o),this.isPopup=!1,""===l.name?n.classList.add("e-active"):new sf.base.Animation(l).animate(n)}},o.prototype.keyPressed=function(t){var i=sf.base.closest(t,"."+e+" ."+n),s=this.getEleIndex(i);!sf.base.isNullOrUndefined(this.popEle)&&t.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):t.classList.contains("e-scroll-nav")?t.click():sf.base.isNullOrUndefined(i)||!1!==i.classList.contains("e-active")||(this.select(s,!0),sf.base.isNullOrUndefined(this.popEle)||this.popObj.hide(this.hide))},o.prototype.getTabHeader=function(){var t=[].slice.call(this.element.children).filter((function(t){return t.classList.contains(e)}));if(t.length>0)return t[0];var i=[].slice.call(this.element.children).filter((function(e){return!e.classList.contains("blazor-template")}))[0];return i?[].slice.call(i.children).filter((function(t){return t.classList.contains(e)}))[0]:void 0},o.prototype.getEleIndex=function(e){return Array.prototype.indexOf.call(sf.base.selectAll("."+n,this.getTabHeader()),e)},o.prototype.extIndex=function(e){return e.replace("e-item"+this.tabId+"_","")},o.prototype.getTrgContent=function(e,t){return this.element.classList.contains("e-nested")?sf.base.select(".e-nested> .e-content > #e-content"+this.tabId+"_"+t,this.element):this.findEle(e.children,"e-content"+this.tabId+"_"+t)},o.prototype.findEle=function(e,t){for(var i,n=0;n<e.length;n++)if(e[n].id===t){i=e[n];break}return i},o.prototype.isVertical=function(){var e="Left"===this.options.headerPlacement||"Right"===this.options.headerPlacement;return this.scrCntClass=e?"e-vscroll-content":"e-hscroll-content",e},o.prototype.updatePopAnimationConfig=function(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100},this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}},o.prototype.focusItem=function(){var e=sf.base.select(" #e-item"+this.tabId+"_"+this.options.selectedItem,this.hdrEle);sf.base.isNullOrUndefined(e)||e.firstElementChild.focus()},o.prototype.serverChangeOrientation=function(e,t,i,n){if(this.setOrientation(e,this.hdrEle),sf.base.removeClass([this.element],["e-vertical-tab","e-vertical-left","e-vertical-right","e-horizontal-bottom"]),n&&this.changeToolbarOrientation(t,i),"Bottom"===this.options.headerPlacement&&sf.base.addClass([this.element],"e-horizontal-bottom"),this.isVertical()){var s="Left"===this.options.headerPlacement?"e-vertical-left":"e-vertical-right";this.element.classList.contains("e-nested")?sf.base.addClass([this.hdrEle],["e-vertical-tab",s]):sf.base.addClass([this.element],["e-vertical-tab",s])}this.setActiveBorder(),this.focusItem()},o.prototype.changeToolbarOrientation=function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.width=t?"auto":"100%",i.options.height=t?"100%":"auto",i.options.isVertical=t,i.changeOrientation()),this.updatePopAnimationConfig()},o.prototype.setOrientation=function(e,t){var i=Array.prototype.indexOf.call(this.element.children,t),n=Array.prototype.indexOf.call(this.element.children,this.element.querySelector(".e-content"));"Bottom"===e&&n>i?this.element.appendChild(t):(sf.base.removeClass([t],["e-horizontal-bottom"]),this.element.insertBefore(t,sf.base.select(".e-content",this.element)))},o.prototype.setCssClass=function(e,t,i){""!==t&&(i?sf.base.addClass([e],t.split(" ")):sf.base.removeClass([e],t.split(" ")))},o.prototype.setActiveBorder=function(){var e=this.getTabHeader(),t=sf.base.select("."+n+".e-active",e);if(!sf.base.isNullOrUndefined(t)){this.options.reorderActiveTab?e.classList.remove("e-reorder-active-item"):(t.classList.contains(s)&&!this.bdrLine.classList.contains("e-hidden")&&this.bdrLine.classList.add("e-hidden"),e.classList.contains("e-reorder-active-item")||e.classList.add("e-reorder-active-item")),t.classList.contains(s)&&this.options.reorderActiveTab&&this.popupHandler(t);var o=sf.base.closest(t,".e-tab");if(this.element===o){this.tbItems=sf.base.select("."+i,e);var r=sf.base.select(".e-indicator",e),a=sf.base.select("."+i+" ."+this.scrCntClass,e);if(this.isVertical()){sf.base.setStyleAttribute(r,{left:"",right:""}),0!==(sf.base.isNullOrUndefined(a)?this.tbItems.offsetHeight:a.offsetHeight)?sf.base.setStyleAttribute(r,{top:t.offsetTop+"px",height:t.offsetHeight+"px"}):sf.base.setStyleAttribute(r,{top:0,height:0})}else{if("MultiRow"===this.options.overflowMode){var l="Bottom"===this.options.headerPlacement?t.offsetTop:t.offsetHeight+t.offsetTop;sf.base.setStyleAttribute(r,{top:l+"px",height:""})}else sf.base.setStyleAttribute(r,{top:"",height:""});var d=sf.base.isNullOrUndefined(a)?this.tbItems.offsetWidth:a.offsetWidth;0!==d?sf.base.setStyleAttribute(r,{left:t.offsetLeft+"px",right:d-(t.offsetLeft+t.offsetWidth)+"px"}):sf.base.setStyleAttribute(r,{left:"auto",right:"auto"})}sf.base.isNullOrUndefined(this.bdrLine)||t.classList.contains(s)||this.bdrLine.classList.remove("e-hidden")}}},o.prototype.setActive=function(e){this.tbItem=sf.base.selectAll("."+n,this.getTabHeader()),sf.base.isNullOrUndefined(this.hdrEle)&&(this.hdrEle=this.getTabHeader());var t=this.hdrEle.querySelector("."+n+'[data-index="'+e+'"]');if(!(!t||e<0||isNaN(e)||0===this.tbItem.length))if(this.options.selectedItem=e,t.classList.contains("e-active"))this.setActiveBorder();else{var i=this.tbItem[this.prevIndex];sf.base.isNullOrUndefined(i)||i.removeAttribute("aria-controls"),sf.base.attributes(t,{"aria-controls":"e-content"+this.tabId+"_"+e});var s=t.id;this.removeActiveClass(),t.classList.add("e-active"),t.setAttribute("aria-selected","true");var o=Number(this.extIndex(s));if(sf.base.isNullOrUndefined(this.prevActiveEle)&&(this.prevActiveEle="e-content"+this.tabId+"_"+o),sf.base.attributes(this.element,{"aria-activedescendant":s}),"Init"===this.options.loadOn){this.cntEle=sf.base.select(".e-tab > .e-content",this.element);var r=this.getTrgContent(this.cntEle,this.extIndex(s));sf.base.isNullOrUndefined(r)||r.classList.add("e-active"),this.triggerAnimation(s,this.enableAnimation)}this.setActiveBorder(),this.refreshItemVisibility(t),this.initRender||t.firstElementChild.focus()}},o.prototype.contentReady=function(){var e=this.setActiveContent();this.triggerAnimation(e,this.enableAnimation)},o.prototype.setRTL=function(e){this.setCssClass(this.element,"e-rtl",e),this.refreshActiveBorder()},o.prototype.refreshActiveBorder=function(){sf.base.isNullOrUndefined(this.bdrLine)||this.bdrLine.classList.add("e-hidden"),this.setActiveBorder()},o.prototype.setDragAndDrop=function(e){e?this.bindDraggable():this.draggableItems&&this.draggableItems.forEach((function(e){e&&0!==Object.keys(e).length&&e.destroy()}))},o.prototype.showPopup=function(e){var t=sf.base.select(".e-popup.e-toolbar-pop",this.hdrEle);if(t&&t.classList.contains("e-popup-close")){var i=t&&t.ej2_instances[0];i.position.X="Left"===this.options.headerPlacement?"left":"right",i.dataBind(),i.show(e)}},o.prototype.initializeDrag=function(i){var s=this;this.options.dragArea=sf.base.isNullOrUndefined(this.options.dragArea)?"#"+this.element.id+" ."+e:this.options.dragArea;var o=new sf.base.Draggable(i,{dragArea:this.options.dragArea,dragTarget:"."+n,clone:!0,distance:5,helper:this.helper.bind(this),dragStart:this.itemDragStart.bind(this),drag:function(i){var o,r=s.getEleIndex(s.dragItem);if(sf.base.isNullOrUndefined(i.target.closest(".e-tab"))||i.target.closest(".e-tab").isEqualNode(s.element)||s.options.dragArea==="."+e){if(i.target.closest(s.options.dragArea)||"Popup"===s.options.overflowMode?(document.body.style.cursor="",s.dragItem.querySelector("."+t).style.visibility="hidden",s.cloneElement.classList.contains("e-hidden")&&sf.base.removeClass([s.cloneElement],"e-hidden")):(document.body.style.cursor="not-allowed",sf.base.addClass([s.cloneElement],"e-hidden"),s.dragItem.classList.contains("e-hidden")&&sf.base.removeClass([s.dragItem],"e-hidden"),s.dragItem.querySelector("."+t).style.visibility="visible"),"Scrollable"===s.options.overflowMode&&!sf.base.isNullOrUndefined(s.element.querySelector(".e-hscroll"))){var a=s.element.querySelector(".e-scroll-right-nav"),l=s.element.querySelector(".e-scroll-left-nav"),d=s.element.querySelector(".e-hscroll-bar");!sf.base.isNullOrUndefined(a)&&Math.abs(a.offsetWidth/2+a.offsetLeft)>s.cloneElement.offsetLeft+s.cloneElement.offsetWidth&&(d.scrollLeft-=10),!sf.base.isNullOrUndefined(l)&&Math.abs(l.offsetLeft+l.offsetWidth-s.cloneElement.offsetLeft)>l.offsetWidth/2&&(d.scrollLeft+=10)}s.cloneElement.style.pointerEvents="none";var h=s.cloneElement.getBoundingClientRect().left,c=s.cloneElement.getBoundingClientRect().top,p=document.elementFromPoint(h,c),u=sf.base.closest(p,"."+e+" ."+n),f=0;"Scrollable"!==s.options.overflowMode||sf.base.isNullOrUndefined(s.element.querySelector(".e-hscroll"))||(f=s.element.querySelector(".e-hscroll-content").offsetWidth),null!=u&&!u.isSameNode(s.dragItem)&&u.closest(".e-tab").isSameNode(s.dragItem.closest(".e-tab"))&&((o=s.getEleIndex(u))<r&&Math.abs(u.offsetLeft+u.offsetWidth-s.cloneElement.offsetLeft)>u.offsetWidth/2&&s.dragAction(u,r,o),o>r&&Math.abs(u.offsetWidth/2)+u.offsetLeft-f<s.cloneElement.offsetLeft+s.cloneElement.offsetWidth&&s.dragAction(u,r,o)),s.droppedIndex=s.getEleIndex(s.dragItem)}},dragStop:this.itemDragStop.bind(this)});this.draggableItems.push(o)},o.prototype.helper=function(e){return e.element&&(this.cloneElement=e.element.cloneNode(!0),sf.base.addClass([this.cloneElement],["e-tab-clone-element","e-tab"]),sf.base.removeClass([this.cloneElement.querySelector("."+t)],"e-ripple"),sf.base.isNullOrUndefined(this.cloneElement.querySelector(".e-ripple-element"))||sf.base.remove(this.cloneElement.querySelector(".e-ripple-element")),document.body.appendChild(this.cloneElement)),this.cloneElement},o.prototype.itemDragStart=function(e){var i=this;this.dragItem=e.element,this.dragStartIndex=this.getEleIndex(this.dragItem);this.element.querySelector(".e-toolbar");this.dotNetRef.invokeMethodAsync("OnDragStart",this.dragStartIndex).then((function(n){n?sf.base.detach(i.cloneElement):(i.removeActiveClass(),sf.base.addClass([i.tbItems.querySelector(".e-indicator")],"e-hidden"),i.dragItem.querySelector("."+t).style.visibility="hidden",e.bindEvents(sf.base.getElement(e.dragElement)))}))},o.prototype.dragAction=function(e,t,i){if("MultiRow"===this.options.overflowMode&&e.parentNode.insertBefore(this.dragItem,e.nextElementSibling),t>i)if(this.dragItem.parentElement.isSameNode(e.parentElement))this.dragItem.parentNode.insertBefore(this.dragItem,e);else if("Extended"===this.options.overflowMode)if(e.isSameNode(e.parentElement.lastChild)){var n=this.dragItem.parentNode;e.parentNode.insertBefore(this.dragItem,e),n.insertBefore(e.parentElement.lastChild,n.childNodes[0])}else this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e);else{var s=e.parentElement.lastChild;if(e.isSameNode(s)){n=this.dragItem.parentNode;e.parentNode.insertBefore(this.dragItem,e),n.insertBefore(s,n.childNodes[0])}else this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e)}t<i&&(this.dragItem.parentElement.isSameNode(e.parentElement)?this.dragItem.parentNode.insertBefore(e,this.dragItem):"Extended"===this.options.overflowMode?(this.dragItem.parentElement.appendChild(e.parentElement.firstElementChild),e.parentNode.insertBefore(this.dragItem,e.nextSibling)):(this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e)))},o.prototype.itemDragStop=function(e){sf.base.detach(this.cloneElement);var i=this.element.querySelector(".e-toolbar");this.dragItem.querySelector("."+t).style.visibility="visible",sf.base.addClass([i],"e-drag-action"),document.body.style.cursor="";var n=this.getXYValue(e.event,"X"),s=this.getXYValue(e.event,"Y");this.dotNetRef.invokeMethodAsync("Dragged",this.droppedIndex,this.dragStartIndex,n,s)},o.prototype.getXYValue=function(e,t){var i,n=e.changedTouches;return i="X"===t?n?n[0].clientX:e.clientX:n?n[0].clientY:e.clientY,Math.ceil(i)},o.prototype.bindDraggable=function(){var t=this;this.options.allowDragAndDrop&&this.element.querySelectorAll("."+e+" ."+n).forEach((function(i){sf.base.isNullOrUndefined(t.options.dragArea)&&(t.options.dragArea="#"+t.element.id+" ."+e),i.classList.contains("e-draggable")||t.initializeDrag(i)}))},o.prototype.wireEvents=function(){this.bindDraggable(),window.addEventListener("resize",this.resizeContext),sf.base.EventHandler.add(this.element,"keydown",this.spaceKeyDown,this),sf.base.isNullOrUndefined(this.cntEle)||(this.touchModule=new sf.base.Touch(this.cntEle,{swipe:this.swipeHandler.bind(this)})),this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}),this.tabKeyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})},o.prototype.unWireEvents=function(){this.keyModule.destroy(),this.tabKeyModule.destroy(),sf.base.isNullOrUndefined(this.cntEle)||this.touchModule.destroy(),window.removeEventListener("resize",this.resizeContext),sf.base.EventHandler.remove(this.element,"keydown",this.spaceKeyDown),sf.base.removeClass([this.element],["e-rtl","e-focused"])},o.prototype.swipeHandler=function(e){if(!(e.velocity<3&&sf.base.isNullOrUndefined(e.originalEvent.changedTouches))){this.isNested&&this.element.setAttribute("data-swipe","true");var t=this.element.querySelector('[data-swipe="true"]');if(t)t.removeAttribute("data-swipe");else{if(this.isSwipeed=!0,"Right"===e.swipeDirection&&0!==this.options.selectedItem){for(var i=this.options.selectedItem-1;i>=0;i--)if(!this.tbItem[i].classList.contains("e-hidden")&&!this.tbItem[i].classList.contains("e-disable")){this.select(i,!0);break}}else if("Left"===e.swipeDirection&&this.options.selectedItem!==sf.base.selectAll("."+n,this.element).length-1)for(var s=this.options.selectedItem+1;s<this.tbItem.length;s++)if(!this.tbItem[s].classList.contains("e-hidden")&&!this.tbItem[s].classList.contains("e-disable")){this.select(s,!0);break}this.isSwipeed=!1}}},o.prototype.spaceKeyDown=function(t){if(32===t.keyCode&&32===t.which||35===t.keyCode&&35===t.which){var i=sf.base.closest(t.target,"."+e);sf.base.isNullOrUndefined(i)||t.preventDefault()}},o.prototype.keyHandler=function(e){if(!this.element.classList.contains("e-disable")){this.element.classList.add("e-focused");var i,s,o=e.target,r=this.getTabHeader(),a=sf.base.select(".e-active",r);switch(this.popEle=sf.base.select(".e-toolbar-pop",r),sf.base.isNullOrUndefined(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]),e.action){case"space":case"enter":if(o.parentElement.classList.contains("e-disable"))return;if("enter"===e.action&&o.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(o);break;case"tab":case"shiftTab":o.classList.contains(t)&&!1===sf.base.closest(o,"."+n).classList.contains("e-active")&&o.setAttribute("tabindex","-1"),this.popObj&&sf.base.isVisible(this.popObj.element)&&this.popObj.hide(this.hide),a.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":i=sf.base.closest(document.activeElement,"."+n),sf.base.isNullOrUndefined(i)||this.refreshItemVisibility(i);break;case"openPopup":e.preventDefault(),!sf.base.isNullOrUndefined(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":if(s=sf.base.closest(o,"."+n),!0===this.options.showCloseButton&&!sf.base.isNullOrUndefined(s)){if(-1===this.getEleIndex(s))return;var l=s.nextSibling;!sf.base.isNullOrUndefined(l)&&l.classList.contains(n)&&l.firstElementChild.focus(),this.dotNetRef.invokeMethodAsync("RemoveTab",parseInt(s.getAttribute("data-index"),10))}this.setActiveBorder()}}},o.prototype.refreshActElePosition=function(){var e=sf.base.select("."+n+"."+s+".e-active",this.element);!sf.base.isNullOrUndefined(e)&&this.options.reorderActiveTab&&this.select(this.getEleIndex(e)),this.refreshActiveBorder()},o.prototype.refreshItemVisibility=function(e){var t=sf.base.select("."+this.scrCntClass,this.tbItems);if(!this.isVertical()&&!sf.base.isNullOrUndefined(t)){var i=sf.base.select(".e-hscroll-bar",this.tbItems),n=i.scrollLeft,s=n+i.offsetWidth,o=e.offsetLeft,r=e.offsetWidth,a=e.offsetLeft+e.offsetWidth;if(n<o&&s<a){var l=s-o;i.scrollLeft=n+(r-l)}else if(n>o&&s>a){l=a-n;i.scrollLeft=n-(r-l)}}},o.prototype.enableTab=function(e,t){var i=sf.base.selectAll("."+n,this.element)[e];sf.base.isNullOrUndefined(i)||(!0===t?(i.classList.remove("e-disable","e-overlay"),i.firstElementChild.setAttribute("tabindex","-1")):(i.classList.add("e-disable","e-overlay"),i.firstElementChild.removeAttribute("tabindex"),i.classList.contains("e-active")&&this.select(e+1)),i.setAttribute("aria-disabled",!0===t?"false":"true"))},o.prototype.hideTab=function(e,t){var i;void 0===t&&(t=!0);var s=sf.base.selectAll("."+n,this.element)[e];if(!sf.base.isNullOrUndefined(s)){if(this.bdrLine.classList.add("e-hidden"),t)if(s.classList.add("e-hidden"),0!==(i=sf.base.selectAll("."+n+":not(.e-hidden)",this.tbItems)).length&&s.classList.contains("e-active")){if(0!==e)for(var o=e-1;o>=0;o--){if(!this.tbItem[o].classList.contains("e-hidden")){this.select(o);break}if(0===o)for(var r=e+1;r<this.tbItem.length;r++)if(!this.tbItem[r].classList.contains("e-hidden")){this.select(r);break}}else for(r=e+1;r<this.tbItem.length;r++)if(!this.tbItem[r].classList.contains("e-hidden")){this.select(r);break}}else 0===i.length&&this.element.classList.add("e-hidden");else this.element.classList.remove("e-hidden"),i=sf.base.selectAll("."+n+":not(.e-hidden)",this.tbItems),s.classList.remove("e-hidden"),0===i.length&&this.select(e);this.setActiveBorder(),s.setAttribute("aria-hidden",""+t)}},o.prototype.select=function(e,t){void 0===t&&(t=!1);var s,o=this.getTabHeader();this.tbItems=sf.base.select("."+i,o),this.tbItem=sf.base.selectAll("."+n,o),this.prevItem=this.tbItem[this.prevIndex];var r=this.options.selectedItem;(sf.base.isNullOrUndefined(r)||r<0||this.tbItem.length<=r||isNaN(r))&&(this.options.selectedItem=0);var a=this.tbItem[e];if(sf.base.isNullOrUndefined(this.prevItem)||this.prevItem.classList.contains("e-disable")||this.prevItem.children.item(0).setAttribute("tabindex","-1"),this.initRender)this.selectingContent(e);else{a&&(s=parseInt(a.getAttribute("data-index"),10));var l={previousItem:null,previousIndex:this.prevIndex,selectedItem:null,selectedIndex:this.options.selectedItem,selectedContent:null,selectingItem:null,selectingIndex:s,selectingContent:null,isSwiped:this.isSwipeed,isInteracted:t,cancel:!1};this.dotNetRef.invokeMethodAsync("SelectingEvent",l,s)}},o.prototype.setPersistence=function(e,t){this.options.enablePersistence&&window.localStorage.setItem(e,t)},o.prototype.selectingContent=function(e){if(this.tbItem=sf.base.selectAll("."+n,this.hdrEle),this.tbItem.length>e&&e>=0&&!isNaN(e)){this.prevIndex=this.options.selectedItem;var t=this.hdrEle.querySelector("."+n+'[data-index="'+e+'"]');t&&t.classList.contains(s)&&this.options.reorderActiveTab&&this.popupHandler(t),this.setActive(e)}else this.setActive(0)},o.prototype.disable=function(e){this.setCssClass(this.element,"e-disable",e),this.element.setAttribute("aria-disabled",""+e)},o.prototype.headerItemsUpdate=function(e){var t=this.getTabHeader();this.tbItems=sf.base.select("."+i,t),this.tbItem=sf.base.selectAll("."+n,t),this.prevItem=this.tbItem[this.prevIndex],sf.base.isNullOrUndefined(this.prevItem)||this.prevItem.classList.contains("e-disable")||this.prevItem.children.item(0).setAttribute("tabindex","-1"),this.selectingContent(e)},o.prototype.destroy=function(){var e=this;this.unWireEvents(),["aria-disabled","aria-activedescendant","tabindex"].forEach((function(t){e.element.removeAttribute(t)}))},o.prototype.getContentElement=function(e){return sf.base.select(".e-content #e-content"+this.tabId+"_"+e,this.element)},o}();return{initialize:function(e,t,i,n,s,r){if(t&&e){var a=new o(e,t,i,n);a.render(),s&&(a.headerReady(),r||a.isDestroyed||a.dotNetRef.invokeMethodAsync("CreatedEvent",null))}},headerReady:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.headerReady(),t||i.isDestroyed||i.dotNetRef.invokeMethodAsync("CreatedEvent",null))},contentReady:function(t,s){var o=window.sfBlazor.getCompInstance(t);if(!sf.base.isNullOrUndefined(o)&&!sf.base.isNullOrUndefined(o.element)){var r={isPopupElement:!1};o.element.classList.remove("e-focused"),o.isPopup=!1;var a=o.element.querySelector("."+e+" ."+n+'[data-index="'+s+'"]');sf.base.isNullOrUndefined(a)||(r.isPopupElement=!sf.base.isNullOrUndefined(sf.base.closest(a,".e-toolbar-pop")));var l=sf.base.selectAll("."+e+" ."+i+" ."+n,o.element);return r.toolbarItemIndex=l.length-1,o.headerItemsUpdate(s),o.setPersistence("tab"+o.element.id,s.toString()),"Init"!==o.options.loadOn&&o.contentReady(),JSON.stringify(r)}return null},selectingContent:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.selectingContent(t),i.setPersistence("tab"+i.element.id,t.toString()),"Init"!==i.options.loadOn&&i.contentReady())},serverItemsChanged:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(s.element)||(s.options.selectedItem=t,s.options.animation=i,sf.base.isNullOrUndefined(s.element.querySelector(".e-toolbar"))||(sf.base.removeClass([s.element.querySelector(".e-toolbar")],"e-drag-action"),sf.base.removeClass([s.element.querySelector(".e-indicator")],"e-hidden")),n?sf.base.addClass([s.element],"e-vertical-icon"):sf.base.removeClass([s.element],"e-vertical-icon"),s.serverItemsChanged(),s.options.allowDragAndDrop&&s.bindDraggable())},enableTab:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.element)||n.enableTab(t,i)},hideTab:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.element)||n.hideTab(t,i)},select:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.select(t)},disable:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.disable(t)},setCssClass:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(""!==i.options.cssClass&&i.setCssClass(i.element,i.options.cssClass,!1),i.setCssClass(i.element,t,!0),i.options.cssClass=t)},showCloseButton:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.showCloseButton=t,i.refreshActElePosition())},headerPlacement:function(e,t,i,n,s,o,r){var a=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(a)&&!sf.base.isNullOrUndefined(a.element)){a.options.headerPlacement=t,a.options.selectedItem=i;var l=window.sfBlazor.getCompInstance(n);sf.base.isNullOrUndefined(l.element)||l.setCssClass(s),a.serverChangeOrientation(t,n,o,r)}},enableRtl:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.enableRtl=t,i.setRTL(t))},overflowMode:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.overflowMode=t,i.refreshActElePosition())},allowDragAndDrop:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.allowDragAndDrop=t,i.setDragAndDrop(t))},refresh:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.element)||t.refreshActiveBorder()},destroy:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.element)||(n.isDestroyed=!0,n.setPersistence(t,i),n.destroy())},getTabItem:function(e,t){if(!sf.base.isNullOrUndefined(e)){var i=e.querySelector("."+n+'[data-index="'+t+'"]');if(i)return JSON.stringify(window.sfBlazor.getDomObject("tabitem",i))}return null},getTabContent:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(i.Element)){var n=i.getContentElement(t);if(n)return JSON.stringify(window.sfBlazor.getDomObject("tabcontent",n))}return null}}}()},"./modules/sf-textbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TextBox=function(){"use strict";var e=function(){function e(e,t,i){this.element=e,this.container=i,this.element.blazor_input_instance=this,this.dotNetRef=t,this.isDestroyed=!1}return e.prototype.initialize=function(){sf.base.EventHandler.add(this.element,"blur",this.blurHandler,this);var e=this.container?this.container.querySelectorAll(".e-input-group-icon"):null;if(e&&e.length>0)for(var t=0;t<e.length;t++)sf.base.EventHandler.add(e[t],"mousedown",this.onMouseDownRipple,this),sf.base.EventHandler.add(e[t],"mouseup",this.onMouseUpRipple,this)},e.prototype.onMouseDownRipple=function(e){var t=e?e.currentTarget:null;!t||this.container.classList.contains("e-disabled")||this.container.querySelector("input").readOnly||t.classList.add("e-input-btn-ripple")},e.prototype.onMouseUpRipple=function(e){var t=e?e.currentTarget:null;t&&setTimeout((function(){t.classList.remove("e-input-btn-ripple")}),500)},e.prototype.blurHandler=function(){this.isDestroyed?sf.base.EventHandler.remove(this.element,"blur",this.blurHandler):this.dotNetRef.invokeMethodAsync("BlurHandler").catch((function(){}))},e.prototype.destroy=function(){sf.base.EventHandler.remove(this.element,"blur",this.blurHandler)},e}();return{initialize:function(t,i,n){t&&new e(t,i,n),t&&t.blazor_input_instance&&t.blazor_input_instance.initialize()},focusIn:function(e){e.focus()},focusOut:function(e){e.blur()},destroyInput:function(e){e&&e.blazor_input_instance&&(e.blazor_input_instance.isDestroyed=!0,e.blazor_input_instance.destroy())}}}()},"./modules/sf-timepicker.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TimePicker=function(){"use strict";var e=(new Date).getDate(),t=(new Date).getMonth(),i=(new Date).getFullYear(),n=function(){function n(e,t,i,n,s){window.sfBlazor=window.sfBlazor,this.dataId=e,this.containerElement=t,this.element=i,this.options=s,window.sfBlazor.setCompInstance(this),this.dotNetRef=n}return n.prototype.initialize=function(){this.keyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},sf.base.Browser.isDevice||(this.keyConfigure=sf.base.extend(this.keyConfigure,this.options.keyConfigs),new sf.base.KeyboardEvents(this.containerElement,{keyAction:this.inputHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}))},n.prototype.renderPopup=function(e,t,i,n){this.options=n,this.popupHolder=t,this.timeCollections=[],this.listWrapper=t.querySelector(".e-content")||sf.base.select(".e-content"),this.getTimeCollection(),sf.base.isNullOrUndefined(this.element.value)||(this.removeSelection(),this.selectedElement=this.listWrapper.querySelector('li[data-value = "'+this.element.value+'"]'),this.updateSelection(this.selectedElement)),this.popupCreation(e,n),sf.base.Browser.isDevice&&(this.mobilePopupWrapper=sf.base.createElement("div",{className:"e-timepicker-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),("model"===i.appendTo?this.mobilePopupWrapper:document.body).appendChild(this.popupWrapper),this.setScrollPosition(),this.popupObj.refreshPosition(this.element);var s={name:"FadeIn",duration:sf.base.Browser.isDevice?0:300};1e3===this.options.zIndex?this.popupObj.show(new sf.base.Animation(s),this.element):this.popupObj.show(new sf.base.Animation(s),null),this.setOverlayIndex(this.mobilePopupWrapper,this.popupObj.element,this.modal,sf.base.Browser.isDevice),sf.base.EventHandler.add(document,"mousedown touchstart",this.documentClickHandler,this)},n.prototype.getTimeCollection=function(){for(var e=this.listWrapper.querySelectorAll(".e-list-item"),t=0;t<e.length;t++)this.timeCollections.push(e[t].getAttribute("data-value"))},n.prototype.updateSelection=function(e){e&&(sf.base.addClass([e],"e-active"),e.setAttribute("aria-selected","true"))},n.prototype.setScrollPosition=function(){sf.base.isNullOrUndefined(this.selectedElement)?this.popupWrapper&&this.options.scrollTo&&this.checkDateValue(new Date(this.options.scrollTo))&&this.setScrollTo():this.findScrollTop(this.selectedElement)},n.prototype.checkDateValue=function(e){return!sf.base.isNullOrUndefined(e)&&e instanceof Date&&!isNaN(+e)?e:null},n.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,n=i?i.offsetTop:e.offsetTop,s=e.getBoundingClientRect().height;n+e.offsetTop>t?this.popupWrapper.scrollTop=i?n-(t/2+s/2):n:this.popupWrapper.scrollTop=0},n.prototype.setScrollTo=function(){var e;if(sf.base.isNullOrUndefined(this.popupWrapper))this.popupWrapper.scrollTop=0;else{var t=this.popupWrapper.querySelectorAll(".e-list-item");if(t.length){var i=new Date((new Date).toDateString()+" "+this.timeCollections[0]).setMilliseconds(0),n=this.getDateObject(new Date(this.options.scrollTo)).getTime();e=t[Math.round((n-i)/(6e4*this.options.step))]}}sf.base.isNullOrUndefined(e)?this.popupWrapper.scrollTop=0:this.findScrollTop(e)},n.prototype.getDateObject=function(n){if(!sf.base.isNullOrUndefined(n)){var s=n,o=!sf.base.isNullOrUndefined(this.options.value);if(this.checkDateValue(s)){var r=o?new Date(this.options.value).getDate():e,a=o?new Date(this.options.value).getMonth():t,l=o?new Date(this.options.value).getFullYear():i;return new Date(l,a,r,s.getHours(),s.getMinutes(),s.getSeconds())}}return null},n.prototype.getPopupHeight=function(){var e=parseInt("240px",10),t=this.popupWrapper.getBoundingClientRect().height;return t>e?e:t},n.prototype.popupCreation=function(e,t){var i=this;this.popupWrapper=e,this.containerStyle=this.containerElement.getBoundingClientRect(),sf.base.Browser.isDevice&&(this.modal=sf.base.createElement("div"),this.modal.className="e-timepicker e-time-modal",document.body.className+=" e-time-overflow",this.modal.style.display="block",document.body.appendChild(this.modal)),this.popupObj=new sf.popups.Popup(this.popupWrapper,{width:this.setPopupWidth(this.options.width),relateTo:sf.base.Browser.isDevice?document.body:this.containerElement,position:sf.base.Browser.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},collision:sf.base.Browser.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},offsetY:4,targetType:"relative",enableRtl:t.enableRtl,zIndex:t.zIndex,open:function(){i.popupWrapper.style.visibility="visible"},close:function(){i.popupHolder.appendChild(i.popupWrapper),i.popupObj&&i.popupObj.destroy(),i.isDisposed||i.dotNetRef.invokeMethodAsync("ClosePopup").catch((function(){})),i.popupObj=null},targetExitViewport:function(){sf.base.Browser.isDevice||i.isDisposed||i.dotNetRef.invokeMethodAsync("HidePopup",null)}}),sf.base.Browser.isDevice||(this.popupObj.collision={X:"none",Y:"flip"}),this.popupObj.element.style.maxHeight="240px"},n.prototype.closePopup=function(e,t){this.options=t,sf.base.removeClass([document.body],"e-time-overflow"),this.closeEventCallback(e)},n.prototype.removeSelection=function(){if(this.removeHover("e-hover"),!sf.base.isNullOrUndefined(this.popupWrapper)){var e=this.popupWrapper.querySelectorAll(".e-active");e.length&&(sf.base.removeClass(e,"e-active"),e[0].removeAttribute("aria-selected"))}},n.prototype.removeHover=function(e){var t=this.popupWrapper?this.popupWrapper.querySelectorAll("."+e):[];t&&t.length&&(sf.base.removeClass(t,e),"e-navigation"===e&&t[0].removeAttribute("aria-selected"))},n.prototype.setWidth=function(e){return e="number"==typeof e?sf.base.formatUnit(e):"string"==typeof e?e.match(/px|%|em/)?e:sf.base.formatUnit(e):"100%"},n.prototype.setPopupWidth=function(e){(e=this.setWidth(e)).indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px");return e},n.prototype.closeEventCallback=function(e){var t=e;if(this.isPopupOpen()&&!t.cancel&&this.popupObj){var i={name:"FadeOut",duration:50,delay:0};this.popupObj.hide(new sf.base.Animation(i))}sf.base.Browser.isDevice&&(this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),sf.base.isNullOrUndefined(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentClickHandler)},n.prototype.isPopupOpen=function(){return this.popupWrapper&&this.popupWrapper.classList.contains("e-timepicker")},n.prototype.documentClickHandler=function(e){var t=e.target;!sf.base.isNullOrUndefined(this.popupObj)&&(this.containerElement.contains(t)||this.popupObj.element&&this.popupObj.element.contains(t))&&"touchstart"!==e.type&&e.preventDefault();var i=this.containerElement.querySelector(".e-clear-icon"),n=this.containerElement.querySelector(".e-time-icon.e-icons");sf.base.closest(t,".e-popup-wrapper")||t===this.element||t===n||t===i||t===this.containerElement||this.isPopupOpen()&&!this.isDisposed&&this.dotNetRef.invokeMethodAsync("HidePopup",null)},n.prototype.setOverlayIndex=function(e,t,i,n){if(n&&!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(e)){var s=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(s-1).toString(),e.style.zIndex=s.toString()}},n.prototype.selectInputText=function(e,t,i){sf.base.Browser.isDevice||(e.setSelectionRange(0,e.value.length),t&&this.listWrapper&&(this.selectedElement=this.listWrapper.querySelectorAll(".e-list-item")[i],this.setScrollPosition()))},n.prototype.isDevice=function(){return sf.base.Browser.isDevice},n.prototype.inputHandler=function(e){"right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&"enter"!==e.action&&e.preventDefault(),"enter"===e.action&&this.isPopupOpen()&&e.stopPropagation();var t={Action:e.action,Key:e.key,KeyCode:e.keyCode,Events:e,SelectDate:null,FocusedDate:null,classList:"",Id:null,TargetClassList:null};this.isDisposed||this.dotNetRef.invokeMethodAsync("KeyboardHandler",t),"enter"===e.action&&!sf.base.isNullOrUndefined(this.popupObj)&&document.body.contains(this.popupObj.element)&&e.preventDefault()},n}();return{initialize:function(e,t,i,s,o){i&&new n(e,t,i,s,o).initialize()},renderPopup:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&i&&o.renderPopup(t,i,n,s)},closePopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(n)&&t&&n.closePopup(t,i)},selectInputText:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.selectInputText(n.element,t,i)},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()},destroy:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(n,s))}}}()},"./modules/sf-toast.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Toast=function(){"use strict";var e="e-toast-progress",t=function(){function t(e){this.progressObj=[],window.sfBlazor=window.sfBlazor,this.progressObj=[],this.updateContext(e),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this)}return t.prototype.initialize=function(e){this.refElement=sf.base.createElement("div",{className:"e-toast-ref-element"}),this.toastContainer=e,e.parentElement.insertBefore(this.refElement,e),this.isDevice=sf.base.Browser.isDevice,"300px"===this.width&&(this.width=this.isDevice&&screen.width<768?"100%":"300px",this.toastContainer.classList.add("e-toast-full-width")),this.isDevice&&screen.width<768&&new sf.base.Touch(this.element,{swipe:this.swipeHandler.bind(this)}),this.dotNetRef.invokeMethodAsync("CreatedEvent",null)},t.prototype.show=function(t){this.setAnimation(t);var n="string"===i(this.target)?document.querySelector(this.target):document.body;if(t.rootElement.style.zIndex=sf.popups.getZindexPartial(t.rootElement)+"",!sf.base.isNullOrUndefined(n)){"BODY"===n.tagName?this.toastContainer.style.position="fixed":(this.toastContainer.style.position="absolute",n.style.position="relative"),n.appendChild(this.toastContainer),this.appendToast(t.element);var s=parseInt(t.element.id.split("toast_")[1],10);this.progressObj[s]={hideEstimatedTimeOfArrival:null,intervalId:null,maxHideTime:null,element:null,timeOutId:null,progressEle:null},this.progressObj[s].element=t.element,this.extendedTimeout>0&&this.timeOut>0&&(sf.base.EventHandler.add(t.element,"mouseover",this.toastHoverAction.bind(this,s)),sf.base.EventHandler.add(t.element,"mouseleave",this.delayedToastProgress.bind(this,s))),t.showProgressBar&&(this.progressObj[s].progressEle=t.element.querySelector("."+e)),sf.base.EventHandler.add(t.element,"keydown",this.keyDownHandler,this)}},t.prototype.getDomObject=function(e,t){return null!=t?window.sfBlazor.getDomObject(e,t):null},t.prototype.swipeHandler=function(e){var t=sf.base.closest(e.originalEvent.target,".e-toast:not(.e-toast-container)"),i=this.hideAnimation.effect;sf.base.isNullOrUndefined(t)||("Right"===e.swipeDirection?(this.hideAnimation.effect="SlideRightOut",this.hide("swipe",t)):"Left"===e.swipeDirection&&(this.hideAnimation.effect="SlideLeftOut",this.hide("swipe",t)),this.hideAnimation.effect=i)},t.prototype.delayedToastProgress=function(t){var i=this.progressObj[t],n=i.element;i.timeOutId=window.setTimeout(this.destroyToast.bind(this,n),this.extendedTimeout),i.maxHideTime=parseFloat(this.extendedTimeout+""),i.hideEstimatedTimeOfArrival=(new Date).getTime()+i.maxHideTime,sf.base.isNullOrUndefined(n.querySelector("."+e))||(i.intervalId=setInterval(this.updateProgressBar.bind(this,i),10))},t.prototype.toastHoverAction=function(t){this.dotNetRef.invokeMethodAsync("ClearTimeout",t),clearTimeout(this.progressObj[t].timeOutId),clearInterval(this.progressObj[t].intervalId),this.progressObj[t].hideEstimatedTimeOfArrival=0;var i=this.progressObj[t].element;sf.base.isNullOrUndefined(i.querySelector("."+e))||(this.progressObj[t].progressEle.style.width="0%"),this.dotNetRef.invokeMethodAsync("MouseoverEvent",t)},t.prototype.updateProgressBar=function(e){var t=(e.hideEstimatedTimeOfArrival-(new Date).getTime())/e.maxHideTime*100;t="LTR"===this.progressDirection?100-t:t,e.progressEle.style.width=t+"%"},t.prototype.appendToast=function(e){this.newestOnTop&&0!==this.toastContainer.childElementCount&&this.toastContainer.insertBefore(e,this.toastContainer.children[0]),sf.base.removeClass([e],"e-blazor-toast-hidden")},t.prototype.setAnimation=function(e){var t=this,i=this,n=this.showAnimation,s={duration:n.duration,name:n.effect,timingFunction:n.easing,begin:function(){e.element.style.display=""},end:function(){sf.base.isNullOrUndefined(document.querySelector("#"+i.element.id))||i.dotNetRef.invokeMethodAsync("OpenEvent",e.index,t.getDomObject("element",e.element))}};new sf.base.Animation(s).animate(e.element)},t.prototype.hide=function(e,t){if(!sf.base.isNullOrUndefined(this.toastContainer)&&0!==this.toastContainer.childElementCount)if("string"!==i(t)||"All"!==t){if("string"===i(t)&&"All"!==t){var n=this.toastContainer.querySelector("#toast_"+t);n&&(this.destroyToast(n,e),this.dotNetRef.invokeMethodAsync("DestroyTimer",parseInt(t,10)))}sf.base.isNullOrUndefined(t)&&(t=this.newestOnTop?this.toastContainer.lastElementChild:this.toastContainer.firstElementChild),this.destroyToast(t,e);var s=parseInt(t.id.split("toast_")[1],10);this.dotNetRef.invokeMethodAsync("DestroyTimer",s)}else for(var o=0;o<this.toastContainer.childElementCount;o++)this.destroyToast(this.toastContainer.children[o],e)},t.prototype.destroyToast=function(e,t){if(0!==this.toastContainer.attributes.length){var i=parseInt(e.id.split("toast_")[1],10);this.dotNetRef.invokeMethodAsync("OnCloseEvent",i,t)}},t.prototype.hideAnimationToast=function(e,t){var i=this,n=this.hideAnimation,s={duration:n.duration,name:n.effect,timingFunction:n.easing,end:function(){sf.base.detach(e),i.dotNetRef.invokeMethodAsync("CloseEvent",t)}};new sf.base.Animation({}).animate(e,s)},t.prototype.destroy=function(){for(;this.toastContainer.attributes.length>0;)this.toastContainer.removeAttribute(this.toastContainer.attributes[0].name);for(var e=this.toastContainer.children,t=e.length-1;t>=0;t--)sf.base.detach(e[t]);sf.base.isNullOrUndefined(this.refElement)||sf.base.isNullOrUndefined(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.toastContainer,this.refElement),sf.base.detach(this.refElement),this.refElement=void 0)},t.prototype.keyDownHandler=function(e){if(e.target.classList.contains("e-toast-close-icon")&&(13===e.keyCode||32===e.keyCode)){var t=e.target,i=sf.base.closest(t,".e-toast");this.destroyToast(i,"key")}},t.prototype.updateContext=function(e){sf.base.extend(this,this,e)},t}();return{initialize:function(e){e.dataId&&(new t(e),window.sfBlazor.instances[e.dataId].initialize(e.element))},show:function(e){e.rootElement&&(window.sfBlazor.instances[e.dataId].updateContext(e),window.sfBlazor.instances[e.dataId].show(e))},hideAnimationToast:function(e,t){if(e){var i=window.sfBlazor.instances[e].rootElement;window.sfBlazor.instances[e].hideAnimationToast(i.querySelector("#toast_"+t),t)}},hide:function(e,t,i,n){e&&(window.sfBlazor.instances[e].updateContext(i),window.sfBlazor.instances[e].hide(n,t))},appendToast:function(e,t){e&&window.sfBlazor.instances[e].appendToast(t)},destroy:function(e){e&&window.sfBlazor.instances[e].destroy()}}}()},"./modules/sf-toolbar.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Toolbar=function(){"use strict";var e="e-toolbar-items",t="e-blazor-toolbar-items",i="e-toolbar-item",n="e-toolbar-popup",s=function(){function s(e,t,i,n){this.resizeContext=this.resize.bind(this),window.sfBlazor=window.sfBlazor,this.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},this.element=t,this.dotNetRef=n,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return s.prototype.destroy=function(){this.unwireEvents(),this.clearProperty(),this.popObj=null,this.tbarAlign=null},s.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.options.allowKeyboard&&this.wireKeyboardEvent()},s.prototype.wireKeyboardEvent=function(){this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),sf.base.EventHandler.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")},s.prototype.unwireKeyboardEvent=function(){this.keyModule&&(sf.base.EventHandler.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},s.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var t=!sf.base.isNullOrUndefined(this.popObj)&&sf.base.isVisible(this.popObj.element)&&"Extended"!==this.options.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},s.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),sf.base.EventHandler.remove(document,"scroll",this.docEvent),sf.base.EventHandler.remove(document,"click",this.docEvent)},s.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},s.prototype.docEvent=function(e){var t=sf.base.closest(e.target,".e-popup");this.popObj&&sf.base.isVisible(this.popObj.element)&&!t&&"Popup"===this.options.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},s.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&sf.base.addClass([this.scrollModule.element],"e-tbar-pos"),this.scrollModule.destroy(),this.scrollModule=null)},s.prototype.destroyMode=function(){this.scrollModule&&(sf.base.removeClass([this.scrollModule.element],"e-rtl"),this.destroyScroll()),sf.base.removeClass([this.element],"e-tbar-extended"),sf.base.removeClass([this.element],"e-extended-toolbar");var e=this.element.querySelector(".e-toolbar-multirow");e&&sf.base.removeClass([e],"e-toolbar-multirow"),this.popObj&&this.popupRefresh(this.popObj.element,!0)},s.prototype.elementFocus=function(e){var t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()},s.prototype.clstElement=function(e,t){return e&&this.popObj&&sf.base.isVisible(this.popObj.element)?this.popObj.element.querySelector("."+i):this.element===t||e?this.element.querySelector("."+i+":not(.e-overlay ):not(.e-separator ):not(.e-hidden )"):sf.base.closest(t,"."+i)},s.prototype.keyHandling=function(t,n,s,o,r){var a,l,d,h=this.popObj,c=this.element,p={name:"FadeOut",duration:100};switch(n.action){case"moveRight":if(this.options.isVertical)return;c===s?this.elementFocus(t):o||this.eleFocus(t,"next");break;case"moveLeft":if(this.options.isVertical)return;o||this.eleFocus(t,"previous");break;case"home":case"end":if(t){var u=sf.base.closest(t,".e-popup"),f=this.element.querySelector(".e-toolbar-extended");"Extended"===this.options.overflowMode&&f&&f.classList.contains("e-popup-open")&&(u="end"===n.action?f:null),u?sf.base.isVisible(this.popObj.element)&&(l=[].slice.call(u.children),a="home"===n.action?l[0]:l[l.length-1]):(l=this.element.querySelectorAll("."+e+" ."+i+":not(.e-separator)"),a="home"===n.action?l[0]:l[l.length-1]),a&&this.elementFocus(a)}break;case"moveUp":case"moveDown":if(d="moveUp"===n.action?"previous":"next",this.options.isVertical)"moveUp"===n.action?this.eleFocus(t,"previous"):this.eleFocus(t,"next");else if(h&&sf.base.closest(s,".e-popup")){var m=h.element,g=m.firstElementChild;if("previous"===d&&g===t||"next"===d&&m.lastElementChild===t)return;this.eleFocus(t,d)}else"moveDown"===n.action&&h&&sf.base.isVisible(h.element)&&this.elementFocus(t);break;case"tab":if(!r&&!o){var v=t.firstElementChild;c===s&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(v),v.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":h&&"Extended"!==this.options.overflowMode&&h.hide(p);break;case"popupOpen":if(!o)return;h&&!sf.base.isVisible(h.element)?(h.element.style.top=c.offsetHeight+"px",h.show({name:"FadeIn",duration:100})):h.hide(p)}},s.prototype.keyActionHandler=function(e){var t=e.target;if("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!this.element.classList.contains("e-overlay")){e.preventDefault();var i=t.classList.contains("e-hor-nav"),n=t.classList.contains("e-scroll-nav"),s=this.clstElement(i,t);(s||n)&&this.keyHandling(s,e,t,i,n)}},s.prototype.eleContains=function(e){var t=!!e.classList.contains("e-template")&&!sf.base.isNullOrUndefined(e.querySelector(".e-input"));return e.classList.contains("e-separator")||e.classList.contains("e-overlay")||e.getAttribute("disabled")||e.classList.contains("e-hidden")||!sf.base.isVisible(e)||t},s.prototype.eleFocus=function(e,t){var n=Object(e)[t+"ElementSibling"];if(n){if(this.eleContains(n))return void this.eleFocus(n,t);this.elementFocus(n)}else if(this.tbarAlign){var s=Object(e.parentElement)[t+"ElementSibling"];if(sf.base.isNullOrUndefined(s)||0!==s.children.length||(s=Object(s)[t+"ElementSibling"]),!sf.base.isNullOrUndefined(s)&&s.children.length>0)if("next"===t){var o=s.querySelector("."+i);this.eleContains(o)?this.eleFocus(o,t):(o.firstElementChild.focus(),this.activeEleSwitch(o))}else{o=s.lastElementChild;this.eleContains(o)?this.eleFocus(o,t):this.elementFocus(o)}}},s.prototype.clickHandler=function(e){if(!this.element.classList.contains("e-drag-action")){var t=sf.base.closest(e.target,"."+i);if(sf.base.isNullOrUndefined(t)||t.classList.contains("e-overlay")||"true"===t.getAttribute("aria-disabled")){var n,s,o=e.target,r=o.classList,a=this.element,l=sf.base.closest(o,".e-hor-nav");if(l||(l=o),a.children[0].classList.contains("e-hscroll")||a.children[0].classList.contains("e-vscroll")||!r.contains("e-hor-nav")||(r=o.querySelector(".e-icons").classList),(r.contains("e-popup-up-icon")||r.contains("e-popup-down-icon"))&&this.popupClickHandler(a,l,"e-rtl"),!sf.base.isNullOrUndefined(t)||l.classList.contains("e-hor-nav")){sf.base.isNullOrUndefined(t)||(n=parseInt(t.getAttribute("data-index"),10),s={id:t.id});var d={altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,offsetX:e.offsetX,offsetY:e.offsetY,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type};this.dotNetRef.invokeMethodAsync("TriggerClickEvent",d,n,s)}}}},s.prototype.popupClickHandler=function(e,t,i){var n=this.popObj;sf.base.isVisible(n.element)?(t.classList.remove("e-nav-active"),n.hide({name:"FadeOut",duration:100})):((e.classList.contains(i)||this.options.isVerticalLeft)&&(e.classList.contains(i)&&(n.enableRtl=!0),n.position={X:"left",Y:"top"}),0!==n.offsetX||e.classList.contains(i)||this.options.isVerticalLeft||(n.enableRtl=!1,n.position={X:"right",Y:"top"}),n.dataBind(),n.refreshPosition(),n.element.style.top=this.getElementOffsetY()+"px","Extended"===this.options.overflowMode&&(n.element.style.left="0px",n.element.style.minHeight="0px"),t.classList.add("e-nav-active"),n.show({name:"FadeIn",duration:100}))},s.prototype.render=function(){this.scrollModule=null,this.popObj=null,this.isExtendedOpen=!1,this.popupPriCount=0;var e=sf.base.formatUnit(this.options.width),t=sf.base.formatUnit(this.options.height);this.element&&("msie"===sf.base.Browser.info.name&&"auto"===this.options.height||sf.base.setStyleAttribute(this.element,{height:t}),sf.base.setStyleAttribute(this.element,{width:e}),this.element.setAttribute("aria-haspopup","false"),this.renderControl(),this.wireEvents())},s.prototype.renderControl=function(){this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},s.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},s.prototype.itemsAlign=function(e,n,s){var o,r;this.tbarEle||(this.tbarEle=[]);for(var a=0;a<e.length;a++){var l=this.element.querySelector("."+t);(o="MultiRow"===this.options.overflowMode&&s?n.querySelector("."+i+'[id="'+e[a].id+'"]'):l.querySelector("."+i+'[id="'+e[a].id+'"]'))&&("Show"!==e[a].overflow&&e[a].showAlwaysInPopup&&!o.classList.contains("e-separator")&&this.popupPriCount++,e[a].htmlAttributes&&this.setAttr(e[a].htmlAttributes,o),"Button"===e[a].type&&(sf.base.EventHandler.remove(o,"click",this.itemClick),sf.base.EventHandler.add(o,"click",this.itemClick,this)),-1===this.tbarEle.indexOf(o)&&this.tbarEle.push(o),"MultiRow"===this.options.overflowMode&&s||(this.tbarAlign||this.tbarItemAlign(e[a],n,a),(r=n.querySelector(".e-toolbar-"+e[a].align.toLowerCase()))?(e[a].showAlwaysInPopup&&"Show"!==e[a].overflow||this.tbarAlgEle[(e[a].align+"s").toLowerCase()].push(o),r.appendChild(o)):n.appendChild(o)))}},s.prototype.serverItemsRefresh=function(i){var n=this.element,s=n.querySelector("."+t),o=n.querySelector("."+e);(o&&o.children.length>0||s.children.length>0)&&(!o&&n&&n.classList.contains("e-toolbar")&&n.firstElementChild&&(o=sf.base.createElement("div",{className:e}),n.insertBefore(o,n.firstElementChild)),this.itemsAlign(this.options.items,o,i),this.renderLayout(),this.refreshOverflow())},s.prototype.resetServerItems=function(n){if("MultiRow"!==this.options.overflowMode||!n){var s=this.element.querySelector("."+t),o=[].slice.call(sf.base.selectAll("."+e+" ."+i,this.element));sf.base.append(o,s),this.clearProperty()}},s.prototype.changeOrientation=function(){this.options.isVertical?(this.element.classList.add("e-vertical"),this.element.setAttribute("aria-orientation","vertical"),sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.options.height),width:sf.base.formatUnit(this.options.width)})):(this.element.classList.remove("e-vertical"),this.element.setAttribute("aria-orientation","horizontal"),"auto"!==this.options.height&&"100%"!==this.options.height||(this.element.style.height=this.options.height)),this.destroyMode(),this.refreshOverflow()},s.prototype.initScroll=function(t,i){!this.scrollModule&&this.checkOverflow(t,i[0])&&(this.tbarAlign&&this.element.querySelector("."+e+" .e-toolbar-center").removeAttribute("style"),this.options.isVertical?this.scrollModule=new sf.navigations.VScroll({scrollStep:this.options.scrollStep,enableRtl:this.options.enableRtl},i[0]):this.scrollModule=new sf.navigations.HScroll({scrollStep:this.options.scrollStep,enableRtl:this.options.enableRtl},i[0]),sf.base.removeClass([this.scrollModule.element],"e-tbar-pos"),sf.base.setStyleAttribute(this.element,{overflow:"hidden"}))},s.prototype.itemWidthCal=function(e){var t,n=this,s=0;return[].slice.call(sf.base.selectAll("."+i,e)).forEach((function(e){sf.base.isVisible(e)&&(t=window.getComputedStyle(e),s+=n.options.isVertical?e.offsetHeight:e.offsetWidth,s+=parseFloat(n.options.isVertical?t.marginTop:t.marginRight),s+=parseFloat(n.options.isVertical?t.marginBottom:t.marginLeft))})),s},s.prototype.getScrollCntEle=function(e){var t=this.options.isVertical?".e-vscroll-content":".e-hscroll-content";return e.querySelector(t)},s.prototype.checkOverflow=function(e,t){if(sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(t)||!sf.base.isVisible(e))return!1;var i=this.options.isVertical?e.offsetHeight:e.offsetWidth,n=this.options.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===n)&&(n=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));var s=e.querySelector(".e-hor-nav"),o=e.querySelector(".e-scroll-nav"),r=0;return s?r=this.options.isVertical?s.offsetHeight:s.offsetWidth:o&&(r=this.options.isVertical?2*o.offsetHeight:2*o.offsetWidth),n>i-r},s.prototype.refreshOverflow=function(){this.resize()},s.prototype.toolbarAlign=function(e){this.tbarAlign&&(sf.base.addClass([e],"e-tbar-pos"),this.itemPositioning())},s.prototype.renderOverflowMode=function(){var t=this.element,i=t.querySelector("."+e),n=this.popupPriCount>0;if(t&&t.children.length>0)switch(this.offsetWid=t.offsetWidth,sf.base.removeClass([this.element],"e-toolpop"),"msie"===sf.base.Browser.info.name&&"auto"===this.options.height&&(t.style.height=""),this.options.overflowMode){case"Scrollable":sf.base.isNullOrUndefined(this.scrollModule)&&this.initScroll(t,[].slice.call(t.getElementsByClassName(e)));break;case"Popup":sf.base.addClass([this.element],"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(t,i)||n)&&this.setOverflowAttributes(t),this.toolbarAlign(i);break;case"MultiRow":sf.base.addClass([i],"e-toolbar-multirow"),this.checkOverflow(t,i)&&this.tbarAlign&&(this.removePositioning(),sf.base.addClass([i],"e-multirow-pos")),"hidden"===t.style.overflow&&(t.style.overflow=""),"msie"!==sf.base.Browser.info.name&&"auto"===t.style.height||(t.style.height="auto");break;case"Extended":sf.base.addClass([this.element],"e-extended-toolbar"),(this.checkOverflow(t,i)||n)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(t)),this.toolbarAlign(i)}},s.prototype.setOverflowAttributes=function(t){this.createPopupEle(t,[].slice.call(sf.base.selectAll("."+e+" ."+i,t))),this.element.querySelector(".e-hor-nav").setAttribute("tabIndex","0"),this.element.querySelector(".e-hor-nav").setAttribute("role","list")},s.prototype.separator=function(){var e=this.element,t=[].slice.call(e.querySelectorAll(".e-separator")),i=e.querySelector(".e-multirow-separator"),n=e.querySelector(".e-extended-separator"),s="MultiRow"===this.options.overflowMode?i:n;null!==s&&("MultiRow"===this.options.overflowMode?s.classList.remove("e-multirow-separator"):"Extended"===this.options.overflowMode&&s.classList.remove("e-extended-separator"));for(var o=0;o<=t.length-1;o++)t[o].offsetLeft<30&&0!==t[o].offsetLeft&&("MultiRow"===this.options.overflowMode?t[o].classList.add("e-multirow-separator"):"Extended"===this.options.overflowMode&&t[o].classList.add("e-extended-separator"))},s.prototype.createPopupEle=function(e,t){var i=e.querySelector(".e-hor-nav"),n=this.options.isVertical;i||this.createPopupIcon(e),i=e.querySelector(".e-hor-nav");var s=n?i.offsetHeight:i.offsetWidth,o=(n?e.offsetHeight:e.offsetWidth)-s;this.element.classList.remove("e-rtl"),sf.base.setStyleAttribute(this.element,{direction:"initial"}),this.checkPriority(e,t,o,!0),this.options.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},s.prototype.pushingPoppedEle=function(t,s,o,r,a){var l=this.element,d=sf.base.selectAll(".e-overflow-show",o),h=0,c=[].slice.call(sf.base.selectAll("."+n,l.querySelector("."+e))),p=0;c.forEach((function(e,i){d=sf.base.selectAll(".e-overflow-show",o),e.classList.contains("e-overflow-show")&&d.length>0?t.tbResize&&d.length>i?(o.insertBefore(e,d[i]),++p):(o.insertBefore(e,o.children[d.length]),++p):e.classList.contains("e-overflow-show")||t.tbResize&&e.classList.contains("e-overflow-hide")&&o.children.length>0&&0===d.length?(o.insertBefore(e,o.firstChild),++p):e.classList.contains("e-overflow-hide")?s.push(e):t.tbResize?(o.insertBefore(e,o.childNodes[h+p]),++h):o.appendChild(e),e.classList.contains("e-separator")?sf.base.setStyleAttribute(e,{display:"",height:a+"px"}):sf.base.setStyleAttribute(e,{display:"",height:r+"px"})})),s.forEach((function(e){o.appendChild(e)}));for(var u=sf.base.selectAll("."+i,l.querySelector("."+e)),f=u.length-1;f>=0;f--){var m=u[f];if(!m.classList.contains("e-separator")||"Extended"===this.options.overflowMode)break;sf.base.setStyleAttribute(m,{display:"none"})}},s.prototype.createPopup=function(){var e,t,s=this.element;"Extended"===this.options.overflowMode&&(t=s.querySelector(".e-separator:not(."+n+")"),e="auto"===s.style.height||""===s.style.height?null:t&&t.offsetHeight);var o,r=s.querySelector("."+i+":not(.e-separator):not(."+n+"):not(.e-hidden)"),a="auto"===s.style.height||""===s.style.height?null:r&&r.offsetHeight;if(s.querySelector("#"+s.id+"_popup.e-toolbar-pop"))o=s.querySelector("#"+s.id+"_popup.e-toolbar-pop");else{var l=sf.base.createElement("div",{id:s.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),d=sf.base.createElement("div",{id:s.id+"_popup",className:"e-toolbar-pop"});o="Extended"===this.options.overflowMode?l:d}this.pushingPoppedEle(this,[],o,a,e),this.popupInit(s,o)},s.prototype.getElementOffsetY=function(){return"Extended"===this.options.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},s.prototype.popupInit=function(e,t){if(this.popObj){var i=this.popObj.element;if("Extended"===this.options.overflowMode){var n=window.getComputedStyle(this.element);this.popObj.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),this.popObj.offsetX=0,this.popObj.dataBind()}sf.base.setStyleAttribute(i,{maxHeight:"",display:"block"}),sf.base.setStyleAttribute(i,{maxHeight:i.offsetHeight+"px",display:""})}else{e.appendChild(t),sf.base.setStyleAttribute(this.element,{overflow:""});var s=window.getComputedStyle(this.element),o=new sf.popups.Popup(null,{relateTo:this.element,offsetY:this.options.isVertical?0:this.getElementOffsetY(),enableRtl:this.options.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.options.enableCollision?"flip":"none"},position:this.options.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(o.appendTo(t),"Extended"===this.options.overflowMode&&(o.width=parseFloat(s.width)+2*parseFloat(s.borderRightWidth),o.offsetX=0),sf.base.EventHandler.add(document,"scroll",this.docEvent.bind(this)),sf.base.EventHandler.add(document,"click ",this.docEvent.bind(this)),o.element.style.maxHeight=o.element.offsetHeight+"px",this.options.isVertical&&(o.element.style.visibility="hidden"),this.isExtendedOpen){var r=this.element.querySelector(".e-hor-nav");r.classList.add("e-nav-active"),sf.base.classList(r.firstElementChild,["e-popup-up-icon"],["e-popup-down-icon"]),this.element.querySelector(".e-toolbar-extended").classList.add("e-popup-open")}else o.hide();this.popObj=o,this.element.setAttribute("aria-haspopup","true")}},s.prototype.tbarPopupHandler=function(e){"Extended"===this.options.overflowMode&&(e?sf.base.addClass([this.element],"e-tbar-extended"):sf.base.removeClass([this.element],"e-tbar-extended"))},s.prototype.popupOpen=function(e){var t=this.popObj;this.options.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());var i=this.popObj.element,n=this.popObj.element.parentElement,s=n.querySelector(".e-hor-nav");sf.base.setStyleAttribute(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.options.overflowMode&&(t.element.style.left="",t.element.style.minHeight="");var o=i.offsetTop+i.offsetHeight+sf.popups.calculatePosition(n).top,r=s.firstElementChild;s.classList.add("e-nav-active"),sf.base.classList(r,["e-popup-up-icon"],["e-popup-down-icon"]),this.tbarPopupHandler(!0);var a=sf.base.isNullOrUndefined(window.scrollY)?0:window.scrollY;if(!this.options.isVertical&&window.innerHeight+a<o&&this.element.offsetTop<i.offsetHeight){var l=i.offsetHeight-(o-window.innerHeight-a+5);t.height=l+"px";for(var d=0;d<=i.childElementCount;d++){var h=i.children[d];if(h.offsetTop+h.offsetHeight>l){l=h.offsetTop;break}}sf.base.setStyleAttribute(t.element,{maxHeight:l+"px"})}else if(this.options.isVertical){var c=this.element.getBoundingClientRect();sf.base.setStyleAttribute(t.element,{maxHeight:c.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(t){var p=i.getBoundingClientRect();p.right>document.documentElement.clientWidth&&p.width>n.getBoundingClientRect().width&&(t.collision={Y:"none"},t.dataBind()),t.refreshPosition()}},s.prototype.popupClose=function(e){var t=this.element.querySelector(".e-hor-nav"),i=t.firstElementChild;t.classList.remove("e-nav-active"),sf.base.classList(i,["e-popup-down-icon"],["e-popup-up-icon"]),this.tbarPopupHandler(!1)},s.prototype.checkPriority=function(e,t,s,o){for(var r,a=this.popupPriCount>0,l=s,d=0,h=0,c=0,p=function(e,t){var i=!1;return t.forEach((function(t){e.classList.contains(t)&&(i=!0)})),i},u=t.length-1;u>=0;u--){var f=void 0,m=window.getComputedStyle(t[u]);this.options.isVertical?(f=parseFloat(m.marginTop),f+=parseFloat(m.marginBottom)):(f=parseFloat(m.marginRight),f+=parseFloat(m.marginLeft));var g=t[u]===this.tbarEle[0];g&&(this.tbarEleMrgn=f),r=this.options.isVertical?t[u].offsetHeight:t[u].offsetWidth;var v=g?r+f:r;if(p(t[u],["e-popup-alone"])&&a&&(t[u].classList.add(n),this.options.isVertical?sf.base.setStyleAttribute(t[u],{display:"none",minHeight:v+"px"}):sf.base.setStyleAttribute(t[u],{display:"none",minWidth:v+"px"}),c++),this.options.isVertical?t[u].offsetTop+t[u].offsetHeight+f>s:t[u].offsetLeft+t[u].offsetWidth+f>s){if(t[u].classList.contains("e-separator")){if("Extended"===this.options.overflowMode){if(h===c)p(b=t[u],["e-separator","e-ignore"])&&(t[u].classList.add(n),c++);h++}else if("Popup"===this.options.overflowMode){var b;if(d>0&&h===c)p(b=t[u+h+(d-1)],["e-separator","e-ignore"])&&sf.base.setStyleAttribute(b,{display:"none"});d++,h=0,c=0}}else h++;t[u].classList.contains("e-overflow-show")&&o||p(t[u],["e-separator","e-ignore"])?s-=(this.options.isVertical?t[u].offsetHeight:t[u].offsetWidth)+f:(t[u].classList.add(n),this.options.isVertical?sf.base.setStyleAttribute(t[u],{display:"none",minHeight:v+"px"}):sf.base.setStyleAttribute(t[u],{display:"none",minWidth:v+"px"}),c++)}}if(o){var y=sf.base.selectAll("."+i+":not(."+n+")",this.element);this.checkPriority(e,y,l,!1)}},s.prototype.createPopupIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.options.overflowMode?i+" e-expended-nav":i;var n=sf.base.createElement("div",{id:t,className:i});"msie"!==sf.base.Browser.info.name&&"edge"!==sf.base.Browser.info.name||n.classList.add("e-ie-align");var s=sf.base.createElement("div",{className:"e-popup-down-icon e-icons"});n.appendChild(s),n.setAttribute("tabindex","0"),n.setAttribute("role","list"),e.appendChild(n)},s.prototype.tbarPriRef=function(e,t,i,s,o,r,a,l){var d=l,h=this.popObj.element,c=sf.base.selectAll("."+n+":not(.e-overflow-show)",h).length,p=function(e,t){return e.classList.contains(t)};if(0===sf.base.selectAll(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){var u=e.children[t-(t-i)-1],f=!sf.base.isNullOrUndefined(u)&&p(u,"e-ignore");if(!sf.base.isNullOrUndefined(u)&&p(u,"e-separator")&&!sf.base.isVisible(u)||f){u.style.display="inherit";var m=u.offsetWidth+2*parseFloat(window.getComputedStyle(u).marginRight),g=u.previousElementSibling;r+m<a||o?(e.insertBefore(s,e.children[t+d-(t-i)]),sf.base.isNullOrUndefined(g)||(g.style.display="")):g.classList.contains("e-separator")&&(g.style.display="none"),u.style.display=""}else e.insertBefore(s,e.children[t+d-(t-i)])}else e.insertBefore(s,e.children[t+d-c])},s.prototype.popupRefresh=function(t,i){var n=this,s=this.element,o=this.options.isVertical,r=s.querySelector(".e-hor-nav"),a=s.querySelector("."+e);if(!sf.base.isNullOrUndefined(r)&&!sf.base.isNullOrUndefined(a)){var l;a.removeAttribute("style"),t.style.display="block",l=o?s.offsetHeight-(r.offsetHeight+a.offsetHeight):s.offsetWidth-(r.offsetWidth+a.offsetWidth);var d=0;[].slice.call(t.children).forEach((function(e){d+=n.popupEleWidth(e),sf.base.setStyleAttribute(e,{position:""})})),l+(o?r.offsetHeight:r.offsetWidth)>d&&0===this.popupPriCount&&(i=!0),this.popupEleRefresh(l,t,i),t.style.display="",0===t.children.length&&r&&this.popObj&&(sf.base.detach(r),r=null,this.popObj.destroy(),sf.base.detach(this.popObj.element),this.popObj=null,s.setAttribute("aria-haspopup","false"))}},s.prototype.ignoreEleFetch=function(e,t){var i=[].slice.call(t.querySelectorAll(".e-ignore")),n=[],s=0;return i.length>0?(i.forEach((function(e){n.push([].slice.call(t.children).indexOf(e))})),n.forEach((function(t){t<=e&&s++})),s):0},s.prototype.checkPopupRefresh=function(t,i){i.style.display="block";var n=this.popupEleWidth(i.firstElementChild);i.firstElementChild.style.removeProperty("Position");var s=t.offsetWidth-t.querySelector(".e-hor-nav").offsetWidth,o=t.querySelector("."+e).offsetWidth;return i.style.removeProperty("display"),s>n+o},s.prototype.popupEleWidth=function(e){e.style.position="absolute";var t=this.options.isVertical?e.offsetHeight:e.offsetWidth,i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains("e-popup-text")){var n=e.children[0];!sf.base.isNullOrUndefined(i)&&e.classList.contains("e-popup-text")?i.style.display="none":!sf.base.isNullOrUndefined(i)&&e.classList.contains("e-toolbar-text")&&(i.style.display="block"),n.style.minWidth="0%",t=parseFloat(this.options.isVertical?e.style.minHeight:e.style.minWidth),n.style.minWidth="",n.style.minHeight="",sf.base.isNullOrUndefined(i)||(i.style.display="")}return t},s.prototype.popupEleRefresh=function(t,i,s){for(var o,r,a=this.popupPriCount>0,l=this.tbarEle,d=this.element.querySelector("."+e),h=0,c=function(i){if(i.classList.contains("e-popup-alone")&&a&&!s)return"continue";var c=p.popupEleWidth(i);if(i===p.tbarEle[0]&&(c+=p.tbarEleMrgn),i.style.position="",!(c<t||s))return"break";if(sf.base.setStyleAttribute(i,{minWidth:"",height:"",minHeight:""}),i.classList.contains("e-overflow-hide")||i.classList.remove(n),r=p.tbarEle.indexOf(i),p.tbarAlign){var u=p.options.items[r].align;r=p.tbarAlgEle[(u+"s").toLowerCase()].indexOf(i),l=p.tbarAlgEle[(u+"s").toLowerCase()],d=p.element.querySelector("."+e+" .e-toolbar-"+u.toLowerCase())}var f=0;"Extended"!==p.options.overflowMode&&l.slice(0,r).forEach((function(e){(e.classList.contains("e-overflow-show")||e.classList.contains("e-separator"))&&(e.classList.contains("e-separator")&&(e.style.display="",t-=e.offsetWidth),f++)})),h=p.ignoreEleFetch(r,d),i.classList.contains("e-overflow-show")?(p.tbarPriRef(d,r,f,i,s,c,t,h),t-=i.offsetWidth):0===r?(d.insertBefore(i,d.firstChild),t-=i.offsetWidth):(o=sf.base.selectAll(".e-overflow-show",p.popObj.element).length,d.insertBefore(i,d.children[r+h-o]),t-=i.offsetWidth),i.style.height=""},p=this,u=0,f=[].slice.call(i.children);u<f.length;u++){if("break"===c(f[u]))break}this.checkOverflow(this.element,this.element.getElementsByClassName(e)[0])&&!s&&this.renderOverflowMode()},s.prototype.removePositioning=function(){var t=this.element.querySelector("."+e);if(!sf.base.isNullOrUndefined(t)&&t.classList.contains("e-tbar-pos")){sf.base.removeClass([t],"e-tbar-pos");var i=[].slice.call(t.childNodes);i[1].removeAttribute("style"),i[2].removeAttribute("style")}},s.prototype.refreshPositioning=function(){var t=this.element.querySelector("."+e);sf.base.addClass([t],"e-tbar-pos"),this.itemPositioning()},s.prototype.itemPositioning=function(){var t,i=this.element.querySelector("."+e);if(!sf.base.isNullOrUndefined(i)&&i.classList.contains("e-tbar-pos")){var n,s=this.element.querySelector(".e-hor-nav");if(this.scrollModule){var o=this.options.isVertical?"e-vscroll-content":"e-hscroll-content";n=[].slice.call(i.querySelector("."+o).children)}else n=[].slice.call(i.childNodes);t=this.options.isVertical?n[0].offsetHeight+n[2].offsetHeight:n[0].offsetWidth+n[2].offsetWidth;var r=this.options.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(s){r-=this.options.isVertical?s.offsetHeight:s.offsetWidth;var a=(this.options.isVertical?s.offsetHeight:s.offsetWidth)+"px";n[2].removeAttribute("style"),this.options.isVertical?this.options.enableRtl?n[2].style.top=a:n[2].style.bottom=a:this.options.enableRtl?n[2].style.left=a:n[2].style.right=a}if(!(r<=t)){var l=(r-t-(this.options.isVertical?n[1].offsetHeight:n[1].offsetWidth))/2;n[1].removeAttribute("style");var d=(this.options.isVertical?n[0].offsetHeight:n[0].offsetWidth)+l+"px";this.options.isVertical?this.options.enableRtl?n[1].style.marginBottom=d:n[1].style.marginTop=d:this.options.enableRtl?n[1].style.marginRight=d:n[1].style.marginLeft=d}}},s.prototype.tbarItemAlign=function(e,t,i){var n=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var s=[];if(s.push(sf.base.createElement("div",{className:"e-toolbar-left"})),s.push(sf.base.createElement("div",{className:"e-toolbar-center"})),s.push(sf.base.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==e.align)s.forEach((function(e){t.appendChild(e)})),this.tbarAlign=!0,sf.base.addClass([t],"e-tbar-pos");else if("Left"!==e.align){var o=t.childNodes,r=s[0];[].slice.call(o).forEach((function(e){n.tbarAlgEle.lefts.push(e),r.appendChild(e)})),t.appendChild(r),t.appendChild(s[1]),t.appendChild(s[2]),this.tbarAlign=!0,sf.base.addClass([t],"e-tbar-pos")}}},s.prototype.renderItems=function(){var t=this.element,i=this.options.items;if(t&&i.length>0){var n=t.querySelector("."+e);n||(n=sf.base.createElement("div",{className:e})),this.itemsAlign(i,n,!0),sf.base.isNullOrUndefined(t.firstElementChild)?t.appendChild(n):t.insertBefore(n,t.firstElementChild)}},s.prototype.setAttr=function(e,t){for(var i,n=Object.keys(e),s=0;s<n.length;s++)"class"===(i=n[s])?sf.base.addClass([t],e[i]):t.setAttribute(i,e[i])},s.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},s.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},s.prototype.activeEleRemove=function(e){sf.base.isNullOrUndefined(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,sf.base.isNullOrUndefined(this.trgtEle)&&!e.parentElement.classList.contains("e-template")?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")},s.prototype.resize=function(){var t=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.options.overflowMode&&this.popObj.hide();var i=this.checkOverflow(t,t.getElementsByClassName(e)[0]);if(!i){this.destroyScroll();var n=t.querySelector("."+e);sf.base.isNullOrUndefined(n)||(sf.base.removeClass([n],"e-multirow-pos"),this.tbarAlign&&sf.base.addClass([n],"e-tbar-pos"))}if(!i||!this.scrollModule||this.offsetWid!==t.offsetWidth){if((this.offsetWid>t.offsetWidth||i)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.options.overflowMode){var s=window.getComputedStyle(this.element);this.popObj.width=parseFloat(s.width)+2*parseFloat(s.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.offsetWid=t.offsetWidth,this.tbResize=!1,this.separator()}},s.prototype.extendedOpen=function(){var e=this.element.querySelector(".e-toolbar-extended");"Extended"===this.options.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains("e-popup-open"))},s.prototype.disable=function(e){var t=this.element;e?t.classList.add("e-overlay"):t.classList.remove("e-overlay"),t.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(sf.base.isVisible(this.popObj.element)&&"Extended"!==this.options.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},s.prototype.setCssClass=function(e){this.extendedOpen(),this.options.cssClass&&sf.base.removeClass([this.element],this.options.cssClass.split(" ")),e&&sf.base.addClass([this.element],e.split(" ")),this.options.cssClass=e},s}();return{initialize:function(e,t,i,n){0===i.scrollStep&&(i.scrollStep=null),new s(e,t,i,n).render()},hidePopup:function(e,t){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.popObj)){var s=n.element.querySelector("."+i+'[data-index="'+t+'"]');sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(sf.base.closest(s,".e-toolbar-pop"))||n.popObj.hide({name:"FadeOut",duration:100})}},setCssClass:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.setCssClass(t)},setWidth:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(i.element)){i.options.width=t,i.extendedOpen();var n=i.element.offsetWidth;sf.base.setStyleAttribute(i.element,{width:sf.base.formatUnit(t)}),i.renderOverflowMode(),i.popObj&&n<i.element.offsetWidth&&i.popupRefresh(i.popObj.element,!1)}},setHeight:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.height=t,i.extendedOpen(),sf.base.setStyleAttribute(i.element,{height:sf.base.formatUnit(t)}))},setOverflowMode:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.overflowMode=t,i.extendedOpen(),i.destroyMode(),i.renderOverflowMode(),i.options.enableRtl&&sf.base.addClass([i.element],"e-rtl"),i.refreshOverflow())},setEnableRTL:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.enableRtl=t,i.extendedOpen(),t?sf.base.addClass([i.element],"e-rtl"):sf.base.removeClass([i.element],"e-rtl"),sf.base.isNullOrUndefined(i.scrollModule)||(t?sf.base.addClass([i.scrollModule.element],"e-rtl"):sf.base.removeClass([i.scrollModule.element],"e-rtl")),sf.base.isNullOrUndefined(i.popObj)||(t?sf.base.addClass([i.popObj.element],"e-rtl"):sf.base.removeClass([i.popObj.element],"e-rtl")),i.tbarAlign&&i.itemPositioning())},setScrollStep:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.scrollStep=t,i.extendedOpen(),i.scrollModule&&(i.scrollModule.scrollStep=t))},setEnableCollision:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.enableCollision=t,i.extendedOpen(),i.popObj&&(i.popObj.collision={Y:t?"flip":"none"}))},setAllowKeyboard:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.allowKeyboard=t,i.extendedOpen(),i.unwireKeyboardEvent(),t&&i.wireKeyboardEvent())},serverItemsRerender:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.element)||(n.options.items=t,n.extendedOpen(),n.destroyMode(),n.resetServerItems(i),n.serverItemsRefresh(i))},hideItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.items=t,i.refreshOverflow())},disable:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.disable(t)},refreshOverflow:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.element)||t.refreshOverflow()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.element)||t.destroy()},refresh:function(e,t){var i=window.sfBlazor.getCompInstance(e);0===t.scrollStep&&(t.scrollStep=null),sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options=t,i.destroyMode(),i.resetServerItems(!1),i.serverItemsRefresh(!1))}}}()},"./modules/sf-tooltip.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Tooltip=function(){"use strict";var e="e-popup-open",t=function(){function t(e,t,i,n){this.popupObj=null,this.isPositionUpdate=!1,this.isOffsetXUpdate=!1,this.isOffsetYUpdate=!1,this.tipClass="e-tip-bottom",this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isContiniousOpen=!1,this.isRestrictUpdate=!1,this.showTimer=0,this.hideTimer=0,this.contentTargetValue=null,this.contentEvent=null,this.contentAnimation=null,this.beforeCloseAnimation=null,this.isPopupHidden=!0,this.isMultiTarget=!1,this.mouseAction=!1,this.mouseMoveEvent=null,this.mouseMoveTarget=null,this.containerElement=null,this.isBodyContainer=!0,this.element=e,this.properties=i,this.dotnetRef=t,sf.base.isNullOrUndefined(this.element)||(this.ctrlId=this.element.id,this.element.blazor__instance=this,this.element.eventList=n)}return t.prototype.getTriggerList=function(e){return"Auto"===e&&(e=sf.base.Browser.isDevice?"Hover":"Hover Focus"),e.split(" ")},t.prototype.formatPosition=function(){var e,t;0===this.properties.position.indexOf("Top")||0===this.properties.position.indexOf("Bottom")?(e=this.properties.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.properties.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},t.prototype.getTargetList=function(e){var t=[];return null===e||""===e?t.push(this.element):(t=[].slice.call(sf.base.selectAll(e,this.element)))&&0===t.length&&(t=[].slice.call(sf.base.selectAll(e,document))),t},t.prototype.wireEvents=function(e){for(var t=this.getTriggerList(e),i=this.getTargetList(this.properties.target),n=0,s=t;n<s.length;n++)for(var o=s[n],r=0,a=i;r<a.length;r++){var l=a[r];if("Custom"===o)return;"Focus"===o&&sf.base.EventHandler.add(l,"focus",this.targetHover,this),"Click"===o&&sf.base.EventHandler.add(l,sf.base.Browser.touchStartEvent,this.targetClick,this),"Hover"===o&&(sf.base.Browser.isDevice?(this.touchModule=new sf.base.Touch(l,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),sf.base.EventHandler.add(l,sf.base.Browser.touchEndEvent,this.touchEndHandler,this)):(sf.base.EventHandler.add(l,"mouseover",this.targetHover,this),this.properties.isSticky||sf.base.EventHandler.add(l,"mouseleave",this.onMouseOut,this)))}sf.base.EventHandler.add(document,"touchend",this.touchEnd,this),sf.base.EventHandler.add(document,"scroll wheel",this.scrollHandler,this),sf.base.EventHandler.add(document,"keydown",this.keyDown,this),window.addEventListener("resize",this.onWindowResize.bind(this))},t.prototype.onWindowResize=function(){this.isHidden()||this.reposition(this.findTarget())},t.prototype.wireMouseEvents=function(e,t){this.tooltipEle&&(this.properties.isSticky||("focus"===e.type&&sf.base.EventHandler.add(t,"blur",this.onMouseOut,this),this.properties.closeDelay&&(sf.base.EventHandler.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),sf.base.EventHandler.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.properties.mouseTrail&&sf.base.EventHandler.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))},t.prototype.unwireEvents=function(e){for(var t=this.getTriggerList(e),i=this.getTargetList(this.properties.target),n=0,s=t;n<s.length;n++)for(var o=s[n],r=0,a=i;r<a.length;r++){var l=a[r];if("Custom"===o)return;"Focus"===o&&sf.base.EventHandler.remove(l,"focus",this.targetHover),"Click"===o&&sf.base.EventHandler.remove(l,sf.base.Browser.touchStartEvent,this.targetClick),"Hover"===o&&(sf.base.Browser.isDevice?(this.touchModule&&this.touchModule.destroy(),sf.base.EventHandler.remove(l,sf.base.Browser.touchEndEvent,this.touchEndHandler)):(sf.base.EventHandler.remove(l,"mouseover",this.targetHover),this.properties.isSticky||sf.base.EventHandler.remove(l,"mouseleave",this.onMouseOut)))}sf.base.EventHandler.remove(document,"touchend",this.touchEnd),sf.base.EventHandler.remove(document,"scroll wheel",this.scrollHandler),sf.base.EventHandler.remove(document,"keydown",this.keyDown),window.removeEventListener("resize",this.onWindowResize.bind(this))},t.prototype.unwireMouseEvents=function(e){if(!this.properties.isSticky){for(var t=0,i=this.getTriggerList(this.properties.opensOn);t<i.length;t++){"Focus"===i[t]&&sf.base.EventHandler.remove(e,"blur",this.onMouseOut)}this.properties.closeDelay&&(sf.base.EventHandler.remove(e,"mouseenter",this.tooltipHover),sf.base.EventHandler.remove(e,"mouseleave",this.tooltipMouseOut))}this.properties.mouseTrail&&sf.base.EventHandler.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){return sf.base.select('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},t.prototype.addDescribedBy=function(e,t){var i=(sf.base.getAttributeOrDefault(e,"aria-describedby",null)||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),sf.base.attributes(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})},t.prototype.removeDescribedBy=function(e){var t=sf.base.getAttributeOrDefault(e,"data-tooltip-id",null),i=(sf.base.getAttributeOrDefault(e,"aria-describedby",null)||"").split(/\s+/),n=i.indexOf(t);-1!==n&&i.splice(n,1),e.removeAttribute("data-tooltip-id");var s=i.join(" ").trim();s?sf.base.attributes(e,{"aria-describedby":s}):e.removeAttribute("aria-describedby")},t.prototype.clear=function(){if(this.tooltipEle&&this.isPopupHidden&&(sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],e)),this.isPopupHidden){if(this.popupObj&&this.popupObj.destroy(),this.tooltipEle){sf.base.setStyleAttribute(this.tooltipEle,{display:"none"});var t=document.getElementById(this.ctrlId+"_content_placeholder");t&&t.appendChild(this.tooltipEle),document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync("CreateTooltip",!1).catch((function(){}))}this.tooltipEle=null,this.popupObj=null}},t.prototype.tapHoldHandler=function(e){this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(e){this.properties.isSticky||this.hideTooltip(this.properties.animation.close)},t.prototype.targetClick=function(e){var t=this.properties.target?sf.base.closest(e.target,this.properties.target):this.element;sf.base.isNullOrUndefined(t)||(null===sf.base.getAttributeOrDefault(t,"data-tooltip-id",null)?this.targetHover(e):this.properties.isSticky||this.hideTooltip(this.properties.animation.close,e,t))},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),sf.base.isNullOrUndefined(sf.base.getAttributeOrDefault(e,"data-content",null))||(this.hasTitle&&sf.base.attributes(e,{title:sf.base.getAttributeOrDefault(e,"data-content",null)}),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.checkForOpen=function(e,t,i){if(null==t||sf.base.isNullOrUndefined(i))return!1;var n=this.properties.target?sf.base.closest(i.target,this.properties.target):this.element;if(null==n)return!1;var s=!0;return"Hover"===e?s=sf.base.matches(n,":hover"):"Auto"===e?s=sf.base.matches(n,":hover")||sf.base.matches(n,":focus"):"Focus"===e?s=sf.base.matches(n,":focus"):"Click"!==e&&"Custom"!==e||(s=null===sf.base.getAttributeOrDefault(n,"data-tooltip-id",null)),s},t.prototype.targetHover=function(e){if(this.checkForOpen(this.properties.opensOn,this.element,e)){var t=this.properties.target?sf.base.closest(e.target,this.properties.target):this.element;if(!sf.base.isNullOrUndefined(t)&&null===sf.base.getAttributeOrDefault(t,"data-tooltip-id",null)){if(this.isMultiTarget=this.getTargetList(this.properties.target).length>1,this.properties.target&&this.isMultiTarget&&e&&!sf.base.isNullOrUndefined(e.target)&&!sf.base.isNullOrUndefined(e.relatedTarget))if(sf.base.closest(e.target,this.properties.target)==sf.base.closest(e.relatedTarget,this.properties.target))return;for(var i=0,n=[].slice.call(sf.base.selectAll('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));i<n.length;i++){var s=n[i];this.restoreElement(s)}this.mouseAction=!1,this.showTooltip(t,this.properties.animation.open,e)}}},t.prototype.isHidden=function(){return!this.tooltipEle||!this.tooltipEle.classList.contains(e)},t.prototype.mouseMoveBeforeOpen=function(e){this.mouseMoveEvent=e},t.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&sf.base.EventHandler.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},t.prototype.showTooltip=function(e,t,i){var n=this;this.mouseAction=!1,this.clear(),clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.properties.mouseTrail&&this.properties.openDelay&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,sf.base.EventHandler.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this));this.showTimer=setTimeout((function(){n.isContiniousOpen=!sf.base.isNullOrUndefined(n.tooltipEle),n.tooltipEventArgs={type:i?i.type.toString():null,cancel:!1,target:n.getDomObject("target",e),event:i||null,hasText:n.hasText(),element:n.getDomObject("tooltipElement",n.tooltipEle),isInteracted:!sf.base.isNullOrUndefined(i),name:"beforeRender",left:i?n.getXYValue(i,"x"):null,top:i?n.getXYValue(i,"y"):null},n.contentTargetValue=e,n.contentEvent=i,n.contentAnimation=t,n.isRestrictUpdate=n.element.eventList.beforeRender&&!n.isHidden(),n.element.eventList.beforeRender?n.triggerEvent("TriggerBeforeRenderEvent",n.tooltipEventArgs):n.beforeRenderCallBack(!1)}),this.properties.openDelay)},t.prototype.triggerEvent=function(e,t){document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync(e,JSON.stringify(t)).catch((function(){}))},t.prototype.beforeRenderCallBack=function(e){e?(this.isPopupHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isPopupHidden=!1,sf.base.isNullOrUndefined(this.tooltipEle)?document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync("CreateTooltip",!0).catch((function(){})):this.isContiniousOpen&&!this.isRestrictUpdate?this.contentUpdated():this.isRestrictUpdate=!1)},t.prototype.checkCollision=function(e,t,i){var n={left:t,top:i,position:this.properties.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},s=sf.popups.isCollide(this.tooltipEle,this.checkCollideTarget(),t,i);return s.length>0&&(n.horizontal=s.indexOf("left")>=0?"Right":s.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=s.indexOf("top")>=0?"Bottom":s.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},t.prototype.checkCollideTarget=function(){return!this.properties.windowCollision&&this.properties.target?this.element:null},t.prototype.calculateElementPosition=function(e,t){return[this.isBodyContainer?e.left+t.left:e.left-this.containerElement.offsetLeft+t.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+t.top:e.top-this.containerElement.offsetTop+t.top+window.pageYOffset+this.containerElement.scrollTop]},t.prototype.collisionFlipFit=function(e,t,i){var n=this.checkCollision(e,t,i),s=n.position;this.tooltipPositionY!==n.vertical&&(s=0===this.properties.position.indexOf("Bottom")||0===this.properties.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===s.indexOf("Left")&&(n.vertical="LeftTop"===s||"LeftCenter"===s?"Top":"Bottom",s=n.vertical+"Left"),0===s.indexOf("Right")&&(n.vertical="RightTop"===s||"RightCenter"===s?"Top":"Bottom",s=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:this.getDomObject("target",e),event:null,isInteracted:!1,hasText:this.hasText(),element:this.getDomObject("tooltipElement",this.tooltipEle),collidedPosition:s,name:"beforeCollision",left:null,top:null},this.isRestrictUpdate=this.element.eventList.beforeCollision&&!this.isHidden(),this.element.eventList.beforeCollision&&this.triggerEvent("TriggerBeforeCollisionEvent",this.tooltipEventArgs);var o=n.vertical,r=n.horizontal;if(n.position!==s){var a=sf.popups.calculatePosition(e,r,o,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,s,r,o);var l=this.calculateTooltipOffset(s);l.top-=this.getOffSetPosition("TopBottom",s,this.properties.offsetY),l.left-=this.getOffSetPosition("RightLeft",s,this.properties.offsetX),n.position=s;var d=this.calculateElementPosition(a,l);n.left=d[0],n.top=d[1]}else this.adjustArrow(e,s,r,o);var h={left:n.left,top:n.top},c=sf.popups.fit(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},h).left;if(sf.base.setStyleAttribute(this.tooltipEle,{display:"block"}),this.properties.showTipPointer&&(0===s.indexOf("Bottom")||0===s.indexOf("Top"))){var p=sf.base.select(".e-arrow-tip",this.tooltipEle),u=parseInt(p.style.left,10)-(c-n.left);u<0?u=0:u+p.offsetWidth>this.tooltipEle.clientWidth&&(u=this.tooltipEle.clientWidth-p.offsetWidth),sf.base.setStyleAttribute(p,{left:u.toString()+"px"})}return sf.base.setStyleAttribute(this.tooltipEle,{display:""}),h.left=c,window.scrollX&&"BottomRight"==this.properties.position&&(h.left=this.element.getBoundingClientRect().left+window.scrollX-this.element.offsetWidth),h},t.prototype.getOffSetPosition=function(e,t,i){return-1!==e.indexOf(this.properties.position.split(/(?=[A-Z])/)[0])&&-1!==e.indexOf(t.split(/(?=[A-Z])/)[0])?2*i:0},t.prototype.hideTooltip=function(e,t,i){var n=this;clearTimeout(this.hideTimer),clearTimeout(this.showTimer);this.hideTimer=setTimeout((function(){var s;n.checkForOpen(n.properties.opensOn,n.element,t)||(n.properties.closeDelay&&n.tooltipEle&&n.isTooltipOpen||(s=t?n.properties.target?i||t.target:n.element:sf.base.select('[data-tooltip-id= "'+n.ctrlId+'_content"]',document),n.tooltipEventArgs={type:t?t.type.toString():null,cancel:!1,target:n.getDomObject("target",s),event:t||null,element:n.getDomObject("tooltipElement",n.tooltipEle),hasText:n.hasText(),isInteracted:!sf.base.isNullOrUndefined(t),name:"beforeClose",collidedPosition:null,left:t?n.getXYValue(t,"x"):null,top:t?n.getXYValue(t,"y"):null},n.beforeCloseTarget=s,n.beforeCloseAnimation=e,n.isRestrictUpdate=n.element.eventList.beforeClose&&!n.isHidden(),n.element.eventList.beforeClose?n.triggerEvent("TriggerBeforeCloseEvent",n.tooltipEventArgs):n.beforeCloseCallBack(!1)))}),this.properties.closeDelay)},t.prototype.beforeCloseCallBack=function(e){if(e)this.isPopupHidden=!1;else{var t=this;t.mouseMoveBeforeRemove();this.popupObj?this.popupHide(this.beforeCloseAnimation,this.beforeCloseTarget):setTimeout((function(){t.isMultiTarget||t.popupHide(t.beforeCloseAnimation,t.beforeCloseTarget)}),200)}},t.prototype.popupHide=function(e,t){t&&this.restoreElement(t),this.isPopupHidden=!0;var i={name:"None"===e.effect&&"Enable"===sf.base.animationMode?"FadeOut":e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};("None"===e.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode)&&(i=void 0),this.popupObj&&this.popupObj.hide(i)},t.prototype.calculateTooltipOffset=function(e){var t={top:0,left:0},i=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,s=sf.base.select(".e-arrow-tip",this.tooltipEle),o=s?s.offsetWidth:0,r=s?s.offsetHeight:0,a=this.properties.showTipPointer?0:8,l=r/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),d=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.properties.mouseTrail&&(a+=2),e){case"RightTop":t.left+=o+a,t.top-=n-l;break;case"RightCenter":t.left+=o+a,t.top-=n/2;break;case"RightBottom":t.left+=o+a,t.top-=l;break;case"BottomRight":t.top+=r+a,t.left-=d;break;case"BottomCenter":t.top+=r+a,t.left-=i/2;break;case"BottomLeft":t.top+=r+a,t.left-=i-d;break;case"LeftBottom":t.left-=o+i+a,t.top-=l;break;case"LeftCenter":t.left-=o+i+a,t.top-=n/2;break;case"LeftTop":t.left-=o+i+a,t.top-=n-l;break;case"TopLeft":t.top-=n+r+a,t.left-=i-d;break;case"TopRight":t.top-=n+r+a,t.left-=d;break;default:t.top-=n+r+a,t.left-=i/2}return t.left+=this.properties.offsetX,t.top+=this.properties.offsetY,t},t.prototype.setTipClass=function(e){0===e.indexOf("Right")?this.tipClass="e-tip-left":0===e.indexOf("Bottom")?this.tipClass="e-tip-top":0===e.indexOf("Left")?this.tipClass="e-tip-right":this.tipClass="e-tip-bottom"},t.prototype.updateTipPosition=function(e){var t=sf.base.selectAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner",this.tooltipEle),i=["e-tip-bottom","e-tip-top","e-tip-left","e-tip-right"];sf.base.removeClass(t,i),this.setTipClass(e),sf.base.addClass(t,this.tipClass)},t.prototype.adjustArrow=function(e,t,i,n){if(!1!==this.properties.showTipPointer){var s,o;this.updateTipPosition(t),sf.base.setStyleAttribute(this.tooltipEle,{display:"block"});var r,a=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,d=sf.base.select(".e-arrow-tip",this.tooltipEle),h=sf.base.select(".e-arrow-tip-inner",this.tooltipEle),c=d.offsetWidth,p=d.offsetHeight;if(sf.base.setStyleAttribute(this.tooltipEle,{display:""}),"e-tip-bottom"===this.tipClass||"e-tip-top"===this.tipClass){if("e-tip-bottom"===this.tipClass?(o="99.9%",sf.base.setStyleAttribute(h,{top:"-"+(p-2)+"px"})):(o=-(p-1)+"px",sf.base.setStyleAttribute(h,{top:"-"+(p-6)+"px"})),e)s=(r="Center"!==i||a>e.offsetWidth||this.properties.mouseTrail)&&"Left"===i||!r&&"End"===this.properties.tipPointerPosition?a-c-2+"px":r&&"Right"===i||!r&&"Start"===this.properties.tipPointerPosition?"2px":!r||"End"!==this.properties.tipPointerPosition&&"Start"!==this.properties.tipPointerPosition?a/2-c/2+"px":"End"===this.properties.tipPointerPosition?e.offsetWidth+(this.tooltipEle.offsetWidth-e.offsetWidth)/2-c/2-2+"px":(this.tooltipEle.offsetWidth-e.offsetWidth)/2-c/2+2+"px"}else"e-tip-right"===this.tipClass?(s="99.9%",sf.base.setStyleAttribute(h,{left:"-"+(c-2)+"px"})):(s=-(c-1)+"px",sf.base.setStyleAttribute(h,{left:c-2-c+"px"})),o=(r="Center"!==n||l>e.offsetHeight||this.properties.mouseTrail)&&"Top"===n||!r&&"End"===this.properties.tipPointerPosition?l-p-2+"px":r&&"Bottom"===n||!r&&"Start"===this.properties.tipPointerPosition?"2px":l/2-p/2+"px";window.scrollX&&"BottomRight"==this.properties.position&&(s=this.element.offsetLeft+"px"),sf.base.setStyleAttribute(d,{top:o,left:s})}},t.prototype.tooltipHover=function(e){this.tooltipEle&&(this.isTooltipOpen=!0)},t.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.properties.animation.close,e,this.findTarget())},t.prototype.onMouseOut=function(e){var t=e.relatedTarget;if(this.mouseAction=!0,t&&!this.properties.mouseTrail){var i=sf.base.closest(t,".e-tooltip-wrap.e-lib.e-popup");i?sf.base.EventHandler.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.properties.animation.close,e,this.findTarget()),0===this.properties.closeDelay&&this.clear())}else this.hideTooltip(this.properties.animation.close,e,this.findTarget()),this.clear()},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.properties.animation.close,e,this.findTarget()),sf.base.EventHandler.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onMouseMove=function(t){if(this.tooltipEle){var i=0,n=0;t.type.indexOf("touch")>-1?(t.preventDefault(),i=t.touches[0].pageX,n=t.touches[0].pageY):(i=t.pageX,n=t.pageY),sf.base.Animation.stop(this.tooltipEle),sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],e),this.adjustArrow(t.target,this.properties.position,this.tooltipPositionX,this.tooltipPositionY);var s=this.calculateTooltipOffset(this.properties.position),o=i+s.left+this.properties.offsetX,r=n+s.top+this.properties.offsetY,a=this.checkCollision(t.target,o,r);if(this.tooltipPositionX!==a.horizontal||this.tooltipPositionY!==a.vertical){var l=0===this.properties.position.indexOf("Bottom")||0===this.properties.position.indexOf("Top")?a.vertical+a.horizontal:a.horizontal+a.vertical;a.position=l,this.adjustArrow(t.target,a.position,a.horizontal,a.vertical);var d=this.calculateTooltipOffset(a.position);a.left=i+d.left-this.properties.offsetX,a.top=n+d.top-this.properties.offsetY}sf.base.setStyleAttribute(this.tooltipEle,{left:a.left+"px",top:a.top+"px"})}},t.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.hideTooltip(this.properties.animation.close)},t.prototype.touchEnd=function(e){this.tooltipEle&&null===sf.base.closest(e.target,".e-tooltip")&&!this.properties.isSticky&&this.hideTooltip(this.properties.animation.close)},t.prototype.scrollHandler=function(e){this.tooltipEle&&(sf.base.closest(e.target,".e-tooltip-wrap.e-lib.e-popup")||this.hideTooltip(this.properties.animation.close))},t.prototype.renderContent=function(e){var t=sf.base.getAttributeOrDefault(e,"title",null),i=sf.base.getAttributeOrDefault(e,"data-title",null);(!sf.base.isNullOrUndefined(t)&&e?(sf.base.attributes(e,{"data-content":t}),this.hasTitle=!0,this.isMultiTarget=!0,e.removeAttribute("title")):!sf.base.isNullOrUndefined(i)&&e&&(sf.base.attributes(e,{"data-content":i}),this.isMultiTarget=!0),this.properties.content)||(sf.base.select(".e-tip-content",this.tooltipEle).innerText=e.getAttribute("data-content"))},t.prototype.setHeigthWidth=function(e,t,i){this.tooltipEle&&sf.base.setStyleAttribute(this.tooltipEle,{height:t,width:e}),i&&"auto"!==this.tooltipEle.style.width&&(this.tooltipEle.style.maxWidth=e)},t.prototype.appendContainer=function(){"string"==typeof this.properties.container&&("body"===this.properties.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=sf.base.select(this.properties.container,document),sf.base.addClass([this.containerElement],"e-tooltip-popup-container"))),this.containerElement.appendChild(this.tooltipEle)},t.prototype.contentUpdated=function(){if(sf.base.isNullOrUndefined(this.tooltipEle)){if(this.ctrlId=this.element.id,this.tooltipEle=sf.base.select("#"+this.ctrlId+"_content",document),this.tooltipEle&&(sf.base.setStyleAttribute(this.tooltipEle,{position:"absolute"}),this.setHeigthWidth(sf.base.formatUnit(this.properties.width),sf.base.formatUnit(this.properties.height),this.contentTargetValue),this.contentTargetValue)){sf.base.Browser.isDevice&&sf.base.addClass([this.tooltipEle],"e-bigger"),this.appendContainer(),sf.base.removeClass([this.tooltipEle],"e-hidden"),this.addDescribedBy(this.contentTargetValue,this.ctrlId+"_content"),this.renderContent(this.contentTargetValue),sf.base.addClass([this.tooltipEle],e),this.renderPopup(this.contentTargetValue);var t=this.properties.position;this.adjustArrow(this.contentTargetValue,t,this.tooltipPositionX,this.tooltipPositionY),sf.base.Animation.stop(this.tooltipEle),this.reposition(this.contentTargetValue),this.afterContentRender()}}else{if(!this.isContiniousOpen||this.isRestrictUpdate)return;if(sf.base.addClass([this.tooltipEle],e),document.body.appendChild(this.tooltipEle),this.contentTargetValue){this.renderPopup(this.contentTargetValue);t=this.properties.position;this.adjustArrow(this.contentTargetValue,t,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(this.contentTargetValue,this.ctrlId+"_content"),this.renderContent(this.contentTargetValue),sf.base.Animation.stop(this.tooltipEle),this.reposition(this.contentTargetValue),this.afterContentRender()}}},t.prototype.afterContentRender=function(){sf.base.removeClass([this.tooltipEle],e),sf.base.addClass([this.tooltipEle],"e-popup-close"),this.tooltipEventArgs={type:this.contentEvent?this.contentEvent.type.toString():null,isInteracted:!sf.base.isNullOrUndefined(this.contentEvent),hasText:this.hasText(),target:this.getDomObject("target",this.contentTargetValue),name:"beforeOpen",cancel:!1,event:this.contentEvent?this.contentEvent:null,element:this.getDomObject("tooltipElement",this.tooltipEle),left:this.contentEvent?this.getXYValue(this.contentEvent,"x"):null,top:this.contentEvent?this.getXYValue(this.contentEvent,"y"):null},this.isRestrictUpdate=this.element.eventList.beforeOpen&&!this.isHidden(),this.element.eventList.beforeOpen?this.triggerEvent("TriggerBeforeOpenEvent",this.tooltipEventArgs):this.beforeOpenCallBack(!1)},t.prototype.beforeOpenCallBack=function(e){if(e)this.isPopupHidden=!0,this.contentTargetValue&&this.popupHide(this.properties.animation.close,this.contentTargetValue),this.mouseMoveBeforeRemove();else{if(sf.base.isNullOrUndefined(this.contentAnimation))return;var t={name:"None"===this.contentAnimation.effect&&"Enable"===sf.base.animationMode?"FadeIn":this.contentAnimation.effect,duration:this.contentAnimation.duration,delay:this.contentAnimation.delay,timingFunction:"easeOut"};("None"===this.contentAnimation.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode)&&(t=void 0),this.popupObj&&(this.popupObj.show(t,this.contentTargetValue),this.properties.openDelay&&this.properties.mouseTrail&&this.mouseMoveEvent&&this.onMouseMove(this.mouseMoveEvent))}this.contentEvent&&this.wireMouseEvents(this.contentEvent,this.contentTargetValue),this.contentTargetValue=this.contentEvent=this.contentAnimation=null},t.prototype.reposition=function(e){if(null!==e&&this.tooltipEle){var t=this.getTooltipPosition(e);this.popupObj&&(this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind())}},t.prototype.renderPopup=function(e){var t=this.properties.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new sf.popups.Popup(this.tooltipEle,{height:this.properties.height,width:this.properties.width,position:{X:t.left,Y:t.top},enableRtl:this.properties.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.openPopupHandler=function(){this.tooltipEle&&this.tooltipEle.classList.contains("e-popup-close")&&this.isMultiTarget&&(sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],e)),this.properties.mouseTrail||this.reposition(this.findTarget()),this.tooltipEventArgs.name="Opened",this.isRestrictUpdate=this.element.eventList.opened&&!this.isHidden(),this.element.eventList.opened&&this.triggerEvent("TriggerOpenedEvent",this.tooltipEventArgs),this.mouseAction&&!sf.base.isNullOrUndefined(this.tooltipEle)&&this.hideTooltip(this.properties.animation.close)},t.prototype.closePopupHandler=function(){this.clear(),this.tooltipEventArgs.name="Closed",this.isRestrictUpdate=this.element.eventList.closed&&!this.isHidden(),this.element.eventList.closed&&this.triggerEvent("TriggerClosedEvent",this.tooltipEventArgs)},t.prototype.getTooltipPosition=function(e){sf.base.setStyleAttribute(this.tooltipEle,{display:"block"});var t=sf.popups.calculatePosition(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),i=this.calculateTooltipOffset(this.properties.position),n=this.calculateElementPosition(t,i),s=n[0],o=n[1],r=this.collisionFlipFit(e,s,o);return sf.base.setStyleAttribute(this.tooltipEle,{display:""}),r},t.prototype.getDomObject=function(e,t){return t?window.sfBlazor.getDomObject(e,t):null},t.prototype.hasText=function(){return!!this.tooltipEle&&""!==this.tooltipEle.innerText.trim()},t.prototype.getXYValue=function(e,t){var i,n=e.changedTouches;if(!(i="x"===t?n?n[0].clientX:e.clientX:n?n[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var s=e.target.getBoundingClientRect();i=s?"x"===t?s.left:s.top:null}return Math.ceil(i)},t.prototype.destroy=function(){if(this.tooltipEle){var e=sf.base.select("#"+this.ctrlId+"_content_placeholder",document);e&&e.appendChild(this.tooltipEle)}this.popupObj&&this.popupObj.destroy(),sf.base.removeClass([this.element],"e-tooltip"),this.unwireEvents(this.properties.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},t}();return{wireEvents:function(e,i,n,s){this.updateAnimation(n.animation),new t(e,i,n,s),this.isValid(e)&&(e.blazor__instance.formatPosition(),e.blazor__instance.wireEvents(n.opensOn),sf.base.removeClass([e],["e-blazor-hidden"]))},contentUpdated:function(e){this.isValid(e)&&e.blazor__instance.contentUpdated()},updateAnimation:function(e){e.open.duration=e.open.duration?e.open.duration:void 0,e.close.duration=e.close.duration?e.close.duration:void 0},beforeRenderCallBack:function(e,t){this.isValid(e)&&e.blazor__instance.beforeRenderCallBack(t)},beforeOpenCallBack:function(e,t){this.isValid(e)&&e.blazor__instance.beforeOpenCallBack(t)},beforeCloseCallBack:function(e,t){this.isValid(e)&&e.blazor__instance.beforeCloseCallBack(t)},showTooltip:function(e,t,i,n){if(this.isValid(e)){if(null!==n&&""!==n){var s=sf.base.select(n,e.blazor__instance.element),o=sf.base.select(n,document);s?t=s:o&&(t=o)}e.blazor__instance.showTooltip(t,i,null)}},hideTooltip:function(e,t){this.isValid(e)&&e.blazor__instance.hideTooltip(t)},destroy:function(e){this.isValid(e)&&e.blazor__instance.destroy()},refresh:function(e){if(this.isValid(e)){var t=e.blazor__instance;t.isPopupHidden||t.hideTooltip(t.properties.animation.close),t.unwireEvents(t.properties.opensOn),t.wireEvents(t.properties.opensOn)}},refreshPosition:function(e,t,i){if(this.isValid(e)){var n=e.blazor__instance;null===t&&(t=null!==i&&""!==i?sf.base.select(i,n.element):n.element),n.reposition(t)}},updateProperties:function(e,t,i){if(this.isValid(e)){var n=e.blazor__instance,s=e.blazor__instance.properties;if(n.isRestrictUpdate=!0,i.animation&&this.updateAnimation(i.animation),this.updateAnimation(t.animation),i.target||i.opensOn||!sf.base.isNullOrUndefined(i.isSticky))n.unwireEvents(n.properties.opensOn),n.properties=t,n.wireEvents(n.properties.opensOn),n.formatPosition();else{var o=n.findTarget();if(i.container&&(sf.base.isNullOrUndefined(this.containerElement)||sf.base.removeClass([this.containerElement],"e-tooltip-popup-container"),n.properties=t,n.tooltipEle&&o&&(n.appendContainer(),n.reposition(o))),i.height||i.width?n.setHeigthWidth(sf.base.formatUnit(i.width),sf.base.formatUnit(i.height),o):i.position?n.isPositionUpdate=!0:i.offsetX?n.isOffsetXUpdate=!0:i.offsetX&&(n.isOffsetYUpdate=!0),n.tooltipEle&&n.properties.showTipPointer){if(n.isPositionUpdate){var r=sf.base.select(".e-arrow-tip-inner",n.tooltipEle),a=sf.base.select(".e-arrow-tip",n.tooltipEle);sf.base.removeClass([a],[n.tipClass]),n.properties=t,n.formatPosition(),n.setTipClass(i.position),sf.base.addClass([a],[n.tipClass]),sf.base.setStyleAttribute(r,{top:null,left:null})}if(n.isOffsetXUpdate){var l=parseInt(n.tooltipEle.style.left,10)+(i.offsetX-s.offsetX);sf.base.setStyleAttribute(n.tooltipEle,{left:l.toString()+"px"})}if(n.isOffsetYUpdate){l=parseInt(n.tooltipEle.style.top,10)+(i.offsetY-s.offsetY);sf.base.setStyleAttribute(n.tooltipEle,{top:l.toString()+"px"})}n.properties=t,n.reposition(o)}else n.properties=t,n.isPositionUpdate&&n.formatPosition();n.isOffsetYUpdate=!1,n.isOffsetXUpdate=!1,n.isPositionUpdate=!1,n.isRestrictUpdate=!1}}},isValid:function(e){return!(!e||!e.blazor__instance)}}}()},"./modules/sf-treegrid.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TreeGrid=function(){"use strict";var e=function(){function e(e){this.treeCopyContent="",this.copiedUIdCollection=[],this.parent=e,this.gridClipboard=this.parent.grid.clipboardModule}return e.prototype.copy=function(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.gridClipboard.clipBoardTextArea.blur()),this.gridClipboard.isSelect&&(window.getSelection().removeAllRanges(),this.gridClipboard.isSelect=!1)},e.prototype.setCopyData=function(e){if(""===window.getSelection().toString()){this.gridClipboard.clipBoardTextArea.value=this.gridClipboard.copyContent="";var t=this.parent.grid.getRows();if("Cell"!==this.parent.grid.options.selectionMode){for(var i=this.parent.grid.getSelectedRowIndexes().sort((function(e,t){return e-t})),n=0;n<i.length;n++)if(n>0&&(this.treeCopyContent+="\n"),!t[i[n]].classList.contains("e-summaryrow")){var s=[].slice.call(t[i[n]].querySelectorAll(".e-rowcell")),o=t[i[n]].getAttribute("data-uid");-1===this.copiedUIdCollection.indexOf(o)&&("Parent"!==this.parent.options.copyHierarchyMode&&"Both"!==this.parent.options.copyHierarchyMode||this.parentContentData(i[n],t,e,n),this.gridClipboard.getCopyData(s,!1,"\t",e),this.treeCopyContent+=this.gridClipboard.copyContent,this.copiedUIdCollection.push(o),this.gridClipboard.copyContent="","Child"!==this.parent.options.copyHierarchyMode&&"Both"!==this.parent.options.copyHierarchyMode||this.childContentData(i[n],t,e))}if(e){var r=[];for(n=0;n<this.parent.grid.getVisibleColumns().length;n++)r[n]=this.parent.grid.getVisibleColumns()[n].headerText;this.gridClipboard.getCopyData(r,!1,"\t",e),this.treeCopyContent=this.gridClipboard.copyContent+"\n"+this.treeCopyContent}this.gridClipboard.clipBoardTextArea.value=this.gridClipboard.copyContent=this.treeCopyContent,sf.base.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.gridClipboard.clipBoardTextArea.setSelectionRange(0,this.gridClipboard.clipBoardTextArea.value.length):(window.getSelection().removeAllRanges(),this.gridClipboard.clipBoardTextArea.select()),this.gridClipboard.isSelect=!0,this.copiedUIdCollection=[],this.treeCopyContent=""}}},e.prototype.parentContentData=function(e,t,i,n){var s=this.parent.options.allowRowDragAndDrop&&sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID)?this.parent.options.treeColumnIndex+1:this.parent.options.treeColumnIndex,o=t[e].cells[s].className.match(/index(\d+)|level(\d+)/g),r=o[0].match(/\d+/)[0],a=+o[1].match(/\d+/)[0],l=a?a-1:0,d=t.filter((function(e){return e.cells[s].classList.contains("e-gridrowindex"+(parseInt(r)-(l>0?a-l:l))+"level"+l)}))[0];if(!sf.base.isNullOrUndefined(d)&&d.rowIndex!=e)for(var h=l,c=d.getAttribute("data-uid"),p=0;p<h+1;p++)for(var u=0;u<t.length;u++){var f=t[u].getAttribute("data-uid");if(f===c){e=u;var m=[].slice.call(t[e].querySelectorAll(".e-rowcell"));if(-1===this.copiedUIdCollection.indexOf(f)){this.gridClipboard.getCopyData(m,!1,"\t",i),this.treeCopyContent=n>0?this.treeCopyContent+this.gridClipboard.copyContent+"\n":this.gridClipboard.copyContent+"\n"+this.treeCopyContent,this.copiedUIdCollection.push(f),this.gridClipboard.copyContent="";break}}}},e.prototype.childContentData=function(e,t,i){var n=this.parent.options.allowRowDragAndDrop&&sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID)?this.parent.options.treeColumnIndex+1:this.parent.options.treeColumnIndex,s=t[e].cells[n].className.match(/index(\d+)|level(\d+)/g),o=s[0].match(/\d+/)[0],r=+s[1].match(/\d+/)[0]+1,a=t.filter((function(e){return e.cells[n].classList.contains("e-gridrowindex"+o+"level"+r)}));if(a.length)for(var l=0;l<a.length;l++)for(var d=0;d<t.length;d++)if(!sf.base.isNullOrUndefined(a[l].getAttribute("data-uid"))&&t[d].getAttribute("data-uid")===a[l].getAttribute("data-uid")){if(!sf.base.isNullOrUndefined(t[d])&&!t[d].classList.contains("e-summaryrow")){var h=[].slice.call(t[d].querySelectorAll(".e-rowcell")),c=t[d].getAttribute("data-uid");-1===this.copiedUIdCollection.indexOf(c)&&(this.gridClipboard.getCopyData(h,!1,"\t",i),this.treeCopyContent+="\n"+this.gridClipboard.copyContent,this.gridClipboard.copyContent="",this.copiedUIdCollection.push(c),this.childContentData(d,t,i))}break}},e}();function t(e,t,i){for(var n=e;n&&!(i?n.id===t:n.classList.contains(t));)n=n.parentElement;return n}var i=function(){function e(e){var i=this;this.draggedRows=[],this.selectedRows=[],this.canDrop=!0,this.rowDragStart=function(e){i.gridDragStart.apply(i.parent.grid,[e]),i.startedRow=i.parent.grid.rowDragAndDropModule.startedRow;var t=i.parent.grid.getSelectedRowIndexes(),n=parseInt(i.startedRow.getAttribute("data-rowindex"),10);i.selectedRows=i.parent.grid.getSelectedRows(),0!==i.selectedRows.length&&0!==t.length||(i.selectedRows.push(i.startedRow),t.push(n));for(var s=0;s<t.length;s++)i.draggedRows.push(i.parent.grid.getRows()[t[s]])},this.rowDraging=function(e){i.gridDrag.apply(i.parent.grid,[e]),i.dragTarget=i.parent.grid.rowDragAndDropModule.dragTarget;var n=i.parent,s=i.parent.element.querySelector(".e-cloneproperties");s.style.cursor="";var o,r=e.target?sf.base.closest(e.target,"tr"):null,a=r?r.rowIndex:-1,l=n.grid.getRows()[a];(i.removeErrorElem(),i.canDrop=!0,-1!==a?i.ensuredropPosition(i.draggedRows,l):(i.canDrop=!1,i.addErrorElem()),!n.options.rowDropTargetID&&i.canDrop&&n.rowDragAndDropModule.updateIcon(i.selectedRows,a,e),n.options.rowDropTargetID)&&((o=t(e.target,"e-treegrid"))&&o.id===i.parent.options.rowDropTargetID&&o.blazor_instance.rowDragAndDropModule.updateIcon(i.selectedRows,a,e));e.target&&sf.base.closest(e.target,"#"+n.options.rowDropTargetID)&&((o=t(e.target,"e-treegrid"))||(s.style.cursor="default"))},this.rowDropped=function(e){var n=i.getElementFromPosition(e.helper,e.event),s=n&&!n.classList.contains("e-dlg-overlay")?n:e.target;i.parent.grid.element.classList.remove("e-rowdrag");var o=document.getElementById(i.parent.options.rowDropTargetID);if(i.parent.options.allowRowDragAndDrop&&i.parent.options.rowDropTargetID&&!t(s,"e-treegrid")){var r=s.classList.value,a=s.id,l=parseInt(i.startedRow.getAttribute("data-rowindex"),10),d="topSegment"===i.dropPosition?"Above":"bottomSegment"===i.dropPosition?"Below":"middleSegment"===i.dropPosition?"Child":"Invalid";i.parent.dotNetRef.invokeMethodAsync("ReorderRows",l,0,"add",!1,r,a,null,!0,d)}if(i.parent.options.rowDropTargetID&&o&&o.blazor_instance&&o.blazor_instance.getContent().classList.remove("e-allowRowDrop"),!t(s,"e-gridcontent"))return i.dragTarget=null,sf.base.remove(e.helper),void i.updateRowDrop();var h=i.parent;if(h.options.rowDropTargetID?(e.target&&sf.base.closest(e.target,"#"+h.options.rowDropTargetID)||t(e.target,"e-treegrid")&&t(e.target,"e-treegrid").id===h.options.rowDropTargetID)&&sf.base.setValue("dropPosition",i.dropPosition,e):t(e.target,"e-content")&&(i.parent.element.querySelector(".e-errorelem")&&(i.dropPosition="Invalid"),sf.base.setValue("dropPosition",i.dropPosition,e),sf.base.isNullOrUndefined(h.getHeaderContent().querySelector(".e-firstrow-border"))||h.getHeaderContent().querySelector(".e-firstrow-border").remove()),i.updateRowDrop(),i.parent.options.allowRowDragAndDrop&&!i.parent.options.rowDropTargetID){i.parent.grid.rowDragAndDropModule.stopTimer(),i.parent.grid.getContent().classList.remove("e-grid-relative"),i.parent.grid.rowDragAndDropModule.removeBorder(n);var c=i.parent.grid.element.querySelector(".e-dragstartrow");c&&c.classList.remove("e-dragstartrow");var p=i.dragTarget,u=s.classList.value,f=s.id,m=parseInt(i.startedRow.getAttribute("data-rowindex"),10),g="topSegment"===i.dropPosition?"Above":"bottomSegment"===i.dropPosition?"Below":"middleSegment"===i.dropPosition?"Child":"Invalid";"Invalid"!==g&&setTimeout((function(){i.parent.dotNetRef.invokeMethodAsync("ReorderRows",m,p,"delete",!0,u,f,null,!1,g)}),10),i.dragTarget=null,i.draggedRows=[]}},this.drop=function(e){i.treeGridDrop({target:e.target,droppedElement:e.droppedElement}),sf.base.remove(e.droppedElement)},this.parent=e,this.parent.options.allowRowDragAndDrop&&(this.gridDrag=this.parent.grid.rowDragAndDropModule.drag,this.gridDragStart=this.parent.grid.rowDragAndDropModule.dragStart,this.parent.grid.rowDragAndDropModule.draggable.drag=this.rowDraging,this.parent.grid.rowDragAndDropModule.draggable.dragStop=this.rowDropped,this.parent.grid.rowDragAndDropModule.draggable.dragStart=this.rowDragStart,this.parent.grid.rowDragAndDropModule.droppable.drop=this.drop)}return e.prototype.updateRowDrop=function(){this.removetopOrBottomBorder(),this.removeChildBorder(),sf.base.isNullOrUndefined(this.parent.element.getElementsByClassName("e-firstrow-border")[0])?sf.base.isNullOrUndefined(this.parent.element.getElementsByClassName("e-lastrow-border")[0])||this.parent.element.getElementsByClassName("e-lastrow-border")[0].remove():this.parent.element.getElementsByClassName("e-firstrow-border")[0].remove()},e.prototype.removeFirstrowBorder=function(e){var t="bottomSegment"===this.dropPosition;this.parent.element.getElementsByClassName("e-firstrow-border").length>0&&e&&(0!==e.rowIndex||t)&&this.parent.element.getElementsByClassName("e-firstrow-border")[0].remove()},e.prototype.removeLastrowBorder=function(e){var t=e&&(e.classList.contains("e-emptyrow")||e.classList.contains("e-columnheader")),i=e&&!t&&this.parent.getRows()[this.parent.getRows().length-1].getAttribute("data-uid")!==e.getAttribute("data-uid"),n=i||"topSegment"===this.dropPosition;this.parent.element.getElementsByClassName("e-lastrow-border").length>0&&e&&(i||n)&&this.parent.element.getElementsByClassName("e-lastrow-border")[0].remove()},e.prototype.updateIcon=function(e,i,n){var s=n.target?sf.base.closest(n.target,"tr"):null;this.dropPosition=void 0;var o=0;this.removeFirstrowBorder(s),this.removeLastrowBorder(s);for(var r=0;r<this.selectedRows.length;r++)(sf.base.isNullOrUndefined(s)||s.getAttribute("data-uid")!==this.selectedRows[r].getAttribute("data-uid"))&&t(n.target,"e-gridcontent")||(this.dropPosition="Invalid",this.addErrorElem());var a=this.parent,l=0,d=document.getElementById(a.element.id+"_gridcontrol_toolbarItems"),h=d?d.offsetHeight:0,c=this.getOffset(a.element),p=a.getHeaderContent().offsetHeight+c.top+h,u=a.grid.scrollModule.content.scrollTop;sf.base.isNullOrUndefined(s)||(o=s.offsetTop-u);var f=((l=a.options.allowTextWrap?e[0].offsetHeight:o+p+0)+e[0].offsetHeight-l)/3,m=l+f,g=m+f,v=g+f,b=(c.left,n.event),y=sf.base.isNullOrUndefined(b.pageY)?n.event.changedTouches[0].clientY:b.pageY,w=y<=m,C=y>m&&y<=g,S=y>g&&y<=v;if(w||C||S){if(w&&"Invalid"!==this.dropPosition&&(this.removeChildBorder(),this.dropPosition="topSegment",this.removetopOrBottomBorder(),this.addFirstrowBorder(s),this.removeErrorElem(),this.removeLastrowBorder(s),this.topOrBottomBorder(n.target)),C&&"Invalid"!==this.dropPosition){this.removetopOrBottomBorder();var E,x=sf.base.closest(n.target,"tr");(E=sf.base.isNullOrUndefined(x)?[]:[].slice.call(x.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))).length>0&&this.addRemoveClasses(E,!0,"e-childborder"),this.addLastRowborder(s),this.addFirstrowBorder(s),this.dropPosition="middleSegment"}S&&"Invalid"!==this.dropPosition&&(this.removeErrorElem(),this.removetopOrBottomBorder(),this.removeChildBorder(),this.dropPosition="bottomSegment",this.addLastRowborder(s),this.removeFirstrowBorder(s),this.topOrBottomBorder(n.target))}return this.dropPosition},e.prototype.removeChildBorder=function(){var e;(e=[].slice.call(this.parent.element.querySelectorAll(".e-childborder"))).length>0&&this.addRemoveClasses(e,!1,"e-childborder")},e.prototype.addFirstrowBorder=function(e){var t=this.parent.element,i=this.parent;if(e&&0===e.rowIndex&&!e.classList.contains("e-emptyrow")){var n=sf.base.createElement("div",{className:"e-firstrow-border"}),s=this.parent.getHeaderContent(),o=0;i.options.toolbar&&(o=document.getElementById(i.element.id+"_gridcontrol_toolbarItems").offsetHeight);var r=!sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID);r&&(n.style.top=this.parent.grid.element.getElementsByClassName("e-gridheader")[0].offsetHeight+o+"px"),n.style.width=r?t.offsetWidth+"px":t.offsetWidth-this.getScrollWidth()+"px",s.querySelectorAll(".e-firstrow-border").length||s.appendChild(n)}},e.prototype.addLastRowborder=function(e){var t=e&&(e.classList.contains("e-emptyrow")||e.classList.contains("e-columnheader"));if(e&&!t&&this.parent.getRows()[this.parent.getRows().length-1].getAttribute("data-uid")===e.getAttribute("data-uid")){var i=sf.base.createElement("div",{className:"e-lastrow-border"}),n=this.parent.getContent();i.style.width=this.parent.element.offsetWidth-this.getScrollWidth()+"px",n.querySelectorAll(".e-lastrow-border").length||(n.classList.add("e-treegrid-relative"),n.appendChild(i),i.style.bottom=this.getScrollWidth()+"px")}},e.prototype.getScrollWidth=function(){var e=this.parent.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?this.parent.grid.Scroll.getScrollBarWidth():0},e.prototype.addErrorElem=function(){var e=document.getElementsByClassName("e-cloneproperties")[0];if(!e.querySelectorAll(".e-errorelem").length&&!this.parent.options.rowDropTargetID){var t=document.createElement("div");sf.base.classList(t,["e-errorcontainer"],[]),sf.base.classList(t,["e-icons","e-errorelem"],[]);var i=e.querySelector(".errorValue"),n=e.querySelector(".e-rowcell").innerHTML;i&&(n=i.innerHTML,i.parentNode.removeChild(i)),e.querySelector(".e-rowcell").innerHTML="";var s=document.createElement("span");s.className="errorValue",s.style.paddingLeft="16px",s.innerHTML=n,e.querySelector(".e-rowcell").appendChild(t),e.querySelector(".e-rowcell").appendChild(s)}},e.prototype.removeErrorElem=function(){var e=document.querySelector(".e-errorelem");e&&e.remove()},e.prototype.topOrBottomBorder=function(e){var t,i=sf.base.closest(e,"tr");(t=i?[].slice.call(i.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse")):[]).length&&("topSegment"===this.dropPosition&&(this.addRemoveClasses(t,!0,"e-droptop"),this.parent.element.getElementsByClassName("e-lastrow-dragborder").length>0&&this.parent.element.getElementsByClassName("e-lastrow-dragborder")[0].remove()),"bottomSegment"===this.dropPosition&&this.addRemoveClasses(t,!0,"e-dropbottom"))},e.prototype.removetopOrBottomBorder=function(){var e;(e=[].slice.call(this.parent.element.querySelectorAll(".e-dropbottom, .e-droptop"))).length&&(this.addRemoveClasses(e,!1,"e-dropbottom"),this.addRemoveClasses(e,!1,"e-droptop"))},e.prototype.addRemoveClasses=function(e,t,i){for(var n=0,s=e.length;n<s;n++)t?e[n].classList.add(i):e[n].classList.remove(i)},e.prototype.getOffset=function(e){var t=e.getBoundingClientRect(),i=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||i.scrollTop,o=window.pageXOffset||n.scrollLeft||i.scrollLeft,r=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,l=t.top+s-r,d=t.left+o-a;return{top:Math.round(l),left:Math.round(d)}},e.prototype.treeGridDrop=function(e){var t,i=this.parent,n=sf.base.closest(e.target,"tr");if(!("true"!==e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.parentElement.id===i.element.id||"true"===e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.parentElement.id!==i.element.id)&&(e.droppedElement.parentElement.parentElement.id!==i.element.id&&(t=e.droppedElement.parentElement.parentElement.blazor_instance),t.element.id===i.element.id||t.options.rowDropTargetID===i.element.id)){var s=this.getTargetIdx(n);isNaN(s)&&(s=0),i.options.allowPaging&&(s=s+i.options.currentPage*i.options.pageSize-i.options.pageSize),this.removetopOrBottomBorder(),this.removeChildBorder();var o=e.target.classList.value,r=e.target.id,a="topSegment"===this.dropPosition?"Above":"bottomSegment"===this.dropPosition?"Below":"middleSegment"===this.dropPosition?"Child":"Invalid";i.dotNetRef.invokeMethodAsync("ReorderRows",0,s,"add",!1,o,r,t.dotNetRef,!1,a),t.dotNetRef.invokeMethodAsync("ReorderRows",0,s,"delete",!1,o,r,null,!1,a)}},e.prototype.getTargetIdx=function(e){return e?parseInt(e.getAttribute("data-rowindex"),10):0},e.prototype.getElementFromPosition=function(e,t){var i=this.getPosition(t);e.style.display="none";var n=document.elementFromPoint(i.x,i.y);return e.style.display="",n},e.prototype.ensuredropPosition=function(e,t){var i=this,n=this.parent.grid.getRows(),s=this.parent.options.allowRowDragAndDrop&&sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID)?this.parent.options.treeColumnIndex+1:this.parent.options.treeColumnIndex;e.filter((function(o){for(var r=/index(\d+)|level(\d+)/g,a=+o.cells[s].className.match(r)[1].match(/\d+/)[0],l=!1,d=new Array,h=0;h<n.length;h++)if(n[h]==e[0]&&(l=!0),l&&n[h]!=e[0]){var c=+n[h].cells[s].className.match(r)[1].match(/\d+/)[0];if(!(c!=a&&c>a))break;d.push(n[h])}if(d.length){if(-1!==d.map((function(e){return e.getAttribute("data-uid")})).indexOf(t.getAttribute("data-uid")))return i.dropPosition="Invalid",i.addErrorElem(),void(i.canDrop=!1);i.ensuredropPosition(d,t)}}))},e.prototype.getPosition=function(e){var t={};return t.x=sf.base.isNullOrUndefined(e.clientX)?e.changedTouches[0].clientX:e.clientX,t.y=sf.base.isNullOrUndefined(e.clientY)?e.changedTouches[0].clientY:e.clientY,t},e}(),n=function(){function e(e,t){this.parent=t,this.dotNetRef=e}return e.prototype.renderHeaderCheckbox=function(e,t){var i=sf.base.createElement("div",{className:"e-checkbox-wrapper e-css e-hierarchycheckbox"}),n=sf.base.createElement("input",{className:"e-treeselectall",attrs:{type:"checkbox"}});i.appendChild(n);var s=sf.base.createElement("span",{className:"e-frame e-icons",styles:"width: 18px;"});i.appendChild(s),s.addEventListener("click",this.headerSelect.bind(this));var o=sf.base.createElement("span",{className:"e-label"});i.appendChild(o);var r=e.querySelectorAll(".e-headercontent th")[t];if(sf.base.isNullOrUndefined(r.querySelector(".e-checkbox-wrapper"))){var a=r.querySelector(".e-headercelldiv");a.insertBefore(i,a.firstChild)}},e.prototype.updateHeaderCheckbox=function(e,t){"intermediate"===t?(e.classList.add("e-stop"),e.classList.remove("e-check")):"check"===t?(e.classList.add("e-check"),e.classList.remove("e-stop")):(e.classList.remove("e-stop"),e.classList.remove("e-check"))},e.prototype.headerSelect=function(e){var t=e.currentTarget,i="uncheck";t.classList.contains("e-check")?t.classList.remove("e-check"):t.classList.contains("e-stop")?t.classList.remove("e-stop"):(t.classList.add("e-check"),i="check"),this.dotNetRef.invokeMethodAsync("HeaderSelectAll",i)},e}(),s=function(){function t(t,s,o,r){this.columnModel=[],window.sfBlazor=window.sfBlazor,this.element=s,sf.base.isNullOrUndefined(this.element)||(this.grid=s.querySelector("#"+s.id+"_gridcontrol").blazor__instance,this.dotNetRef=r,this.options=o,this.dataId=t,sf.base.isNullOrUndefined(this.element)||(this.element.blazor_instance=this,window.sfBlazor.setCompInstance(this)),this.header=this.element.querySelector(".e-headercontent"),this.content=this.element.querySelector(".e-content"),this.footer=this.element.querySelector(".e-summarycontent"),this.clipboardModule=new e(this),this.rowDragAndDropModule=new i(this),this.checkboxcolumnModule=new n(r,this),this.wireEvents())}return t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.KeyDownHandler,this)},t.prototype.getContent=function(){return this.content},t.prototype.getContentTable=function(){return this.content.querySelector(".e-table")},t.prototype.getHeaderContent=function(){return this.header},t.prototype.getHeaderTable=function(){return this.header.querySelector(".e-table")},t.prototype.getRows=function(){return[].slice.call(this.getContent().querySelectorAll(".e-row"))},t.prototype.KeyDownHandler=function(e){67===e.keyCode&&e.ctrlKey?this.clipboardModule.copy():72===e.keyCode&&e.ctrlKey&&e.shiftKey&&this.clipboardModule.copy(!0)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"keydown",this.KeyDownHandler)},t.prototype.destroy=function(){this.unWireEvents()},t}();return{initialize:function(e,t,i,n){sf.base.enableBlazorMode(),new s(e,t,i,n)},modelChanged:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&(i.options=t,t.enableVirtualization&&t.isExpandCollapse)){i.grid.virtualContentModule.preventEvent=!0}},frozenHeight:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.grid.freezeModule.refreshRowHeight()},headerCheckbox:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.checkboxcolumnModule.renderHeaderCheckbox(i.element,t)},updateCheckbox:function(e,t,i){var n=window.sfBlazor.getCompInstance(e),s=n.element.querySelectorAll(".e-gridheader th")[t].querySelector("span.e-frame");n.checkboxcolumnModule.updateHeaderCheckbox(s,i)},copyToClipBoard:function(e,t){var i=window.sfBlazor.getCompInstance(e);"Cell"===i.grid.options.selectionMode?i.grid.clipboardModule.copy(t):i.clipboardModule.copy(t)},paste:function(e,t,i,n){window.sfBlazor.getCompInstance(e).grid.clipboardModule.paste(t,i,n)},destroy:function(e){window.sfBlazor.getCompInstance(e).destroy()}}}()},"./modules/sf-treemap.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Treemap=function(){"use strict";var e=function(){function e(e,t){window.sfBlazor=window.sfBlazor,this.resizeTo=0,this.element=e,this.dotNetRef=t,this.dataId=e.id,window.sfBlazor.setCompInstance(this)}return e.prototype.initializeEvents=function(){sf.base.EventHandler.add(this.element,"mouseup",this.mouseUp.bind(this),this),sf.base.EventHandler.add(this.element,"mousemove",this.mouseMove.bind(this),this),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDown.bind(this),this),sf.base.EventHandler.add(this.element,"mouseleave",this.mouseLeave.bind(this),this),sf.base.EventHandler.add(this.element,"contextmenu",this.contextMenuEvent.bind(this),this),sf.base.EventHandler.add(this.element,"keyup",this.keyActionHandler.bind(this),this),window.addEventListener("resize",this.resize.bind(this)),new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{enter:"enter"},eventName:"keydown"})},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"mouseup",this.mouseUp),sf.base.EventHandler.remove(this.element,"mousemove",this.mouseMove),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDown),sf.base.EventHandler.remove(this.element,"mouseleave",this.mouseLeave),sf.base.EventHandler.remove(this.element,"contextmenu",this.contextMenuEvent),window.removeEventListener("resize",this.resize.bind(this)),sf.base.EventHandler.remove(this.element,"keydown",this.keyActionHandler),sf.base.EventHandler.remove(this.element,"keyup",this.keyActionHandler);var e=sf.base.getInstance(this.element,this.keyActionHandler);e&&e.destroy(),this.element=null,this.dotNetRef=null},e.prototype.keyActionHandler=function(e){if("enter"===e.action&&"keydown"===e.type&&(this.mouseDownProcess(e),this.mouseUpProcess(e)),"Tab"===e.code&&"keyup"===e.type&&(this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseMove",e.target.id,0,0,!0),(e.target.id.indexOf("_Left_Page_Rect")>-1||e.target.id.indexOf("_Right_Page_Rect")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef))){var t=e.target.id,i=document.getElementById(this.element.id+"_Paging_Text").textContent,n=(i=i.trim().replace("\n","")).split("/").map(Number);t.indexOf("_Left_Page_Rect")>-1?document.getElementById(t).style.outlineColor=n[0]+1!=n[1]?"":"transparent":document.getElementById(t).style.outlineColor=n[0]!=n[1]+1?"":"transparent"}},e.prototype.contextMenuEvent=function(e){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerRightClick",e.layerX,e.layerY)},e.prototype.resize=function(){var e,t,i=this;if(!sf.base.isNullOrUndefined(this.element)){var n=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(n)){n.style.display="none";var s=this.element.getBoundingClientRect();e=s.width,t=s.height,n.style.removeProperty("display")}}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,sf.base.isNullOrUndefined(this.dotNetRef)||(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout((function(){i.dotNetRef.invokeMethodAsync("TriggerResize",e,t,sf.base.Browser.isIE)}),500)))},e.prototype.mouseDown=function(e){this.enableDrillDown&&document.getElementById(this.element.id+"_svg").setAttribute("cursor","auto"),this.mouseDownProcess(e)},e.prototype.mouseDownProcess=function(e){e.preventDefault();var t=this.getElementId(e.target.id);this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseDown",e.target.id,t,3===e.which,e.layerX,e.layerY)},e.prototype.mouseUp=function(e){this.mouseUpProcess(e)},e.prototype.mouseUpProcess=function(e){var t=this.getElementId(e.target.id);this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseUp",e.target.id,t,3===e.which)},e.prototype.mouseMove=function(e){var t,i;if(null!=this.element){var n=this.element.children[1],s=n.getBoundingClientRect(),o=n.ownerDocument.defaultView.pageXOffset,r=n.ownerDocument.defaultView.pageYOffset,a=n.ownerDocument.documentElement.clientTop,l=n.ownerDocument.documentElement.clientLeft,d=s.left+o-l,h=s.top+r-a;t=e.pageX-d,i=e.pageY-h}this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseMove",e.target.id,t,i,!1);var c=e.target.id;this.enableDrillDown&&(c.indexOf("_Level_Index_")>-1&&c.indexOf("_Item_Index_")>-1&&c.indexOf("_Text")>-1&&parseInt(c.split("_Level_Index_")[1])!==this.levelCount-1&&(e.target.textContent.indexOf("[+]")>-1||e.target.textContent.indexOf("[-]")>-1)?document.getElementById(this.element.id+"_svg").setAttribute("cursor","pointer"):document.getElementById(this.element.id+"_svg").setAttribute("cursor","auto"))},e.prototype.mouseLeave=function(e){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseLeave")},e.prototype.getElementId=function(e){return sf.base.isNullOrUndefined(e)||""===e?"":document.getElementById(e).textContent},e}();return{initialize:function(t,i,n,s){return new e(t,i).initializeEvents(),this.getElementSize(t.id,n,s)},getElementSize:function(e,t,i){var n,s,o=document.getElementById(e);if(null!=o){o.style.height=t,o.style.width=i;var r=o.getBoundingClientRect();n=r.width,s=r.height}return{width:n,height:s,isIE:sf.base.Browser.isIE}},updateProperty:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.enableDrillDown=t.enableDrillDown,i.levelCount=t.levelCount)},setElementAttribute:function(e,t,i,n,s,o,r,a,l){for(var d=0;d<i.length;d++){var h=document.getElementById(i[d]+"_RectPath");if(null!==h){var c=h.getAttribute("class"),p=void 0;if(sf.base.isNullOrUndefined(c)&&(p=document.createAttribute("class"),c=""),"Selection"===a&&"treeMapHighlight"===c&&(h.setAttribute("class",""),c=""),"treeMapSelection"!==c){for(var u=0;u<t.length;u++){var f=document.getElementById(t[u]);null!==f&&(f.setAttribute("fill",n),f.setAttribute("opacity",s),f.setAttribute("stroke",o),f.setAttribute("stroke-width",r))}h.setAttribute("fill",n),h.setAttribute("opacity",s),h.setAttribute("stroke",o),h.setAttribute("stroke-width",r),c="Highlight"===a||"LegendHighlight"===a?"treeMapHighlight":"treeMapSelection",!sf.base.isNullOrUndefined(p)&&sf.base.isNullOrUndefined(h.getAttribute("class"))?(p.value=c,h.setAttributeNode(p)):h.setAttribute("class",c);var m=window.sfBlazor.getCompInstance(l).getElementId(i[d]+"_Text");"Selection"===a?e.invokeMethodAsync("TriggerItemSelect",m):"Highlight"===a&&e.invokeMethodAsync("TriggerItemHighlight")}}}},removeElementAttribute:function(e,t,i,n,s,o,r,a,l,d,h){for(var c=0;c<o.length;c++){var p=document.getElementById(o[c]+"_RectPath");if(null!=p){var u=p.getAttribute("class");if("Highlight"===h&&"treeMapSelection"!==u||"Selection"===h&&"treeMapSelection"===u){for(var f=0;f<e.length;f++){var m=document.getElementById(e[f]);null!=m&&(m.setAttribute("fill",t),m.setAttribute("opacity",i),m.setAttribute("stroke",n),m.setAttribute("stroke-width",s))}p.setAttribute("fill",r[c]),p.setAttribute("opacity",a[c]),p.setAttribute("stroke",l[c]),p.setAttribute("stroke-width",d[c]),p.setAttribute("class","")}}}},templateElementSize:function(e,t){for(var i,n,s,o,r=document.getElementById(e),a=r.clientWidth,l=r.clientHeight,d=r.getAttribute("style").split(";"),h=0;h<d.length;h++){if(-1!==d[h].indexOf("left")){var c=d[h].split(":"),p=parseFloat(c[c.length-1]);i=-1!==t.indexOf("Left")?p:-1===t.indexOf("Right")?p-a/2:p-a,d[h]="left:"+i+"px"}else if(-1!==d[h].indexOf("top")){var u=d[h].split(":"),f=parseFloat(u[u.length-1]);n=-1!==t.indexOf("Top")?f:-1===t.indexOf("Bottom")?f-l/2:f-l,d[h]="top:"+n+"px"}o=d[h]+";",s=0===h?o:s.concat(o)}r.setAttribute("style",s)},setTemplateTooltipLocation:function(e,t,i){var n=document.getElementById(e+"_Tooltip"),s=document.getElementById(e+"_TreeMap_Border");if(n&&s){var o,r=Number(s.getAttribute("x")),a=Number(s.getAttribute("y")),l=Number(s.getAttribute("width")),d=n.getBoundingClientRect(),h=void 0;i-d.height<a?(h=t+d.width/2>l?(l-d.width).toString()+"px":t-d.width/2<r?n.style.left=r.toString()+"px":(t-d.width/2).toString()+"px",o=i.toString()+"px"):t+d.width/2>l?(h=(l-d.width).toString()+"px",o=(i-d.height).toString()+"px"):t-d.width/2<r?(h=r.toString()+"px",o=(i-d.height).toString()+"px"):(h=(t-d.width/2).toString()+"px",o=(i-d.height).toString()+"px"),n.style.left=h||"0",n.style.top=o||"0",n.style.visibility="visible"}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.unWireEvents()}}}()},"./modules/sf-treeview.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TreeView=function(){"use strict";var e="e-list-item",t="e-list-parent",n="e-hover",s="e-icon-collapsible",o="e-icon-expandable",r="e-icons",a="block",l="e-active",d="e-treeview",h="e-node-focus",c="e-checkbox-wrapper",p="e-text-content",u="e-sibling",f="e-drop-in",m="e-drop-next",g="e-no-drop",v="e-disable",b=function(){function b(e,t,i){this.isHelperElement=!0,this.mouseDownStatus=!1,this.mouseUpStatus=!1,this.preventExpand=!1,this.keyBoardAction=!1,this.isNodeRendered=!1,this.isEdited=!1,this.element=e,this.element.blazor__instance=this,this.dotNetRef=i,this.options=t}return b.prototype.render=function(){this.dragStartAction=!1,this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:o,expandIconPosition:"Left"},this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space"},this.animationObj=new sf.base.Animation({}),this.setDisabledMode(this.options.disabled),this.setMultiSelect(this.options.allowMultiSelection),this.options.hasTemplate&&this.element.classList.add("e-interaction")},b.prototype.setDisabledMode=function(e){this.setDragAndDrop(this.options.allowDragAndDrop),this.wireEditingEvents(this.options.allowEditing),this.checkAllDisabled(e),e?this.unWireEvents():this.wireEvents()},b.prototype.checkAllDisabled=function(e){e?this.element.classList.add("e-disabled"):this.element.classList.remove("e-disabled")},b.prototype.setEnableRtl=function(){(this.options.enableRtl?sf.base.addClass:sf.base.removeClass)([this.element],"e-rtl")},b.prototype.updateWrap=function(e){if(this.options.fullRowSelect)for(var t=sf.base.selectAll("li",e||this.element),i=t.length,n=0;n<i;n++){var s=sf.base.select(".e-fullrow",t[n]);s&&s.nextElementSibling&&(s.style.height=this.options.allowTextWrap?s.nextElementSibling.offsetHeight+"px":"")}},b.prototype.setTextWrap=function(){this.options.allowTextWrap&&!this.element.classList.contains("e-text-wrap")?sf.base.addClass([this.element],"e-text-wrap"):!this.options.allowTextWrap&&this.element.classList.contains("e-text-wrap")&&sf.base.removeClass([this.element],"e-text-wrap"),this.updateWrap()},b.prototype.mouseDownHandler=function(e){this.mouseDownStatus=!0,(e.shiftKey||e.ctrlKey)&&e.preventDefault(),e.ctrlKey&&this.options.allowMultiSelection&&sf.base.EventHandler.add(this.element,"contextmenu",this.preventContextMenu,this)},b.prototype.mouseupHandler=function(){this.mouseUpStatus=!0},b.prototype.onMouseLeave=function(e){this.removeHover()},b.prototype.unWireEvents=function(){this.wireClickEvent(!1),this.wireExpandOnEvent(!1),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"focus",this.focusIn),sf.base.EventHandler.remove(this.element,"blur",this.focusOut),sf.base.EventHandler.remove(this.element,"mouseover",this.onMouseOver),sf.base.EventHandler.remove(this.element,"mouseout",this.onMouseLeave),!this.options.disabled&&this.keyboardModule&&this.keyboardModule.destroy()},b.prototype.keyboardActionHandler=function(e){this.keyAction=e;var t=e.target,i=this.getFocusedNode();if(t&&t.classList.contains("e-input")){var s=t;"enter"===e.action?(s.blur(),this.element.focus(),sf.base.addClass([i],n)):"escape"===e.action&&(s.value=this.oldText,s.blur(),this.element.focus(),sf.base.addClass([i],n))}else{e.preventDefault();var o={cancel:!1,event:e},r=i.getAttribute("data-uid");this.dotNetRef.invokeMethodAsync("TriggerKeyboardEvent",o,r,e.action,e.key)}},b.prototype.setMultiSelect=function(e){this.options.allowMultiSelection=e,e?this.element.setAttribute("aria-multiselectable","true"):this.element.removeAttribute("aria-multiselectable")},b.prototype.setCssClass=function(e){this.options.cssClass&&sf.base.removeClass([this.element],this.options.cssClass.split(" ")),e&&sf.base.addClass([this.element],e.split(" ")),this.options.cssClass=e},b.prototype.wireEditingEvents=function(e){var t=this;if(e&&!this.options.disabled){var i=this;this.touchEditObj=new sf.base.Touch(this.element,{tap:function(e){t.isDoubleTapped(e)&&2===e.tapCount&&(e.originalEvent.preventDefault(),i.editingHandler(e.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()},b.prototype.setDragAndDrop=function(e){e&&!this.options.disabled?this.initializeDrag():this.destroyDrag()},b.prototype.setDragArea=function(e){this.options.allowDragAndDrop&&(this.dragObj.dragArea=e)},b.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},b.prototype.initializeDrag=function(){var i,n=this;this.dragObj=new sf.base.Draggable(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.options.dropArea,distance:5,dragTarget:"."+p,helper:function(s){n.dragTarget=s.sender.target;var a=sf.base.closest(n.dragTarget,"."+d),h=sf.base.closest(n.dragTarget,"."+p);if(n.dragLi=sf.base.closest(n.dragTarget,"."+e),n.options.fullRowSelect&&!h&&n.dragTarget.classList.contains("e-fullrow")&&(h=n.dragTarget.nextElementSibling),!n.dragTarget||!s.element.isSameNode(a)||!h||n.dragTarget.classList.contains(d)||n.dragTarget.classList.contains(t)||n.dragTarget.classList.contains(e)||n.dragLi.classList.contains(v))return!1;var c=h.cloneNode(!0);if(sf.base.isNullOrUndefined(sf.base.select("div."+r,c))){var u=sf.base.createElement("div",{className:r+" "+o});c.insertBefore(u,c.children[0])}var f="e-drag-item "+d+" "+n.options.cssClass+" "+(n.options.enableRtl?"e-rtl":"");(i=sf.base.createElement("div",{className:f})).appendChild(c);var m=n.element.querySelectorAll("."+l).length;if(m>1&&n.options.allowMultiSelection&&n.dragLi.classList.contains(l)){var g=sf.base.createElement("span",{className:"e-drop-count",innerHTML:""+m});i.appendChild(g)}return document.body.appendChild(i),document.body.style.cursor="",n.dragData=n.getNodeData(n.dragLi),n.virtualEle=i,i},drag:function(e){if(n.mouseUpStatus)return sf.base.detach(i),sf.base.removeClass([n.element],"e-dragging"),n.removeVirtualEle(),void(document.body.style.cursor="");n.dragObj.setProperties({cursorAt:{top:!sf.base.isNullOrUndefined(e.event.targetTouches)||sf.base.Browser.isDevice?60:-20}}),n.dragAction(e,i)},dragStart:function(t){sf.base.addClass([n.element],"e-dragging");var s,o=sf.base.closest(t.target,"."+e);o&&(s=parseInt(o.getAttribute("aria-level"),10),sf.base.EventHandler.add(o,"mouseup",n.mouseupHandler,n));var r=n.getDragEvent(t.event,n,null,t.target,null,i,s);if(r.draggedNode.classList.contains("e-editing"))n.dragObj.intDestroy(t.event),n.dragCancelAction(i);else{n.dragStartEventArgs=t;var a=n.getXYValue(t.event,"X"),l=n.getXYValue(t.event,"Y");i.style.display="none",n.dotNetRef.invokeMethodAsync("TriggerDragStartEvent",n.updateObjectValues(r),a,l)}},dragStop:function(t){sf.base.removeClass([n.element],"e-dragging"),n.removeVirtualEle();var i=t.target;n.dropRoot=sf.base.closest(i,".e-droppable"),n.isHelperElement=!0,i&&n.dropRoot||(t.helper&&t.helper.parentNode&&sf.base.remove(t.helper),document.body.style.cursor="",n.isHelperElement=!1);var s,o=sf.base.closest(i,"."+e);o&&(s=parseInt(o.getAttribute("aria-level"),10),sf.base.EventHandler.remove(o,"mouseup",n.mouseupHandler),n.mouseUpStatus=!1);var r=i,a=n.getDragEvent(t.event,n,i,r,null,t.helper,s);n.dragStopEventArgs=t,a.preventTargetExpand=!1;var l=n.getXYValue(t.event,"X"),d=n.getXYValue(t.event,"Y");sf.base.isNullOrUndefined(a.dropIndicator)&&(a.dropIndicator=g,document.body.style.cursor="not-allowed"),n.dotNetRef.invokeMethodAsync("TriggerDragStopEvent",n.updateObjectValues(a),l,d)}}),this.dropObj=new sf.base.Droppable(this.element,{out:function(e){sf.base.isNullOrUndefined(e)||e.target.classList.contains(u)||(document.body.style.cursor="not-allowed")},over:function(e){document.body.style.cursor=""}})},b.prototype.updateObjectValues=function(e){return e.clonedNode=null,e.draggedNode=null,e.draggedParentNode=null,e.dropTarget=null,e.droppedNode=null,e.target=null,e},b.prototype.dragNodeStop=function(e){this.dragParent=e.draggedParentNode,this.preventExpand=e.preventTargetExpand,(e.cancel||e.dropIndicator==g)&&(this.dragStopEventArgs.helper.parentNode&&sf.base.remove(this.dragStopEventArgs.helper),document.body.style.cursor="",this.isHelperElement=!1),this.dragStartAction=!1,this.isHelperElement&&this.dropAction(this.dragStopEventArgs,!0)},b.prototype.dragStartActionContinue=function(e){e?(this.dragObj.intDestroy(this.dragStartEventArgs.event),this.dragCancelAction(this.virtualEle)):(this.virtualEle.style.display=a,this.dragStartAction=!0,this.dragStartEventArgs.bindEvents(sf.base.getElement(this.dragStartEventArgs.dragElement)))},b.prototype.getId=function(e){return sf.base.isNullOrUndefined(e)?null:"string"==typeof e?e:"object"===i(e)?sf.base.getElement(e).getAttribute("data-uid"):null},b.prototype.getOffsetValue=function(e,t){var i,n=e.target.classList;if("mozilla"!==sf.base.Browser.info.name||sf.base.isNullOrUndefined(n))i="Y"===t?e.event.offsetY:e.event.offsetX;else{var s=e.target.getBoundingClientRect();i=Math.ceil("Y"===t?e.event.clientY-s.top:e.event.clientX-s.left)}return i},b.prototype.dropAction=function(t,i){var n,s,o=this.getOffsetValue(t,"Y"),r=t.target,a=!1;if((n=i?t.element.blazor__instance:t.dragData.draggable.blazor__instance)&&n.dragTarget){var h=n.dragTarget,c=sf.base.closest(h,"."+e),p=sf.base.closest(r,"."+e);if(null==p&&r.classList.contains(d)&&(p=r.firstElementChild),i?sf.base.remove(t.helper):sf.base.remove(t.droppedElement),r&&!r.closest("."+d+".e-droppable"))return;if(document.body.style.cursor="",!p||p.isSameNode(c)||this.isDescendant(c,p))return;if(n.options.allowMultiSelection&&c.classList.contains(l)){var u=sf.base.selectAll("."+l,n.element);if(t.target.offsetHeight<=33&&o>t.target.offsetHeight-10&&o>6)for(var f=u.length-1;f>=0;f--)p.isSameNode(u[f])||this.isDescendant(u[f],p)||this.appendNode(r,u[f],p,t,n,o);else for(f=0;f<u.length;f++)p.isSameNode(u[f])||this.isDescendant(u[f],p)||this.appendNode(r,u[f],p,t,n,o)}else this.appendNode(r,c,p,t,n,o);s=parseInt(c.getAttribute("aria-level"),10),a=!0}var m=i?t.element:t.dragData.draggedElement,g=this.getDragEvent(t.event,n,r,t.target,m,null,s,a),v=this.getXYValue(t.event,"X"),b=this.getXYValue(t.event,"Y");this.dotNetRef.invokeMethodAsync("TriggerNodeDropped",this.updateObjectValues(g),v,b)},b.prototype.isDoubleTapped=function(t){var i,n=t.originalEvent.target;return n&&t.tapCount&&(1===t.tapCount?this.firstTap=sf.base.closest(n,"."+e):2===t.tapCount&&(i=sf.base.closest(n,"."+e))),this.firstTap===i},b.prototype.isDescendant=function(e,t){for(var i=t.parentNode;!sf.base.isNullOrUndefined(i);){if(i===e)return!0;i=i.parentNode}return!1},b.prototype.appendNode=function(e,t,i,n,r,a){var l=sf.base.closest(e,"."+c),h=sf.base.closest(n.target,"."+s),p=sf.base.closest(n.target,"."+o),u=this.getOffsetValue(n,"X");t.classList.contains(v)||l||!(p&&a<5||h&&u<3||p&&a>19||h&&u>19||!p&&!h)?this.dropAsChildNode(t,i,r,null,n,a,!0):"LI"===e.nodeName?this.dropAsSiblingNode(t,i,n,r):e.firstElementChild&&e.classList.contains(d)?"UL"===e.firstElementChild.nodeName&&this.dropAsSiblingNode(t,i,n,r):e.classList.contains(s)||e.classList.contains(o)?this.dropAsSiblingNode(t,i,n,r):this.dropAsChildNode(t,i,r,null,n,a)},b.prototype.dropAsSiblingNode=function(i,n,r,a){var l,d=sf.base.closest(n,"."+t),h=sf.base.closest(i,"."+t),c=sf.base.closest(h,"."+e),p=sf.base.closest(d,"."+e),u=null,f=null,m=this.getOffsetValue(r,"X"),g=this.getOffsetValue(r,"Y");r.target.offsetHeight>0&&g>r.target.offsetHeight-2?l=!1:g<2?l=!0:(r.target.classList.contains(o)||r.target.classList.contains(s))&&(g<5||m<3?l=!0:(g>15||m>17)&&(l=!1)),p&&(u=p.getAttribute("data-uid")),c&&(f=c.getAttribute("data-uid"));var v=this.isExternalDrop(i),b=this.dropRoot?this.dropRoot.blazor__instance:null,y=v?b:this,w=this.getDropArgs(i,n,f,a,u,l);y.dotNetRef.invokeMethodAsync("DropNodeAsSibling",w),this.updateAriaLevel(i)},b.prototype.updateAriaLevel=function(e){var i=this.parents(e,"."+t).length;e.setAttribute("aria-level",""+i),this.updateChildAriaLevel(sf.base.select("."+t,e),i+1)},b.prototype.updateChildAriaLevel=function(e,i){if(!sf.base.isNullOrUndefined(e))for(var n=e.querySelectorAll("li"),s=0,o=n.length;s<o;s++){var r=n[s];r.setAttribute("aria-level",""+i),this.updateChildAriaLevel(sf.base.select("."+t,r),i+1)}},b.prototype.dropAsChildNode=function(i,n,s,o,r,a,l){var h=sf.base.closest(i,"."+t),c=sf.base.closest(h,"."+e),p=sf.base.closest(n,"."+t),u=sf.base.closest(p,"."+e),f=null,m=null;u&&(f=u.getAttribute("data-uid")),c&&(m=c.getAttribute("data-uid"));var g,v=this.isExternalDrop(i),b=sf.base.closest(i,"."+d)?sf.base.closest(i,"."+d).blazor__instance:this.element?this.element.blazor__instance:null,y=this.dropRoot?this.dropRoot.blazor__instance:null,w=v?y:this;r&&a<7&&!l?(g=this.getDropArgs(i,n,m,b,f,!0),w.dotNetRef.invokeMethodAsync("DropNodeAsSibling",g)):r&&r.target.offsetHeight>0&&a>r.target.offsetHeight-10&&!l?(g=this.getDropArgs(i,n,m,b,f,!1),w.dotNetRef.invokeMethodAsync("DropNodeAsSibling",g)):(g=this.getDropArgs(i,n,m,b),w.dotNetRef.invokeMethodAsync("DropNodeAsChild",g)),this.updateAriaLevel(i)},b.prototype.isExternalDrop=function(e){var t=!1,i=sf.base.closest(e,"."+d)?sf.base.closest(e,"."+d):this.element,n=this.dropRoot;return null==i||null==n||i.isSameNode(n)||(t=!0),t},b.prototype.getDropArgs=function(e,t,i,n,s,o){return{dragLi:e.getAttribute("data-uid"),dropLi:t.getAttribute("data-uid"),dragParentLi:i,dropParentLi:s,pre:o,srcTree:n.dotNetRef,isExternalDrag:this.isExternalDrop(e)}},b.prototype.dragCancelAction=function(e){sf.base.detach(e),sf.base.removeClass([this.element],"e-dragging"),this.dragStartAction=!1},b.prototype.removeVirtualEle=function(){var e=sf.base.select("."+u);e&&sf.base.detach(e)},b.prototype.dragAction=function(t,i){var n=sf.base.closest(t.target,".e-droppable"),a=sf.base.closest(t.target,"."+p),l=sf.base.select("div."+r,i),h=this.getOffsetValue(t,"X"),v=this.getOffsetValue(t,"Y");sf.base.removeClass([l],[f,m,"e-drop-out",g]),this.removeVirtualEle(),document.body.style.cursor="";var b=t.target.classList;if(this.options.fullRowSelect&&!a&&!sf.base.isNullOrUndefined(b)&&b.contains("e-fullrow")&&(a=t.target.nextElementSibling),n){var y=sf.base.closest(t.target,"."+e),w=sf.base.closest(t.target,"."+c),C=sf.base.closest(t.target,"."+s),S=sf.base.closest(t.target,"."+o);if(!n.classList.contains(d)||a&&!y.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,y))if(y&&t&&!S&&!C&&v<7&&!w||S&&v<5||C&&h<3){sf.base.addClass([l],m);var E=sf.base.createElement("div",{className:u}),x=this.options.fullRowSelect?1:0;y.insertBefore(E,y.children[x])}else if(y&&t&&!S&&!C&&t.target.offsetHeight>0&&v>t.target.offsetHeight-10&&!w||S&&v>19||C&&h>19){sf.base.addClass([l],m);E=sf.base.createElement("div",{className:u}),x=this.options.fullRowSelect?2:1;y.insertBefore(E,y.children[x])}else sf.base.addClass([l],f);else"LI"!==t.target.nodeName||y.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,y)?t.target.classList.contains(u)?sf.base.addClass([l],m):t.target.classList.contains("e-droppable")?sf.base.addClass([l],f):sf.base.addClass([l],"e-drop-out"):(sf.base.addClass([l],m),this.renderVirtualEle(t))}else sf.base.addClass([l],g),document.body.style.cursor="not-allowed";var O,T=sf.base.closest(t.target,e);T&&(O=parseInt(T.getAttribute("aria-level"),10));var A=this.getDragEvent(t.event,this,t.target,t.target,null,i,O);A.dropIndicator&&sf.base.removeClass([l],A.dropIndicator),this.iconElement=l,this.draggingEventArgs=A;var N=this.getXYValue(t.event,"X"),k=this.getXYValue(t.event,"Y");this.dotNetRef.invokeMethodAsync("TriggerNodeDraggingEvent",this.updateObjectValues(A),N,k)},b.prototype.nodeDragging=function(e){this.draggingEventArgs.dropIndicator&&sf.base.addClass([this.iconElement],this.draggingEventArgs.dropIndicator)},b.prototype.renderVirtualEle=function(e){var t,i=this.getOffsetValue(e,"Y");i>e.target.offsetHeight-2?t=!1:i<2&&(t=!0);var n=sf.base.createElement("div",{className:u}),s=this.options.fullRowSelect?t?1:2:t?0:1;this.dropTargetElement=e.target.children[s],e.target.insertBefore(n,e.target.children[s])},b.prototype.parents=function(e,t){for(var i=[],n=e.parentNode;!sf.base.isNullOrUndefined(n);)sf.base.matches(n,t)&&i.push(n),n=n.parentNode;return i},b.prototype.getDragEvent=function(t,i,n,s,o,a,l,h){var c=n?sf.base.closest(n,"."+e):null,p=c?this.getNodeData(c):null,u=i?i.dragLi:o,v=i?i.dragData:null,b=n?this.parents(n,"."+e):null,y=i.dragLi.parentElement,w=i.dragLi?sf.base.closest(y,"."+e):null,C=null,S=null,E=[m,f,"e-drop-out",g],x=null,O=h?u:c,T=O?sf.base.closest(O,".e-list-parent"):null,A=0;if(w=i.dragLi&&null===w?sf.base.closest(y,"."+d):w,w=h?this.dragParent:w,a)for(;A<4;){if(sf.base.select("."+r,a).classList.contains(E[A])){x=E[A];break}A++}if(T){var N=0;for(A=0;A<T.childElementCount;A++){if(N=h||T.children[A]!==u||c===u?N:++N,!h&&T.children[A].classList.contains("e-hover")){S=t.offsetY>=23?A+1:A;break}if(!h&&this.dropTargetElement&&this.dropTargetElement.children[0]){S=t.offsetY>=23?A+1:A;break}if(T.children[A]===O){t.offsetY,S=A;break}}S=0!==N?--S:S}if(n&&(C=0===b.length?null:n.classList.contains(e)?b[0]:b[1]),c===u&&(C=c),n&&s.offsetHeight<=33&&t.offsetY<s.offsetHeight-10&&t.offsetY>6&&(C=c,!h)){l=++l;var k=C?sf.base.select(".e-list-parent",C):null;S=k?k.children.length:0}return{cancel:!1,clonedNode:a,event:t,draggedNode:u,draggedNodeData:v,droppedNode:c,droppedNodeData:p,dropIndex:S,dropLevel:l,draggedParentNode:w,dropTarget:C,dropIndicator:x,target:s}},b.prototype.editingHandler=function(i){var n=i.target;!n||n.classList.contains(d)||n.classList.contains(t)||n.classList.contains(e)||n.classList.contains(r)||n.classList.contains("e-input")||n.classList.contains("e-input-group")||this.createTextbox(sf.base.closest(n,"."+e),i)},b.prototype.createTextbox=function(e,t){this.editEventArgs=this.getEditEvent(e,null,null),sf.base.addClass([e],"e-editing"),this.isEdited=!0,this.dotNetRef.invokeMethodAsync("TriggerNodeEditingEvent",this.editEventArgs)},b.prototype.getEditEvent=function(e,t,i){return{newText:t,nodeData:this.getNodeData(e),oldText:this.oldText,innerHtml:i}},b.prototype.focusIn=function(){this.mouseDownStatus||sf.base.addClass([this.getFocusedNode()],n),this.mouseDownStatus=!1},b.prototype.focusOut=function(){sf.base.removeClass([this.getFocusedNode()],n)},b.prototype.wireEvents=function(){if(!this.options.disabled){if(this.setExpandOnType(),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"mouseover",this.onMouseOver,this),sf.base.EventHandler.add(this.element,"focus",this.focusIn,this),sf.base.EventHandler.add(this.element,"blur",this.focusOut,this),sf.base.EventHandler.add(this.element,"mouseout",this.onMouseLeave,this),this.options.showCheckBox){var e=sf.base.select(".e-frame",this.element);sf.base.isNullOrUndefined(e)||(sf.base.EventHandler.add(e,"mousedown",this.frameMouseHandler,this),sf.base.EventHandler.add(e,"mouseup",this.frameMouseHandler,this))}this.wireClickEvent(!0),"None"!==this.options.expandOnType&&this.wireExpandOnEvent(!0),this.keyboardModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyboardActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}},b.prototype.frameMouseHandler=function(e){var t=sf.base.select(".e-ripple-container",e.target.parentElement);this.rippleMouseHandler(e,t)},b.prototype.rippleMouseHandler=function(e,t){if(t){var i=document.createEvent("MouseEvents");i.initEvent(e.type,!1,!0),t.dispatchEvent(i)}},b.prototype.setExpandOnType=function(){var e=this.options.expandOnType;this.options.expandOnType="DoubleClick"===e?sf.base.Browser.isDevice?"Click":"DoubleClick":e},b.prototype.expandHandler=function(i){var n=i.originalEvent.target;!n||n.classList.contains("e-input")||n.classList.contains(d)||n.classList.contains(t)||n.classList.contains(e)||n.classList.contains(r)||this.options.showCheckBox&&sf.base.closest(n,"."+c)||this.expandCollapseAction(sf.base.closest(n,"."+e),i)},b.prototype.expandCollapseAction=function(e,t){var i=sf.base.select("div."+r,e);if(i&&!i.classList.contains("e-process")){var n=i.classList;n.contains(o)?this.expandAction(e,t):n.contains(s)&&this.collapseAction(e,t,!1)}},b.prototype.animateHeight=function(e,t,i){var n=(i-t)*((e.duration-e.timeStamp)/e.duration)+t;e.element.parentElement.style.height=n+"px"},b.prototype.expandAction=function(e,i){if(this.expandArgs=this.getExpandEvent(e,i),this.options.allowTextWrap){var n=sf.base.select("."+t,e);this.isNodeRendered=!!n}e&&e.classList.contains("e-process")&&sf.base.removeClass([e],"e-process"),this.dotNetRef.invokeMethodAsync("TriggerNodeExpandingEvent",this.expandArgs)},b.prototype.collapseAction=function(i,n,a){this.expandArgs=this.getExpandEvent(i,n);var d=0,h=0,c=this,u=sf.base.select("."+t,i),f=i,m=sf.base.select("."+e+"."+l,i);if(u){var g=sf.base.select("div."+r,f);sf.base.removeClass([g],s),sf.base.addClass([g],o)}sf.base.isNullOrUndefined(i.getAttribute("aria-expanded"))||i.setAttribute("aria-expanded","false"),0===this.options.animation.collapse.duration?(u.style.display="none",c.dotNetRef.invokeMethodAsync("TriggerNodeCollapsingEvent",c.expandArgs),a&&c.triggerClickEvent(n.originalEvent,i)):this.animationObj.animate(u,{name:"None"===this.options.animation.collapse.effect&&"Enable"===sf.base.animationMode?"SlideUp":this.options.animation.collapse.effect,duration:this.options.animation.collapse.duration,timingFunction:this.options.animation.collapse.easing,begin:function(e){f.style.overflow="hidden",!sf.base.isNullOrUndefined(m)&&m instanceof HTMLElement&&m.classList.add("e-animation-active"),d=sf.base.select("."+p,i).offsetHeight,h=f.offsetHeight},progress:function(e){c.animateHeight(e,d,h)},end:function(e){e.element.style.display="none",!sf.base.isNullOrUndefined(m)&&m instanceof HTMLElement&&m.classList.remove("e-animation-active"),c.dotNetRef.invokeMethodAsync("TriggerNodeCollapsingEvent",c.expandArgs),a&&c.triggerClickEvent(n.originalEvent,i)}})},b.prototype.wireExpandOnEvent=function(e){var t=this;if(e){var i=this;this.touchExpandObj=new sf.base.Touch(this.element,{tap:function(e){("Click"===t.options.expandOnType||"DoubleClick"===t.options.expandOnType&&t.isDoubleTapped(e)&&2===e.tapCount)&&3!==e.originalEvent.which&&i.expandHandler(e)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()},b.prototype.getNodeData=function(t,i){if(!sf.base.isNullOrUndefined(t)&&t.classList.contains(e)&&!sf.base.isNullOrUndefined(sf.base.closest(t,".e-control"))&&sf.base.closest(t,".e-control").classList.contains(d)){var n=t.getAttribute("data-uid"),s=sf.base.closest(t.parentNode,"."+e),o=s?s.getAttribute("data-uid"):null,r=t.classList.contains(l),a="true"===t.getAttribute("aria-expanded"),h=null===t.getAttribute("aria-expanded"),p=null;return this.options.showCheckBox&&(p=sf.base.select("."+c,t).getAttribute("aria-checked")),{id:n,text:null,parentID:o,selected:r,expanded:a,isChecked:p,hasChildren:h}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},b.prototype.getExpandEvent=function(e,t){var i=this.getNodeData(e);return{isInteracted:!sf.base.isNullOrUndefined(t),nodeData:i,event:t,isLoaded:null!=e.querySelector("ul"),nodeLevel:parseInt(e.getAttribute("aria-level"),10)}},b.prototype.updateSpinnerClass=function(){var e=this.element.querySelector(".e-icons-spinner");sf.base.removeClass([e],"e-icons-spinner")},b.prototype.expandedNode=function(i){var n=this,d=this.element.querySelector('[data-uid="'+i.nodeData.id+'"]');this.focussedElement=d;var h=sf.base.select("."+t,d);if(h){h.classList.remove("e-display-none");var c=sf.base.select("div."+r,d);this.expandArgs=this.getExpandEvent(d,i.event);var u=d,f=sf.base.select("."+e+"."+l,d),m=0,g=0,v=this;this.setHeight(u,h),0===this.options.animation.expand.duration?(sf.base.removeClass([c],o),sf.base.addClass([c],s),v.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",v.expandArgs),h.style.display=a,u.style.display=a,u.style.overflow="",u.style.height="",sf.base.removeClass([c],"e-icons-spinner"),!this.options.allowTextWrap||this.isNodeRendered&&!this.isEdited||(this.isEdited=!1,this.updateWrap(h))):this.animationObj.animate(h,{name:"None"===this.options.animation.expand.effect&&"Enable"===sf.base.animationMode?"SlideDown":this.options.animation.expand.effect,duration:this.options.animation.expand.duration,timingFunction:this.options.animation.expand.easing,begin:function(e){u.style.overflow="hidden",!sf.base.isNullOrUndefined(f)&&f instanceof HTMLElement&&f.classList.add("e-animation-active"),m=u.offsetHeight,g=sf.base.select("."+p,d).offsetHeight},progress:function(e){sf.base.removeClass([c],o),sf.base.addClass([c],s),e.element.style.display=a,v.animateHeight(e,m,g)},end:function(e){e.element.style.display=a,!sf.base.isNullOrUndefined(f)&&f instanceof HTMLElement&&f.classList.remove("e-animation-active"),v.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",v.expandArgs),h.style.display=a,u.style.display=a,u.style.overflow="",u.style.height="",sf.base.removeClass([c],"e-icons-spinner"),!n.options.allowTextWrap||n.isNodeRendered&&!n.isEdited||(n.isEdited=!1,n.updateWrap(h))}})}if(!h){this.expandArgs=this.getExpandEvent(d,i.event),this.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",this.expandArgs)}this.setHover(this.getFocusedNode())},b.prototype.setHeight=function(e,t){t.style.display=a,t.style.visibility="hidden",e.style.height=e.offsetHeight+"px",t.style.display="none",t.style.visibility=""},b.prototype.collapsedNode=function(e){var t=this.element.querySelector('[data-uid="'+e.nodeData.id+'"]');this.focussedElement=t;var i=t.querySelector("ul");i&&(i.style.display="none",i.classList.add("e-display-none")),t.style.overflow="",t.style.height="",this.expandArgs=this.getExpandEvent(t,null);var n=sf.base.select("div."+r,t);sf.base.removeClass([n],s),sf.base.addClass([n],o),this.dotNetRef.invokeMethodAsync("TriggerNodeCollapsedEvent",this.expandArgs)},b.prototype.preventContextMenu=function(e){e.preventDefault()},b.prototype.clickHandler=function(i){var n=i.originalEvent.target,a=!1;if(sf.base.EventHandler.remove(this.element,"contextmenu",this.preventContextMenu),n){var l=n.classList,d=sf.base.closest(n,"."+e);if(d){if(3!==i.originalEvent.which){var h=sf.base.select(".e-ripple-element",d),p=sf.base.select("."+r,d);if(this.removeHover(),this.focussedElement=d,this.setFocusElement(d),this.options.showCheckBox&&!d.classList.contains(v)){var u=sf.base.closest(n,"."+c);if(!sf.base.isNullOrUndefined(u)){var f=sf.base.select(".e-frame",u);return this.validateCheckNode(u,f.classList.contains("e-check"),d,i.originalEvent),void this.triggerClickEvent(i.originalEvent,d)}}l.contains(o)?this.expandAction(d,i):l.contains(s)?(this.collapseAction(d,i,!0),a=!0):h&&p?p.classList.contains("e-ripple")&&p.classList.contains(o)?this.expandAction(d,i):p.classList.contains("e-ripple")&&p.classList.contains(s)?(this.collapseAction(d,i,!0),a=!0):l.contains(t)||l.contains(e)||this.toggleSelect(d,i.originalEvent,!1):l.contains(t)||l.contains(e)||this.toggleSelect(d,i.originalEvent,!1)}a||this.triggerClickEvent(i.originalEvent,d)}}},b.prototype.getXYValue=function(e,t){var i,n=e.changedTouches;if(!(i="X"===t?n?n[0].clientX:e.clientX:n?n[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var s=e.target.getBoundingClientRect();i=s?"X"===t?s.left:s.top:null}return Math.ceil(i)},b.prototype.triggerClickEvent=function(e,t){var i={event:e,node:null};this.dotNetRef.invokeMethodAsync("TriggerNodeClickingEvent",i,t.getAttribute("data-uid"),this.getXYValue(e,"X"),this.getXYValue(e,"Y"))},b.prototype.getCheckEvent=function(e,t,i){return{action:t,isInteracted:!sf.base.isNullOrUndefined(i),nodeData:this.getNodeData(e)}},b.prototype.validateCheckNode=function(t,i,n,s){var o=sf.base.closest(t,"."+e),r=i?"false":"true";sf.base.isNullOrUndefined(r)||t.setAttribute("aria-checked",r);var a=this.getCheckEvent(o,i?"uncheck":"check",s);this.dotNetRef.invokeMethodAsync("TriggerNodeCheckingEvent",a)},b.prototype.toggleSelect=function(e,t,i){e.classList.contains(v)||(this.options.allowMultiSelection&&(t&&t.ctrlKey||i)&&this.isActive(e)?this.unselectNode(e,t,i):(this.selectNode(e,t,i),this.options.allowMultiSelection&&t&&(t.ctrlKey||t.shiftKey)&&(this.setFocusElement(e),this.focussedElement=e)))},b.prototype.unselectNode=function(e,t,i){var n=this.getSelectEvent(e,"un-select",t,i,[]);this.dotNetRef.invokeMethodAsync("TriggerNodeSelectingEvent",n)},b.prototype.getSelectEvent=function(e,t,i,n,s){var o=this.getNodeData(e);return{action:t,isInteracted:!sf.base.isNullOrUndefined(i),nodeData:o,isMultiSelect:n,isCtrKey:!(sf.base.isNullOrUndefined(i)||!i.ctrlKey),isShiftKey:!(sf.base.isNullOrUndefined(i)||!i.shiftKey),nodes:s}},b.prototype.selectNode=function(t,i,n){if(sf.base.isNullOrUndefined(t)||!this.options.allowMultiSelection&&this.isActive(t)&&!sf.base.isNullOrUndefined(i))return this.setFocusElement(t),void(this.focussedElement=t);var s=[];if(this.options.allowMultiSelection&&i&&i.shiftKey){var o=sf.base.selectAll("."+e+"."+l,this.element),r=o?o.length:0;this.startNode=r>0?o[r-1]:t;var a=Array.prototype.slice.call(sf.base.selectAll("."+e,this.element)),d=a.indexOf(this.startNode),h=a.indexOf(t);if(d>h){var c=d;d=h,h=c}for(var p=d;p<=h;p++){var u=a[p];sf.base.isVisible(u)&&!u.classList.contains(v)&&s.push(u.getAttribute("data-uid"))}}else this.startNode=t;var f=this.getSelectEvent(t,"select",i,n,s);this.dotNetRef.invokeMethodAsync("TriggerNodeSelectingEvent",f)},b.prototype.setFocusElement=function(e){if(!sf.base.isNullOrUndefined(e)){var t=this.getFocusedNode();t&&sf.base.removeClass([t],h),sf.base.addClass([e],h),this.focussedElement=e,this.updateIdAttr(t,e)}},b.prototype.updateIdAttr=function(e,t){this.element.removeAttribute("aria-activedescendant");var i=this.element.querySelectorAll("[id=_active]");if(i[0]!=e)for(var n=0;n<i.length;n++)i[n].removeAttribute("id");e&&e.removeAttribute("id"),t.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},b.prototype.getFocusedNode=function(){var t,i;return i=sf.base.select("."+e+"."+l,this.element),sf.base.isNullOrUndefined(i)&&(i=this.focussedElement?this.focussedElement:sf.base.select("."+e+"."+h,this.element)),sf.base.isNullOrUndefined(i)&&(t=sf.base.select("."+e,this.element)),sf.base.isNullOrUndefined(i)?sf.base.isNullOrUndefined(t)?this.element.firstElementChild:t:i},b.prototype.setFullRow=function(e){(e?sf.base.addClass:sf.base.removeClass)([this.element],"e-fullrow-wrap"),this.options.fullRowSelect=e},b.prototype.isActive=function(e){return e.classList.contains(l)},b.prototype.wireClickEvent=function(e){if(e){var t=this;this.touchClickObj=new sf.base.Touch(this.element,{tap:function(e){t.clickHandler(e)}})}else this.touchClickObj&&this.touchClickObj.destroy()},b.prototype.onMouseOver=function(i){var n=i.target,s=n.classList,o=sf.base.closest(n,"."+e);!o||s.contains(t)||s.contains(e)?this.removeHover():o&&!o.classList.contains(v)&&this.setHover(o)},b.prototype.setHover=function(e){e.classList.contains(n)||(this.removeHover(),sf.base.addClass([e],n))},b.prototype.removeHover=function(){var e=sf.base.selectAll("."+n,this.element);e&&e.length&&sf.base.removeClass(e,n)},b.prototype.checkNode=function(e){var t=this.getFocusedNode(),i=sf.base.select("."+c,t),n=sf.base.select(" .e-frame",i).classList.contains("e-check");t.classList.contains(v)||0===t.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(i,n,t,e)},b.prototype.openNode=function(i,n){var a=this.getFocusedNode(),l=sf.base.select("div."+r,a);if(i){if(!l)return;l.classList.contains(o)?this.expandAction(a,n):this.focusNextNode(a,!0)}else if(l&&l.classList.contains(s))this.collapseAction(a,n,!1);else{var d=sf.base.closest(sf.base.closest(a,"."+t),"."+e);if(!d)return;d.classList.contains(v)||(this.setNodeFocus(a,d),this.navigateToFocus(!0))}},b.prototype.getScrollParent=function(e){return sf.base.isNullOrUndefined(e)?null:e.scrollHeight>e.clientHeight?e:this.getScrollParent(e.parentElement)},b.prototype.navigateToFocus=function(e){var t=this.getFocusedNode().querySelector("."+p),i=t.getBoundingClientRect(),n=this.getScrollParent(this.element);if(!sf.base.isNullOrUndefined(n)){var s=n.getBoundingClientRect();i.bottom>s.bottom?n.scrollTop+=i.bottom-s.bottom:i.top<s.top&&(n.scrollTop-=s.top-i.top)}this.isVisibleInViewport(t)||t.scrollIntoView(e)},b.prototype.isVisibleInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},b.prototype.setNodeFocus=function(e,t){sf.base.removeClass([e],[n,h]),t.classList.contains(v)||(this.focussedElement=t,sf.base.addClass([t],[n,h]),this.updateIdAttr(e,t))},b.prototype.focusNextNode=function(e,t){var i=t?this.getNextNode(e):this.getPrevNode(e);if(this.setNodeFocus(e,i),this.navigateToFocus(!t),i.classList.contains(v)){var n=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")||null==i.nextSibling&&n.classList.contains(p)?this.focusNextNode(i,!1):this.focusNextNode(i,t)}},b.prototype.shiftKeySelect=function(e,t){if(this.options.allowMultiSelection){var i=this.getFocusedNode(),n=e?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(n),this.focussedElement=n,this.toggleSelect(n,t,!1),this.navigateToFocus(!e)}else this.navigateNode(e)},b.prototype.updateList=function(){this.liList=Array.prototype.slice.call(sf.base.selectAll("."+e,this.element))},b.prototype.getNextNode=function(e){var t,i=this.liList.indexOf(e);do{if(i++,t=this.liList[i],sf.base.isNullOrUndefined(t))return e}while(!sf.base.isVisible(t));return t},b.prototype.getPrevNode=function(e){var t,i=this.liList.indexOf(e);do{if(i--,t=this.liList[i],sf.base.isNullOrUndefined(t))return e}while(!sf.base.isVisible(t));return t},b.prototype.getRootNode=function(){var e,t=0;do{e=this.liList[t],t++}while(!sf.base.isVisible(e));return e},b.prototype.getEndNode=function(){var e,t=this.liList.length-1;do{e=this.liList[t],t--}while(!sf.base.isVisible(e));return e},b.prototype.navigateNode=function(e){this.focusNextNode(this.getFocusedNode(),e)},b.prototype.updateOldText=function(e){this.oldText=e},b.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){switch(i[t]){case"showCheckBox":this.options.showCheckBox=e.showCheckBox;break;case"allowDragAndDrop":this.setDragAndDrop(e.allowDragAndDrop);break;case"allowTextWrap":this.options.allowTextWrap=e.allowTextWrap,this.setTextWrap();break;case"allowEditing":this.wireEditingEvents(e.allowEditing);break;case"disabled":this.options.disabled!==e.disabled&&(this.options.disabled=e.disabled,this.setDisabledMode(e.disabled));break;case"dragArea":this.setDragArea(e.dropArea);break;case"cssClass":this.setCssClass(e.cssClass);break;case"fullRowSelect":this.setFullRow(e.fullRowSelect);break;case"expandOnType":this.options.expandOnType=e.expandOnType;break;case"enableRtl":this.options.enableRtl=e.enableRtl,this.setEnableRtl();break;case"animation":this.options.animation=e.animation}}},b.prototype.navigateRootNode=function(e){var t=this.getFocusedNode(),i=e?this.getRootNode():this.getEndNode();i.classList.contains(v)||(this.setNodeFocus(t,i),this.navigateToFocus(e))},b.prototype.selectGivenNodes=function(e){for(var t=0;t<e.length;t++)e[t].classList.contains(v)||this.selectNode(e[t],null,!0)},b.prototype.beginEdit=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');sf.base.isNullOrUndefined(t)||this.options.disabled||this.createTextbox(t,null)},b.prototype.ensureVisible=function(t){var i=this.element.querySelector('[data-uid="'+t+'"]');if(!sf.base.isNullOrUndefined(i)){for(var n=this.parents(i,"."+e),s=[],o=0;o<n.length;o++)s.push(n[o].getAttribute("data-uid"));this.dotNetRef.invokeMethodAsync("UpdateExpandedNode",s),setTimeout((function(){i.scrollIntoView(!0)}),450)}},b.prototype.nodeCollapse=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');this.collapseAction(t,null,!1)},b.prototype.nodeExpand=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');this.expandAction(t,null)},b.prototype.KeyActionHandler=function(t,i){this.updateList();var n=this.element.querySelector('[data-uid="'+i+'"]'),s=sf.base.isNullOrUndefined(n)?this.getFocusedNode():n;switch(t.action){case"space":this.options.showCheckBox&&this.checkNode(this.keyAction);break;case"moveRight":this.keyBoardAction=!0,this.openNode(!this.options.enableRtl,this.keyAction);break;case"moveLeft":this.keyBoardAction=!0,this.openNode(this.options.enableRtl,this.keyAction);break;case"shiftDown":this.shiftKeySelect(!0,this.keyAction);break;case"moveDown":case"ctrlDown":case"csDown":this.navigateNode(!0);break;case"shiftUp":this.shiftKeySelect(!1,this.keyAction);break;case"moveUp":case"ctrlUp":case"csUp":this.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":this.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":this.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":this.toggleSelect(s,this.keyAction,!1);break;case"f2":this.options.allowEditing&&!s.classList.contains(v)&&this.createTextbox(s,this.keyAction);break;case"ctrlA":if(this.options.allowMultiSelection){var o=sf.base.selectAll("."+e+":not(."+l+")",this.element);this.selectGivenNodes(o)}}var r=this;setTimeout((function(){r.keyBoardAction&&(r.setHover(r.getFocusedNode()),r.keyBoardAction=!1)}),100)},b}();return{initialize:function(e,t,i){var n=new b(e,t,i);n.render(),this.valid(e)&&e.blazor__instance.options.allowTextWrap&&e.blazor__instance.updateWrap(),document.getElementById(e.id)&&n.dotNetRef.invokeMethodAsync("CreatedEvent",null)},updateTextWrap:function(e){this.valid(e)&&e.blazor__instance.options.allowTextWrap&&e.blazor__instance.updateWrap()},dataSourceChanged:function(e){e.blazor__instance.unWireEvents(),e.blazor__instance.wireEvents()},collapseAction:function(e,t){if(this.valid(e)){var i=e.querySelector('[data-uid="'+t+'"]');e.blazor__instance.collapseAction(i,null,!1)}},expandAction:function(e,t){if(this.valid(e)){var i=e.querySelector('[data-uid="'+t+'"]');e.blazor__instance.expandAction(i,null)}},expandedNode:function(e,t){this.valid(e)&&e.blazor__instance.expandedNode(t)},collapsedNode:function(e,t){this.valid(e)&&e.blazor__instance.collapsedNode(t)},KeyActionHandler:function(e,t,i){this.valid(e)&&e.blazor__instance.KeyActionHandler(t,i)},setMultiSelect:function(e,t){this.valid(e)&&e.blazor__instance.setMultiSelect(t)},dragStartActionContinue:function(e,t){this.valid(e)&&e.blazor__instance.dragStartActionContinue(t)},dragNodeStop:function(e,t){this.valid(e)&&e.blazor__instance.dragNodeStop(t)},nodeDragging:function(e,t){this.valid(e)&&e.blazor__instance.nodeDragging(t)},setFocus:function(e,t){if(!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(t)){var i=document.getElementById(e.id);i.focus(),i.setSelectionRange(0,i.value.length)}},nodeEdited:function(e){sf.base.isNullOrUndefined(e)||sf.base.removeClass([e],"e-editing")},updateOldText:function(e,t){this.valid(e)&&e.blazor__instance.updateOldText(t)},updateSpinnerClass:function(e){this.valid(e)&&e.blazor__instance.updateSpinnerClass()},onPropertyChanged:function(e,t){this.valid(e)&&e.blazor__instance.onPropertyChanged(t)},valid:function(e){return e&&e.blazor__instance},beginEdit:function(e,t){this.valid(e)&&e.blazor__instance.beginEdit(t)},ensureVisible:function(e,t){this.valid(e)&&e.blazor__instance.ensureVisible(t)},nodeCollapse:function(e,t){this.valid(e)&&e.blazor__instance.nodeCollapse(t)},nodeExpand:function(e,t){this.valid(e)&&e.blazor__instance.nodeExpand(t)}}}()},"./modules/sf-uploader.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Uploader=function(){"use strict";var e={};function t(t,i){if(t.target){var r,l=sf.base.isNullOrUndefined(i)?sf.base.createElement:i,d=function(e,t){var i=t("div",{}),n=t("div",{});return i.classList.add("e-spinner-pane"),n.classList.add("e-spinner-inner"),e.appendChild(i),i.appendChild(n),{wrap:i,inner_wrap:n}}(t.target,l);if(sf.base.isNullOrUndefined(t.cssClass)||d.wrap.classList.add(t.cssClass),sf.base.isNullOrUndefined(t.template)&&sf.base.isNullOrUndefined(null)){var h=sf.base.isNullOrUndefined(t.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(d.wrap):t.type;r=function(e,t){var i;switch(t){case"Material":case"Fabric":i=30;break;case"Tailwind":case"Tailwind-dark":i=30;break;case"Bootstrap4":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(sf.base.isNullOrUndefined(t.width)?void 0:t.width,h),function(t,i,r,l){var d=i.querySelector(".e-spinner-inner"),h=d.querySelector("svg");sf.base.isNullOrUndefined(h)||d.removeChild(h);switch(t){case"Material":!function(t,i,s){var r=n();e[r]={timeOut:0,type:"Material",radius:i},o(t,r,s,"e-spin-material"),a(i,t,"Material","e-spin-material")}(d,r,l);break;case"Fabric":!function(t,i,o){var r=n();e[r]={timeOut:0,type:"Fabric",radius:i},s(t,r,"e-spin-fabric",o),c(i,t,"e-spin-fabric")}(d,r,l);break;case"Bootstrap":!function(t,i,s){var o=n();e[o]={timeOut:0,type:"Bootstrap",radius:i},function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class","e-spin-bootstrap"),n.setAttribute("viewBox","0 0 64 64"),e.insertBefore(n,e.firstChild);for(var s=0;s<=7;s++){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("class","e-path-circle_"+s),o.setAttribute("r","2"),o.setAttribute("transform","translate(32,32)"),n.appendChild(o)}}(t,o),function(e,t){var i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";for(var n=90,s=0;s<=7;s++){var o=p(0,0,24,n),r=i.querySelector(".e-path-circle_"+s);r.setAttribute("cx",o.x+""),r.setAttribute("cy",o.y+""),n=n>=360?0:n,n+=45}}(t,i)}(d,r);break;case"HighContrast":!function(t,i,o){var r=n();e[r]={timeOut:0,type:"HighContrast",radius:i},s(t,r,"e-spin-high-contrast",o),c(i,t,"e-spin-high-contrast")}(d,r,l);break;case"Bootstrap4":!function(t,i,s){var r=n();e[r]={timeOut:0,type:"Bootstrap4",radius:i},o(t,r,s,"e-spin-bootstrap4"),a(i,t,"Bootstrap4","e-spin-bootstrap4")}(d,r,l);break;case"Tailwind":case"Tailwind-dark":!function(t,i,o){var r=n();e[r]={timeOut:0,type:"Tailwind",radius:i},s(t,r,"e-spin-tailwind",o),c(i,t,"e-spin-tailwind")}(d,r,l)}}(h,d.wrap,r,l),sf.base.isNullOrUndefined(t.label)||function(e,t,i){var n=i("div",{});n.classList.add("e-spin-label"),n.innerHTML=t,e.appendChild(n)}(d.inner_wrap,t.label,l)}else{var u=sf.base.isNullOrUndefined(t.template)?null:t.template;d.wrap.classList.add("e-spin-template"),function(e,t,i){sf.base.isNullOrUndefined(i)||e.classList.add(i);e.querySelector(".e-spinner-inner").innerHTML=t}(d.wrap,u,null)}d.wrap.classList.add("e-spin-hide"),d=null}}function n(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function s(e,t,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",t),s.setAttribute("class",i);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-circle");var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","e-path-arc"),e.insertBefore(s,e.firstChild),s.appendChild(o),s.appendChild(r)}function o(e,t,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",n),s.setAttribute("id",t),o.setAttribute("class","e-path-circle"),e.insertBefore(s,e.firstChild),s.appendChild(o)}function r(t){!function(t,i,n,s,o,a,h){var c=++h.globalInfo[h.uniqueID].previousId,p=(new Date).getTime(),u=i-t,f=(v=2*h.globalInfo[h.uniqueID].radius+"",parseFloat(v)),m=l(f),g=-90*(h.globalInfo[h.uniqueID].count||0);var v;!function i(o){var l=Math.max(0,Math.min((new Date).getTime()-p,s));!function(e,t){if(!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))&&!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",d(f,m,e,a)+""),i.setAttribute("transform","rotate("+g+" "+f/2+" "+f/2+")")}}(n(l,t,u,s),o.container),c===o.globalInfo[o.uniqueID].previousId&&l<s?e[o.uniqueID].timeOut=setTimeout(i.bind(null,o),1):r(o)}(h)}(1,149,h,1333,t.globalInfo[t.uniqueID].count,75,t),t.globalInfo[t.uniqueID].count=++t.globalInfo[t.uniqueID].count%4}function a(e,t,i,n){var s=2*e,o=t.querySelector("svg."+n),r=o.querySelector("path.e-path-circle"),a=l(s),h=s/2+"px";o.setAttribute("viewBox","0 0 "+s+" "+s),o.style.width=o.style.height=s+"px",o.style.transformOrigin=h+" "+h+" "+h,r.setAttribute("d",function(e,t){var i=e/2,n=t/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(s,a)),"Material"===i&&(r.setAttribute("stroke-width",a+""),r.setAttribute("stroke-dasharray",(s-a)*Math.PI*.75+""),r.setAttribute("stroke-dashoffset",d(s,a,1,75)+""))}function l(e){return.1*e}function d(e,t,i,n){return(e-t)*Math.PI*(3*n/100-i/100)}function h(e,t,i,n){var s=(e/=n)*e,o=s*e;return t+i*(6*o*s+-15*s*s+10*o)}function c(e,t,i){var n=e,s=e,o=2*e,r=t.querySelector("."+i),a=r.querySelector(".e-path-circle"),l=r.querySelector(".e-path-arc"),d=o/2+"px";a.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(n,s,e)),l.setAttribute("d",function(e,t,i,n,s){var o=p(e,t,i,s),r=p(e,t,i,n);return["M",o.x,o.y,"A",i,i,0,0,0,r.x,r.y].join(" ")}(n,s,e,315,45)),r.setAttribute("viewBox","0 0 "+o+" "+o),r.style.transformOrigin=d+" "+d+" "+d,r.style.width=r.style.height=o+"px"}function p(e,t,i,n){var s=(n-90)*Math.PI/180;return{x:e+i*Math.cos(s),y:t+i*Math.sin(s)}}function u(e){f(e,!1),e=null}function f(t,i){var n;if(t&&(n=t.classList.contains("e-spinner-pane")?t:t.querySelector(".e-spinner-pane")),t&&n){var s=n.querySelector(".e-spinner-inner");if(i?!n.classList.contains("e-spin-template")&&!n.classList.contains("e-spin-hide"):!n.classList.contains("e-spin-template")&&!n.classList.contains("e-spin-show")){var o=n.querySelector("svg");if(sf.base.isNullOrUndefined(o))return;var a=o.getAttribute("id");switch(e[a].isAnimate=!i,e[a].type){case"Material":i?clearTimeout(e[a].timeOut):function(t,i,n){var s={};e[i].timeOut=0,s[i]=function(e,t,i,n){return{radius:t,count:i,previousId:n}}(0,n,0,0),r({uniqueID:i,container:t,globalInfo:s,timeOutVar:0})}(s,a,e[a].radius);break;case"Bootstrap":i?clearTimeout(e[a].timeOut):function(t){for(var i,n,s,o,r,a=t.querySelector("svg.e-spin-bootstrap").getAttribute("id"),l=1;l<=8;l++){d(t.getElementsByClassName("e-path-circle_"+(8===l?0:l))[0],l,l,(i=void 0,n=void 0,s=void 0,o=void 0,r=void 0,i=[],s=l,o=!1,r=1,function e(t){i.push(t),(t!==s||1===r)&&(t<=n&&t>1&&!o?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),o=!0):t<8&&o?8===(t=parseFloat((t+.2).toFixed(2)))&&(o=!1):t<=8&&!o&&(t=parseFloat((t-.2).toFixed(2))),++r,e(t))}(n=l),i),a)}function d(t,i,n,s,o){var r=0;!function i(n){e[o].isAnimate&&(++r,t.setAttribute("r",n+""),r>=s.length&&(r=0),e[o].timeOut=setTimeout(i.bind(null,s[r]),18))}(i)}}(s)}}i?sf.base.classList(n,["e-spin-hide"],["e-spin-show"]):sf.base.classList(n,["e-spin-show"],["e-spin-hide"]),t=null}}function m(e){f(e,!0),e=null}var g="e-upload-file-list",v="e-file-status",b="e-file-remove-btn",y="e-file-delete-btn",w="e-file-abort-btn",C="e-file-reload-btn",S="e-upload-progress-wrap",E="e-upload-progress-bar",x="e-upload-success",O="e-upload-fails",T="e-file-pause-btn",A=function(){function e(e,t,i,n){this.initialAttr={accept:null,multiple:!1,disabled:!1},this.uploadedFilesData=[],this.base64String=[],this.isForm=!1,this.allTypes=!1,this.pausedData=[],this.uploadMetaData=[],this.btnTabIndex="0",this.disableKeyboardNavigation=!1,this.count=-1,this.actionCompleteCount=0,this.flag=!0,this.selectedFiles=[],this.uploaderName="UploadFiles",this.fileStreams=[],this.newFileRef=0,this.isFirstFileOnSelection=!1,this.dragCounter=0,this.fileList=[],this.filesData=[],window.sfBlazor=window.sfBlazor,this.dataId=e,this.element=t,this.updateProperty(n),window.sfBlazor.setCompInstance(this),this.dotNetRef=i,this.withCredentials=!1}return e.prototype.initialize=function(){this.preRender(),this.render()},e.prototype.updateProperty=function(e){sf.base.extend(this,this,e)},e.prototype.reRenderFileList=function(){this.listParent&&(sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},e.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var e=this.dropAreaWrapper.querySelector(".e-file-drop");e&&sf.base.remove(e)}},e.prototype.propertyChanges=function(e,t){this.updateProperty(e),this.isBlazorSaveUrl=""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl);for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"AllowedExtensions":this.clearAll();break;case"EnableRtl":this.reRenderFileList();break;case"Buttons":this.buttons.browse=sf.base.isNullOrUndefined(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=sf.base.isNullOrUndefined(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=sf.base.isNullOrUndefined(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"DropArea":this.unBindDropEvents(),this.updateDropArea();break;case"Files":this.renderPreLoadFiles();break;case"MinFileSize":case"MaxFileSize":case"AutoUpload":case"SequentialUpload":this.clearAll()}}},e.prototype.preRender=function(){this.isBlazorTemplate=""!==this.template&&!sf.base.isNullOrUndefined(this.template),this.isBlazorSaveUrl=""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl),this.isBlazorSaveUrl&&this.sequentialUpload&&(this.sequentialUpload=!1),this.isBlazorSaveUrl||this.formRendered(),this.keyConfigs={enter:"enter"},this.browserName=sf.base.Browser.info.name,this.uploaderName=this.element.getAttribute("name")},e.prototype.formRendered=function(){var e=sf.base.closest(this.element,"form");if(!sf.base.isNullOrUndefined(e))for(;e&&e!==document.documentElement;e=e.parentElement)"FORM"===e.tagName&&(this.isForm=!0,this.formElement=e,e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"))},e.prototype.render=function(){this.dropAreaWrapper=sf.base.closest(this.element,".e-file-select-wrap"),this.uploadWrapper=sf.base.closest(this.element,".e-upload.e-control-wrapper"),this.browseButton=this.dropAreaWrapper.querySelector("button.e-upload-browse-btn"),this.setDropArea(),this.renderPreLoadFiles(),this.wireEvents()},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.browseButton,"click",this.browseButtonClick,this),sf.base.EventHandler.add(this.element,"change",this.onSelectFiles,this),sf.base.EventHandler.add(document,"click",this.removeFocus,this),this.keyboardModule=new sf.base.KeyboardEvents(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&sf.base.EventHandler.add(this.formElement,"reset",this.resetForm,this)},e.prototype.renderPreLoadFiles=function(){if(this.files&&this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.createFileList(this.filesData);if(sf.base.isNullOrUndefined(this.files[0].size))return;var e=[].slice.call(this.files),t=[];this.multiple||(this.clearData(),e=[e[0]]);for(var i=0,n=e;i<n.length;i++){var s=n[i],o={name:s.name+"."+s.type.split(".")[s.type.split(".").length-1],rawFile:"",size:s.size,status:this.localizedTexts("uploadSuccessMessage"),type:s.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};t.push(o),this.filesData.push(o)}if(this.isBlazorTemplate)return;this.createFileList(t),this.autoUpload||!this.listParent||this.actionButtons||this.isForm&&!this.allowUpload()||!this.showFileList||this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1)}},e.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.actionButtons=sf.base.createElement("div",{className:"e-upload-actions"}),this.uploadButton=sf.base.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=sf.base.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.uploadButton.focus(),this.wireActionButtonEvents())},e.prototype.setDropArea=function(){var e=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:document.querySelector(this.dropArea);for(var t=this.element,i=!1;t.parentNode;)(t=t.parentNode)===this.dropZoneElement&&(i=!0);!i&&e&&sf.base.remove(e)}else sf.base.isNullOrUndefined(this.dropArea)&&(this.dropZoneElement=this.uploadWrapper);this.bindDropEvents()},e.prototype.serverActionButtonsEventBind=function(e){e&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=e,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},e.prototype.serverUlElement=function(e){e&&(this.isBlazorSaveUrl||this.isBlazorTemplate)&&(this.listParent=e,this.fileList=[].slice.call(this.listParent.querySelectorAll("li")),this.serverRemoveIconBindEvent(),this.isForm||this.checkAutoUpload(this.filesData))},e.prototype.wireActionButtonEvents=function(){sf.base.EventHandler.add(this.uploadButton,"click",this.uploadButtonClick,this),sf.base.EventHandler.add(this.clearButton,"click",this.clearButtonClick,this)},e.prototype.unwireActionButtonEvents=function(){sf.base.EventHandler.remove(this.uploadButton,"click",this.uploadButtonClick),sf.base.EventHandler.remove(this.clearButton,"click",this.clearButtonClick)},e.prototype.checkActionButtonStatus=function(){if(this.actionButtons&&!this.isBlazorTemplate){var e=this.uploadWrapper.querySelectorAll(".e-validation-fails").length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+x).length+this.uploadWrapper.querySelectorAll("span.e-upload-progress").length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},e.prototype.renderButtonTemplates=function(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var e;e=sf.base.isNullOrUndefined(this.buttons.upload)?"Upload":this.buttons.upload,this.buttons.upload=e,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var t;t=sf.base.isNullOrUndefined(this.buttons.clear)?"Clear":this.buttons.clear,this.buttons.clear=t,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},e.prototype.checkAutoUpload=function(e){if(this.autoUpload){if(this.sequentialUpload)this.sequenceUpload(e);else for(var t=0;t<e.length;t++)this.upload(e[t]);this.removeActionButtons()}else this.actionButtons||this.renderActionButtons();this.checkActionButtonStatus()},e.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),this.isBlazorSaveUrl||this.isBlazorTemplate||sf.base.detach(this.actionButtons),this.actionButtons=null)},e.prototype.sequenceUpload=function(e){var t=e&&e.length?e.length:e?1:0;if(this.filesData.length-t==0||"1"!==this.filesData[this.filesData.length-t-1].statusCode){++this.count;var n=!this.showFileList;"object"===i(this.filesData[this.count])?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],n),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(e)):--this.count}},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.browseButton,"click",this.browseButtonClick),sf.base.EventHandler.remove(this.element,"change",this.onSelectFiles),sf.base.EventHandler.remove(document,"click",this.removeFocus),this.isForm&&sf.base.EventHandler.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()},e.prototype.resetForm=function(){this.clearAll()},e.prototype.keyActionHandler=function(e){var t=e.target;switch(e.action){case"enter":if(e.target===this.clearButton)this.clearButtonClick();else if(e.target===this.uploadButton)this.uploadButtonClick();else if(e.target===this.browseButton)this.browseButtonClick();else if(t.classList.contains(T)){(i=this.getCurrentMetaData(null,e)).file.statusCode="4",i.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(i,!1)}else if(t.classList.contains("e-file-play-btn"))this.resumeUpload(this.getCurrentMetaData(null,e),e);else if(t.classList.contains(C)){var i=this.getCurrentMetaData(null,e);if(sf.base.isNullOrUndefined(i)){var n=e.target.parentElement,s=this.filesData[this.fileList.indexOf(n)];this.retry(s)}else i.file.statusCode="1",i.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(i.file)}else this.removeFiles(e),t.classList.contains(w)||this.browseButton.focus();e.preventDefault(),e.stopPropagation()}},e.prototype.getCurrentMetaData=function(e,t){var i,n;if(sf.base.isNullOrUndefined(e)){var s=t.target.parentElement;i=this.filesData[this.fileList.indexOf(s)]}else i=e;for(var o=0;o<this.uploadMetaData.length;o++)this.uploadMetaData[o].file.name===i.name&&(n=this.uploadMetaData[o]);return n},e.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector(".e-clear-icon-focus")&&(document.activeElement.blur(),this.listParent.querySelector(".e-clear-icon-focus").classList.remove("e-clear-icon-focus"))},e.prototype.browseButtonClick=function(){this.element.click()},e.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},e.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},e.prototype.bindDropEvents=function(){this.dropZoneElement&&(sf.base.EventHandler.add(this.dropZoneElement,"drop",this.dropElement,this),sf.base.EventHandler.add(this.dropZoneElement,"dragover",this.dragHover,this),sf.base.EventHandler.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),sf.base.EventHandler.add(this.dropZoneElement,"paste",this.onPasteFile,this),sf.base.EventHandler.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))},e.prototype.unBindDropEvents=function(){this.dropZoneElement&&(sf.base.EventHandler.remove(this.dropZoneElement,"drop",this.dropElement),sf.base.EventHandler.remove(this.dropZoneElement,"dragover",this.dragHover),sf.base.EventHandler.remove(this.dropZoneElement,"dragleave",this.onDragLeave),sf.base.EventHandler.remove(this.dropZoneElement,"dragenter",this.onDragEnter))},e.prototype.onDragEnter=function(e){this.enabled&&(this.dropZoneElement.classList.add("e-upload-drag-hover"),this.dragCounter=this.dragCounter+1,e.preventDefault(),e.stopPropagation())},e.prototype.onDragLeave=function(e){this.enabled&&(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove("e-upload-drag-hover"))},e.prototype.dragHover=function(e){this.enabled&&("Default"!==this.dropEffect&&(e.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),-1!==e.dataTransfer.types.indexOf("Files")&&(e.preventDefault(),e.stopPropagation()))},e.prototype.dropElement=function(e){this.dragCounter=0,this.dropZoneElement.classList.remove("e-upload-drag-hover"),this.onSelectFiles(e),-1!==e.dataTransfer.types.indexOf("Files")&&(e.preventDefault(),e.stopPropagation())},e.prototype.onPasteFile=function(e){var t=e.clipboardData.items;if(1===t.length){var i=[].slice.call(t)[0];"file"===i.kind&&i.type.match("^image/")&&this.renderSelectedFiles(e,[i.getAsFile()],!1,!0)}},e.prototype.getSelectedFiles=function(e){for(var t=[],i=this.fileList[e],n=this.getFilesData(),s=+i.getAttribute("data-files-count"),o=0,r=0;r<e;r++)o+=+this.fileList[r].getAttribute("data-files-count");for(var a=o;a<o+s;a++)t.push(n[a]);return t},e.prototype.removeFiles=function(e){if(this.enabled){var i=e.target.parentElement;this.isBlazorSaveUrl&&(this.fileList=[].slice.call(this.uploadWrapper.querySelectorAll("li")));var n=this.fileList.indexOf(i),s=this.fileList[n],o=this.isFormUpload(),r=o?this.getSelectedFiles(n):this.getFilesInArray(this.filesData[n]);if(!sf.base.isNullOrUndefined(r)){if(e.target.classList.contains(w)&&!o){if(r[0].statusCode="5",!sf.base.isNullOrUndefined(s)){var a=s.querySelector("."+w);t({target:a,width:"20px"}),u(a)}this.sequentialUpload&&this.uploadSequential(),s.classList.contains("e-restrict-retry")||this.checkActionComplete(!0)}else sf.base.closest(e.target,".e-spinner-pane")||this.remove(r,!1,!1,!0,e);this.element.value="",this.checkActionButtonStatus()}}},e.prototype.removeFilesData=function(e,t){var i;if(t)this.showFileList||(i=this.filesData.indexOf(e),this.filesData.splice(i,1));else{var n=this.getLiElement(e);sf.base.isNullOrUndefined(n)||(this.isBlazorSaveUrl||this.isBlazorTemplate||sf.base.detach(n),i=this.fileList.indexOf(n),this.fileList.splice(i,1),this.filesData.splice(i,1),this.isBlazorSaveUrl||this.isBlazorTemplate||0!==this.fileList.length||sf.base.isNullOrUndefined(this.listParent)?this.dotNetRef.invokeMethodAsync("RemoveFileData",i):(sf.base.detach(this.listParent),this.listParent=null,this.removeActionButtons(),this.sequentialUpload&&i<=this.count&&--this.count))}},e.prototype.removeUploadedFile=function(e,t,i,n){var s=this,o=e,r=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);r.emitError=!1;var a=new FormData;r.beforeSend=function(n){t.currentRequest=r.httpRequest,s.currentRequestHeader&&s.updateCustomheader(r.httpRequest,s.currentRequestHeader),s.customFormDatas&&s.updateFormData(a,s.customFormDatas),!i&&s.removingEnabled?s.dotNetRef.invokeMethodAsync("RemovingEvent",t).then((function(t){t.cancel?n.cancel=!0:s.removingEventCallback(e)})):s.removingEventCallback(e),s.sequentialUpload&&--s.count};var l=this.element.getAttribute("name");t.postRawFile&&!sf.base.isNullOrUndefined(o.rawFile)&&""!==o.rawFile?a.append(l,o.rawFile,o.name):a.append(l,o.name),r.onLoad=function(e){return s.removeCompleted(e,o,n),{}},r.onError=function(e){return s.removeFailed(e,o,n),{}},r.send(a)},e.prototype.removeCompleted=function(e,t,i){var n=e&&e.currentTarget?this.getResponse(e):null,s=e.target;if(4===s.readyState&&s.status>=200&&s.status<=299){var o={e:e,response:n,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedSuccessMessage"),"2")};this.successEnabled&&this.dotNetRef.invokeMethodAsync("SuccessEvent",o),this.removeFilesData(t,i);var r=this.uploadedFilesData.indexOf(t);this.uploadedFilesData.splice(r,1),this.changeEnabled&&this.dotNetRef.invokeMethodAsync("ChangeEvent",{files:this.uploadedFilesData})}else this.removeFailed(e,t,i)},e.prototype.removeFailed=function(e,t,i){var n={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedFailedMessage"),"0")};if(!i){var s=this.filesData.indexOf(t),o=this.fileList[s];if(o){o.classList.remove(x),o.classList.add(O);var r=o.querySelector("."+v);r&&(r.classList.remove(x),r.classList.add(O))}this.checkActionButtonStatus()}this.failuredEnabled&&this.dotNetRef.invokeMethodAsync("FailureEvent",n);var a=this.getLiElement(t);sf.base.isNullOrUndefined(a)||sf.base.isNullOrUndefined(a.querySelector("."+y))||(m(a.querySelector("."+y)),sf.base.detach(a.querySelector(".e-spinner-pane")))},e.prototype.removingEventCallback=function(e){var i=this.getLiElement(e);if(!(sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.querySelector("."+y))&&sf.base.isNullOrUndefined(i.querySelector("."+b)))){var n;t({target:n=i.querySelector("."+y)?i.querySelector("."+y):i.querySelector("."+b),width:"20px"}),u(n)}},e.prototype.updateFormData=function(e,t){if(t&&t.length>0&&t[0])for(var i=function(i){var n=t[i],s=Object.keys(n).map((function(e){return n[e]}));e.append(Object.keys(n)[0],s)},n=0;n<t.length;n++)i(n)},e.prototype.updateCustomheader=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var n=t[i],s=Object.keys(n).map((function(e){return n[e]}));e.setRequestHeader(Object.keys(n)[0],s)},n=0;n<t.length;n++)i(n)},e.prototype.getFilesFromFolder=function(e){var t;if(this.filesEntries=[],t=this.multiple?e.dataTransfer.items:[e.dataTransfer.items[0]],this.checkDirectoryUpload(t))for(var i=function(i){var s=t[i].webkitGetAsEntry();if(s.isFile){var o=[];s.file((function(e){var t=s.fullPath;o.push({path:t,file:e})})),n.renderSelectedFiles(e,o,!0)}else s.isDirectory&&n.traverseFileTree(s,e)},n=this,s=0;s<t.length;s++)i(s)},e.prototype.checkDirectoryUpload=function(e){for(var t=0;e&&t<e.length;t++){if(e[t].webkitGetAsEntry().isDirectory)return!0}return!1},e.prototype.traverseFileTree=function(e,t){if(e.isFile)this.filesEntries.push(e);else if(e.isDirectory){var i=e.createReader();this.readFileFromDirectory(i,t)}},e.prototype.readFileFromDirectory=function(e,t){var i=this;e.readEntries((function(n){for(var s=0;s<n.length;s++)i.traverseFileTree(n[s],t);i.pushFilesEntries(t),n.length&&i.readFileFromDirectory(e)}))},e.prototype.pushFilesEntries=function(e){for(var t=this,i=[],n=function(n){s.filesEntries[n].file((function(s){if(t.filesEntries.length){var o=t.filesEntries[n].fullPath;i.push({path:o,file:s}),n===t.filesEntries.length-1&&(t.filesEntries=[],t.renderSelectedFiles(e,i,!0))}}))},s=this,o=0;o<this.filesEntries.length;o++)n(o)},e.prototype.onSelectFiles=function(e){var t;if(this.enabled)if("drop"===e.type)if(this.directoryUpload)this.getFilesFromFolder(e);else{var i=this.sortFilesList=e.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=i),i.length>0&&(t=this.multiple?this.sortFileList(i):[i[0]],this.renderSelectedFiles(e,t))}else t=[].slice.call(e.target.files),this.renderSelectedFiles(e,t)},e.prototype.getBase64=function(e){return new Promise((function(t,i){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return i(e)}}))},e.prototype.renderSelectedFiles=function(e,t,i,n){var s=this;this.base64String=[];var o={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null,type:e&&e.type};if(t.length<1)return o.isCanceled=!0,void(this.selectedEnabled&&this.dotNetRef.invokeMethodAsync("SelectedEvent",o));this.flag=!0;var r=[];this.multiple||(this.clearData(!0),t=[t[0]]);for(var a=0;a<t.length;a++){var l=i?t[a].file:t[a];this.updateInitialFileDetails(e,t,l,a,r,i,n)}o.filesData=r,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.allTypes||(r=this.checkExtension(r)),this.selectedEnabled?this.dotNetRef.invokeMethodAsync("SelectedEvent",o).then((function(e){s._internalRenderSelect(e,r)})):this._internalRenderSelect(o,r)},e.prototype.updateInitialFileDetails=function(e,t,i,n,s,o,r){var a={name:o?t[n].path.substring(1,t[n].path.length):r?sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):this.directoryUpload?t[n].webkitRelativePath:i.name,rawFile:i,size:i.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(i.name),mimeContentType:i.type,lastModifiedDate:new Date(i.lastModified),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};r&&(a.fileSource="paste"),a.status=""!==a.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):a.status,""===a.validationMessages.minSize&&""===a.validationMessages.maxSize||(a.statusCode="0"),s.push(a)},e.prototype._internalRenderSelect=function(e,t){if(!e.cancel){if(this.currentRequestHeader=e.currentRequest,this.customFormDatas=e.customFormData,this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(e.isModified&&e.modifiedFilesData.length>0){for(var i=0;i<e.modifiedFilesData.length;i++)for(var n=0;n<t.length;n++)e.modifiedFilesData[i].id===t[n].id&&(e.modifiedFilesData[i].rawFile=t[n].rawFile);var s=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(s),this.filesData=s,this.isForm&&!this.allowUpload()||this.isBlazorSaveUrl||this.isBlazorTemplate||this.checkAutoUpload(s)}else this.createFileList(t,!0),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.filesData=this.filesData.concat(t)),this.isForm&&!this.allowUpload()||this.isBlazorSaveUrl||this.isBlazorTemplate||this.checkAutoUpload(t);sf.base.isNullOrUndefined(e.progressInterval)||""===e.progressInterval||(this.progressInterval=e.progressInterval)}else this.filesData=this.filesData.concat(t),this.isBlazorSaveUrl&&this.dotNetRef.invokeMethodAsync("UpdateServerFileData",this.filesData,this.isForm),this.autoUpload&&(this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData,!0));this.raiseActionComplete(),this.isFirstFileOnSelection=!0}},e.prototype.allowUpload=function(){var e=!1;return this.isForm&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(e=!0),e},e.prototype.isFormUpload=function(){var e=!1;return!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(e=!0),e},e.prototype.clearData=function(e){sf.base.isNullOrUndefined(this.listParent)||this.isBlazorSaveUrl||this.isBlazorTemplate||(sf.base.detach(this.listParent),this.listParent=null),"msie"===this.browserName||e||(this.element.value=""),this.fileList=[],this.filesData=[],this.isBlazorSaveUrl||this.isBlazorTemplate?this.dotNetRef.invokeMethodAsync("ClearAllFile"):this.removeActionButtons()},e.prototype.updateSortedFileList=function(e){var t=sf.base.createElement("div",{id:"clonewrapper"}),i=-1;if(this.listParent){for(var n=0;n<this.listParent.querySelectorAll("li").length;n++){var s=this.listParent.querySelectorAll("li")[n];t.appendChild(s.cloneNode(!0))}for(var o=0,r=this.listParent.querySelectorAll("li");o<r.length;o++){var a=r[o];sf.base.detach(a)}this.removeActionButtons();var l=[].slice.call(t.childNodes);sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL();for(var d=0;d<e.length;d++){for(var h=0;h<this.filesData.length;h++)this.filesData[h].name===e[d].name&&(this.listParent.appendChild(l[h]),sf.base.EventHandler.add(l[h].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(l[h]),i=d);i!==d&&this.createFileList([e[d]])}}else this.createFileList(e)},e.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},e.prototype.checkExtension=function(e){var t=e;if(!this.isBlank(this.allowedExtensions)){for(var i=[],n=0,s=this.allowedExtensions.split(",");n<s.length;n++){var o=s[n];i.push(o.trim().toLocaleLowerCase())}for(var r=0;r<e.length;r++)-1===i.indexOf(("."+e[r].type).toLocaleLowerCase())&&(e[r].status=this.localizedTexts("invalidFileType"),e[r].statusCode="0")}return t},e.prototype.validatedFileSize=function(e){var t="",i="";return e<this.minFileSize?t=this.localizedTexts("invalidMinFileSize"):e>this.maxFileSize?i=this.localizedTexts("invalidMaxFileSize"):(t="",i=""),{minSize:t,maxSize:i}},e.prototype.isPreLoadFile=function(e){var t=!1;if(this.files)for(var i=0;i<this.files.length;i++)if(this.files[i].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[i].type===e.type){t=!0;break}return t},e.prototype.createParentUL=function(){sf.base.isNullOrUndefined(this.listParent)&&(this.listParent=sf.base.createElement("ul",{className:"e-upload-files"}),this.uploadWrapper.appendChild(this.listParent))},e.prototype.formFileList=function(e,t){var i=sf.base.createElement("li",{className:g});i.setAttribute("data-files-count",e.length+"");for(var n,s=sf.base.createElement("span",{className:"e-file-container"}),o=0,r=e;o<r.length;o++){var a=r[o],l=sf.base.createElement("span",{className:"e-file-name"});l.innerHTML=this.getFileNameOnly(a.name);var d=sf.base.createElement("span",{className:"e-file-type"}),h=this.getFileType(a.name);if(d.innerHTML="."+h,h||d.classList.add("e-hidden"),this.enableRtl){var c=sf.base.createElement("span",{className:"e-rtl-container"});c.appendChild(d),c.appendChild(l),s.appendChild(c)}else s.appendChild(l),s.appendChild(d);this.truncateName(l),n=this.formValidateFileInfo(a,i)}i.appendChild(s),this.setListToFileInfo(e,i);var p=this.listParent.querySelectorAll("li").length,u=sf.base.createElement("span");if(i.classList.contains("e-file-invalid")?(u.classList.add(v),u.classList.add("e-file-invalid"),u.innerText=e.length>1?this.localizedTexts("invalidFileSelection"):n):(u.classList.add(e.length>1?"e-file-information":"e-file-size"),u.innerText=e.length>1?this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),s.appendChild(u),sf.base.isNullOrUndefined(i.querySelector(".e-icons"))){var f=sf.base.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&f.classList.add("e-msie"),f.setAttribute("title",this.localizedTexts("remove")),i.appendChild(s),i.appendChild(f),sf.base.EventHandler.add(f,"click",this.removeFiles,this),f.classList.add(b)}var m={element:i,fileInfo:this.mergeFileInfo(e,i),index:p,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,i))};this.fileListRenderEnabled&&this.dotNetRef.invokeMethodAsync("FileListRenderingEvent",m),this.listParent.appendChild(i),this.fileList.push(i)},e.prototype.formValidateFileInfo=function(e,t){var i=e.status,n=this.validatedFileSize(e.size);""===n.minSize&&""===n.maxSize||(this.addInvalidClass(t),i=""!==n.minSize?this.localizedTexts("invalidMinFileSize"):""!==n.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var s=this.checkExtension(this.getFilesInArray(e))[0].status;return s===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(t),i=s),i},e.prototype.addInvalidClass=function(e){e.classList.add("e-file-invalid")},e.prototype.createFormInput=function(e){var t=this.element.cloneNode(!0);t.classList.add("e-hidden-file-input");for(var i=0,n=e;i<n.length;i++){n[i].input=t}t.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector(".e-file-select").appendChild(t),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")},e.prototype.getFileSize=function(e){for(var t=0,i=0,n=e;i<n.length;i++){t+=n[i].size}return t},e.prototype.mergeFileInfo=function(e,t){for(var i={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:t},n=[],s="",o=0,r=e;o<r.length;o++){var a=r[o];n.push(a.name),s=a.type}return i.name=n.join(", "),i.size=this.getFileSize(e),i.type=s,i.status=this.statusForFormUpload(e,t),i},e.prototype.statusForFormUpload=function(e,t){for(var i,n=!0,s=0,o=e;s<o.length;s++){var r=o[s];i=r.status;var a=this.validatedFileSize(r.size);""===a.minSize&&""===a.maxSize||(n=!1,i=""!==a.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var l=this.checkExtension(this.getFilesInArray(r))[0].status;l===this.localizedTexts("invalidFileType")&&(n=!1,i=l)}return n?i=this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):(t.classList.add("e-file-invalid"),i=e.length>1?this.localizedTexts("invalidFileSelection"):i),i},e.prototype.createFileList=function(e,t){if(this.isBlazorSaveUrl||this.isBlazorTemplate){var i=t?this.filesData=this.filesData.concat(e):e;this.dotNetRef.invokeMethodAsync("CreateFileList",i,this.isForm)}else if(this.createParentUL(),this.isFormUpload())this.uploadWrapper.classList.add("e-form-upload"),this.formFileList(e,this.element.files);else for(var n=0,s=e;n<s.length;n++){var o=s[n],r=sf.base.createElement("li",{className:g,attrs:{"data-file-name":o.name,"data-files-count":"1"}}),a=sf.base.createElement("span",{className:"e-file-container"}),l=sf.base.createElement("span",{className:"e-file-name",attrs:{title:o.name}});l.innerHTML=this.getFileNameOnly(o.name);var d=sf.base.createElement("span",{className:"e-file-type"}),h=this.getFileType(o.name);if(d.innerHTML="."+h,h||d.classList.add("e-hidden"),this.enableRtl){var c=sf.base.createElement("span",{className:"e-rtl-container"});c.appendChild(d),c.appendChild(l),a.appendChild(c)}else a.appendChild(l),a.appendChild(d);var p=sf.base.createElement("span",{className:"e-file-size"});p.innerHTML=this.bytesToSize(o.size),a.appendChild(p);var u=sf.base.createElement("span",{className:v});a.appendChild(u),u.innerHTML=o.status,r.appendChild(a);var f=sf.base.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&f.classList.add("e-msie"),f.setAttribute("title",this.localizedTexts("remove")),r.appendChild(f),sf.base.EventHandler.add(f,"click",this.removeFiles,this),"2"===o.statusCode?(u.classList.add(x),f.classList.add(y),f.setAttribute("title",this.localizedTexts("delete"))):"1"!==o.statusCode&&(u.classList.remove(x),u.classList.add("e-validation-fails")),this.autoUpload&&"1"===o.statusCode&&""!==this.asyncSettings.saveUrl&&(u.innerHTML=""),f.classList.contains(y)||f.classList.add(b);var m={element:r,fileInfo:o,index:e.indexOf(o),isPreload:this.isPreLoadFile(o)};this.fileListRenderEnabled&&this.dotNetRef.invokeMethodAsync("FileListRenderingEvent",m),this.listParent.appendChild(r),this.fileList.push(r),this.truncateName(l);var w=this.flag;this.isPreLoadFile(o)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=w)}},e.prototype.getSlicedName=function(e){var t;t=e.textContent,e.dataset.tail=t.slice(t.length-10)},e.prototype.setListToFileInfo=function(e,t){for(var i=0,n=e;i<n.length;i++){n[i].list=t}},e.prototype.truncateName=function(e){var t=e;("edge"!==this.browserName&&t.offsetWidth<t.scrollWidth||t.offsetWidth+1<t.scrollWidth)&&this.getSlicedName(t)},e.prototype.getFileType=function(e){var t,i=e.lastIndexOf(".");return i>=0&&(t=e.substring(i+1)),t||""},e.prototype.getFileNameOnly=function(e){var t=this.getFileType(e);return e.split("."+t)[0]},e.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var e=document.createAttribute("multiple");this.element.setAttributeNode(e)}},e.prototype.filterfileList=function(e){for(var t=[],i=0;i<e.length;i++)this.getLiElement(e[i]).classList.contains(x)||t.push(e[i]);return t},e.prototype.updateStatus=function(e,t,i,n){if(void 0===n&&(n=!0),""!==t&&!sf.base.isNullOrUndefined(t)&&""!==i&&!sf.base.isNullOrUndefined(i))if(this.isBlazorSaveUrl)for(var s=0;s<this.filesData.length;s++)this.filesData[s].name===e.name&&(this.filesData[s].status=t,this.filesData[s].statusCode=i);else e.status=t,e.statusCode=i;if(n){var o=this.getLiElement(e);sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(o.querySelector("."+v))||""===t||sf.base.isNullOrUndefined(t)||(o.querySelector("."+v).textContent=t)}return e},e.prototype.getLiElement=function(e){for(var t,i=0;i<this.filesData.length;i++)(sf.base.isNullOrUndefined(this.filesData[i].id)||sf.base.isNullOrUndefined(e.id)?this.filesData[i].name===e.name:this.filesData[i].name===e.name&&this.filesData[i].id===e.id)&&(t=i);return this.fileList[t]},e.prototype.createProgressBar=function(e){var t=sf.base.createElement("span",{className:S}),i=sf.base.createElement("progressbar",{className:E,attrs:{value:"0",max:"100"}}),n=sf.base.createElement("span",{className:"e-progress-inner-wrap"});i.setAttribute("style","width: 0%");var s=sf.base.createElement("span",{className:"e-progress-bar-text"});s.textContent="0%",n.appendChild(i),t.appendChild(n),t.appendChild(s),e.querySelector(".e-file-container").appendChild(t)},e.prototype.updateProgressbar=function(e,t){if(!isNaN(Math.round(e.loaded/e.total*100))&&!sf.base.isNullOrUndefined(t.querySelector("."+E)))if(sf.base.isNullOrUndefined(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%");else{var i=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);0!==i&&100!==i||this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%")}},e.prototype.changeProgressValue=function(e,t){e.querySelector("."+E).setAttribute("style","width:"+t),e.querySelector(".e-progress-bar-text").textContent=t},e.prototype.uploadInProgress=function(e,t,i,n){var s=this.getLiElement(t);if(!sf.base.isNullOrUndefined(s)||i){if(sf.base.isNullOrUndefined(s))this.cancelUploadingFile(t,e,n);else{"5"===t.statusCode&&this.cancelUploadingFile(t,e,n,s),s.querySelectorAll("."+S).length>0||!s.querySelector("."+v)||(s.querySelector("."+v).classList.add("e-upload-progress"),this.createProgressBar(s),this.updateProgressBarClasses(s,"e-upload-progress"),s.querySelector("."+v).classList.remove(O)),this.updateProgressbar(e,s);var o=s.querySelector("."+b);sf.base.isNullOrUndefined(o)||(o.classList.add(w,"e-upload-progress"),o.setAttribute("title",this.localizedTexts("abort")),o.classList.remove(b))}var r={e:e,operation:"upload",file:this.updateStatus(t,this.localizedTexts("inProgress"),"3"),lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total};this.progressingEnabled&&this.dotNetRef.invokeMethodAsync("ProgressEvent",r)}},e.prototype.cancelEventCallback=function(e,t,i,n){var s=this;if(n.cancel){if(e.statusCode="3",!sf.base.isNullOrUndefined(i)){var o=i.querySelector("."+w);sf.base.isNullOrUndefined(o)||(m(o),sf.base.detach(i.querySelector(".e-spinner-pane")))}}else{t.emitError=!1,t.httpRequest.abort();var r=new FormData;if("5"===e.statusCode){var a=this.element.getAttribute("name");r.append(a,e.name),r.append("cancel-uploading",e.name);var l=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);l.emitError=!1,l.onLoad=function(t){return s.removecanceledFile(t,e),{}},l.send(r)}}},e.prototype.cancelUploadingFile=function(e,t,i,n){var s=this;if("5"===e.statusCode){var o={event:t,fileData:e,cancel:!1};this.cancelEnabled?this.dotNetRef.invokeMethodAsync("CancelingEvent",o).then((function(t){s.cancelEventCallback(e,i,n,t)})):this.cancelEventCallback(e,i,n,o)}},e.prototype.removecanceledFile=function(e,t){var i=this.getLiElement(t);if(!(sf.base.isNullOrUndefined(i)||i.querySelector("."+C)||sf.base.isNullOrUndefined(i.querySelector("."+w)))){this.updateStatus(t,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(e,t,i);var n=i.querySelector("."+b);sf.base.isNullOrUndefined(i)||(m(n),sf.base.detach(i.querySelector(".e-spinner-pane")));var s={event:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"cancel",file:t};this.successEnabled&&this.dotNetRef.invokeMethodAsync("SuccessEvent",s)}},e.prototype.renderFailureState=function(e,t,i){var n=this;this.updateProgressBarClasses(i,O),this.removeProgressbar(i,"failure"),sf.base.isNullOrUndefined(i.querySelector(".e-file-status"))||i.querySelector(".e-file-status").classList.add(O);var s=i.querySelector("."+w);sf.base.isNullOrUndefined(s)||(s.classList.remove(w,"e-upload-progress"),s.classList.add(b),s.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),s.parentElement.insertBefore(this.pauseButton,s),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),i.querySelector("."+C).addEventListener("click",(function(e){n.reloadcanceledFile(e,t,i,!1)}),!1))},e.prototype.reloadcanceledFile=function(e,t,i,n){t.statusCode="1",t.status=this.localizedTexts("readyToUploadMessage"),n||(i.querySelector("."+v).classList.remove(O),sf.base.isNullOrUndefined(i.querySelector("."+C))||sf.base.detach(i.querySelector("."+C)),this.pauseButton=null),i.classList.add("e-restrict-retry"),this.upload([t])},e.prototype.uploadComplete=function(e,t,i){var n=e.target;if(4===n.readyState&&n.status>=200&&n.status<=299){var s=this.getLiElement(t);if(sf.base.isNullOrUndefined(s)&&(!i||sf.base.isNullOrUndefined(i)))return;if(!sf.base.isNullOrUndefined(s)){this.updateProgressBarClasses(s,x),this.removeProgressbar(s,"success");var o=s.querySelector("."+w);sf.base.isNullOrUndefined(o)||(o.classList.add(y),o.setAttribute("title",this.localizedTexts("delete")),o.classList.remove(w),o.classList.remove("e-upload-progress"))}this.raiseSuccessEvent(e,t)}else this.uploadFailed(e,t)},e.prototype.getResponse=function(e){var t=e.currentTarget;return{readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials}},e.prototype.serverRemoveIconBindEvent=function(){if(this.uploadWrapper&&this.isBlazorSaveUrl)for(var e=[].slice.call(this.uploadWrapper.querySelectorAll("ul li")),t=0;t<e.length;t++){var i=e[t]?e[t].querySelector(".e-icons"):null;i&&(sf.base.EventHandler.remove(i,"click",this.removeFiles),sf.base.EventHandler.add(i,"click",this.removeFiles,this))}},e.prototype.raiseSuccessEvent=function(e,t){var i=this,n=e&&e.currentTarget?this.getResponse(e):null,s=this.localizedTexts("uploadSuccessMessage"),o={e:e,response:n,operation:"upload",file:this.updateStatus(t,s,"2",!1),statusText:s};if(!this.isBlazorSaveUrl){var r=this.getLiElement(t);if(!sf.base.isNullOrUndefined(r)){var a=r.querySelector(".e-spinner-pane");sf.base.isNullOrUndefined(a)||(m(r),sf.base.detach(a))}}this.successEnabled?this.dotNetRef.invokeMethodAsync("SuccessEvent",o).then((function(e){i.successEventCallback(t,e)})):this.successEventCallback(t,o)},e.prototype.successEventCallback=function(e,t){this.updateStatus(e,t.statusText,"2"),this.uploadedFilesData.push(e),!this.isBlazorSaveUrl&&this.changeEnabled&&this.dotNetRef.invokeMethodAsync("ChangeEvent",{files:this.uploadedFilesData}),!this.isBlazorSaveUrl&&this.isBlazorTemplate&&this.dotNetRef.invokeMethodAsync("CreateFileList",this.filesData,this.isForm),this.checkActionButtonStatus(),this.sequentialUpload&&!this.showFileList&&this.uploadSequential(),this.fileList.length>0&&(this.getLiElement(e).classList.contains("e-restrict-retry")?this.getLiElement(e).classList.remove("e-restrict-retry"):(this.uploadSequential(),this.checkActionComplete(!0)))},e.prototype.uploadFailed=function(e,t){var i=this,n=this.getLiElement(t),s=e&&e.currentTarget?this.getResponse(e):null,o=this.localizedTexts("uploadFailedMessage"),r={e:e,response:s,operation:"upload",file:this.updateStatus(t,o,"0",!1),statusText:o,retryFiles:null};sf.base.isNullOrUndefined(n)||this.renderFailureState(e,t,n),this.failuredEnabled?this.dotNetRef.invokeMethodAsync("FailureEvent",r).then((function(e){i.failureEventCallback(t,e)})):this.failureEventCallback(t,r)},e.prototype.failureEventCallback=function(e,t){this.updateStatus(e,t.statusText,"0"),this.checkActionButtonStatus(),this.uploadSequential(),this.checkActionComplete(!0);var i=t.retryFiles;null!=i&&this.retry(i)},e.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},e.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},e.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var e={fileData:[]};e.fileData=this.getSelectedFileStatus(this.selectedFiles),this.actionCompleteEnabled&&this.dotNetRef.invokeMethodAsync("ActionCompleteEvent",e)}},e.prototype.getSelectedFileStatus=function(e){for(var t=[],i=0,n=0;n<e.length;n++)for(var s=e[n],o=0;o<this.filesData.length;o++)this.filesData[o].name===s.name&&(t[i]=this.filesData[o],++i);return t},e.prototype.updateProgressBarClasses=function(e,t){var i=e.querySelector("."+E);sf.base.isNullOrUndefined(i)||i.classList.add(t)},e.prototype.removeProgressbar=function(e,t){var i=this;sf.base.isNullOrUndefined(e.querySelector("."+S))||(this.progressAnimation=new sf.base.Animation({duration:1250}),this.progressAnimation.animate(e.querySelector("."+S),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector(".e-progress-bar-text"),{name:"FadeOut"}),setTimeout((function(){i.animateProgressBar(e,t)}),750))},e.prototype.animateProgressBar=function(e,t){"success"===t?(e.classList.add(x),sf.base.isNullOrUndefined(e.querySelector("."+v))||(e.querySelector("."+v).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+v),{name:"FadeIn"}),e.querySelector("."+v).classList.add(x),e.querySelector("."+v).classList.remove(O))):sf.base.isNullOrUndefined(e.querySelector("."+v))||(e.querySelector("."+v).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+v),{name:"FadeIn"}),e.querySelector("."+v).classList.add(O)),e.querySelector("."+S)&&sf.base.detach(e.querySelector("."+S))},e.prototype.localizedTexts=function(e){return this.localeText[e]},e.prototype.chunkUpload=function(e,t,i){var n=Math.min(this.asyncSettings.chunkSize,e.size),s={chunkIndex:0,blob:e.rawFile.slice(0,n),file:e,start:0,end:n,retryCount:0,request:null};this.sendRequest(e,s,t,i)},e.prototype.sendRequest=function(e,t,i,n){var s=this,o=new FormData;if(!e.rawFile)for(var r=0;r<this.selectedFiles.length;r++)e.id===this.selectedFiles[r].id&&(e.rawFile=this.selectedFiles[r].rawFile);var a=e.rawFile.slice(t.start,t.end);o.append("chunkFile",a,e.name),o.append(this.uploaderName,a,e.name),o.append("chunk-index",t.chunkIndex.toString()),o.append("chunkIndex",t.chunkIndex.toString());var l=Math.max(Math.ceil(e.size/this.asyncSettings.chunkSize),1);o.append("total-chunk",l.toString()),o.append("totalChunk",l.toString());var d=new sf.base.Ajax({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});d.emitError=!1,d.onLoad=function(e){return s.chunkUploadComplete(e,t,i),{}},d.onUploadProgress=function(e){return s.chunkUploadInProgress(e,t,i),{}};var h={fileData:e,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};d.beforeSend=function(i){h.currentRequest=d.httpRequest,h.currentChunkIndex=t.chunkIndex,s.currentRequestHeader&&s.updateCustomheader(d.httpRequest,s.currentRequestHeader),s.customFormDatas&&s.updateFormData(o,s.customFormDatas),0===h.currentChunkIndex?s.uploadingEnabled?s.dotNetRef.invokeMethodAsync("UploadingEvent",h).then((function(t){s.uploadingEventCallback(o,t,i,e)})):s.uploadingEventCallback(o,h,i,e):s.chunkUploadingEnabled?s.dotNetRef.invokeMethodAsync("ChunkUploadingEvent",h).then((function(t){s.uploadingEventCallback(o,t,i,e)})):s.uploadingEventCallback(o,h,i,e)},d.onError=function(e){return s.chunkUploadFailed(e,t,i),{}},d.send(o),t.request=d},e.prototype.uploadingEventCallback=function(e,t,i,n){t.cancel?this.eventCancelByArgs(i,t,n):this.updateFormData(e,t.customFormData)},e.prototype.eventCancelByArgs=function(e,t,i){var n=this;if(e.cancel=!0,"5"!==t.fileData.statusCode){var s=this.getLiElement(t.fileData);s.querySelector("."+v).innerHTML=this.localizedTexts("fileUploadCancel"),s.querySelector("."+v).classList.add(O),t.fileData.statusCode="5",t.fileData.status=this.localizedTexts("fileUploadCancel"),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var o=s.querySelector("."+b);o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",(function(e){n.reloadcanceledFile(e,i,s)}),!1),this.checkActionButtonStatus()}},e.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||sf.base.isNullOrUndefined(this.asyncSettings.chunkSize))},e.prototype.chunkUploadComplete=function(e,t,i){var n,s=this,o=e.target;if(4===o.readyState&&o.status>=200&&o.status<300){var r=e&&e.currentTarget?this.getResponse(e):null,a=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1),l={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:a,chunkSize:this.asyncSettings.chunkSize,response:r};if(this.chunkSuccessEnabled&&this.dotNetRef.invokeMethodAsync("ChunkSuccessEvent",l),!sf.base.isNullOrUndefined(i)&&i||(n=this.getLiElement(t.file)),this.updateMetaData(t),t.end===t.file.size&&(t.file.statusCode="3"),"5"===t.file.statusCode){var d={event:e,fileData:t.file,cancel:!1};this.cancelEnabled?this.dotNetRef.invokeMethodAsync("CancelingEvent",d).then((function(e){s.cancelingEventCallback(t,n,o,i,e)})):this.cancelingEventCallback(t,n,o,i,d)}else{if(a-1===t.chunkIndex&&a>t.chunkIndex){var h=this.pausedData.indexOf(t);return h>=0&&this.pausedData.splice(h,1),sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(i)||!i)&&n&&(n&&!sf.base.isNullOrUndefined(n.querySelector("."+T))&&sf.base.detach(n.querySelector("."+T)),this.removeChunkProgressBar(t)),void this.raiseSuccessEvent(e,t.file)}"4"!==t.file.statusCode&&this.sendNextRequest(t)}}else this.chunkUploadFailed(e,t)},e.prototype.cancelingEventCallback=function(e,t,i,n,s){var o=this;if(s.cancel){e.file.statusCode="3";var r=t.querySelector("."+w);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(r)||(m(r),sf.base.detach(t.querySelector(".e-spinner-pane"))),this.sendNextRequest(e)}else{e.request.emitError=!1,i.abort();var a=new FormData,l=this.element.getAttribute("name");a.append(l,e.file.name),a.append("cancel-uploading",e.file.name),a.append("cancelUploading",e.file.name);var d=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);d.emitError=!1,d.onLoad=function(t){return o.removeChunkFile(t,e,n),{}},d.send(a)}},e.prototype.sendNextRequest=function(e){e.start=e.end,e.end+=this.asyncSettings.chunkSize,e.end=Math.min(e.end,e.file.size),e.chunkIndex+=1,this.sendRequest(e.file,e)},e.prototype.removeChunkFile=function(e,t,i){if(sf.base.isNullOrUndefined(this.template)&&sf.base.isNullOrUndefined(i)&&!i){var n=this.getLiElement(t.file),s=n.querySelector("."+w),o=s;this.updateStatus(t.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(n,O),this.removeProgressbar(n,"failure"),s&&s.classList.remove(w),s&&s.classList.add(b),s&&s.setAttribute("title",this.localizedTexts("remove"));var r=n.querySelector("."+T);r&&r.classList.add(C),r&&r.classList.remove(T),r&&r.setAttribute("title",this.localizedTexts("retry")),sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(n.querySelector(".e-spinner-pane"))||(m(o),sf.base.detach(n.querySelector(".e-spinner-pane")))}},e.prototype.pauseUpload=function(e,t,i){e.file.statusCode="4",e.file.status=this.localizedTexts("pause"),this.updateMetaData(e);var n={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(e,i,n)},e.prototype.abortUpload=function(e,t,i){"4"!==e.file.statusCode&&(e.request.emitError=!1,e.request.httpRequest.abort());var n=this.getLiElement(e.file);if(sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(t)||!t)){var s=n.querySelector("."+T);s.classList.remove(T),s.classList.add("e-file-play-btn"),s.setAttribute("title",this.localizedTexts("resume")),s.nextElementSibling.classList.add(b),s.nextElementSibling.classList.remove(w),s.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(var o=0;o<this.pausedData.length;o++)this.pausedData[o].file.name===e.file.name&&this.pausedData.splice(o,1);this.pausedData.push(e),this.pausedEnabled&&this.dotNetRef.invokeMethodAsync("PausingEvent",i)},e.prototype.resumeUpload=function(e,t,i){var n,s=this.getLiElement(e.file);sf.base.isNullOrUndefined(s)||(n=s.querySelector(".e-file-play-btn")),sf.base.isNullOrUndefined(n)||!sf.base.isNullOrUndefined(i)&&i||(n.classList.remove("e-file-play-btn"),n.classList.add(T),n.setAttribute("title",this.localizedTexts("pause")),n.nextElementSibling.classList.remove(b),n.nextElementSibling.classList.add(w),n.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),e.file.status=this.localizedTexts("inProgress"),e.file.statusCode="3",this.updateMetaData(e);var o={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.resumeEnabled&&this.dotNetRef.invokeMethodAsync("ResumingEvent",o);for(var r=0;r<this.pausedData.length;r++)this.pausedData[r].end===this.pausedData[r].file.size?this.chunkUploadComplete(t,e,i):this.pausedData[r].file.name===e.file.name&&(this.pausedData[r].start=this.pausedData[r].end,this.pausedData[r].end=this.pausedData[r].end+this.asyncSettings.chunkSize,this.pausedData[r].end=Math.min(this.pausedData[r].end,this.pausedData[r].file.size),this.pausedData[r].chunkIndex=this.pausedData[r].chunkIndex+1,this.sendRequest(this.pausedData[r].file,this.pausedData[r],i))},e.prototype.updateMetaData=function(e){-1===this.uploadMetaData.indexOf(e)||this.uploadMetaData.splice(this.uploadMetaData.indexOf(e),1),this.uploadMetaData.push(e)},e.prototype.removeChunkProgressBar=function(e){var t=this.getLiElement(e.file);if(!sf.base.isNullOrUndefined(t)){this.updateProgressBarClasses(t,x),this.removeProgressbar(t,"success");var i=t.querySelector("."+w);sf.base.isNullOrUndefined(i)||(i.classList.add(y),i.setAttribute("title",this.localizedTexts("delete")),i.classList.remove(w,"e-upload-progress"))}},e.prototype.chunkUploadFailed=function(e,t,i){var n,s=this,o=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1);!sf.base.isNullOrUndefined(this.template)||!sf.base.isNullOrUndefined(i)&&i||(n=this.getLiElement(t.file));var r=e&&e.currentTarget?this.getResponse(e):null,a={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:o,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:r};this.chunkFailuredEnabled?this.dotNetRef.invokeMethodAsync("ChunkFailureEvent",a).then((function(o){s.chunkFailureCallback(e,t,n,r,i,o)})):this.chunkFailureCallback(e,t,n,r,i,a)},e.prototype.chunkFailureCallback=function(e,t,i,n,s,o){var r=this;if(!o.cancel)if(t.retryCount<this.asyncSettings.retryCount)setTimeout((function(){r.retryRequest(i,t,s)}),this.asyncSettings.retryAfterDelay);else{if(!sf.base.isNullOrUndefined(i)){var a=i.querySelector("."+T)?i.querySelector("."+T):i.querySelector(".e-file-play-btn");sf.base.isNullOrUndefined(a)||(a.classList.add(C),a.classList.remove(T,"e-file-play-btn")),this.updateProgressBarClasses(i,O),this.removeProgressbar(i,"failure"),i.querySelector(".e-icons").classList.remove("e-upload-progress");var l=i.querySelector("."+w)?i.querySelector("."+w):i.querySelector("."+b);l.classList.remove(w),sf.base.isNullOrUndefined(i.querySelector("."+T))||sf.base.detach(i.querySelector("."+T)),t.start>0?(l.classList.add(y),l.setAttribute("title",this.localizedTexts("delete"))):(l.classList.add(b),l.setAttribute("title",this.localizedTexts("remove")))}t.retryCount=0;var d=t.file,h=this.localizedTexts("uploadFailedMessage"),c={e:e,response:n,operation:"upload",file:this.updateStatus(d,h,"0",!1),statusText:h,retryFiles:null};this.failuredEnabled?this.dotNetRef.invokeMethodAsync("FailureEvent",c).then((function(e){r.failureCallback(d,e)})):this.failureCallback(d,c)}},e.prototype.failureCallback=function(e,t){this.updateStatus(e,t.statusText,"0"),this.uploadSequential(),this.checkActionComplete(!0);var i=t.retryFiles;null!=i&&this.retry(i)},e.prototype.retryRequest=function(e,t,i){sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(i)||!i)&&e&&this.updateProgressBarClasses(e,O),t.retryCount+=1,this.sendRequest(t.file,t)},e.prototype.checkPausePlayAction=function(e){var t=e.target,i=e.target.parentElement,n=this.fileList.indexOf(i),s=this.filesData[n],o=this.getCurrentMetaData(s);t.classList.contains(T)?this.pauseUpload(o,e):t.classList.contains("e-file-play-btn")?this.resumeUpload(o,e):t.classList.contains(C)&&(o.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(o,!1):this.retryUpload(o,!0))},e.prototype.retryUpload=function(e,t){t?(e.end=e.end+this.asyncSettings.chunkSize,e.start=e.start+this.asyncSettings.chunkSize,this.sendRequest(e.file,e)):(e.file.statusCode="1",e.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(e.file)),this.getLiElement(e.file).classList.add("e-restrict-retry")},e.prototype.chunkUploadInProgress=function(e,t,i){var n=this;if("4"!==t.file.statusCode){"4"!==t.file.statusCode&&"5"!==t.file.statusCode&&(t.file.statusCode="3",t.file.status=this.localizedTexts("inProgress")),this.updateMetaData(t);var s=this.getLiElement(t.file);if(!sf.base.isNullOrUndefined(s)){var o=s.querySelector("."+C);if(sf.base.isNullOrUndefined(o)||(o.classList.add(T),o.setAttribute("title",this.localizedTexts("pause")),o.classList.remove(C)),!sf.base.isNullOrUndefined(s)){if(!(s.querySelectorAll("."+S).length>0)){var r=s.querySelector("."+v);sf.base.isNullOrUndefined(this.template)&&(r.classList.add("e-upload-progress"),r.classList.remove(O),this.createProgressBar(s),this.updateProgressBarClasses(s,"e-upload-progress"));var a=s.querySelector("."+b)?s.querySelector("."+b):s.querySelector("."+y);sf.base.isNullOrUndefined(a)||(a.classList.add(w),a.setAttribute("title",this.localizedTexts("abort")),a.classList.remove(b))}if(!isNaN(Math.round(e.loaded/e.total*100))&&sf.base.isNullOrUndefined(this.template)&&"4"!==t.file.statusCode){var l=void 0,d=Math.ceil(t.file.size/this.asyncSettings.chunkSize)-1;this.asyncSettings.chunkSize&&d&&(l=Math.round(t.chunkIndex/d*100),this.changeProgressValue(s,l.toString()+"%"))}0===t.chunkIndex&&this.checkActionButtonStatus()}if(sf.base.isNullOrUndefined(s.querySelector("."+T))&&sf.base.isNullOrUndefined(this.template)&&sf.base.isNullOrUndefined(s.querySelector("."+y))){this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");var h=s.querySelector("."+w);h.parentElement.insertBefore(this.pauseButton,h),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",(function(e){n.checkPausePlayAction(e)}),!1)}}}},e.prototype.bytesToSize=function(e){var t=-1;if(!e)return"0.0 KB";do{e/=1024,t++}while(e>99);return t>=2&&(e*=1024,t=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][t]},e.prototype.sortFileList=function(e){for(var t=e=e||this.sortFilesList,i=[],n=0;n<t.length;n++)i.push(t[n].name);for(var s=[],o=0,r=i.sort();o<r.length;o++){var a=r[o];for(n=0;n<t.length;n++)a===t[n].name&&s.push(t[n])}return s},e.prototype.destroy=function(){this.element.value=null,this.isBlazorSaveUrl||this.isBlazorTemplate||this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var e=0,t=["aria-label","directory","webkitdirectory","tabindex"];e<t.length;e++){var i=t[e];this.element.removeAttribute(i)}},e.prototype.upload=function(e,t){var i=this;if(e=e||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||t)&&this.showFileList)this.sequenceUpload(e);else{var n=this.getFilesInArray(e),s={customFormData:[],currentRequest:null,cancel:!1,withCredentials:!1,filesData:n};this.beforeUploadEnabled?this.dotNetRef.invokeMethodAsync("BeforeUploadEvent",s).then((function(e){i.beforeUploadCallback(n,t,e)})):this.beforeUploadCallback(n,t,s)}},e.prototype.beforeUploadCallback=function(e,t,i){i.cancel||(this.currentRequestHeader=i.currentRequest?i.currentRequest:this.currentRequestHeader,this.customFormDatas=i.customFormData&&i.customFormData.length>0?i.customFormData:this.customFormDatas,this.withCredentials=i.withCredentials?i.withCredentials:this.withCredentials,this.uploadFiles(e,t))},e.prototype.getFilesInArray=function(e){var t=[];return e instanceof Array?t=this.getFileListData(e):t.push(e),t},e.prototype.getFileListData=function(e){var t=[];if(!sf.base.isNullOrUndefined(this.filesData)&&!sf.base.isNullOrUndefined(e))for(var i=function(i){t.push(n.filesData.filter((function(t){return t.id===e[i].id}))[0])},n=this,s=0;s<e.length;s++)i(s);return sf.base.isNullOrUndefined(t)?[]:t},e.prototype.serverReadFileBase64=function(e,t,i){var n=this;return new Promise((function(s,o){var r,a=n.fileStreams[e].rawFile;try{var l=new FileReader;l.onload=(r=l,function(){try{var e=r.result,t=e?e.split(";base64,")[1]:null;s(t)}catch(e){o(e)}}),l.readAsDataURL(a.slice(t,t+i))}catch(e){o(e)}}))},e.prototype.uploadFileCount=function(e){var t=this.filesData;return t&&0!==t.length?t.length:-1},e.prototype.getFileRead=function(e,t){var i=this.filesData;if(!i||0===i.length)return-1;var n=i[e],s=this.newFileRef++;return this.fileStreams[s]=n,s},e.prototype.getFileInfo=function(e,t){var i=this.filesData;return i&&0!==i.length&&i[e]?this.filesData[e]:null},e.prototype.uploadFiles=function(e,t){var i=this,n=[];if(""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl))this.dotNetRef.invokeMethodAsync("GetFileDetails",e);else{if(!t||sf.base.isNullOrUndefined(t))if(this.multiple)n=this.filterfileList(e);else{var s=[];s.push(e[0]),n=this.filterfileList(s)}else n=e;for(var o=function(e){r.checkChunkUpload()?r.uploadFilesRequest(n,e,t):n[e]&&n[e].rawFile instanceof File&&r.getBase64(n[e].rawFile).then((function(s){i.base64String.push(s),i.uploadFilesRequest(n,e,t)}))},r=this,a=0;a<n.length;a++)o(a)}},e.prototype.uploadFilesRequest=function(e,t,i){var n,s=this,o=[],r=this.checkChunkUpload(),a=new sf.base.Ajax(this.asyncSettings.saveUrl,"POST",!0,null);a.emitError=!1,n=e.slice(0),o.push(n[t].rawFile);var l={cancel:!1,currentRequest:null,customFormData:[],fileData:n[t]},d=new FormData;if(a.beforeSend=function(i){l.currentRequest=a.httpRequest,l.currentRequest.withCredentials=s.withCredentials,l.fileData.rawFile=r?l.fileData.rawFile:s.base64String[t],s.currentRequestHeader&&s.updateCustomheader(a.httpRequest,s.currentRequestHeader),s.customFormDatas&&s.updateFormData(d,s.customFormDatas),s.uploadingEnabled?s.dotNetRef.invokeMethodAsync("UploadingEvent",l).then((function(n){l=n,s.uploadCallback(i,r,e,d,t,o,n)})):s.uploadCallback(i,r,e,d,t,o,l)},"1"===e[t].statusCode){var h=this.element.getAttribute("name");d.append(h,e[t].rawFile,e[t].name),r&&e[t].size>this.asyncSettings.chunkSize?this.chunkUpload(e[t],i,t):(a.onLoad=function(n){return l.cancel||s.uploadComplete(n,e[t],i),{}},a.onUploadProgress=function(n){return l.cancel||s.uploadInProgress(n,e[t],i,a),{}},a.onError=function(i){return s.uploadFailed(i,e[t]),{}},a.send(d))}},e.prototype.uploadCallback=function(e,t,i,n,s,o,r){t||(i[s].rawFile=r.fileData.rawFile=o[s]),r.cancel&&this.eventCancelByArgs(e,r,i[s]),this.updateFormData(n,r.customFormData)},e.prototype.spliceFiles=function(e){for(var t=this.fileList[e],i=this.getFilesData(),n=+t.getAttribute("data-files-count"),s=0,o=0;o<e;o++)s+=+this.fileList[o].getAttribute("data-files-count");for(var r=s+n-1;r>=s;r--)i.splice(r,1)},e.prototype.remove=function(e,t,i,n,s){var o=this;sf.base.isNullOrUndefined(n)&&(n=!0);var r={cancel:!1,customFormData:[],currentRequest:null,filesData:this.getFilesInArray(e),postRawFile:n};this.beforeRemoveEnabled?this.dotNetRef.invokeMethodAsync("BeforeRemoveEvent",r).then((function(n){o.beforeRemoveCallback(e,t,i,s,n)})):this.beforeRemoveCallback(e,t,i,s,r)},e.prototype.beforeRemoveCallback=function(e,t,i,n,s){var o=this,r={event:n,cancel:!1,filesData:[],customFormData:[],postRawFile:s.postRawFile,currentRequest:null};if(!s.cancel){this.currentRequestHeader=s.currentRequest,this.customFormDatas=s.customFormData;if(this.isFormUpload()&&!this.isBlazorSaveUrl)r.filesData=e,this.dotNetRef.invokeMethodAsync("RemovingEvent",r).then((function(t){o.removeCallback(e,t)}));else if(!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||this.isBlazorSaveUrl){var a=[];(e=sf.base.isNullOrUndefined(e)?this.filesData:e)instanceof Array?a=e:a.push(e),r.filesData=a;for(var l=this.asyncSettings.removeUrl,d=""!==l&&!sf.base.isNullOrUndefined(l),h=function(e){c.filesData.indexOf(e);var s=c.uploadedFilesData.indexOf(e);("2"===e.statusCode||"4"===e.statusCode||"0"===e.statusCode&&-1!==s)&&d?c.removeUploadedFile(e,r,i,t):!i&&c.removingEnabled?c.dotNetRef.invokeMethodAsync("RemovingEvent",r).then((function(i){i.cancel||o.removeFilesData(e,t)})):c.removeFilesData(e,t),n&&!n.target.classList.contains(b)&&c.checkActionComplete(!1)},c=this,p=0,u=a;p<u.length;p++){h(u[p])}}else r.filesData=this.getFilesData(),this.removingEnabled?this.dotNetRef.invokeMethodAsync("RemovingEvent",r).then((function(e){e.cancel||o.clearAll()})):this.clearAll()}},e.prototype.removeCallback=function(e,t){if(!t.cancel)for(var i=!1,n=void 0,s=0,o=this.getFilesInArray(e);s<o.length;s++){var r=o[s];if(i||(n=this.fileList.indexOf(r.list)),n>-1){var a=sf.base.isNullOrUndefined(r.input)?null:r.input;a&&sf.base.detach(a),this.spliceFiles(n),sf.base.detach(this.fileList[n]),this.fileList.splice(n,1),i=!0,n=-1}}},e.prototype.clearAll=function(){var e=this;if(sf.base.isNullOrUndefined(this.listParent)&&!this.isBlazorSaveUrl&&!this.isBlazorTemplate)return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);var t={cancel:!1,filesData:this.filesData};this.clearEnabled?this.dotNetRef.invokeMethodAsync("ClearingEvent",t).then((function(t){t.cancel||(e.clearData(),e.actionCompleteCount=0,e.count=-1)})):(this.clearData(),this.actionCompleteCount=0,this.count=-1)},e.prototype.getFilesData=function(e){if(sf.base.isNullOrUndefined(e)){for(var t=0;t<this.filesData.length;t++)this.filesData[t].rawFile=this.base64String[t];return this.filesData}return this.getSelectedFiles(e)},e.prototype.pause=function(e,t){e=e||this.filesData;var i=this.getFilesInArray(e);this.pauseUploading(i,t)},e.prototype.pauseUploading=function(e,t){for(var i=this.getFiles(e),n=0;n<i.length;n++)"3"===i[n].statusCode&&this.pauseUpload(this.getCurrentMetaData(i[n],null),null,t)},e.prototype.getFiles=function(e){var t=[];return sf.base.isNullOrUndefined(e)||e instanceof Array?t=e:t.push(e),t},e.prototype.resume=function(e,t){e=e||this.filesData;var i=this.getFilesInArray(e);this.resumeFiles(i,t)},e.prototype.resumeFiles=function(e,t){for(var i=this.getFiles(e),n=0;n<i.length;n++)"4"===i[n].statusCode&&this.resumeUpload(this.getCurrentMetaData(i[n],null),null,t)},e.prototype.retry=function(e,t,i){if(null==e){for(var n=0;n<this.filesData.length;n++)if("File failed to upload"==this.filesData[n].status){var s=this.getLiElement(this.filesData[n]);this.reloadcanceledFile(null,this.filesData[n],s,!1);break}}else{e=e||this.filesData;var o=this.getFilesInArray(e);this.retryFailedFiles(o,t,i)}},e.prototype.retryFailedFiles=function(e,t,i){for(var n=this.getFiles(e),s=0;s<n.length;s++)if("5"===n[s].statusCode||"0"===n[s].statusCode)if(this.asyncSettings.chunkSize>0)this.retryUpload(this.getCurrentMetaData(n[s],null),t);else{var o=void 0;i||(o=this.fileList[this.filesData.indexOf(n[s])]),this.reloadcanceledFile(null,n[s],o,i)}},e.prototype.cancel=function(e){e=e||this.filesData;var t=this.getFilesInArray(e);this.cancelUpload(t)},e.prototype.cancelUpload=function(e){var t=this.getFiles(e);if(this.asyncSettings.chunkSize>0){for(var i=0;i<t.length;i++)if("3"===t[i].statusCode){var n=this.getCurrentMetaData(t[i],null);n.file.statusCode="5",n.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(n),this.showHideUploadSpinner(t[i])}}else for(i=0;i<t.length;i++)"3"===t[i].statusCode&&(t[i].statusCode="5",t[i].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(t[i]))},e.prototype.showHideUploadSpinner=function(e){var i=this.getLiElement(e);if(!sf.base.isNullOrUndefined(i)&&sf.base.isNullOrUndefined(this.template)){var n=i.querySelector("."+w);t({target:n,width:"20px"}),u(n)}},e}();return{initialize:function(e,t,i,n){t&&e&&new A(e,t,i,n).initialize()},uploadFileCount:function(e){var t=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(t)?0:t.uploadFileCount(t.element)},getFileRead:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?0:i.getFileRead(t,i.element)},getFileInfo:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?null:i.getFileInfo(t,i.element)},serverReadFileBase64:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(s)?null:s.serverReadFileBase64(t,i,n)},raiseSuccessEvent:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.raiseSuccessEvent(null,t)},serverRemoveIconBindEvent:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.serverRemoveIconBindEvent()},serverFileListElement:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||(s.serverUlElement(t),n||s.serverActionButtonsEventBind(i))},bytesToSize:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?"":i.bytesToSize(t)},cancel:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.cancel(t)},clearAll:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.clearAll()},createFileList:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.createFileList(t,i)},getFilesData:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?null:i.getFilesData(t)},pause:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.pause(t,i)},remove:function(e,t,i,n,s,o){for(var r=window.sfBlazor.getCompInstance(e),a=0;a<r.filesData.length;a++)r.filesData[a].id===t[0].id&&(t[0]=r.filesData[a]);sf.base.isNullOrUndefined(r)||r.remove(t,i,n,s,o)},resume:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.resume(t,i)},retry:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.retry(t,i,n)},sortFileList:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?null:i.sortFileList(t)},upload:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.upload(t,i)},propertyChanges:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.propertyChanges(t,i)}}}()},"./modules/sortable.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};sf.lists=sf.base.extend({},sf.lists,function(e){"use strict";var t,n=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},o=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.getHelper=function(e){var t,i=n.getSortableElement(e.sender.target);return!!n.isValidTarget(i,n)&&(n.helper?t=n.helper({sender:i,element:e.element}):((t=i.cloneNode(!0)).style.width=i.offsetWidth+"px",t.style.height=i.offsetHeight+"px"),sf.base.addClass([t],["e-sortableclone"]),document.body.appendChild(t),t)},n.onDrag=function(e){if(e.target){n.trigger("drag",{event:e.event,element:n.element,target:e.target});var t,i=n.getSortableInstance(e.target),s=n.getSortableElement(e.target,i);if((n.isValidTarget(s,i)||e.target.className.indexOf("e-list-group-item")>-1)&&(n.curTarget!==s||!sf.base.isNullOrUndefined(i.placeHolder))&&(!i.placeHolderElement||i.placeHolderElement!==e.target)){if(e.target.className.indexOf("e-list-group-item")>-1&&(s=e.target),n.curTarget=s,n.target===s)return;var o=n.getIndex(i.placeHolderElement,i),r=n.getPlaceHolder(s,i),a=void 0;if(r){o=sf.base.isNullOrUndefined(o)?n.getIndex(n.target):o,a=n.getIndex(s,i,e.event);var l=n.isPlaceHolderPresent(i);if(l&&o===a)return;l&&sf.base.remove(i.placeHolderElement),i.placeHolderElement=r,e.target.className.indexOf("e-list-group-item")>-1?i.element.insertBefore(i.placeHolderElement,i.element.children[a]):i.element!==n.element&&a===i.element.childElementCount?i.element.appendChild(i.placeHolderElement):i.element.insertBefore(i.placeHolderElement,i.element.children[a]),n.refreshDisabled(o,a,i)}else{o=sf.base.isNullOrUndefined(o)?n.getIndex(n.target):n.getIndex(s,i)<o||!o?o:o-1,a=n.getIndex(s,i);var d=i.element!==n.element?a:o<a?a+1:a;n.updateItemClass(i),i.element.insertBefore(n.target,i.element.children[d]),n.refreshDisabled(o,a,i),n.curTarget=n.target,n.trigger("drop",{droppedElement:n.target,element:i.element,previousIndex:o,currentIndex:a,target:e.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:e.event,scope:n.scope})}}if(i=n.getSortableInstance(n.curTarget),sf.base.isNullOrUndefined(s)&&e.target!==i.placeHolderElement)n.isPlaceHolderPresent(i)&&n.removePlaceHolder(i);else[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach((function(e){(t=n.getSortableInstance(e)).element&&t!==i&&n.removePlaceHolder(t)}))}},n.onDragStart=function(e){n.target=n.getSortableElement(e.target);var t=!1;n.target.classList.add("e-grabbed"),n.curTarget=n.target,e.helper=document.getElementsByClassName("e-sortableclone")[0];var i={cancel:!1,element:n.element,target:n.target};n.trigger("beforeDragStart",i,(function(i){i.cancel&&(t=i.cancel,n.onDragStop(e))})),t||(sf.base.isBlazor?n.trigger("dragStart",{event:e.event,element:n.element,target:n.target,bindEvents:e.bindEvents,dragElement:e.dragElement}):n.trigger("dragStart",{event:e.event,element:n.element,target:n.target}))},n.onDragStop=function(e){var t,i,s,o=n.getSortableInstance(n.curTarget);t=n.getIndex(n.target);var r=n.isPlaceHolderPresent(o);if(r){var a=n.getIndex(o.placeHolderElement,o),l={previousIndex:t,currentIndex:a,target:e.target,droppedElement:n.target,helper:e.helper,cancel:!1,handled:!1};n.trigger("beforeDrop",l,(function(i){if(!i.cancel){if(s=i.handled,n.updateItemClass(o),i.handled){var r=n.target.cloneNode(!0);n.target.classList.remove("e-grabbed"),n.target=r}o.element.insertBefore(n.target,o.placeHolderElement);var a=n.getIndex(n.target,o);t=n===o&&t-a>1?t-1:t,n.trigger("drop",{event:e.event,element:o.element,previousIndex:t,currentIndex:a,target:e.target,helper:e.helper,droppedElement:n.target,scopeName:n.scope,handled:s})}sf.base.remove(o.placeHolderElement)}))}if(o=n.getSortableInstance(e.target),i=o.element.childElementCount,t=n.getIndex(n.target),o.element===e.target||!r&&n.curTarget===n.target){var d={previousIndex:t,currentIndex:n.curTarget===n.target?t:i,target:e.target,droppedElement:n.target,helper:e.helper,cancel:!1};n.trigger("beforeDrop",d,(function(s){o.element!==e.target||s.cancel||(n.updateItemClass(o),o.element.appendChild(n.target),n.trigger("drop",{event:e.event,element:o.element,previousIndex:t,currentIndex:i,target:e.target,helper:e.helper,droppedElement:n.target,scopeName:n.scope}))}))}n.target.classList.remove("e-grabbed"),n.target=null,n.curTarget=null,sf.base.remove(e.helper),sf.base.getComponent(n.element,sf.base.Draggable).intDestroy(e.event)},n.bind(),n}var i;return n(t,e),i=t,t.prototype.bind=function(){this.element.id||(this.element.id=sf.base.getUniqueID("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()},t.prototype.initializeDraggable=function(){new sf.base.Draggable(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:5})},t.prototype.getPlaceHolder=function(e,t){if(t.placeHolder){var i=t.placeHolder({element:t.element,grabbedElement:this.target,target:e});return i.classList.add("e-sortable-placeholder"),i}return null},t.prototype.isValidTarget=function(e,t){return e&&sf.base.compareElementParent(e,t.element)&&e.classList.contains(t.itemClass)&&!e.classList.contains("e-disabled")},t.prototype.removePlaceHolder=function(e){sf.base.remove(e.placeHolderElement),e.placeHolderElement=null},t.prototype.updateItemClass=function(e){this!==e&&(this.target.classList.remove(this.itemClass),this.target.classList.add(e.itemClass))},t.prototype.getSortableInstance=function(e){if(e=sf.base.closest(e,".e-"+this.getModuleName())){var t=sf.base.getComponent(e,i);return t.scope&&this.scope&&t.scope===this.scope?t:this}return this},t.prototype.refreshDisabled=function(e,t,i){if(i===this)for(var n=void 0,s=e<t,o=void 0,r=s?e:t,a=s?t:e;r<=a;)(n=this.element.children[r]).classList.contains("e-disabled")?(o=this.getIndex(n),this.element.insertBefore(n,this.element.children[s?o+2:o-1]),r=s?o+2:o+1):r++},t.prototype.getIndex=function(e,t,i){var n,s;return void 0===t&&(t=this),[].slice.call(t.element.children).forEach((function(t,o){if(t.classList.contains("e-sortable-placeholder")&&(s=!0),t!==e);else if(n=o,!sf.base.isNullOrUndefined(i)){s&&(n-=1);var r=e.getBoundingClientRect(),a=r.bottom-(r.bottom-r.top)/2;n=i.clientY<=a?n:n+1}})),n},t.prototype.getSortableElement=function(e,t){return void 0===t&&(t=this),sf.base.closest(e,"."+t.itemClass)},t.prototype.queryPositionInfo=function(e){return e.left=pageXOffset?parseFloat(e.left)-pageXOffset+"px":e.left,e.top=pageYOffset?parseFloat(e.top)-pageYOffset+"px":e.top,e},t.prototype.isPlaceHolderPresent=function(e){return e.placeHolderElement&&!!sf.base.closest(e.placeHolderElement,"#"+e.element.id)},t.prototype.moveTo=function(e,t,i){r(this.element,e,t,i)},t.prototype.destroy=function(){"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),sf.base.getComponent(this.element,sf.base.Draggable).destroy(),e.prototype.destroy.call(this)},t.prototype.getModuleName=function(){return"sortable"},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"itemClass":[].slice.call(this.element.children).forEach((function(i){i.classList.contains(t.itemClass)&&i.classList.remove(t.itemClass),e.itemClass&&i.classList.add(e.itemClass)}))}}},s([sf.base.Property(!1)],t.prototype,"enableAnimation",void 0),s([sf.base.Property(null)],t.prototype,"itemClass",void 0),s([sf.base.Property(null)],t.prototype,"scope",void 0),s([sf.base.Property()],t.prototype,"helper",void 0),s([sf.base.Property()],t.prototype,"placeHolder",void 0),s([sf.base.Event()],t.prototype,"drag",void 0),s([sf.base.Event()],t.prototype,"beforeDragStart",void 0),s([sf.base.Event()],t.prototype,"dragStart",void 0),s([sf.base.Event()],t.prototype,"beforeDrop",void 0),s([sf.base.Event()],t.prototype,"drop",void 0),t=i=s([sf.base.NotifyPropertyChanges],t)}(sf.base.Base);function r(e,t,i,n){var s=[];if(t||(t=e),i&&i.length?i.forEach((function(t){s.push(e.children[t])})):s=[].slice.call(e.children),sf.base.isNullOrUndefined(n))s.forEach((function(e){t.appendChild(e)}));else{var o=t.children[n];s.forEach((function(e){t.insertBefore(e,o)}))}}return e.Sortable=o,e.moveTo=r,e}({}))},"./modules/spinner.js":function(e,t){window.sf=window.sf||{};sf.popups=sf.base.extend({},sf.popups,function(e){"use strict";var t={},i=null,n=null;function s(e,t){if(e.target){var s,r=sf.base.isNullOrUndefined(t)?sf.base.createElement:t,a=function(e,t){var i=t("div",{}),n=t("div",{});return i.classList.add("e-spinner-pane"),n.classList.add("e-spinner-inner"),e.appendChild(i),i.appendChild(n),{wrap:i,inner_wrap:n}}(e.target,r);if(sf.base.isNullOrUndefined(e.cssClass)||a.wrap.classList.add(e.cssClass),sf.base.isNullOrUndefined(e.template)&&sf.base.isNullOrUndefined(i)){var l=sf.base.isNullOrUndefined(e.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(a.wrap):e.type;s=function(e,t){var i;switch(t){case"Material":case"Fabric":i=30;break;case"Tailwind":case"Tailwind-dark":case"Fluent":i=30;break;case"Bootstrap4":case"Bootstrap5":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(sf.base.isNullOrUndefined(e.width)?void 0:e.width,l),o(l,a.wrap,s,r),sf.base.isNullOrUndefined(e.label)||function(e,t,i){var n=i("div",{});n.classList.add("e-spin-label"),n.innerHTML=t,e.appendChild(n)}(a.inner_wrap,e.label,r)}else{var d=sf.base.isNullOrUndefined(e.template)?i:e.template;a.wrap.classList.add("e-spin-template"),function(e,t,i){sf.base.isNullOrUndefined(i)||e.classList.add(i);e.querySelector(".e-spinner-inner").innerHTML=t}(a.wrap,d,n)}a.wrap.classList.add("e-spin-hide"),a=null}}function o(e,i,n,s){var o=i.querySelector(".e-spinner-inner"),d=o.querySelector("svg");switch(sf.base.isNullOrUndefined(d)||o.removeChild(d),e){case"Material":!function(e,i,n){var s=r();t[s]={timeOut:0,type:"Material",radius:i},l(e,s,n,"e-spin-material"),h(i,e,"Material","e-spin-material")}(o,n,s);break;case"Fabric":!function(e,i,n){var s=r();t[s]={timeOut:0,type:"Fabric",radius:i},a(e,s,"e-spin-fabric",n),f(i,e,"e-spin-fabric")}(o,n,s);break;case"Fluent":!function(e,i,n){var s=r();t[s]={timeOut:0,type:"Fluent",radius:i},a(e,s,"e-spin-fluent",n),f(i,e,"e-spin-fluent")}(o,n,s);break;case"Bootstrap":!function(e,i,n){var s=r();t[s]={timeOut:0,type:"Bootstrap",radius:i},function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class","e-spin-bootstrap"),n.setAttribute("viewBox","0 0 64 64"),e.insertBefore(n,e.firstChild);for(var s=0;s<=7;s++){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("class","e-path-circle_"+s),o.setAttribute("r","2"),o.setAttribute("transform","translate(32,32)"),n.appendChild(o)}}(e,s),function(e,t){var i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";for(var n=90,s=0;s<=7;s++){var o=m(0,0,24,n),r=i.querySelector(".e-path-circle_"+s);r.setAttribute("cx",o.x+""),r.setAttribute("cy",o.y+""),n=n>=360?0:n,n+=45}}(e,i)}(o,n);break;case"HighContrast":!function(e,i,n){var s=r();t[s]={timeOut:0,type:"HighContrast",radius:i},a(e,s,"e-spin-high-contrast",n),f(i,e,"e-spin-high-contrast")}(o,n,s);break;case"Bootstrap4":!function(e,i,n){var s=r();t[s]={timeOut:0,type:"Bootstrap4",radius:i},l(e,s,n,"e-spin-bootstrap4"),h(i,e,"Bootstrap4","e-spin-bootstrap4")}(o,n,s);break;case"Bootstrap5":!function(e,i,n){var s=r();t[s]={timeOut:0,type:"Bootstrap5",radius:i},l(e,s,n,"e-spin-bootstrap5"),h(i,e,"Bootstrap5","e-spin-bootstrap5")}(o,n,s);break;case"Tailwind":case"Tailwind-dark":!function(e,i,n){var s=r();t[s]={timeOut:0,type:"Tailwind",radius:i},a(e,s,"e-spin-tailwind",n),f(i,e,"e-spin-tailwind")}(o,n,s)}}function r(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function a(e,t,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",t),s.setAttribute("class",i);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-circle");var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","e-path-arc"),e.insertBefore(s,e.firstChild),s.appendChild(o),s.appendChild(r)}function l(e,t,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",n),s.setAttribute("id",t),o.setAttribute("class","e-path-circle"),e.insertBefore(s,e.firstChild),s.appendChild(o)}function d(e){!function(e,i,n,s,o,r,a){var l=++a.globalInfo[a.uniqueID].previousId,h=(new Date).getTime(),u=i-e,f=(v=2*a.globalInfo[a.uniqueID].radius+"",parseFloat(v)),m=c(f),g=-90*(a.globalInfo[a.uniqueID].count||0);var v;!function i(o){var a=Math.max(0,Math.min((new Date).getTime()-h,s));!function(e,t){if(!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))&&!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",p(f,m,e,r)+""),i.setAttribute("transform","rotate("+g+" "+f/2+" "+f/2+")")}}(n(a,e,u,s),o.container),l===o.globalInfo[o.uniqueID].previousId&&a<s?t[o.uniqueID].timeOut=setTimeout(i.bind(null,o),1):d(o)}(a)}(1,149,u,1333,e.globalInfo[e.uniqueID].count,75,e),e.globalInfo[e.uniqueID].count=++e.globalInfo[e.uniqueID].count%4}function h(e,t,i,n){var s=2*e,o=t.querySelector("svg."+n),r=o.querySelector("path.e-path-circle"),a=c(s),l=s/2+"px";o.setAttribute("viewBox","0 0 "+s+" "+s),o.style.width=o.style.height=s+"px",o.style.transformOrigin=l+" "+l+" "+l,r.setAttribute("d",function(e,t){var i=e/2,n=t/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(s,a)),"Material"===i&&(r.setAttribute("stroke-width",a+""),r.setAttribute("stroke-dasharray",(s-a)*Math.PI*.75+""),r.setAttribute("stroke-dashoffset",p(s,a,1,75)+""))}function c(e){return.1*e}function p(e,t,i,n){return(e-t)*Math.PI*(3*n/100-i/100)}function u(e,t,i,n){var s=(e/=n)*e,o=s*e;return t+i*(6*o*s+-15*s*s+10*o)}function f(e,t,i){var n=e,s=e,o=2*e,r=t.querySelector("."+i),a=r.querySelector(".e-path-circle"),l=r.querySelector(".e-path-arc"),d=o/2+"px";a.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(n,s,e)),l.setAttribute("d",function(e,t,i,n,s){var o=m(e,t,i,s),r=m(e,t,i,n);return["M",o.x,o.y,"A",i,i,0,0,0,r.x,r.y].join(" ")}(n,s,e,315,45)),r.setAttribute("viewBox","0 0 "+o+" "+o),r.style.transformOrigin=d+" "+d+" "+d,r.style.width=r.style.height=o+"px"}function m(e,t,i,n){var s=(n-90)*Math.PI/180;return{x:e+i*Math.cos(s),y:t+i*Math.sin(s)}}function g(e){v(e,!1),e=null}function v(e,i){var n;if(e&&(n=e.classList.contains("e-spinner-pane")?e:e.querySelector(".e-spinner-pane")),e&&n){var s=n.querySelector(".e-spinner-inner");if(i?!n.classList.contains("e-spin-template")&&!n.classList.contains("e-spin-hide"):!n.classList.contains("e-spin-template")&&!n.classList.contains("e-spin-show")){var o=n.querySelector("svg");if(sf.base.isNullOrUndefined(o))return;var r=o.getAttribute("id");switch(t[r].isAnimate=!i,t[r].type){case"Material":i?clearTimeout(t[r].timeOut):function(e,i,n){var s={};t[i].timeOut=0,s[i]=function(e,t,i,n){return{radius:t,count:i,previousId:n}}(0,n,0,0),d({uniqueID:i,container:e,globalInfo:s,timeOutVar:0})}(s,r,t[r].radius);break;case"Bootstrap":i?clearTimeout(t[r].timeOut):function(e){for(var i,n,s,o,r,a=e.querySelector("svg.e-spin-bootstrap").getAttribute("id"),l=1;l<=8;l++){d(e.getElementsByClassName("e-path-circle_"+(8===l?0:l))[0],l,l,(i=void 0,n=void 0,s=void 0,o=void 0,r=void 0,i=[],s=l,o=!1,r=1,function e(t){i.push(t),(t!==s||1===r)&&(t<=n&&t>1&&!o?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),o=!0):t<8&&o?8===(t=parseFloat((t+.2).toFixed(2)))&&(o=!1):t<=8&&!o&&(t=parseFloat((t-.2).toFixed(2))),++r,e(t))}(n=l),i),a)}function d(e,i,n,s,o){var r=0;!function i(n){t[o].isAnimate&&(++r,e.setAttribute("r",n+""),r>=s.length&&(r=0),t[o].timeOut=setTimeout(i.bind(null,s[r]),18))}(i)}}(s)}}i?sf.base.classList(n,["e-spin-hide"],["e-spin-show"]):sf.base.classList(n,["e-spin-show"],["e-spin-hide"]),e=null}}function b(e){v(e,!0),e=null}function y(e,t){var s=sf.base.isNullOrUndefined(t)?sf.base.createElement:t;void 0!==e.template&&(i=e.template,void 0!==e.template&&(n=e.cssClass));for(var o=document.querySelectorAll(".e-spinner-pane"),r=0;r<o.length;r++)w(e.template,o[r],e.type,e.cssClass,s)}function w(e,s,r,a,l){sf.base.isNullOrUndefined(e)&&!s.classList.contains("e-spin-template")?(!function(e,i,n,s){sf.base.isNullOrUndefined(n)||e.classList.add(n);var r=e.querySelector("svg"),a="Bootstrap"===i?parseFloat(r.style.height):parseFloat(r.style.height)/2;if(r.getAttribute("class").split(/\s/).indexOf("e-spin-material")>=0){var l=r.getAttribute("id");clearTimeout(t[l].timeOut)}o(i,e,a,s)}(s,r,a,l),s.classList.contains("e-spin-show")?(s.classList.remove("e-spin-show"),g(s)):(s.classList.remove("e-spin-hide"),b(s))):(i=e,sf.base.isNullOrUndefined(a)||(n=a))}return e.Spinner=function(e,t,i,n){switch(e){case"Create":s({type:n,target:document.querySelector(t.target),cssClass:t.cssClass,label:t.label,width:t.width});break;case"Show":g(document.querySelector(i));break;case"Hide":b(document.querySelector(i));break;case"Set":y({cssClass:t.cssClass,type:n})}},e.createSpinner=s,e.showSpinner=g,e.hideSpinner=b,e.setSpinner=y,e}({}))},"./modules/splitbuttonsbase.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};window.sf.splitbuttons=window.sf.base.extend({},window.sf.splitbuttons,function(e){"use strict";var t,n=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),s([sf.base.Property("")],t.prototype,"iconCss",void 0),s([sf.base.Property("")],t.prototype,"id",void 0),s([sf.base.Property(!1)],t.prototype,"separator",void 0),s([sf.base.Property("")],t.prototype,"text",void 0),s([sf.base.Property("")],t.prototype,"url",void 0),s([sf.base.Property(!1)],t.prototype,"disabled",void 0),t}(sf.base.ChildProperty);return e.getModel=function(e,t){for(var i=sf.base.extend({},e),n=0,s=Object.keys(i);n<s.length;n++){var o=s[n];t.indexOf(o)<0&&sf.base.deleteObject(i,o)}return i},e.upDownKeyHandler=function(e,t){var i=40===t?0:e.childElementCount-1,n=i,s=e.querySelector(".e-selected");s&&s.classList.remove("e-selected");for(var o=0,r=e.children.length;o<r;o++)e.children[o].classList.contains("e-focused")&&(n=o,e.children[o].classList.remove("e-focused"),40===t?n++:n--,n===(40===t?e.childElementCount:-1)&&(n=i));-1!==(n=function e(t,i,n,s,o){void 0===o&&(o=0);(i.classList.contains("e-separator")||i.classList.contains("e-disabled"))&&(n===(40===s?t.childElementCount-1:0)?n=40===s?0:t.childElementCount-1:40===s?n++:n--);if((i=t.children[n]).classList.contains("e-separator")||i.classList.contains("e-disabled")){if(++o===t.childElementCount)return n=-1;n=e(t,i,n,s,o)}return n}(e,e.children[n],n,t))&&(sf.base.addClass([e.children[n]],"e-focused"),e.children[n].focus())},e.setBlankIconStyle=function(e){var t=[].slice.call(e.getElementsByClassName("e-blank-icon"));if(t.length){var i=e.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!sf.base.isNullOrUndefined(i)){i.classList.contains("e-url")&&(i=i.querySelector(".e-menu-url"));var n,s=i.querySelector(".e-menu-icon"),o=e.classList.contains("e-rtl");n=o?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};var r=parseInt(getComputedStyle(s).fontSize,10)+parseInt(getComputedStyle(s)[n.margin],10)+parseInt(getComputedStyle(i).paddingLeft,10)+"px";t.forEach((function(e){e.classList.contains("e-url")?e.querySelector(".e-menu-url").style[n.padding]=r:e.style[n.padding]=r}))}}},e.Item=o,e}({}))},"./modules/svgbase.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{},window.sf.svgbase=function(e){"use strict";var t=function(){function e(e){this.svgLink="http://www.w3.org/2000/svg",this.rootId=e}return e.prototype.getOptionValue=function(e,t){return e[t]},e.prototype.createSvg=function(e){return sf.base.isNullOrUndefined(e.id)&&(e.id=this.rootId+"_svg"),this.svgObj=document.getElementById(e.id),sf.base.isNullOrUndefined(document.getElementById(e.id))&&(this.svgObj=document.createElementNS(this.svgLink,"svg")),this.svgObj=this.setElementAttributes(e,this.svgObj),this.setSVGSize(e.width,e.height),this.svgObj},e.prototype.setSVGSize=function(e,t){var i=document.getElementById(this.rootId),n=sf.base.isNullOrUndefined(i)?null:i.getBoundingClientRect();sf.base.isNullOrUndefined(this.width)||this.width<=0?this.svgObj.setAttribute("width",e?e.toString():n.width.toString()):this.svgObj.setAttribute("width",this.width.toString()),sf.base.isNullOrUndefined(this.height)||this.height<=0?this.svgObj.setAttribute("height",t?t.toString():"450"):this.svgObj.setAttribute("height",this.height.toString())},e.prototype.drawPath=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"path")),t=this.setElementAttributes(e,t)},e.prototype.drawLine=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"line")),t=this.setElementAttributes(e,t)},e.prototype.drawRectangle=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"rect")),t=this.setElementAttributes(e,t)},e.prototype.drawCircle=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"circle")),t=this.setElementAttributes(e,t)},e.prototype.drawPolyline=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"polyline")),t=this.setElementAttributes(e,t)},e.prototype.drawEllipse=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"ellipse")),t=this.setElementAttributes(e,t)},e.prototype.drawPolygon=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"polygon")),t=this.setElementAttributes(e,t)},e.prototype.drawImage=function(e){var t=document.createElementNS(this.svgLink,"image");return t.setAttributeNS(null,"height",e.height.toString()),t.setAttributeNS(null,"width",e.width.toString()),t.setAttributeNS("http://www.w3.org/1999/xlink","href",e.href),t.setAttributeNS(null,"x",e.x.toString()),t.setAttributeNS(null,"y",e.y.toString()),t.setAttributeNS(null,"id",e.id),t.setAttributeNS(null,"visibility",e.visibility),sf.base.isNullOrUndefined(this.getOptionValue(e,"clip-path"))||t.setAttributeNS(null,"clip-path",this.getOptionValue(e,"clip-path")),sf.base.isNullOrUndefined(e.preserveAspectRatio)||t.setAttributeNS(null,"preserveAspectRatio",e.preserveAspectRatio),t},e.prototype.createText=function(e,t){var i=document.createElementNS(this.svgLink,"text");return i=this.setElementAttributes(e,i),sf.base.isNullOrUndefined(t)||(i.textContent=t),i},e.prototype.createTSpan=function(e,t){var i=document.createElementNS(this.svgLink,"tspan");return i=this.setElementAttributes(e,i),sf.base.isNullOrUndefined(t)||(i.textContent=t),i},e.prototype.createTitle=function(e){var t=document.createElementNS(this.svgLink,"title");return t.textContent=e,t},e.prototype.createDefs=function(){return document.createElementNS(this.svgLink,"defs")},e.prototype.createClipPath=function(e){var t=document.createElementNS(this.svgLink,"clipPath");return t=this.setElementAttributes(e,t)},e.prototype.createForeignObject=function(e){var t=document.createElementNS(this.svgLink,"foreignObject");return t=this.setElementAttributes(e,t)},e.prototype.createGroup=function(e){var t=document.createElementNS(this.svgLink,"g");return t=this.setElementAttributes(e,t)},e.prototype.createPattern=function(e,t){var i=document.createElementNS(this.svgLink,t);return i=this.setElementAttributes(e,i)},e.prototype.createRadialGradient=function(e,t,i){var n;if(sf.base.isNullOrUndefined(e[0].colorStop))n=e[0].color.toString();else{var s={id:this.rootId+"_"+t+"radialGradient",cx:i.cx+"%",cy:i.cy+"%",r:i.r+"%",fx:i.fx+"%",fy:i.fy+"%"};this.drawGradient("radialGradient",s,e),n="url(#"+this.rootId+"_"+t+"radialGradient)"}return n},e.prototype.createLinearGradient=function(e,t,i){var n;if(sf.base.isNullOrUndefined(e[0].colorStop))n=e[0].color.toString();else{var s={id:this.rootId+"_"+t+"linearGradient",x1:i.x1+"%",y1:i.y1+"%",x2:i.x2+"%",y2:i.y2+"%"};this.drawGradient("linearGradient",s,e),n="url(#"+this.rootId+"_"+t+"linearGradient)"}return n},e.prototype.drawGradient=function(e,t,i){var n=this.createDefs(),s=document.createElementNS(this.svgLink,e);s=this.setElementAttributes(t,s);for(var o=0;o<i.length;o++){var r=document.createElementNS(this.svgLink,"stop");r.setAttribute("offset",i[o].colorStop),r.setAttribute("stop-color",i[o].color),r.setAttribute("stop-opacity",i[o].opacity?i[o].opacity:"1"),sf.base.isNullOrUndefined(i[o].style)||(r.style.cssText=i[o].style),s.appendChild(r)}return n.appendChild(s),n},e.prototype.drawClipPath=function(e){var t=this.createDefs(),i=this.createClipPath({id:e.id});e.id=e.id+"_Rect";var n=this.drawRectangle(e);return i.appendChild(n),t.appendChild(i),t},e.prototype.drawCircularClipPath=function(e){var t=this.createDefs(),i=this.createClipPath({id:e.id});e.id=e.id+"_Circle";var n=this.drawCircle(e);return i.appendChild(n),t.appendChild(i),t},e.prototype.setElementAttributes=function(e,t){for(var i=Object.keys(e),n=0;n<i.length;n++)"style"===i[n]?t.style.cssText=e[i[n]]:t.setAttribute(i[n],e[i[n]]);return t},e.prototype.createCanvas=function(){return null},e}(),n=function(){function e(e){this.rootId=e}return e.prototype.getOptionValue=function(e,t){return e[t]},e.prototype.createCanvas=function(e){var t=document.createElement("canvas");return t.setAttribute("id",this.rootId+"_canvas"),this.ctx=t.getContext("2d"),this.canvasObj=t,this.setCanvasSize(e.width,e.height),this.canvasObj},e.prototype.setCanvasSize=function(e,t){var i=document.getElementById(this.rootId),n=sf.base.isNullOrUndefined(i)?null:i.getBoundingClientRect();sf.base.isNullOrUndefined(this.width)?this.canvasObj.setAttribute("width",e?e.toString():n.width.toString()):this.canvasObj.setAttribute("width",this.width.toString()),sf.base.isNullOrUndefined(this.height)?this.canvasObj.setAttribute("height",t?t.toString():"450"):this.canvasObj.setAttribute("height",this.height.toString())},e.prototype.setAttributes=function(e){this.ctx.lineWidth=this.getOptionValue(e,"stroke-width");var t=this.getOptionValue(e,"stroke-dasharray");if(!sf.base.isNullOrUndefined(t)){var i=t.split(",");this.ctx.setLineDash([parseInt(i[0],10),parseInt(i[1],10)])}this.ctx.strokeStyle=this.getOptionValue(e,"stroke")},e.prototype.drawLine=function(e){this.ctx.save(),this.ctx.beginPath(),this.ctx.lineWidth=this.getOptionValue(e,"stroke-width"),this.ctx.strokeStyle=e.stroke,this.ctx.moveTo(e.x1,e.y1),this.ctx.lineTo(e.x2,e.y2),this.ctx.stroke(),this.ctx.restore()},e.prototype.drawRectangle=function(e,t){var i=this.ctx,n=e.rx;return this.ctx.save(),this.ctx.beginPath(),t&&this.ctx.translate(t[0],t[1]),this.ctx.globalAlpha=this.getOptionValue(e,"opacity"),this.setAttributes(e),this.ctx.rect(e.x,e.y,e.width,e.height),null!==n&&n>=0?this.drawCornerRadius(e):("none"===e.fill&&(e.fill="transparent"),this.ctx.fillStyle=e.fill,this.ctx.fillRect(e.x,e.y,e.width,e.height),this.ctx.stroke()),this.ctx.restore(),this.ctx=i,this.canvasObj},e.prototype.drawCornerRadius=function(e){var t=e.rx,i=e.x,n=e.y,s=e.width,o=e.height;"none"===e.fill&&(e.fill="transparent"),this.ctx.fillStyle=e.fill,s<2*t&&(t=s/2),o<2*t&&(t=o/2),this.ctx.beginPath(),this.ctx.moveTo(i+s-t,n),this.ctx.arcTo(i+s,n,i+s,n+o,t),this.ctx.arcTo(i+s,n+o,i,n+o,t),this.ctx.arcTo(i,n+o,i,n,t),this.ctx.arcTo(i,n,i+s,n,t),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()},e.prototype.drawPath=function(e,t){var i=e.d.split(" "),n=this.getOptionValue(e,"stroke-width"),s=this.ctx,o=!0;this.ctx.save(),this.ctx.beginPath(),t&&this.ctx.translate(t[0],t[1]),this.ctx.globalAlpha=e.opacity?e.opacity:this.getOptionValue(e,"fill-opacity"),this.setAttributes(e);for(var r=0;r<i.length;r+=3){var a=parseFloat(i[r+1]),l=parseFloat(i[r+2]);switch(i[r]){case"M":e.innerR||e.cx||this.ctx.moveTo(a,l);break;case"L":e.innerR||this.ctx.lineTo(a,l);break;case"Q":var d=parseFloat(i[r+3]),h=parseFloat(i[r+4]);this.ctx.quadraticCurveTo(a,l,d,h),r+=2;break;case"C":var c=parseFloat(i[r+3]),p=parseFloat(i[r+4]),u=parseFloat(i[r+5]),f=parseFloat(i[r+6]);this.ctx.bezierCurveTo(a,l,c,p,u,f),r+=4;break;case"A":e.innerR?o&&(this.ctx.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),this.ctx.arc(e.x,e.y,e.innerR,e.end,e.start,!e.counterClockWise),o=!1):e.cx?this.ctx.arc(e.cx,e.cy,e.radius,0,2*Math.PI,e.counterClockWise):(this.ctx.moveTo(e.x,e.y),this.ctx.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),this.ctx.lineTo(e.x,e.y)),r+=5;break;case"z":case"Z":this.ctx.closePath(),r-=2}}return"none"!==e.fill&&void 0!==e.fill&&(this.ctx.fillStyle=e.fill,this.ctx.fill()),n>0&&this.ctx.stroke(),this.ctx.restore(),this.ctx=s,this.canvasObj},e.prototype.createText=function(e,t,i,n,s,o){var r=this.getOptionValue(e,"font-weight");sf.base.isNullOrUndefined(r)||"regular"!==r.toLowerCase()||(r="normal");var a=this.getOptionValue(e,"font-size"),l=this.getOptionValue(e,"font-family"),d=this.getOptionValue(e,"font-style").toLowerCase()+" "+r+" "+a+" "+l,h=this.getOptionValue(e,"text-anchor"),c=void 0!==e.opacity?e.opacity:1;if("middle"===h&&(h="center"),this.ctx.save(),this.ctx.fillStyle=e.fill,this.ctx.font=d,this.ctx.textAlign=h,this.ctx.globalAlpha=c,e.baseline&&(this.ctx.textBaseline=e.baseline),!o){this.ctx.translate(e.x+0+(i||0),e.y+(n||0)),this.ctx.rotate(e.labelRotation*Math.PI/180)}return this.ctx.fillText(t,o?e.x:0,o?s:0),this.ctx.restore(),this.canvasObj},e.prototype.drawCircle=function(e,t){var i=this.ctx;return this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.cx,e.cy,e.r,0,2*Math.PI),this.ctx.fillStyle=e.fill,this.ctx.globalAlpha=e.opacity,this.ctx.fill(),t&&this.ctx.translate(t[0],t[1]),this.setAttributes(e),this.ctx.stroke(),this.ctx.restore(),this.ctx=i,this.canvasObj},e.prototype.drawPolyline=function(e){this.ctx.save(),this.ctx.beginPath();for(var t=e.points.split(" "),i=0;i<t.length-1;i++){var n=t[i].split(","),s=parseFloat(n[0]),o=parseFloat(n[1]);0===i?this.ctx.moveTo(s,o):this.ctx.lineTo(s,o)}this.ctx.lineWidth=this.getOptionValue(e,"stroke-width"),this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore()},e.prototype.drawEllipse=function(e,t){var i=this.ctx,n=Math.max(e.rx,e.ry),s=e.rx/n,o=e.ry/n;this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(e.cx,e.cy),t&&this.ctx.translate(t[0],t[1]),this.ctx.save(),this.ctx.scale(s,o),this.ctx.arc(0,0,n,0,2*Math.PI,!1),this.ctx.fillStyle=e.fill,this.ctx.fill(),this.ctx.restore(),this.ctx.lineWidth=this.getOptionValue(e,"stroke-width"),this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore(),this.ctx=i},e.prototype.drawImage=function(e){this.ctx.save();var t=new Image;sf.base.isNullOrUndefined(e.href)||(t.src=e.href,this.ctx.drawImage(t,e.x,e.y,e.width,e.height)),this.ctx.restore()},e.prototype.createLinearGradient=function(e){var t;return sf.base.isNullOrUndefined(e[0].colorStop)||(t=this.ctx.createLinearGradient(0,0,0,this.canvasObj.height)),this.setGradientValues(e,t)},e.prototype.createRadialGradient=function(e){var t;return sf.base.isNullOrUndefined(e[0].colorStop)||(t=this.ctx.createRadialGradient(0,0,0,0,0,this.canvasObj.height)),this.setGradientValues(e,t)},e.prototype.setGradientValues=function(e,t){var i;if(sf.base.isNullOrUndefined(e[0].colorStop))i=e[0].color.toString();else{for(var n=0;n<=e.length-1;n++){var s=e[n].color,o=e[n].colorStop.slice(0,-1),r=parseInt(o,10)/100;t.addColorStop(r,s)}i=t.toString()}return i},e.prototype.setElementAttributes=function(e,t){for(var i=Object.keys(e),n=Object.keys(e).map((function(t){return e[t]})),s=0;s<i.length;s++)t.setAttribute(i[s],n[s]);return null},e.prototype.updateCanvasAttributes=function(e){this.setElementAttributes(e,this.canvasObj);var t=this.ctx;if(!sf.base.isNullOrUndefined(this.dataUrl)){var i=new Image;i.onload=function(){t.drawImage(i,0,0)},i.src=this.dataUrl}},e.prototype.clearRect=function(e){this.ctx.restore(),this.ctx.clearRect(e.x,e.y,e.width,e.height)},e.prototype.createGroup=function(){return null},e.prototype.drawClipPath=function(){return null},e.prototype.drawCircularClipPath=function(){return null},e.prototype.canvasClip=function(e){this.ctx.save(),this.ctx.fillStyle="transparent",this.ctx.rect(e.x,e.y,e.width,e.height),this.ctx.fill(),this.ctx.clip()},e.prototype.canvasRestore=function(){this.ctx.restore()},e.prototype.drawPolygon=function(){return null},e.prototype.createDefs=function(){return null},e.prototype.createClipPath=function(){return null},e.prototype.createSvg=function(){return null},e}();function s(e){var t;switch(e){case"Highcontrast":case"HighContrast":t={tooltipFill:"#ffffff",tooltipBoldLabel:"#000000",tooltipLightLabel:"#000000",tooltipHeaderLine:"#969696"};break;case"MaterialDark":case"FabricDark":case"BootstrapDark":t={tooltipFill:"#F4F4F4",tooltipBoldLabel:"#282727",tooltipLightLabel:"#333232",tooltipHeaderLine:"#9A9A9A"};break;case"Bootstrap4":t={tooltipFill:"#020202",tooltipBoldLabel:"rgba(255, 255, 255)",tooltipLightLabel:"rgba(255, 255, 255, 0.9)",tooltipHeaderLine:"rgba(255, 255, 255, 0.2)"};break;case"Tailwind":t={tooltipFill:"#111827",tooltipBoldLabel:"#D1D5DB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#6B7280"};break;case"TailwindDark":t={tooltipFill:"#F9FAFB",tooltipBoldLabel:"#6B7280",tooltipLightLabel:"#1F2937",tooltipHeaderLine:"#9CA3AF"};break;case"Bootstrap5":t={tooltipFill:"#212529",tooltipBoldLabel:"#F9FAFB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#9CA3AF"};break;case"Bootstrap5Dark":t={tooltipFill:"#E9ECEF",tooltipBoldLabel:"#212529",tooltipLightLabel:"#212529",tooltipHeaderLine:"#ADB5BD"};break;case"Fluent":t={tooltipFill:"#FFFFFF",tooltipBoldLabel:"#323130",tooltipLightLabel:"#323130",tooltipHeaderLine:"#D2D0CE"};break;case"FluentDark":t={tooltipFill:"#252423",tooltipBoldLabel:"#F3F2F1",tooltipLightLabel:"#F3F2F1",tooltipHeaderLine:"#3B3A39"};break;default:t={tooltipFill:"#000816",tooltipBoldLabel:"#ffffff",tooltipLightLabel:"#dbdbdb",tooltipHeaderLine:"#ffffff"}}return t}var o,r=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});function a(e,t){var i=e||"",n=document.getElementById("chartmeasuretext");if(null===n&&(n=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(n)),"string"==typeof e&&(e.indexOf("<")>-1||e.indexOf(">")>-1)){for(var s=e.split(" "),o=0;o<s.length;o++)-1===s[o].indexOf("<br/>")&&(s[o]=s[o].replace(/[<>]/g,"&"));e=s.join(" ")}return n.innerHTML=i.indexOf("<br>")>-1||i.indexOf("<br/>")>-1?i:e,n.style.position="fixed",n.style.fontSize=t.size,n.style.fontWeight=t.fontWeight,n.style.fontStyle=t.fontStyle,n.style.fontFamily=t.fontFamily,n.style.visibility="hidden",n.style.top="-100",n.style.left="0",n.style.whiteSpace="nowrap",n.style.lineHeight="normal",new h(n.clientWidth,n.clientHeight)}function l(e,t,i,n,s){return void 0===n&&(n=0),void 0===s&&(s=0),e>=i.x-n&&e<=i.x+i.width+n&&t>=i.y-s&&t<=i.y+i.height+s}function d(e,t,i,n,s,o,r,a,l,d,h){void 0===h&&(h="");var c="",p=i.x,u=i.y,f=i.x+i.width,m=i.y+i.height;return o?(c=(c=c.concat("M "+p+" "+(u+t)+" Q "+p+" "+u+" "+(p+e)+" "+u+"  L "+(f-e)+" "+u+" Q "+f+" "+u+" "+f+" "+(u+t))).concat(" L "+f+" "+(m-t)+" Q "+f+" "+m+" "+(f-e)+" "+m),0!==s&&(c="RangeNavigator"===h?n.x-s>f/2?(c=c.concat(" L "+(n.x+s)+" "+m)).concat(" L "+(l+s)+" "+(m+s)+" L "+n.x+" "+m):(c=c.concat(" L "+n.x+" "+m)).concat(" L "+(l-s)+" "+(m+s)+" L "+(n.x-s)+" "+m):(c=c.concat(" L "+(n.x+s)+" "+m)).concat(" L "+l+" "+(m+s)+" L "+(n.x-s)+" "+m)),c=n.x-s>p||0===s?c.concat(" L "+(p+e)+" "+m+" Q "+p+" "+m+" "+p+" "+(m-t)+" z"):c.concat(" L "+p+" "+(m+t)+" z")):r?c=(c=(c=(c=(c=c.concat("M "+p+" "+(u+t)+" Q "+p+" "+u+" "+(p+e)+" "+u+" L "+(n.x-s)+" "+u)).concat(" L "+l+" "+n.y)).concat(" L "+(n.x+s)+" "+u)).concat(" L "+(f-e)+" "+u+" Q "+f+" "+u+" "+f+" "+(u+t))).concat(" L "+f+" "+(m-t)+" Q "+f+" "+m+" "+(f-e)+" "+m+" L "+(p+e)+" "+m+" Q "+p+" "+m+" "+p+" "+(m-t)+" z"):a?(c=(c=c.concat("M "+p+" "+(u+t)+" Q "+p+" "+u+" "+(p+e)+" "+u)).concat(" L "+(f-e)+" "+u+" Q "+f+" "+u+" "+f+" "+(u+t)+" L "+f+" "+(n.y-s)),c="RangeNavigator"===h?c.concat(" L "+(f+s)+" "+(d-s)):c.concat(" L "+(f+s)+" "+d),c=(c=(c="RangeNavigator"===h?c.concat(" L "+f+" "+n.y):c.concat(" L "+f+" "+(n.y+s))).concat(" L "+f+" "+(m-t)+" Q "+f+" "+m+" "+(f-e)+" "+m)).concat(" L "+(p+e)+" "+m+" Q "+p+" "+m+" "+p+" "+(m-t)+" z")):(c=c.concat("M "+(p+e)+" "+u+" Q "+p+" "+u+" "+p+" "+(u+t)+" L "+p+" "+(n.y-s)),c="RangeNavigator"===h?c.concat(" L "+(p-s)+" "+(d-s)):c.concat(" L "+(p-s)+" "+d),c=(c=(c="RangeNavigator"===h?c.concat(" L "+p+" "+n.y):c.concat(" L "+p+" "+(n.y+s))).concat(" L "+p+" "+(m-t)+" Q "+p+" "+m+" "+(p+e)+" "+m)).concat(" L "+(f-e)+" "+m+" Q "+f+" "+m+" "+f+" "+(m-t)+" L "+f+" "+(u+t)+" Q "+f+" "+u+" "+(f-e)+" "+u+" z")),c}var h=function(e,t){this.width=e,this.height=t},c=function(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n},p=function(e,t){this.isRight=t,this.isBottom=e},u=function(e){this.id=e},f=function(e){function t(t,i,n,s,o,r,a,l){void 0===r&&(r="");var d=e.call(this,t)||this;return d.transform="",d.baseLine="auto",d.labelRotation=0,d.x=i,d.y=n,d.anchor=s,d.text=o,d.transform=r,d.baseLine=a,d.labelRotation=l,d}return r(t,e),t}(u);function m(e){return document.getElementById(e)}function g(e){var t=m(e);t&&sf.base.remove(t)}function v(e,i,n,s,o,r){var a=new t(""),l=b(e,n,i,o,s),d=a["draw"+l.functionName](l.renderOption);return d.setAttribute("aria-label",r),d}function b(e,t,i,n,s){var o,r="Path",a=t.width,l=t.height,d=e.x,h=e.y,c=e.x+-a/2,p=e.y+-l/2;switch(i){case"Circle":case"Bubble":r="Ellipse",sf.base.merge(n,{rx:a/2,ry:l/2,cx:d,cy:h});break;case"Cross":o="M "+c+" "+h+" L "+(d+a/2)+" "+h+" M "+d+" "+(h+l/2)+" L "+d+" "+(h+-l/2),sf.base.merge(n,{d:o});break;case"HorizontalLine":o="M "+c+" "+h+" L "+(d+a/2)+" "+h,sf.base.merge(n,{d:o});break;case"VerticalLine":o="M "+d+" "+(h+l/2)+" L "+d+" "+(h+-l/2),sf.base.merge(n,{d:o});break;case"Diamond":o="M "+c+" "+h+" L "+d+" "+(h+-l/2)+" L "+(d+a/2)+" "+h+" L "+d+" "+(h+l/2)+" L "+c+" "+h+" z",sf.base.merge(n,{d:o});break;case"Rectangle":o="M "+c+" "+(h+-l/2)+" L "+(d+a/2)+" "+(h+-l/2)+" L "+(d+a/2)+" "+(h+l/2)+" L "+c+" "+(h+l/2)+" L "+c+" "+(h+-l/2)+" z",sf.base.merge(n,{d:o});break;case"Triangle":o="M "+c+" "+(h+l/2)+" L "+d+" "+(h+-l/2)+" L "+(d+a/2)+" "+(h+l/2)+" L "+c+" "+(h+l/2)+" z",sf.base.merge(n,{d:o});break;case"InvertedTriangle":o="M "+(d+a/2)+" "+(h-l/2)+" L "+d+" "+(h+l/2)+" L "+(d-a/2)+" "+(h-l/2)+" L "+(d+a/2)+" "+(h-l/2)+" z",sf.base.merge(n,{d:o});break;case"Pentagon":for(var u=void 0,f=void 0,m=0;m<=5;m++)u=a/2*Math.cos(Math.PI/180*(72*m)),f=l/2*Math.sin(Math.PI/180*(72*m)),o=0===m?"M "+(d+u)+" "+(h+f)+" ":o.concat("L "+(d+u)+" "+(h+f)+" ");o=o.concat("Z"),sf.base.merge(n,{d:o});break;case"Image":r="Image",sf.base.merge(n,{href:s,height:l,width:a,x:c,y:p})}return{renderOption:n,functionName:r}}var y=function(e){function t(t,i,n,s,o,r,a){var l=e.call(this,t)||this;return l.opacity=o,l.fill=i,l.stroke=s,l["stroke-width"]=n,l["stroke-dasharray"]=r,l.d=a,l}return r(t,e),t}(u);function w(e,i,n,s){var o,r=new t("");o={id:e.id,x:e.x,y:e.y,fill:n,"font-size":i.size,"font-style":i.fontStyle,"font-family":i.fontFamily,"font-weight":i.fontWeight,"text-anchor":e.anchor,transform:e.transform,opacity:i.opacity,"dominant-baseline":e.baseLine};var a="string"==typeof e.text?e.text:e.text[0],l=r.createText(o,a);return l.style.fontFamily=i.fontFamily,l.style.fontStyle=i.fontStyle,l.style.fontSize=i.size,l.style.fontWeight=i.fontWeight,l.style.color=i.color,s.appendChild(l),l}var C,S=function(e,t){this.x=e,this.y=t},E=(C=function(e,t){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),x=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),x([sf.base.Property(null)],t.prototype,"size",void 0),x([sf.base.Property("")],t.prototype,"color",void 0),x([sf.base.Property("Segoe UI")],t.prototype,"fontFamily",void 0),x([sf.base.Property("Normal")],t.prototype,"fontWeight",void 0),x([sf.base.Property("Normal")],t.prototype,"fontStyle",void 0),x([sf.base.Property(1)],t.prototype,"opacity",void 0),t}(sf.base.ChildProperty),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),x([sf.base.Property("")],t.prototype,"color",void 0),x([sf.base.Property(1)],t.prototype,"width",void 0),x([sf.base.Property("")],t.prototype,"dashArray",void 0),t}(sf.base.ChildProperty),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),x([sf.base.Property(0)],t.prototype,"x",void 0),x([sf.base.Property(0)],t.prototype,"y",void 0),x([sf.base.Property(0)],t.prototype,"width",void 0),x([sf.base.Property(0)],t.prototype,"height",void 0),t}(sf.base.ChildProperty),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),x([sf.base.Property(0)],t.prototype,"x",void 0),x([sf.base.Property(0)],t.prototype,"y",void 0),t}(sf.base.ChildProperty),k=function(e){function i(t,i){return e.call(this,t,i)||this}return E(i,e),i.prototype.preRender=function(){this.allowServerDataBinding=!1,this.initPrivateVariable(),this.isCanvas||this.removeSVG(),this.createTooltipElement()},i.prototype.initPrivateVariable=function(){this.renderer=new t(this.element.id),this.themeStyle=s(this.theme),this.formattedText=[],this.padding=5,this.areaMargin=10,this.isFirst=!0,this.markerPoint=[]},i.prototype.removeSVG=function(){var e=document.getElementById(this.element.id+"_svg"),t=document.getElementById(this.element.id+"parent_template");this.blazorTemplate&&sf.base.resetBlazorTemplate(this.element.id+"parent_template_blazorTemplate"),e&&e.parentNode&&sf.base.remove(e),t&&t.parentNode&&sf.base.remove(t)},i.prototype.render=function(){if(this.fadeOuted=!1,this.template)this.updateTemplateFn(),this.createTemplate(this.areaBounds,this.location);else{this.renderText(this.isFirst);var e={cancel:!1,name:"tooltipRender",tooltip:this};this.trigger("tooltipRender",e);var t=this.renderTooltipElement(this.areaBounds,this.location);this.drawMarker(t.isBottom,t.isRight,this.markerSize)}this.trigger("loaded",{tooltip:this});var i=document.getElementById("chartmeasuretext");i&&sf.base.remove(i),this.allowServerDataBinding=!0},i.prototype.createTooltipElement=function(){if(this.textElements=[],!this.template||this.shared){this.enableRTL&&this.element.setAttribute("dir","ltr");var e=this.renderer.createSvg({id:this.element.id+"_svg"});this.element.appendChild(e);var t=document.getElementById(this.element.id+"_group");t||(t=this.renderer.createGroup({id:this.element.id+"_group"})).setAttribute("transform","translate(0,0)"),e.appendChild(t);var i=this.renderer.drawPath({id:this.element.id+"_path","stroke-width":this.border.width,fill:this.fill||this.themeStyle.tooltipFill,opacity:"TailwindDark"!==this.theme&&"Tailwind"!==this.theme&&"Bootstrap5"!==this.theme&&"Bootstrap5Dark"!==this.theme||.75!==this.opacity?this.opacity:1,stroke:this.border.color});t.appendChild(i)}},i.prototype.drawMarker=function(e,t,i){if(this.shapes.length<=0)return null;for(var n,s=0,o=this.renderer.createGroup({id:this.element.id+"_trackball_group"}),r=m(this.element.id+"_group"),a=(this.enableRTL?this.elementSize.width-i/2:2*this.marginX+i/2)+(t?this.arrowPadding:0),l=0,d=this.shapes;l<d.length;l++){var c=d[l];"None"!==c&&(n=new y(this.element.id+"_Trackball_"+s,this.palette[s],1,"#cccccc",1,null),this.markerPoint[s]&&o.appendChild(v(new S(a,this.markerPoint[s]-this.padding+(e?this.arrowPadding:0)),c,new h(i,i),"",n,null)),s++)}r.appendChild(o)},i.prototype.renderTooltipElement=function(e,t){var i,n=m(this.element.id),s=new S(0,0),o=new S(0,0),r=m(this.element.id+"_svg"),l=m(this.element.id+"_group"),h=m(this.element.id+"_path"),u=!1,f=!1,g=!1,v=0,b=0;if(""!==this.header&&(this.elementSize.height+=this.marginY),this.content.length>1?(i=this.sharedTooltipLocation(e,this.location.x,this.location.y),u=!0):(i=this.tooltipLocation(e,t,s,o),this.inverted?v=(f=i.x<t.x+this.clipBounds.x)?0:this.arrowPadding:(g=!(u=i.y<t.y+this.clipBounds.y),b=u?0:this.arrowPadding)),""!==this.header){var y=2,w=this.isWrap?this.wrappedText:this.header;if(this.isWrap&&"string"==typeof w&&(w.indexOf("<")>-1||w.indexOf(">")>-1))y=w.split("<br>").length;var C=a(this.isWrap?this.wrappedText:this.header,this.textStyle).height+this.marginY*y+(g?this.arrowPadding:0)+(this.isWrap?5:0),E="M "+(3*this.marginX+(f||u||g?0:this.arrowPadding))+" "+C+"L "+(i.width+(f||u||g?0:this.arrowPadding)-2*this.marginX)+" "+C,x=this.renderer.drawPath({id:this.element.id+"_header_path","stroke-width":1,fill:null,opacity:.8,stroke:this.themeStyle.tooltipHeaderLine,d:E});l.appendChild(x)}var O=this.border.width/2,T=new c(O+v,O+b,i.width-O,i.height-O);if(l.setAttribute("opacity","1"),!this.enableAnimation||this.isFirst||this.crosshair?this.updateDiv(n,i.x,i.y):this.animateTooltipDiv(n,i),r.setAttribute("height",(i.height+this.border.width+(this.inverted?0:this.arrowPadding)+5).toString()),r.setAttribute("width",(i.width+this.border.width+(this.inverted?this.arrowPadding:0)+5).toString()),r.setAttribute("opacity","1"),sf.base.isNullOrUndefined(this.tooltipPlacement)||(u=this.tooltipPlacement.indexOf("Top")>-1,g=this.tooltipPlacement.indexOf("Bottom")>-1,f=this.tooltipPlacement.indexOf("Left")>-1),h.setAttribute("d",d(this.rx,this.ry,T,s,this.arrowPadding,u,g,f,o.x,o.y,this.controlName)),this.enableShadow&&"Bootstrap4"!==this.theme){var A=this.element.id+"_shadow";"Tailwind"===this.theme||"TailwindDark"===this.theme||"Bootstrap5"===this.theme||"Bootstrap5Dark"===this.theme?h.setAttribute("box-shadow","0px 1px 2px rgba(0, 0, 0, 0.06), 0px 1px 3px rgba(0, 0, 0, 0.1)"):h.setAttribute("filter",sf.base.Browser.isIE?"":"url(#"+A+")");var N='<filter id="'+A+'" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="3"/>';N+='<feOffset dx="3" dy="3" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="0.5"/>',N+='</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';var k=this.renderer.createDefs();k.setAttribute("id",this.element.id+"SVG_tooltip_definition"),l.appendChild(k),k.innerHTML=N}var I="Fluent"===this.theme?"#FFFFFF":"FluentDark"===this.theme?"#323130":this.border.color;return h.setAttribute("stroke",I),sf.base.isNullOrUndefined(this.border.dashArray)||h.setAttribute("stroke-dasharray",this.border.dashArray),this.changeText(new S(v,b),g,!f&&!u&&!g),this.revert&&(this.inverted=!this.inverted,this.revert=!1),new p(g,!f&&!u&&!g)},i.prototype.changeText=function(e,t,i){var n=document.getElementById(this.element.id+"_text");t&&n.setAttribute("transform","translate(0,"+this.arrowPadding+")"),i&&n.setAttribute("transform","translate("+this.arrowPadding+" 0)")},i.prototype.findFormattedText=function(){this.formattedText=[],""!==this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()&&(this.formattedText=this.formattedText.concat(this.header)),this.formattedText=this.formattedText.concat(this.content)},i.prototype.renderText=function(e){var t,i,n,s,o,r=0,l=0,d=0,c=sf.base.extend({},this.textStyle,null,!0).properties,p=m(this.element.id+"_group"),u="";this.findFormattedText(),this.isWrap=!1;var v="rtl"===document.body.getAttribute("dir")&&!this.enableRTL?"end":"start";this.leftSpace=this.areaBounds.x+this.location.x,this.rightSpace=this.areaBounds.x+this.areaBounds.width-this.leftSpace;var b=this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim(),y=this.header.indexOf("<b>")>-1&&this.header.indexOf("</b>")>-1,C=a(this.formattedText[0],c).width+2*this.marginX+this.arrowPadding,S=this.location.x-C<this.location.x,E=this.areaBounds.x+this.areaBounds.width<this.location.x+C,x=""!==b?this.marginY:0,O=!0,T=!0;this.markerPoint=[];var A,N=this.shapes.length>0?10:0,k=this.shapes.length>0?5:0,I="Normal",M=this.themeStyle.tooltipLightLabel,L=22/parseFloat("13px")*parseFloat(c.size),B=[];e&&!this.isCanvas||(g(this.element.id+"_text"),g(this.element.id+"_header_path"),g(this.element.id+"_trackball_group"),g(this.element.id+"SVG_tooltip_definition"));for(var D=new f(this.element.id+"_text",2*this.marginX,2*this.marginY+2*this.padding+(2===this.marginY?3:0),v,""),P=w(D,c,null,p),R=1===this.formattedText.length&&this.formattedText[0].indexOf(" : <b>")>-1,H=""!==this.header,z=H&&y?16:13,U=0,q=this.formattedText.length;U<q;U++)if(n=this.formattedText[U].replace(/<(b|strong)>/g,"<b>").replace(/<\/(b|strong)>/g,"</b>").split(/<br.*?>/g),0===U&&!R&&this.isTextWrap&&(this.leftSpace<C||S)&&(this.rightSpace<C||E)&&(A=Math.round(this.leftSpace>this.rightSpace?this.leftSpace/z:this.rightSpace/z),n=(""!==b?b:this.formattedText[U]).match(new RegExp(".{1,"+A+"}","g")),this.wrappedText=y?"<b>"+n.join("<br>")+"</b>":n.join("<br>"),this.isWrap=n.length>1),""!==n[0]){0===U&&""!==b||this.markerPoint.push((""!==b?this.marginY:0)+D.y+r);for(var _=0,F=n.length;_<F;_++){t=n[_].replace(/<b>/g,"<br><b>").replace(/<\/b>/g,"</b><br>").replace(/:/g,this.enableRTL?"<br>‎: <br>":"<br>‎:<br>").split("<br>"),this.enableRTL&&t.length>0&&n[_].match(/:/g)&&(t[0]=t[0].trim(),t.reverse()),d=0,T=!0,r+=L;for(var V=0,j=t.length;V<j;V++)s=t[V],this.enableRTL&&""!==s&&this.isRTLText(s)&&(s=s.concat("‎")),/\S/.test(s)||""===s||(s=" "),(!T&&" "===s||""!==s.replace(/<b>/g,"").replace(/<\/b>/g,"").trim())&&(d+=" "!==s?4:0,T&&!O?(o={x:2*this.marginX+(N+k),dy:L+(T?x:0),fill:""},x=null):o=O&&T?{x:""===b?2*this.marginX+(N+k):2*this.marginX+(this.isWrap?N+k:0)}:{},T=!1,i=this.renderer.createTSpan(o,""),P.appendChild(i),s.indexOf("<b>")>-1||y&&0===V&&0===U&&(H||this.isWrap)?(I="bold",M=this.themeStyle.tooltipBoldLabel,u="font-weight:"+I,c.fontWeight=I,i.setAttribute("fill",this.textStyle.color||M)):(u="bold"===I?"font-weight:"+I:"",c.fontWeight=I,i.setAttribute("fill",this.textStyle.color||M)),(s.indexOf("</b>")>-1||y&&V===j-1&&0===U&&(H||this.isWrap))&&(I="Normal",M=this.themeStyle.tooltipLightLabel),i.textContent=s=this.getTooltipTextContent(s),d+=a(s,c).width,""!==u&&(i.style.fontWeight=u.split("font-weight:")[1],i.style.color=i.getAttribute("fill")),i.style.fontFamily="inherit",i.style.fontStyle="inherit",i.style.fontSize="inherit",O=!1);d-=4,l=Math.max(l,d),B.push(d)}}this.elementSize=new h(l+(l>0?2*this.marginX:0),r),this.elementSize.width+=N+k;var W=P.childNodes[0];if(""!==b&&W&&!this.isWrap){c.fontWeight="bold";var X=(this.elementSize.width+2*this.padding)/2-a(b,c).width/2;W.setAttribute("x",X.toString())}this.renderContentRTL(P,H,N+k,B)},i.prototype.renderContentRTL=function(e,t,i,n){if(this.enableRTL)for(var s=void 0,o=t?1:0,r=0;r<e.childNodes.length;r++)s=e.childNodes[r],t&&!(r>0)||sf.base.isNullOrUndefined(s.getAttribute("x"))||(s.setAttribute("x",(this.elementSize.width-(i+n[o])).toString()),o++)},i.prototype.getTooltipTextContent=function(e){var t=e.match(/<[a-zA-Z\/](.|\n)*?>/g);if(sf.base.isNullOrUndefined(t))return e;for(var i=this.isRTLText(e),n=0;n<t.length;n++)this.isValidHTMLElement(t[n].replace("<","").replace("/","").replace(">","").trim())&&(e=e.replace(t[n],i?"‎":""));return e},i.prototype.isValidHTMLElement=function(e){return"[object HTMLUnknownElement]"!=document.createElement(e).toString()},i.prototype.isRTLText=function(e){return/[\u0590-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]/.test(e)},i.prototype.createTemplate=function(e,t){var i={cancel:!1,name:"tooltipRender",tooltip:this};this.trigger("tooltipRender",i);var n=document.getElementById(this.element.id);this.isCanvas&&this.removeSVG();var s=n.firstElementChild;if(s&&sf.base.remove(s),i.cancel)sf.base.remove(m(this.element.id+"_tooltip"));else{for(var o=sf.base.createElement("div",{id:this.element.id+"parent_template"}),r=this.templateFn(this.data,this.controlInstance,o.id,o.id+"_blazorTemplate","");r&&r.length>0;)sf.base.isBlazor()||1===r.length?(o.appendChild(r[0]),r=null):o.appendChild(r[0]);n.appendChild(o);var a=this.isCanvas?o:this.element,l=a.getBoundingClientRect();this.padding=0,this.elementSize=new h(l.width,l.height);var d=this.shared?this.sharedTooltipLocation(e,this.location.x,this.location.y):this.tooltipLocation(e,t,new S(0,0),new S(0,0));if(!this.enableAnimation||this.isFirst||this.crosshair?this.updateDiv(a,d.x,d.y):this.animateTooltipDiv(this.element,d),this.blazorTemplate){var c=function(){var i=m(p.element.id).getBoundingClientRect();p.elementSize=new h(i.width,i.height);var n=p.tooltipLocation(e,t,new S(0,0),new S(0,0));p.updateDiv(m(p.element.id),n.x,n.y)},p=this;c.bind(p,e,t),sf.base.updateBlazorTemplate(this.element.id+"parent_template_blazorTemplate",this.blazorTemplate.name,this.blazorTemplate.parent,void 0,c)}}},i.prototype.sharedTooltipLocation=function(e,t,i){var n=this.elementSize.width+2*this.marginX,s=this.elementSize.height+2*this.marginY,o=new c(t+2*this.padding,i-s-this.padding,n,s);return o.y<e.y&&(o.y+=o.height+2*this.padding),o.x+o.width>e.x+e.width&&(o.x-=o.width+4*this.padding),o},i.prototype.getCurrentPosition=function(e,t,i,n){var s=this.tooltipPlacement,o=this.clipBounds.x,r=this.clipBounds.y,a=this.offset,l=this.elementSize.width+2*this.marginX,d=this.elementSize.height+2*this.marginY,h=new S(t.x,t.y);return"Top"===s||"Bottom"===s?(h=new S(h.x+o-this.elementSize.width/2-this.padding,h.y+r-this.elementSize.height-2*this.padding-this.arrowPadding-a),i.x=n.x=l/2,"Bottom"===s&&(h.y=t.y+r+a),e.x+e.width<h.x+l?(h.x=e.width>l?e.x+e.width-l+6:e.x,i.x=n.x=e.width>l?e.x+t.x-h.x:t.x):e.x>h.x&&(h.x=e.x,i.x=n.x=t.x)):(h=new S(h.x+o+a,h.y+r-this.elementSize.height/2-this.padding),i.y=n.y=d/2,"Left"===s&&(h.x=t.x+o-a-(l+this.arrowPadding)),e.y+e.height<h.y+d?(h.y=e.height>d?e.y+e.height-d+6:e.y,i.y=n.y=e.height>d?e.y+t.y-h.y:t.y):e.y>h.y&&(h.y=e.y,i.y=n.y=t.y)),new c(h.x,h.y,l,d)},i.prototype.tooltipLocation=function(e,t,i,n){if(!sf.base.isNullOrUndefined(this.tooltipPlacement))return this.getCurrentPosition(e,t,i,n);var s=new S(t.x,t.y),o=this.elementSize.width+2*this.marginX,r=this.elementSize.height+2*this.marginY,a=this.offset,d=this.clipBounds.x,h=this.clipBounds.y,p=e.x,u=e.y;return this.outOfBounds=!1,this.inverted?(s=new S(s.x+d+a,s.y+h-this.elementSize.height/2-this.padding),i.y=n.y=r/2,(s.x+o+this.arrowPadding>p+e.width||this.isNegative)&&(s.x=(t.x>e.width+e.x?e.width:t.x)+d-a-(o+this.arrowPadding)),s.x<p&&(s.x=(t.x<0?0:t.x)+d+a),s.y<=u&&(i.y-=u-s.y,n.y-=u-s.y,s.y=u),s.y+r>=u+e.height&&(i.y+=s.y+r-(u+e.height),n.y+=s.y+r-(u+e.height),s.y-=s.y+r-(u+e.height)),i.y+this.arrowPadding>r-this.ry&&(i.y=r-this.ry-this.arrowPadding,n.y=r),i.y-this.arrowPadding<this.ry&&(i.y=n.y=this.ry+this.arrowPadding),"Chart"===this.controlName&&((s.y+i.y<this.areaMargin+this.arrowPadding||e.y+e.height-(s.y+i.y)<this.areaMargin+this.arrowPadding)&&(this.outOfBounds=!0),l(s.x,s.y,e)&&!this.outOfBounds||(this.inverted=!this.inverted,s=new S(t.x+d-this.padding-this.elementSize.width/2,t.y+h-this.elementSize.height-2*this.padding-a-this.arrowPadding),this.revert=!0,n.x=i.x=o/2,n.y=i.y=0,(s.y<u||this.isNegative)&&(s.y=(t.y<0?0:t.y)+a+h),s.y+this.arrowPadding+r>u+e.height&&(s.y=Math.min(t.y,u+e.height)+h-this.elementSize.height-2*this.padding-a-this.arrowPadding),n.x=o/2,s.x<p&&(n.x-=p-s.x,i.x-=p-s.x,s.x=p),s.x+o>e.width+p&&(i.x+=s.x+o-(e.width+p),n.x+=s.x+o-(e.width+p),s.x-=s.x+o-(e.width+p)),this.arrowPadding+i.x>o-this.rx&&(n.x=o-this.rx-this.arrowPadding,i.x=o-this.rx-this.arrowPadding),i.x-this.arrowPadding<this.rx&&(i.x=n.x=this.rx+this.arrowPadding)))):(s=new S(s.x+d-this.elementSize.width/2-this.padding,s.y+h-this.elementSize.height-2*this.padding-this.arrowPadding-a),i.x=n.x=o/2,(s.y<u||this.isNegative)&&(s.y=(t.y<0?0:t.y)+h+a),s.y+r+this.arrowPadding>u+e.height&&(s.y=Math.min(t.y,u+e.height)+h-this.elementSize.height-2*this.padding-this.arrowPadding-a),n.x=o/2,s.x<p&&(i.x-=p-s.x,n.x-=p-s.x,s.x=p),s.x+o>p+e.width&&(i.x+=s.x+o-(p+e.width),n.x+=s.x+o-(p+e.width),s.x-=s.x+o-(p+e.width)),i.x+this.arrowPadding>o-this.rx&&(i.x=o-this.rx-this.arrowPadding,n.x=o-this.rx-this.arrowPadding),i.x-this.arrowPadding<this.rx&&(i.x=n.x=this.rx+this.arrowPadding),"Chart"===this.controlName&&((e.x+e.width-(s.x+i.x)<this.areaMargin+this.arrowPadding||s.x+i.x<this.areaMargin+this.arrowPadding)&&(this.outOfBounds=!0),l(s.x,s.y,e)&&!this.outOfBounds||(this.inverted=!this.inverted,this.revert=!0,s=new S(t.x+a+d,t.y+h-this.elementSize.height/2-this.padding),n.x=i.x=0,n.y=i.y=r/2,(s.x+this.arrowPadding+o>p+e.width||this.isNegative)&&(s.x=(t.x>e.width?e.width:t.x)+d-a-(this.arrowPadding+o)),s.x<p&&(s.x=(t.x<0?0:t.x)+a+d),s.y<=u&&(n.y-=u-s.y,i.y-=u-s.y,s.y=u),s.y+r>=e.height+u&&(i.y+=s.y+r-(e.height+u),n.y+=s.y+r-(e.height+u),s.y-=s.y+r-(e.height+u)),this.arrowPadding+i.y>r-this.ry&&(i.y=r-this.arrowPadding-this.ry,n.y=r),i.y-this.arrowPadding<this.ry&&(i.y=this.arrowPadding+this.ry,n.y=0)))),new c(s.x,s.y,o,r)},i.prototype.animateTooltipDiv=function(e,t){var i,n=this,s=parseFloat(e.style.left),o=parseFloat(e.style.top);new sf.base.Animation({}).animate(e,{duration:this.duration,progress:function(r){i=r.timeStamp/r.duration,e.style.animation=null,"Chart"===n.controlName&&n.shared&&!n.enableRTL?(e.style.transition="transform 0.1s",e.style.transform="translate("+(s+i*(t.x-s))+"px,"+(o+i*(t.y-o))+"px)"):(e.style.left=s+i*(t.x-s)+"px",e.style.top=o+i*(t.y-o)+"px")},end:function(i){n.updateDiv(e,t.x,t.y),n.trigger("animationComplete",{tooltip:n})}})},i.prototype.updateDiv=function(e,t,i){"Chart"!==this.controlName||!this.shared||this.crosshair||this.enableRTL?(e.style.left=t+"px",e.style.top=i+"px"):e.style.transform="translate("+t+"px,"+i+"px)"},i.prototype.updateTemplateFn=function(){if(this.template)try{document.querySelectorAll(this.template).length?this.templateFn=sf.base.compile(document.querySelector(this.template).innerHTML.trim()):this.templateFn=sf.base.compile(this.template)}catch(e){this.templateFn=sf.base.compile(this.template)}},i.prototype.fadeOut=function(){var e=this,t=this.isCanvas&&!this.template?m(this.element.id+"_svg"):m(this.element.id),i=m(this.element.id);if(t){var n=t.firstChild;if(n.nodeType!=Node.ELEMENT_NODE&&(n=t.firstElementChild),this.isCanvas&&!this.template&&(n=document.getElementById(this.element.id+"_group")?document.getElementById(this.element.id+"_group"):n),!n)return null;var s=parseFloat(n.getAttribute("opacity"));s=sf.base.isNullOrUndefined(s)?1:s,new sf.base.Animation({}).animate(n,{duration:200,progress:function(t){e.progressAnimation(n,s,t.timeStamp/t.duration)},end:function(){e.fadeOuted=!0,e.endAnimation(n),i.style.transition=""}})}},i.prototype.progressAnimation=function(e,t,i){e.style.animation="",e.setAttribute("opacity",(t-i).toString())},i.prototype.endAnimation=function(e){e.setAttribute("opacity","0"),this.template&&(e.style.display="none"),this.trigger("animationComplete",{tooltip:this})},i.prototype.getPersistData=function(){return this.addOnPersist([])},i.prototype.getModuleName=function(){return"tooltip"},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.element.classList.remove("e-tooltip")},i.prototype.onPropertyChanged=function(e,t){this.blazorTemplate&&sf.base.resetBlazorTemplate(this.element.id+"parent_template_blazorTemplate"),this.isFirst=!1,this.render()},x([sf.base.Property(!1)],i.prototype,"enable",void 0),x([sf.base.Property(!1)],i.prototype,"shared",void 0),x([sf.base.Property(!1)],i.prototype,"crosshair",void 0),x([sf.base.Property(!0)],i.prototype,"enableShadow",void 0),x([sf.base.Property(null)],i.prototype,"fill",void 0),x([sf.base.Property("")],i.prototype,"header",void 0),x([sf.base.Property(.75)],i.prototype,"opacity",void 0),x([sf.base.Complex({size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},O)],i.prototype,"textStyle",void 0),x([sf.base.Property(null)],i.prototype,"template",void 0),x([sf.base.Property(!0)],i.prototype,"enableAnimation",void 0),x([sf.base.Property(300)],i.prototype,"duration",void 0),x([sf.base.Property(!1)],i.prototype,"inverted",void 0),x([sf.base.Property(!1)],i.prototype,"isNegative",void 0),x([sf.base.Complex({color:"#cccccc",width:.5},T)],i.prototype,"border",void 0),x([sf.base.Property([])],i.prototype,"content",void 0),x([sf.base.Property(10)],i.prototype,"markerSize",void 0),x([sf.base.Complex({x:0,y:0},N)],i.prototype,"clipBounds",void 0),x([sf.base.Property([])],i.prototype,"palette",void 0),x([sf.base.Property([])],i.prototype,"shapes",void 0),x([sf.base.Complex({x:0,y:0},N)],i.prototype,"location",void 0),x([sf.base.Property(0)],i.prototype,"offset",void 0),x([sf.base.Property(4)],i.prototype,"rx",void 0),x([sf.base.Property(4)],i.prototype,"ry",void 0),x([sf.base.Property(5)],i.prototype,"marginX",void 0),x([sf.base.Property(5)],i.prototype,"marginY",void 0),x([sf.base.Property(7)],i.prototype,"arrowPadding",void 0),x([sf.base.Property(null)],i.prototype,"data",void 0),x([sf.base.Property("Material")],i.prototype,"theme",void 0),x([sf.base.Complex({x:0,y:0,width:0,height:0},A)],i.prototype,"areaBounds",void 0),x([sf.base.Property(null)],i.prototype,"availableSize",void 0),x([sf.base.Property()],i.prototype,"blazorTemplate",void 0),x([sf.base.Property(!1)],i.prototype,"isCanvas",void 0),x([sf.base.Property(!1)],i.prototype,"isTextWrap",void 0),x([sf.base.Property(null)],i.prototype,"tooltipPlacement",void 0),x([sf.base.Property(null)],i.prototype,"controlInstance",void 0),x([sf.base.Property("")],i.prototype,"controlName",void 0),x([sf.base.Event()],i.prototype,"tooltipRender",void 0),x([sf.base.Event()],i.prototype,"loaded",void 0),x([sf.base.Event()],i.prototype,"animationComplete",void 0),x([sf.base.Property(!1)],i.prototype,"enableRTL",void 0),i=x([sf.base.NotifyPropertyChanges],i)}(sf.base.Component);return e.TextStyle=O,e.TooltipBorder=T,e.AreaBounds=A,e.ToolLocation=N,e.Tooltip=k,e.getTooltipThemeColor=s,e.measureText=a,e.withInAreaBounds=l,e.findDirection=d,e.Size=h,e.Rect=c,e.Side=p,e.CustomizeOption=u,e.TextOption=f,e.getElement=m,e.removeElement=g,e.drawSymbol=v,e.calculateShapes=b,e.PathOption=y,e.textElement=w,e.TooltipLocation=S,e.SvgRenderer=t,e.CanvasRenderer=n,e},sf.svgbase=sf.svgbase({})},"./single-bundle.js":function(e,t,i){"use strict";i.r(t);i("./modules/base.js"),i("./modules/spinner.js"),i("./modules/popup.js"),i("./modules/popupsbase.js"),i("./modules/navigationsbase.js"),i("./modules/splitbuttonsbase.js"),i("./modules/svgbase.js"),i("./modules/sortable.js"),i("./syncfusion-blazor.js"),i("./modules/sf-accordion.js"),i("./modules/sf-accumulation-chart.js"),i("./modules/sf-barcode.js"),i("./modules/sf-breadcrumb.js"),i("./modules/sf-bullet-chart.js"),i("./modules/sf-calendar.js"),i("./modules/sf-chart.js"),i("./modules/sf-circulargauge.js"),i("./modules/sf-colorpicker.js"),i("./modules/sf-contextmenu.js"),i("./modules/sf-dashboard-layout.js"),i("./modules/sf-datepicker.js"),i("./modules/sf-daterangepicker.js"),i("./modules/sf-diagramcomponent.js"),i("./modules/sf-dialog.js"),i("./modules/sf-drop-down-button.js"),i("./modules/sf-dropdownlist.js"),i("./modules/sf-filemanager.js"),i("./modules/sf-floating-action-button.js"),i("./modules/sf-gantt.js"),i("./modules/sf-grid.js"),i("./modules/sf-heatmap.js"),i("./modules/sf-inplaceeditor.js"),i("./modules/sf-kanban.js"),i("./modules/sf-lineargauge.js"),i("./modules/sf-listbox.js"),i("./modules/sf-listview.js"),i("./modules/sf-maps.js"),i("./modules/sf-maskedtextbox.js"),i("./modules/sf-menu.js"),i("./modules/sf-multiselect.js"),i("./modules/sf-numerictextbox.js"),i("./modules/sf-pager.js"),i("./modules/sf-pivotview.js"),i("./modules/sf-progressbar.js"),i("./modules/sf-range-navigator.js"),i("./modules/sf-richtexteditor.js"),i("./modules/sf-schedule.js"),i("./modules/sf-sidebar.js"),i("./modules/sf-signature.js"),i("./modules/sf-slider.js"),i("./modules/sf-smith-chart.js"),i("./modules/sf-sparkline.js"),i("./modules/sf-speeddial.js"),i("./modules/sf-spinner.js"),i("./modules/sf-splitter.js"),i("./modules/sf-stock-chart.js"),i("./modules/sf-svg-export.js"),i("./modules/sf-tab.js"),i("./modules/sf-textbox.js"),i("./modules/sf-timepicker.js"),i("./modules/sf-toast.js"),i("./modules/sf-toolbar.js"),i("./modules/sf-tooltip.js"),i("./modules/sf-treegrid.js"),i("./modules/sf-treemap.js"),i("./modules/sf-treeview.js"),i("./modules/sf-uploader.js")},"./syncfusion-blazor.js":function(e,t){var i={instances:[],getElementByXpath:function(e){return document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue},getElement:function(e,t,i){var n=null!=e&&null!=window[e]?window[e][t]:null;return null!=n?n:window.sfBlazor.getElementByXpath(i)},getAttribute:function(e,t,i,n){var s=window.sfBlazor.getElement(e,t,i);if(null!=s)return s.getAttribute(n)},setAttribute:function(e,t,i,n,s){window.sfBlazor.getElement(e,t,i).setAttribute(n,s)},addClass:function(e,t,i,n){sf.base.addClass([window.sfBlazor.getElement(e,t,i)],n)},removeClass:function(e,t,i,n){sf.base.removeClass([window.sfBlazor.getElement(e,t,i)],n)},getClassList:function(e,t,i){return Array.prototype.slice.call(window.sfBlazor.getElement(e,t,i).classList)},enableRipple:function(e){sf.base.enableRipple(e)},isDevice:function(e){return e&&this.enableRtl(e),sf.base.Browser.isDevice},animate:function(e,t){new sf.base.Animation(t).animate(e)},setGlobalAnimationValue:function(e){sf.base.setGlobalAnimation(e)},callRipple:function(e,t){sf.base.rippleEffect(e,t)},createXPathFromElement:function(e){for(var t=document.getElementsByTagName("*"),i=[];e&&1===e.nodeType;e=e.parentNode)if(e.hasAttribute("id")){for(var n=0,s=0;s<t.length&&(t[s].hasAttribute("id")&&t[s].id===e.id&&n++,!(n>1));s++);if(1===n)return i.unshift('id("'+e.getAttribute("id")+'")'),i.join("/");i.unshift(e.localName.toLowerCase()+'[@id="'+e.getAttribute("id")+'"]')}else{for(var o=1,r=e.previousSibling;r;r=r.previousSibling)r.localName===e.localName&&o++;i.unshift(e.localName.toLowerCase()+"["+o+"]")}return i.length?"/"+i.join("/"):null},getDomObject:function(e,t,i){var n=e+sf.base.getUniqueID(e),s={id:t.id,class:t.className,xPath:window.sfBlazor.createXPathFromElement(t),domUUID:n},o=i&&i.elementID;return o&&(window[o]=sf.base.isNullOrUndefined(window[o])?{}:window[o],window[o][n]=t,s.elementID=o),s},focusButton:function(e){e.focus()},setCompInstance:function(e){window.sfBlazor.instances[e.dataId]=e},getCompInstance:function(e){return window.sfBlazor.instances[e]},setProgress:function(e,t,i,n,s,o){return i=i.querySelector(".e-spinner"),window.requestAnimationFrame((function(){s&&(e.style[o?"height":"width"]=n+"%"),t.parentElement.setAttribute("aria-valuenow",n.toString()),100===n&&(t.classList.remove("e-cont-animate","e-animate-end"),i.style.width="auto",i.style.height="auto")}))},setAnimation:function(e,t,i,n,s,o){t=t.querySelector(".e-spinner"),new sf.base.Animation({}).animate(e,{duration:n,name:"Progress"+i,timingFunction:s,begin:function(){o&&(t.style.width=Math.max(t.offsetWidth,e.offsetWidth)+"px",t.style.height=Math.max(t.offsetHeight,e.offsetHeight)+"px",e.classList.add("e-cont-animate"))},end:function(){e.classList.add("e-animate-end")}})},cancelAnimation:function(e){window.cancelAnimationFrame(e)},getSpinnerTheme:function(e){var t=e?window.getComputedStyle(e,":after").getPropertyValue("content"):"Material";return t&&t.replace(/['"]+/g,"")},chipKeydownHandler:function(e){e&&e.addEventListener("keydown",(function(e){e.target&&e.target.classList.contains("e-chip")&&" "==e.key&&e.preventDefault()}))}};sf.base.enableBlazorMode(),window.sfBlazor=window.sfBlazor||{},Object.assign(window.sfBlazor,i)}});